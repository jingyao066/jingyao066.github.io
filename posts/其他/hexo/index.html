<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Hexo
    </h1>
    <div class="post-meta"><span title='2018-11-05 13:54:31 +0000 UTC'>2018-11-05</span>&nbsp;·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85hexo" aria-label="安装Hexo">安装Hexo</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="修改配置文件">修改配置文件</a></li>
                <li>
                    <a href="#%e4%b8%8a%e4%bc%a0%e5%88%b0github" aria-label="上传到github">上传到github</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e5%8f%8a%e9%85%8d%e7%bd%ae%e4%b8%bb%e9%a2%98" aria-label="修改及配置主题">修改及配置主题</a><ul>
                        
                <li>
                    <a href="#%e5%88%87%e6%8d%a2%e4%b8%bb%e9%a2%98" aria-label="切换主题">切换主题</a></li>
                <li>
                    <a href="#%e5%88%87%e6%8d%a2%e4%b8%bb%e9%a2%98%e6%a0%b7%e5%bc%8f" aria-label="切换主题样式">切换主题样式</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%aemenu" aria-label="设置Menu">设置Menu</a></li>
                <li>
                    <a href="#%e5%ba%95%e9%83%a8%e9%9a%90%e8%97%8f%e7%94%b1hexo%e5%bc%ba%e5%8a%9b%e9%a9%b1%e5%8a%a8%e4%b8%bb%e9%a2%98--nextmist" aria-label="底部隐藏由Hexo强力驱动、主题&ndash;NexT.Mist">底部隐藏由Hexo强力驱动、主题&ndash;NexT.Mist</a></li>
                <li>
                    <a href="#%e6%9b%b4%e6%94%b9%e5%ba%95%e9%83%a8%e5%9b%be%e6%a0%87" aria-label="更改底部图标">更改底部图标</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e5%8a%a8%e7%94%bb%e9%80%9f%e5%ba%a6" aria-label="修改动画速度">修改动画速度</a></li>
                <li>
                    <a href="#%e9%98%85%e8%af%bb%e5%85%a8%e6%96%87" aria-label="阅读全文">阅读全文</a></li>
                <li>
                    <a href="#next%e4%b8%bb%e9%a2%98%e7%89%88%e6%9c%ac%e5%8d%87%e7%ba%a751x-6x" aria-label="next主题版本升级(5.1.x-6.x)">next主题版本升级(5.1.x-6.x)</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%86%99%e6%96%87%e7%ab%a0" aria-label="写文章">写文章</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e5%88%86%e7%b1%bb%e9%80%89%e9%a1%b9" aria-label="添加“分类”选项">添加“分类”选项</a><ul>
                        
                <li>
                    <a href="#%e7%bb%99%e6%96%87%e7%ab%a0%e6%b7%bb%e5%8a%a0categories%e5%b1%9e%e6%80%a7" aria-label="给文章添加“categories”属性">给文章添加“categories”属性</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e6%a0%87%e7%ad%be%e9%80%89%e9%a1%b9" aria-label="创建“标签”选项">创建“标签”选项</a><ul>
                        
                <li>
                    <a href="#%e7%bb%99%e6%96%87%e7%ab%a0%e6%b7%bb%e5%8a%a0tags%e5%b1%9e%e6%80%a7" aria-label="给文章添加“tags”属性">给文章添加“tags”属性</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0about%e6%a0%87%e7%ad%be" aria-label="添加about标签">添加about标签</a></li>
                <li>
                    <a href="#%e5%bc%95%e7%94%a8%e5%9b%be%e7%89%87" aria-label="引用图片">引用图片</a></li>
                <li>
                    <a href="#%e5%a4%9a%e5%8f%b0%e7%94%b5%e8%84%91%e6%93%8d%e4%bd%9chexo%e5%8d%9a%e5%ae%a2" aria-label="多台电脑操作hexo博客">多台电脑操作hexo博客</a><ul>
                        
                <li>
                    <a href="#hexo%e6%90%ad%e5%bb%ba%e5%8d%9a%e5%ae%a2%e5%8e%9f%e7%90%86" aria-label="hexo搭建博客原理">hexo搭建博客原理</a><ul>
                        
                <li>
                    <a href="#%e5%af%b9usernamegithubio%e4%bb%93%e5%ba%93%e6%96%b0%e5%bb%bahexo%e5%88%86%e6%94%af%e5%b9%b6%e5%85%8b%e9%9a%86" aria-label="对username.github.io仓库新建hexo分支，并克隆">对username.github.io仓库新建hexo分支，并克隆</a></li>
                <li>
                    <a href="#%e5%b0%86%e6%9c%ac%e5%9c%b0%e5%8d%9a%e5%ae%a2%e7%9a%84%e9%83%a8%e7%bd%b2%e6%96%87%e4%bb%b6%e6%8b%b7%e8%b4%9d%e8%bf%9b%e5%88%9a%e6%89%8d%e6%8b%89%e4%b8%8b%e6%9d%a5%e7%9a%84%e5%88%86%e6%94%af%e6%96%87%e4%bb%b6%e7%9b%ae%e5%bd%95" aria-label="将本地博客的部署文件拷贝进刚才拉下来的分支文件目录">将本地博客的部署文件拷贝进刚才拉下来的分支文件目录</a></li>
                <li>
                    <a href="#%e6%8f%90%e4%ba%a4hexo%e5%88%86%e6%94%af" aria-label="提交hexo分支">提交hexo分支</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9c%a8%e6%96%b0%e7%94%b5%e8%84%91%e4%b8%8a%e6%89%a7%e8%a1%8c%e4%b8%8b%e5%88%97%e6%93%8d%e4%bd%9c" aria-label="在新电脑上执行下列操作：">在新电脑上执行下列操作：</a><ul>
                        
                <li>
                    <a href="#%e8%87%b3%e6%ad%a4%e5%8d%9a%e5%ae%a2%e5%b7%b2%e7%bb%8f%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%85%b6%e4%bb%96%e7%94%b5%e8%84%91%e4%b8%8a%e8%bf%9b%e8%a1%8c%e5%90%8c%e6%ad%a5%e6%9b%b4%e6%96%b0%e5%92%8c%e7%bb%b4%e6%8a%a4%e4%ba%86" aria-label="至此，博客已经可以在其他电脑上进行同步更新和维护了。">至此，博客已经可以在其他电脑上进行同步更新和维护了。</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9e%e5%88%b0%e4%b9%8b%e5%89%8d%e7%9a%84%e7%94%b5%e8%84%91%e4%b8%8a%e6%9b%b4%e6%96%b0%e5%b9%b6%e6%8f%90%e4%ba%a4%e5%8d%9a%e5%ae%a2" aria-label="回到之前的电脑上更新并提交博客">回到之前的电脑上更新并提交博客</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8leancloud%e7%bb%9f%e8%ae%a1%e6%96%87%e7%ab%a0%e8%ae%bf%e9%97%ae%e6%ac%a1%e6%95%b0" aria-label="使用LeanCloud统计文章访问次数">使用LeanCloud统计文章访问次数</a></li>
                <li>
                    <a href="#%e4%b8%8d%e8%92%9c%e5%ad%90%e7%bb%9f%e8%ae%a1%e8%ae%bf%e9%97%ae%e4%ba%ba%e6%95%b0%e8%ae%bf%e9%97%ae%e6%80%bb%e9%87%8f" aria-label="不蒜子统计访问人数、访问总量">不蒜子统计访问人数、访问总量</a><ul>
                        
                <li>
                    <a href="#%e4%b8%8d%e8%92%9c%e5%ad%90%e7%bb%9f%e8%ae%a1%e6%97%a0%e6%b3%95%e6%98%be%e7%a4%ba%e9%97%ae%e9%a2%98" aria-label="不蒜子统计无法显示问题">不蒜子统计无法显示问题</a></li></ul>
                </li>
                <li>
                    <a href="#next%e4%b8%bb%e9%a2%98%e7%9a%84%e6%90%9c%e7%b4%a2%e5%8a%9f%e8%83%bd" aria-label="NexT主题的搜索功能">NexT主题的搜索功能</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0algolia%e6%90%9c%e7%b4%a2" aria-label="添加algolia搜索">添加algolia搜索</a><ul>
                        
                <li>
                    <a href="#next%e4%b8%bb%e9%a2%98%e5%8d%87%e7%ba%a760%e5%af%bc%e8%87%b4%e7%9a%84%e9%97%ae%e9%a2%98" aria-label="next主题升级6.0导致的问题">next主题升级6.0导致的问题</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e9%97%ae%e9%a2%98" aria-label="其他问题">其他问题</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f" aria-label="需要注意">需要注意</a></li>
                <li>
                    <a href="#%e5%9c%a8%e6%96%87%e7%ab%a0%e4%b8%ad%e5%bc%95%e5%85%a5%e8%a7%86%e9%a2%91" aria-label="在文章中引入视频">在文章中引入视频</a></li>
                <li>
                    <a href="#%e8%a7%a3%e5%86%b3github%e6%8f%90%e4%ba%a4commitcontributions%e4%b8%8d%e7%bb%9f%e8%ae%a1%e6%98%be%e7%a4%ba%e7%bb%bf%e8%89%b2%e7%9a%84%e9%97%ae%e9%a2%98" aria-label="解决github提交commit,contributions不统计显示绿色的问题">解决github提交commit,contributions不统计显示绿色的问题</a></li>
                <li>
                    <a href="#hexo%e4%bb%8egithub%e8%bf%81%e7%a7%bb%e5%88%b0gitee" aria-label="hexo从github迁移到gitee">hexo从github迁移到gitee</a></li>
                <li>
                    <a href="#hexo%e6%96%87%e7%ab%a0%e5%8a%a0%e5%af%86" aria-label="hexo文章加密">hexo文章加密</a></li>
                <li>
                    <a href="#%e5%b0%86hexo%e9%83%a8%e7%bd%b2%e5%88%b0%e8%87%aa%e5%b7%b1%e7%9a%84%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="将hexo部署到自己的服务器">将hexo部署到自己的服务器</a></li>
                <li>
                    <a href="#hexo%e5%a4%9a%e7%bb%88%e7%ab%af" aria-label="hexo多终端">hexo多终端</a></li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e9%87%8d%e5%bb%bahexo" aria-label="快速重建hexo">快速重建hexo</a></li>
                <li>
                    <a href="#%e8%84%9a%e6%9c%ac%e9%83%a8%e7%bd%b2%e5%ae%9a%e6%97%b6%e9%83%a8%e7%bd%b2" aria-label="脚本部署，定时部署">脚本部署，定时部署</a><ul>
                        
                <li>
                    <a href="#windows%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1" aria-label="windows定时任务">windows定时任务</a></li></ul>
                </li>
                <li>
                    <a href="#hexo-%e5%8d%87%e7%ba%a7" aria-label="hexo 升级">hexo 升级</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>总体步骤：</p>
<ul>
<li>安装Git Bash</li>
<li>安装NodeJs</li>
<li>安装hexo</li>
<li>生成SSH并添加到github</li>
<li>部署项目</li>
<li>上传到github</li>
<li>绑定个人域名</li>
<li>修改及配置主题</li>
<li>写文章部分</li>
</ul>
<p>安装git、NodeJs，创建github账号-创建仓库userName.github.io-将本地git通过ssh和远程github关联等等不再赘述。</p>
<h1 id="安装hexo">安装Hexo<a hidden class="anchor" aria-hidden="true" href="#安装hexo">#</a></h1>
<p>先进行npm的设置</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npm config set proxy null
</span></span><span style="display:flex;"><span>npm config set https-proxy null
</span></span><span style="display:flex;"><span>npm config set strict-ssl false
</span></span><span style="display:flex;"><span>// 安装cnmp，并使用淘宝镜像
</span></span><span style="display:flex;"><span>npm install -g cnpm --registry=https://registry.npm.taobao.org
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://hexo.io/zh-cn/docs/">Hexo官网地址</a></p>
<p>在git和node安装完毕后，即可使用 npm 安装 Hexo
<code>cnpm install -g hexo-cli</code></p>
<p>hexo安装完之后，初始化Hexo，先 cd 到想存放博客文件的父目录
<code>hexo init &lt;文件夹名&gt;</code></p>
<p>进入hexo文件夹
<code>cd &lt;文件夹名&gt;</code></p>
<p>安装npm组件
<code>cnpm install</code></p>
<p>坑：
因为刚开始文件夹的名字写错了，所以直接将hexo初始化的文件夹删掉了。然后再次运行初始化指令<code>hexo init hexoBlog</code>报错：
<code>Unexpected end off JSON input while parsing near ...</code>
<code>WARN Failed to install dependencies. Please run npm install manually!</code></p>
<p>解决办法：
安装指令：
<code>npm install --registry=https://registry.npm.taobao.org --loglevel=silly</code></p>
<p>清除缓存
<code>npm cache clean --force</code></p>
<h1 id="修改配置文件">修改配置文件<a hidden class="anchor" aria-hidden="true" href="#修改配置文件">#</a></h1>
<p>执行如下命令</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>hexo clean
</span></span><span style="display:flex;"><span>hexo generate
</span></span><span style="display:flex;"><span>hexo server
</span></span></code></pre></td></tr></table>
</div>
</div><p>注：hexo 3.0把服务器独立成个别模块，需要单独安装：
<code>npm i hexo-server</code>
然后打开
http://localhost:4000
就可以看到hexo的默认页面了</p>
<p>重新安装hexo后，执行<code>hexo clean</code>报错：
<code>(node:17148) ExperimentalWarning: The fs.promises API is experimental</code></p>
<p>原因：nodejs不是最新版本。
解决：更新nodejs版本。</p>
<p>windows直接到官网下载最新版本即可，linux、mac执行如下命令</p>
<p>清除npm缓存
<code>npm cache clean -f</code></p>
<p>安装n模块
<code>npm install -g n</code></p>
<p>升级node.js到最新稳定版
<code>n stable</code></p>
<h1 id="上传到github">上传到github<a hidden class="anchor" aria-hidden="true" href="#上传到github">#</a></h1>
<p>修改hexo安装目录下的_config.yml文件：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>deploy:
</span></span><span style="display:flex;"><span>  type: git
</span></span><span style="display:flex;"><span>  repo: https://github.com/ayanamiq/ayanamiq.github.io
</span></span><span style="display:flex;"><span>  branch: master
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li>repo是在github上创建好的仓库地址，仓库名字必须是username.github.io</li>
<li>key和后面value之间必须有空格。</li>
</ul>
<p>先安装：
<code>npm install hexo-deployer-git --save</code>
这样才能将你写好的文章部署到github服务器上并让别人浏览到。</p>
<p>初始化本地git仓库：
<code>git init</code></p>
<p>设置用户名:
<code>git config --global user.name &quot;王靖尧&quot;</code>
设置邮箱：
<code>git config --global user.email &quot;xxx@xxx.com&quot;</code>
关联远程仓库：
<code>git remote add origin git@github.com:ayanamiq/learngit.git</code></p>
<p>执行命令</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>hexo clean
</span></span><span style="display:flex;"><span>hexo generate
</span></span><span style="display:flex;"><span>hexo deploy
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果执行第一个指令就报：
<code>Usage: hexo &lt;command&gt;</code>
原因：我认为是没有生成本地服务
解决：执行指令
<code>$ npm install hexo-server --save</code>
还是不行&hellip;为啥呢？
因为指令必须在hexo的安装目录下执行！！！</p>
<p>注意deploy的过程中要输入你github的username和password
然后打开：
<a href="https://ayanamiq.github.io/">https://ayanamiq.github.io/</a>
就可以看到刚才在本地一样访问
http://localhost:4000
一样的页面了</p>
<p>坑：这里在deploy的时候报错了。
<code>HttpRequestException encountered</code>
问题：Github 禁用了TLS v1.0 and v1.1，必须<a href="https://github.com/Microsoft/Git-Credential-Manager-for-Windows/releases/">更新Windows的git凭证管理器</a>
下载并安装第一个GCMW-1.18.3.exe文件(请注意版本迭代)。
然后再deploy就可以了。</p>
<h1 id="修改及配置主题">修改及配置主题<a hidden class="anchor" aria-hidden="true" href="#修改及配置主题">#</a></h1>
<p><a href="https://github.com/theme-next/hexo-theme-next">直接去github看hexo的最新内容</a>
一定要去github下载最新版本。</p>
<h2 id="切换主题">切换主题<a hidden class="anchor" aria-hidden="true" href="#切换主题">#</a></h2>
<p>根目录配置文件_config.yml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>theme: landscape //默认主题
</span></span></code></pre></td></tr></table>
</div>
</div><p>将<code>landscape</code>改成<code>next</code></p>
<h2 id="切换主题样式">切换主题样式<a hidden class="anchor" aria-hidden="true" href="#切换主题样式">#</a></h2>
<p>主题配置文件_config.yml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># Schemes
</span></span><span style="display:flex;"><span>#scheme: Muse
</span></span><span style="display:flex;"><span>scheme: Mist
</span></span><span style="display:flex;"><span>#scheme: Pisces
</span></span><span style="display:flex;"><span>#scheme: Gemini
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="设置menu">设置Menu<a hidden class="anchor" aria-hidden="true" href="#设置menu">#</a></h2>
<p>默认只有两个首页和归档，还可以添加<code>关于、标签、搜索</code>
<code>根目录-&gt;themes-&gt;next</code>
通过如上路径找到<code>_config.yml</code>，在文件中搜索<code>menu</code>。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>menu:
</span></span><span style="display:flex;"><span>  home: / || fa fa-home
</span></span><span style="display:flex;"><span>  #about: /about/ || fa fa-user
</span></span><span style="display:flex;"><span>  tags: /tags/ || fa fa-tags
</span></span><span style="display:flex;"><span>  #categories: /categories/ || fa fa-th
</span></span><span style="display:flex;"><span>  archives: /archives/ || fa fa-archive
</span></span><span style="display:flex;"><span>  #schedule: /schedule/ || fa fa-calendar
</span></span><span style="display:flex;"><span>  #sitemap: /sitemap.xml || fa fa-sitemap
</span></span><span style="display:flex;"><span>  #commonweal: /404/ || fa fa-heartbeat
</span></span></code></pre></td></tr></table>
</div>
</div><p>去掉注释即可显示对应标签。
需要注意：tags、about、categories等标签，需要通过hexo指令单独创建后才能显示。</p>
<h2 id="底部隐藏由hexo强力驱动主题--nextmist">底部隐藏由Hexo强力驱动、主题&ndash;NexT.Mist<a hidden class="anchor" aria-hidden="true" href="#底部隐藏由hexo强力驱动主题--nextmist">#</a></h2>
<p>主题_config.yml中搜索<code>power</code>和<code>theme</code>，将下边的<code>enable</code>和<code>version</code>都改成false</p>
<h2 id="更改底部图标">更改底部图标<a hidden class="anchor" aria-hidden="true" href="#更改底部图标">#</a></h2>
<p><a href="https://fontawesome.com/v4.7.0/icons/">在这找到喜欢的图标</a>
主题_config.yml中搜索<code>footer</code>，找到下面的icon，替换成自己想要的。
推荐<code>snowflake-o</code>和<code>heart</code></p>
<h2 id="修改动画速度">修改动画速度<a hidden class="anchor" aria-hidden="true" href="#修改动画速度">#</a></h2>
<p>themes/next/source/js/src/motion.js
打开上边的js，搜索<code>duration</code>，动画速度，值越大速度越慢。
默认的都是200，建议修改为100，值太低会显得太突兀。</p>
<h2 id="阅读全文">阅读全文<a hidden class="anchor" aria-hidden="true" href="#阅读全文">#</a></h2>
<p>next默认将文章全部现实出来，可以添加阅读全文功能。
主题_config.yml中搜索<code>auto_excerpt</code>，改为true</p>
<p>注意：
6.x版本之后，上述的方法已经不再适用，有几种解决办法。</p>
<p>方法1：写概述</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: 让首页显示部分内容
</span></span><span style="display:flex;"><span>date: 2020-02-23 22:55:10
</span></span><span style="display:flex;"><span>description: 这是显示在首页的概述，正文内容均会被隐藏。
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>abstract：
文章的摘要，会显示在博客的列表页，正文会被隐藏</p>
<p>方法2：文章截断
在需要截断的地方加入：
<code>&lt;!--more--&gt;</code></p>
<h2 id="next主题版本升级51x-6x">next主题版本升级(5.1.x-6.x)<a hidden class="anchor" aria-hidden="true" href="#next主题版本升级51x-6x">#</a></h2>
<p><a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/UPDATE-FROM-5.1.X.md">参考官方文档</a>
<a href="https://github.com/theme-next/hexo-theme-next">6.x版本仓库地址</a>
通过新仓库，将源码下载解压到hexo的thems文件夹下，将之改名为<code>next-reloaded</code>
注意：之前的next文件夹不要删除，里面还留了很多需要的配置，而且如果新的主题出现问题，还可以及时切换回就版本。</p>
<p>在Hexo的_config.yml中配置新的主题：
<code>theme: next-reloaded</code></p>
<p>更新语言配置：
从 v6.0.3版本起，zh-Hans改名为zh-CN，新版本需要显式修改_config.xml里的language配置，否则语言显示不正确。
然后可以参照之前配置好的next配置文件_config.xml，来配置新的_config.xml。</p>
<h1 id="写文章">写文章<a hidden class="anchor" aria-hidden="true" href="#写文章">#</a></h1>
<p><code>hexo new 'blogName'</code>
<a href="https://hexo.io/zh-cn/docs/writing">其他指令参考官方文档</a></p>
<p>然后可以在&rsquo;source/_posts&rsquo;下看到新建的文章了，生成的是.md文件，推荐使用markdown编译器。
markdown编译器有一堆，比较有名的是markdownPad，但是我懒，还是直接用nodePad++好了。</p>
<p>1.安装MarkdownViewer++
最近发现新版的nodepad 7.6.2，新增了plugins admin即插件中心,搜索markdown，选中markdownViewer++，点击右侧的install，等待nodepad++重启就安装好了。</p>
<p>备用方案：
<a href="https://github.com/bruderstein/nppPluginManager/releases">自行安装plugin manager</a>
下载对应自己NotePad版本的安装包，解压后得到两个文件夹，plugins和updater，
分别将文件夹中的文件粘贴到nodePad++安装路径下的plugins和updater文件夹下，
然后重启NotePad，就会在插件一栏的下面看到plugin manager，打开，找到MarkdownViewer++，
选择右下角的install，安装完之后根据提示重启。</p>
<p>2.导入自定义语言格式
为了设置符合markdown语言的显示效果，需要<a href="https://github.com/Edditoria/markdown-plus-plus">下载Markdown语言格式的xml配置文件</a>
下载之后解压缩，然后打开NotePad，选择语言-&gt;自定义语言格式-&gt;导入-&gt;选择到刚才解压的文件夹的四个theme文件夹中的任意一个，建议选择default，因为nodePad默认就是白底的，其他几个太扎眼。</p>
<h1 id="添加分类选项">添加“分类”选项<a hidden class="anchor" aria-hidden="true" href="#添加分类选项">#</a></h1>
<p>进入博客所在文件夹，打开gitbush，执行命令
<code>$ hexo new page categories</code>
成功后会提示：
<code>INFO Created: ~/Documents/blog/source/categories/index.md</code></p>
<p>根据上面的路径，找到index.md这个文件，打开后默认内容是这样的：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: 文章分类
</span></span><span style="display:flex;"><span>date: 2017-05-27 13:47:40
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>添加type: &ldquo;categories&quot;到内容中，添加后是这样的：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: 文章分类
</span></span><span style="display:flex;"><span>date: 2019-05-27 13:47:40
</span></span><span style="display:flex;"><span>type: &#34;categories&#34;
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="给文章添加categories属性">给文章添加“categories”属性<a hidden class="anchor" aria-hidden="true" href="#给文章添加categories属性">#</a></h2>
<p>打开需要添加分类的文章，为其添加categories属性。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: java基础
</span></span><span style="display:flex;"><span>date: 2018-12-31 12:12:57
</span></span><span style="display:flex;"><span>categories: - java
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：hexo一篇文章只能属于一个分类
至此，成功给文章添加分类，点击首页的“分类”可以看到该分类下的所有文章。
当然，只有添加了categories: xxx的文章才会被收录到首页的“分类”中。</p>
<h1 id="创建标签选项">创建“标签”选项<a hidden class="anchor" aria-hidden="true" href="#创建标签选项">#</a></h1>
<p>进入博客所在文件夹，打开gitbush,执行命令
<code>$ hexo new page tags</code>
成功后会提示：
<code>INFO Created: ~/Documents/blog/source/tags/index.md</code>
根据上面的路径，找到index.md这个文件，打开后默认内容是这样的：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: tags
</span></span><span style="display:flex;"><span>date: 2020-08-05 17:45:59
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>在date下面添加一行</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: tags
</span></span><span style="display:flex;"><span>date: 2020-08-05 17:45:59
</span></span><span style="display:flex;"><span>type: &#34;tags&#34;
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存并关闭文件。</p>
<h2 id="给文章添加tags属性">给文章添加“tags”属性<a hidden class="anchor" aria-hidden="true" href="#给文章添加tags属性">#</a></h2>
<p>打开需要添加标签的文章，为其添加tags属性。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: java基础
</span></span><span style="display:flex;"><span>date: 2017-05-26 12:12:57
</span></span><span style="display:flex;"><span>categories: 
</span></span><span style="display:flex;"><span>- java基础
</span></span><span style="display:flex;"><span>tags:
</span></span><span style="display:flex;"><span>- java
</span></span><span style="display:flex;"><span>- 基础
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></td></tr></table>
</div>
</div><p>至此，成功给文章添加分类，点击首页的“标签”可以看到该标签下的所有文章。
当然，只有添加了tags: xxx的文章才会被收录到首页的“标签”中。</p>
<p>细心的朋友可能已经发现，这两个的设置几乎一模一样！是的，没错，思路都是一样的。
所以我们可以打开scaffolds/post.md文件，在tages:上面加入categories:,
保存后，之后执行hexo new 文章名命令生成的文件，页面里就有categories:项了。</p>
<p>scaffolds目录下，是新建页面的模板，执行新建命令时，是根据这里的模板页来完成的，所以可以在这里根据你自己的需求添加一些默认值。</p>
<h1 id="添加about标签">添加about标签<a hidden class="anchor" aria-hidden="true" href="#添加about标签">#</a></h1>
<p><code>hexo new page 'about'</code>
在安装位置下的source文件夹下会有about文件夹，打开，编辑里面的index.md</p>
<h1 id="引用图片">引用图片<a hidden class="anchor" aria-hidden="true" href="#引用图片">#</a></h1>
<p>总体来说有两种引用方式：</p>
<ul>
<li>公网图片地址</li>
<li>将图片引入项目内，使用相对路径</li>
</ul>
<p>公网图片地址总是不可靠的，不定哪会就失效了，又没有自己的服务器。
可行的办法：</p>
<ul>
<li>把图片上传到新浪图床</li>
<li>在github新建一个仓库，专门用来存放图片。</li>
</ul>
<p>我采用另外一种办法，将图片引入项目内：</p>
<ul>
<li>
<p>修改项目的_config.yml
<code>post_asset_folder:true</code>
Hexo 提供了一种更方便管理 Asset 的设定：post_asset_folder
当您设置post_asset_folder为true参数后，在建立文件时，Hexo会自动建立一个与文章同名的文件夹，您可以把与该文章相关的所有资源都放到那个文件夹，如此一来，便可以更方便的使用资源。</p>
</li>
<li>
<p>在hexo的目录下执行
<code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code>
需要等待一段时间</p>
</li>
<li>
<p>完成安装后用hexo新建文章的时候会发现_posts目录下面会多出一个和文章名字一样的文件夹。图片就可以放在文件夹下面。结构如下：</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>本地图片测试
</span></span><span style="display:flex;"><span>├── apppicker.jpg
</span></span><span style="display:flex;"><span>├── logo.jpg
</span></span><span style="display:flex;"><span>└── rules.jpg
</span></span><span style="display:flex;"><span>本地图片测试.md
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样的目录结构（目录名和文章名一致），只要使用<code>![logo](本地图片测试/logo.jpg)</code>就可以插入图片。
生成的结构为</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public/2016/3/9/本地图片测试
</span></span><span style="display:flex;"><span>├── apppicker.jpg
</span></span><span style="display:flex;"><span>├── index.html
</span></span><span style="display:flex;"><span>├── logo.jpg
</span></span><span style="display:flex;"><span>└── rules.jpg
</span></span></code></pre></td></tr></table>
</div>
</div><p>同时，生成的 html 是
<code>&lt;img src=&quot;/2016/3/9/本地图片测试/logo.jpg&quot; alt=&quot;logo&quot;&gt;</code></p>
<p>而不是
<code>&lt;img src=&quot;本地图片测试/logo.jpg&quot; alt=&quot;logo&quot;&gt;</code></p>
<h1 id="多台电脑操作hexo博客">多台电脑操作hexo博客<a hidden class="anchor" aria-hidden="true" href="#多台电脑操作hexo博客">#</a></h1>
<p><span id="jump">多台电脑操作hexo</span>
目的：在公司和家里都可以写博客。
思路：git分支
hexo生成的静态博客文件默认放在master分支上。
hexo的源文件（部署环境文件）可以都放在hexo分支上（可以新创建一个hexo分支），换新电脑时，直接：
<code>git clone git@github.com:ayanamiq/ayanamiq.github.io.git</code></p>
<h2 id="hexo搭建博客原理">hexo搭建博客原理<a hidden class="anchor" aria-hidden="true" href="#hexo搭建博客原理">#</a></h2>
<p>参考hexo本机安装目录结构：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>.deploy_git：上传到github的文件
</span></span><span style="display:flex;"><span>node_modules：hexo需要的模块，不需要上传github
</span></span><span style="display:flex;"><span>public：生成的静态文件
</span></span><span style="display:flex;"><span>scaffolds：hexo new &#39;name&#39; 时的配置文件
</span></span><span style="display:flex;"><span>source：博文的.md文件
</span></span><span style="display:flex;"><span>themes：主题文件
</span></span><span style="display:flex;"><span>_config.yml：全局配置文件
</span></span><span style="display:flex;"><span>package.json：记录hexo需要的包信息
</span></span></code></pre></td></tr></table>
</div>
</div><p>hexo帮助把博客发送到github，同时把md文件转换成网页文件。
hexo目录下的文件和github上的文件是不同的，public文件夹的文件通过<code>hexo d</code>上传到github去了，其他的文件则留在本地目录下。</p>
<h3 id="对usernamegithubio仓库新建hexo分支并克隆">对username.github.io仓库新建hexo分支，并克隆<a hidden class="anchor" aria-hidden="true" href="#对usernamegithubio仓库新建hexo分支并克隆">#</a></h3>
<p>在Github的username.github.io仓库上新建一个<code>hexo</code>分支，然后将该分支设为默认分支。
Settings-&gt;Branches-&gt;Default branch中将默认分支设为<code>hexo</code>，save保存。</p>
<p>然后将该仓库克隆到本地：
<code>git clone git@github.com:ayanamiq/ayanamiq.github.io.git</code>
clone完成后，在blog目录使用<code>git branch</code>，查看当前所在分支，应该是新建的分支<code>hexo</code>。
注意blog目录在clone下来目录的下一层。</p>
<h3 id="将本地博客的部署文件拷贝进刚才拉下来的分支文件目录">将本地博客的部署文件拷贝进刚才拉下来的分支文件目录<a hidden class="anchor" aria-hidden="true" href="#将本地博客的部署文件拷贝进刚才拉下来的分支文件目录">#</a></h3>
<p>将本地博客的部署文件（Hexo目录下的全部文件）全部拷贝进刚才拉下来的分支文件目录中去。
接下来，进入<code>hexo</code>分支文件目录下，将该目录下的一些文件提交到hexo分支：
scaffolds、source、themes、package.json、node_modules、_config.yml</p>
<p>提交之前需注意：</p>
<ul>
<li>将themes目录以内中的主题的.git目录删除（如果有），因为一个git仓库中不能包含另一个git仓库，提交主题文件夹会失败。</li>
<li>可能有人会问，删除了themes目录中的.git不就不能git pull更新主题了吗，很简单，需要更新主题时在另一个地方git clone下来该主题的最新版本，然后将内容拷到当前主题目录即可。</li>
</ul>
<h3 id="提交hexo分支">提交hexo分支<a hidden class="anchor" aria-hidden="true" href="#提交hexo分支">#</a></h3>
<p>依次执行
<code>git add .</code>
<code>git commit -m 'back up hexo files'</code>
<code>git push</code>
即可将博客的hexo部署环境提交到GitHub个人仓库的xxx分支。现在可以在GitHub上的username.github.io仓库看到两个分支的差异了。</p>
<p>master分支和 hexo 分支各自保存着一个版本，master分支用于保存博客静态资源，提供博客页面供人访问。
hexo 分支用于备份博客部署文件，供自己维护更新，两者在一个GitHub仓库内互不冲突，完美！</p>
<h2 id="在新电脑上执行下列操作">在新电脑上执行下列操作：<a hidden class="anchor" aria-hidden="true" href="#在新电脑上执行下列操作">#</a></h2>
<h3 id="至此博客已经可以在其他电脑上进行同步更新和维护了">至此，博客已经可以在其他电脑上进行同步更新和维护了。<a hidden class="anchor" aria-hidden="true" href="#至此博客已经可以在其他电脑上进行同步更新和维护了">#</a></h3>
<ul>
<li>将新电脑的生成的ssh key添加到GitHub账户上</li>
<li>在新电脑上克隆username.github.io仓库的xxx分支到本地，此时本地git仓库处于xxx分支：
<code>git clone git@github.com:ayanamiq/ayanamiq.github.io.git</code></li>
<li>切换到username.github.io目录，执行<code>npm install</code>
(由于仓库有一个.gitignore文件，里面默认是忽略掉 node_modules文件夹的，也就是说仓库的hexo分支并没有存储该目录(也不需要)，所以需要install)</li>
<li>在新电脑上安装hexo命令
<code>npm install -g hexo-cli</code>
注意：linux安装hexo后，还需要把hexo的命令添加到全局，否则hexo的指令是无法使用的。
<code>sudo ln -s /home/wjy/install/node-v10.15.3-linux-x64/lib/node_modules/hexo-cli/bin/hexo  /usr/local/bin/hexo</code></li>
</ul>
<p>到这里了就可以开始在新的电脑上写博客了！</p>
<ul>
<li>编辑、撰写文章</li>
<li>依次执行<code>git add .</code>、<code>git commit -m 'some change'</code>、<code>git push</code>指令，保证 hexo 分支版本最新</li>
<li>执行<code>hexo d -g</code>指令（在此之前，有时可能需要执行hexo clean），完成后就会发现，最新改动已经更新到master分支了，两个分支互不干扰！</li>
</ul>
<p>如果使用了algolia，还需要在新电脑上安装并配置API-KEY</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>npm install --save hexo-algolia
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">export</span> HEXO_ALGOLIA_INDEXING_KEY=<span style="color:#f00">你的</span>API Key
</span></span><span style="display:flex;"><span>hexo algolia
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="回到之前的电脑上更新并提交博客">回到之前的电脑上更新并提交博客<a hidden class="anchor" aria-hidden="true" href="#回到之前的电脑上更新并提交博客">#</a></h2>
<p>注：每次换电脑进行博客更新时，不管上次在其他电脑有没有更新，最好先git pull。
按照之前的方法写自己博客，然后将目录切换下username.github.io下，此时需要安装一下npm install，最后执行<code>hexo d -g</code>即可提交成功。</p>
<p><a href="https://juejin.cn/post/6844903605435138062#comment">其他参考</a>
<a href="https://www.jianshu.com/p/b19173aae49a">参考</a></p>
<h1 id="使用leancloud统计文章访问次数">使用LeanCloud统计文章访问次数<a hidden class="anchor" aria-hidden="true" href="#使用leancloud统计文章访问次数">#</a></h1>
<p><a href="https://leancloud.cn/">LeanCloud官网</a></p>
<ul>
<li>
<p>注册</p>
</li>
<li>
<p>登录</p>
</li>
<li>
<p>验证邮箱</p>
</li>
<li>
<p>创建应用-选择开发板
注：开发版免费使用，但是有请求次数限制：
总请求数不超过每日 30,000 次
云端并发线程数低于 3 个
无自动备份</p>
</li>
<li>
<p>点击存储，进入到控制台页面</p>
</li>
<li>
<p>创建class，名字必须是Counter，其他全部默认，点击创建class</p>
</li>
<li>
<p>点击左侧设置&ndash;应用key，可以看到自己的App ID,App Key</p>
</li>
<li>
<p>找到next主题的_config.yml文件，搜索leancloud_visitors，enable改为true，然后写上LeanCloud的App ID,App Key</p>
</li>
<li>
<p>设置安全域名：设置&ndash;安全中心&ndash;Web安全域名，输入自己hexo博客地址的线上域名</p>
</li>
</ul>
<h1 id="不蒜子统计访问人数访问总量">不蒜子统计访问人数、访问总量<a hidden class="anchor" aria-hidden="true" href="#不蒜子统计访问人数访问总量">#</a></h1>
<p><a href="http://busuanzi.ibruce.info/">不蒜子官网</a></p>
<ul>
<li>找到next主题的_config.yml文件，搜索busuanzi_count</li>
<li>将配置做如下更改</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>  # count values only if the other configs are false
</span></span><span style="display:flex;"><span>  enable: true
</span></span><span style="display:flex;"><span>  # custom uv span for the whole site
</span></span><span style="display:flex;"><span>  site_uv: true
</span></span><span style="display:flex;"><span>  site_uv_header: &lt;i class=&#34;fa fa-user&#34;&gt;&lt;/i&gt; 访问人数
</span></span><span style="display:flex;"><span>  site_uv_footer: 次
</span></span><span style="display:flex;"><span>  # custom pv span for the whole site
</span></span><span style="display:flex;"><span>  site_pv: true
</span></span><span style="display:flex;"><span>  site_pv_header: &lt;i class=&#34;fa fa-eye&#34;&gt;&lt;/i&gt; 访问总量
</span></span><span style="display:flex;"><span>  site_pv_footer: 次
</span></span><span style="display:flex;"><span>  # custom pv span for one page only
</span></span><span style="display:flex;"><span>  page_pv: true
</span></span><span style="display:flex;"><span>  page_pv_header: &lt;i class=&#34;fa fa-file-o&#34;&gt;&lt;/i&gt; 浏览
</span></span><span style="display:flex;"><span>  page_pv_footer: 次
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="不蒜子统计无法显示问题">不蒜子统计无法显示问题<a hidden class="anchor" aria-hidden="true" href="#不蒜子统计无法显示问题">#</a></h2>
<p>原因：不蒜子的域名过期
解决：
/theme/next/layout/_third-party/analytics/busuanzi-counter.swig
按照上边路径找到该文件，修改域名为：
<a href="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js</a></p>
<h1 id="next主题的搜索功能">NexT主题的搜索功能<a hidden class="anchor" aria-hidden="true" href="#next主题的搜索功能">#</a></h1>
<p><a href="http://theme-next.iissnan.com/third-party-services.html#local-search">官方文档</a></p>
<p>添加百度/谷歌/本地 自定义站点内容搜索</p>
<ol>
<li>
<p>安装 <code>hexo-generator-searchdb</code>，在站点的根目录下执行以下命令：
<code> npm install hexo-generator-searchdb --save</code></p>
</li>
<li>
<p>编辑 <strong>站点配置文件</strong>，新增以下内容到任意位置：</p>
</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>search:
</span></span><span style="display:flex;"><span>  path: search.xml
</span></span><span style="display:flex;"><span>  field: post
</span></span><span style="display:flex;"><span>  # 是否包含文章内容，如果为false，则只搜索文件标题
</span></span><span style="display:flex;"><span>  content: true
</span></span><span style="display:flex;"><span>  format: html
</span></span><span style="display:flex;"><span>  limit: 10000
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>编辑 主题配置文件，启用本地搜索功能：</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># Local search
</span></span><span style="display:flex;"><span>local_search:
</span></span><span style="display:flex;"><span>  enable: true
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="添加algolia搜索">添加algolia搜索<a hidden class="anchor" aria-hidden="true" href="#添加algolia搜索">#</a></h1>
<p>目前版本5.1.4已经集成algolia搜索，只需在next主题的配置文件中修改即可。
但是首先需要到<a href="https://www.algolia.com/">官网注册</a></p>
<ul>
<li>注册成功后，进入到hashboard，点击左侧的Indices</li>
<li>点击create index，名字随便起。</li>
<li>点击左侧的API keys，在根目录的站点配置文件_config.yml中加入如下配置，参照官网中的各种key值</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#添加搜索
</span></span><span style="display:flex;"><span>algolia:
</span></span><span style="display:flex;"><span>    applicationID: &#39;你的applicationID&#39;
</span></span><span style="display:flex;"><span>    apiKey: &#39;你的apiKey&#39;
</span></span><span style="display:flex;"><span>    adminApiKey: &#39;你的adminApiKey&#39;
</span></span><span style="display:flex;"><span>    indexName: &#39;新建的index名字&#39;
</span></span><span style="display:flex;"><span>    chunkSize: 5000
</span></span><span style="display:flex;"><span>    fields:
</span></span><span style="display:flex;"><span>    - title
</span></span><span style="display:flex;"><span>    - slug
</span></span><span style="display:flex;"><span>    - path
</span></span><span style="display:flex;"><span>    - content:strip
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意缩进！注意缩进！注意缩进！</p>
<ul>
<li>在Hexo工程根目录下执行<code>npm install hexo-algolia --save</code></li>
<li>执行<code>hexo algolia</code> 更新索引，这一步会把自己站点的索引数据上传到Algolia，如果上传成功可以在官网看到自己站点的索引数据。</li>
<li>启用配置搜索功能
修改主题配置文件，在其中找到algolia_search属性，将其enable子属性改为true，然后再看其labels子属性，修改相应的提示文本，使之更加适合自己的风格</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>input_placeholder: 输入关键字
</span></span><span style="display:flex;"><span>hits_empty: &#34;没有找到关于 ${query} 的文章&#34;
</span></span><span style="display:flex;"><span>hits_stats: &#34;${hits} 相关记录，共耗时 ${time} ms&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后，每次进行更新、删除文章等操作，都需要在提交前执行
<code>hexo algolia</code>
更新索引。</p>
<h2 id="next主题升级60导致的问题">next主题升级6.0导致的问题<a hidden class="anchor" aria-hidden="true" href="#next主题升级60导致的问题">#</a></h2>
<p>next6.0之后，<a href="https://github.com/theme-next/theme-next-algolia-instant-search">algolia需要其他配置</a>
还有其他问题，如:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Refused to apply style from &#39;http://localhost:4000/lib/font-awesome/css/font-awesome.min.css?v=4.6.2&#39; because its MIME type (&#39;text/html&#39;) is not a supported stylesheet MIME type, and strict MIME checking is enabled.
</span></span><span style="display:flex;"><span>localhost/:1 Refused to apply style from &#39;http://localhost:4000/lib/algolia-instant-search/instantsearch.min.css&#39; because its MIME type (&#39;text/html&#39;) is not a supported stylesheet MIME type, and strict MIME checking is enabled.
</span></span><span style="display:flex;"><span>(index):2462 GET http://localhost:4000/lib/algolia-instant-search/instantsearch.min.js net::ERR_ABORTED 404 (Not Found)
</span></span><span style="display:flex;"><span>(index):1 Refused to apply style from &#39;http://localhost:4000/lib/algolia-instant-search/instantsearch.min.css&#39; because its MIME type (&#39;text/html&#39;) is not a supported stylesheet MIME type, and strict MIME checking is enabled.
</span></span><span style="display:flex;"><span>(index):2462 GET http://localhost:4000/lib/algolia-instant-search/instantsearch.min.js net::ERR_ABORTED 404 (Not Found)
</span></span><span style="display:flex;"><span>algolia-search.js?v=7.1.0:14 Uncaught ReferenceError: instantsearch is not defined
</span></span><span style="display:flex;"><span>    at HTMLDocument.&lt;anonymous&gt; (algolia-search.js?v=7.1.0:14)
</span></span><span style="display:flex;"><span>    at j (index.js?v=2.1.3:2)
</span></span><span style="display:flex;"><span>    at Object.fireWith [as resolveWith] (index.js?v=2.1.3:2)
</span></span><span style="display:flex;"><span>    at Function.ready (index.js?v=2.1.3:2)
</span></span><span style="display:flex;"><span>    at HTMLDocument.I (index.js?v=2.1.3:2)
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://theme-next.org/docs/third-party-services/search-services">参考官网解决问题</a></p>
<h2 id="其他问题">其他问题<a hidden class="anchor" aria-hidden="true" href="#其他问题">#</a></h2>
<ul>
<li>
<p>数据上传到algolia后，发现搜索出来的文章地址是：
<code>yoursite.com/2018/12/20/map</code>
点击，自然是请求不到的，因为需要把yoursite.com替换成自己的站点地址。
解决：
找到根目录的站点配置文件_config.yml，将url：yoursite.com，替换成自己的站点地址。</p>
</li>
<li>
<p>Please provide an Algolia index name in your hexo _config.yml flle
根目录的站点配置文件中加入的内容 apiKey/adminApiKey 等等没有缩进，然后一直报上面这个错误&hellip;注意缩进,一个tab或四个空格</p>
</li>
<li>
<p>报错：</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>ERROR [Algolia] Please set an HEXO_ALGOLIA_INDEXING_KEY environment variable t o enable content indexing. 
</span></span><span style="display:flex;"><span>ERROR &gt;&gt; Read https://npmjs.com/hexo-algolia<span style="color:#007f7f">#api-key for more informations.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在执行<code>hexo algolia</code>前，需要先在git bush下执行：<code>export HEXO_ALGOLIA_INDEXING_KEY=你的API Key</code>
就是你的Search-Only API Key，必须在git bush下执行。但该方法设置的环境变量为临时变量，重启电脑就会失效。
右键点击我的电脑 &gt; 属性 &gt; 高级系统设置 &gt; 环境变量
添加环境变量名为 HEXO_ALGOLIA_INDEXING_KEY，值为 Algolia admin key，添加后点击确认，重启电脑后新增的环境变量生效。</p>
<h1 id="需要注意">需要注意<a hidden class="anchor" aria-hidden="true" href="#需要注意">#</a></h1>
<p>文章名不要使用特殊符号，如冒号、下划线、逗号、问号、大于小于( /、\、？、*、:、&quot;&quot;、| )等等
因为创建文章时，会创建同名的文件夹，linux文件夹、文件可以使用一些特殊符号，而windows中就不可以，这样会造成：在linux(我的公司电脑)写的文章，windows(家中电脑)无法拉取代码，因为windows无法创建带特殊符号的文件夹、文件，一定要注意。</p>
<h1 id="在文章中引入视频">在文章中引入视频<a hidden class="anchor" aria-hidden="true" href="#在文章中引入视频">#</a></h1>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{% raw %}
</span></span><span style="display:flex;"><span>&lt;video src=&#39;https://liaoxuefeng.gitee.io/git-resources/master-branch-forward.mp4&#39; type=&#39;video/mp4&#39; controls=&#39;controls&#39;  width=&#39;100%&#39; height=&#39;100%&#39;&gt;&lt;/video&gt;
</span></span><span style="display:flex;"><span>{% endraw%}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="解决github提交commitcontributions不统计显示绿色的问题">解决github提交commit,contributions不统计显示绿色的问题<a hidden class="anchor" aria-hidden="true" href="#解决github提交commitcontributions不统计显示绿色的问题">#</a></h1>
<p>最近在提交博文的收，发现提交之后github上没有绿色小方块。
我找到仓库的递交记录，发现竟然是两个账号提交的，此时想到应该是git设置用户名和邮箱的问题。
先查看现在的用户名和邮箱：
<code>git config user.name</code>
<code>git config user.email</code>
发现是和github的账号不对应，于是重新设置邮箱：
<code>git config --global user.name &quot;xxx&quot;</code>
<code>git config --global user.email &quot;xxx&quot;</code>
然后提交一次试试，发现github可以显示contributions了。</p>
<p>那么之前错误的如何补救呢？
<a href="https://help.github.com/en/github/using-git/changing-author-info">github官方给出了解决方案</a></p>
<ul>
<li>打开gitbash，克隆仓库
<code>git clone --bare https://github.com/user/repo.git</code>
进入仓库
<code>cd repo.git</code></li>
</ul>
<p>在仓库的根目录创建一个脚本文件1.sh，并替换头部的三个变量为自己的。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span>
</span></span><span style="display:flex;"><span>git filter-branch --env-filter <span style="color:#0ff;font-weight:bold">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">OLD_EMAIL=&#34;your-old-email@example.com&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">CORRECT_NAME=&#34;Your Correct Name&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">CORRECT_EMAIL=&#34;your-correct-email@example.com&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">if [ &#34;$GIT_COMMITTER_EMAIL&#34; = &#34;$OLD_EMAIL&#34; ]
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">then
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    export GIT_COMMITTER_NAME=&#34;$CORRECT_NAME&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    export GIT_COMMITTER_EMAIL=&#34;$CORRECT_EMAIL&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">fi
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">if [ &#34;$GIT_AUTHOR_EMAIL&#34; = &#34;$OLD_EMAIL&#34; ]
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">then
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    export GIT_AUTHOR_NAME=&#34;$CORRECT_NAME&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    export GIT_AUTHOR_EMAIL=&#34;$CORRECT_EMAIL&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">fi
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;</span> --tag-name-filter cat -- --branches --tags
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行脚本
<code>./1.sh</code>
执行过程中会显示
<code>Rewrite f8da63b882603d90c7f9c6286494bb0d20289a50 (125/258) (42 seconds passed, remaining 44 predicted)</code></p>
<p>在github的仓库页面查看记录是否修改过来了。
将更正的历史记录推送到GitHub：
<code>git push --force --tags origin 'refs/heads/*'</code></p>
<p>然后将临时克隆的仓库删除即可。</p>
<p>如果不知道错误的邮箱是什么，可以通过<code>git log</code>查看仓库的提交记录，记录了每一次的提交人和邮箱，一直往下翻就行了。</p>
<h1 id="hexo从github迁移到gitee">hexo从github迁移到gitee<a hidden class="anchor" aria-hidden="true" href="#hexo从github迁移到gitee">#</a></h1>
<p>国内访问github的pages实在是拉稀，不得不转到国内的代码仓库。
公司的项目都在coding上，想体验点新的，于是想到了gitee。
总体步骤和部署到github类似。</p>
<ul>
<li>在gitee创建存放博客的仓库
如果你想你的 pages 首页访问地址不带二级目录，如ipvb.gitee.io，你需要建立一个与自己个性地址同名的仓库，如 <a href="https://gitee.com/ipvb">https://gitee.com/ipvb</a> 这个用户，想要创建一个自己的站点，但不想以子目录的方式访问，想以ipvb.gitee.io直接访问，那么他就可以创建一个名字为ipvb的仓库 <a href="https://gitee.com/ipvb/ipvb">https://gitee.com/ipvb/ipvb</a> 部署完成后，就可以以 <a href="https://ipvb.gitee.io">https://ipvb.gitee.io</a> 进行访问了。</li>
<li>修改项目根目录_config.yml文件，修改<code>repo</code>的值</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>deploy:
</span></span><span style="display:flex;"><span>  type: git
</span></span><span style="display:flex;"><span>  repo: https://gitee.com/jingyao066/jingyao066.git
</span></span><span style="display:flex;"><span>  branch: master
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>执行命令</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>hexo cl
</span></span><span style="display:flex;"><span>hexo d -g
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后会让输入gitee的用户名和密码，输入完成后就可以在gitee上看到我们上传的代码了。</p>
<p>如果在<code>hexo d -g</code>的时候报错：
<code>ERROR Deployer not found: git</code>
就是没有安装deployer，那么安装它：
<code>npm install --save hexo-deployer-git</code></p>
<ul>
<li>在仓库上方的bar找到服务，点击gitee pages，然后根据提示开启Gitee Pages 服务。
需要注意，仓库中起码有一个index.html，才可以开启pages服务，否则是找不到pages选项的。
根据提示访问：
<code>https://jingyao066.gitee.io</code>
访问成功。</li>
</ul>
<p>想要多端操作，<a href="/posts/%E5%85%B6%E4%BB%96/hexo/#jump">参考前边写的</a></p>
<p>gitee也拉稀了，最近在部署的时候，提示这个：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>部署失败
</span></span><span style="display:flex;"><span>错误信息: page/12/index.html 包含违禁违规内容，请排查调整后再行重试，谢谢！
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="hexo文章加密">hexo文章加密<a hidden class="anchor" aria-hidden="true" href="#hexo文章加密">#</a></h1>
<p><a href="https://hexo.io/plugins/">hexo插件中心</a>
<a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md">github</a></p>
<p>安装：
<code>npm install --save hexo-blog-encrypt</code>
或：
<code>yarn add hexo-blog-encrypt</code>（需要安装Yarn）</p>
<p>首先需要在站点配置文件<code>_config.yml</code>中增加配置：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#文章加密
</span></span><span style="display:flex;"><span>encrypt:
</span></span><span style="display:flex;"><span>    enable: true
</span></span><span style="display:flex;"><span>    message: 您好, 这里需要密码。
</span></span><span style="display:flex;"><span>    abstract: 这里有东西被加密了，需要输入密码查看。
</span></span><span style="display:flex;"><span>    template: &lt;div id=&#34;hexo-blog-encrypt&#34; data-wpm=&#34;{{hbeWrongPassMessage}}&#34; data-whm=&#34;{{hbeWrongHashMessage}}&#34;&gt;&lt;div class=&#34;hbe-input-container&#34;&gt;&lt;input type=&#34;password&#34; id=&#34;hbePass&#34; placeholder=&#34;{{hbeMessage}}&#34; /&gt;&lt;label&gt;{{hbeMessage}}&lt;/label&gt;&lt;div class=&#34;bottom-line&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;script id=&#34;hbeData&#34; type=&#34;hbeData&#34; data-hmacdigest=&#34;{{hbeHmacDigest}}&#34;&gt;{{hbeEncryptedData}}&lt;/script&gt;&lt;/div&gt;
</span></span><span style="display:flex;"><span>    wrong_pass_message: 抱歉, 这个密码看着不太对, 请再试试
</span></span><span style="display:flex;"><span>    wrong_hash_message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容
</span></span><span style="display:flex;"><span>    tags:
</span></span><span style="display:flex;"><span>      - {name: tagName, password: 密码A}
</span></span><span style="display:flex;"><span>      - {name: tagName, password: 密码B}
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样，对于每一篇需要加密的文章就不必都在在头部添加 abstract 和 message 字段了，脚本会自动添加默认的内容填充。</p>
<p>然后在文档头部加上字段：
password：
本文章的密码</p>
<p>message：
这个是博客查看时，密码输入框上面的描述性文字</p>
<p>abstract：
文章的概述，因为文章加密了，<code>&lt;!--more--&gt;</code>也就失效了，所以需要用这个字段来增加概述。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>title: Hello World
</span></span><span style="display:flex;"><span>tags:
</span></span><span style="display:flex;"><span>- 加密文章tag
</span></span><span style="display:flex;"><span>date: 2020-03-13 21:12:21
</span></span><span style="display:flex;"><span>password: wjy
</span></span><span style="display:flex;"><span>abstract: 这里有东西被加密了，需要输入密码查看哦。
</span></span><span style="display:flex;"><span>message: 您好，这里需要密码。
</span></span><span style="display:flex;"><span>wrong_pass_message: 抱歉，这个密码看着不太对，请再试试。
</span></span><span style="display:flex;"><span>wrong_hash_message: 抱歉，这个文章不能被纠正，不过您还是能看看解密后的内容。
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://zhuanlan.zhihu.com/p/113235573">参考</a></p>
<h1 id="将hexo部署到自己的服务器">将hexo部署到自己的服务器<a hidden class="anchor" aria-hidden="true" href="#将hexo部署到自己的服务器">#</a></h1>
<p>gitee pages也不行了</p>
<p><code>本站正在进行绿色网络环境改造，服务改造结束前，无法重新开启您的Gitee Pages服务。</code>
<code>该 Page 服务已被屏蔽（ 存在政治敏感不合规）</code>
只能自己买服务器了，现在阿里云在搞活动，178元3年，1核2G1M，够用了。</p>
<p>安装git
<code>yum install git</code></p>
<p>创建git用户
<code>adduser git</code></p>
<p>设置Git用户的密码
<code>passwd git</code></p>
<p>添加新用户 git
<code>useradd git</code></p>
<p>设置密码
<code>passwd git</code></p>
<p>这步很重要，不切换用户后面会很麻烦
<code>su git </code></p>
<p><code>cd /home/git/</code></p>
<p>创建存放项目的目录
<code>mkdir -p projects/blog </code></p>
<p>创建git 仓库
<code>mkdir repos &amp;&amp; cd repos</code></p>
<p>初始化一个git 裸库
<code>git init --bare blog.git</code></p>
<p>进入git仓库
<code>cd blog.git/hooks</code></p>
<p>创建 hook 钩子函数，输入了内容如下
<code>vi post-receive</code></p>
<p>#!/bin/sh
<code>git --work-tree=/home/git/projects/blog --git-dir=/home/git/repos/blog.git checkout -f</code></p>
<p>添加完毕后修改权限
<code>chmod +x post-receive</code>
exit // 退出到 root 登录
chown -R git:git /home/git/repos/blog.git // 添加权限</p>
<p>测试git仓库是否可用
<code>git clone git@server_ip:/home/git/repos/blog.git</code>
如果能把空仓库拉下来，就说明 git 仓库搭建成功了</p>
<p>建立ssh信任关系，在本地电脑
<code>ssh-copy-id -i C:/Users/yourname/.ssh/id_rsa.pub git@server_ip</code>
如果自己电脑没有创建过公钥，那么执行<code>ssh-keygen -t rsa</code>，创建公钥，再执行上边的指令</p>
<p>测试是否能登录
<code>ssh git@server_ip</code>
如果不需要密码就能登录服务器，那么成功，否则就问题，仔细检查上边的步骤。</p>
<p>为了安全起见禁用 git 用户的 shell 登录权限，从而只能用 git clone，git push 等登录
查看 git-shell 是否在登录方式里面
<code>cat /etc/shells</code></p>
<p>// 查看是否安装
<code>which git-shell</code></p>
<p><code>vim /etc/shells</code>
在最下边添加上2步显示出来的路径，通常是<code>/usr/bin/git-shell</code></p>
<p>修改/etc/passwd中的权限，将原来的
<code>git:x:1000:1000::/home/git:/bin/bash</code>
修改为
<code>git:x:1000:1000::/home/git:/usr/bin/git-shell</code>
此时再尝试ssh登录，则会提示<code>fatal: Interactive git shell is not enabled</code></p>
<p>注：如果第二台电脑想要建立ssh信任关系，需要先将<code>/etc/passwd</code>中内容改成
<code>git:x:1000:1000::/home/git:/bin/bash</code>
否则
<code>ssh-copy-id -i C:/Users/yourname/.ssh/id_rsa.pub git@server_ip</code>
这一步就会报错。建立了信任关系，再改回来
<code>git:x:1000:1000::/home/git:/usr/bin/git-shell</code></p>
<p>安装nginx，略，参考文章 linux
修改nginx配置文件<code>nginx.conf</code>，修改root为刚才创建的文件夹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>server{
</span></span><span style="display:flex;"><span>	# root index.html;
</span></span><span style="display:flex;"><span>	root /home/git/projects/blog;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>将配置文件顶部的user，后边改为root，然后启动nginx。</p>
<p>配置本地_config.yml文件的deploy，
<code>repo: git@server_ip:/home/git/repos/blog.git</code></p>
<p>然后，
hexo cl
hexo d -g
访问浏览器服务器ip，访问成功。
<a href="https://blog.csdn.net/qq_35561857/article/details/81590953">参考</a></p>
<h1 id="hexo多终端">hexo多终端<a hidden class="anchor" aria-hidden="true" href="#hexo多终端">#</a></h1>
<p>原理：
多终端，即多台电脑操作hexo。比如：公司电脑和家里电脑。</p>
<p>hexo有两种文件：</p>
<ul>
<li>
<p>源文件
我们编辑的就是hexo的源文件，即xxx.md。这些源文件的位置是：
<code>hexo根目录\source\_posts</code>
所以只需要用代码仓库同步这些源文件即可。</p>
</li>
<li>
<p>hexo根据源文件生成的静态文件
<code>hexo generate</code>，就会根据我们的.md文件，生成html。
<code>hexo deploy</code>，就是将这些静态文件推送到远程服务器。</p>
</li>
</ul>
<p>所以，只需要一个代码仓库（一个master分支即可），就可以实现多端同步了。
部署的话，分两种情况。</p>
<ul>
<li>部署到自己的服务器，直接根据上一小节<code>将hexo部署到自己的服务器</code>操作即可。</li>
<li>如果部署到github的pages服务，还需要在github新建一个仓库，存放部署后的静态文件，然后开启pages服务。</li>
</ul>
<p>即：</p>
<ul>
<li>
<p>代码仓库1，
无论是自建仓库还是github的仓库，用来同步hexo的源文件。使用git push等git命令。</p>
</li>
<li>
<p>代码仓库2，
无论是自建仓库还是github的仓库，用来部署hexo生成的静态文件，使用<code>hexo generate</code>等hexo命令来部署。</p>
</li>
</ul>
<p>ps：当然你想用一个仓库，多个分支也可以。
另外，如果主题文件夹，也是用git拉下来的，这样会出现仓库嵌套仓库的情况。这时建议删除主题仓库的.git文件夹，就不会影响hexo部署了。</p>
<p>在本地初始化git仓库
<code>git init</code></p>
<p>编辑.gitignore，在后面添加/.deploy_git和/public，表示这两个文件夹不用上传到仓库。</p>
<p>和远程仓库关联，这个仓库存放博客的源文件，（可以用gitee、github、或者自建的仓库）
<code>git remote add origin git@仓库地址:/home/git</code></p>
<p>添加到缓存区
<code>git add .</code></p>
<p>提交
<code>git commit -m 'hexo 源文件'</code></p>
<p>推送更新到远程仓库
<code>git push -u origin master</code></p>
<p>hexo目录里的文件都推送到了远程仓库，包括我们自己编写的markdown文件。</p>
<p>新电脑操作步骤：</p>
<ol>
<li>
<p>拉代码
git clone <a href="https://gitee.com/jingyao066/hexo_source.git">https://gitee.com/jingyao066/hexo_source.git</a>
以下两个指令，是否需要执行。存疑
git fetch &ndash;all
git reset &ndash;hard origin/master</p>
</li>
<li>
<p>更新node版本，windows直接官网下载最新版本的安装包，重新安装即可。</p>
</li>
<li>
<p>安装cnpm，用cnpm安装hexo，安装需要的插件，如引用图片插件
<code>cnpm install https://github.com/CodeFalling/hexo-asset-image --save</code></p>
</li>
<li>
<p>建立ssh信任关系
因为源码仓库和hexo d，不是一个仓库，所以需要分别建立如下两个信任。</p>
</li>
</ol>
<ul>
<li>建立和源码仓库的信任，git push时候会提示。</li>
<li>建立hexo d的信任，hexo d -g的时候会提示。</li>
</ul>
<ol start="5">
<li>
<p>检查hexo命令能否正确执行
<code>hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</code>
查看本地博客
<code>localhost:4000</code></p>
</li>
<li>
<p>在本地编辑文章，然后执行
<code>git add .</code>
<code>git commit -m &quot;更新信息&quot;  </code></p>
</li>
</ol>
<p>以后每次提交可以直接git push
<code>git push -u origin master</code></p>
<p>执行hexo部署
<code>hexo cl</code>
<code>hexo d -g</code></p>
<p>最后：
无论在哪台电脑编辑markdown，都要先执行
<code>git pull</code></p>
<p>编辑完成后，先推送源文件
git add .
git commit -m &lsquo;提交源文件&rsquo;
git push -u origin master（可简写成git push）</p>
<p>执行hexo部署
<code>hexo cl</code>
<code>hexo d -g</code></p>
<h1 id="快速重建hexo">快速重建hexo<a hidden class="anchor" aria-hidden="true" href="#快速重建hexo">#</a></h1>
<p>需要复制的文件</p>
<ul>
<li>根目录 source 文件夹，最重要，所有的markdown文件都在这里</li>
<li>根目录的_config.yml</li>
<li>根目录 themes 文件夹，主题文件</li>
</ul>
<h1 id="脚本部署定时部署">脚本部署，定时部署<a hidden class="anchor" aria-hidden="true" href="#脚本部署定时部署">#</a></h1>
<p>在windows合适位置，新建bat脚本：
拉代码脚本，hexo_pull.bat</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bat" data-lang="bat"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /d D:/hexo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git pull origin master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">pause</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>推送脚本，hexo_deploy.bat</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bat" data-lang="bat"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /d D:/hexo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git pull origin master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#0ff;font-weight:bold">&#34;add post&#34;</span>
</span></span><span style="display:flex;"><span>git push --all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>hexo cl &amp;&amp; hexo d -g
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">pause</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样，双击脚本就可以拉代码和推送了。</p>
<h2 id="windows定时任务">windows定时任务<a hidden class="anchor" aria-hidden="true" href="#windows定时任务">#</a></h2>
<p>我们需要两个定时任务，上午拉代码，晚上部署代码。</p>
<p>win+R，运行<code>taskschd.msc</code>，打开任务计划程序
创建基本任务-&gt;填写任务名-&gt;选择触发器(选择每天)-&gt;选择每天的执行时间-&gt;启动程序-&gt;选择刚才创建的脚本。</p>
<p>依次创建两个脚本，早8点拉取代码，晚7点部署代码。</p>
<h1 id="hexo-升级">hexo 升级<a hidden class="anchor" aria-hidden="true" href="#hexo-升级">#</a></h1>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#007f7f"># 使用淘宝源的 cnpm 替换 npm</span>
</span></span><span style="display:flex;"><span>npm install -g cnpm --registry=https://registry.npm.taobao.org
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cnpm install -g cnpm                 <span style="color:#007f7f"># 升级 npm</span>
</span></span><span style="display:flex;"><span>cnpm cache clean -f                 <span style="color:#007f7f"># 清除 npm 缓存</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>===更新 hexo: 进入 blog 目录，执行如下命令=== 
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 更新 package.json 中的 hexo 及个插件版本</span>
</span></span><span style="display:flex;"><span>cnpm install -g npm-check           <span style="color:#007f7f"># 检查之前安装的插件，都有哪些是可以升级的 </span>
</span></span><span style="display:flex;"><span>cnpm install -g npm-upgrade         <span style="color:#007f7f"># 升级系统中的插件</span>
</span></span><span style="display:flex;"><span>npm-check
</span></span><span style="display:flex;"><span>npm-upgrade
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 更新 hexo 及所有插件</span>
</span></span><span style="display:flex;"><span>cnpm update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 确认 hexo 已经更新</span>
</span></span><span style="display:flex;"><span>hexo -v
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/%E5%85%B6%E4%BB%96/">其他</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>