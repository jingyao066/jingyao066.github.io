<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>æ‰‹å†™Spring | Wjy&#39;s Blog</title>
<meta name="keywords" content="spring">
<meta name="description" content="æ¦‚è¿° å®˜ç½‘ï¼šSpring Security springsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸ">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://009965.xyz/posts/spring/spring-security/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://009965.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://009965.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://009965.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://009965.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://009965.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://009965.xyz/posts/spring/spring-security/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://009965.xyz/posts/spring/spring-security/">
  <meta property="og:site_name" content="Wjy&#39;s Blog">
  <meta property="og:title" content="æ‰‹å†™Spring">
  <meta property="og:description" content="æ¦‚è¿° å®˜ç½‘ï¼šSpring Security springsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-05-18T15:50:13+00:00">
    <meta property="article:modified_time" content="2023-05-18T15:50:13+00:00">
    <meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ‰‹å†™Spring">
<meta name="twitter:description" content="æ¦‚è¿° å®˜ç½‘ï¼šSpring Security springsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸ">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://009965.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "æ‰‹å†™Spring",
      "item": "https://009965.xyz/posts/spring/spring-security/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "æ‰‹å†™Spring",
  "name": "æ‰‹å†™Spring",
  "description": "æ¦‚è¿° å®˜ç½‘ï¼šSpring Security springsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸ",
  "keywords": [
    "spring"
  ],
  "articleBody": "æ¦‚è¿° å®˜ç½‘ï¼šSpring Security\nspringsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œç¤¾åŒºèµ„æºä¹Ÿæ¯”Shiroä¸°å¯Œã€‚ springsecurity æ¡†æ¶ç”¨äºWebåº”ç”¨çš„éœ€è¦è¿›è¡Œè®¤è¯å’Œæˆæƒã€‚\nè®¤è¯ï¼šéªŒè¯å½“å‰è®¿é—®ç³»ç»Ÿçš„æ˜¯ä¸æ˜¯æœ¬ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå¹¶ä¸”è¦ç¡®è®¤å…·ä½“æ˜¯å“ªä¸ªç”¨æˆ·ã€‚\næˆæƒï¼šç»è¿‡è®¤è¯ååˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡ŒæŸä¸ªæ“ä½œã€‚ è®¤è¯å’Œæˆæƒä¹Ÿæ˜¯SpringSecurityä½œä¸ºå®‰å…¨æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ ã€‚\nå¿«é€Ÿå¼€å§‹ æ–°å»ºspring boot é¡¹ç›®ï¼Œå¼•å…¥ä¾èµ–ï¼š\n1 2 3 4 5 6 7 8 9 org.springframework.boot spring-boot-starter-web org.projectlombok lombok true åˆ›å»ºæµ‹è¯•controller\n1 2 3 4 5 6 7 8 9 10 11 12 13 package com.wjy.springsecurity.controller; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RestController; @RestController public class HelloController { @GetMapping(\"/hello\") public String hello(){ return \"ä½ å¥½\"; } } å¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/helloï¼Œçœ‹åˆ°ä½ å¥½ï¼Œè¯æ˜æˆåŠŸã€‚\næ•´åˆSpring Security 1 2 3 4 org.springframework.boot spring-boot-starter-security åˆ·æ–°mavenåé‡å¯é¡¹ç›®ï¼Œå†æ¬¡å°è¯•è®¿é—®ä¹‹å‰çš„æ¥å£ï¼Œå°±ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°ä¸€ä¸ªSpringSecurityçš„é»˜è®¤ç™»å½•é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢çš„åœ°å€ä¸ºï¼šhttp://localhost:8080/login é»˜è®¤ç”¨æˆ·åä¸ºï¼šuserï¼Œå¯†ç åœ¨é¡¹ç›®å¯åŠ¨æ—¶æ‰“å°åœ¨æ§åˆ¶å°äº†ï¼š\n1 Using generated security password: 409fce70-25d6-49a2-8c6b-8bda3a95ba68 è¿™ä¸ªå¯†ç æ˜¯éšæœºçš„ã€‚ åœ¨é¡µé¢è¾“å…¥ç”¨æˆ·åå¯†ç åï¼Œä¼šé‡å®šå‘åˆ°helloæ¥å£ï¼š é»˜è®¤çš„é€€å‡ºç™»å½•æ¥å£æ˜¯ï¼š\n1 http://localhost:8080/logout ç‚¹å‡»log outï¼Œç™»å½•çŠ¶æ€å°±ä¼šæ¶ˆå¤±ï¼Œå†æ¬¡è®¿é—®helloæ¥å£ï¼Œå°±åˆä¼šå‡ºç°ç™»å½•é¡µé¢ã€‚\nè®¤è¯-å‰åç«¯äº¤äº’æµç¨‹ Spring SecurityåŸç† SpringSecurityçš„åŸç†å…¶å®å°±æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼Œå†…éƒ¨åŒ…å«äº†æä¾›å„ç§åŠŸèƒ½çš„è¿‡æ»¤å™¨ã€‚ä¾‹å¦‚å¿«é€Ÿå…¥é—¨æ¡ˆä¾‹é‡Œé¢ä½¿ç”¨åˆ°çš„ä¸‰ç§è¿‡æ»¤å™¨ï¼Œå¦‚ä¸‹å›¾ï¼š\nç›‘å¬å™¨ -\u003e è¿‡æ»¤å™¨é“¾ -\u003e dispatcherservlet(å‰ç½®æ‹¦æˆªå™¨ -\u003e mapperHandle -\u003e åç½®æ‹¦æˆªå™¨ -\u003e æœ€ç»ˆæ‹¦æˆªå™¨) UsernamePasswordAuthenticationFilterï¼š è´Ÿè´£å¤„ç†æˆ‘ä»¬åœ¨ç™»é™†é¡µé¢å¡«å†™äº†ç”¨æˆ·åå¯†ç åçš„ç™»é™†è¯·æ±‚ã€‚å…¥é—¨æ¡ˆä¾‹çš„è®¤è¯å·¥ä½œä¸»è¦æœ‰å®ƒè´Ÿè´£ã€‚\nExceptionTranslationFilterï¼š å¤„ç†è¿‡æ»¤å™¨é“¾ä¸­æŠ›å‡ºçš„ä»»ä½•AccessDeniedExceptionå’ŒAuthenticationExceptionã€‚\nFilterSecurityInterceptorï¼šè´Ÿè´£æƒé™æ ¡éªŒçš„è¿‡æ»¤å™¨ã€‚\næ³¨æ„ä¸Šå›¾ï¼Œæ©™è‰²éƒ¨åˆ†è¡¨ç¤ºè®¤è¯ï¼Œé»„è‰²éƒ¨åˆ†è¡¨ç¤ºå¼‚å¸¸å¤„ç†ï¼Œçº¢è‰²éƒ¨åˆ†è¡¨ç¤ºæˆæƒã€‚\næŸ¥çœ‹å…±æœ‰å¤šå°‘ç§filterï¼š\n1 2 3 4 5 6 7 8 9 10 @SpringBootApplication public class SpringSecurityApplication { public static void main(String[] args) { ConfigurableApplicationContext run = SpringApplication.run(SpringSecurityApplication.class, args); DefaultSecurityFilterChain bean = run.getBean(DefaultSecurityFilterChain.class); List filters = bean.getFilters(); for (Filter filter : filters) { System.out.println(filter.getClass().getName()); } } } è®¤è¯æµç¨‹ Authenticationæ¥å£ï¼šå®ƒçš„å®ç°ç±»ï¼Œè¡¨ç¤ºå½“å‰è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå°è£…äº†ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚ AuthenticationManageræ¥å£ï¼šå®šä¹‰äº†è®¤è¯Authenticationçš„æ–¹æ³•ã€‚ UserDetailsServiceæ¥å£ï¼šåŠ è½½ç”¨æˆ·ç‰¹å®šæ•°æ®çš„æ ¸å¿ƒæ¥å£ã€‚é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ã€‚ UserDetailsæ¥å£ï¼šæä¾›æ ¸å¿ƒç”¨æˆ·ä¿¡æ¯ã€‚é€šè¿‡UserDetailsServiceæ ¹æ®ç”¨æˆ·åè·å–å¤„ç†çš„ç”¨æˆ·ä¿¡æ¯è¦å°è£…æˆUserDetailså¯¹è±¡è¿”å›ã€‚ç„¶åå°†è¿™äº›ä¿¡æ¯å°è£…åˆ°Authenticationå¯¹è±¡ä¸­ã€‚\nè‡ªå®šä¹‰securityæ€è·¯ åœ¨ â€˜å¿«é€Ÿå¼€å§‹â€™ ä¸­ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥äº†Securityä¾èµ–ï¼Œå®ç°äº†å½“æˆ‘ä»¬è®¿é—®æŸä¸ªä¸šåŠ¡æ¥å£æ—¶ï¼Œä¼šè¢«Securityçš„loginæ¥å£æ‹¦æˆªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨Securityé»˜è®¤çš„ç™»å½•é¡µé¢ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Œè¿˜æœ‰ï¼ŒSpring Securityçš„æ ¡éªŒï¼Œæˆ‘ä»¬å¸Œæœ›æ˜¯æ ¹æ®æ•°æ®åº“æ¥åšæ ¡éªŒï¼Œé‚£ä¹ˆæ€ä¹ˆå®ç°å‘¢ã€‚æˆ‘ä»¬éœ€è¦å®ç°å¦‚ä¸‹ï¼š\nã€ç™»å½•-æœªå®ç°ã€‘ â‘ ã€è‡ªå®šä¹‰ç™»å½•æ¥å£ã€‚ç”¨äºè°ƒç”¨ProviderManagerçš„æ–¹æ³•è¿›è¡Œè®¤è¯ å¦‚æœè®¤è¯é€šè¿‡ç”Ÿæˆjwtï¼Œç„¶åæŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥redisä¸­ã€‚ â‘¡ã€è‡ªå®šä¹‰UserDetailsServiceæ¥å£çš„å®ç°ç±»ã€‚åœ¨è¿™ä¸ªå®ç°ç±»ä¸­å»æŸ¥è¯¢æ•°æ®åº“ã€‚\nã€æ ¡éªŒ-æœªå®ç°ã€‘ â‘ ã€å®šä¹‰Jwtè®¤è¯è¿‡æ»¤å™¨ã€‚ç”¨äºè·å–tokenï¼Œç„¶åè§£ætokenè·å–å…¶ä¸­çš„useridï¼Œè¿˜éœ€è¦ä»redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå­˜å…¥SecurityContextHolderã€‚\nåŸºç¡€ä»£ç è¡¥å…¨ å®Œæ•´pomå¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ",
  "wordCount" : "7794",
  "inLanguage": "en",
  "datePublished": "2023-05-18T15:50:13Z",
  "dateModified": "2023-05-18T15:50:13Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://009965.xyz/posts/spring/spring-security/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://009965.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;Â»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      æ‰‹å†™Spring
    </h1>
    <div class="post-meta"><span title='2023-05-18 15:50:13 +0000 UTC'>2023-05-18</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a></li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b" aria-label="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a><ul>
                        
                <li>
                    <a href="#%e6%95%b4%e5%90%88spring-security" aria-label="æ•´åˆSpring Security">æ•´åˆSpring Security</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%81-%e5%89%8d%e5%90%8e%e7%ab%af%e4%ba%a4%e4%ba%92%e6%b5%81%e7%a8%8b" aria-label="è®¤è¯-å‰åç«¯äº¤äº’æµç¨‹">è®¤è¯-å‰åç«¯äº¤äº’æµç¨‹</a></li>
                <li>
                    <a href="#spring-security%e5%8e%9f%e7%90%86" aria-label="Spring SecurityåŸç†">Spring SecurityåŸç†</a></li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%81%e6%b5%81%e7%a8%8b" aria-label="è®¤è¯æµç¨‹">è®¤è¯æµç¨‹</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89security%e6%80%9d%e8%b7%af" aria-label="è‡ªå®šä¹‰securityæ€è·¯">è‡ªå®šä¹‰securityæ€è·¯</a></li>
                <li>
                    <a href="#%e5%9f%ba%e7%a1%80%e4%bb%a3%e7%a0%81%e8%a1%a5%e5%85%a8" aria-label="åŸºç¡€ä»£ç è¡¥å…¨">åŸºç¡€ä»£ç è¡¥å…¨</a><ul>
                        
                <li>
                    <a href="#%e5%ae%8c%e6%95%b4pom%e5%a6%82%e4%b8%8b" aria-label="å®Œæ•´pomå¦‚ä¸‹ï¼š">å®Œæ•´pomå¦‚ä¸‹ï¼š</a></li>
                <li>
                    <a href="#fastjson%e5%ba%8f%e5%88%97%e5%8c%96%e5%b7%a5%e5%85%b7%e7%b1%bb" aria-label="FastJsonåºåˆ—åŒ–å·¥å…·ç±»ï¼š">FastJsonåºåˆ—åŒ–å·¥å…·ç±»ï¼š</a></li>
                <li>
                    <a href="#redis%e9%85%8d%e7%bd%ae%e7%b1%bb" aria-label="redisé…ç½®ç±»ï¼š">redisé…ç½®ç±»ï¼š</a></li>
                <li>
                    <a href="#%e5%93%8d%e5%ba%94%e5%b7%a5%e5%85%b7%e7%b1%bb" aria-label="å“åº”å·¥å…·ç±»ï¼š">å“åº”å·¥å…·ç±»ï¼š</a></li>
                <li>
                    <a href="#jwt%e5%b7%a5%e5%85%b7%e7%b1%bb" aria-label="jwtå·¥å…·ç±»ï¼š">jwtå·¥å…·ç±»ï¼š</a></li>
                <li>
                    <a href="#redis%e5%b7%a5%e5%85%b7%e7%b1%bb" aria-label="rediså·¥å…·ç±»ï¼š">rediså·¥å…·ç±»ï¼š</a></li>
                <li>
                    <a href="#webutils%e5%b7%a5%e5%85%b7%e7%b1%bb" aria-label="WebUtilså·¥å…·ç±»ï¼š">WebUtilså·¥å…·ç±»ï¼š</a></li>
                <li>
                    <a href="#user%e7%b1%bb" aria-label="userç±»ï¼š">userç±»ï¼š</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="æ•°æ®åº“">æ•°æ®åº“</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89security%e7%9a%84%e8%ae%a4%e8%af%81%e5%ae%9e%e7%8e%b0" aria-label="è‡ªå®šä¹‰securityçš„è®¤è¯å®ç°">è‡ªå®šä¹‰securityçš„è®¤è¯å®ç°</a></li>
                <li>
                    <a href="#%e5%af%86%e7%a0%81%e6%a0%a1%e9%aa%8c%e9%97%ae%e9%a2%98" aria-label="å¯†ç æ ¡éªŒé—®é¢˜">å¯†ç æ ¡éªŒé—®é¢˜</a></li>
                <li>
                    <a href="#%e7%99%bb%e5%bd%95%e6%8e%a5%e5%8f%a3%e7%9a%84%e5%88%86%e6%9e%90" aria-label="ç™»å½•æ¥å£çš„åˆ†æ">ç™»å½•æ¥å£çš„åˆ†æ</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p>å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-security">Spring Security</a></p>
<p>springsecurity æ˜¯å®‰å…¨æ¡†æ¶ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶<strong>Shiro</strong>ï¼Œspringsecurity æä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œç¤¾åŒºèµ„æºä¹Ÿæ¯”Shiroä¸°å¯Œã€‚
springsecurity æ¡†æ¶ç”¨äºWebåº”ç”¨çš„éœ€è¦è¿›è¡Œè®¤è¯å’Œæˆæƒã€‚</p>
<p>è®¤è¯ï¼šéªŒè¯å½“å‰è®¿é—®ç³»ç»Ÿçš„æ˜¯ä¸æ˜¯æœ¬ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå¹¶ä¸”è¦ç¡®è®¤å…·ä½“æ˜¯å“ªä¸ªç”¨æˆ·ã€‚</p>
<p>æˆæƒï¼šç»è¿‡è®¤è¯ååˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡ŒæŸä¸ªæ“ä½œã€‚ è®¤è¯å’Œæˆæƒä¹Ÿæ˜¯SpringSecurityä½œä¸ºå®‰å…¨æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ ã€‚</p>
<h1 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹<a hidden class="anchor" aria-hidden="true" href="#å¿«é€Ÿå¼€å§‹">#</a></h1>
<p>æ–°å»ºspring boot é¡¹ç›®ï¼Œå¼•å…¥ä¾èµ–ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>org.projectlombok<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>lombok<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;optional&gt;</span>true<span style="font-weight:bold">&lt;/optional&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºæµ‹è¯•controller</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.controller;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.web.bind.annotation.GetMapping;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.web.bind.annotation.RestController;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@RestController  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloController {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @GetMapping(<span style="color:#0ff;font-weight:bold">&#34;/hello&#34;</span>)  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String hello(){  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;ä½ å¥½&#34;</span>;  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®ï¼š<code>http://localhost:8080/hello</code>ï¼Œçœ‹åˆ°<strong>ä½ å¥½</strong>ï¼Œè¯æ˜æˆåŠŸã€‚</p>
<h2 id="æ•´åˆspring-security">æ•´åˆSpring Security<a hidden class="anchor" aria-hidden="true" href="#æ•´åˆspring-security">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-security<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ·æ–°mavenåé‡å¯é¡¹ç›®ï¼Œå†æ¬¡å°è¯•è®¿é—®ä¹‹å‰çš„æ¥å£ï¼Œå°±ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°ä¸€ä¸ªSpringSecurityçš„é»˜è®¤ç™»å½•é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢çš„åœ°å€ä¸ºï¼š<code>http://localhost:8080/login</code>
<img loading="lazy" src="/posts/spring/spring-security/%E9%BB%98%E8%AE%A4%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2.png">
é»˜è®¤ç”¨æˆ·åä¸ºï¼šuserï¼Œå¯†ç åœ¨é¡¹ç›®å¯åŠ¨æ—¶æ‰“å°åœ¨æ§åˆ¶å°äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Using generated security password: 409fce70-25d6-49a2-8c6b-8bda3a95ba68
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªå¯†ç æ˜¯éšæœºçš„ã€‚
åœ¨é¡µé¢è¾“å…¥ç”¨æˆ·åå¯†ç åï¼Œä¼šé‡å®šå‘åˆ°helloæ¥å£ï¼š
<img loading="lazy" src="/posts/spring/spring-security/%E7%99%BB%E5%BD%95%E5%90%8E.png"></p>
<p>é»˜è®¤çš„é€€å‡ºç™»å½•æ¥å£æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>http://localhost:8080/logout
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/spring/spring-security/logout.png">
ç‚¹å‡»log outï¼Œç™»å½•çŠ¶æ€å°±ä¼šæ¶ˆå¤±ï¼Œå†æ¬¡è®¿é—®helloæ¥å£ï¼Œå°±åˆä¼šå‡ºç°ç™»å½•é¡µé¢ã€‚</p>
<h1 id="è®¤è¯-å‰åç«¯äº¤äº’æµç¨‹">è®¤è¯-å‰åç«¯äº¤äº’æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#è®¤è¯-å‰åç«¯äº¤äº’æµç¨‹">#</a></h1>
<p><img loading="lazy" src="/posts/spring/spring-security/%E5%89%8D%E5%90%8E%E7%AB%AF%E8%AE%A4%E8%AF%81%E4%BA%A4%E4%BA%92%E6%B5%81%E7%A8%8B.png"></p>
<h1 id="spring-securityåŸç†">Spring SecurityåŸç†<a hidden class="anchor" aria-hidden="true" href="#spring-securityåŸç†">#</a></h1>
<p>SpringSecurityçš„åŸç†å…¶å®å°±æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼Œå†…éƒ¨åŒ…å«äº†æä¾›å„ç§åŠŸèƒ½çš„è¿‡æ»¤å™¨ã€‚ä¾‹å¦‚å¿«é€Ÿå…¥é—¨æ¡ˆä¾‹é‡Œé¢ä½¿ç”¨åˆ°çš„ä¸‰ç§è¿‡æ»¤å™¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p>ç›‘å¬å™¨ -&gt; è¿‡æ»¤å™¨é“¾ -&gt; dispatcherservlet(å‰ç½®æ‹¦æˆªå™¨ -&gt; mapperHandle -&gt; åç½®æ‹¦æˆªå™¨ -&gt; æœ€ç»ˆæ‹¦æˆªå™¨)
<img loading="lazy" src="/posts/spring/spring-security/Spring-Security%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE.png"></p>
<p><code>UsernamePasswordAuthenticationFilter</code>ï¼š
è´Ÿè´£å¤„ç†æˆ‘ä»¬åœ¨ç™»é™†é¡µé¢å¡«å†™äº†ç”¨æˆ·åå¯†ç åçš„ç™»é™†è¯·æ±‚ã€‚å…¥é—¨æ¡ˆä¾‹çš„è®¤è¯å·¥ä½œä¸»è¦æœ‰å®ƒè´Ÿè´£ã€‚</p>
<p><code>ExceptionTranslationFilter</code>ï¼š
å¤„ç†è¿‡æ»¤å™¨é“¾ä¸­æŠ›å‡ºçš„ä»»ä½•AccessDeniedExceptionå’ŒAuthenticationExceptionã€‚</p>
<p><code>FilterSecurityInterceptor</code>ï¼šè´Ÿè´£æƒé™æ ¡éªŒçš„è¿‡æ»¤å™¨ã€‚</p>
<p>æ³¨æ„ä¸Šå›¾ï¼Œæ©™è‰²éƒ¨åˆ†è¡¨ç¤ºè®¤è¯ï¼Œé»„è‰²éƒ¨åˆ†è¡¨ç¤ºå¼‚å¸¸å¤„ç†ï¼Œçº¢è‰²éƒ¨åˆ†è¡¨ç¤ºæˆæƒã€‚</p>
<p>æŸ¥çœ‹å…±æœ‰å¤šå°‘ç§filterï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@SpringBootApplication  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpringSecurityApplication {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {  
</span></span><span style="display:flex;"><span>       ConfigurableApplicationContext run = SpringApplication.<span style="color:#007f7f">run</span>(SpringSecurityApplication.<span style="color:#007f7f">class</span>, args);  
</span></span><span style="display:flex;"><span>       DefaultSecurityFilterChain bean = run.<span style="color:#007f7f">getBean</span>(DefaultSecurityFilterChain.<span style="color:#007f7f">class</span>);  
</span></span><span style="display:flex;"><span>       List&lt;Filter&gt; filters = bean.<span style="color:#007f7f">getFilters</span>();       <span style="color:#fff;font-weight:bold">for</span> (Filter filter : filters) {  
</span></span><span style="display:flex;"><span>          System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(filter.<span style="color:#007f7f">getClass</span>().<span style="color:#007f7f">getName</span>());  
</span></span><span style="display:flex;"><span>       }    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="è®¤è¯æµç¨‹">è®¤è¯æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#è®¤è¯æµç¨‹">#</a></h1>
<p>Authenticationæ¥å£ï¼šå®ƒçš„å®ç°ç±»ï¼Œè¡¨ç¤ºå½“å‰è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå°è£…äº†ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚
AuthenticationManageræ¥å£ï¼šå®šä¹‰äº†è®¤è¯Authenticationçš„æ–¹æ³•ã€‚
UserDetailsServiceæ¥å£ï¼šåŠ è½½ç”¨æˆ·ç‰¹å®šæ•°æ®çš„æ ¸å¿ƒæ¥å£ã€‚é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ã€‚
UserDetailsæ¥å£ï¼šæä¾›æ ¸å¿ƒç”¨æˆ·ä¿¡æ¯ã€‚é€šè¿‡UserDetailsServiceæ ¹æ®ç”¨æˆ·åè·å–å¤„ç†çš„ç”¨æˆ·ä¿¡æ¯è¦å°è£…æˆUserDetailså¯¹è±¡è¿”å›ã€‚ç„¶åå°†è¿™äº›ä¿¡æ¯å°è£…åˆ°Authenticationå¯¹è±¡ä¸­ã€‚<br>
<img loading="lazy" src="/posts/spring/spring-security/%E8%AE%A4%E8%AF%81.png"></p>
<h1 id="è‡ªå®šä¹‰securityæ€è·¯">è‡ªå®šä¹‰securityæ€è·¯<a hidden class="anchor" aria-hidden="true" href="#è‡ªå®šä¹‰securityæ€è·¯">#</a></h1>
<p>åœ¨ &lsquo;å¿«é€Ÿå¼€å§‹&rsquo; ä¸­ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥äº†Securityä¾èµ–ï¼Œå®ç°äº†å½“æˆ‘ä»¬è®¿é—®æŸä¸ªä¸šåŠ¡æ¥å£æ—¶ï¼Œä¼šè¢«Securityçš„loginæ¥å£æ‹¦æˆªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨Securityé»˜è®¤çš„ç™»å½•é¡µé¢ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Œè¿˜æœ‰ï¼ŒSpring Securityçš„æ ¡éªŒï¼Œæˆ‘ä»¬å¸Œæœ›æ˜¯æ ¹æ®æ•°æ®åº“æ¥åšæ ¡éªŒï¼Œé‚£ä¹ˆæ€ä¹ˆå®ç°å‘¢ã€‚æˆ‘ä»¬éœ€è¦å®ç°å¦‚ä¸‹ï¼š</p>
<p>ã€ç™»å½•-æœªå®ç°ã€‘
â‘ ã€è‡ªå®šä¹‰ç™»å½•æ¥å£ã€‚ç”¨äºè°ƒç”¨ProviderManagerçš„æ–¹æ³•è¿›è¡Œè®¤è¯ å¦‚æœè®¤è¯é€šè¿‡ç”Ÿæˆjwtï¼Œç„¶åæŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥redisä¸­ã€‚
â‘¡ã€è‡ªå®šä¹‰UserDetailsServiceæ¥å£çš„å®ç°ç±»ã€‚åœ¨è¿™ä¸ªå®ç°ç±»ä¸­å»æŸ¥è¯¢æ•°æ®åº“ã€‚</p>
<p>ã€æ ¡éªŒ-æœªå®ç°ã€‘
â‘ ã€å®šä¹‰Jwtè®¤è¯è¿‡æ»¤å™¨ã€‚ç”¨äºè·å–tokenï¼Œç„¶åè§£ætokenè·å–å…¶ä¸­çš„useridï¼Œè¿˜éœ€è¦ä»redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå­˜å…¥SecurityContextHolderã€‚</p>
<h1 id="åŸºç¡€ä»£ç è¡¥å…¨">åŸºç¡€ä»£ç è¡¥å…¨<a hidden class="anchor" aria-hidden="true" href="#åŸºç¡€ä»£ç è¡¥å…¨">#</a></h1>
<h2 id="å®Œæ•´pomå¦‚ä¸‹">å®Œæ•´pomå¦‚ä¸‹ï¼š<a hidden class="anchor" aria-hidden="true" href="#å®Œæ•´pomå¦‚ä¸‹">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;parent&gt;</span>       <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;version&gt;</span>3.4.3<span style="font-weight:bold">&lt;/version&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;relativePath/&gt;</span> <span style="color:#007f7f">&lt;!-- lookup parent from repository --&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/parent&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.wjy<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-security<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;name&gt;</span>spring-security<span style="font-weight:bold">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;description&gt;</span>spring-security<span style="font-weight:bold">&lt;/description&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;url/&gt;</span>    <span style="font-weight:bold">&lt;licenses&gt;</span>       <span style="font-weight:bold">&lt;license/&gt;</span>    <span style="font-weight:bold">&lt;/licenses&gt;</span>    <span style="font-weight:bold">&lt;developers&gt;</span>       <span style="font-weight:bold">&lt;developer/&gt;</span>    <span style="font-weight:bold">&lt;/developers&gt;</span>    <span style="font-weight:bold">&lt;scm&gt;</span>       <span style="font-weight:bold">&lt;connection/&gt;</span>       <span style="font-weight:bold">&lt;developerConnection/&gt;</span>       <span style="font-weight:bold">&lt;tag/&gt;</span>       <span style="font-weight:bold">&lt;url/&gt;</span>    <span style="font-weight:bold">&lt;/scm&gt;</span>    <span style="font-weight:bold">&lt;properties&gt;</span>       <span style="font-weight:bold">&lt;java.version&gt;</span>21<span style="font-weight:bold">&lt;/java.version&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>    <span style="font-weight:bold">&lt;dependencies&gt;</span>       <span style="font-weight:bold">&lt;dependency&gt;</span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-security<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!--redisä¾èµ–--&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!--jwtä¾èµ–--&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;groupId&gt;</span>io.jsonwebtoken<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>jjwt<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;version&gt;</span>0.12.6<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!--å¼•å…¥Lombokä¾èµ–ï¼Œæ–¹ä¾¿å®ä½“ç±»å¼€å‘--&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;groupId&gt;</span>org.projectlombok<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>lombok<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!--fastjsonä¾èµ–--&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;groupId&gt;</span>com.alibaba<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>fastjson<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;version&gt;</span>1.2.33<span style="font-weight:bold">&lt;/version&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;dependency&gt;</span>          <span style="font-weight:bold">&lt;groupId&gt;</span>com.baomidou<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-plus-spring-boot3-starter<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;version&gt;</span>3.5.10.1<span style="font-weight:bold">&lt;/version&gt;</span>  
</span></span><span style="display:flex;"><span>       <span style="font-weight:bold">&lt;/dependency&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependencies&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;build&gt;</span>       <span style="font-weight:bold">&lt;plugins&gt;</span>          <span style="font-weight:bold">&lt;plugin&gt;</span>             <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>             <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;/plugin&gt;</span>       <span style="font-weight:bold">&lt;/plugins&gt;</span>    <span style="font-weight:bold">&lt;/build&gt;</span>  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="fastjsonåºåˆ—åŒ–å·¥å…·ç±»">FastJsonåºåˆ—åŒ–å·¥å…·ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#fastjsonåºåˆ—åŒ–å·¥å…·ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.controller.util;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.alibaba.fastjson.JSON;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.alibaba.fastjson.parser.ParserConfig;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.alibaba.fastjson.serializer.SerializerFeature;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.fasterxml.jackson.databind.JavaType;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.fasterxml.jackson.databind.type.TypeFactory;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.serializer.RedisSerializer;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.serializer.SerializationException;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.nio.charset.Charset;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> FastJsonRedisSerializer&lt;T&gt; <span style="color:#fff;font-weight:bold">implements</span> RedisSerializer&lt;T&gt; {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Charset DEFAULT_CHARSET = Charset.<span style="color:#007f7f">forName</span>(<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Class&lt;T&gt; clazz;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> {  
</span></span><span style="display:flex;"><span>        ParserConfig.<span style="color:#007f7f">getGlobalInstance</span>().<span style="color:#007f7f">setAutoTypeSupport</span>(<span style="color:#fff;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> FastJsonRedisSerializer(Class&lt;T&gt; clazz) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">clazz</span> = clazz;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">byte</span>[] serialize(T t) <span style="color:#fff;font-weight:bold">throws</span> SerializationException {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (t == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[0];  
</span></span><span style="display:flex;"><span>        }        <span style="color:#fff;font-weight:bold">return</span> JSON.<span style="color:#007f7f">toJSONString</span>(t, SerializerFeature.<span style="color:#007f7f">WriteClassName</span>).<span style="color:#007f7f">getBytes</span>(DEFAULT_CHARSET);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> T deserialize(<span style="color:#fff;font-weight:bold">byte</span>[] bytes) <span style="color:#fff;font-weight:bold">throws</span> SerializationException {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (bytes == <span style="color:#fff;font-weight:bold">null</span> || bytes.<span style="color:#007f7f">length</span> &lt;= 0) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>        }        String str = <span style="color:#fff;font-weight:bold">new</span> String(bytes, DEFAULT_CHARSET);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JSON.<span style="color:#007f7f">parseObject</span>(str, clazz);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> JavaType getJavaType(Class&lt;?&gt; clazz) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> TypeFactory.<span style="color:#007f7f">defaultInstance</span>().<span style="color:#007f7f">constructType</span>(clazz);  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="redisé…ç½®ç±»">redisé…ç½®ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#redisé…ç½®ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.controller.util.config;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.wjy.springsecurity.controller.util.FastJsonRedisSerializer;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.context.annotation.Bean;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.context.annotation.Configuration;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.core.RedisTemplate;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@Configuration  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> RedisConfig {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @Bean  
</span></span><span style="display:flex;"><span>    @SuppressWarnings(value = {<span style="color:#0ff;font-weight:bold">&#34;unchecked&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;rawtypes&#34;</span>})  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory) {  
</span></span><span style="display:flex;"><span>        RedisTemplate&lt;Object, Object&gt; template = <span style="color:#fff;font-weight:bold">new</span> RedisTemplate&lt;&gt;();  
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">setConnectionFactory</span>(connectionFactory);  
</span></span><span style="display:flex;"><span>        FastJsonRedisSerializer serializer = <span style="color:#fff;font-weight:bold">new</span> FastJsonRedisSerializer(Object.<span style="color:#007f7f">class</span>);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä½¿ç”¨StringRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„keyå€¼  </span>
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">setKeySerializer</span>(<span style="color:#fff;font-weight:bold">new</span> StringRedisSerializer());  
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">setValueSerializer</span>(serializer);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Hashçš„keyä¹Ÿé‡‡ç”¨StringRedisSerializerçš„åºåˆ—åŒ–æ–¹å¼  </span>
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">setHashKeySerializer</span>(<span style="color:#fff;font-weight:bold">new</span> StringRedisSerializer());  
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">setHashValueSerializer</span>(serializer);  
</span></span><span style="display:flex;"><span>        template.<span style="color:#007f7f">afterPropertiesSet</span>();        <span style="color:#fff;font-weight:bold">return</span> template;  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å“åº”å·¥å…·ç±»">å“åº”å·¥å…·ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#å“åº”å·¥å…·ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.util;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.fasterxml.jackson.annotation.JsonInclude;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@JsonInclude(JsonInclude.<span style="color:#007f7f">Include</span>.<span style="color:#007f7f">NON_NULL</span>)  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ResponseResult&lt;T&gt; {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * çŠ¶æ€ç   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer code;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æç¤ºä¿¡æ¯ï¼Œå¦‚æœæœ‰é”™è¯¯æ—¶ï¼Œå‰ç«¯å¯ä»¥è·å–è¯¥å­—æ®µè¿›è¡Œæç¤º  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String msg;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æŸ¥è¯¢åˆ°çš„ç»“æœæ•°æ®ï¼Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> T data;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ResponseResult(Integer code, String msg) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">code</span> = code;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">msg</span> = msg;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ResponseResult(Integer code, T data) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">code</span> = code;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">data</span> = data;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Integer getCode() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> code;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setCode(Integer code) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">code</span> = code;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMsg() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> msg;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMsg(String msg) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">msg</span> = msg;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> T getData() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> data;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setData(T data) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">data</span> = data;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ResponseResult(Integer code, String msg, T data) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">code</span> = code;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">msg</span> = msg;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">data</span> = data;  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="jwtå·¥å…·ç±»">jwtå·¥å…·ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#jwtå·¥å…·ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.util;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.Claims;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.ExpiredJwtException;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.Jwts;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.SignatureAlgorithm;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.security.Keys;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> io.jsonwebtoken.security.SignatureException;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.security.Key;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Date;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.HashMap;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.function.Function;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * JWTå·¥å…·ç±»ï¼Œç”¨äºJWTä»¤ç‰Œçš„ç”Ÿæˆã€éªŒè¯å’Œè§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> JwtUtil {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å¯†é’¥ï¼Œå»ºè®®é€šè¿‡é…ç½®æ–‡ä»¶æ³¨å…¥  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> String SECRET_KEY = <span style="color:#0ff;font-weight:bold">&#34;your_secret_key_should_be_at_least_256_bits_long_for_hs256&#34;</span>;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ä»¤ç‰Œæœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> JWT_TOKEN_VALIDITY = 24 * 60 * 60 * 1000; <span style="color:#007f7f">// 24å°æ—¶  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ç­¾åç®—æ³•  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> SignatureAlgorithm SIGNATURE_ALGORITHM = SignatureAlgorithm.<span style="color:#007f7f">HS256</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {  
</span></span><span style="display:flex;"><span>        JwtUtil jwtUtil = <span style="color:#fff;font-weight:bold">new</span> JwtUtil();  
</span></span><span style="display:flex;"><span>        String wjy = jwtUtil.<span style="color:#007f7f">generateToken</span>(<span style="color:#0ff;font-weight:bold">&#34;wjy&#34;</span>);  
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(wjy);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(jwtUtil.<span style="color:#007f7f">getUsernameFromToken</span>(wjy));
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”Ÿæˆå¯†é’¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Key getSigningKey() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] keyBytes = SECRET_KEY.<span style="color:#007f7f">getBytes</span>();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Keys.<span style="color:#007f7f">hmacShaKeyFor</span>(keyBytes);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä»ä»¤ç‰Œä¸­è·å–ç”¨æˆ·å  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getUsernameFromToken(String token) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> getClaimFromToken(token, Claims::getSubject);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä»ä»¤ç‰Œä¸­è·å–è¿‡æœŸæ—¥æœŸ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Date getExpirationDateFromToken(String token) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> getClaimFromToken(token, Claims::getExpiration);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä»ä»¤ç‰Œä¸­è·å–å£°æ˜  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">final</span> Claims claims = getAllClaimsFromToken(token);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> claimsResolver.<span style="color:#007f7f">apply</span>(claims);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è§£æä»¤ç‰Œè·å–æ‰€æœ‰å£°æ˜  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Claims getAllClaimsFromToken(String token) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Jwts.<span style="color:#007f7f">parser</span>()  
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">setSigningKey</span>(getSigningKey())                .<span style="color:#007f7f">build</span>()                .<span style="color:#007f7f">parseClaimsJws</span>(token)                .<span style="color:#007f7f">getBody</span>();    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¿‡æœŸ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Boolean isTokenExpired(String token) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">final</span> Date expiration = getExpirationDateFromToken(token);  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> expiration.<span style="color:#007f7f">before</span>(<span style="color:#fff;font-weight:bold">new</span> Date());  
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ExpiredJwtException e) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>        }    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä¸ºæŒ‡å®šç”¨æˆ·ç”Ÿæˆä»¤ç‰Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String generateToken(String username) {  
</span></span><span style="display:flex;"><span>        Map&lt;String, Object&gt; claims = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> doGenerateToken(claims, username);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä¸ºæŒ‡å®šç”¨æˆ·ç”Ÿæˆå¸¦è‡ªå®šä¹‰å£°æ˜çš„ä»¤ç‰Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String generateToken(String username, Map&lt;String, Object&gt; claims) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> doGenerateToken(claims, username);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”Ÿæˆä»¤ç‰Œçš„æ ¸å¿ƒæ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String doGenerateToken(Map&lt;String, Object&gt; claims, String subject) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Jwts.<span style="color:#007f7f">builder</span>()  
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">setClaims</span>(claims)                .<span style="color:#007f7f">setSubject</span>(subject)                .<span style="color:#007f7f">setIssuedAt</span>(<span style="color:#fff;font-weight:bold">new</span> Date())  
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">setExpiration</span>(<span style="color:#fff;font-weight:bold">new</span> Date(System.<span style="color:#007f7f">currentTimeMillis</span>() + JWT_TOKEN_VALIDITY))  
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">signWith</span>(getSigningKey(), SIGNATURE_ALGORITHM)  
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">compact</span>();    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * éªŒè¯ä»¤ç‰Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Boolean validateToken(String token, String username) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">final</span> String tokenUsername = getUsernameFromToken(token);  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> (tokenUsername.<span style="color:#007f7f">equals</span>(username) &amp;&amp; !isTokenExpired(token));  
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SignatureException | ExpiredJwtException e) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;  
</span></span><span style="display:flex;"><span>        }    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ·æ–°ä»¤ç‰Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String refreshToken(String token) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">final</span> Claims claims = getAllClaimsFromToken(token);  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//claims.setIssuedAt(new Date());  </span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//claims.setExpiration(new Date(System.currentTimeMillis() + JWT_TOKEN_VALIDITY));            return Jwts.builder()  </span>
</span></span><span style="display:flex;"><span>                    .<span style="color:#007f7f">setClaims</span>(claims)                    .<span style="color:#007f7f">signWith</span>(getSigningKey(), SIGNATURE_ALGORITHM)  
</span></span><span style="display:flex;"><span>                    .<span style="color:#007f7f">compact</span>();        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(<span style="color:#0ff;font-weight:bold">&#34;æ— æ³•åˆ·æ–°ä»¤ç‰Œ&#34;</span>, e);  
</span></span><span style="display:flex;"><span>        }    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="rediså·¥å…·ç±»">rediså·¥å…·ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#rediså·¥å…·ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">193
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.util;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.beans.factory.annotation.Autowired;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.core.BoundSetOperations;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.core.HashOperations;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.core.RedisTemplate;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.data.redis.core.ValueOperations;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.stereotype.Component;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.*;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.concurrent.TimeUnit;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@SuppressWarnings(value = {<span style="color:#0ff;font-weight:bold">&#34;unchecked&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;rawtypes&#34;</span>})  
</span></span><span style="display:flex;"><span>@Component  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//rediså·¥å…·ç±»  </span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> RedisCache {  
</span></span><span style="display:flex;"><span>    @Autowired  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> RedisTemplate redisTemplate;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key   ç¼“å­˜çš„é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param value ç¼“å­˜çš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; <span style="color:#fff;font-weight:bold">void</span> setCacheObject(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> T value) {  
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#007f7f">opsForValue</span>().<span style="color:#007f7f">set</span>(key, value);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key      ç¼“å­˜çš„é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param value    ç¼“å­˜çš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param timeout  æ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param timeUnit æ—¶é—´é¢—ç²’åº¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; <span style="color:#fff;font-weight:bold">void</span> setCacheObject(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> T value, <span style="color:#fff;font-weight:bold">final</span> Integer timeout, <span style="color:#fff;font-weight:bold">final</span> TimeUnit timeUnit) {  
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#007f7f">opsForValue</span>().<span style="color:#007f7f">set</span>(key, value, timeout, timeUnit);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è®¾ç½®æœ‰æ•ˆæ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key     Redisé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param timeout è¶…æ—¶æ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> expire(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> timeout) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> expire(key, timeout, TimeUnit.<span style="color:#007f7f">SECONDS</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è®¾ç½®æœ‰æ•ˆæ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key     Redisé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param timeout è¶…æ—¶æ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param unit    æ—¶é—´å•ä½  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> expire(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> timeout, <span style="color:#fff;font-weight:bold">final</span> TimeUnit unit) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">expire</span>(key, timeout, unit);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡ã€‚  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key ç¼“å­˜é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T getCacheObject(<span style="color:#fff;font-weight:bold">final</span> String key) {  
</span></span><span style="display:flex;"><span>        ValueOperations&lt;String, T&gt; operation = redisTemplate.<span style="color:#007f7f">opsForValue</span>();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> operation.<span style="color:#007f7f">get</span>(key);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ é™¤å•ä¸ªå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> deleteObject(<span style="color:#fff;font-weight:bold">final</span> String key) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">delete</span>(key);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ é™¤é›†åˆå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param collection å¤šä¸ªå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> deleteObject(<span style="color:#fff;font-weight:bold">final</span> Collection collection) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">delete</span>(collection);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç¼“å­˜Listæ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key      ç¼“å­˜çš„é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param dataList å¾…ç¼“å­˜çš„Listæ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return ç¼“å­˜çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; <span style="color:#fff;font-weight:bold">long</span> setCacheList(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> List&lt;T&gt; dataList) {  
</span></span><span style="display:flex;"><span>        Long count = redisTemplate.<span style="color:#007f7f">opsForList</span>().<span style="color:#007f7f">rightPushAll</span>(key, dataList);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count == <span style="color:#fff;font-weight:bold">null</span> ? 0 : count;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å¾—ç¼“å­˜çš„listå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key ç¼“å­˜çš„é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; List&lt;T&gt; getCacheList(<span style="color:#fff;font-weight:bold">final</span> String key) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">opsForList</span>().<span style="color:#007f7f">range</span>(key, 0, -1);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç¼“å­˜Set  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *     * @param key     ç¼“å­˜é”®å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param dataSet ç¼“å­˜çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return ç¼“å­˜æ•°æ®çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; BoundSetOperations&lt;String, T&gt; setCacheSet(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> Set&lt;T&gt; dataSet) {  
</span></span><span style="display:flex;"><span>        BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.<span style="color:#007f7f">boundSetOps</span>(key);  
</span></span><span style="display:flex;"><span>        Iterator&lt;T&gt; it = dataSet.<span style="color:#007f7f">iterator</span>();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">while</span> (it.<span style="color:#007f7f">hasNext</span>()) {  
</span></span><span style="display:flex;"><span>            setOperation.<span style="color:#007f7f">add</span>(it.<span style="color:#007f7f">next</span>());        }        <span style="color:#fff;font-weight:bold">return</span> setOperation;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å¾—ç¼“å­˜çš„set  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *     * @param key  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; Set&lt;T&gt; getCacheSet(<span style="color:#fff;font-weight:bold">final</span> String key) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">opsForSet</span>().<span style="color:#007f7f">members</span>(key);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç¼“å­˜Map  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *     * @param key  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param dataMap  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; <span style="color:#fff;font-weight:bold">void</span> setCacheMap(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> Map&lt;String, T&gt; dataMap) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (dataMap != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            redisTemplate.<span style="color:#007f7f">opsForHash</span>().<span style="color:#007f7f">putAll</span>(key, dataMap);  
</span></span><span style="display:flex;"><span>        }    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å¾—ç¼“å­˜çš„Map  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *     * @param key  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; Map&lt;String, T&gt; getCacheMap(<span style="color:#fff;font-weight:bold">final</span> String key) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">opsForHash</span>().<span style="color:#007f7f">entries</span>(key);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å¾€Hashä¸­å­˜å…¥æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key   Redisé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param hKey  Hashé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param value å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; <span style="color:#fff;font-weight:bold">void</span> setCacheMapValue(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> String hKey, <span style="color:#fff;font-weight:bold">final</span> T value) {  
</span></span><span style="display:flex;"><span>        redisTemplate.<span style="color:#007f7f">opsForHash</span>().<span style="color:#007f7f">put</span>(key, hKey, value);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–Hashä¸­çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key  Redisé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param hKey Hashé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return Hashä¸­çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T getCacheMapValue(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> String hKey) {  
</span></span><span style="display:flex;"><span>        HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.<span style="color:#007f7f">opsForHash</span>();  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> opsForHash.<span style="color:#007f7f">get</span>(key, hKey);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ é™¤Hashä¸­çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param hkey  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> delCacheMapValue(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> String hkey) {  
</span></span><span style="display:flex;"><span>        HashOperations hashOperations = redisTemplate.<span style="color:#007f7f">opsForHash</span>();  
</span></span><span style="display:flex;"><span>        hashOperations.<span style="color:#007f7f">delete</span>(key, hkey);    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–å¤šä¸ªHashä¸­çš„æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key   Redisé”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param hKeys Hashé”®é›†åˆ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return Hashå¯¹è±¡é›†åˆ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; List&lt;T&gt; getMultiCacheMapValue(<span style="color:#fff;font-weight:bold">final</span> String key, <span style="color:#fff;font-weight:bold">final</span> Collection&lt;Object&gt; hKeys) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">opsForHash</span>().<span style="color:#007f7f">multiGet</span>(key, hKeys);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡åˆ—è¡¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param pattern å­—ç¬¦ä¸²å‰ç¼€  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return å¯¹è±¡åˆ—è¡¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Collection&lt;String&gt; keys(<span style="color:#fff;font-weight:bold">final</span> String pattern) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> redisTemplate.<span style="color:#007f7f">keys</span>(pattern);  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="webutilså·¥å…·ç±»">WebUtilså·¥å…·ç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#webutilså·¥å…·ç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.util;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> jakarta.servlet.http.HttpServletResponse;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.IOException;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> WebUtils {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å°†å­—ç¬¦ä¸²æ¸²æŸ“åˆ°å®¢æˆ·ç«¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param response æ¸²æŸ“å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param string   å¾…æ¸²æŸ“çš„å­—ç¬¦ä¸²  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return null  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> String renderString(HttpServletResponse response, String string) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>            response.<span style="color:#007f7f">setStatus</span>(200);  
</span></span><span style="display:flex;"><span>            response.<span style="color:#007f7f">setContentType</span>(<span style="color:#0ff;font-weight:bold">&#34;application/json&#34;</span>);  
</span></span><span style="display:flex;"><span>            response.<span style="color:#007f7f">setCharacterEncoding</span>(<span style="color:#0ff;font-weight:bold">&#34;utf-8&#34;</span>);  
</span></span><span style="display:flex;"><span>            response.<span style="color:#007f7f">getWriter</span>().<span style="color:#007f7f">print</span>(string);        } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {  
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();        }        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="userç±»">userç±»ï¼š<a hidden class="anchor" aria-hidden="true" href="#userç±»">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.domain;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.baomidou.mybatisplus.annotation.TableId;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.baomidou.mybatisplus.annotation.TableName;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.AllArgsConstructor;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.Data;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.NoArgsConstructor;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.Serializable;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Date;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ç”¨æˆ·è¡¨(User)å®ä½“ç±»  </span>
</span></span><span style="display:flex;"><span>@Data  
</span></span><span style="display:flex;"><span>@AllArgsConstructor  
</span></span><span style="display:flex;"><span>@NoArgsConstructor  
</span></span><span style="display:flex;"><span>@TableName(<span style="color:#0ff;font-weight:bold">&#34;sys_user&#34;</span>)  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> User <span style="color:#fff;font-weight:bold">implements</span> Serializable {  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> serialVersionUID = -40356785423868312L;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä¸»é”®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    @TableId  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long id;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”¨æˆ·å  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String userName;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ˜µç§°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String nickName;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å¯†ç   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String password;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String status;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * é‚®ç®±  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String email;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ‰‹æœºå·  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String phonenumber;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sex;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å¤´åƒ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String avatar;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String userType;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ›å»ºäººçš„ç”¨æˆ·id  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>    <span style="color:#fff;font-weight:bold">private</span> Long createBy;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ›å»ºæ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Date createTime;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ›´æ–°äºº  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long updateBy;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ›´æ–°æ—¶é—´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Date updateTime;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer delFlag;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="æ•°æ®åº“">æ•°æ®åº“<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®åº“">#</a></h1>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">database</span> <span style="color:#fff;font-weight:bold">if</span> <span style="color:#fff;font-weight:bold">not</span> <span style="color:#fff;font-weight:bold">exists</span> wjy_security;  
</span></span><span style="display:flex;"><span>use wjy_security;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">CREATE</span> <span style="color:#fff;font-weight:bold">TABLE</span> `sys_user`  
</span></span><span style="display:flex;"><span>(  
</span></span><span style="display:flex;"><span>    `id`          <span style="color:#fff;font-weight:bold">BIGINT</span>(<span style="color:#ff0;font-weight:bold">20</span>)  <span style="color:#fff;font-weight:bold">NOT</span> <span style="color:#fff;font-weight:bold">NULL</span> AUTO_INCREMENT <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸»é”®&#39;</span>,  
</span></span><span style="display:flex;"><span>    `user_name`   <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">64</span>) <span style="color:#fff;font-weight:bold">NOT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;NULL&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;ç”¨æˆ·å&#39;</span>,  
</span></span><span style="display:flex;"><span>    `nick_name`   <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">64</span>) <span style="color:#fff;font-weight:bold">NOT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;NULL&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;æ˜µç§°&#39;</span>,  
</span></span><span style="display:flex;"><span>    `password`    <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">64</span>) <span style="color:#fff;font-weight:bold">NOT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;NULL&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;å¯†ç &#39;</span>,  
</span></span><span style="display:flex;"><span>    `status`      <span style="color:#fff;font-weight:bold">CHAR</span>(<span style="color:#ff0;font-weight:bold">1</span>)              <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#39;</span>,  
</span></span><span style="display:flex;"><span>    `email`       <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">64</span>)          <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;é‚®ç®±&#39;</span>,  
</span></span><span style="display:flex;"><span>    `phonenumber` <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">32</span>)          <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;æ‰‹æœºå·&#39;</span>,  
</span></span><span style="display:flex;"><span>    `sex`         <span style="color:#fff;font-weight:bold">CHAR</span>(<span style="color:#ff0;font-weight:bold">1</span>)              <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰&#39;</span>,  
</span></span><span style="display:flex;"><span>    `avatar`      <span style="color:#fff;font-weight:bold">VARCHAR</span>(<span style="color:#ff0;font-weight:bold">128</span>)         <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;å¤´åƒ&#39;</span>,  
</span></span><span style="display:flex;"><span>    `user_type`   <span style="color:#fff;font-weight:bold">CHAR</span>(<span style="color:#ff0;font-weight:bold">1</span>)     <span style="color:#fff;font-weight:bold">NOT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;1&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰&#39;</span>,  
</span></span><span style="display:flex;"><span>    `create_by`   <span style="color:#fff;font-weight:bold">BIGINT</span>(<span style="color:#ff0;font-weight:bold">20</span>)           <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;åˆ›å»ºäººçš„ç”¨æˆ·id&#39;</span>,  
</span></span><span style="display:flex;"><span>    `create_time` DATETIME             <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;åˆ›å»ºæ—¶é—´&#39;</span>,  
</span></span><span style="display:flex;"><span>    `update_by`   <span style="color:#fff;font-weight:bold">BIGINT</span>(<span style="color:#ff0;font-weight:bold">20</span>)           <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;æ›´æ–°äºº&#39;</span>,  
</span></span><span style="display:flex;"><span>    `update_time` DATETIME             <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#fff;font-weight:bold">NULL</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;æ›´æ–°æ—¶é—´&#39;</span>,  
</span></span><span style="display:flex;"><span>    `del_flag`    <span style="color:#fff;font-weight:bold">INT</span>(<span style="color:#ff0;font-weight:bold">11</span>)              <span style="color:#fff;font-weight:bold">DEFAULT</span> <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span> <span style="color:#fff;font-weight:bold">COMMENT</span> <span style="color:#0ff;font-weight:bold">&#39;åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰&#39;</span>,  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">PRIMARY</span> <span style="color:#fff;font-weight:bold">KEY</span> (`id`)  
</span></span><span style="display:flex;"><span>) ENGINE = INNODB  
</span></span><span style="display:flex;"><span>  AUTO_INCREMENT = <span style="color:#ff0;font-weight:bold">2</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">DEFAULT</span> CHARSET = utf8mb4 <span style="color:#fff;font-weight:bold">COMMENT</span> =<span style="color:#0ff;font-weight:bold">&#39;ç”¨æˆ·è¡¨&#39;</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> sys_user  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">values</span> (<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#0ff;font-weight:bold">&#39;admin&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;ç®¡ç†å‘˜&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;{noop}123456&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>,  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>);  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> sys_user  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">values</span> (<span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#0ff;font-weight:bold">&#39;wjy&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;wjy&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;{noop}112233&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#0ff;font-weight:bold">&#39;1&#39;</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>,  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">DEFAULT</span>, <span style="color:#fff;font-weight:bold">DEFAULT</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>pomæ·»åŠ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.baomidou<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-plus-spring-boot3-starter<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>3.5.10.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- ä¸‹é¢ä¸¤ä¸ªé©±åŠ¨äºŒé€‰ä¸€ --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ï¼Œé€‚ç”¨äºspring boot 2--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ï¼Œé€‚ç”¨äºspring boot 3--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-j<span style="font-weight:bold">&lt;/artifactId&gt;</span>  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ src/main/resources ç›®å½•æ–°å»ºFileï¼Œæ–‡ä»¶åä¸ºapplication.ymlï¼Œå†™å…¥å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="font-weight:bold">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">datasource</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">url</span>: jdbc:mysql://localhost:3306/wjy_security?characterEncoding=utf-8&amp;serverTimezone=UTC
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">username</span>: root
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">password</span>: root
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">driver-class-name</span>: com.mysql.cj.jdbc.Driver
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–°å»ºmapper</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.mapper;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.wjy.springsecurity.domain.User;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> UserMapper <span style="color:#fff;font-weight:bold">extends</span> BaseMapper&lt;User&gt; {  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å¯åŠ¨ç±»æ·»åŠ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@MapperScan(<span style="color:#0ff;font-weight:bold">&#34;com.wjy.springsecurity.mapper&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@SpringBootTest  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> SpringSecurityApplicationTests {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @Test  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> contextLoads() {  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Autowired  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> UserMapper userMapper;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @Test  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testUserMapper(){  
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·  </span>
</span></span><span style="display:flex;"><span>       List&lt;User&gt; users = userMapper.<span style="color:#007f7f">selectList</span>(<span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>       System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(users);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="è‡ªå®šä¹‰securityçš„è®¤è¯å®ç°">è‡ªå®šä¹‰securityçš„è®¤è¯å®ç°<a hidden class="anchor" aria-hidden="true" href="#è‡ªå®šä¹‰securityçš„è®¤è¯å®ç°">#</a></h1>
<p>ä¸Šé¢æˆ‘ä»¬å·²ç»æŠŠå‡†å¤‡å·¥ä½œåšå¥½äº†ï¼ŒåŒ…æ‹¬æ­å»ºã€ä»£ç ã€æ•°æ®åº“ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå®ç°è®©securityåœ¨è®¤è¯çš„æ—¶å€™ï¼Œæ ¹æ®æˆ‘ä»¬æ•°æ®åº“çš„ç”¨æˆ·å’Œå¯†ç è¿›è¡Œè®¤è¯ï¼Œä¹Ÿå°±æ˜¯è¢«securityæ‹¦æˆªä¸šåŠ¡æ¥å£ï¼Œå‡ºç°ç™»å½•é¡µé¢ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¾“å…¥æ•°æ®åº“é‡Œçš„ç”¨æˆ·å’Œå¯†ç æ¥ç™»å½•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨securityé»˜è®¤çš„ç”¨æˆ·å’Œå¯†ç è¿›è¡Œç™»å½•</p>
<p>æ€è·¯: åªéœ€è¦æ–°å»ºä¸€ä¸ªå®ç°ç±»ï¼Œåœ¨è¿™ä¸ªå®ç°ç±»é‡Œé¢å®ç°Securityå®˜æ–¹çš„UserDetailsServiceæ¥å£ï¼Œç„¶åé‡å†™é‡Œé¢çš„loadUserByUsernameæ–¹æ³•</p>
<p>æ³¨æ„: é‡å†™å¥½loadUserByUsernameæ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ‹¿åˆ° &lsquo;æ•°æ®åº“ä¸ç”¨æˆ·è¾“å…¥çš„æ•°æ®&rsquo; è¿›è¡Œæ¯”å¯¹çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯userå¯¹è±¡è¿™ä¸ªç»“æœå°è£…æˆèƒ½è¢« &lsquo;Securityå®˜æ–¹çš„UserDetailsServiceæ¥å£&rsquo; æ¥æ”¶çš„ç±»å‹ï¼Œä¾‹å¦‚å¯ä»¥å°è£…æˆæˆ‘ä»¬ä¸‹é¢å†™çš„LoginUserç±»å‹ã€‚ç„¶åæ‰èƒ½ä¼ªè£…å¥½æ•°æ®ï¼Œç»™Securityå®˜æ–¹çš„è®¤è¯æœºåˆ¶å»å¯¹æ¯”userå¯¹è±¡ä¸æ•°æ®åº“çš„ç»“æœæ˜¯å¦åŒ¹é…ã€‚Securityå®˜æ–¹çš„è®¤è¯æœºåˆ¶ä¼šæ‹¿LoginUserç±»çš„æ–¹æ³•æ•°æ®(æ•°æ®åº“æ‹¿ï¼Œä¸å†ç”¨é»˜è®¤çš„)ï¼Œè·Ÿæˆ‘ä»¬å°è£…è¿‡å»çš„userå¯¹è±¡è¿›è¡ŒåŒ¹é…ï¼Œè¦ä½¿åŒ¹é…ä¸€è‡´ï¼Œå°±è¯æ˜è®¤è¯é€šè¿‡ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·åœ¨æµè§ˆå™¨é¡µé¢è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç èƒ½è¢«Securityè®¤è¯é€šè¿‡ï¼Œå°±ä¸å†æ‹¦æˆªè¯¥ç”¨æˆ·å»è®¿é—®æˆ‘ä»¬çš„ä¸šåŠ¡æ¥å£</p>
<p>ç¬¬ä¸€æ­¥: åœ¨domainç›®å½•æ–°å»ºLoginUserç±»ï¼Œä½œä¸ºUserDetailsæ¥å£(Securityå®˜æ–¹æä¾›çš„æ¥å£)çš„å®ç°ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.domain;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.AllArgsConstructor;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.Data;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.NoArgsConstructor;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.security.core.GrantedAuthority;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.security.core.userdetails.UserDetails;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Collection;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@Data  
</span></span><span style="display:flex;"><span>@NoArgsConstructor  
</span></span><span style="display:flex;"><span>@AllArgsConstructor  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å®ç°UserDetailsæ¥å£ä¹‹åï¼Œè¦é‡å†™UserDetailsæ¥å£é‡Œé¢çš„7ä¸ªæ–¹æ³•  </span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LoginUser <span style="color:#fff;font-weight:bold">implements</span> UserDetails {  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> User xxuser;  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ç”¨äºè¿”å›æƒé™ä¿¡æ¯ã€‚ç°åœ¨æˆ‘ä»¬æ­£åœ¨å­¦&#39;è®¤è¯&#39;ï¼Œ&#39;æƒé™&#39;åé¢æ‰å­¦ã€‚æ‰€ä»¥è¿”å›nullå³å¯  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Collection&lt;? <span style="color:#fff;font-weight:bold">extends</span> GrantedAuthority&gt; getAuthorities() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ç”¨äºè·å–ç”¨æˆ·å¯†ç ã€‚ç”±äºä½¿ç”¨çš„å®ä½“ç±»æ˜¯Userï¼Œæ‰€ä»¥è·å–çš„æ˜¯æ•°æ®åº“çš„ç”¨æˆ·å¯†ç   </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getPassword() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> xxuser.<span style="color:#007f7f">getPassword</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ç”¨äºè·å–ç”¨æˆ·åã€‚ç”±äºä½¿ç”¨çš„å®ä½“ç±»æ˜¯Userï¼Œæ‰€ä»¥è·å–çš„æ˜¯æ•°æ®åº“çš„ç”¨æˆ·å  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getUsername() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> xxuser.<span style="color:#007f7f">getUserName</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ¤æ–­ç™»å½•çŠ¶æ€æ˜¯å¦è¿‡æœŸã€‚æŠŠè¿™ä¸ªæ”¹æˆtrueï¼Œè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isAccountNonExpired() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ¤æ–­è´¦å·æ˜¯å¦è¢«é”å®šã€‚æŠŠè¿™ä¸ªæ”¹æˆtrueï¼Œè¡¨ç¤ºæœªé”å®šï¼Œä¸ç„¶ç™»å½•çš„æ—¶å€™ï¼Œä¸è®©ä½ ç™»å½•  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isAccountNonLocked() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ¤æ–­ç™»å½•å‡­è¯æ˜¯å¦è¿‡æœŸã€‚æŠŠè¿™ä¸ªæ”¹æˆtrueï¼Œè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isCredentialsNonExpired() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¯ç”¨ã€‚æŠŠè¿™ä¸ªæ”¹æˆtrueï¼Œè¡¨ç¤ºå¯ç”¨çŠ¶æ€  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isEnabled() {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ­¥: åœ¨ src/main/java/com.huanf ç›®å½•æ–°å»º service.impl.MyUserDetailServiceImpl ç±»ï¼Œå†™å…¥å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.wjy.springsecurity.domain;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.wjy.springsecurity.mapper.UserMapper;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.beans.factory.annotation.Autowired;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.security.core.userdetails.UserDetails;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.security.core.userdetails.UserDetailsService;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.stereotype.Service;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Objects;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>@Service  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MyUserDetailServiceImpl <span style="color:#fff;font-weight:bold">implements</span> UserDetailsService {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @Autowired  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> UserMapper userMapper;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//UserDetailsæ˜¯Securityå®˜æ–¹æä¾›çš„æ¥å£  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> UserDetails loadUserByUsername(String xxusername) <span style="color:#fff;font-weight:bold">throws</span> UsernameNotFoundException {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚æˆ‘ä»¬å†™çš„userMapperæ¥å£é‡Œé¢æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯mybatis-plusæä¾›çš„æ–¹æ³•  </span>
</span></span><span style="display:flex;"><span>        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span style="color:#fff;font-weight:bold">new</span> LambdaQueryWrapper&lt;&gt;();  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//eqæ–¹æ³•è¡¨ç¤ºç­‰å€¼åŒ¹é…ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®åº“çš„ç”¨æˆ·åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬ä¼ è¿›æ¥çš„ç”¨æˆ·åï¼Œè¿™ä¸¤ä¸ªå‚æ•°è¿›è¡Œæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰  </span>
</span></span><span style="display:flex;"><span>        queryWrapper.<span style="color:#007f7f">eq</span>(User::getUserName,xxusername);  
</span></span><span style="display:flex;"><span>        User user = userMapper.<span style="color:#007f7f">selectOne</span>(queryWrapper);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœç”¨æˆ·ä¼ è¿›æ¥çš„ç”¨æˆ·åï¼Œä½†æ˜¯æ•°æ®åº“æ²¡æœ‰è¿™ä¸ªç”¨æˆ·åï¼Œå°±ä¼šå¯¼è‡´æˆ‘ä»¬æ˜¯æŸ¥ä¸åˆ°çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±è¿›è¡Œä¸‹é¢çš„åˆ¤æ–­ã€‚é¿å…ç¨‹åºå®‰å…¨é—®é¢˜  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span>(Objects.<span style="color:#007f7f">isNull</span>(user)){<span style="color:#007f7f">//åˆ¤æ–­userå¯¹è±¡æ˜¯å¦ä¸ºç©ºã€‚å½“åœ¨æ•°æ®åº“æ²¡æœ‰æŸ¥åˆ°æ•°æ®æ—¶ï¼Œuserå°±ä¼šä¸ºç©ºï¼Œä¹Ÿå°±ä¼šè¿›å…¥è¿™ä¸ªåˆ¤æ–­  </span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(<span style="color:#0ff;font-weight:bold">&#34;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&#34;</span>);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æŠŠæŸ¥è¯¢åˆ°çš„userç»“æœï¼Œå°è£…æˆUserDetailsç±»å‹ï¼Œç„¶åè¿”å›ã€‚  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä½†æ˜¯ç”±äºUserDetailsæ˜¯ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéœ€è¦åœ¨dominoç›®å½•æ–°å»ºLoginUserç±»ï¼Œä½œä¸ºUserDetailsçš„å®ç°ç±»ï¼Œå†å†™ä¸‹é¢é‚£è¡Œ  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> LoginUser(user);  
</span></span><span style="display:flex;"><span>    }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰æ­¥: æµ‹è¯•ã€‚å¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨è¾“å…¥å¦‚ä¸‹ï¼Œç„¶åæˆ‘ä»¬è¾“å…¥ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œçœ‹æ˜¯ä¸æ˜¯æ ¹æ®æ•°æ®åº“æ¥è¿›è¡Œè®¤è¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>http://localhost:8080/hello
</span></span></code></pre></td></tr></table>
</div>
</div><p>åº“é‡Œæœ‰ä¸ªç”¨æˆ·æ˜¯wjyï¼Œå¯†ç 112233ã€‚
ç‚¹å‡»ç™»å½•æŒ‰é’®åï¼ŒæˆåŠŸæ”¾è¡Œï¼ŒSecurityå…è®¸äº†æˆ‘ä»¬è®¿é—®ä¸šåŠ¡æ¥å£ã€‚
è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿè‡ªå®šä¹‰Securityçš„è®¤è¯æœºåˆ¶ï¼Œä¸å†ä½¿ç”¨Securityé»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç äº†ï¼Œæˆ‘ä»¬å®ç°äº†Securityæ ¹æ®æ•°æ®åº“çš„ç”¨æˆ·è¡¨æ¥è®¤è¯ã€‚</p>
<h1 id="å¯†ç æ ¡éªŒé—®é¢˜">å¯†ç æ ¡éªŒé—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#å¯†ç æ ¡éªŒé—®é¢˜">#</a></h1>
<p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†è‡ªå®šä¹‰Securityçš„è®¤è¯æœºåˆ¶ï¼Œè®©Securityæ ¹æ®æ•°æ®åº“çš„æ•°æ®ï¼Œæ¥è®¤è¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚ä½†æ˜¯å½“æ—¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨æ•°æ®åº“å­˜å…¥ç”¨æˆ·è¡¨çš„æ—¶å€™ï¼Œæ’å…¥çš„wjyç”¨æˆ·çš„å¯†ç æ˜¯ {noop}112233ï¼Œä¸ºä»€ä¹ˆç”¨112233ä¸è¡Œå‘¢ã€‚</p>
<p>åŸå› : SpringSecurityé»˜è®¤ä½¿ç”¨çš„PasswordEncoderè¦æ±‚æ•°æ®åº“ä¸­çš„å¯†ç æ ¼å¼ä¸ºï¼š{åŠ å¯†æ–¹å¼}å¯†ç ã€‚å¯¹åº”çš„å°±æ˜¯{noop}112233ï¼Œå®é™…è¡¨ç¤ºçš„æ˜¯112233ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨æ•°æ®åº“ç›´æ¥æš´éœ²112233ä¸ºå¯†ç ï¼Œä¼šé€ æˆå®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠåŠ å¯†åçš„1234çš„å¯†æ–‡å½“ä½œå¯†ç ï¼Œæ­¤æ—¶ç”¨æˆ·åœ¨æµè§ˆå™¨ç™»å½•æ—¶è¾“å…¥1234ï¼Œæˆ‘ä»¬å¦‚ä½•ç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿç™»å½•è¿›å»å‘¢ï¼Œç­”æ¡ˆæ˜¯SpringSecurityé»˜è®¤çš„å¯†ç æ ¡éªŒï¼Œæ›¿æ¢ä¸ºSpringSecurityä¸ºæˆ‘ä»¬æä¾›çš„BCryptPasswordEncoder</p>
<p>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æŠŠBCryptPasswordEncoderå¯¹è±¡æ³¨å…¥Springå®¹å™¨ä¸­ï¼ŒSpringSecurityå°±ä¼šä½¿ç”¨è¯¥PasswordEncoderæ¥è¿›è¡Œå¯†ç æ ¡éªŒã€‚</p>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> xxTestBCryptPasswordEncoder(){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¦‚æœä¸æƒ³åœ¨ä¸‹é¢é‚£è¡Œnewçš„è¯ï¼Œé‚£ä¹ˆå°±åœ¨è¯¥ç±»æ³¨å…¥PasswordEncoderï¼Œä¾‹å¦‚å¦‚ä¸‹</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @Autowired
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * private PasswordEncoder passwordEncoder;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    BCryptPasswordEncoder passwordEncoder = <span style="color:#fff;font-weight:bold">new</span> BCryptPasswordEncoder();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥çš„å¯†ç </span>
</span></span><span style="display:flex;"><span>	String encode1 = passwordEncoder.<span style="color:#007f7f">encode</span>(<span style="color:#0ff;font-weight:bold">&#34;1234&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å†æ¨¡æ‹Ÿä¸€æ¬¡ç”¨æˆ·è¾“å…¥çš„å¯†ç </span>
</span></span><span style="display:flex;"><span>	String encode2 = passwordEncoder.<span style="color:#007f7f">encode</span>(<span style="color:#0ff;font-weight:bold">&#34;1234&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è™½ç„¶è¿™ä¸¤æ¬¡çš„å¯†ç éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åŠ å¯†åæ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯æ¬¡è¿è¡Œï¼Œå¯¹åŒä¸€åŸæ–‡éƒ½ä¼šæœ‰ä¸åŒçš„åŠ å¯†ç»“æœ</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//åŸå› :ä¼šæ·»åŠ éšæœºçš„ç›ï¼ŒåŠ å¯†ç»“æœ=ç›+åŸæ–‡+åŠ å¯†ã€‚è¾¾åˆ°æ¯æ¬¡åŠ å¯†åçš„å¯†æ–‡éƒ½ä¸ç›¸åŒçš„æ•ˆæœ</span>
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(encode1);
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(encode2);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ç™»å½•æ¥å£çš„åˆ†æ">ç™»å½•æ¥å£çš„åˆ†æ<a hidden class="anchor" aria-hidden="true" href="#ç™»å½•æ¥å£çš„åˆ†æ">#</a></h1>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/spring/">Spring</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
