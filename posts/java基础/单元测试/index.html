<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>å•å…ƒæµ‹è¯• | Wjy&#39;s Blog</title>
<meta name="keywords" content="javaåŸºç¡€">
<meta name="description" content="æ¦‚è¿°
å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚">
<meta name="author" content="Me, You">
<link rel="canonical" href="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="å•å…ƒæµ‹è¯•" />
<meta property="og:description" content="æ¦‚è¿°
å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-10T15:21:25+00:00" />
<meta property="article:modified_time" content="2022-08-10T15:21:25+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å•å…ƒæµ‹è¯•"/>
<meta name="twitter:description" content="æ¦‚è¿°
å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "å•å…ƒæµ‹è¯•",
      "item": "http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "å•å…ƒæµ‹è¯•",
  "name": "å•å…ƒæµ‹è¯•",
  "description": "æ¦‚è¿° å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚\n",
  "keywords": [
    "javaåŸºç¡€"
  ],
  "articleBody": "æ¦‚è¿° å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚\næ‰€è°“æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œæ˜¯æŒ‡å…ˆç¼–å†™æ¥å£ï¼Œç´§æ¥ç€ç¼–å†™æµ‹è¯•ã€‚ç¼–å†™å®Œæµ‹è¯•åï¼Œæˆ‘ä»¬æ‰å¼€å§‹çœŸæ­£ç¼–å†™å®ç°ä»£ç ã€‚åœ¨ç¼–å†™å®ç°ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¸€è¾¹å†™ï¼Œä¸€è¾¹æµ‹ï¼Œä»€ä¹ˆæ—¶å€™æµ‹è¯•å…¨éƒ¨é€šè¿‡äº†ï¼Œé‚£å°±è¡¨ç¤ºç¼–å†™çš„å®ç°å®Œæˆäº†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 ç¼–å†™æ¥å£ â”‚ â–¼ ç¼–å†™æµ‹è¯• â”‚ â–¼ â”Œâ”€\u003e ç¼–å†™å®ç° â”‚ â”‚ â”‚ N â–¼ â””â”€â”€ è¿è¡Œæµ‹è¯• â”‚ Y â–¼ ä»»åŠ¡å®Œæˆ è¿™å°±æ˜¯é©±åŠ¨æµ‹è¯•å¼€å‘ï¼ˆTDDï¼‰ã€‚ å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ç§ç†æƒ³æƒ…å†µã€‚å¤§éƒ¨åˆ†æƒ…å†µæ˜¯æˆ‘ä»¬å·²ç»ç¼–å†™äº†å®ç°ä»£ç ï¼Œéœ€è¦å¯¹å·²æœ‰çš„ä»£ç è¿›è¡Œæµ‹è¯•ã€‚ æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥çœ‹å¦‚ä½•ç¼–å†™æµ‹è¯•ã€‚å‡å®šæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„ç±»ï¼Œå®ƒåªæœ‰ä¸€ä¸ªé™æ€æ–¹æ³•æ¥è®¡ç®—é˜¶ä¹˜ï¼š n!=1Ã—2Ã—3Ã—...Ã—n ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 public class Factorial { public static long fact(long n) { long r = 1; for (long i = 1; i \u003c= n; i++) { r = r * i; } return r; } } è¦æµ‹è¯•è¿™ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ç¼–å†™ä¸€ä¸ªmain()æ–¹æ³•ï¼Œç„¶åè¿è¡Œä¸€äº›æµ‹è¯•ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 public class Test { public static void main(String[] args) { if (fact(10) == 3628800) { System.out.println(\"pass\"); } else { System.out.println(\"fail\"); } } } è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿è¡Œmain()æ–¹æ³•æ¥è¿è¡Œæµ‹è¯•ä»£ç ã€‚\nä¸è¿‡ï¼Œä½¿ç”¨main()æ–¹æ³•æµ‹è¯•æœ‰å¾ˆå¤šç¼ºç‚¹ï¼š\nä¸€æ˜¯åªèƒ½æœ‰ä¸€ä¸ªmain()æ–¹æ³•ï¼Œä¸èƒ½æŠŠæµ‹è¯•ä»£ç åˆ†ç¦»ï¼ŒäºŒæ˜¯æ²¡æœ‰æ‰“å°å‡ºæµ‹è¯•ç»“æœå’ŒæœŸæœ›ç»“æœï¼Œä¾‹å¦‚ï¼Œexpected: 3628800, but actual: 123456ï¼Œä¸‰æ˜¯å¾ˆéš¾ç¼–å†™ä¸€ç»„é€šç”¨çš„æµ‹è¯•ä»£ç ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æµ‹è¯•æ¡†æ¶ï¼Œå¸®åŠ©æˆ‘ä»¬ç¼–å†™æµ‹è¯•ã€‚\nJUnit JUnitæ˜¯ä¸€ä¸ªå¼€æºçš„Javaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸“é—¨é’ˆå¯¹Javaè®¾è®¡ï¼Œä½¿ç”¨æœ€å¹¿æ³›ã€‚JUnitæ˜¯äº‹å®ä¸Šçš„å•å…ƒæµ‹è¯•çš„æ ‡å‡†æ¡†æ¶ï¼Œä»»ä½•Javaå¼€å‘è€…éƒ½åº”å½“å­¦ä¹ å¹¶ä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•ã€‚\nä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•çš„å¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸ç®€å•åœ°ç»„ç»‡æµ‹è¯•ä»£ç ï¼Œå¹¶éšæ—¶è¿è¡Œå®ƒä»¬ï¼ŒJUnitå°±ä¼šç»™å‡ºæˆåŠŸçš„æµ‹è¯•å’Œå¤±è´¥çš„æµ‹è¯•ï¼Œè¿˜å¯ä»¥ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œä¸ä»…åŒ…å«æµ‹è¯•çš„æˆåŠŸç‡ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ï¼Œå³è¢«æµ‹è¯•çš„ä»£ç æœ¬èº«æœ‰å¤šå°‘ç»è¿‡äº†æµ‹è¯•ã€‚å¯¹äºé«˜è´¨é‡çš„ä»£ç æ¥è¯´ï¼Œæµ‹è¯•è¦†ç›–ç‡åº”è¯¥åœ¨80%ä»¥ä¸Šã€‚\næ­¤å¤–ï¼Œå‡ ä¹æ‰€æœ‰çš„IDEå·¥å…·éƒ½é›†æˆäº†JUnitï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨IDEä¸­ç¼–å†™å¹¶è¿è¡ŒJUnitæµ‹è¯•ã€‚JUnitç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯5ã€‚\nä»¥Eclipseä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬å·²ç»ç¼–å†™äº†ä¸€ä¸ªFactorial.javaæ–‡ä»¶åï¼Œæˆ‘ä»¬æƒ³å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„FactorialTest.javaæ–‡ä»¶ï¼Œä»¥Testä¸ºåç¼€æ˜¯ä¸€ä¸ªæƒ¯ä¾‹ï¼Œå¹¶åˆ†åˆ«å°†å…¶æ”¾å…¥srcå’Œtestç›®å½•ä¸­ã€‚æœ€åï¼Œåœ¨Project - Properties - Java Build Path - Librariesä¸­æ·»åŠ JUnit 5çš„åº“ã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹FactorialTest.javaçš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 class FactorialTest { @Test void testFact() { assertEquals(1, Factorial.fact(1)); assertEquals(2, Factorial.fact(2)); assertEquals(6, Factorial.fact(3)); assertEquals(3628800, Factorial.fact(10)); assertEquals(2432902008176640000L, Factorial.fact(20)); } } æ ¸å¿ƒæµ‹è¯•æ–¹æ³•testFact()åŠ ä¸Šäº†@Testæ³¨è§£ï¼Œè¿™æ˜¯JUnitè¦æ±‚çš„ï¼Œå®ƒä¼šæŠŠå¸¦æœ‰@Testçš„æ–¹æ³•è¯†åˆ«ä¸ºæµ‹è¯•æ–¹æ³•ã€‚åœ¨æµ‹è¯•æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬ç”¨assertEquals(1, Factorial.fact(1))è¡¨ç¤ºï¼ŒæœŸæœ›Factorial.fact(1)è¿”å›1ã€‚assertEquals(expected, actual)æ˜¯æœ€å¸¸ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒåœ¨Assertionç±»ä¸­å®šä¹‰ã€‚Assertionè¿˜å®šä¹‰äº†å…¶ä»–æ–­è¨€æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\nassertTrue(): æœŸå¾…ç»“æœä¸ºtrue assertFalse(): æœŸå¾…ç»“æœä¸ºfalse assertNotNull(): æœŸå¾…ç»“æœä¸ºénull assertArrayEquals(): æœŸå¾…ç»“æœä¸ºæ•°ç»„å¹¶ä¸æœŸæœ›æ•°ç»„æ¯ä¸ªå…ƒç´ çš„å€¼å‡ç›¸ç­‰ â€¦ è¿è¡Œå•å…ƒæµ‹è¯•éå¸¸ç®€å•ã€‚é€‰ä¸­FactorialTest.javaæ–‡ä»¶ï¼Œç‚¹å‡»Run - Run As - JUnit Testï¼ŒEclipseä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸ªJUnitæµ‹è¯•ï¼Œå¹¶æ˜¾ç¤ºç»“æœã€‚\nå¦‚æœæµ‹è¯•ç»“æœä¸é¢„æœŸä¸ç¬¦ï¼ŒassertEquals()ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªæµ‹è¯•å¤±è´¥çš„ç»“æœã€‚\nåœ¨Failure Traceä¸­ï¼ŒJUnitä¼šå‘Šè¯‰æˆ‘ä»¬è¯¦ç»†çš„é”™è¯¯ç»“æœï¼š\n1 2 3 4 5 6 7 8 9 org.opentest4j.AssertionFailedError: expected: \u003c3628800\u003e but was: \u003c362880\u003e at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55) at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:195) at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:168) at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:163) at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:611) at com.itranswarp.learnjava.FactorialTest.testFact(FactorialTest.java:14) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at ... ç¬¬ä¸€è¡Œçš„å¤±è´¥ä¿¡æ¯çš„æ„æ€æ˜¯æœŸå¾…ç»“æœ3628800ä½†æ˜¯å®é™…è¿”å›æ˜¯362880ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬è¦ä¹ˆä¿®æ­£å®ç°ä»£ç ï¼Œè¦ä¹ˆä¿®æ­£æµ‹è¯•ä»£ç ï¼Œç›´åˆ°æµ‹è¯•é€šè¿‡ä¸ºæ­¢ã€‚\nä½¿ç”¨æµ®ç‚¹æ•°æ—¶ï¼Œç”±äºæµ®ç‚¹æ•°æ— æ³•ç²¾ç¡®åœ°è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨assertEquals(double expected, double actual, double delta)è¿™ä¸ªé‡è½½æ–¹æ³•ï¼ŒæŒ‡å®šä¸€ä¸ªè¯¯å·®å€¼ï¼š\n1 assertEquals(0.1, Math.abs(1 - 9 / 10.0), 0.0000001); å•å…ƒæµ‹è¯•çš„å¥½å¤„ å•å…ƒæµ‹è¯•å¯ä»¥ç¡®ä¿å•ä¸ªæ–¹æ³•æŒ‰ç…§æ­£ç¡®é¢„æœŸè¿è¡Œï¼Œå¦‚æœä¿®æ”¹äº†æŸä¸ªæ–¹æ³•çš„ä»£ç ï¼Œåªéœ€ç¡®ä¿å…¶å¯¹åº”çš„å•å…ƒæµ‹è¯•é€šè¿‡ï¼Œå³å¯è®¤ä¸ºæ”¹åŠ¨æ­£ç¡®ã€‚æ­¤å¤–ï¼Œæµ‹è¯•ä»£ç æœ¬èº«å°±å¯ä»¥ä½œä¸ºç¤ºä¾‹ä»£ç ï¼Œç”¨æ¥æ¼”ç¤ºå¦‚ä½•è°ƒç”¨è¯¥æ–¹æ³•ã€‚\nä½¿ç”¨JUnitè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è¨€ï¼ˆAssertionï¼‰æ¥æµ‹è¯•æœŸæœ›ç»“æœï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç»„ç»‡å’Œè¿è¡Œæµ‹è¯•ï¼Œå¹¶æ–¹ä¾¿åœ°æŸ¥çœ‹æµ‹è¯•ç»“æœã€‚æ­¤å¤–ï¼ŒJUnitæ—¢å¯ä»¥ç›´æ¥åœ¨IDEä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°é›†æˆåˆ°Mavenè¿™äº›è‡ªåŠ¨åŒ–å·¥å…·ä¸­è¿è¡Œã€‚\nåœ¨ç¼–å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦éµå¾ªä¸€å®šçš„è§„èŒƒï¼š\nä¸€æ˜¯å•å…ƒæµ‹è¯•ä»£ç æœ¬èº«å¿…é¡»éå¸¸ç®€å•ï¼Œèƒ½ä¸€ä¸‹çœ‹æ˜ç™½ï¼Œå†³ä¸èƒ½å†ä¸ºæµ‹è¯•ä»£ç ç¼–å†™æµ‹è¯•ï¼›\näºŒæ˜¯æ¯ä¸ªå•å…ƒæµ‹è¯•åº”å½“äº’ç›¸ç‹¬ç«‹ï¼Œä¸ä¾èµ–è¿è¡Œçš„é¡ºåºï¼›\nä¸‰æ˜¯æµ‹è¯•æ—¶ä¸ä½†è¦è¦†ç›–å¸¸ç”¨æµ‹è¯•ç”¨ä¾‹ï¼Œè¿˜è¦ç‰¹åˆ«æ³¨æ„æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼Œä¾‹å¦‚è¾“å…¥ä¸º0ï¼Œnullï¼Œç©ºå­—ç¬¦ä¸²\"\"ç­‰æƒ…å†µã€‚\nä½¿ç”¨Fixture åœ¨ä¸€ä¸ªå•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç¼–å†™å¤šä¸ª@Testæ–¹æ³•ï¼Œæ¥åˆ†ç»„ã€åˆ†ç±»å¯¹ç›®æ ‡ä»£ç è¿›è¡Œæµ‹è¯•ã€‚\nåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€ä¸ªå¯¹è±¡éœ€è¦åˆå§‹åŒ–ï¼Œæµ‹è¯•å®Œå¯èƒ½è¿˜éœ€è¦æ¸…ç†çš„æƒ…å†µã€‚å¦‚æœæ¯ä¸ª@Testæ–¹æ³•éƒ½å†™ä¸€éè¿™æ ·çš„é‡å¤ä»£ç ï¼Œæ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ã€‚\nJUnitæä¾›äº†ç¼–å†™æµ‹è¯•å‰å‡†å¤‡ã€æµ‹è¯•åæ¸…ç†çš„å›ºå®šä»£ç ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºFixtureã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„Calculatorçš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Calculator { private long n = 0; public long add(long x) { n = n + x; return n; } public long sub(long x) { n = n - x; return n; } } è¿™ä¸ªç±»çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å…ˆåˆå§‹åŒ–å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­éƒ½å†™ä¸Šåˆå§‹åŒ–ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡@BeforeEachæ¥åˆå§‹åŒ–ï¼Œé€šè¿‡@AfterEachæ¥æ¸…ç†èµ„æºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 public class CalculatorTest { Calculator calculator; @BeforeEach public void setUp() { this.calculator = new Calculator(); } @AfterEach public void tearDown() { this.calculator = null; } @Test void testAdd() { assertEquals(100, this.calculator.add(100)); assertEquals(150, this.calculator.add(50)); assertEquals(130, this.calculator.add(-20)); } @Test void testSub() { assertEquals(-100, this.calculator.sub(100)); assertEquals(-150, this.calculator.sub(50)); assertEquals(-130, this.calculator.sub(-20)); } } åœ¨CalculatorTestæµ‹è¯•ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ ‡è®°ä¸º@BeforeEachå’Œ@AfterEachçš„æ–¹æ³•ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ¯ä¸ª@Testæ–¹æ³•å‰åè‡ªåŠ¨è¿è¡Œã€‚ ä¸Šé¢çš„æµ‹è¯•ä»£ç åœ¨JUnitä¸­è¿è¡Œé¡ºåºå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 for (Method testMethod : findTestMethods(CalculatorTest.class)) { var test = new CalculatorTest(); // åˆ›å»ºTestå®ä¾‹ invokeBeforeEach(test); invokeTestMethod(test, testMethod); invokeAfterEach(test); } å¯è§ï¼Œ@BeforeEachå’Œ@AfterEachä¼šâ€œç¯ç»•â€åœ¨æ¯ä¸ª@Testæ–¹æ³•å‰åã€‚\nè¿˜æœ‰ä¸€äº›èµ„æºåˆå§‹åŒ–å’Œæ¸…ç†å¯èƒ½æ›´åŠ ç¹çï¼Œè€Œä¸”ä¼šè€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œä¾‹å¦‚åˆå§‹åŒ–æ•°æ®åº“ã€‚JUnitè¿˜æä¾›äº†@BeforeAllå’Œ@AfterAllï¼Œå®ƒä»¬åœ¨è¿è¡Œæ‰€æœ‰@Testå‰åè¿è¡Œï¼Œé¡ºåºå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 invokeBeforeAll(CalculatorTest.class); for (Method testMethod : findTestMethods(CalculatorTest.class)) { var test = new CalculatorTest(); // åˆ›å»ºTestå®ä¾‹ invokeBeforeEach(test); invokeTestMethod(test, testMethod); invokeAfterEach(test); } invokeAfterAll(CalculatorTest.class); å› ä¸º@BeforeAllå’Œ@AfterAllåœ¨æ‰€æœ‰@Testæ–¹æ³•è¿è¡Œå‰åä»…è¿è¡Œä¸€æ¬¡ï¼Œå› æ­¤ï¼Œå®ƒä»¬åªèƒ½åˆå§‹åŒ–é™æ€å˜é‡ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class DatabaseTest { static Database db; @BeforeAll public static void initDatabase() { db = createDb(...); } @AfterAll public static void dropDatabase() { ... } } äº‹å®ä¸Šï¼Œ@BeforeAllå’Œ@AfterAllä¹Ÿåªèƒ½æ ‡æ³¨åœ¨é™æ€æ–¹æ³•ä¸Šã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºç¼–å†™Fixtureçš„å¥—è·¯å¦‚ä¸‹ï¼š\nå¯¹äºå®ä¾‹å˜é‡ï¼Œåœ¨@BeforeEachä¸­åˆå§‹åŒ–ï¼Œåœ¨@AfterEachä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª@Testæ–¹æ³•ä¸­äº’ä¸å½±å“ï¼Œå› ä¸ºæ˜¯ä¸åŒçš„å®ä¾‹ï¼› å¯¹äºé™æ€å˜é‡ï¼Œåœ¨@BeforeAllä¸­åˆå§‹åŒ–ï¼Œåœ¨@AfterAllä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª@Testæ–¹æ³•ä¸­å‡æ˜¯å”¯ä¸€å®ä¾‹ï¼Œä¼šå½±å“å„ä¸ª@Testæ–¹æ³•ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨@BeforeEachå’Œ@AfterEachå°±è¶³å¤Ÿäº†ã€‚åªæœ‰æŸäº›æµ‹è¯•èµ„æºåˆå§‹åŒ–è€—è´¹æ—¶é—´å¤ªé•¿ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸å°½é‡â€œå¤ç”¨â€æ—¶æ‰ä¼šç”¨åˆ°@BeforeAllå’Œ@AfterAllã€‚\næœ€åï¼Œæ³¨æ„åˆ°æ¯æ¬¡è¿è¡Œä¸€ä¸ª@Testæ–¹æ³•å‰ï¼ŒJUnité¦–å…ˆåˆ›å»ºä¸€ä¸ªXxxTestå®ä¾‹ï¼Œå› æ­¤ï¼Œæ¯ä¸ª@Testæ–¹æ³•å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ä¹Ÿæ— æ³•æŠŠæˆå‘˜å˜é‡çš„çŠ¶æ€ä»ä¸€ä¸ª@Testæ–¹æ³•å¸¦åˆ°å¦ä¸€ä¸ª@Testæ–¹æ³•ã€‚\nå°ç»“ ç¼–å†™Fixtureæ˜¯æŒ‡é’ˆå¯¹æ¯ä¸ª@Testæ–¹æ³•ï¼Œç¼–å†™@BeforeEachæ–¹æ³•ç”¨äºåˆå§‹åŒ–æµ‹è¯•èµ„æºï¼Œç¼–å†™@AfterEachç”¨äºæ¸…ç†æµ‹è¯•èµ„æºï¼›\nå¿…è¦æ—¶ï¼Œå¯ä»¥ç¼–å†™@BeforeAllå’Œ@AfterAllï¼Œä½¿ç”¨é™æ€å˜é‡æ¥åˆå§‹åŒ–è€—æ—¶çš„èµ„æºï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰@Testæ–¹æ³•çš„è¿è¡Œå‰åä»…æ‰§è¡Œä¸€æ¬¡ã€‚\nå¼‚å¸¸æµ‹è¯•ï¼šassertThrows åœ¨Javaç¨‹åºä¸­ï¼Œå¼‚å¸¸å¤„ç†æ˜¯éå¸¸é‡è¦çš„ã€‚\næˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ–¹æ³•ï¼Œä¹Ÿç»å¸¸æŠ›å‡ºå„ç§å¼‚å¸¸ã€‚å¯¹äºå¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæµ‹è¯•ï¼Œæœ¬èº«å°±æ˜¯æµ‹è¯•çš„é‡è¦ç¯èŠ‚ã€‚\nå› æ­¤ï¼Œåœ¨ç¼–å†™JUnitæµ‹è¯•çš„æ—¶å€™ï¼Œé™¤äº†æ­£å¸¸çš„è¾“å…¥è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜è¦ç‰¹åˆ«é’ˆå¯¹å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚\næˆ‘ä»¬ä»ç„¶ç”¨Factorialä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Factorial { public static long fact(long n) { //å¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ç›´æ¥æŠ›å‡ºIllegalArgumentException if (n \u003c 0) { throw new IllegalArgumentException(); } long r = 1; for (long i = 1; i \u003c= n; i++) { r = r * i; } return r; } } åœ¨æ–¹æ³•å…¥å£ï¼Œæˆ‘ä»¬å¢åŠ äº†å¯¹å‚æ•°nçš„æ£€æŸ¥ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ç›´æ¥æŠ›å‡ºIllegalArgumentExceptionã€‚\nç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹å¼‚å¸¸è¿›è¡Œæµ‹è¯•ã€‚åœ¨JUnitæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª@Testæ–¹æ³•ä¸“é—¨æµ‹è¯•å¼‚å¸¸ï¼š\n1 2 3 4 5 6 7 8 9 @Test void testNegative() { assertThrows(IllegalArgumentException.class, new Executable() { @Override public void execute() throws Throwable { Factorial.fact(-1); } }); } JUnitæä¾›assertThrows()æ¥æœŸæœ›æ•è·ä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸ã€‚ç¬¬äºŒä¸ªå‚æ•°Executableå°è£…äº†æˆ‘ä»¬è¦æ‰§è¡Œçš„ä¼šäº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚å½“æˆ‘ä»¬æ‰§è¡ŒFactorial.fact(-1)æ—¶ï¼Œå¿…å®šæŠ›å‡ºIllegalArgumentExceptionã€‚assertThrows()åœ¨æ•è·åˆ°æŒ‡å®šå¼‚å¸¸æ—¶è¡¨ç¤ºé€šè¿‡æµ‹è¯•ï¼Œæœªæ•è·åˆ°å¼‚å¸¸ï¼Œæˆ–è€…æ•è·åˆ°çš„å¼‚å¸¸ç±»å‹ä¸å¯¹ï¼Œå‡è¡¨ç¤ºæµ‹è¯•å¤±è´¥ã€‚\næœ‰äº›ç«¥é‹ä¼šè§‰å¾—ç¼–å†™ä¸€ä¸ªExecutableçš„åŒ¿åç±»å¤ªç¹çäº†ã€‚å®é™…ä¸Šï¼ŒJava 8å¼€å§‹å¼•å…¥äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ‰€æœ‰å•æ–¹æ³•æ¥å£éƒ½å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 @Test void testNegative() { assertThrows(IllegalArgumentException.class, () -\u003e { Factorial.fact(-1); }); } ä¸Šè¿°å¥‡æ€ªçš„-\u003eè¯­æ³•å°±æ˜¯å‡½æ•°å¼æ¥å£çš„å®ç°ä»£ç ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è¯¦ç»†ä»‹ç»ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡è¿™ç§å›ºå®šçš„ä»£ç ç¼–å†™èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥å³å¯ã€‚\nè¶…æ—¶æµ‹è¯•ï¼šassertTimeout ä½¿ç”¨æ³¨è§£@Timeout(value = 500, unit = TimeUnit.MILLISECONDS)\n1 2 3 4 5 6 7 8 9 @Test @Timeout(value = 500, unit = TimeUnit.MILLISECONDS) void testTimeOut2() { try { Thread.sleep(200); } catch (InterruptedException e) { e.printStackTrace(); } } ä½¿ç”¨ assertTimeout\n1 2 3 4 5 6 @Test void testTimeOut() { assertTimeout(Duration.ofSeconds(2), () -\u003e { Thread.sleep(1000); }); } é‡å¤æ€§æµ‹è¯•ï¼šRepeatedTest @RepeatedTestå’Œ@Testä¸è¦å…±å­˜ åŸºæœ¬ç”¨æ³•\n1 2 3 4 5 @Test @RepeatedTest(value = 3) void RepeatedTest() { System.out.println(\"æ‰§è¡Œæµ‹è¯•\"); } æˆ‘ä»¬è¿˜å¯ä»¥å¯¹é‡å¤è¿è¡Œçš„æµ‹è¯•æ–¹æ³•åç§°è¿›è¡Œä¿®æ”¹ï¼Œåˆ©ç”¨ @RepeatedTest æä¾›çš„å†…ç½®å˜é‡ï¼Œä»¥å ä½ç¬¦æ–¹å¼åœ¨å…¶ name å±æ€§ä¸Šä½¿ç”¨\n1 2 3 4 5 @DisplayName(\"è‡ªå®šä¹‰åç§°é‡å¤æµ‹è¯•\") @RepeatedTest(value = 3, name = \"{displayName} ç¬¬ {currentRepetition} æ¬¡\") void RepeatedTest() { System.out.println(\"æ‰§è¡Œæµ‹è¯•\"); } currentRepetitionï¼šè¡¨ç¤ºå·²ç»é‡å¤çš„æ¬¡æ•° totalRepetitionsï¼šè¡¨ç¤ºæ€»å…±è¦é‡å¤çš„æ¬¡æ•°\næ¡ä»¶æµ‹è¯• åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ’å‡ºæŸäº›@Testæ–¹æ³•ï¼Œä¸è¦è®©å®ƒè¿è¡Œï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å®ƒæ ‡è®°ä¸€ä¸ª@Disabledï¼š\n1 2 3 4 5 @Disabled @Test void testBug101() { // è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ } ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ³¨é‡Šæ‰@Testï¼Œè€Œæ˜¯è¦åŠ ä¸€ä¸ª@Disabledï¼Ÿè¿™æ˜¯å› ä¸ºæ³¨é‡Šæ‰@Testï¼ŒJUnitå°±ä¸çŸ¥é“è¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œè€ŒåŠ ä¸Š@Disabledï¼ŒJUnitä»ç„¶è¯†åˆ«å‡ºè¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œåªæ˜¯æš‚æ—¶ä¸è¿è¡Œã€‚å®ƒä¼šåœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤ºï¼š\n1 Tests run: 68, Failures: 2, Errors: 0, Skipped: 5 ç±»ä¼¼@Disabledè¿™ç§æ³¨è§£å°±ç§°ä¸ºæ¡ä»¶æµ‹è¯•ï¼ŒJUnitæ ¹æ®ä¸åŒçš„æ¡ä»¶æ³¨è§£ï¼Œå†³å®šæ˜¯å¦è¿è¡Œå½“å‰çš„@Testæ–¹æ³•ã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 public class Config { public String getConfigFile(String filename) { String os = System.getProperty(\"os.name\").toLowerCase(); if (os.contains(\"win\")) { return \"C:\\\\\" + filename; } if (os.contains(\"mac\") || os.contains(\"linux\") || os.contains(\"unix\")) { return \"/usr/local/\" + filename; } throw new UnsupportedOperationException(); } } æˆ‘ä»¬æƒ³è¦æµ‹è¯•getConfigFile()è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯åœ¨Windowsä¸Šè·‘ï¼Œå’Œåœ¨Linuxä¸Šè·‘çš„ä»£ç è·¯å¾„ä¸åŒï¼Œå› æ­¤ï¼Œé’ˆå¯¹ä¸¤ä¸ªç³»ç»Ÿçš„æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªåªèƒ½åœ¨Windowsä¸Šè·‘ï¼Œå¦ä¸€ä¸ªåªèƒ½åœ¨Mac/Linuxä¸Šè·‘ï¼š\n1 2 3 4 5 6 7 8 9 @Test void testWindows() { assertEquals(\"C:\\\\test.ini\", config.getConfigFile(\"test.ini\")); } @Test void testLinuxAndMac() { assertEquals(\"/usr/local/test.cfg\", config.getConfigFile(\"test.cfg\")); } å› æ­¤ï¼Œæˆ‘ä»¬ç»™ä¸Šè¿°ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•åˆ†åˆ«åŠ ä¸Šæ¡ä»¶å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 @Test @EnabledOnOs(OS.WINDOWS) void testWindows() { assertEquals(\"C:\\\\test.ini\", config.getConfigFile(\"test.ini\")); } @Test @EnabledOnOs({ OS.LINUX, OS.MAC }) void testLinuxAndMac() { assertEquals(\"/usr/local/test.cfg\", config.getConfigFile(\"test.cfg\")); } @EnableOnOså°±æ˜¯ä¸€ä¸ªæ¡ä»¶æµ‹è¯•åˆ¤æ–­ã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€äº›å¸¸ç”¨çš„æ¡ä»¶æµ‹è¯•ï¼š\nä¸åœ¨Windowså¹³å°æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š@DisabledOnOs(OS.WINDOWS)ï¼š\n1 2 3 4 5 @Test @DisabledOnOs(OS.WINDOWS) void testOnNonWindowsOs() { // TODO: this test is disabled on windows } åªèƒ½åœ¨Java 9æˆ–æ›´é«˜ç‰ˆæœ¬æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š@DisabledOnJre(JRE.JAVA_8)ï¼š\n1 2 3 4 5 @Test @DisabledOnJre(JRE.JAVA_8) void testOnJava9OrAbove() { // TODO: this test is disabled on java 8 } åªèƒ½åœ¨64ä½æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨@EnabledIfSystemPropertyåˆ¤æ–­ï¼š\n1 2 3 4 5 @Test @EnabledIfSystemProperty(named = \"os.arch\", matches = \".*64.*\") void testOnlyOn64bitSystem() { // TODO: this test is only run on 64 bit system } éœ€è¦ä¼ å…¥ç¯å¢ƒå˜é‡DEBUG=trueæ‰èƒ½æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨@EnabledIfEnvironmentVariableï¼š\n1 2 3 4 5 @Test @EnabledIfEnvironmentVariable(named = \"DEBUG\", matches = \"true\") void testOnlyOnDebugMode() { // TODO: this test is only run on DEBUG=true } å½“æˆ‘ä»¬åœ¨JUnitä¸­è¿è¡Œæ‰€æœ‰æµ‹è¯•çš„æ—¶å€™ï¼ŒJUnitä¼šç»™å‡ºæ‰§è¡Œçš„ç»“æœã€‚åœ¨IDEä¸­ï¼Œæˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“åœ°çœ‹åˆ°æ²¡æœ‰æ‰§è¡Œçš„æµ‹è¯•ã€‚\nå‚æ•°åŒ–æµ‹è¯• å¦‚æœå¾…æµ‹è¯•çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä¸€ç»„æ•°æ®ï¼š å¯ä»¥æŠŠæµ‹è¯•æ•°æ®ç»„ç»‡èµ·æ¥ ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®è°ƒç”¨ç›¸åŒçš„æµ‹è¯•æ–¹æ³•\nå‚æ•°åŒ–æµ‹è¯•å’Œæ™®é€šæµ‹è¯•ç¨å¾®ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸€ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦æ¥æ”¶è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œç„¶åï¼Œä¼ å…¥ä¸€ç»„å‚æ•°åå¤è¿è¡Œã€‚\nJUnitæä¾›äº†ä¸€ä¸ª@ParameterizedTestæ³¨è§£ï¼Œç”¨æ¥è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ã€‚\nå‡è®¾æˆ‘ä»¬æƒ³å¯¹Math.abs()è¿›è¡Œæµ‹è¯•ï¼Œå…ˆç”¨ä¸€ç»„æ­£æ•°è¿›è¡Œæµ‹è¯•ï¼š\n1 2 3 4 5 @ParameterizedTest @ValueSource(ints = { 0, 1, 5, 100 }) void testAbs(int x) { assertEquals(x, Math.abs(x)); } å†ç”¨ä¸€ç»„è´Ÿæ•°è¿›è¡Œæµ‹è¯•ï¼š\n1 2 3 4 5 @ParameterizedTest @ValueSource(ints = { -1, -5, -100 }) void testAbsNegative(int x) { assertEquals(-x, Math.abs(x)); } æ³¨æ„åˆ°å‚æ•°åŒ–æµ‹è¯•çš„æ³¨è§£æ˜¯@ParameterizedTestï¼Œè€Œä¸æ˜¯æ™®é€šçš„@Testã€‚\nå®é™…çš„æµ‹è¯•åœºæ™¯å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªStringUtils.capitalize()æ–¹æ³•ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå¤§å†™ï¼Œåç»­å­—æ¯å˜ä¸ºå°å†™ï¼š\n1 2 3 4 5 6 7 8 public class StringUtils { public static String capitalize(String s) { if (s.length() == 0) { return s; } return Character.toUpperCase(s.charAt(0)) + s.substring(1).toLowerCase(); } } è¦ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç»™å‡ºè¾“å…¥ï¼Œè¿˜è¦ç»™å‡ºé¢„æœŸè¾“å‡ºã€‚å› æ­¤ï¼Œæµ‹è¯•æ–¹æ³•è‡³å°‘éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š\n1 2 3 4 @ParameterizedTest void testCapitalize(String input, String result) { assertEquals(result, StringUtils.capitalize(input)); } ç°åœ¨é—®é¢˜æ¥äº†ï¼šå‚æ•°å¦‚ä½•ä¼ å…¥ï¼Ÿ æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡@MethodSourceæ³¨è§£ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŒåçš„é™æ€æ–¹æ³•æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 @ParameterizedTest @MethodSource void testCapitalize(String input, String result) { assertEquals(result, StringUtils.capitalize(input)); } static List testCapitalize() { return List.of( // arguments: Arguments.arguments(\"abc\", \"Abc\"), // Arguments.arguments(\"APPLE\", \"Apple\"), // Arguments.arguments(\"gooD\", \"Good\")); } ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼šé™æ€æ–¹æ³•testCapitalize()è¿”å›äº†ä¸€ç»„æµ‹è¯•å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸¤ä¸ªStringï¼Œæ­£å¥½ä½œä¸ºæµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¼ å…¥ã€‚ æ³¨ï¼š å¦‚æœé™æ€æ–¹æ³•å’Œæµ‹è¯•æ–¹æ³•çš„åç§°ä¸åŒï¼Œ@MethodSourceä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•åã€‚ä½†ä½¿ç”¨é»˜è®¤åŒåæ–¹æ³•æœ€æ–¹ä¾¿ã€‚\nå¦ä¸€ç§ä¼ å…¥æµ‹è¯•å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨@CsvSourceï¼Œå®ƒçš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œï¼Œä¸€è¡ŒåŒ…å«çš„è‹¥å¹²å‚æ•°ç”¨,åˆ†éš”ï¼Œå› æ­¤ï¼Œä¸Šè¿°æµ‹è¯•åˆå¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š\n1 2 3 4 5 @ParameterizedTest @CsvSource({ \"abc, Abc\", \"APPLE, Apple\", \"gooD, Good\" }) void testCapitalize(String input, String result) { assertEquals(result, StringUtils.capitalize(input)); } å¦‚æœæœ‰æˆç™¾ä¸Šåƒçš„æµ‹è¯•è¾“å…¥ï¼Œé‚£ä¹ˆï¼Œç›´æ¥å†™@CsvSourceå°±å¾ˆä¸æ–¹ä¾¿ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•æ•°æ®æåˆ°ä¸€ä¸ªç‹¬ç«‹çš„CSVæ–‡ä»¶ä¸­ï¼Œç„¶åæ ‡æ³¨ä¸Š@CsvFileSourceï¼š\n1 2 3 4 5 @ParameterizedTest @CsvFileSource(resources = { \"/test-capitalize.csv\" }) void testCapitalizeUsingCsvFile(String input, String result) { assertEquals(result, StringUtils.capitalize(input)); } JUnitåªåœ¨classpathä¸­æŸ¥æ‰¾æŒ‡å®šçš„CSVæ–‡ä»¶ï¼Œå› æ­¤ï¼Œtest-capitalize.csvè¿™ä¸ªæ–‡ä»¶è¦æ”¾åˆ°testç›®å½•ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 apple, Apple HELLO, Hello JUnit, Junit reSource, Resource @DisplayName @DisplayNameå¯ä»¥ç»™ æµ‹è¯•ç±» æˆ–è€… æµ‹è¯•æ–¹æ³•æ¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„åç§°ã€‚å¯ä»¥æ”¯æŒ ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦ï¼Œç”šè‡³æ˜¯ emojiã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import org.junit.jupiter.api.DisplayName; import org.junit.jupiter.api.Test; @DisplayName(\"A special test case\") public class DisplayNameTest { @Test @DisplayName(\"Custom test name containing spaces\") void testWithDisplayNameContainingSpaces() { } @Test @DisplayName(\"â•¯Â°â–¡Â°ï¼‰â•¯\") void testWithDisplayNameContainingSpecialCharacters() { } @Test @DisplayName(\"ğŸ˜±\") void testWithDisplayNameContainingEmoji() { } } å†…åµŒæµ‹è¯•ç±»ï¼š@Nested å½“æˆ‘ä»¬ç¼–å†™çš„ç±»å’Œä»£ç é€æ¸å¢å¤šï¼Œéšä¹‹è€Œæ¥çš„éœ€è¦æµ‹è¯•çš„å¯¹åº”æµ‹è¯•ç±»ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚ä¸ºäº†è§£å†³æµ‹è¯•ç±»æ•°é‡çˆ†ç‚¸çš„é—®é¢˜ï¼ŒJUnit 5æä¾›äº†@Nested æ³¨è§£ï¼Œèƒ½å¤Ÿä»¥é™æ€å†…éƒ¨æˆå‘˜ç±»çš„å½¢å¼å¯¹æµ‹è¯•ç”¨ä¾‹ç±»è¿›è¡Œé€»è¾‘åˆ†ç»„ã€‚ å¹¶ä¸”æ¯ä¸ªé™æ€å†…éƒ¨ç±»éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œ è¿™äº›æ–¹æ³•å°†æŒ‰ä»å¤–åˆ°å†…å±‚æ¬¡é¡ºåºæ‰§è¡Œã€‚ æ­¤å¤–ï¼ŒåµŒå¥—çš„ç±»ä¹Ÿå¯ä»¥ç”¨@DisplayName æ ‡è®°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ­£ç¡®çš„æµ‹è¯•åç§°ã€‚ä¸‹é¢çœ‹ä¸‹ç®€å•çš„ç”¨æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @DisplayName(\"å†…åµŒæµ‹è¯•ç±»\") public class NestUnitTest { @BeforeEach void init() { System.out.println(\"æµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰å‡†å¤‡\"); } @Nested @DisplayName(\"ç¬¬ä¸€ä¸ªå†…åµŒæµ‹è¯•ç±»\") class FirstNestTest { @Test void test() { System.out.println(\"ç¬¬ä¸€ä¸ªå†…åµŒæµ‹è¯•ç±»æ‰§è¡Œæµ‹è¯•\"); } } @Nested @DisplayName(\"ç¬¬äºŒä¸ªå†…åµŒæµ‹è¯•ç±»\") class SecondNestTest { @Test void test() { System.out.println(\"ç¬¬äºŒä¸ªå†…åµŒæµ‹è¯•ç±»æ‰§è¡Œæµ‹è¯•\"); } } } æ–°çš„æ–­è¨€ åœ¨æ–­è¨€ API è®¾è®¡ä¸Šï¼ŒJUnit 5 è¿›è¡Œæ˜¾è‘—åœ°æ”¹è¿›ï¼Œå¹¶ä¸”å……åˆ†åˆ©ç”¨ Java 8 çš„æ–°ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯ Lambda è¡¨è¾¾å¼ï¼Œæœ€ç»ˆæä¾›äº†æ–°çš„æ–­è¨€ç±»: org.junit.jupiter.api.Assertions ã€‚è®¸å¤šæ–­è¨€æ–¹æ³•æ¥å— Lambda è¡¨è¾¾å¼å‚æ•°ï¼Œåœ¨æ–­è¨€æ¶ˆæ¯ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯å®ƒæ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œå¦‚æœæ¶ˆæ¯æ„é€ å¼€é”€å¾ˆå¤§ï¼Œè¿™æ ·åšä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥èŠ‚çœæ—¶é—´å’Œèµ„æºã€‚\nè¶…æ—¶æ“ä½œçš„æµ‹è¯•ï¼šassertTimeoutPreemptively å½“æˆ‘ä»¬å¸Œæœ›æµ‹è¯•è€—æ—¶æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸æƒ³è®©æµ‹è¯•æ–¹æ³•æ— é™åœ°ç­‰å¾…æ—¶ï¼Œå°±å¯ä»¥å¯¹æµ‹è¯•æ–¹æ³•è¿›è¡Œè¶…æ—¶æµ‹è¯•ï¼ŒJUnit 5 å¯¹æ­¤æ¨å‡ºäº†æ–­è¨€æ–¹æ³• assertTimeoutï¼Œæä¾›äº†å¯¹è¶…æ—¶çš„å¹¿æ³›æ”¯æŒã€‚ å‡è®¾æˆ‘ä»¬å¸Œæœ›æµ‹è¯•ä»£ç åœ¨ä¸€ç§’å†…æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥å†™å¦‚ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼š\n1 2 3 4 5 @Test @DisplayName(\"è¶…æ—¶æ–¹æ³•æµ‹è¯•\") void test_should_complete_in_one_second() { Assertions.assertTimeoutPreemptively(Duration.of(1, ChronoUnit.SECONDS), () -\u003e Thread.sleep(2000)); } è¿™ä¸ªæµ‹è¯•è¿è¡Œå¤±è´¥ï¼Œå› ä¸ºä»£ç æ‰§è¡Œå°†ä¼‘çœ ä¸¤ç§’é’Ÿï¼Œè€Œæˆ‘ä»¬æœŸæœ›æµ‹è¯•ç”¨ä¾‹åœ¨ä¸€ç§’é’Ÿä¹‹å†…æˆåŠŸã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠä¼‘çœ æ—¶é—´è®¾ç½®ä¸€ç§’é’Ÿï¼Œæµ‹è¯•ä»ç„¶ä¼šå‡ºç°å¶å°”å¤±è´¥çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºæµ‹è¯•æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­é™¤äº†ç›®æ ‡ä»£ç è¿˜æœ‰é¢å¤–çš„ä»£ç å’ŒæŒ‡ä»¤æ‰§è¡Œä¼šè€—æ—¶ï¼Œæ‰€ä»¥åœ¨è¶…æ—¶é™åˆ¶ä¸Šæ— æ³•åšåˆ°å¯¹æ—¶é—´å‚æ•°çš„å®Œå…¨ç²¾ç¡®åŒ¹é…ã€‚\nå¼‚å¸¸æµ‹è¯•ï¼šassertThrows æˆ‘ä»¬ä»£ç ä¸­å¯¹äºå¸¦æœ‰å¼‚å¸¸çš„æ–¹æ³•é€šå¸¸éƒ½æ˜¯ä½¿ç”¨ try-catch æ–¹å¼æ•è·å¤„ç†ï¼Œé’ˆå¯¹æµ‹è¯•è¿™æ ·å¸¦æœ‰å¼‚å¸¸æŠ›å‡ºçš„ä»£ç ï¼Œè€Œ JUnit 5 æä¾›æ–¹æ³• Assertions#assertThrows(Class, Executable) æ¥è¿›è¡Œæµ‹è¯•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¼‚å¸¸ç±»å‹ï¼Œç¬¬äºŒä¸ªä¸ºå‡½æ•°å¼æ¥å£å‚æ•°ï¼Œè·Ÿ Runnable æ¥å£ç›¸ä¼¼ï¼Œä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›ï¼Œå¹¶ä¸”æ”¯æŒ Lambdaè¡¨è¾¾å¼æ–¹å¼ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¯å‚è€ƒä¸‹æ–¹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 @Test @DisplayName(\"æµ‹è¯•æ•è·çš„å¼‚å¸¸\") void assertThrowsException() { String str = null; Assertions.assertThrows(IllegalArgumentException.class, () -\u003e { Integer.valueOf(str); }); } å½“Lambdaè¡¨è¾¾å¼ä¸­ä»£ç å‡ºç°çš„å¼‚å¸¸ä¼šè·Ÿé¦–ä¸ªå‚æ•°çš„å¼‚å¸¸ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸å±äºåŒä¸€ç±»å¼‚å¸¸ï¼Œå°±ä¼šæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ç±»ä¼¼çš„æç¤ºï¼š org.opentest4j.AssertionFailedError: Unexpected exception type thrown ==\u003e expected: but was: \u003c...Exception\u003e\nspring boot ä¸­ä½¿ç”¨junit5 å‚è€ƒ\nspring boot é¡¹ç›®æ˜¯è‡ªå¸¦æµ‹è¯•æ¨¡å—çš„ï¼Œä¸”spring boot 2.2ä¹‹åçš„ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯junit 5ã€‚\n1 2 3 4 5 org.springframework.boot spring-boot-starter-test test spring-boot-starter-teståŒ…å«ä»¥ä¸‹å‡ ä¸ªåº“\nJUnit Spring Test \u0026 Spring Boot Test AssertJ Hamcrest Mockito JSONassert JsonPath å·¥ç¨‹åˆ›å»ºå¥½ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªæµ‹è¯•ç±»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 import org.junit.jupiter.api.Test; import org.springframework.boot.test.context.SpringBootTest; @SpringBootTest class SpringBootJunit5ApplicationTests { @Test void contextLoads() { } } è¿™ä¸ªæµ‹è¯•ç±»çš„ä½œç”¨æ˜¯æ£€æŸ¥åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ˜¯å¦å¯æ­£å¸¸å¯åŠ¨ã€‚ @SpringBootTest æ³¨è§£å‘Šè¯‰ Spring Boot æŸ¥æ‰¾å¸¦ @SpringBootApplication æ³¨è§£çš„ä¸»é…ç½®ç±»ï¼Œå¹¶ä½¿ç”¨è¯¥ç±»å¯åŠ¨ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ã€‚\nJunit5å’ŒJunit4ï¼Œæ³¨è§£çš„åŒºåˆ« JUnit4 JUnit5 è¯´æ˜ @Test @Test è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚JUnit5ä¸JUnit 4çš„@Testæ³¨è§£ä¸åŒçš„æ˜¯ï¼Œå®ƒæ²¡æœ‰å£°æ˜ä»»ä½•å±æ€§ï¼Œå› ä¸ºJUnit Jupiterä¸­çš„æµ‹è¯•æ‰©å±•æ˜¯åŸºäºå®ƒä»¬è‡ªå·±çš„ä¸“ç”¨æ³¨è§£æ¥å®Œæˆçš„ã€‚è¿™æ ·çš„æ–¹æ³•ä¼šè¢«ç»§æ‰¿ï¼Œé™¤éå®ƒä»¬è¢«è¦†ç›– @BeforeClass @BeforeAll è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ‰€æœ‰ä½¿ç”¨äº†@Test @RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å‰ æ‰§è¡Œï¼› @AfterClass @AfterAll è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ‰€æœ‰ä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹åæ‰§è¡Œï¼› @Before @BeforeEach è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ¯ä¸€ä¸ªä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å‰ æ‰§è¡Œ @After @AfterEach è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ¯ä¸€ä¸ªä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å æ‰§è¡Œ @Ignore @Disabled ç”¨äºç¦ç”¨ä¸€ä¸ªæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³• @Category @Tag ç”¨äºå£°æ˜è¿‡æ»¤æµ‹è¯•çš„tagsï¼Œè¯¥æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•æˆ–ç±»ä¸Šï¼›ç±»ä¼¼äºTesgNGçš„æµ‹è¯•ç»„æˆ–JUnit 4çš„åˆ†ç±»ã€‚ @Parameters @ParameterizedTest è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªå‚æ•°åŒ–æµ‹è¯• @RunWith @ExtendWith @Runwithå°±æ˜¯æ”¾åœ¨æµ‹è¯•ç±»åä¹‹å‰ï¼Œç”¨æ¥ç¡®å®šè¿™ä¸ªç±»æ€ä¹ˆè¿è¡Œçš„ @Rule @ExtendWith Ruleæ˜¯ä¸€ç»„å®ç°äº†TestRuleæ¥å£çš„å…±äº«ç±»ï¼Œæä¾›äº†éªŒè¯ã€ç›‘è§†TestCaseå’Œå¤–éƒ¨èµ„æºç®¡ç†ç­‰èƒ½åŠ› @ClassRule @ExtendWith @ClassRuleç”¨äºæµ‹è¯•ç±»ä¸­çš„é™æ€å˜é‡ï¼Œå¿…é¡»æ˜¯TestRuleæ¥å£çš„å®ä¾‹ï¼Œä¸”è®¿é—®ä¿®é¥°ç¬¦å¿…é¡»ä¸ºpublicã€‚ ",
  "wordCount" : "8598",
  "inLanguage": "en",
  "datePublished": "2022-08-10T15:21:25Z",
  "dateModified": "2022-08-10T15:21:25Z",
  "author":[{
    "@type": "Person",
    "name": "Me"
  }, {
    "@type": "Person",
    "name": "You"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title">
      å•å…ƒæµ‹è¯•
    </h1>
    <div class="post-meta"><span title='2022-08-10 15:21:25 +0000 UTC'>2022-08-10</span>&nbsp;Â·&nbsp;Me, You

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a><ul>
                        
                <li>
                    <a href="#junit" aria-label="JUnit">JUnit</a></li>
                <li>
                    <a href="#%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e7%9a%84%e5%a5%bd%e5%a4%84" aria-label="å•å…ƒæµ‹è¯•çš„å¥½å¤„">å•å…ƒæµ‹è¯•çš„å¥½å¤„</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8fixture" aria-label="ä½¿ç”¨Fixture">ä½¿ç”¨Fixture</a><ul>
                        
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e6%b5%8b%e8%af%95assertthrows" aria-label="å¼‚å¸¸æµ‹è¯•ï¼šassertThrows">å¼‚å¸¸æµ‹è¯•ï¼šassertThrows</a></li>
                <li>
                    <a href="#%e8%b6%85%e6%97%b6%e6%b5%8b%e8%af%95asserttimeout" aria-label="è¶…æ—¶æµ‹è¯•ï¼šassertTimeout">è¶…æ—¶æµ‹è¯•ï¼šassertTimeout</a></li>
                <li>
                    <a href="#%e9%87%8d%e5%a4%8d%e6%80%a7%e6%b5%8b%e8%af%95repeatedtest" aria-label="é‡å¤æ€§æµ‹è¯•ï¼šRepeatedTest">é‡å¤æ€§æµ‹è¯•ï¼šRepeatedTest</a></li>
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6%e6%b5%8b%e8%af%95" aria-label="æ¡ä»¶æµ‹è¯•">æ¡ä»¶æµ‹è¯•</a></li>
                <li>
                    <a href="#%e5%8f%82%e6%95%b0%e5%8c%96%e6%b5%8b%e8%af%95" aria-label="å‚æ•°åŒ–æµ‹è¯•">å‚æ•°åŒ–æµ‹è¯•</a></li>
                <li>
                    <a href="#displayname" aria-label="@DisplayName">@DisplayName</a></li>
                <li>
                    <a href="#%e5%86%85%e5%b5%8c%e6%b5%8b%e8%af%95%e7%b1%bbnested" aria-label="å†…åµŒæµ‹è¯•ç±»ï¼š@Nested">å†…åµŒæµ‹è¯•ç±»ï¼š@Nested</a></li>
                <li>
                    <a href="#%e6%96%b0%e7%9a%84%e6%96%ad%e8%a8%80" aria-label="æ–°çš„æ–­è¨€">æ–°çš„æ–­è¨€</a><ul>
                        
                <li>
                    <a href="#%e8%b6%85%e6%97%b6%e6%93%8d%e4%bd%9c%e7%9a%84%e6%b5%8b%e8%af%95asserttimeoutpreemptively" aria-label="è¶…æ—¶æ“ä½œçš„æµ‹è¯•ï¼šassertTimeoutPreemptively">è¶…æ—¶æ“ä½œçš„æµ‹è¯•ï¼šassertTimeoutPreemptively</a></li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e6%b5%8b%e8%af%95assertthrows-1" aria-label="å¼‚å¸¸æµ‹è¯•ï¼šassertThrows">å¼‚å¸¸æµ‹è¯•ï¼šassertThrows</a></li></ul>
                </li>
                <li>
                    <a href="#spring-boot-%e4%b8%ad%e4%bd%bf%e7%94%a8junit5" aria-label="spring boot ä¸­ä½¿ç”¨junit5">spring boot ä¸­ä½¿ç”¨junit5</a></li>
                <li>
                    <a href="#junit5%e5%92%8cjunit4%e6%b3%a8%e8%a7%a3%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="Junit5å’ŒJunit4ï¼Œæ³¨è§£çš„åŒºåˆ«">Junit5å’ŒJunit4ï¼Œæ³¨è§£çš„åŒºåˆ«</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p>å•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒç¼–å†™æµ‹è¯•ä»£ç ã€‚Javaç¨‹åºæœ€å°çš„åŠŸèƒ½å•å…ƒæ˜¯æ–¹æ³•ï¼Œå› æ­¤ï¼Œå¯¹Javaç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å°±æ˜¯é’ˆå¯¹å•ä¸ªJavaæ–¹æ³•çš„æµ‹è¯•ã€‚</p>
<p>æ‰€è°“æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œæ˜¯æŒ‡å…ˆç¼–å†™æ¥å£ï¼Œç´§æ¥ç€ç¼–å†™æµ‹è¯•ã€‚ç¼–å†™å®Œæµ‹è¯•åï¼Œæˆ‘ä»¬æ‰å¼€å§‹çœŸæ­£ç¼–å†™å®ç°ä»£ç ã€‚åœ¨ç¼–å†™å®ç°ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¸€è¾¹å†™ï¼Œä¸€è¾¹æµ‹ï¼Œä»€ä¹ˆæ—¶å€™æµ‹è¯•å…¨éƒ¨é€šè¿‡äº†ï¼Œé‚£å°±è¡¨ç¤ºç¼–å†™çš„å®ç°å®Œæˆäº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    ç¼–å†™æ¥å£
</span></span><span style="display:flex;"><span>     â”‚
</span></span><span style="display:flex;"><span>     â–¼
</span></span><span style="display:flex;"><span>    ç¼–å†™æµ‹è¯•
</span></span><span style="display:flex;"><span>     â”‚
</span></span><span style="display:flex;"><span>     â–¼
</span></span><span style="display:flex;"><span>â”Œâ”€&gt; ç¼–å†™å®ç°
</span></span><span style="display:flex;"><span>â”‚    â”‚
</span></span><span style="display:flex;"><span>â”‚ N  â–¼
</span></span><span style="display:flex;"><span>â””â”€â”€ è¿è¡Œæµ‹è¯•
</span></span><span style="display:flex;"><span>     â”‚ Y
</span></span><span style="display:flex;"><span>     â–¼
</span></span><span style="display:flex;"><span>    ä»»åŠ¡å®Œæˆ
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™å°±æ˜¯é©±åŠ¨æµ‹è¯•å¼€å‘ï¼ˆTDDï¼‰ã€‚
å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ç§ç†æƒ³æƒ…å†µã€‚å¤§éƒ¨åˆ†æƒ…å†µæ˜¯æˆ‘ä»¬å·²ç»ç¼–å†™äº†å®ç°ä»£ç ï¼Œéœ€è¦å¯¹å·²æœ‰çš„ä»£ç è¿›è¡Œæµ‹è¯•ã€‚
æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥çœ‹å¦‚ä½•ç¼–å†™æµ‹è¯•ã€‚å‡å®šæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„ç±»ï¼Œå®ƒåªæœ‰ä¸€ä¸ªé™æ€æ–¹æ³•æ¥è®¡ç®—é˜¶ä¹˜ï¼š
<code>n!=1Ã—2Ã—3Ã—...Ã—n</code>
ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Factorial {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> fact(<span style="color:#fff;font-weight:bold">long</span> n) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> r = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">long</span> i = <span style="color:#ff0;font-weight:bold">1</span>; i &lt;= n; i++) {
</span></span><span style="display:flex;"><span>            r = r * i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> r;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¦æµ‹è¯•è¿™ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ç¼–å†™ä¸€ä¸ªmain()æ–¹æ³•ï¼Œç„¶åè¿è¡Œä¸€äº›æµ‹è¯•ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Test {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (fact(<span style="color:#ff0;font-weight:bold">10</span>) == <span style="color:#ff0;font-weight:bold">3628800</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;pass&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;fail&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿è¡Œ<code>main()</code>æ–¹æ³•æ¥è¿è¡Œæµ‹è¯•ä»£ç ã€‚</p>
<p>ä¸è¿‡ï¼Œä½¿ç”¨<code>main()</code>æ–¹æ³•æµ‹è¯•æœ‰å¾ˆå¤šç¼ºç‚¹ï¼š</p>
<p>ä¸€æ˜¯åªèƒ½æœ‰ä¸€ä¸ª<code>main()</code>æ–¹æ³•ï¼Œä¸èƒ½æŠŠæµ‹è¯•ä»£ç åˆ†ç¦»ï¼ŒäºŒæ˜¯æ²¡æœ‰æ‰“å°å‡ºæµ‹è¯•ç»“æœå’ŒæœŸæœ›ç»“æœï¼Œä¾‹å¦‚ï¼Œ<code>expected: 3628800, but actual: 123456</code>ï¼Œä¸‰æ˜¯å¾ˆéš¾ç¼–å†™ä¸€ç»„é€šç”¨çš„æµ‹è¯•ä»£ç ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æµ‹è¯•æ¡†æ¶ï¼Œå¸®åŠ©æˆ‘ä»¬ç¼–å†™æµ‹è¯•ã€‚</p>
<h2 id="junit">JUnit<a hidden class="anchor" aria-hidden="true" href="#junit">#</a></h2>
<p>JUnitæ˜¯ä¸€ä¸ªå¼€æºçš„Javaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸“é—¨é’ˆå¯¹Javaè®¾è®¡ï¼Œä½¿ç”¨æœ€å¹¿æ³›ã€‚JUnitæ˜¯äº‹å®ä¸Šçš„å•å…ƒæµ‹è¯•çš„æ ‡å‡†æ¡†æ¶ï¼Œä»»ä½•Javaå¼€å‘è€…éƒ½åº”å½“å­¦ä¹ å¹¶ä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
<p>ä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•çš„å¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸ç®€å•åœ°ç»„ç»‡æµ‹è¯•ä»£ç ï¼Œå¹¶éšæ—¶è¿è¡Œå®ƒä»¬ï¼ŒJUnitå°±ä¼šç»™å‡ºæˆåŠŸçš„æµ‹è¯•å’Œå¤±è´¥çš„æµ‹è¯•ï¼Œè¿˜å¯ä»¥ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œä¸ä»…åŒ…å«æµ‹è¯•çš„æˆåŠŸç‡ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ï¼Œå³è¢«æµ‹è¯•çš„ä»£ç æœ¬èº«æœ‰å¤šå°‘ç»è¿‡äº†æµ‹è¯•ã€‚å¯¹äºé«˜è´¨é‡çš„ä»£ç æ¥è¯´ï¼Œæµ‹è¯•è¦†ç›–ç‡åº”è¯¥åœ¨80%ä»¥ä¸Šã€‚</p>
<p>æ­¤å¤–ï¼Œå‡ ä¹æ‰€æœ‰çš„IDEå·¥å…·éƒ½é›†æˆäº†JUnitï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨IDEä¸­ç¼–å†™å¹¶è¿è¡ŒJUnitæµ‹è¯•ã€‚JUnitç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯5ã€‚</p>
<p>ä»¥Eclipseä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬å·²ç»ç¼–å†™äº†ä¸€ä¸ª<code>Factorial.java</code>æ–‡ä»¶åï¼Œæˆ‘ä»¬æƒ³å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„<code>FactorialTest.java</code>æ–‡ä»¶ï¼Œä»¥<code>Test</code>ä¸ºåç¼€æ˜¯ä¸€ä¸ªæƒ¯ä¾‹ï¼Œå¹¶åˆ†åˆ«å°†å…¶æ”¾å…¥<code>src</code>å’Œ<code>test</code>ç›®å½•ä¸­ã€‚æœ€åï¼Œåœ¨<code>Project</code> - <code>Properties</code> - <code>Java Build Path</code> - <code>Libraries</code>ä¸­æ·»åŠ <code>JUnit 5</code>çš„åº“ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>FactorialTest.java</code>çš„å†…å®¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> FactorialTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testFact() {
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">1</span>, Factorial.<span style="color:#007f7f">fact</span>(<span style="color:#ff0;font-weight:bold">1</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">2</span>, Factorial.<span style="color:#007f7f">fact</span>(<span style="color:#ff0;font-weight:bold">2</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">6</span>, Factorial.<span style="color:#007f7f">fact</span>(<span style="color:#ff0;font-weight:bold">3</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">3628800</span>, Factorial.<span style="color:#007f7f">fact</span>(<span style="color:#ff0;font-weight:bold">10</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">2432902008176640000L</span>, Factorial.<span style="color:#007f7f">fact</span>(<span style="color:#ff0;font-weight:bold">20</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¸å¿ƒæµ‹è¯•æ–¹æ³•<code>testFact()</code>åŠ ä¸Šäº†<code>@Test</code>æ³¨è§£ï¼Œè¿™æ˜¯JUnitè¦æ±‚çš„ï¼Œå®ƒä¼šæŠŠå¸¦æœ‰<code>@Test</code>çš„æ–¹æ³•è¯†åˆ«ä¸ºæµ‹è¯•æ–¹æ³•ã€‚åœ¨æµ‹è¯•æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬ç”¨<code>assertEquals(1, Factorial.fact(1))</code>è¡¨ç¤ºï¼ŒæœŸæœ›<code>Factorial.fact(1)</code>è¿”å›<code>1</code>ã€‚<code>assertEquals(expected, actual)</code>æ˜¯æœ€å¸¸ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒåœ¨<code>Assertion</code>ç±»ä¸­å®šä¹‰ã€‚<code>Assertion</code>è¿˜å®šä¹‰äº†å…¶ä»–æ–­è¨€æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>assertTrue()</code>: æœŸå¾…ç»“æœä¸º<code>true</code></li>
<li><code>assertFalse()</code>: æœŸå¾…ç»“æœä¸º<code>false</code></li>
<li><code>assertNotNull()</code>: æœŸå¾…ç»“æœä¸ºé<code>null</code></li>
<li><code>assertArrayEquals()</code>: æœŸå¾…ç»“æœä¸ºæ•°ç»„å¹¶ä¸æœŸæœ›æ•°ç»„æ¯ä¸ªå…ƒç´ çš„å€¼å‡ç›¸ç­‰</li>
<li>&hellip;</li>
</ul>
<p>è¿è¡Œå•å…ƒæµ‹è¯•éå¸¸ç®€å•ã€‚é€‰ä¸­<code>FactorialTest.java</code>æ–‡ä»¶ï¼Œç‚¹å‡»<code>Run</code> - <code>Run As</code> - <code>JUnit Test</code>ï¼ŒEclipseä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸ªJUnitæµ‹è¯•ï¼Œå¹¶æ˜¾ç¤ºç»“æœã€‚</p>
<p>å¦‚æœæµ‹è¯•ç»“æœä¸é¢„æœŸä¸ç¬¦ï¼Œ<code>assertEquals()</code>ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªæµ‹è¯•å¤±è´¥çš„ç»“æœã€‚</p>
<p>åœ¨Failure Traceä¸­ï¼ŒJUnitä¼šå‘Šè¯‰æˆ‘ä»¬è¯¦ç»†çš„é”™è¯¯ç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>org.opentest4j.AssertionFailedError: expected: &lt;3628800&gt; but was: &lt;362880&gt;
</span></span><span style="display:flex;"><span>	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)
</span></span><span style="display:flex;"><span>	at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:195)
</span></span><span style="display:flex;"><span>	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:168)
</span></span><span style="display:flex;"><span>	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:163)
</span></span><span style="display:flex;"><span>	at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:611)
</span></span><span style="display:flex;"><span>	at com.itranswarp.learnjava.FactorialTest.testFact(FactorialTest.java:14)
</span></span><span style="display:flex;"><span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
</span></span><span style="display:flex;"><span>	at ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€è¡Œçš„å¤±è´¥ä¿¡æ¯çš„æ„æ€æ˜¯æœŸå¾…ç»“æœ<code>3628800</code>ä½†æ˜¯å®é™…è¿”å›æ˜¯<code>362880</code>ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬è¦ä¹ˆä¿®æ­£å®ç°ä»£ç ï¼Œè¦ä¹ˆä¿®æ­£æµ‹è¯•ä»£ç ï¼Œç›´åˆ°æµ‹è¯•é€šè¿‡ä¸ºæ­¢ã€‚</p>
<p>ä½¿ç”¨æµ®ç‚¹æ•°æ—¶ï¼Œç”±äºæµ®ç‚¹æ•°æ— æ³•ç²¾ç¡®åœ°è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨<code>assertEquals(double expected, double actual, double delta)</code>è¿™ä¸ªé‡è½½æ–¹æ³•ï¼ŒæŒ‡å®šä¸€ä¸ªè¯¯å·®å€¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>assertEquals(0.1, Math.abs(1 - 9 / 10.0), 0.0000001);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å•å…ƒæµ‹è¯•çš„å¥½å¤„">å•å…ƒæµ‹è¯•çš„å¥½å¤„<a hidden class="anchor" aria-hidden="true" href="#å•å…ƒæµ‹è¯•çš„å¥½å¤„">#</a></h2>
<p>å•å…ƒæµ‹è¯•å¯ä»¥ç¡®ä¿å•ä¸ªæ–¹æ³•æŒ‰ç…§æ­£ç¡®é¢„æœŸè¿è¡Œï¼Œå¦‚æœä¿®æ”¹äº†æŸä¸ªæ–¹æ³•çš„ä»£ç ï¼Œåªéœ€ç¡®ä¿å…¶å¯¹åº”çš„å•å…ƒæµ‹è¯•é€šè¿‡ï¼Œå³å¯è®¤ä¸ºæ”¹åŠ¨æ­£ç¡®ã€‚æ­¤å¤–ï¼Œæµ‹è¯•ä»£ç æœ¬èº«å°±å¯ä»¥ä½œä¸ºç¤ºä¾‹ä»£ç ï¼Œç”¨æ¥æ¼”ç¤ºå¦‚ä½•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<p>ä½¿ç”¨JUnitè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è¨€ï¼ˆ<code>Assertion</code>ï¼‰æ¥æµ‹è¯•æœŸæœ›ç»“æœï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç»„ç»‡å’Œè¿è¡Œæµ‹è¯•ï¼Œå¹¶æ–¹ä¾¿åœ°æŸ¥çœ‹æµ‹è¯•ç»“æœã€‚æ­¤å¤–ï¼ŒJUnitæ—¢å¯ä»¥ç›´æ¥åœ¨IDEä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°é›†æˆåˆ°Mavenè¿™äº›è‡ªåŠ¨åŒ–å·¥å…·ä¸­è¿è¡Œã€‚</p>
<p>åœ¨ç¼–å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦éµå¾ªä¸€å®šçš„è§„èŒƒï¼š</p>
<p>ä¸€æ˜¯å•å…ƒæµ‹è¯•ä»£ç æœ¬èº«å¿…é¡»éå¸¸ç®€å•ï¼Œèƒ½ä¸€ä¸‹çœ‹æ˜ç™½ï¼Œå†³ä¸èƒ½å†ä¸ºæµ‹è¯•ä»£ç ç¼–å†™æµ‹è¯•ï¼›</p>
<p>äºŒæ˜¯æ¯ä¸ªå•å…ƒæµ‹è¯•åº”å½“äº’ç›¸ç‹¬ç«‹ï¼Œä¸ä¾èµ–è¿è¡Œçš„é¡ºåºï¼›</p>
<p>ä¸‰æ˜¯æµ‹è¯•æ—¶ä¸ä½†è¦è¦†ç›–å¸¸ç”¨æµ‹è¯•ç”¨ä¾‹ï¼Œè¿˜è¦ç‰¹åˆ«æ³¨æ„æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼Œä¾‹å¦‚è¾“å…¥ä¸º<code>0</code>ï¼Œ<code>null</code>ï¼Œç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code>ç­‰æƒ…å†µã€‚</p>
<h1 id="ä½¿ç”¨fixture">ä½¿ç”¨Fixture<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨fixture">#</a></h1>
<p>åœ¨ä¸€ä¸ªå•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç¼–å†™å¤šä¸ª<code>@Test</code>æ–¹æ³•ï¼Œæ¥åˆ†ç»„ã€åˆ†ç±»å¯¹ç›®æ ‡ä»£ç è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€ä¸ªå¯¹è±¡éœ€è¦åˆå§‹åŒ–ï¼Œæµ‹è¯•å®Œå¯èƒ½è¿˜éœ€è¦æ¸…ç†çš„æƒ…å†µã€‚å¦‚æœæ¯ä¸ª<code>@Test</code>æ–¹æ³•éƒ½å†™ä¸€éè¿™æ ·çš„é‡å¤ä»£ç ï¼Œæ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>JUnitæä¾›äº†ç¼–å†™æµ‹è¯•å‰å‡†å¤‡ã€æµ‹è¯•åæ¸…ç†çš„å›ºå®šä»£ç ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºFixtureã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„<code>Calculator</code>çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Calculator {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">long</span> n = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> add(<span style="color:#fff;font-weight:bold">long</span> x) {
</span></span><span style="display:flex;"><span>        n = n + x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> sub(<span style="color:#fff;font-weight:bold">long</span> x) {
</span></span><span style="display:flex;"><span>        n = n - x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªç±»çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å…ˆåˆå§‹åŒ–å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­éƒ½å†™ä¸Šåˆå§‹åŒ–ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡<code>@BeforeEach</code>æ¥åˆå§‹åŒ–ï¼Œé€šè¿‡<code>@AfterEach</code>æ¥æ¸…ç†èµ„æºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CalculatorTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Calculator calculator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @BeforeEach
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setUp() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span> = <span style="color:#fff;font-weight:bold">new</span> Calculator();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @AfterEach
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> tearDown() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span> = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testAdd() {
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">100</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">add</span>(<span style="color:#ff0;font-weight:bold">100</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">150</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">add</span>(<span style="color:#ff0;font-weight:bold">50</span>));
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff0;font-weight:bold">130</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">add</span>(-<span style="color:#ff0;font-weight:bold">20</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testSub() {
</span></span><span style="display:flex;"><span>        assertEquals(-<span style="color:#ff0;font-weight:bold">100</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">sub</span>(<span style="color:#ff0;font-weight:bold">100</span>));
</span></span><span style="display:flex;"><span>        assertEquals(-<span style="color:#ff0;font-weight:bold">150</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">sub</span>(<span style="color:#ff0;font-weight:bold">50</span>));
</span></span><span style="display:flex;"><span>        assertEquals(-<span style="color:#ff0;font-weight:bold">130</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calculator</span>.<span style="color:#007f7f">sub</span>(-<span style="color:#ff0;font-weight:bold">20</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨CalculatorTestæµ‹è¯•ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ ‡è®°ä¸º@BeforeEachå’Œ@AfterEachçš„æ–¹æ³•ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ¯ä¸ª@Testæ–¹æ³•å‰åè‡ªåŠ¨è¿è¡Œã€‚
ä¸Šé¢çš„æµ‹è¯•ä»£ç åœ¨JUnitä¸­è¿è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (Method testMethod : findTestMethods(CalculatorTest.<span style="color:#007f7f">class</span>)) {
</span></span><span style="display:flex;"><span>    var test = <span style="color:#fff;font-weight:bold">new</span> CalculatorTest(); <span style="color:#007f7f">// åˆ›å»ºTestå®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    invokeBeforeEach(test);
</span></span><span style="display:flex;"><span>	invokeTestMethod(test, testMethod);
</span></span><span style="display:flex;"><span>    invokeAfterEach(test);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è§ï¼Œ@BeforeEachå’Œ@AfterEachä¼šâ€œç¯ç»•â€åœ¨æ¯ä¸ª@Testæ–¹æ³•å‰åã€‚</p>
<p>è¿˜æœ‰ä¸€äº›èµ„æºåˆå§‹åŒ–å’Œæ¸…ç†å¯èƒ½æ›´åŠ ç¹çï¼Œè€Œä¸”ä¼šè€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œä¾‹å¦‚åˆå§‹åŒ–æ•°æ®åº“ã€‚JUnitè¿˜æä¾›äº†@BeforeAllå’Œ@AfterAllï¼Œå®ƒä»¬åœ¨è¿è¡Œæ‰€æœ‰@Testå‰åè¿è¡Œï¼Œé¡ºåºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>invokeBeforeAll(CalculatorTest.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (Method testMethod : findTestMethods(CalculatorTest.<span style="color:#007f7f">class</span>)) {
</span></span><span style="display:flex;"><span>    var test = <span style="color:#fff;font-weight:bold">new</span> CalculatorTest(); <span style="color:#007f7f">// åˆ›å»ºTestå®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    invokeBeforeEach(test);
</span></span><span style="display:flex;"><span>	invokeTestMethod(test, testMethod);
</span></span><span style="display:flex;"><span>    invokeAfterEach(test);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>invokeAfterAll(CalculatorTest.<span style="color:#007f7f">class</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸º@BeforeAllå’Œ@AfterAllåœ¨æ‰€æœ‰@Testæ–¹æ³•è¿è¡Œå‰åä»…è¿è¡Œä¸€æ¬¡ï¼Œå› æ­¤ï¼Œå®ƒä»¬åªèƒ½åˆå§‹åŒ–é™æ€å˜é‡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> DatabaseTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> Database db;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @BeforeAll
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> initDatabase() {
</span></span><span style="display:flex;"><span>        db = createDb(...);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @AfterAll
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> dropDatabase() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>äº‹å®ä¸Šï¼Œ<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ä¹Ÿåªèƒ½æ ‡æ³¨åœ¨é™æ€æ–¹æ³•ä¸Šã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºç¼–å†™Fixtureçš„å¥—è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¯¹äºå®ä¾‹å˜é‡ï¼Œåœ¨<code>@BeforeEach</code>ä¸­åˆå§‹åŒ–ï¼Œåœ¨<code>@AfterEach</code>ä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª<code>@Test</code>æ–¹æ³•ä¸­äº’ä¸å½±å“ï¼Œå› ä¸ºæ˜¯ä¸åŒçš„å®ä¾‹ï¼›</li>
<li>å¯¹äºé™æ€å˜é‡ï¼Œåœ¨<code>@BeforeAll</code>ä¸­åˆå§‹åŒ–ï¼Œåœ¨<code>@AfterAll</code>ä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª<code>@Test</code>æ–¹æ³•ä¸­å‡æ˜¯å”¯ä¸€å®ä¾‹ï¼Œä¼šå½±å“å„ä¸ª<code>@Test</code>æ–¹æ³•ã€‚</li>
</ol>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>@BeforeEach</code>å’Œ<code>@AfterEach</code>å°±è¶³å¤Ÿäº†ã€‚åªæœ‰æŸäº›æµ‹è¯•èµ„æºåˆå§‹åŒ–è€—è´¹æ—¶é—´å¤ªé•¿ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸å°½é‡â€œå¤ç”¨â€æ—¶æ‰ä¼šç”¨åˆ°<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ã€‚</p>
<p>æœ€åï¼Œæ³¨æ„åˆ°æ¯æ¬¡è¿è¡Œä¸€ä¸ª<code>@Test</code>æ–¹æ³•å‰ï¼ŒJUnité¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>XxxTest</code>å®ä¾‹ï¼Œå› æ­¤ï¼Œæ¯ä¸ª<code>@Test</code>æ–¹æ³•å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ä¹Ÿæ— æ³•æŠŠæˆå‘˜å˜é‡çš„çŠ¶æ€ä»ä¸€ä¸ª<code>@Test</code>æ–¹æ³•å¸¦åˆ°å¦ä¸€ä¸ª<code>@Test</code>æ–¹æ³•ã€‚</p>
<h2 id="å°ç»“">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“">#</a></h2>
<p>ç¼–å†™Fixtureæ˜¯æŒ‡é’ˆå¯¹æ¯ä¸ª<code>@Test</code>æ–¹æ³•ï¼Œç¼–å†™<code>@BeforeEach</code>æ–¹æ³•ç”¨äºåˆå§‹åŒ–æµ‹è¯•èµ„æºï¼Œç¼–å†™<code>@AfterEach</code>ç”¨äºæ¸…ç†æµ‹è¯•èµ„æºï¼›</p>
<p>å¿…è¦æ—¶ï¼Œå¯ä»¥ç¼–å†™<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ï¼Œä½¿ç”¨é™æ€å˜é‡æ¥åˆå§‹åŒ–è€—æ—¶çš„èµ„æºï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰<code>@Test</code>æ–¹æ³•çš„è¿è¡Œå‰åä»…æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h1 id="å¼‚å¸¸æµ‹è¯•assertthrows">å¼‚å¸¸æµ‹è¯•ï¼šassertThrows<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸æµ‹è¯•assertthrows">#</a></h1>
<p>åœ¨Javaç¨‹åºä¸­ï¼Œå¼‚å¸¸å¤„ç†æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ–¹æ³•ï¼Œä¹Ÿç»å¸¸æŠ›å‡ºå„ç§å¼‚å¸¸ã€‚å¯¹äºå¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæµ‹è¯•ï¼Œæœ¬èº«å°±æ˜¯æµ‹è¯•çš„é‡è¦ç¯èŠ‚ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç¼–å†™JUnitæµ‹è¯•çš„æ—¶å€™ï¼Œé™¤äº†æ­£å¸¸çš„è¾“å…¥è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜è¦ç‰¹åˆ«é’ˆå¯¹å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚</p>
<p>æˆ‘ä»¬ä»ç„¶ç”¨<code>Factorial</code>ä¸¾ä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Factorial {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> fact(<span style="color:#fff;font-weight:bold">long</span> n) {
</span></span><span style="display:flex;"><span>    	<span style="color:#007f7f">//å¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ç›´æ¥æŠ›å‡ºIllegalArgumentException
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (n &lt; <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> r = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">long</span> i = <span style="color:#ff0;font-weight:bold">1</span>; i &lt;= n; i++) {
</span></span><span style="display:flex;"><span>            r = r * i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> r;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ–¹æ³•å…¥å£ï¼Œæˆ‘ä»¬å¢åŠ äº†å¯¹å‚æ•°<code>n</code>çš„æ£€æŸ¥ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ç›´æ¥æŠ›å‡º<code>IllegalArgumentException</code>ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹å¼‚å¸¸è¿›è¡Œæµ‹è¯•ã€‚åœ¨JUnitæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª<code>@Test</code>æ–¹æ³•ä¸“é—¨æµ‹è¯•å¼‚å¸¸ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testNegative() {
</span></span><span style="display:flex;"><span>    assertThrows(IllegalArgumentException.<span style="color:#007f7f">class</span>, <span style="color:#fff;font-weight:bold">new</span> Executable() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> execute() <span style="color:#fff;font-weight:bold">throws</span> Throwable {
</span></span><span style="display:flex;"><span>            Factorial.<span style="color:#007f7f">fact</span>(-<span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>JUnitæä¾›<code>assertThrows()</code>æ¥æœŸæœ›æ•è·ä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸ã€‚ç¬¬äºŒä¸ªå‚æ•°<code>Executable</code>å°è£…äº†æˆ‘ä»¬è¦æ‰§è¡Œçš„ä¼šäº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ<code>Factorial.fact(-1)</code>æ—¶ï¼Œå¿…å®šæŠ›å‡º<code>IllegalArgumentException</code>ã€‚<code>assertThrows()</code>åœ¨æ•è·åˆ°æŒ‡å®šå¼‚å¸¸æ—¶è¡¨ç¤ºé€šè¿‡æµ‹è¯•ï¼Œæœªæ•è·åˆ°å¼‚å¸¸ï¼Œæˆ–è€…æ•è·åˆ°çš„å¼‚å¸¸ç±»å‹ä¸å¯¹ï¼Œå‡è¡¨ç¤ºæµ‹è¯•å¤±è´¥ã€‚</p>
<p>æœ‰äº›ç«¥é‹ä¼šè§‰å¾—ç¼–å†™ä¸€ä¸ª<code>Executable</code>çš„åŒ¿åç±»å¤ªç¹çäº†ã€‚å®é™…ä¸Šï¼ŒJava 8å¼€å§‹å¼•å…¥äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ‰€æœ‰å•æ–¹æ³•æ¥å£éƒ½å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>void testNegative() {
</span></span><span style="display:flex;"><span>    assertThrows(IllegalArgumentException.class, () -&gt; {
</span></span><span style="display:flex;"><span>        Factorial.fact(-1);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°å¥‡æ€ªçš„<code>-&gt;</code>è¯­æ³•å°±æ˜¯å‡½æ•°å¼æ¥å£çš„å®ç°ä»£ç ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è¯¦ç»†ä»‹ç»ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡è¿™ç§å›ºå®šçš„ä»£ç ç¼–å†™èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥å³å¯ã€‚</p>
<h1 id="è¶…æ—¶æµ‹è¯•asserttimeout">è¶…æ—¶æµ‹è¯•ï¼šassertTimeout<a hidden class="anchor" aria-hidden="true" href="#è¶…æ—¶æµ‹è¯•asserttimeout">#</a></h1>
<p>ä½¿ç”¨æ³¨è§£<code>@Timeout(value = 500, unit = TimeUnit.MILLISECONDS)</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@Timeout(value = <span style="color:#ff0;font-weight:bold">500</span>, unit = TimeUnit.<span style="color:#007f7f">MILLISECONDS</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testTimeOut2() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        Thread.<span style="color:#007f7f">sleep</span>(<span style="color:#ff0;font-weight:bold">200</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (InterruptedException e) {
</span></span><span style="display:flex;"><span>        e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ assertTimeout</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testTimeOut() {
</span></span><span style="display:flex;"><span>    assertTimeout(Duration.<span style="color:#007f7f">ofSeconds</span>(<span style="color:#ff0;font-weight:bold">2</span>), () -&gt; {
</span></span><span style="display:flex;"><span>        Thread.<span style="color:#007f7f">sleep</span>(<span style="color:#ff0;font-weight:bold">1000</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="é‡å¤æ€§æµ‹è¯•repeatedtest">é‡å¤æ€§æµ‹è¯•ï¼šRepeatedTest<a hidden class="anchor" aria-hidden="true" href="#é‡å¤æ€§æµ‹è¯•repeatedtest">#</a></h1>
<p>@RepeatedTestå’Œ@Testä¸è¦å…±å­˜
åŸºæœ¬ç”¨æ³•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@RepeatedTest(value = <span style="color:#ff0;font-weight:bold">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> RepeatedTest() {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ‰§è¡Œæµ‹è¯•&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬è¿˜å¯ä»¥å¯¹é‡å¤è¿è¡Œçš„æµ‹è¯•æ–¹æ³•åç§°è¿›è¡Œä¿®æ”¹ï¼Œåˆ©ç”¨ @RepeatedTest æä¾›çš„å†…ç½®å˜é‡ï¼Œä»¥å ä½ç¬¦æ–¹å¼åœ¨å…¶ name å±æ€§ä¸Šä½¿ç”¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@DisplayName(<span style="color:#0ff;font-weight:bold">&#34;è‡ªå®šä¹‰åç§°é‡å¤æµ‹è¯•&#34;</span>)
</span></span><span style="display:flex;"><span>@RepeatedTest(value = <span style="color:#ff0;font-weight:bold">3</span>, name = <span style="color:#0ff;font-weight:bold">&#34;{displayName} ç¬¬ {currentRepetition} æ¬¡&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> RepeatedTest() {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ‰§è¡Œæµ‹è¯•&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>currentRepetitionï¼šè¡¨ç¤ºå·²ç»é‡å¤çš„æ¬¡æ•°
totalRepetitionsï¼šè¡¨ç¤ºæ€»å…±è¦é‡å¤çš„æ¬¡æ•°</p>
<h1 id="æ¡ä»¶æµ‹è¯•">æ¡ä»¶æµ‹è¯•<a hidden class="anchor" aria-hidden="true" href="#æ¡ä»¶æµ‹è¯•">#</a></h1>
<p>åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ’å‡ºæŸäº›<code>@Test</code>æ–¹æ³•ï¼Œä¸è¦è®©å®ƒè¿è¡Œï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å®ƒæ ‡è®°ä¸€ä¸ª<code>@Disabled</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Disabled
</span></span><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testBug101() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ³¨é‡Šæ‰<code>@Test</code>ï¼Œè€Œæ˜¯è¦åŠ ä¸€ä¸ª<code>@Disabled</code>ï¼Ÿè¿™æ˜¯å› ä¸ºæ³¨é‡Šæ‰<code>@Test</code>ï¼ŒJUnitå°±ä¸çŸ¥é“è¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œè€ŒåŠ ä¸Š<code>@Disabled</code>ï¼ŒJUnitä»ç„¶è¯†åˆ«å‡ºè¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œåªæ˜¯æš‚æ—¶ä¸è¿è¡Œã€‚å®ƒä¼šåœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Tests run: 68, Failures: 2, Errors: 0, Skipped: 5
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»ä¼¼<code>@Disabled</code>è¿™ç§æ³¨è§£å°±ç§°ä¸ºæ¡ä»¶æµ‹è¯•ï¼ŒJUnitæ ¹æ®ä¸åŒçš„æ¡ä»¶æ³¨è§£ï¼Œå†³å®šæ˜¯å¦è¿è¡Œå½“å‰çš„<code>@Test</code>æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Config {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getConfigFile(String filename) {
</span></span><span style="display:flex;"><span>        String os = System.<span style="color:#007f7f">getProperty</span>(<span style="color:#0ff;font-weight:bold">&#34;os.name&#34;</span>).<span style="color:#007f7f">toLowerCase</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (os.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;win&#34;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;C:\\&#34;</span> + filename;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (os.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;mac&#34;</span>) || os.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;linux&#34;</span>) || os.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;unix&#34;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;/usr/local/&#34;</span> + filename;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> UnsupportedOperationException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬æƒ³è¦æµ‹è¯•<code>getConfigFile()</code>è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯åœ¨Windowsä¸Šè·‘ï¼Œå’Œåœ¨Linuxä¸Šè·‘çš„ä»£ç è·¯å¾„ä¸åŒï¼Œå› æ­¤ï¼Œé’ˆå¯¹ä¸¤ä¸ªç³»ç»Ÿçš„æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªåªèƒ½åœ¨Windowsä¸Šè·‘ï¼Œå¦ä¸€ä¸ªåªèƒ½åœ¨Mac/Linuxä¸Šè·‘ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testWindows() {
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#0ff;font-weight:bold">&#34;C:\\test.ini&#34;</span>, config.<span style="color:#007f7f">getConfigFile</span>(<span style="color:#0ff;font-weight:bold">&#34;test.ini&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testLinuxAndMac() {
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#0ff;font-weight:bold">&#34;/usr/local/test.cfg&#34;</span>, config.<span style="color:#007f7f">getConfigFile</span>(<span style="color:#0ff;font-weight:bold">&#34;test.cfg&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› æ­¤ï¼Œæˆ‘ä»¬ç»™ä¸Šè¿°ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•åˆ†åˆ«åŠ ä¸Šæ¡ä»¶å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@EnabledOnOs(OS.<span style="color:#007f7f">WINDOWS</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testWindows() {
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#0ff;font-weight:bold">&#34;C:\\test.ini&#34;</span>, config.<span style="color:#007f7f">getConfigFile</span>(<span style="color:#0ff;font-weight:bold">&#34;test.ini&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@EnabledOnOs({ OS.<span style="color:#007f7f">LINUX</span>, OS.<span style="color:#007f7f">MAC</span> })
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testLinuxAndMac() {
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#0ff;font-weight:bold">&#34;/usr/local/test.cfg&#34;</span>, config.<span style="color:#007f7f">getConfigFile</span>(<span style="color:#0ff;font-weight:bold">&#34;test.cfg&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>@EnableOnOs</code>å°±æ˜¯ä¸€ä¸ªæ¡ä»¶æµ‹è¯•åˆ¤æ–­ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€äº›å¸¸ç”¨çš„æ¡ä»¶æµ‹è¯•ï¼š</p>
<p>ä¸åœ¨Windowså¹³å°æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š<code>@DisabledOnOs(OS.WINDOWS)</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@DisabledOnOs(OS.<span style="color:#007f7f">WINDOWS</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testOnNonWindowsOs() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// TODO: this test is disabled on windows
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åªèƒ½åœ¨Java 9æˆ–æ›´é«˜ç‰ˆæœ¬æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š<code>@DisabledOnJre(JRE.JAVA_8)</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@DisabledOnJre(JRE.<span style="color:#007f7f">JAVA_8</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testOnJava9OrAbove() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// TODO: this test is disabled on java 8
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åªèƒ½åœ¨64ä½æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨<code>@EnabledIfSystemProperty</code>åˆ¤æ–­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@EnabledIfSystemProperty(named = <span style="color:#0ff;font-weight:bold">&#34;os.arch&#34;</span>, matches = <span style="color:#0ff;font-weight:bold">&#34;.*64.*&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testOnlyOn64bitSystem() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// TODO: this test is only run on 64 bit system
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>éœ€è¦ä¼ å…¥ç¯å¢ƒå˜é‡<code>DEBUG=true</code>æ‰èƒ½æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨<code>@EnabledIfEnvironmentVariable</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@EnabledIfEnvironmentVariable(named = <span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span>, matches = <span style="color:#0ff;font-weight:bold">&#34;true&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testOnlyOnDebugMode() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// TODO: this test is only run on DEBUG=true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬åœ¨JUnitä¸­è¿è¡Œæ‰€æœ‰æµ‹è¯•çš„æ—¶å€™ï¼ŒJUnitä¼šç»™å‡ºæ‰§è¡Œçš„ç»“æœã€‚åœ¨IDEä¸­ï¼Œæˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“åœ°çœ‹åˆ°æ²¡æœ‰æ‰§è¡Œçš„æµ‹è¯•ã€‚</p>
<h1 id="å‚æ•°åŒ–æµ‹è¯•">å‚æ•°åŒ–æµ‹è¯•<a hidden class="anchor" aria-hidden="true" href="#å‚æ•°åŒ–æµ‹è¯•">#</a></h1>
<p>å¦‚æœå¾…æµ‹è¯•çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä¸€ç»„æ•°æ®ï¼š å¯ä»¥æŠŠæµ‹è¯•æ•°æ®ç»„ç»‡èµ·æ¥ ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®è°ƒç”¨ç›¸åŒçš„æµ‹è¯•æ–¹æ³•</p>
<p>å‚æ•°åŒ–æµ‹è¯•å’Œæ™®é€šæµ‹è¯•ç¨å¾®ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸€ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦æ¥æ”¶è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œç„¶åï¼Œä¼ å…¥ä¸€ç»„å‚æ•°åå¤è¿è¡Œã€‚</p>
<p>JUnitæä¾›äº†ä¸€ä¸ª<code>@ParameterizedTest</code>æ³¨è§£ï¼Œç”¨æ¥è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æƒ³å¯¹<code>Math.abs()</code>è¿›è¡Œæµ‹è¯•ï¼Œå…ˆç”¨ä¸€ç»„æ­£æ•°è¿›è¡Œæµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span>@ValueSource(ints = { <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">5</span>, <span style="color:#ff0;font-weight:bold">100</span> })
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testAbs(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    assertEquals(x, Math.<span style="color:#007f7f">abs</span>(x));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†ç”¨ä¸€ç»„è´Ÿæ•°è¿›è¡Œæµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span>@ValueSource(ints = { -<span style="color:#ff0;font-weight:bold">1</span>, -<span style="color:#ff0;font-weight:bold">5</span>, -<span style="color:#ff0;font-weight:bold">100</span> })
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testAbsNegative(<span style="color:#fff;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    assertEquals(-x, Math.<span style="color:#007f7f">abs</span>(x));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°å‚æ•°åŒ–æµ‹è¯•çš„æ³¨è§£æ˜¯<code>@ParameterizedTest</code>ï¼Œè€Œä¸æ˜¯æ™®é€šçš„<code>@Test</code>ã€‚</p>
<p>å®é™…çš„æµ‹è¯•åœºæ™¯å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ª<code>StringUtils.capitalize()</code>æ–¹æ³•ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå¤§å†™ï¼Œåç»­å­—æ¯å˜ä¸ºå°å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StringUtils {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> String capitalize(String s) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (s.<span style="color:#007f7f">length</span>() == <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> s;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Character.<span style="color:#007f7f">toUpperCase</span>(s.<span style="color:#007f7f">charAt</span>(<span style="color:#ff0;font-weight:bold">0</span>)) + s.<span style="color:#007f7f">substring</span>(<span style="color:#ff0;font-weight:bold">1</span>).<span style="color:#007f7f">toLowerCase</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¦ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç»™å‡ºè¾“å…¥ï¼Œè¿˜è¦ç»™å‡ºé¢„æœŸè¾“å‡ºã€‚å› æ­¤ï¼Œæµ‹è¯•æ–¹æ³•è‡³å°‘éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testCapitalize(String input, String result) {
</span></span><span style="display:flex;"><span>    assertEquals(result, StringUtils.<span style="color:#007f7f">capitalize</span>(input));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨é—®é¢˜æ¥äº†ï¼šå‚æ•°å¦‚ä½•ä¼ å…¥ï¼Ÿ
æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡@MethodSourceæ³¨è§£ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª<code>åŒåçš„é™æ€æ–¹æ³•</code>æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span>@MethodSource
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testCapitalize(String input, String result) {
</span></span><span style="display:flex;"><span>    assertEquals(result, StringUtils.<span style="color:#007f7f">capitalize</span>(input));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> List&lt;Arguments&gt; testCapitalize() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> List.<span style="color:#007f7f">of</span>( <span style="color:#007f7f">// arguments:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Arguments.<span style="color:#007f7f">arguments</span>(<span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Abc&#34;</span>), <span style="color:#007f7f">//
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Arguments.<span style="color:#007f7f">arguments</span>(<span style="color:#0ff;font-weight:bold">&#34;APPLE&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>), <span style="color:#007f7f">//
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Arguments.<span style="color:#007f7f">arguments</span>(<span style="color:#0ff;font-weight:bold">&#34;gooD&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Good&#34;</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼šé™æ€æ–¹æ³•<code>testCapitalize()</code>è¿”å›äº†ä¸€ç»„æµ‹è¯•å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸¤ä¸ª<code>String</code>ï¼Œæ­£å¥½ä½œä¸ºæµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¼ å…¥ã€‚
æ³¨ï¼š å¦‚æœé™æ€æ–¹æ³•å’Œæµ‹è¯•æ–¹æ³•çš„åç§°ä¸åŒï¼Œ@MethodSourceä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•åã€‚ä½†ä½¿ç”¨é»˜è®¤åŒåæ–¹æ³•æœ€æ–¹ä¾¿ã€‚</p>
<p>å¦ä¸€ç§ä¼ å…¥æµ‹è¯•å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>@CsvSource</code>ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œï¼Œä¸€è¡ŒåŒ…å«çš„è‹¥å¹²å‚æ•°ç”¨<code>,</code>åˆ†éš”ï¼Œå› æ­¤ï¼Œä¸Šè¿°æµ‹è¯•åˆå¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span>@CsvSource({ <span style="color:#0ff;font-weight:bold">&#34;abc, Abc&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;APPLE, Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;gooD, Good&#34;</span> })
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testCapitalize(String input, String result) {
</span></span><span style="display:flex;"><span>    assertEquals(result, StringUtils.<span style="color:#007f7f">capitalize</span>(input));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæœ‰æˆç™¾ä¸Šåƒçš„æµ‹è¯•è¾“å…¥ï¼Œé‚£ä¹ˆï¼Œç›´æ¥å†™@CsvSourceå°±å¾ˆä¸æ–¹ä¾¿ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•æ•°æ®æåˆ°ä¸€ä¸ªç‹¬ç«‹çš„CSVæ–‡ä»¶ä¸­ï¼Œç„¶åæ ‡æ³¨ä¸Š@CsvFileSourceï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ParameterizedTest
</span></span><span style="display:flex;"><span>@CsvFileSource(resources = { <span style="color:#0ff;font-weight:bold">&#34;/test-capitalize.csv&#34;</span> })
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> testCapitalizeUsingCsvFile(String input, String result) {
</span></span><span style="display:flex;"><span>    assertEquals(result, StringUtils.<span style="color:#007f7f">capitalize</span>(input));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>JUnitåªåœ¨classpathä¸­æŸ¥æ‰¾æŒ‡å®šçš„CSVæ–‡ä»¶ï¼Œå› æ­¤ï¼Œ<code>test-capitalize.csv</code>è¿™ä¸ªæ–‡ä»¶è¦æ”¾åˆ°<code>test</code>ç›®å½•ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>apple, Apple
</span></span><span style="display:flex;"><span>HELLO, Hello
</span></span><span style="display:flex;"><span>JUnit, Junit
</span></span><span style="display:flex;"><span>reSource, Resource
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="displayname">@DisplayName<a hidden class="anchor" aria-hidden="true" href="#displayname">#</a></h1>
<p>@DisplayNameå¯ä»¥ç»™ æµ‹è¯•ç±» æˆ–è€… æµ‹è¯•æ–¹æ³•æ¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„åç§°ã€‚å¯ä»¥æ”¯æŒ ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦ï¼Œç”šè‡³æ˜¯ emojiã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.jupiter.api.DisplayName;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@DisplayName(<span style="color:#0ff;font-weight:bold">&#34;A special test case&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> DisplayNameTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    @DisplayName(<span style="color:#0ff;font-weight:bold">&#34;Custom test name containing spaces&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testWithDisplayNameContainingSpaces() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    @DisplayName(<span style="color:#0ff;font-weight:bold">&#34;â•¯Â°â–¡Â°ï¼‰â•¯&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testWithDisplayNameContainingSpecialCharacters() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    @DisplayName(<span style="color:#0ff;font-weight:bold">&#34;ğŸ˜±&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> testWithDisplayNameContainingEmoji() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="å†…åµŒæµ‹è¯•ç±»nested">å†…åµŒæµ‹è¯•ç±»ï¼š@Nested<a hidden class="anchor" aria-hidden="true" href="#å†…åµŒæµ‹è¯•ç±»nested">#</a></h1>
<p>å½“æˆ‘ä»¬ç¼–å†™çš„ç±»å’Œä»£ç é€æ¸å¢å¤šï¼Œéšä¹‹è€Œæ¥çš„éœ€è¦æµ‹è¯•çš„å¯¹åº”æµ‹è¯•ç±»ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚ä¸ºäº†è§£å†³æµ‹è¯•ç±»æ•°é‡çˆ†ç‚¸çš„é—®é¢˜ï¼ŒJUnit 5æä¾›äº†@Nested æ³¨è§£ï¼Œèƒ½å¤Ÿä»¥é™æ€å†…éƒ¨æˆå‘˜ç±»çš„å½¢å¼å¯¹æµ‹è¯•ç”¨ä¾‹ç±»è¿›è¡Œé€»è¾‘åˆ†ç»„ã€‚ å¹¶ä¸”æ¯ä¸ªé™æ€å†…éƒ¨ç±»éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œ è¿™äº›æ–¹æ³•å°†æŒ‰ä»å¤–åˆ°å†…å±‚æ¬¡é¡ºåºæ‰§è¡Œã€‚ æ­¤å¤–ï¼ŒåµŒå¥—çš„ç±»ä¹Ÿå¯ä»¥ç”¨@DisplayName æ ‡è®°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ­£ç¡®çš„æµ‹è¯•åç§°ã€‚ä¸‹é¢çœ‹ä¸‹ç®€å•çš„ç”¨æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@DisplayName(<span style="color:#0ff;font-weight:bold">&#34;å†…åµŒæµ‹è¯•ç±»&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NestUnitTest {
</span></span><span style="display:flex;"><span>    @BeforeEach
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> init() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰å‡†å¤‡&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Nested
</span></span><span style="display:flex;"><span>    @DisplayName(<span style="color:#0ff;font-weight:bold">&#34;ç¬¬ä¸€ä¸ªå†…åµŒæµ‹è¯•ç±»&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">class</span> FirstNestTest {
</span></span><span style="display:flex;"><span>        @Test
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">void</span> test() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¬¬ä¸€ä¸ªå†…åµŒæµ‹è¯•ç±»æ‰§è¡Œæµ‹è¯•&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Nested
</span></span><span style="display:flex;"><span>    @DisplayName(<span style="color:#0ff;font-weight:bold">&#34;ç¬¬äºŒä¸ªå†…åµŒæµ‹è¯•ç±»&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">class</span> SecondNestTest {
</span></span><span style="display:flex;"><span>        @Test
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">void</span> test() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¬¬äºŒä¸ªå†…åµŒæµ‹è¯•ç±»æ‰§è¡Œæµ‹è¯•&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="æ–°çš„æ–­è¨€">æ–°çš„æ–­è¨€<a hidden class="anchor" aria-hidden="true" href="#æ–°çš„æ–­è¨€">#</a></h1>
<p>åœ¨æ–­è¨€ API è®¾è®¡ä¸Šï¼ŒJUnit 5 è¿›è¡Œæ˜¾è‘—åœ°æ”¹è¿›ï¼Œå¹¶ä¸”å……åˆ†åˆ©ç”¨ Java 8 çš„æ–°ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯ Lambda è¡¨è¾¾å¼ï¼Œæœ€ç»ˆæä¾›äº†æ–°çš„æ–­è¨€ç±»: org.junit.jupiter.api.Assertions ã€‚è®¸å¤šæ–­è¨€æ–¹æ³•æ¥å— Lambda è¡¨è¾¾å¼å‚æ•°ï¼Œåœ¨æ–­è¨€æ¶ˆæ¯ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯å®ƒæ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œå¦‚æœæ¶ˆæ¯æ„é€ å¼€é”€å¾ˆå¤§ï¼Œè¿™æ ·åšä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥èŠ‚çœæ—¶é—´å’Œèµ„æºã€‚</p>
<h2 id="è¶…æ—¶æ“ä½œçš„æµ‹è¯•asserttimeoutpreemptively">è¶…æ—¶æ“ä½œçš„æµ‹è¯•ï¼šassertTimeoutPreemptively<a hidden class="anchor" aria-hidden="true" href="#è¶…æ—¶æ“ä½œçš„æµ‹è¯•asserttimeoutpreemptively">#</a></h2>
<p>å½“æˆ‘ä»¬å¸Œæœ›æµ‹è¯•è€—æ—¶æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸æƒ³è®©æµ‹è¯•æ–¹æ³•æ— é™åœ°ç­‰å¾…æ—¶ï¼Œå°±å¯ä»¥å¯¹æµ‹è¯•æ–¹æ³•è¿›è¡Œè¶…æ—¶æµ‹è¯•ï¼ŒJUnit 5 å¯¹æ­¤æ¨å‡ºäº†æ–­è¨€æ–¹æ³• assertTimeoutï¼Œæä¾›äº†å¯¹è¶…æ—¶çš„å¹¿æ³›æ”¯æŒã€‚
å‡è®¾æˆ‘ä»¬å¸Œæœ›æµ‹è¯•ä»£ç åœ¨ä¸€ç§’å†…æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥å†™å¦‚ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@DisplayName(<span style="color:#0ff;font-weight:bold">&#34;è¶…æ—¶æ–¹æ³•æµ‹è¯•&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> test_should_complete_in_one_second() {
</span></span><span style="display:flex;"><span>  Assertions.<span style="color:#007f7f">assertTimeoutPreemptively</span>(Duration.<span style="color:#007f7f">of</span>(<span style="color:#ff0;font-weight:bold">1</span>, ChronoUnit.<span style="color:#007f7f">SECONDS</span>), () -&gt; Thread.<span style="color:#007f7f">sleep</span>(<span style="color:#ff0;font-weight:bold">2000</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæµ‹è¯•è¿è¡Œå¤±è´¥ï¼Œå› ä¸ºä»£ç æ‰§è¡Œå°†ä¼‘çœ ä¸¤ç§’é’Ÿï¼Œè€Œæˆ‘ä»¬æœŸæœ›æµ‹è¯•ç”¨ä¾‹åœ¨ä¸€ç§’é’Ÿä¹‹å†…æˆåŠŸã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠä¼‘çœ æ—¶é—´è®¾ç½®ä¸€ç§’é’Ÿï¼Œæµ‹è¯•ä»ç„¶ä¼šå‡ºç°å¶å°”å¤±è´¥çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºæµ‹è¯•æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­é™¤äº†ç›®æ ‡ä»£ç è¿˜æœ‰é¢å¤–çš„ä»£ç å’ŒæŒ‡ä»¤æ‰§è¡Œä¼šè€—æ—¶ï¼Œæ‰€ä»¥åœ¨è¶…æ—¶é™åˆ¶ä¸Šæ— æ³•åšåˆ°å¯¹æ—¶é—´å‚æ•°çš„å®Œå…¨ç²¾ç¡®åŒ¹é…ã€‚</p>
<h2 id="å¼‚å¸¸æµ‹è¯•assertthrows-1">å¼‚å¸¸æµ‹è¯•ï¼šassertThrows<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸æµ‹è¯•assertthrows-1">#</a></h2>
<p>æˆ‘ä»¬ä»£ç ä¸­å¯¹äºå¸¦æœ‰å¼‚å¸¸çš„æ–¹æ³•é€šå¸¸éƒ½æ˜¯ä½¿ç”¨ try-catch æ–¹å¼æ•è·å¤„ç†ï¼Œé’ˆå¯¹æµ‹è¯•è¿™æ ·å¸¦æœ‰å¼‚å¸¸æŠ›å‡ºçš„ä»£ç ï¼Œè€Œ JUnit 5 æä¾›æ–¹æ³• <code>Assertions#assertThrows(Class&lt;T&gt;, Executable)</code> æ¥è¿›è¡Œæµ‹è¯•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¼‚å¸¸ç±»å‹ï¼Œç¬¬äºŒä¸ªä¸ºå‡½æ•°å¼æ¥å£å‚æ•°ï¼Œè·Ÿ Runnable æ¥å£ç›¸ä¼¼ï¼Œä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›ï¼Œå¹¶ä¸”æ”¯æŒ Lambdaè¡¨è¾¾å¼æ–¹å¼ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¯å‚è€ƒä¸‹æ–¹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span>@DisplayName(<span style="color:#0ff;font-weight:bold">&#34;æµ‹è¯•æ•è·çš„å¼‚å¸¸&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> assertThrowsException() {
</span></span><span style="display:flex;"><span>  String str = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>  Assertions.<span style="color:#007f7f">assertThrows</span>(IllegalArgumentException.<span style="color:#007f7f">class</span>, () -&gt; {
</span></span><span style="display:flex;"><span>    Integer.<span style="color:#007f7f">valueOf</span>(str);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“Lambdaè¡¨è¾¾å¼ä¸­ä»£ç å‡ºç°çš„å¼‚å¸¸ä¼šè·Ÿé¦–ä¸ªå‚æ•°çš„å¼‚å¸¸ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸å±äºåŒä¸€ç±»å¼‚å¸¸ï¼Œå°±ä¼šæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ç±»ä¼¼çš„æç¤ºï¼š
<code>org.opentest4j.AssertionFailedError: Unexpected exception type thrown ==&gt; expected: &lt;IllegalArgumentException&gt; but was: &lt;...Exception&gt;</code></p>
<h1 id="spring-boot-ä¸­ä½¿ç”¨junit5">spring boot ä¸­ä½¿ç”¨junit5<a hidden class="anchor" aria-hidden="true" href="#spring-boot-ä¸­ä½¿ç”¨junit5">#</a></h1>
<p><a href="https://blog.csdn.net/qq_36688143/article/details/97393949">å‚è€ƒ</a></p>
<p>spring boot é¡¹ç›®æ˜¯è‡ªå¸¦æµ‹è¯•æ¨¡å—çš„ï¼Œä¸”spring boot 2.2ä¹‹åçš„ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯junit 5ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>spring-boot-starter-teståŒ…å«ä»¥ä¸‹å‡ ä¸ªåº“</p>
<ul>
<li>JUnit</li>
<li>Spring Test &amp; Spring Boot Test</li>
<li>AssertJ</li>
<li>Hamcrest</li>
<li>Mockito</li>
<li>JSONassert</li>
<li>JsonPath</li>
</ul>
<p>å·¥ç¨‹åˆ›å»ºå¥½ä¹‹åè‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªæµ‹è¯•ç±»ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.boot.test.context.SpringBootTest;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@SpringBootTest
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> SpringBootJunit5ApplicationTests {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> contextLoads() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæµ‹è¯•ç±»çš„ä½œç”¨æ˜¯æ£€æŸ¥åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ˜¯å¦å¯æ­£å¸¸å¯åŠ¨ã€‚
@SpringBootTest æ³¨è§£å‘Šè¯‰ Spring Boot æŸ¥æ‰¾å¸¦ @SpringBootApplication æ³¨è§£çš„ä¸»é…ç½®ç±»ï¼Œå¹¶ä½¿ç”¨è¯¥ç±»å¯åŠ¨ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ã€‚</p>
<h1 id="junit5å’Œjunit4æ³¨è§£çš„åŒºåˆ«">Junit5å’ŒJunit4ï¼Œæ³¨è§£çš„åŒºåˆ«<a hidden class="anchor" aria-hidden="true" href="#junit5å’Œjunit4æ³¨è§£çš„åŒºåˆ«">#</a></h1>
<table>
<thead>
<tr>
<th>JUnit4</th>
<th>JUnit5</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Test</td>
<td>@Test</td>
<td>è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚JUnit5ä¸JUnit 4çš„@Testæ³¨è§£ä¸åŒçš„æ˜¯ï¼Œå®ƒæ²¡æœ‰å£°æ˜ä»»ä½•å±æ€§ï¼Œå› ä¸ºJUnit Jupiterä¸­çš„æµ‹è¯•æ‰©å±•æ˜¯åŸºäºå®ƒä»¬è‡ªå·±çš„ä¸“ç”¨æ³¨è§£æ¥å®Œæˆçš„ã€‚è¿™æ ·çš„æ–¹æ³•ä¼šè¢«ç»§æ‰¿ï¼Œé™¤éå®ƒä»¬è¢«è¦†ç›–</td>
</tr>
<tr>
<td>@BeforeClass</td>
<td>@BeforeAll</td>
<td>è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ‰€æœ‰ä½¿ç”¨äº†@Test @RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å‰ æ‰§è¡Œï¼›</td>
</tr>
<tr>
<td>@AfterClass</td>
<td>@AfterAll</td>
<td>è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ‰€æœ‰ä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹åæ‰§è¡Œï¼›</td>
</tr>
<tr>
<td>@Before</td>
<td>@BeforeEach</td>
<td>è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ¯ä¸€ä¸ªä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å‰ æ‰§è¡Œ</td>
</tr>
<tr>
<td>@After</td>
<td>@AfterEach</td>
<td>è¡¨ç¤ºä½¿ç”¨äº†è¯¥æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨å½“å‰ç±»ä¸­æ¯ä¸€ä¸ªä½¿ç”¨äº†@Testã€@RepeatedTestã€@ParameterizedTestæˆ–è€…@TestFactoryæ³¨è§£çš„æ–¹æ³•ä¹‹å æ‰§è¡Œ</td>
</tr>
<tr>
<td>@Ignore</td>
<td>@Disabled</td>
<td>ç”¨äºç¦ç”¨ä¸€ä¸ªæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•</td>
</tr>
<tr>
<td>@Category</td>
<td>@Tag</td>
<td>ç”¨äºå£°æ˜è¿‡æ»¤æµ‹è¯•çš„tagsï¼Œè¯¥æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•æˆ–ç±»ä¸Šï¼›ç±»ä¼¼äºTesgNGçš„æµ‹è¯•ç»„æˆ–JUnit 4çš„åˆ†ç±»ã€‚</td>
</tr>
<tr>
<td>@Parameters</td>
<td>@ParameterizedTest</td>
<td>è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªå‚æ•°åŒ–æµ‹è¯•</td>
</tr>
<tr>
<td>@RunWith</td>
<td>@ExtendWith</td>
<td>@Runwithå°±æ˜¯æ”¾åœ¨æµ‹è¯•ç±»åä¹‹å‰ï¼Œç”¨æ¥ç¡®å®šè¿™ä¸ªç±»æ€ä¹ˆè¿è¡Œçš„</td>
</tr>
<tr>
<td>@Rule</td>
<td>@ExtendWith</td>
<td>Ruleæ˜¯ä¸€ç»„å®ç°äº†TestRuleæ¥å£çš„å…±äº«ç±»ï¼Œæä¾›äº†éªŒè¯ã€ç›‘è§†TestCaseå’Œå¤–éƒ¨èµ„æºç®¡ç†ç­‰èƒ½åŠ›</td>
</tr>
<tr>
<td>@ClassRule</td>
<td>@ExtendWith</td>
<td>@ClassRuleç”¨äºæµ‹è¯•ç±»ä¸­çš„é™æ€å˜é‡ï¼Œå¿…é¡»æ˜¯TestRuleæ¥å£çš„å®ä¾‹ï¼Œä¸”è®¿é—®ä¿®é¥°ç¬¦å¿…é¡»ä¸ºpublicã€‚</td>
</tr>
</tbody>
</table>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/java%E5%9F%BA%E7%A1%80/">javaåŸºç¡€</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E6%AD%A3%E5%88%99/">
    <span class="title">Â« Prev</span>
    <br>
    <span>æ­£åˆ™</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/java%E6%97%B6%E9%97%B4/">
    <span class="title">Next Â»</span>
    <br>
    <span>javaæ—¶é—´</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Wjy&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>