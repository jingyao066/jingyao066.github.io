<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>å¼‚å¸¸ | Wjy&#39;s Blog</title>
<meta name="keywords" content="javaåŸºç¡€">
<meta name="description" content="Javaå¼‚å¸¸ç®€ä»‹
Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%BC%82%E5%B8%B8/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="å¼‚å¸¸" />
<meta property="og:description" content="Javaå¼‚å¸¸ç®€ä»‹
Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%BC%82%E5%B8%B8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T17:46:43+00:00" />
<meta property="article:modified_time" content="2022-08-04T17:46:43+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¼‚å¸¸"/>
<meta name="twitter:description" content="Javaå¼‚å¸¸ç®€ä»‹
Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "å¼‚å¸¸",
      "item": "http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%BC%82%E5%B8%B8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "å¼‚å¸¸",
  "name": "å¼‚å¸¸",
  "description": "Javaå¼‚å¸¸ç®€ä»‹ Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚\n",
  "keywords": [
    "javaåŸºç¡€"
  ],
  "articleBody": "Javaå¼‚å¸¸ç®€ä»‹ Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚\nå…¶ä»–å‚è€ƒ\nåœ¨æœ‰æ•ˆä½¿ç”¨å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œå¼‚å¸¸èƒ½æ¸…æ™°çš„å›ç­”whatã€whereã€whyè¿™3ä¸ªé—®é¢˜ï¼šå¼‚å¸¸ç±»å‹å›ç­”äº†â€œä»€ä¹ˆâ€è¢«æŠ›å‡ºï¼Œå¼‚å¸¸å †æ ˆè·Ÿè¸ªå›ç­”äº†â€œåœ¨å“ªâ€œæŠ›å‡ºï¼Œå¼‚å¸¸ä¿¡æ¯å›ç­”äº†â€œä¸ºä»€ä¹ˆâ€œä¼šæŠ›å‡ºã€‚\nJavaå¼‚å¸¸æœºåˆ¶ç”¨åˆ°çš„å‡ ä¸ªå…³é”®å­—ï¼štryã€catchã€finallyã€throwã€throwsã€‚\ntryï¼šç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ç ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚ catchï¼šç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚ finallyï¼šfinallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„ç‰©ç†èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶ã€‚åªæœ‰finallyå—æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰ä¼šå›æ¥æ‰§è¡Œtryæˆ–è€…catchå—ä¸­çš„returnæˆ–è€…throwè¯­å¥ï¼Œå¦‚æœfinallyä¸­ä½¿ç”¨äº†returnæˆ–è€…throwç­‰ç»ˆæ­¢æ–¹æ³•çš„è¯­å¥ï¼Œåˆ™å°±ä¸ä¼šè·³å›æ‰§è¡Œï¼Œç›´æ¥åœæ­¢ã€‚ throwï¼šç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚ throwsï¼šç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚ åœ¨è®¡ç®—æœºç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼šå‡ºç°å„ç§å„æ ·çš„é”™è¯¯ã€‚ æœ‰ä¸€äº›é”™è¯¯æ˜¯ç”¨æˆ·é€ æˆçš„ï¼Œæ¯”å¦‚ï¼Œå¸Œæœ›ç”¨æˆ·è¾“å…¥ä¸€ä¸ªintç±»å‹çš„å¹´é¾„ï¼Œä½†æ˜¯ç”¨æˆ·çš„è¾“å…¥æ˜¯abcï¼š\n1 2 3 // å‡è®¾ç”¨æˆ·è¾“å…¥äº†abcï¼š String s = \"abc\"; int n = Integer.parseInt(s); // NumberFormatException! ç¨‹åºæƒ³è¦è¯»å†™æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä½†æ˜¯ç”¨æˆ·å·²ç»æŠŠå®ƒåˆ é™¤äº†ï¼š\n1 2 // ç”¨æˆ·åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼š String t = readFile(\"C:\\\\abc.txt\"); // FileNotFoundException! è¿˜æœ‰ä¸€äº›é”™è¯¯æ˜¯éšæœºå‡ºç°ï¼Œå¹¶ä¸”æ°¸è¿œä¸å¯èƒ½é¿å…çš„ã€‚æ¯”å¦‚ï¼š\nç½‘ç»œçªç„¶æ–­äº†ï¼Œè¿æ¥ä¸åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼› å†…å­˜è€—å°½ï¼Œç¨‹åºå´©æºƒäº†ï¼› ç”¨æˆ·ç‚¹â€œæ‰“å°â€ï¼Œä½†æ ¹æœ¬æ²¡æœ‰æ‰“å°æœºï¼› æ‰€ä»¥ï¼Œä¸€ä¸ªå¥å£®çš„ç¨‹åºå¿…é¡»å¤„ç†å„ç§å„æ ·çš„é”™è¯¯ã€‚ æ‰€è°“é”™è¯¯ï¼Œå°±æ˜¯ç¨‹åºè°ƒç”¨æŸä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±è¡¨ç¤ºå‡ºé”™ã€‚ è°ƒç”¨æ–¹å¦‚ä½•è·çŸ¥è°ƒç”¨å¤±è´¥çš„ä¿¡æ¯ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•ï¼š æ–¹æ³•ä¸€ï¼šçº¦å®šè¿”å›é”™è¯¯ç ã€‚ ä¾‹å¦‚ï¼Œå¤„ç†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºæˆåŠŸï¼Œè¿”å›å…¶ä»–æ•´æ•°ï¼Œè¡¨ç¤ºçº¦å®šçš„é”™è¯¯ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 int code = processFile(\"C:\\\\test.txt\"); if (code == 0) { // ok: } else { // error: switch (code) { case 1: // file not found: case 2: // no read permission: default: // unknown error: } } å› ä¸ºä½¿ç”¨intç±»å‹çš„é”™è¯¯ç ï¼Œæƒ³è¦å¤„ç†å°±éå¸¸éº»çƒ¦ã€‚è¿™ç§æ–¹å¼å¸¸è§äºåº•å±‚Cå‡½æ•°ã€‚ æ–¹æ³•äºŒï¼šåœ¨è¯­è¨€å±‚é¢ä¸Šæä¾›ä¸€ä¸ªå¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚Javaå†…ç½®äº†ä¸€å¥—å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ€»æ˜¯ä½¿ç”¨å¼‚å¸¸æ¥è¡¨ç¤ºé”™è¯¯ã€‚ å¼‚å¸¸æ˜¯ä¸€ç§classï¼Œå› æ­¤å®ƒæœ¬èº«å¸¦æœ‰ç±»å‹ä¿¡æ¯ã€‚å¼‚å¸¸å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºï¼Œä½†åªéœ€è¦åœ¨ä¸Šå±‚æ•è·ï¼Œè¿™æ ·å°±å’Œæ–¹æ³•è°ƒç”¨åˆ†ç¦»äº†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 try { String s = processFile(\"C:\\\\test.txt\"); // ok: } catch (FileNotFoundException e) { // file not found: } catch (SecurityException e) { // no read permission: } catch (IOException e) { // io error: } catch (Exception e) { // other error: } å› ä¸ºJavaçš„å¼‚å¸¸æ˜¯classï¼Œå®ƒçš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Object â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Throwable â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Error â”‚ â”‚ Exception â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â–² â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚OutOfMemoryError â”‚... â”‚RuntimeException â”‚â”‚IOExceptionâ”‚... â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚NullPointerException â”‚ â”‚IllegalArgumentException â”‚... â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä»ç»§æ‰¿å…³ç³»å¯çŸ¥ï¼šThrowableæ˜¯å¼‚å¸¸ä½“ç³»çš„æ ¹ï¼Œå®ƒç»§æ‰¿è‡ªObjectã€‚ Throwableæœ‰ä¸¤ä¸ªä½“ç³»ï¼šErrorå’ŒExceptionï¼ŒErrorè¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼Œç¨‹åºå¯¹æ­¤ä¸€èˆ¬æ— èƒ½ä¸ºåŠ›ï¼Œä¾‹å¦‚ï¼š\nOutOfMemoryErrorï¼šå†…å­˜è€—å°½ NoClassDefFoundErrorï¼šæ— æ³•åŠ è½½æŸä¸ªClass StackOverflowErrorï¼šæ ˆæº¢å‡º è€ŒExceptionåˆ™æ˜¯è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œå®ƒå¯ä»¥è¢«æ•è·å¹¶å¤„ç†ã€‚ æŸäº›å¼‚å¸¸æ˜¯åº”ç”¨ç¨‹åºé€»è¾‘å¤„ç†çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥æ•è·å¹¶å¤„ç†ã€‚ä¾‹å¦‚ï¼š\nNumberFormatExceptionï¼šæ•°å€¼ç±»å‹çš„æ ¼å¼é”™è¯¯ FileNotFoundExceptionï¼šæœªæ‰¾åˆ°æ–‡ä»¶ SocketExceptionï¼šè¯»å–ç½‘ç»œå¤±è´¥ è¿˜æœ‰ä¸€äº›å¼‚å¸¸æ˜¯ç¨‹åºé€»è¾‘ç¼–å†™ä¸å¯¹é€ æˆçš„ï¼Œåº”è¯¥ä¿®å¤ç¨‹åºæœ¬èº«ã€‚ä¾‹å¦‚ï¼š\nNullPointerExceptionï¼šå¯¹æŸä¸ªnullçš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æˆ–å­—æ®µ IndexOutOfBoundsExceptionï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ Exceptionåˆåˆ†ä¸ºä¸¤å¤§ç±»ï¼š\nRuntimeExceptionä»¥åŠå®ƒçš„å­ç±»ï¼› éRuntimeExceptionï¼ˆåŒ…æ‹¬IOExceptionã€ReflectiveOperationExceptionç­‰ç­‰ï¼‰ Javaè§„å®šï¼š\nå¿…é¡»æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ExceptionåŠå…¶å­ç±»ï¼Œä½†ä¸åŒ…æ‹¬RuntimeExceptionåŠå…¶å­ç±»ï¼Œè¿™ç§ç±»å‹çš„å¼‚å¸¸ç§°ä¸ºChecked Exceptionã€‚ ä¸éœ€è¦æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ErroråŠå…¶å­ç±»ï¼ŒRuntimeExceptionåŠå…¶å­ç±»ã€‚ æ³¨æ„ï¼šç¼–è¯‘å™¨å¯¹RuntimeExceptionåŠå…¶å­ç±»ä¸åšå¼ºåˆ¶æ•è·è¦æ±‚ï¼Œä¸æ˜¯æŒ‡åº”ç”¨ç¨‹åºæœ¬èº«ä¸åº”è¯¥æ•è·å¹¶å¤„ç†RuntimeExceptionã€‚æ˜¯å¦éœ€è¦æ•è·ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚\nJavaå°†å¯æŠ›å‡º(Throwable)çš„ç»“æ„åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š è¢«æ£€æŸ¥çš„å¼‚å¸¸(Checked Exception) è¿è¡Œæ—¶å¼‚å¸¸(RuntimeException) é”™è¯¯(Error)\nè¿è¡Œæ—¶å¼‚å¸¸ å®šä¹‰ï¼šRuntimeExceptionåŠå…¶å­ç±»éƒ½è¢«ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚ ç‰¹ç‚¹ï¼šJavaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¨‹åºä¸­å¯èƒ½å‡ºç°è¿™ç±»å¼‚å¸¸æ—¶ï¼Œå€˜è‹¥æ—¢æ²¡æœ‰é€šè¿‡throwså£°æ˜æŠ›å‡ºå®ƒï¼Œä¹Ÿæ²¡æœ‰ç”¨try-catchè¯­å¥æ•è·å®ƒï¼Œè¿˜æ˜¯ä¼šç¼–è¯‘é€šè¿‡ã€‚ä¾‹å¦‚ï¼Œé™¤æ•°ä¸ºé›¶æ—¶äº§ç”Ÿçš„ArithmeticExceptionå¼‚å¸¸ï¼Œæ•°ç»„è¶Šç•Œæ—¶äº§ç”Ÿçš„ IndexOutOfBoundsException å¼‚å¸¸ï¼Œfail-failæœºåˆ¶äº§ç”Ÿçš„ConcurrentModificationExceptionå¼‚å¸¸ç­‰ï¼Œéƒ½å±äºè¿è¡Œæ—¶å¼‚å¸¸ã€‚è™½ç„¶Javaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡try-catchå¯¹å®ƒè¿›è¡Œæ•è·å¤„ç†ã€‚å¦‚æœäº§ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆ™éœ€è¦é€šè¿‡ä¿®æ”¹ä»£ç æ¥è¿›è¡Œé¿å…ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¼šå‘ç”Ÿé™¤æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç é¿å…è¯¥æƒ…å†µçš„å‘ç”Ÿã€‚\nè¢«æ£€æŸ¥çš„å¼‚å¸¸ å®šä¹‰ï¼šException ç±»æœ¬èº«ï¼Œä»¥åŠExceptionçš„å­ç±»ä¸­é™¤äº†è¿è¡Œæ—¶å¼‚å¸¸ä¹‹å¤–çš„å…¶å®ƒå­ç±»éƒ½å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚ç‰¹ç‚¹ï¼šJavaç¼–è¯‘å™¨ä¼šæ£€æŸ¥å®ƒã€‚æ­¤ç±»å¼‚å¸¸ï¼Œè¦ä¹ˆé€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œè¦ä¹ˆé€šè¿‡try-catchè¿›è¡Œæ•è·å¤„ç†ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼ŒCloneNotSupportedException å°±å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚å½“é€šè¿‡clone()æ¥å£å»å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¯¥å¯¹è±¡å¯¹åº”çš„ç±»æ²¡æœ‰å®ç°Cloneableæ¥å£ï¼Œå°±ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ã€‚è¢«æ£€æŸ¥å¼‚å¸¸é€šå¸¸éƒ½æ˜¯å¯ä»¥æ¢å¤çš„ã€‚\né”™è¯¯ å®šä¹‰ï¼šErrorç±»åŠå…¶å­ç±»ã€‚ ç‰¹ç‚¹ï¼šå’Œè¿è¡Œæ—¶å¼‚å¸¸ä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå¯¹é”™è¯¯è¿›è¡Œæ£€æŸ¥ã€‚ å½“èµ„æºä¸è¶³ã€çº¦æŸå¤±è´¥ã€æˆ–æ˜¯å…¶å®ƒç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œçš„æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œå°±äº§ç”Ÿé”™è¯¯ã€‚ç¨‹åºæœ¬èº«æ— æ³•ä¿®å¤è¿™äº›é”™è¯¯çš„ã€‚ä¾‹å¦‚ï¼ŒVirtualMachineError å°±å±äºé”™è¯¯ã€‚æŒ‰ç…§Javaæƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ˜¯ä¸åº”è¯¥æ˜¯å®ç°ä»»ä½•æ–°çš„Errorå­ç±»çš„ã€‚\nå¯¹äºä¸Šé¢çš„3ç§ç»“æ„ï¼Œæˆ‘ä»¬åœ¨æŠ›å‡ºå¼‚å¸¸æˆ–é”™è¯¯æ—¶ï¼Œåˆ°åº•è¯¥å“ªä¸€ç§ï¼Ÿ ã€ŠEffective Javaã€‹ä¸­ç»™å‡ºçš„å»ºè®®æ˜¯ï¼šå¯¹äºå¯ä»¥æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ã€‚\næ•è·å¼‚å¸¸ æ•è·å¼‚å¸¸ä½¿ç”¨tryâ€¦catchè¯­å¥ï¼ŒæŠŠå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç æ”¾åˆ°try {â€¦}ä¸­ï¼Œç„¶åä½¿ç”¨catchæ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Main { public static void main(String[] args) { byte[] bs = toGBK(\"ä¸­æ–‡\"); System.out.println(Arrays.toString(bs)); } static byte[] toGBK(String s) { try { // ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]: return s.getBytes(\"GBK\"); } catch (UnsupportedEncodingException e) { // å¦‚æœç³»ç»Ÿä¸æ”¯æŒGBKç¼–ç ï¼Œä¼šæ•è·åˆ°UnsupportedEncodingException: System.out.println(e); // æ‰“å°å¼‚å¸¸ä¿¡æ¯ return s.getBytes(); // å°è¯•ä½¿ç”¨ç”¨é»˜è®¤ç¼–ç  } } } å¦‚æœæˆ‘ä»¬ä¸æ•è·UnsupportedEncodingExceptionï¼Œä¼šå‡ºç°ç¼–è¯‘å¤±è´¥çš„é—®é¢˜ï¼š\n1 2 3 4 5 6 7 8 9 10 public class Main { public static void main(String[] args) { byte[] bs = toGBK(\"ä¸­æ–‡\"); System.out.println(Arrays.toString(bs)); } static byte[] toGBK(String s) { return s.getBytes(\"GBK\"); } } ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯ç±»ä¼¼ï¼šunreported exception UnsupportedEncodingException; must be caught or declared to be thrownï¼Œå¹¶ä¸”å‡†ç¡®åœ°æŒ‡å‡ºéœ€è¦æ•è·çš„è¯­å¥æ˜¯return s.getBytes(\"GBK\");ã€‚æ„æ€æ˜¯è¯´ï¼ŒåƒUnsupportedEncodingExceptionè¿™æ ·çš„Checked Exceptionï¼Œå¿…é¡»è¢«æ•è·ã€‚ è¿™æ˜¯å› ä¸ºString.getBytes(String)æ–¹æ³•å®šä¹‰æ˜¯ï¼š\n1 2 3 public byte[] getBytes(String charsetName) throws UnsupportedEncodingException { ... } åœ¨æ–¹æ³•å®šä¹‰çš„æ—¶å€™ï¼Œä½¿ç”¨throws Xxxè¡¨ç¤ºè¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚è°ƒç”¨æ–¹åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡»å¼ºåˆ¶æ•è·è¿™äº›å¼‚å¸¸ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ åœ¨toGBK()æ–¹æ³•ä¸­ï¼Œå› ä¸ºè°ƒç”¨äº†String.getBytes(String)æ–¹æ³•ï¼Œå°±å¿…é¡»æ•è·UnsupportedEncodingExceptionã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸æ•è·å®ƒï¼Œè€Œæ˜¯åœ¨æ–¹æ³•å®šä¹‰å¤„ç”¨throwsè¡¨ç¤ºtoGBK()æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºUnsupportedEncodingExceptionï¼Œå°±å¯ä»¥è®©toGBK()æ–¹æ³•é€šè¿‡ç¼–è¯‘å™¨æ£€æŸ¥ï¼š\n1 2 3 4 5 6 7 8 9 10 public class Main { public static void main(String[] args) { byte[] bs = toGBK(\"ä¸­æ–‡\"); System.out.println(Arrays.toString(bs)); } static byte[] toGBK(String s) throws UnsupportedEncodingException { return s.getBytes(\"GBK\"); } } ä¸Šè¿°ä»£ç ä»ç„¶ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ï¼Œä½†è¿™ä¸€æ¬¡ï¼Œç¼–è¯‘å™¨æç¤ºçš„ä¸æ˜¯è°ƒç”¨return s.getBytes(\"GBK\");çš„é—®é¢˜ï¼Œè€Œæ˜¯byte[] bs = toGBK(\"ä¸­æ–‡\");ã€‚å› ä¸ºåœ¨main()æ–¹æ³•ä¸­ï¼Œè°ƒç”¨toGBK()ï¼Œæ²¡æœ‰æ•è·å®ƒå£°æ˜çš„å¯èƒ½æŠ›å‡ºçš„UnsupportedEncodingExceptionã€‚ ä¿®å¤æ–¹æ³•æ˜¯åœ¨main()æ–¹æ³•ä¸­æ•è·å¼‚å¸¸å¹¶å¤„ç†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Main { public static void main(String[] args) { try { byte[] bs = toGBK(\"ä¸­æ–‡\"); System.out.println(Arrays.toString(bs)); } catch (UnsupportedEncodingException e) { System.out.println(e); } } static byte[] toGBK(String s) throws UnsupportedEncodingException { // ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]: return s.getBytes(\"GBK\"); } } å¯è§ï¼Œåªè¦æ˜¯æ–¹æ³•å£°æ˜çš„Checked Exceptionï¼Œä¸åœ¨è°ƒç”¨å±‚æ•è·ï¼Œä¹Ÿå¿…é¡»åœ¨æ›´é«˜çš„è°ƒç”¨å±‚æ•è·ã€‚æ‰€æœ‰æœªæ•è·çš„å¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿå¿…é¡»åœ¨main()æ–¹æ³•ä¸­æ•è·ï¼Œä¸ä¼šå‡ºç°æ¼å†™tryçš„æƒ…å†µã€‚è¿™æ˜¯ç”±ç¼–è¯‘å™¨ä¿è¯çš„ã€‚main()æ–¹æ³•ä¹Ÿæ˜¯æœ€åæ•è·Exceptionçš„æœºä¼šã€‚\nå¦‚æœæ˜¯æµ‹è¯•ä»£ç ï¼Œä¸Šé¢çš„å†™æ³•å°±ç•¥æ˜¾éº»çƒ¦ã€‚å¦‚æœä¸æƒ³å†™ä»»ä½•tryä»£ç ï¼Œå¯ä»¥ç›´æ¥æŠŠmain()æ–¹æ³•å®šä¹‰ä¸ºthrows Exceptionï¼š\n1 2 3 4 5 6 7 8 9 10 11 public class Main { public static void main(String[] args) throws Exception { byte[] bs = toGBK(\"ä¸­æ–‡\"); System.out.println(Arrays.toString(bs)); } static byte[] toGBK(String s) throws UnsupportedEncodingException { // ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]: return s.getBytes(\"GBK\"); } } å› ä¸ºmain()æ–¹æ³•å£°æ˜äº†å¯èƒ½æŠ›å‡ºExceptionï¼Œä¹Ÿå°±å£°æ˜äº†å¯èƒ½æŠ›å‡ºæ‰€æœ‰çš„Exceptionï¼Œå› æ­¤åœ¨å†…éƒ¨å°±æ— éœ€æ•è·äº†ã€‚ä»£ä»·å°±æ˜¯ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œç¨‹åºä¼šç«‹åˆ»é€€å‡ºã€‚ è¿˜æœ‰ä¸€äº›ç«¥é‹å–œæ¬¢åœ¨toGBK()å†…éƒ¨â€œæ¶ˆåŒ–â€å¼‚å¸¸ã€‚\n1 2 3 4 5 6 7 static byte[] toGBK(String s) { try { return s.getBytes(\"GBK\"); } catch (UnsupportedEncodingException e) { // ä»€ä¹ˆä¹Ÿä¸å¹² } return null; è¿™ç§æ•è·åä¸å¤„ç†çš„æ–¹å¼æ˜¯éå¸¸ä¸å¥½çš„ï¼Œå³ä½¿çœŸçš„ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œä¹Ÿè¦å…ˆæŠŠå¼‚å¸¸è®°å½•ä¸‹æ¥ï¼š\n1 2 3 4 5 6 7 8 static byte[] toGBK(String s) { try { return s.getBytes(\"GBK\"); } catch (UnsupportedEncodingException e) { // å…ˆè®°ä¸‹æ¥å†è¯´: e.printStackTrace(); } return null; æ‰€æœ‰å¼‚å¸¸éƒ½å¯ä»¥è°ƒç”¨printStackTrace()æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•æœ‰ç”¨çš„å¿«é€Ÿæ‰“å°å¼‚å¸¸çš„æ–¹æ³•ã€‚\nåœ¨Javaä¸­ï¼Œå‡¡æ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨try â€¦ catchæ•è·ã€‚æŠŠå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„è¯­å¥æ”¾åœ¨try { â€¦ }ä¸­ï¼Œç„¶åä½¿ç”¨catchæ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ã€‚\nå¯ä»¥ä½¿ç”¨å¤šä¸ªcatchè¯­å¥ï¼Œæ¯ä¸ªcatchåˆ†åˆ«æ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ã€‚JVMåœ¨æ•è·åˆ°å¼‚å¸¸åï¼Œä¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…catchè¯­å¥ï¼ŒåŒ¹é…åˆ°æŸä¸ªcatchåï¼Œæ‰§è¡Œcatchä»£ç å—ï¼Œç„¶åä¸å†ç»§ç»­åŒ¹é…ã€‚\nç®€å•åœ°è¯´å°±æ˜¯ï¼šå¤šä¸ªcatchè¯­å¥åªæœ‰ä¸€ä¸ªèƒ½è¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (IOException e) { System.out.println(e); } catch (NumberFormatException e) { System.out.println(e); } } å­˜åœ¨å¤šä¸ªcatchçš„æ—¶å€™ï¼Œcatchçš„é¡ºåºéå¸¸é‡è¦ï¼šå­ç±»å¿…é¡»å†™åœ¨å‰é¢ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (IOException e) { System.out.println(\"IO error\"); } catch (UnsupportedEncodingException e) { // æ°¸è¿œæ•è·ä¸åˆ° System.out.println(\"Bad encoding\"); } } å¯¹äºä¸Šé¢çš„ä»£ç ï¼ŒUnsupportedEncodingExceptionå¼‚å¸¸æ˜¯æ°¸è¿œæ•è·ä¸åˆ°çš„ï¼Œå› ä¸ºå®ƒæ˜¯IOExceptionçš„å­ç±»ã€‚å½“æŠ›å‡ºUnsupportedEncodingExceptionå¼‚å¸¸æ—¶ï¼Œä¼šè¢«catch (IOException e) { ... }æ•è·å¹¶æ‰§è¡Œã€‚å› æ­¤ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯æŠŠå­ç±»æ”¾åˆ°å‰é¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (UnsupportedEncodingException e) { System.out.println(\"Bad encoding\"); } catch (IOException e) { System.out.println(\"IO error\"); } } finallyè¯­å¥ æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œå¦‚æœæˆ‘ä»¬éƒ½å¸Œæœ›æ‰§è¡Œä¸€äº›è¯­å¥ï¼Œä¾‹å¦‚æ¸…ç†å·¥ä½œï¼Œæ€ä¹ˆå†™ï¼Ÿ å¯ä»¥æŠŠæ‰§è¡Œè¯­å¥å†™è‹¥å¹²éï¼šæ­£å¸¸æ‰§è¡Œçš„æ”¾åˆ°tryä¸­ï¼Œæ¯ä¸ªcatchå†å†™ä¸€éã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public static void main(String[] args) { try { process1(); process2(); process3(); System.out.println(\"END\"); } catch (UnsupportedEncodingException e) { System.out.println(\"Bad encoding\"); System.out.println(\"END\"); } catch (IOException e) { System.out.println(\"IO error\"); System.out.println(\"END\"); } } ä¸Šè¿°ä»£ç æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡ŒSystem.out.println(\"END\");è¿™æ¡è¯­å¥ã€‚ é‚£ä¹ˆå¦‚ä½•æ¶ˆé™¤è¿™äº›é‡å¤çš„ä»£ç ï¼ŸJavaçš„try â€¦ catchæœºåˆ¶è¿˜æä¾›äº†finallyè¯­å¥ï¼Œfinallyè¯­å¥å—ä¿è¯æœ‰æ— é”™è¯¯éƒ½ä¼šæ‰§è¡Œã€‚ä¸Šè¿°ä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (UnsupportedEncodingException e) { System.out.println(\"Bad encoding\"); } catch (IOException e) { System.out.println(\"IO error\"); } finally { System.out.println(\"END\"); } } æ³¨æ„finallyæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š\nfinallyè¯­å¥ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯å†™å¯ä¸å†™ï¼› finallyæ€»æ˜¯æœ€åæ‰§è¡Œã€‚ å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œå°±æ­£å¸¸æ‰§è¡Œtry { â€¦ }è¯­å¥å—ï¼Œç„¶åæ‰§è¡Œfinallyã€‚å¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±ä¸­æ–­æ‰§è¡Œtry { â€¦ }è¯­å¥å—ï¼Œç„¶åè·³è½¬æ‰§è¡ŒåŒ¹é…çš„catchè¯­å¥å—ï¼Œæœ€åæ‰§è¡Œfinallyã€‚ å¯è§ï¼Œfinallyæ˜¯ç”¨æ¥ä¿è¯ä¸€äº›ä»£ç å¿…é¡»æ‰§è¡Œçš„ã€‚ æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥æ²¡æœ‰catchï¼Œåªä½¿ç”¨try â€¦ finallyç»“æ„ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 void process(String file) throws IOException { try { ... } finally { System.out.println(\"END\"); } } å› ä¸ºæ–¹æ³•å£°æ˜äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ‰€ä»¥å¯ä»¥ä¸å†™catchã€‚\næ•è·å¤šç§å¼‚å¸¸ å¦‚æœæŸäº›å¼‚å¸¸çš„å¤„ç†é€»è¾‘ç›¸åŒï¼Œä½†æ˜¯å¼‚å¸¸æœ¬èº«ä¸å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œé‚£ä¹ˆå°±å¾—ç¼–å†™å¤šæ¡catchå­å¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (IOException e) { System.out.println(\"Bad input\"); } catch (NumberFormatException e) { System.out.println(\"Bad input\"); } catch (Exception e) { System.out.println(\"Unknown error\"); } } å› ä¸ºå¤„ç†IOExceptionå’ŒNumberFormatExceptionçš„ä»£ç æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä¸¤ç”¨|åˆå¹¶åˆ°ä¸€èµ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public static void main(String[] args) { try { process1(); process2(); process3(); } catch (IOException | NumberFormatException e) { // IOExceptionæˆ–NumberFormatException System.out.println(\"Bad input\"); } catch (Exception e) { System.out.println(\"Unknown error\"); } } æŠ›å‡ºå¼‚å¸¸ å½“æŸä¸ªæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œå¦‚æœå½“å‰æ–¹æ³•æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸å°±ä¼šè¢«æŠ›åˆ°ä¸Šå±‚è°ƒç”¨æ–¹æ³•ï¼Œç›´åˆ°é‡åˆ°æŸä¸ªtry â€¦ catchè¢«æ•è·ä¸ºæ­¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Main { public static void main(String[] args) { try { process1(); } catch (Exception e) { e.printStackTrace(); } } static void process1() { process2(); } static void process2() { Integer.parseInt(null); // ä¼šæŠ›å‡ºNumberFormatException } } é€šè¿‡printStackTrace()å¯ä»¥æ‰“å°å‡ºæ–¹æ³•çš„è°ƒç”¨æ ˆï¼Œç±»ä¼¼ï¼š\n1 2 3 4 5 6 java.lang.NumberFormatException: null at java.base/java.lang.Integer.parseInt(Integer.java:614) at java.base/java.lang.Integer.parseInt(Integer.java:770) at Main.process2(Main.java:16) at Main.process1(Main.java:12) at Main.main(Main.java:5) printStackTrace()å¯¹äºè°ƒè¯•é”™è¯¯éå¸¸æœ‰ç”¨ï¼Œä¸Šè¿°ä¿¡æ¯è¡¨ç¤ºï¼šNumberFormatExceptionæ˜¯åœ¨java.lang.Integer.parseIntæ–¹æ³•ä¸­è¢«æŠ›å‡ºçš„ï¼Œä»ä¸‹å¾€ä¸Šçœ‹ï¼Œè°ƒç”¨å±‚æ¬¡ä¾æ¬¡æ˜¯ï¼š\nmain()è°ƒç”¨process1()ï¼› process1()è°ƒç”¨process2()ï¼› process2()è°ƒç”¨Integer.parseInt(String)ï¼› Ineger.parseInt(String)è°ƒç”¨Integer.parseInt(String, int)ã€‚ æŸ¥çœ‹Integer.javaæºç å¯çŸ¥ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 public static int parseInt(String s, int radix) throws NumberFormatException { if (s == null) { throw new NumberFormatException(\"null\"); } ... } æŸ¥çœ‹Integer.javaæºç å¯çŸ¥ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 public static int parseInt(String s, int radix) throws NumberFormatException { if (s == null) { throw new NumberFormatException(\"null\"); } ... } å¹¶ä¸”ï¼Œæ¯å±‚è°ƒç”¨å‡ç»™å‡ºäº†æºä»£ç çš„è¡Œå·ï¼Œå¯ç›´æ¥å®šä½ã€‚ å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·è¾“å…¥äº†éæ³•çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚ å¦‚ä½•æŠ›å‡ºå¼‚å¸¸ï¼Ÿå‚è€ƒInteger.parseInt()æ–¹æ³•ï¼ŒæŠ›å‡ºå¼‚å¸¸åˆ†ä¸¤æ­¥ï¼š\nåˆ›å»ºæŸä¸ªExceptionçš„å®ä¾‹ï¼› ç”¨throwè¯­å¥æŠ›å‡ºã€‚ 1 2 3 4 5 6 void process2(String s) { if (s == null) { NullPointerException e = new NullPointerException(); throw e; } } å®é™…ä¸Šï¼Œç»å¤§éƒ¨åˆ†æŠ›å‡ºå¼‚å¸¸çš„ä»£ç éƒ½ä¼šåˆå¹¶å†™æˆä¸€è¡Œï¼š\n1 2 3 4 5 void process2(String s) { if (s == null) { throw new NullPointerException(); } } å¦‚æœä¸€ä¸ªæ–¹æ³•æ•è·äº†æŸä¸ªå¼‚å¸¸åï¼Œåˆåœ¨catchå­å¥ä¸­æŠ›å‡ºæ–°çš„å¼‚å¸¸ï¼Œå°±ç›¸å½“äºæŠŠæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹â€œè½¬æ¢â€äº†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 void process1(String s) { try { process2(); } catch (NullPointerException e) { throw new IllegalArgumentException(); } } void process2(String s) { if (s == null) { throw new NullPointerException(); } } å½“process2()æŠ›å‡ºNullPointerExceptionåï¼Œè¢«process1()æ•è·ï¼Œç„¶åæŠ›å‡ºIllegalArgumentException()ã€‚ å¦‚æœåœ¨main()ä¸­æ•è·IllegalArgumentExceptionï¼Œæˆ‘ä»¬çœ‹çœ‹æ‰“å°çš„å¼‚å¸¸æ ˆï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class Main { public static void main(String[] args) { try { process1(); } catch (Exception e) { e.printStackTrace(); } } static void process1() { try { process2(); } catch (NullPointerException e) { throw new IllegalArgumentException(); } } static void process2() { throw new NullPointerException(); } } æ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š\n1 2 3 java.lang.IllegalArgumentException at Main.process1(Main.java:15) at Main.main(Main.java:5) è¿™è¯´æ˜æ–°çš„å¼‚å¸¸ä¸¢å¤±äº†åŸå§‹å¼‚å¸¸ä¿¡æ¯ï¼Œæˆ‘ä»¬å·²ç»çœ‹ä¸åˆ°åŸå§‹å¼‚å¸¸NullPointerExceptionçš„ä¿¡æ¯äº†ã€‚ ä¸ºäº†èƒ½è¿½è¸ªåˆ°å®Œæ•´çš„å¼‚å¸¸æ ˆï¼Œåœ¨æ„é€ å¼‚å¸¸çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹çš„Exceptionå®ä¾‹ä¼ è¿›å»ï¼Œæ–°çš„Exceptionå°±å¯ä»¥æŒæœ‰åŸå§‹Exceptionä¿¡æ¯ã€‚å¯¹ä¸Šè¿°ä»£ç æ”¹è¿›å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class Main { public static void main(String[] args) { try { process1(); } catch (Exception e) { e.printStackTrace(); } } static void process1() { try { process2(); } catch (NullPointerException e) { throw new IllegalArgumentException(e); } } static void process2() { throw new NullPointerException(); } } è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š\n1 2 3 4 5 6 java.lang.IllegalArgumentException: java.lang.NullPointerException at Main.process1(Main.java:15) at Main.main(Main.java:5) Caused by: java.lang.NullPointerException at Main.process2(Main.java:20) at Main.process1(Main.java:13) æ³¨æ„åˆ°Caused by: Xxxï¼Œè¯´æ˜æ•è·çš„IllegalArgumentExceptionå¹¶ä¸æ˜¯é€ æˆé—®é¢˜çš„æ ¹æºï¼Œæ ¹æºåœ¨äºNullPointerExceptionï¼Œæ˜¯åœ¨Main.process2()æ–¹æ³•æŠ›å‡ºçš„ã€‚\nåœ¨ä»£ç ä¸­è·å–åŸå§‹å¼‚å¸¸å¯ä»¥ä½¿ç”¨Throwable.getCause()æ–¹æ³•ã€‚å¦‚æœè¿”å›nullï¼Œè¯´æ˜å·²ç»æ˜¯â€œæ ¹å¼‚å¸¸â€äº†ã€‚ æœ‰äº†å®Œæ•´çš„å¼‚å¸¸æ ˆçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ‰èƒ½å¿«é€Ÿå®šä½å¹¶ä¿®å¤ä»£ç çš„é—®é¢˜ã€‚ æ•è·åˆ°å¼‚å¸¸å¹¶å†æ¬¡æŠ›å‡ºæ—¶ï¼Œä¸€å®šè¦ç•™ä½åŸå§‹å¼‚å¸¸ï¼Œå¦åˆ™å¾ˆéš¾å®šä½ç¬¬ä¸€æ¡ˆå‘ç°åœºï¼\nå¦‚æœæˆ‘ä»¬åœ¨tryæˆ–è€…catchè¯­å¥å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œfinallyè¯­å¥æ˜¯å¦ä¼šæ‰§è¡Œï¼Ÿä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 public class Main { public static void main(String[] args) { try { Integer.parseInt(\"abc\"); } catch (Exception e) { System.out.println(\"catched\"); throw new RuntimeException(e); } finally { System.out.println(\"finally\"); } } } ä¸Šè¿°ä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 catched finally Exception in thread \"main\" java.lang.RuntimeException: java.lang.NumberFormatException: For input string: \"abc\" at Main.main(Main.java:8) Caused by: java.lang.NumberFormatException: For input string: \"abc\" at ... ç¬¬ä¸€è¡Œæ‰“å°äº†catchedï¼Œè¯´æ˜è¿›å…¥äº†catchè¯­å¥å—ã€‚ç¬¬äºŒè¡Œæ‰“å°äº†finallyï¼Œè¯´æ˜æ‰§è¡Œäº†finallyè¯­å¥å—ã€‚ å› æ­¤ï¼Œåœ¨catchä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šå½±å“finallyçš„æ‰§è¡Œã€‚JVMä¼šå…ˆæ‰§è¡Œfinallyï¼Œç„¶åæŠ›å‡ºå¼‚å¸¸ã€‚\nå¼‚å¸¸å±è”½ å¦‚æœåœ¨æ‰§è¡Œfinallyè¯­å¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆï¼Œcatchè¯­å¥çš„å¼‚å¸¸è¿˜èƒ½å¦ç»§ç»­æŠ›å‡ºï¼Ÿä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Main { public static void main(String[] args) { try { Integer.parseInt(\"abc\"); } catch (Exception e) { System.out.println(\"catched\"); throw new RuntimeException(e); } finally { System.out.println(\"finally\"); throw new IllegalArgumentException(); } } } æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå‘ç°å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š\n1 2 3 4 catched finally Exception in thread \"main\" java.lang.IllegalArgumentException at Main.main(Main.java:11) è¿™è¯´æ˜finallyæŠ›å‡ºå¼‚å¸¸åï¼ŒåŸæ¥åœ¨catchä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±â€œæ¶ˆå¤±â€äº†ï¼Œå› ä¸ºåªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚æ²¡æœ‰è¢«æŠ›å‡ºçš„å¼‚å¸¸ç§°ä¸ºâ€œè¢«å±è”½â€çš„å¼‚å¸¸ï¼ˆSuppressed Exceptionï¼‰ã€‚ åœ¨æå°‘æ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è·çŸ¥æ‰€æœ‰çš„å¼‚å¸¸ã€‚å¦‚ä½•ä¿å­˜æ‰€æœ‰çš„å¼‚å¸¸ä¿¡æ¯ï¼Ÿæ–¹æ³•æ˜¯å…ˆç”¨originå˜é‡ä¿å­˜åŸå§‹å¼‚å¸¸ï¼Œç„¶åè°ƒç”¨Throwable.addSuppressed()ï¼ŒæŠŠåŸå§‹å¼‚å¸¸æ·»åŠ è¿›æ¥ï¼Œæœ€ååœ¨finallyæŠ›å‡ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Main { public static void main(String[] args) throws Exception { Exception origin = null; try { System.out.println(Integer.parseInt(\"abc\")); } catch (Exception e) { origin = e; throw e; } finally { Exception e = new IllegalArgumentException(); if (origin != null) { e.addSuppressed(origin); } throw e; } } } å½“catchå’Œfinallyéƒ½æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œè™½ç„¶catchçš„å¼‚å¸¸è¢«å±è”½äº†ï¼Œä½†æ˜¯ï¼ŒfinallyæŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶åŒ…å«äº†å®ƒï¼š\n1 2 3 4 5 6 7 Exception in thread \"main\" java.lang.IllegalArgumentException at Main.main(Main.java:11) Suppressed: java.lang.NumberFormatException: For input string: \"abc\" at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.base/java.lang.Integer.parseInt(Integer.java:652) at java.base/java.lang.Integer.parseInt(Integer.java:770) at Main.main(Main.java:6) é€šè¿‡Throwable.getSuppressed()å¯ä»¥è·å–æ‰€æœ‰çš„Suppressed Exceptionã€‚ ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨finallyä¸­ä¸è¦æŠ›å‡ºå¼‚å¸¸ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦å…³å¿ƒSuppressed Exceptionã€‚\nè‡ªå®šä¹‰å¼‚å¸¸ Javaæ ‡å‡†åº“å®šä¹‰çš„å¸¸ç”¨å¼‚å¸¸åŒ…æ‹¬ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 Exception â”‚ â”œâ”€ RuntimeException â”‚ â”‚ â”‚ â”œâ”€ NullPointerException â”‚ â”‚ â”‚ â”œâ”€ IndexOutOfBoundsException â”‚ â”‚ â”‚ â”œâ”€ SecurityException â”‚ â”‚ â”‚ â””â”€ IllegalArgumentException â”‚ â”‚ â”‚ â””â”€ NumberFormatException â”‚ â”œâ”€ IOException â”‚ â”‚ â”‚ â”œâ”€ UnsupportedCharsetException â”‚ â”‚ â”‚ â”œâ”€ FileNotFoundException â”‚ â”‚ â”‚ â””â”€ SocketException â”‚ â”œâ”€ ParseException â”‚ â”œâ”€ GeneralSecurityException â”‚ â”œâ”€ SQLException â”‚ â””â”€ TimeoutException å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­éœ€è¦æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå°½é‡ä½¿ç”¨JDKå·²å®šä¹‰çš„å¼‚å¸¸ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå‚æ•°æ£€æŸ¥ä¸åˆæ³•ï¼Œåº”è¯¥æŠ›å‡ºIllegalArgumentExceptionï¼š\n1 2 3 4 5 static void process1(int age) { if (age \u003c= 0) { throw new IllegalArgumentException(); } } åœ¨ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰æ–°çš„å¼‚å¸¸ç±»å‹ï¼Œä½†æ˜¯ï¼Œä¿æŒä¸€ä¸ªåˆç†çš„å¼‚å¸¸ç»§æ‰¿ä½“ç³»æ˜¯éå¸¸é‡è¦çš„ã€‚ ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªBaseExceptionä½œä¸ºâ€œæ ¹å¼‚å¸¸â€ï¼Œç„¶åï¼Œæ´¾ç”Ÿå‡ºå„ç§ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸ã€‚ BaseExceptionéœ€è¦ä»ä¸€ä¸ªé€‚åˆçš„Exceptionæ´¾ç”Ÿï¼Œé€šå¸¸å»ºè®®ä»RuntimeExceptionæ´¾ç”Ÿï¼š public class BaseException extends RuntimeException {} å…¶ä»–ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸å°±å¯ä»¥ä»BaseExceptionæ´¾ç”Ÿï¼š public class UserNotFoundException extends BaseException {} public class LoginFailedException extends BaseException {}\nè‡ªå®šä¹‰çš„BaseExceptionåº”è¯¥æä¾›å¤šä¸ªæ„é€ æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class BaseException extends RuntimeException { public BaseException() { super(); } public BaseException(String message, Throwable cause) { super(message, cause); } public BaseException(String message) { super(message); } public BaseException(Throwable cause) { super(cause); } } ä¸Šè¿°æ„é€ æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯åŸæ ·ç…§æŠ„RuntimeExceptionã€‚è¿™æ ·ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©åˆé€‚çš„æ„é€ æ–¹æ³•ã€‚é€šè¿‡IDEå¯ä»¥æ ¹æ®çˆ¶ç±»å¿«é€Ÿç”Ÿæˆå­ç±»çš„æ„é€ æ–¹æ³•ã€‚\nNullPointerException åœ¨æ‰€æœ‰çš„RuntimeExceptionå¼‚å¸¸ä¸­ï¼ŒJavaç¨‹åºå‘˜æœ€ç†Ÿæ‚‰çš„ææ€•å°±æ˜¯NullPointerExceptionäº†ã€‚ NullPointerExceptionå³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¿—ç§°NPEã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸ºnullï¼Œè°ƒç”¨å…¶æ–¹æ³•æˆ–è®¿é—®å…¶å­—æ®µå°±ä¼šäº§ç”ŸNullPointerExceptionï¼Œè¿™ä¸ªå¼‚å¸¸é€šå¸¸æ˜¯ç”±JVMæŠ›å‡ºçš„ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 public class Main { public static void main(String[] args) { String s = null; System.out.println(s.toLowerCase()); } } æŒ‡é’ˆè¿™ä¸ªæ¦‚å¿µå®é™…ä¸Šæºè‡ªCè¯­è¨€ï¼ŒJavaè¯­è¨€ä¸­å¹¶æ— æŒ‡é’ˆã€‚æˆ‘ä»¬å®šä¹‰çš„å˜é‡å®é™…ä¸Šæ˜¯å¼•ç”¨ï¼ŒNull Pointeræ›´ç¡®åˆ‡åœ°è¯´æ˜¯Null Referenceï¼Œä¸è¿‡ä¸¤è€…åŒºåˆ«ä¸å¤§ã€‚ å¦‚æœé‡åˆ°NullPointerExceptionï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿé¦–å…ˆï¼Œå¿…é¡»æ˜ç¡®ï¼ŒNullPointerExceptionæ˜¯ä¸€ç§ä»£ç é€»è¾‘é”™è¯¯ï¼Œé‡åˆ°NullPointerExceptionï¼Œéµå¾ªåŸåˆ™æ˜¯æ—©æš´éœ²ï¼Œæ—©ä¿®å¤ï¼Œä¸¥ç¦ä½¿ç”¨catchæ¥éšè—è¿™ç§ç¼–ç é”™è¯¯ï¼š\n1 2 3 4 5 // é”™è¯¯ç¤ºä¾‹: æ•è·NullPointerException try { transferMoney(from, to, amount); } catch (NullPointerException e) { } å¥½çš„ç¼–ç ä¹ æƒ¯å¯ä»¥æå¤§åœ°é™ä½NullPointerExceptionçš„äº§ç”Ÿï¼Œä¾‹å¦‚ï¼š æˆå‘˜å˜é‡åœ¨å®šä¹‰æ—¶åˆå§‹åŒ–ï¼š\n1 2 3 public class Person { private String name = \"\"; } ä½¿ç”¨ç©ºå­—ç¬¦ä¸²\"â€œè€Œä¸æ˜¯é»˜è®¤çš„nullå¯é¿å…å¾ˆå¤šNullPointerExceptionï¼Œç¼–å†™ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œç”¨ç©ºå­—ç¬¦ä¸²\"â€œè¡¨ç¤ºæœªå¡«å†™æ¯”nullå®‰å…¨å¾—å¤šã€‚ è¿”å›ç©ºå­—ç¬¦ä¸²â€\"ã€ç©ºæ•°ç»„è€Œä¸æ˜¯nullï¼š\n1 2 3 4 5 6 7 public String[] readLinesFromFile(String file) { if (getFileSize(file) == 0) { // è¿”å›ç©ºæ•°ç»„è€Œä¸æ˜¯null: return new String[0]; } ... } è¿™æ ·å¯ä»¥ä½¿å¾—è°ƒç”¨æ–¹æ— éœ€æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºnullã€‚ å¦‚æœè°ƒç”¨æ–¹ä¸€å®šè¦æ ¹æ®nullåˆ¤æ–­ï¼Œæ¯”å¦‚è¿”å›nullè¡¨ç¤ºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè€ƒè™‘è¿”å›Optionalï¼š\n1 2 3 4 5 6 public Optional readFromFile(String file) { if (!fileExist(file)) { return Optional.empty(); } ... } è¿™æ ·è°ƒç”¨æ–¹å¿…é¡»é€šè¿‡Optional.isPresent()åˆ¤æ–­æ˜¯å¦æœ‰ç»“æœã€‚\nå®šä½NullPointerException å¦‚æœäº§ç”Ÿäº†NullPointerExceptionï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨a.b.c.x()æ—¶äº§ç”Ÿäº†NullPointerExceptionï¼ŒåŸå› å¯èƒ½æ˜¯ï¼š\naæ˜¯nullï¼› a.bæ˜¯nullï¼› a.b.cæ˜¯nullï¼›\nåªèƒ½é€šè¿‡è¿™æ ·çš„æ—¥å¿—ï¼Œæ‰èƒ½åˆ¤æ–­å“ªä¸ªå¯¹è±¡æ˜¯null\n1 2 3 System.out.println(a); System.out.println(a.b); System.out.println(a.b.c); ä»Java 14å¼€å§‹ï¼Œå¦‚æœäº§ç”Ÿäº†NullPointerExceptionï¼ŒJVMå¯ä»¥ç»™å‡ºè¯¦ç»†çš„ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬nullå¯¹è±¡åˆ°åº•æ˜¯è°ã€‚æˆ‘ä»¬æ¥çœ‹ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Main { public static void main(String[] args) { Person p = new Person(); System.out.println(p.address.city.toLowerCase()); } } class Person { String[] name = new String[2]; Address address = new Address(); } class Address { String city; String street; String zipcode; } å¯ä»¥åœ¨NullPointerExceptionçš„è¯¦ç»†ä¿¡æ¯ä¸­çœ‹åˆ°ç±»ä¼¼... because \".address.city\" is nullï¼Œæ„æ€æ˜¯cityå­—æ®µä¸ºnullï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚ è¿™ç§å¢å¼ºçš„NullPointerExceptionè¯¦ç»†ä¿¡æ¯æ˜¯Java 14æ–°å¢çš„åŠŸèƒ½ï¼Œä½†é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»™JVMæ·»åŠ å‚æ•°å¯ç”¨å®ƒï¼š java -XX:+ShowCodeDetailsInExceptionMessages Main.java\nä½¿ç”¨æ–­è¨€ æ–­è¨€ï¼ˆAssertionï¼‰æ˜¯ä¸€ç§è°ƒè¯•ç¨‹åºçš„æ–¹å¼ã€‚åœ¨Javaä¸­ï¼Œä½¿ç”¨assertå…³é”®å­—æ¥å®ç°æ–­è¨€ã€‚\n1 2 3 4 5 public static void main(String[] args) { double x = Math.abs(-123.45); assert x \u003e= 0; System.out.println(x); } è¯­å¥assert x \u003e= 0;å³ä¸ºæ–­è¨€ï¼Œæ–­è¨€æ¡ä»¶x \u003e= 0é¢„æœŸä¸ºtrueã€‚å¦‚æœè®¡ç®—ç»“æœä¸ºfalseï¼Œåˆ™æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºAssertionErrorã€‚ ä½¿ç”¨assertè¯­å¥æ—¶ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªå¯é€‰çš„æ–­è¨€æ¶ˆæ¯ï¼š assert x \u003e= 0 : \"x must \u003e= 0\"; Javaæ–­è¨€çš„ç‰¹ç‚¹æ˜¯ï¼šæ–­è¨€å¤±è´¥æ—¶ä¼šæŠ›å‡ºAssertionErrorï¼Œå¯¼è‡´ç¨‹åºç»“æŸé€€å‡ºã€‚å› æ­¤ï¼Œæ–­è¨€ä¸èƒ½ç”¨äºå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œåªåº”è¯¥ç”¨äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µã€‚ å¯¹äºå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œä¸åº”è¯¥ä½¿ç”¨æ–­è¨€ã€‚ä¾‹å¦‚ï¼š\n1 2 3 void sort(int[] arr) { assert arr != null; } åº”è¯¥æŠ›å‡ºå¼‚å¸¸å¹¶åœ¨ä¸Šå±‚æ•è·ï¼š\n1 2 3 4 5 void sort(int[] arr) { if (arr == null) { throw new IllegalArgumentException(\"array cannot be null\"); } } å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­ä½¿ç”¨assertæ—¶ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æ–­è¨€ï¼š\n1 2 3 4 5 6 7 public class Main { public static void main(String[] args) { int x = -1; assert x \u003e 0; System.out.println(x); } } æ–­è¨€xå¿…é¡»å¤§äº0ï¼Œå®é™…ä¸Šxä¸º-1ï¼Œæ–­è¨€è‚¯å®šå¤±è´¥ã€‚æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå‘ç°ç¨‹åºå¹¶æœªæŠ›å‡ºAssertionErrorï¼Œè€Œæ˜¯æ­£å¸¸æ‰“å°äº†xçš„å€¼ã€‚ è¿™æ˜¯æ€ä¹ˆè‚¥å››ï¼Ÿä¸ºä»€ä¹ˆassertè¯­å¥ä¸èµ·ä½œç”¨ï¼Ÿ è¿™æ˜¯å› ä¸ºJVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œå³é‡åˆ°assertè¯­å¥å°±è‡ªåŠ¨å¿½ç•¥äº†ï¼Œä¸æ‰§è¡Œã€‚ è¦æ‰§è¡Œassertè¯­å¥ï¼Œå¿…é¡»ç»™Javaè™šæ‹Ÿæœºä¼ é€’-enableassertionsï¼ˆå¯ç®€å†™ä¸º-eaï¼‰å‚æ•°å¯ç”¨æ–­è¨€ã€‚æ‰€ä»¥ï¼Œä¸Šè¿°ç¨‹åºå¿…é¡»åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œæ‰æœ‰æ•ˆæœï¼š\n1 2 3 $ java -ea Main.java Exception in thread \"main\" java.lang.AssertionError at Main.main(Main.java:5) è¿˜å¯ä»¥æœ‰é€‰æ‹©åœ°å¯¹ç‰¹å®šåœ°ç±»å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š-ea:com.itranswarp.sample.Mainï¼Œè¡¨ç¤ºåªå¯¹com.itranswarp.sample.Mainè¿™ä¸ªç±»å¯ç”¨æ–­è¨€ã€‚ æˆ–è€…å¯¹ç‰¹å®šåœ°åŒ…å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š-ea:com.itranswarp.sampleâ€¦ï¼ˆæ³¨æ„ç»“å°¾æœ‰3ä¸ª.ï¼‰ï¼Œè¡¨ç¤ºå¯¹com.itranswarp.sampleè¿™ä¸ªåŒ…å¯åŠ¨æ–­è¨€ã€‚ å®é™…å¼€å‘ä¸­ï¼Œå¾ˆå°‘ä½¿ç”¨æ–­è¨€ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œåç»­æˆ‘ä»¬ä¼šè®²è§£JUnitçš„ä½¿ç”¨ã€‚\nå¼‚å¸¸å’Œæ—¥å¿— ä½¿ç”¨JDK Logging åœ¨ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¨‹åºè¿è¡Œç»“æœä¸é¢„æœŸä¸ç¬¦ï¼Œæ€ä¹ˆåŠï¼Ÿå½“ç„¶æ˜¯ç”¨System.out.println()æ‰“å°å‡ºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸäº›å˜é‡ï¼Œè§‚å¯Ÿæ¯ä¸€æ­¥çš„ç»“æœä¸ä»£ç é€»è¾‘æ˜¯å¦ç¬¦åˆï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°ä¿®æ”¹ä»£ç ã€‚\nä»£ç æ”¹å¥½äº†æ€ä¹ˆåŠï¼Ÿå½“ç„¶æ˜¯åˆ é™¤æ²¡æœ‰ç”¨çš„System.out.println()è¯­å¥äº†ã€‚ å¦‚æœæ”¹ä»£ç åˆæ”¹å‡ºé—®é¢˜æ€ä¹ˆåŠï¼Ÿå†åŠ ä¸ŠSystem.out.println()ã€‚ åå¤è¿™ä¹ˆæå‡ æ¬¡ï¼Œå¾ˆå¿«å¤§å®¶å°±å‘ç°ä½¿ç”¨System.out.println()éå¸¸éº»çƒ¦ã€‚ æ€ä¹ˆåŠï¼Ÿ è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨æ—¥å¿—ã€‚ é‚£ä»€ä¹ˆæ˜¯æ—¥å¿—ï¼Ÿæ—¥å¿—å°±æ˜¯Loggingï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å–ä»£System.out.println()ã€‚ è¾“å‡ºæ—¥å¿—ï¼Œè€Œä¸æ˜¯ç”¨System.out.println()ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š\nå¯ä»¥è®¾ç½®è¾“å‡ºæ ·å¼ï¼Œé¿å…è‡ªå·±æ¯æ¬¡éƒ½å†™\"ERROR: \" + varï¼› å¯ä»¥è®¾ç½®è¾“å‡ºçº§åˆ«ï¼Œç¦æ­¢æŸäº›çº§åˆ«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œåªè¾“å‡ºé”™è¯¯æ—¥å¿—ï¼› å¯ä»¥è¢«é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨ç¨‹åºè¿è¡Œç»“æŸåæŸ¥çœ‹æ—¥å¿—ï¼› å¯ä»¥æŒ‰åŒ…åæ§åˆ¶æ—¥å¿—çº§åˆ«ï¼Œåªè¾“å‡ºæŸäº›åŒ…æ‰“çš„æ—¥å¿—ï¼› å¯ä»¥â€¦â€¦ æ€»ä¹‹å°±æ˜¯å¥½å¤„å¾ˆå¤šå•¦ã€‚ å› ä¸ºJavaæ ‡å‡†åº“å†…ç½®äº†æ—¥å¿—åŒ…java.util.loggingï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ã€‚å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 public class Hello { public static void main(String[] args) { Logger logger = Logger.getGlobal(); logger.info(\"start process...\"); logger.warning(\"memory is running out...\"); logger.fine(\"ignored.\"); logger.severe(\"process will be terminated...\"); } } è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š\n1 2 3 4 5 6 Mar 02, 2019 6:32:13 PM Hello main INFO: start process... Mar 02, 2019 6:32:13 PM Hello main WARNING: memory is running out... Mar 02, 2019 6:32:13 PM Hello main SEVERE: process will be terminated... å¯¹æ¯”å¯è§ï¼Œä½¿ç”¨æ—¥å¿—æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒè‡ªåŠ¨æ‰“å°äº†æ—¶é—´ã€è°ƒç”¨ç±»ã€è°ƒç”¨æ–¹æ³•ç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚ å†ä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ4æ¡æ—¥å¿—ï¼Œåªæ‰“å°äº†3æ¡ï¼Œlogger.fine()æ²¡æœ‰æ‰“å°ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¥å¿—çš„è¾“å‡ºå¯ä»¥è®¾å®šçº§åˆ«ã€‚JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»ä¸¥é‡åˆ°æ™®é€šï¼š\nSEVERE WARNING INFO CONFIG FINE FINER FINEST\nå› ä¸ºé»˜è®¤çº§åˆ«æ˜¯INFOï¼Œå› æ­¤ï¼ŒINFOçº§åˆ«ä»¥ä¸‹çš„æ—¥å¿—ï¼Œä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚ä½¿ç”¨æ—¥å¿—çº§åˆ«çš„å¥½å¤„åœ¨äºï¼Œè°ƒæ•´çº§åˆ«ï¼Œå°±å¯ä»¥å±è”½æ‰å¾ˆå¤šè°ƒè¯•ç›¸å…³çš„æ—¥å¿—è¾“å‡ºã€‚ ä½¿ç”¨Javaæ ‡å‡†åº“å†…ç½®çš„Loggingæœ‰ä»¥ä¸‹å±€é™ï¼š\nLoggingç³»ç»Ÿåœ¨JVMå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶å¹¶å®Œæˆåˆå§‹åŒ–ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œmain()æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®ï¼›é…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•°-Djava.util.logging.config.file=ã€‚ å› æ­¤ï¼ŒJavaæ ‡å‡†åº“å†…ç½®çš„Loggingä½¿ç”¨å¹¶ä¸æ˜¯éå¸¸å¹¿æ³›ã€‚æ›´æ–¹ä¾¿çš„æ—¥å¿—ç³»ç»Ÿæˆ‘ä»¬ç¨åä»‹ç»ã€‚\nä½¿ç”¨Commons Logging å’ŒJavaæ ‡å‡†åº“æä¾›çš„æ—¥å¿—ä¸åŒï¼ŒCommons Loggingæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ—¥å¿—åº“ï¼Œå®ƒæ˜¯ç”±Apacheåˆ›å»ºçš„æ—¥å¿—æ¨¡å—ã€‚\nä½¿ç”¨ Commons Loggingï¼Œéœ€è¦å¼•å…¥\n1 2 3 4 5 commons-logging commons-logging 1.2 Commons Loggingçš„ç‰¹è‰²æ˜¯ï¼Œå®ƒå¯ä»¥æŒ‚æ¥ä¸åŒçš„æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šæŒ‚æ¥çš„æ—¥å¿—ç³»ç»Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCommons Logginè‡ªåŠ¨æœç´¢å¹¶ä½¿ç”¨Log4jï¼ˆLog4jæ˜¯å¦ä¸€ä¸ªæµè¡Œçš„æ—¥å¿—ç³»ç»Ÿï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°Log4jï¼Œå†ä½¿ç”¨JDK Loggingã€‚ ä½¿ç”¨Commons Loggingåªéœ€è¦å’Œä¸¤ä¸ªç±»æ‰“äº¤é“ï¼Œå¹¶ä¸”åªæœ‰ä¸¤æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡LogFactoryè·å–Logç±»çš„å®ä¾‹ï¼› ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨Logå®ä¾‹çš„æ–¹æ³•æ‰“æ—¥å¿—ã€‚\n1 2 3 4 5 6 7 public class Main { public static void main(String[] args) { Log log = LogFactory.getLog(Main.class); log.info(\"start...\"); log.warn(\"end.\"); } } è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n1 2 3 4 Mar 02, 2019 7:15:31 PM Main main INFO: start... Mar 02, 2019 7:15:31 PM Main main WARNING: end. Commons Loggingå®šä¹‰äº†6ä¸ªæ—¥å¿—çº§åˆ«ï¼š\nfatal error waring info debug trace\né»˜è®¤çº§åˆ«æ˜¯INFOã€‚ ä½¿ç”¨Commons Loggingæ—¶ï¼Œå¦‚æœåœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Logï¼Œé€šå¸¸ç›´æ¥å®šä¹‰ä¸€ä¸ªé™æ€ç±»å‹å˜é‡ï¼š\n1 2 3 4 5 6 7 8 // åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log: public class Main { static final Log log = LogFactory.getLog(Main.class); static void foo() { log.info(\"foo\"); } } åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Logï¼Œé€šå¸¸å®šä¹‰ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š\n1 2 3 4 5 6 7 8 // åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log: public class Person { protected final Log log = LogFactory.getLog(getClass()); void foo() { log.info(\"foo\"); } } æ³¨æ„åˆ°å®ä¾‹å˜é‡logçš„è·å–æ–¹å¼æ˜¯ LogFactory.getLog(getClass())ï¼Œ è™½ç„¶ä¹Ÿå¯ä»¥ç”¨ LogFactory.getLog(Person.class)ï¼Œ ä½†æ˜¯å‰ä¸€ç§æ–¹å¼æœ‰ä¸ªéå¸¸å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥logå®ä¾‹ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 // åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»å®ä¾‹åŒ–çš„log: public class Student extends Person { void bar() { log.info(\"bar\"); } } ç”±äºJavaç±»çš„åŠ¨æ€ç‰¹æ€§ï¼Œå­ç±»è·å–çš„logå­—æ®µå®é™…ä¸Šç›¸å½“äºLogFactory.getLog(Student.class)ï¼Œä½†å´æ˜¯ä»çˆ¶ç±»ç»§æ‰¿è€Œæ¥ï¼Œå¹¶ä¸”æ— éœ€æ”¹åŠ¨ä»£ç ã€‚ æ­¤å¤–ï¼ŒCommons Loggingçš„æ—¥å¿—æ–¹æ³•ï¼Œä¾‹å¦‚info()ï¼Œé™¤äº†æ ‡å‡†çš„info(String)å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é‡è½½æ–¹æ³•ï¼šinfo(String, Throwable)ï¼Œè¿™ä½¿å¾—è®°å½•å¼‚å¸¸æ›´åŠ ç®€å•ï¼š\n1 2 3 4 5 try { ... } catch (Exception e) { log.error(\"got exception!\", e); } ä½¿ç”¨Log4j å‰é¢ä»‹ç»äº†Commons Loggingï¼Œå¯ä»¥ä½œä¸ºâ€œæ—¥å¿—æ¥å£â€æ¥ä½¿ç”¨ã€‚è€ŒçœŸæ­£çš„â€œæ—¥å¿—å®ç°â€å¯ä»¥ä½¿ç”¨Log4jã€‚ Log4jæ˜¯ä¸€ç§éå¸¸æµè¡Œçš„æ—¥å¿—æ¡†æ¶ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯2.xã€‚ Log4jæ˜¯ä¸€ä¸ªç»„ä»¶åŒ–è®¾è®¡çš„æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒçš„æ¶æ„å¤§è‡´å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 log.info(\"User signed in.\"); â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”œâ”€â”€\u003eâ”‚ Appender â”‚â”€â”€â”€\u003eâ”‚ Filter â”‚â”€â”€â”€\u003eâ”‚ Layout â”‚â”€â”€â”€\u003eâ”‚ Console â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”œâ”€â”€\u003eâ”‚ Appender â”‚â”€â”€â”€\u003eâ”‚ Filter â”‚â”€â”€â”€\u003eâ”‚ Layout â”‚â”€â”€â”€\u003eâ”‚ File â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€\u003eâ”‚ Appender â”‚â”€â”€â”€\u003eâ”‚ Filter â”‚â”€â”€â”€\u003eâ”‚ Layout â”‚â”€â”€â”€\u003eâ”‚ Socket â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å½“æˆ‘ä»¬ä½¿ç”¨Log4jè¾“å‡ºä¸€æ¡æ—¥å¿—æ—¶ï¼ŒLog4jè‡ªåŠ¨é€šè¿‡ä¸åŒçš„AppenderæŠŠåŒä¸€æ¡æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼š\nconsoleï¼šè¾“å‡ºåˆ°å±å¹•ï¼› fileï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼› socketï¼šé€šè¿‡ç½‘ç»œè¾“å‡ºåˆ°è¿œç¨‹è®¡ç®—æœºï¼› jdbcï¼šè¾“å‡ºåˆ°æ•°æ®åº“\nåœ¨è¾“å‡ºæ—¥å¿—çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Filteræ¥è¿‡æ»¤å“ªäº›logéœ€è¦è¢«è¾“å‡ºï¼Œå“ªäº›logä¸éœ€è¦è¢«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä»…è¾“å‡ºERRORçº§åˆ«çš„æ—¥å¿—ã€‚ æœ€åï¼Œé€šè¿‡Layoutæ¥æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œè‡ªåŠ¨æ·»åŠ æ—¥æœŸã€æ—¶é—´ã€æ–¹æ³•åç§°ç­‰ä¿¡æ¯ã€‚ ä¸Šè¿°ç»“æ„è™½ç„¶å¤æ‚ï¼Œä½†æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒLog4jçš„APIï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒã€‚ ä»¥XMLé…ç½®ä¸ºä¾‹ï¼Œä½¿ç”¨Log4jçš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªlog4j2.xmlçš„æ–‡ä»¶æ”¾åˆ°classpathä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ",
  "wordCount" : "27786",
  "inLanguage": "en",
  "datePublished": "2022-08-04T17:46:43Z",
  "dateModified": "2022-08-04T17:46:43Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/java%E5%9F%BA%E7%A1%80/%E5%BC%82%E5%B8%B8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath:  [['\\(', '\\)'], ['$', '$']],  
    }
  };
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/links" title="ğŸ¤å‹é“¾">
                    <span>ğŸ¤å‹é“¾</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title">
      å¼‚å¸¸
    </h1>
    <div class="post-meta"><span title='2022-08-04 17:46:43 +0000 UTC'>2022-08-04</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#java%e5%bc%82%e5%b8%b8%e7%ae%80%e4%bb%8b" aria-label="Javaå¼‚å¸¸ç®€ä»‹">Javaå¼‚å¸¸ç®€ä»‹</a></li>
                <li>
                    <a href="#%e6%8d%95%e8%8e%b7%e5%bc%82%e5%b8%b8" aria-label="æ•è·å¼‚å¸¸">æ•è·å¼‚å¸¸</a><ul>
                        
                <li>
                    <a href="#finally%e8%af%ad%e5%8f%a5" aria-label="finallyè¯­å¥">finallyè¯­å¥</a></li>
                <li>
                    <a href="#%e6%8d%95%e8%8e%b7%e5%a4%9a%e7%a7%8d%e5%bc%82%e5%b8%b8" aria-label="æ•è·å¤šç§å¼‚å¸¸">æ•è·å¤šç§å¼‚å¸¸</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%8a%9b%e5%87%ba%e5%bc%82%e5%b8%b8" aria-label="æŠ›å‡ºå¼‚å¸¸">æŠ›å‡ºå¼‚å¸¸</a><ul>
                        
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e5%b1%8f%e8%94%bd" aria-label="å¼‚å¸¸å±è”½">å¼‚å¸¸å±è”½</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8" aria-label="è‡ªå®šä¹‰å¼‚å¸¸">è‡ªå®šä¹‰å¼‚å¸¸</a></li>
                <li>
                    <a href="#nullpointerexception" aria-label="NullPointerException">NullPointerException</a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e4%bd%8dnullpointerexception" aria-label="å®šä½NullPointerException">å®šä½NullPointerException</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e6%96%ad%e8%a8%80" aria-label="ä½¿ç”¨æ–­è¨€">ä½¿ç”¨æ–­è¨€</a></li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e5%92%8c%e6%97%a5%e5%bf%97" aria-label="å¼‚å¸¸å’Œæ—¥å¿—">å¼‚å¸¸å’Œæ—¥å¿—</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8jdk-logging" aria-label="ä½¿ç”¨JDK Logging">ä½¿ç”¨JDK Logging</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8commons-logging" aria-label="ä½¿ç”¨Commons Logging">ä½¿ç”¨Commons Logging</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8log4j" aria-label="ä½¿ç”¨Log4j">ä½¿ç”¨Log4j</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8slf4j%e5%92%8clogback" aria-label="ä½¿ç”¨SLF4Jå’ŒLogback">ä½¿ç”¨SLF4Jå’ŒLogback</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e7%ae%80%e5%8d%95%e7%a4%ba%e4%be%8b" aria-label="å¼‚å¸¸ç®€å•ç¤ºä¾‹">å¼‚å¸¸ç®€å•ç¤ºä¾‹</a><ul>
                        
                <li>
                    <a href="#try%e5%92%8ccatch%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" aria-label="tryå’ŒcatchåŸºæœ¬ç”¨æ³•">tryå’ŒcatchåŸºæœ¬ç”¨æ³•</a></li>
                <li>
                    <a href="#finally%e7%9a%84%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" aria-label="finallyçš„åŸºæœ¬ç”¨æ³•">finallyçš„åŸºæœ¬ç”¨æ³•</a></li>
                <li>
                    <a href="#throws%e5%92%8cthrow%e7%9a%84%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" aria-label="throwså’Œthrowçš„åŸºæœ¬ç”¨æ³•">throwså’Œthrowçš„åŸºæœ¬ç”¨æ³•</a></li></ul>
                </li>
                <li>
                    <a href="#try-catch%e5%92%8c%e5%be%aa%e7%8e%af" aria-label="try-catchå’Œå¾ªç¯">try-catchå’Œå¾ªç¯</a><ul>
                        
                <li>
                    <a href="#%e6%80%a7%e8%83%bd%e5%88%86%e6%9e%90" aria-label="æ€§èƒ½åˆ†æ">æ€§èƒ½åˆ†æ</a></li>
                <li>
                    <a href="#try-catch%e7%9a%84%e6%9c%ac%e8%b4%a8" aria-label="try-catchçš„æœ¬è´¨">try-catchçš„æœ¬è´¨</a></li>
                <li>
                    <a href="#%e4%b8%9a%e5%8a%a1%e6%83%85%e5%86%b5%e5%88%86%e6%9e%90" aria-label="ä¸šåŠ¡æƒ…å†µåˆ†æ">ä¸šåŠ¡æƒ…å†µåˆ†æ</a></li></ul>
                </li>
                <li>
                    <a href="#effective-java%e4%b8%ad%e5%85%b3%e4%ba%8e%e5%a4%84%e7%90%86%e5%bc%82%e5%b8%b8%e7%9a%84%e5%bb%ba%e8%ae%ae" aria-label="ã€ŠEffective Javaã€‹ä¸­å…³äºå¤„ç†å¼‚å¸¸çš„å»ºè®®">ã€ŠEffective Javaã€‹ä¸­å…³äºå¤„ç†å¼‚å¸¸çš„å»ºè®®</a><ul>
                        
                <li>
                    <a href="#%e5%8f%aa%e9%92%88%e5%af%b9%e4%b8%8d%e6%ad%a3%e5%b8%b8%e7%9a%84%e6%83%85%e5%86%b5%e6%89%8d%e4%bd%bf%e7%94%a8%e5%bc%82%e5%b8%b8" aria-label="åªé’ˆå¯¹ä¸æ­£å¸¸çš„æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸">åªé’ˆå¯¹ä¸æ­£å¸¸çš„æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸</a></li>
                <li>
                    <a href="#%e5%af%b9%e4%ba%8e%e5%8f%af%e6%81%a2%e5%a4%8d%e7%9a%84%e6%9d%a1%e4%bb%b6%e4%bd%bf%e7%94%a8%e8%a2%ab%e6%a3%80%e6%9f%a5%e7%9a%84%e5%bc%82%e5%b8%b8%e5%af%b9%e4%ba%8e%e7%a8%8b%e5%ba%8f%e9%94%99%e8%af%af%e4%bd%bf%e7%94%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e5%bc%82%e5%b8%b8" aria-label="å¯¹äºå¯æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸">å¯¹äºå¯æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸</a></li>
                <li>
                    <a href="#%e9%81%bf%e5%85%8d%e4%b8%8d%e5%bf%85%e8%a6%81%e7%9a%84%e4%bd%bf%e7%94%a8%e8%a2%ab%e6%a3%80%e6%9f%a5%e7%9a%84%e5%bc%82%e5%b8%b8" aria-label="é¿å…ä¸å¿…è¦çš„ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸">é¿å…ä¸å¿…è¦çš„ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸</a></li>
                <li>
                    <a href="#%e5%b0%bd%e9%87%8f%e4%bd%bf%e7%94%a8%e6%a0%87%e5%87%86%e7%9a%84%e5%bc%82%e5%b8%b8" aria-label="å°½é‡ä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸">å°½é‡ä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸</a></li>
                <li>
                    <a href="#%e6%8a%9b%e5%87%ba%e7%9a%84%e5%bc%82%e5%b8%b8%e8%a6%81%e9%80%82%e5%90%88%e4%ba%8e%e7%9b%b8%e5%ba%94%e7%9a%84%e6%8a%bd%e8%b1%a1" aria-label="æŠ›å‡ºçš„å¼‚å¸¸è¦é€‚åˆäºç›¸åº”çš„æŠ½è±¡">æŠ›å‡ºçš„å¼‚å¸¸è¦é€‚åˆäºç›¸åº”çš„æŠ½è±¡</a></li>
                <li>
                    <a href="#%e6%af%8f%e4%b8%aa%e6%96%b9%e6%b3%95%e6%8a%9b%e5%87%ba%e7%9a%84%e5%bc%82%e5%b8%b8%e9%83%bd%e8%a6%81%e6%9c%89%e6%96%87%e6%a1%a3" aria-label="æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£">æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£</a></li>
                <li>
                    <a href="#%e5%9c%a8%e7%bb%86%e8%8a%82%e6%b6%88%e6%81%af%e4%b8%ad%e5%8c%85%e5%90%ab%e5%a4%b1%e8%b4%a5----%e6%8d%95%e8%8e%b7%e6%b6%88%e6%81%af" aria-label="åœ¨ç»†èŠ‚æ¶ˆæ¯ä¸­åŒ…å«å¤±è´¥ &amp;ndash; æ•è·æ¶ˆæ¯">åœ¨ç»†èŠ‚æ¶ˆæ¯ä¸­åŒ…å«å¤±è´¥ &ndash; æ•è·æ¶ˆæ¯</a></li>
                <li>
                    <a href="#%e5%8a%aa%e5%8a%9b%e4%bd%bf%e5%a4%b1%e8%b4%a5%e4%bf%9d%e6%8c%81%e5%8e%9f%e5%ad%90%e6%80%a7" aria-label="åŠªåŠ›ä½¿å¤±è´¥ä¿æŒåŸå­æ€§">åŠªåŠ›ä½¿å¤±è´¥ä¿æŒåŸå­æ€§</a></li>
                <li>
                    <a href="#%e4%b8%8d%e8%a6%81%e5%bf%bd%e7%95%a5%e5%bc%82%e5%b8%b8" aria-label="ä¸è¦å¿½ç•¥å¼‚å¸¸">ä¸è¦å¿½ç•¥å¼‚å¸¸</a></li></ul>
                </li>
                <li>
                    <a href="#java-puzzles%e4%b8%ad%e5%85%b3%e4%ba%8e%e5%bc%82%e5%b8%b8%e7%9a%84%e5%87%a0%e4%b8%aa%e9%97%ae%e9%a2%98" aria-label="ã€ŠJava Puzzlesã€‹ä¸­å…³äºå¼‚å¸¸çš„å‡ ä¸ªé—®é¢˜">ã€ŠJava Puzzlesã€‹ä¸­å…³äºå¼‚å¸¸çš„å‡ ä¸ªé—®é¢˜</a><ul>
                        
                <li>
                    <a href="#%e4%bc%98%e6%9f%94%e5%af%a1%e6%96%ad" aria-label="ä¼˜æŸ”å¯¡æ–­">ä¼˜æŸ”å¯¡æ–­</a></li>
                <li>
                    <a href="#%e4%b8%8d%e5%8f%af%e6%80%9d%e8%ae%ae" aria-label="ä¸å¯æ€è®®">ä¸å¯æ€è®®</a></li>
                <li>
                    <a href="#%e4%b8%8d%e5%8f%97%e6%ac%a2%e8%bf%8e%e7%9a%84%e5%ae%be%e5%ae%a2" aria-label="ä¸å—æ¬¢è¿çš„å®¾å®¢">ä¸å—æ¬¢è¿çš„å®¾å®¢</a></li>
                <li>
                    <a href="#%e6%82%a8%e5%a5%bd%e5%86%8d%e8%a7%81" aria-label="æ‚¨å¥½ï¼Œå†è§!">æ‚¨å¥½ï¼Œå†è§!</a></li>
                <li>
                    <a href="#%e4%b8%8d%e6%83%85%e6%84%bf%e7%9a%84%e6%9e%84%e9%80%a0%e5%99%a8" aria-label="ä¸æƒ…æ„¿çš„æ„é€ å™¨">ä¸æƒ…æ„¿çš„æ„é€ å™¨</a></li>
                <li>
                    <a href="#%e5%9f%9f%e5%92%8c%e6%b5%81" aria-label="åŸŸå’Œæµ">åŸŸå’Œæµ</a></li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8%e4%b8%ba%e5%be%aa%e7%8e%af%e8%80%8c%e6%8a%9b" aria-label="å¼‚å¸¸ä¸ºå¾ªç¯è€ŒæŠ›">å¼‚å¸¸ä¸ºå¾ªç¯è€ŒæŠ›</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="javaå¼‚å¸¸ç®€ä»‹">Javaå¼‚å¸¸ç®€ä»‹<a hidden class="anchor" aria-hidden="true" href="#javaå¼‚å¸¸ç®€ä»‹">#</a></h1>
<p>Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚</p>
<p><a href="https://mp.weixin.qq.com/s/OIWMLCNBLnmgqWCvwjGNQg">å…¶ä»–å‚è€ƒ</a></p>
<p>åœ¨æœ‰æ•ˆä½¿ç”¨å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œå¼‚å¸¸èƒ½æ¸…æ™°çš„å›ç­”whatã€whereã€whyè¿™3ä¸ªé—®é¢˜ï¼šå¼‚å¸¸ç±»å‹å›ç­”äº†â€œä»€ä¹ˆâ€è¢«æŠ›å‡ºï¼Œå¼‚å¸¸å †æ ˆè·Ÿè¸ªå›ç­”äº†â€œåœ¨å“ªâ€œæŠ›å‡ºï¼Œå¼‚å¸¸ä¿¡æ¯å›ç­”äº†â€œä¸ºä»€ä¹ˆâ€œä¼šæŠ›å‡ºã€‚</p>
<p>Javaå¼‚å¸¸æœºåˆ¶ç”¨åˆ°çš„å‡ ä¸ªå…³é”®å­—ï¼štryã€catchã€finallyã€throwã€throwsã€‚</p>
<ul>
<li>tryï¼šç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ç ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚</li>
<li>catchï¼šç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚</li>
<li>finallyï¼šfinallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„ç‰©ç†èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶ã€‚åªæœ‰finallyå—æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰ä¼šå›æ¥æ‰§è¡Œtryæˆ–è€…catchå—ä¸­çš„returnæˆ–è€…throwè¯­å¥ï¼Œå¦‚æœfinallyä¸­ä½¿ç”¨äº†returnæˆ–è€…throwç­‰ç»ˆæ­¢æ–¹æ³•çš„è¯­å¥ï¼Œåˆ™å°±ä¸ä¼šè·³å›æ‰§è¡Œï¼Œç›´æ¥åœæ­¢ã€‚</li>
<li>throwï¼šç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>throwsï¼šç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li>
</ul>
<p>åœ¨è®¡ç®—æœºç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼šå‡ºç°å„ç§å„æ ·çš„é”™è¯¯ã€‚
æœ‰ä¸€äº›é”™è¯¯æ˜¯ç”¨æˆ·é€ æˆçš„ï¼Œæ¯”å¦‚ï¼Œå¸Œæœ›ç”¨æˆ·è¾“å…¥ä¸€ä¸ªintç±»å‹çš„å¹´é¾„ï¼Œä½†æ˜¯ç”¨æˆ·çš„è¾“å…¥æ˜¯abcï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å‡è®¾ç”¨æˆ·è¾“å…¥äº†abcï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>String s = <span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> n = Integer.<span style="color:#007f7f">parseInt</span>(s); <span style="color:#007f7f">// NumberFormatException!
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç¨‹åºæƒ³è¦è¯»å†™æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä½†æ˜¯ç”¨æˆ·å·²ç»æŠŠå®ƒåˆ é™¤äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// ç”¨æˆ·åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>String t = readFile(<span style="color:#0ff;font-weight:bold">&#34;C:\\abc.txt&#34;</span>); <span style="color:#007f7f">// FileNotFoundException!
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜æœ‰ä¸€äº›é”™è¯¯æ˜¯éšæœºå‡ºç°ï¼Œå¹¶ä¸”æ°¸è¿œä¸å¯èƒ½é¿å…çš„ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>ç½‘ç»œçªç„¶æ–­äº†ï¼Œè¿æ¥ä¸åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼›</li>
<li>å†…å­˜è€—å°½ï¼Œç¨‹åºå´©æºƒäº†ï¼›</li>
<li>ç”¨æˆ·ç‚¹â€œæ‰“å°â€ï¼Œä½†æ ¹æœ¬æ²¡æœ‰æ‰“å°æœºï¼›</li>
</ul>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªå¥å£®çš„ç¨‹åºå¿…é¡»å¤„ç†å„ç§å„æ ·çš„é”™è¯¯ã€‚
æ‰€è°“é”™è¯¯ï¼Œå°±æ˜¯ç¨‹åºè°ƒç”¨æŸä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±è¡¨ç¤ºå‡ºé”™ã€‚
è°ƒç”¨æ–¹å¦‚ä½•è·çŸ¥è°ƒç”¨å¤±è´¥çš„ä¿¡æ¯ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•ï¼š
æ–¹æ³•ä¸€ï¼šçº¦å®šè¿”å›é”™è¯¯ç ã€‚
ä¾‹å¦‚ï¼Œå¤„ç†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºæˆåŠŸï¼Œè¿”å›å…¶ä»–æ•´æ•°ï¼Œè¡¨ç¤ºçº¦å®šçš„é”™è¯¯ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> code = processFile(<span style="color:#0ff;font-weight:bold">&#34;C:\\test.txt&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (code == <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ok:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// error:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">switch</span> (code) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">case</span> <span style="color:#ff0;font-weight:bold">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// file not found:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">case</span> <span style="color:#ff0;font-weight:bold">2</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// no read permission:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">default</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// unknown error:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºä½¿ç”¨intç±»å‹çš„é”™è¯¯ç ï¼Œæƒ³è¦å¤„ç†å°±éå¸¸éº»çƒ¦ã€‚è¿™ç§æ–¹å¼å¸¸è§äºåº•å±‚Cå‡½æ•°ã€‚
æ–¹æ³•äºŒï¼šåœ¨è¯­è¨€å±‚é¢ä¸Šæä¾›ä¸€ä¸ªå¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚Javaå†…ç½®äº†ä¸€å¥—å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ€»æ˜¯ä½¿ç”¨å¼‚å¸¸æ¥è¡¨ç¤ºé”™è¯¯ã€‚
å¼‚å¸¸æ˜¯ä¸€ç§classï¼Œå› æ­¤å®ƒæœ¬èº«å¸¦æœ‰ç±»å‹ä¿¡æ¯ã€‚å¼‚å¸¸å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºï¼Œä½†åªéœ€è¦åœ¨ä¸Šå±‚æ•è·ï¼Œè¿™æ ·å°±å’Œæ–¹æ³•è°ƒç”¨åˆ†ç¦»äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>    String s = processFile(<span style="color:#0ff;font-weight:bold">&#34;C:\\test.txt&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ok:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">catch</span> (FileNotFoundException e) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// file not found:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">catch</span> (SecurityException e) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// no read permission:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// io error:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// other error:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºJavaçš„å¼‚å¸¸æ˜¯classï¼Œå®ƒçš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                     â”‚  Object   â”‚
</span></span><span style="display:flex;"><span>                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                           â–²
</span></span><span style="display:flex;"><span>                           â”‚
</span></span><span style="display:flex;"><span>                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                     â”‚ Throwable â”‚
</span></span><span style="display:flex;"><span>                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                           â–²
</span></span><span style="display:flex;"><span>                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                 â”‚                   â”‚
</span></span><span style="display:flex;"><span>           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>           â”‚   Error   â”‚       â”‚ Exception â”‚
</span></span><span style="display:flex;"><span>           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                 â–²                   â–²
</span></span><span style="display:flex;"><span>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>         â”‚                      â”‚               â”‚
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚OutOfMemoryError â”‚... â”‚RuntimeException â”‚â”‚IOExceptionâ”‚...
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                                â–²
</span></span><span style="display:flex;"><span>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                    â”‚                         â”‚
</span></span><span style="display:flex;"><span>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>         â”‚NullPointerException â”‚ â”‚IllegalArgumentException â”‚...
</span></span><span style="display:flex;"><span>         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ç»§æ‰¿å…³ç³»å¯çŸ¥ï¼šThrowableæ˜¯å¼‚å¸¸ä½“ç³»çš„æ ¹ï¼Œå®ƒç»§æ‰¿è‡ªObjectã€‚
Throwableæœ‰ä¸¤ä¸ªä½“ç³»ï¼šErrorå’ŒExceptionï¼ŒErrorè¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼Œç¨‹åºå¯¹æ­¤ä¸€èˆ¬æ— èƒ½ä¸ºåŠ›ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>OutOfMemoryErrorï¼šå†…å­˜è€—å°½</li>
<li>NoClassDefFoundErrorï¼šæ— æ³•åŠ è½½æŸä¸ªClass</li>
<li>StackOverflowErrorï¼šæ ˆæº¢å‡º</li>
</ul>
<p>è€ŒExceptionåˆ™æ˜¯è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œå®ƒå¯ä»¥è¢«æ•è·å¹¶å¤„ç†ã€‚
æŸäº›å¼‚å¸¸æ˜¯åº”ç”¨ç¨‹åºé€»è¾‘å¤„ç†çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥æ•è·å¹¶å¤„ç†ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>NumberFormatExceptionï¼šæ•°å€¼ç±»å‹çš„æ ¼å¼é”™è¯¯</li>
<li>FileNotFoundExceptionï¼šæœªæ‰¾åˆ°æ–‡ä»¶</li>
<li>SocketExceptionï¼šè¯»å–ç½‘ç»œå¤±è´¥</li>
</ul>
<p>è¿˜æœ‰ä¸€äº›å¼‚å¸¸æ˜¯ç¨‹åºé€»è¾‘ç¼–å†™ä¸å¯¹é€ æˆçš„ï¼Œåº”è¯¥ä¿®å¤ç¨‹åºæœ¬èº«ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>NullPointerExceptionï¼šå¯¹æŸä¸ªnullçš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æˆ–å­—æ®µ</li>
<li>IndexOutOfBoundsExceptionï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ</li>
</ul>
<p>Exceptionåˆåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ul>
<li>RuntimeExceptionä»¥åŠå®ƒçš„å­ç±»ï¼›</li>
<li>éRuntimeExceptionï¼ˆåŒ…æ‹¬IOExceptionã€ReflectiveOperationExceptionç­‰ç­‰ï¼‰</li>
</ul>
<p>Javaè§„å®šï¼š</p>
<ul>
<li>å¿…é¡»æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ExceptionåŠå…¶å­ç±»ï¼Œä½†ä¸åŒ…æ‹¬RuntimeExceptionåŠå…¶å­ç±»ï¼Œè¿™ç§ç±»å‹çš„å¼‚å¸¸ç§°ä¸ºChecked Exceptionã€‚</li>
<li>ä¸éœ€è¦æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ErroråŠå…¶å­ç±»ï¼ŒRuntimeExceptionåŠå…¶å­ç±»ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šç¼–è¯‘å™¨å¯¹RuntimeExceptionåŠå…¶å­ç±»ä¸åšå¼ºåˆ¶æ•è·è¦æ±‚ï¼Œä¸æ˜¯æŒ‡åº”ç”¨ç¨‹åºæœ¬èº«ä¸åº”è¯¥æ•è·å¹¶å¤„ç†RuntimeExceptionã€‚æ˜¯å¦éœ€è¦æ•è·ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p>
<p>Javaå°†å¯æŠ›å‡º(Throwable)çš„ç»“æ„åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š
è¢«æ£€æŸ¥çš„å¼‚å¸¸(Checked Exception)
è¿è¡Œæ—¶å¼‚å¸¸(RuntimeException)
é”™è¯¯(Error)</p>
<ul>
<li>
<p>è¿è¡Œæ—¶å¼‚å¸¸
å®šä¹‰ï¼š<code>RuntimeException</code>åŠå…¶å­ç±»éƒ½è¢«ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚
ç‰¹ç‚¹ï¼šJavaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¨‹åºä¸­å¯èƒ½å‡ºç°è¿™ç±»å¼‚å¸¸æ—¶ï¼Œå€˜è‹¥æ—¢æ²¡æœ‰é€šè¿‡throwså£°æ˜æŠ›å‡ºå®ƒï¼Œä¹Ÿæ²¡æœ‰ç”¨try-catchè¯­å¥æ•è·å®ƒï¼Œè¿˜æ˜¯ä¼šç¼–è¯‘é€šè¿‡ã€‚ä¾‹å¦‚ï¼Œé™¤æ•°ä¸ºé›¶æ—¶äº§ç”Ÿçš„<code>ArithmeticException</code>å¼‚å¸¸ï¼Œæ•°ç»„è¶Šç•Œæ—¶äº§ç”Ÿçš„ <code>IndexOutOfBoundsException</code> å¼‚å¸¸ï¼Œfail-failæœºåˆ¶äº§ç”Ÿçš„<code>ConcurrentModificationException</code>å¼‚å¸¸ç­‰ï¼Œéƒ½å±äºè¿è¡Œæ—¶å¼‚å¸¸ã€‚è™½ç„¶Javaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡try-catchå¯¹å®ƒè¿›è¡Œæ•è·å¤„ç†ã€‚å¦‚æœäº§ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆ™éœ€è¦é€šè¿‡ä¿®æ”¹ä»£ç æ¥è¿›è¡Œé¿å…ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¼šå‘ç”Ÿé™¤æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç é¿å…è¯¥æƒ…å†µçš„å‘ç”Ÿã€‚</p>
</li>
<li>
<p>è¢«æ£€æŸ¥çš„å¼‚å¸¸
å®šä¹‰ï¼š<code>Exception</code> ç±»æœ¬èº«ï¼Œä»¥åŠExceptionçš„å­ç±»ä¸­é™¤äº†<code>è¿è¡Œæ—¶å¼‚å¸¸</code>ä¹‹å¤–çš„å…¶å®ƒå­ç±»éƒ½å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚ç‰¹ç‚¹ï¼šJavaç¼–è¯‘å™¨ä¼šæ£€æŸ¥å®ƒã€‚æ­¤ç±»å¼‚å¸¸ï¼Œè¦ä¹ˆé€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œè¦ä¹ˆé€šè¿‡try-catchè¿›è¡Œæ•è·å¤„ç†ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼Œ<code>CloneNotSupportedException</code> å°±å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚å½“é€šè¿‡clone()æ¥å£å»å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¯¥å¯¹è±¡å¯¹åº”çš„ç±»æ²¡æœ‰å®ç°Cloneableæ¥å£ï¼Œå°±ä¼šæŠ›å‡º<code>CloneNotSupportedException</code>å¼‚å¸¸ã€‚è¢«æ£€æŸ¥å¼‚å¸¸é€šå¸¸éƒ½æ˜¯å¯ä»¥æ¢å¤çš„ã€‚</p>
</li>
<li>
<p>é”™è¯¯
å®šä¹‰ï¼šErrorç±»åŠå…¶å­ç±»ã€‚
ç‰¹ç‚¹ï¼šå’Œè¿è¡Œæ—¶å¼‚å¸¸ä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå¯¹é”™è¯¯è¿›è¡Œæ£€æŸ¥ã€‚
å½“èµ„æºä¸è¶³ã€çº¦æŸå¤±è´¥ã€æˆ–æ˜¯å…¶å®ƒç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œçš„æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œå°±äº§ç”Ÿé”™è¯¯ã€‚ç¨‹åºæœ¬èº«æ— æ³•ä¿®å¤è¿™äº›é”™è¯¯çš„ã€‚ä¾‹å¦‚ï¼Œ<code>VirtualMachineError</code> å°±å±äºé”™è¯¯ã€‚æŒ‰ç…§Javaæƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ˜¯ä¸åº”è¯¥æ˜¯å®ç°ä»»ä½•æ–°çš„Errorå­ç±»çš„ã€‚</p>
</li>
</ul>
<p>å¯¹äºä¸Šé¢çš„3ç§ç»“æ„ï¼Œæˆ‘ä»¬åœ¨æŠ›å‡ºå¼‚å¸¸æˆ–é”™è¯¯æ—¶ï¼Œåˆ°åº•è¯¥å“ªä¸€ç§ï¼Ÿ
ã€ŠEffective Javaã€‹ä¸­ç»™å‡ºçš„å»ºè®®æ˜¯ï¼šå¯¹äºå¯ä»¥æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>
<h1 id="æ•è·å¼‚å¸¸">æ•è·å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#æ•è·å¼‚å¸¸">#</a></h1>
<p>æ•è·å¼‚å¸¸ä½¿ç”¨try&hellip;catchè¯­å¥ï¼ŒæŠŠå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç æ”¾åˆ°try {&hellip;}ä¸­ï¼Œç„¶åä½¿ç”¨catchæ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] bs = toGBK(<span style="color:#0ff;font-weight:bold">&#34;ä¸­æ–‡&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Arrays.<span style="color:#007f7f">toString</span>(bs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// å¦‚æœç³»ç»Ÿä¸æ”¯æŒGBKç¼–ç ï¼Œä¼šæ•è·åˆ°UnsupportedEncodingException:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(e); <span style="color:#007f7f">// æ‰“å°å¼‚å¸¸ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(); <span style="color:#007f7f">// å°è¯•ä½¿ç”¨ç”¨é»˜è®¤ç¼–ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæˆ‘ä»¬ä¸æ•è·<code>UnsupportedEncodingException</code>ï¼Œä¼šå‡ºç°ç¼–è¯‘å¤±è´¥çš„é—®é¢˜ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] bs = toGBK(<span style="color:#0ff;font-weight:bold">&#34;ä¸­æ–‡&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Arrays.<span style="color:#007f7f">toString</span>(bs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯ç±»ä¼¼ï¼š<code>unreported exception UnsupportedEncodingException; must be caught or declared to be thrown</code>ï¼Œå¹¶ä¸”å‡†ç¡®åœ°æŒ‡å‡ºéœ€è¦æ•è·çš„è¯­å¥æ˜¯<code>return s.getBytes(&quot;GBK&quot;);</code>ã€‚æ„æ€æ˜¯è¯´ï¼Œåƒ<code>UnsupportedEncodingException</code>è¿™æ ·çš„<code>Checked Exception</code>ï¼Œå¿…é¡»è¢«æ•è·ã€‚
è¿™æ˜¯å› ä¸º<code>String.getBytes(String)</code>æ–¹æ³•å®šä¹‰æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">byte</span>[] getBytes(String charsetName) <span style="color:#fff;font-weight:bold">throws</span> UnsupportedEncodingException {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ–¹æ³•å®šä¹‰çš„æ—¶å€™ï¼Œä½¿ç”¨throws Xxxè¡¨ç¤ºè¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚è°ƒç”¨æ–¹åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡»å¼ºåˆ¶æ•è·è¿™äº›å¼‚å¸¸ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚
åœ¨toGBK()æ–¹æ³•ä¸­ï¼Œå› ä¸ºè°ƒç”¨äº†<code>String.getBytes(String)</code>æ–¹æ³•ï¼Œå°±å¿…é¡»æ•è·<code>UnsupportedEncodingException</code>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸æ•è·å®ƒï¼Œè€Œæ˜¯åœ¨æ–¹æ³•å®šä¹‰å¤„ç”¨throwsè¡¨ç¤ºtoGBK()æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡º<code>UnsupportedEncodingException</code>ï¼Œå°±å¯ä»¥è®©toGBK()æ–¹æ³•é€šè¿‡ç¼–è¯‘å™¨æ£€æŸ¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] bs = toGBK(<span style="color:#0ff;font-weight:bold">&#34;ä¸­æ–‡&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Arrays.<span style="color:#007f7f">toString</span>(bs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) <span style="color:#fff;font-weight:bold">throws</span> UnsupportedEncodingException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç ä»ç„¶ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ï¼Œä½†è¿™ä¸€æ¬¡ï¼Œç¼–è¯‘å™¨æç¤ºçš„ä¸æ˜¯è°ƒç”¨<code>return s.getBytes(&quot;GBK&quot;);</code>çš„é—®é¢˜ï¼Œè€Œæ˜¯<code>byte[] bs = toGBK(&quot;ä¸­æ–‡&quot;);</code>ã€‚å› ä¸ºåœ¨main()æ–¹æ³•ä¸­ï¼Œè°ƒç”¨toGBK()ï¼Œæ²¡æœ‰æ•è·å®ƒå£°æ˜çš„å¯èƒ½æŠ›å‡ºçš„<code>UnsupportedEncodingException</code>ã€‚
ä¿®å¤æ–¹æ³•æ˜¯åœ¨main()æ–¹æ³•ä¸­æ•è·å¼‚å¸¸å¹¶å¤„ç†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">byte</span>[] bs = toGBK(<span style="color:#0ff;font-weight:bold">&#34;ä¸­æ–‡&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Arrays.<span style="color:#007f7f">toString</span>(bs));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) <span style="color:#fff;font-weight:bold">throws</span> UnsupportedEncodingException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è§ï¼Œåªè¦æ˜¯æ–¹æ³•å£°æ˜çš„Checked Exceptionï¼Œä¸åœ¨è°ƒç”¨å±‚æ•è·ï¼Œä¹Ÿå¿…é¡»åœ¨æ›´é«˜çš„è°ƒç”¨å±‚æ•è·ã€‚æ‰€æœ‰æœªæ•è·çš„å¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿå¿…é¡»åœ¨main()æ–¹æ³•ä¸­æ•è·ï¼Œä¸ä¼šå‡ºç°æ¼å†™tryçš„æƒ…å†µã€‚è¿™æ˜¯ç”±ç¼–è¯‘å™¨ä¿è¯çš„ã€‚main()æ–¹æ³•ä¹Ÿæ˜¯æœ€åæ•è·Exceptionçš„æœºä¼šã€‚</p>
<p>å¦‚æœæ˜¯æµ‹è¯•ä»£ç ï¼Œä¸Šé¢çš„å†™æ³•å°±ç•¥æ˜¾éº»çƒ¦ã€‚å¦‚æœä¸æƒ³å†™ä»»ä½•tryä»£ç ï¼Œå¯ä»¥ç›´æ¥æŠŠmain()æ–¹æ³•å®šä¹‰ä¸ºthrows Exceptionï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] bs = toGBK(<span style="color:#0ff;font-weight:bold">&#34;ä¸­æ–‡&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Arrays.<span style="color:#007f7f">toString</span>(bs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) <span style="color:#fff;font-weight:bold">throws</span> UnsupportedEncodingException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºmain()æ–¹æ³•å£°æ˜äº†å¯èƒ½æŠ›å‡ºExceptionï¼Œä¹Ÿå°±å£°æ˜äº†å¯èƒ½æŠ›å‡ºæ‰€æœ‰çš„Exceptionï¼Œå› æ­¤åœ¨å†…éƒ¨å°±æ— éœ€æ•è·äº†ã€‚ä»£ä»·å°±æ˜¯ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œç¨‹åºä¼šç«‹åˆ»é€€å‡ºã€‚
è¿˜æœ‰ä¸€äº›ç«¥é‹å–œæ¬¢åœ¨toGBK()å†…éƒ¨â€œæ¶ˆåŒ–â€å¼‚å¸¸ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»€ä¹ˆä¹Ÿä¸å¹²
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ•è·åä¸å¤„ç†çš„æ–¹å¼æ˜¯éå¸¸ä¸å¥½çš„ï¼Œå³ä½¿çœŸçš„ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œä¹Ÿè¦å…ˆæŠŠå¼‚å¸¸è®°å½•ä¸‹æ¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">byte</span>[] toGBK(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">getBytes</span>(<span style="color:#0ff;font-weight:bold">&#34;GBK&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å…ˆè®°ä¸‹æ¥å†è¯´:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€æœ‰å¼‚å¸¸éƒ½å¯ä»¥è°ƒç”¨printStackTrace()æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•æœ‰ç”¨çš„å¿«é€Ÿæ‰“å°å¼‚å¸¸çš„æ–¹æ³•ã€‚</p>
<p>åœ¨Javaä¸­ï¼Œå‡¡æ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨try &hellip; catchæ•è·ã€‚æŠŠå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„è¯­å¥æ”¾åœ¨try { &hellip; }ä¸­ï¼Œç„¶åä½¿ç”¨catchæ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨å¤šä¸ªcatchè¯­å¥ï¼Œæ¯ä¸ªcatchåˆ†åˆ«æ•è·å¯¹åº”çš„ExceptionåŠå…¶å­ç±»ã€‚JVMåœ¨æ•è·åˆ°å¼‚å¸¸åï¼Œä¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…catchè¯­å¥ï¼ŒåŒ¹é…åˆ°æŸä¸ªcatchåï¼Œæ‰§è¡Œcatchä»£ç å—ï¼Œç„¶åä¸å†ç»§ç»­åŒ¹é…ã€‚</p>
<p>ç®€å•åœ°è¯´å°±æ˜¯ï¼šå¤šä¸ªcatchè¯­å¥åªæœ‰ä¸€ä¸ªèƒ½è¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(e);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (NumberFormatException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(e);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­˜åœ¨å¤šä¸ªcatchçš„æ—¶å€™ï¼Œcatchçš„é¡ºåºéå¸¸é‡è¦ï¼šå­ç±»å¿…é¡»å†™åœ¨å‰é¢ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;IO error&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) { <span style="color:#007f7f">// æ°¸è¿œæ•è·ä¸åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad encoding&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äºä¸Šé¢çš„ä»£ç ï¼ŒUnsupportedEncodingExceptionå¼‚å¸¸æ˜¯æ°¸è¿œæ•è·ä¸åˆ°çš„ï¼Œå› ä¸ºå®ƒæ˜¯IOExceptionçš„å­ç±»ã€‚å½“æŠ›å‡ºUnsupportedEncodingExceptionå¼‚å¸¸æ—¶ï¼Œä¼šè¢«<code>catch (IOException e) { ... }</code>æ•è·å¹¶æ‰§è¡Œã€‚å› æ­¤ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯æŠŠå­ç±»æ”¾åˆ°å‰é¢ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad encoding&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;IO error&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="finallyè¯­å¥">finallyè¯­å¥<a hidden class="anchor" aria-hidden="true" href="#finallyè¯­å¥">#</a></h2>
<p>æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œå¦‚æœæˆ‘ä»¬éƒ½å¸Œæœ›æ‰§è¡Œä¸€äº›è¯­å¥ï¼Œä¾‹å¦‚æ¸…ç†å·¥ä½œï¼Œæ€ä¹ˆå†™ï¼Ÿ
å¯ä»¥æŠŠæ‰§è¡Œè¯­å¥å†™è‹¥å¹²éï¼šæ­£å¸¸æ‰§è¡Œçš„æ”¾åˆ°tryä¸­ï¼Œæ¯ä¸ªcatchå†å†™ä¸€éã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;END&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad encoding&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;END&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;IO error&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;END&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ<code>System.out.println(&quot;END&quot;);</code>è¿™æ¡è¯­å¥ã€‚
é‚£ä¹ˆå¦‚ä½•æ¶ˆé™¤è¿™äº›é‡å¤çš„ä»£ç ï¼ŸJavaçš„try &hellip; catchæœºåˆ¶è¿˜æä¾›äº†finallyè¯­å¥ï¼Œfinallyè¯­å¥å—ä¿è¯æœ‰æ— é”™è¯¯éƒ½ä¼šæ‰§è¡Œã€‚ä¸Šè¿°ä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (UnsupportedEncodingException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad encoding&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;IO error&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;END&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„finallyæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>finallyè¯­å¥ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯å†™å¯ä¸å†™ï¼›</li>
<li>finallyæ€»æ˜¯æœ€åæ‰§è¡Œã€‚</li>
</ul>
<p>å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œå°±æ­£å¸¸æ‰§è¡Œtry { &hellip; }è¯­å¥å—ï¼Œç„¶åæ‰§è¡Œfinallyã€‚å¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±ä¸­æ–­æ‰§è¡Œtry { &hellip; }è¯­å¥å—ï¼Œç„¶åè·³è½¬æ‰§è¡ŒåŒ¹é…çš„catchè¯­å¥å—ï¼Œæœ€åæ‰§è¡Œfinallyã€‚
å¯è§ï¼Œfinallyæ˜¯ç”¨æ¥ä¿è¯ä¸€äº›ä»£ç å¿…é¡»æ‰§è¡Œçš„ã€‚
æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥æ²¡æœ‰catchï¼Œåªä½¿ç”¨try &hellip; finallyç»“æ„ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> process(String file) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;END&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºæ–¹æ³•å£°æ˜äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ‰€ä»¥å¯ä»¥ä¸å†™catchã€‚</p>
<h2 id="æ•è·å¤šç§å¼‚å¸¸">æ•è·å¤šç§å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#æ•è·å¤šç§å¼‚å¸¸">#</a></h2>
<p>å¦‚æœæŸäº›å¼‚å¸¸çš„å¤„ç†é€»è¾‘ç›¸åŒï¼Œä½†æ˜¯å¼‚å¸¸æœ¬èº«ä¸å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œé‚£ä¹ˆå°±å¾—ç¼–å†™å¤šæ¡catchå­å¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad input&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (NumberFormatException e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad input&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Unknown error&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºå¤„ç†IOExceptionå’ŒNumberFormatExceptionçš„ä»£ç æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä¸¤ç”¨<code>|</code>åˆå¹¶åˆ°ä¸€èµ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process1();
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>        process3();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException | NumberFormatException e) { <span style="color:#007f7f">// IOExceptionæˆ–NumberFormatException
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bad input&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Unknown error&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="æŠ›å‡ºå¼‚å¸¸">æŠ›å‡ºå¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#æŠ›å‡ºå¼‚å¸¸">#</a></h1>
<p>å½“æŸä¸ªæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œå¦‚æœå½“å‰æ–¹æ³•æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸å°±ä¼šè¢«æŠ›åˆ°ä¸Šå±‚è°ƒç”¨æ–¹æ³•ï¼Œç›´åˆ°é‡åˆ°æŸä¸ªtry &hellip; catchè¢«æ•è·ä¸ºæ­¢ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            process1();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process1() {
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process2() {
</span></span><span style="display:flex;"><span>        Integer.<span style="color:#007f7f">parseInt</span>(<span style="color:#fff;font-weight:bold">null</span>); <span style="color:#007f7f">// ä¼šæŠ›å‡ºNumberFormatException
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡printStackTrace()å¯ä»¥æ‰“å°å‡ºæ–¹æ³•çš„è°ƒç”¨æ ˆï¼Œç±»ä¼¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>java.lang.NumberFormatException: null
</span></span><span style="display:flex;"><span>    at java.base/java.lang.Integer.parseInt(Integer.java:614)
</span></span><span style="display:flex;"><span>    at java.base/java.lang.Integer.parseInt(Integer.java:770)
</span></span><span style="display:flex;"><span>    at Main.process2(Main.java:16)
</span></span><span style="display:flex;"><span>    at Main.process1(Main.java:12)
</span></span><span style="display:flex;"><span>    at Main.main(Main.java:5)
</span></span></code></pre></td></tr></table>
</div>
</div><p>printStackTrace()å¯¹äºè°ƒè¯•é”™è¯¯éå¸¸æœ‰ç”¨ï¼Œä¸Šè¿°ä¿¡æ¯è¡¨ç¤ºï¼šNumberFormatExceptionæ˜¯åœ¨java.lang.Integer.parseIntæ–¹æ³•ä¸­è¢«æŠ›å‡ºçš„ï¼Œä»ä¸‹å¾€ä¸Šçœ‹ï¼Œè°ƒç”¨å±‚æ¬¡ä¾æ¬¡æ˜¯ï¼š</p>
<ol>
<li>main()è°ƒç”¨process1()ï¼›</li>
<li>process1()è°ƒç”¨process2()ï¼›</li>
<li>process2()è°ƒç”¨Integer.parseInt(String)ï¼›</li>
<li>Ineger.parseInt(String)è°ƒç”¨Integer.parseInt(String, int)ã€‚</li>
</ol>
<p>æŸ¥çœ‹Integer.javaæºç å¯çŸ¥ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> parseInt(String s, <span style="color:#fff;font-weight:bold">int</span> radix) <span style="color:#fff;font-weight:bold">throws</span> NumberFormatException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (s == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NumberFormatException(<span style="color:#0ff;font-weight:bold">&#34;null&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŸ¥çœ‹Integer.javaæºç å¯çŸ¥ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> parseInt(String s, <span style="color:#fff;font-weight:bold">int</span> radix) <span style="color:#fff;font-weight:bold">throws</span> NumberFormatException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (s == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NumberFormatException(<span style="color:#0ff;font-weight:bold">&#34;null&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¹¶ä¸”ï¼Œæ¯å±‚è°ƒç”¨å‡ç»™å‡ºäº†æºä»£ç çš„è¡Œå·ï¼Œå¯ç›´æ¥å®šä½ã€‚
å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·è¾“å…¥äº†éæ³•çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚
å¦‚ä½•æŠ›å‡ºå¼‚å¸¸ï¼Ÿå‚è€ƒ<code>Integer.parseInt()</code>æ–¹æ³•ï¼ŒæŠ›å‡ºå¼‚å¸¸åˆ†ä¸¤æ­¥ï¼š</p>
<ul>
<li>åˆ›å»ºæŸä¸ªExceptionçš„å®ä¾‹ï¼›</li>
<li>ç”¨throwè¯­å¥æŠ›å‡ºã€‚</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> process2(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (s == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        NullPointerException e = <span style="color:#fff;font-weight:bold">new</span> NullPointerException();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> e;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®é™…ä¸Šï¼Œç»å¤§éƒ¨åˆ†æŠ›å‡ºå¼‚å¸¸çš„ä»£ç éƒ½ä¼šåˆå¹¶å†™æˆä¸€è¡Œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> process2(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (s == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NullPointerException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ•è·äº†æŸä¸ªå¼‚å¸¸åï¼Œåˆåœ¨catchå­å¥ä¸­æŠ›å‡ºæ–°çš„å¼‚å¸¸ï¼Œå°±ç›¸å½“äºæŠŠæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹â€œè½¬æ¢â€äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> process1(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        process2();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (NullPointerException e) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> process2(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (s == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NullPointerException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“process2()æŠ›å‡ºNullPointerExceptionåï¼Œè¢«process1()æ•è·ï¼Œç„¶åæŠ›å‡ºIllegalArgumentException()ã€‚
å¦‚æœåœ¨main()ä¸­æ•è·IllegalArgumentExceptionï¼Œæˆ‘ä»¬çœ‹çœ‹æ‰“å°çš„å¼‚å¸¸æ ˆï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            process1();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process1() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            process2();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (NullPointerException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process2() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NullPointerException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>java.lang.IllegalArgumentException
</span></span><span style="display:flex;"><span>    at Main.process1(Main.java:15)
</span></span><span style="display:flex;"><span>    at Main.main(Main.java:5)
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™è¯´æ˜æ–°çš„å¼‚å¸¸ä¸¢å¤±äº†åŸå§‹å¼‚å¸¸ä¿¡æ¯ï¼Œæˆ‘ä»¬å·²ç»çœ‹ä¸åˆ°åŸå§‹å¼‚å¸¸NullPointerExceptionçš„ä¿¡æ¯äº†ã€‚
ä¸ºäº†èƒ½è¿½è¸ªåˆ°å®Œæ•´çš„å¼‚å¸¸æ ˆï¼Œåœ¨æ„é€ å¼‚å¸¸çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹çš„Exceptionå®ä¾‹ä¼ è¿›å»ï¼Œæ–°çš„Exceptionå°±å¯ä»¥æŒæœ‰åŸå§‹Exceptionä¿¡æ¯ã€‚å¯¹ä¸Šè¿°ä»£ç æ”¹è¿›å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            process1();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process1() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            process2();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (NullPointerException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process2() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NullPointerException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">IllegalArgumentException</span>: java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">NullPointerException</span>
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">process1</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">15</span>)
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">main</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">5</span>)
</span></span><span style="display:flex;"><span>Caused by: java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">NullPointerException</span>
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">process2</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">20</span>)
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">process1</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">13</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°Caused by: Xxxï¼Œè¯´æ˜æ•è·çš„IllegalArgumentExceptionå¹¶ä¸æ˜¯é€ æˆé—®é¢˜çš„æ ¹æºï¼Œæ ¹æºåœ¨äºNullPointerExceptionï¼Œæ˜¯åœ¨Main.process2()æ–¹æ³•æŠ›å‡ºçš„ã€‚</p>
<p>åœ¨ä»£ç ä¸­è·å–åŸå§‹å¼‚å¸¸å¯ä»¥ä½¿ç”¨Throwable.getCause()æ–¹æ³•ã€‚å¦‚æœè¿”å›nullï¼Œè¯´æ˜å·²ç»æ˜¯â€œæ ¹å¼‚å¸¸â€äº†ã€‚
æœ‰äº†å®Œæ•´çš„å¼‚å¸¸æ ˆçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ‰èƒ½å¿«é€Ÿå®šä½å¹¶ä¿®å¤ä»£ç çš„é—®é¢˜ã€‚
æ•è·åˆ°å¼‚å¸¸å¹¶å†æ¬¡æŠ›å‡ºæ—¶ï¼Œä¸€å®šè¦ç•™ä½åŸå§‹å¼‚å¸¸ï¼Œå¦åˆ™å¾ˆéš¾å®šä½ç¬¬ä¸€æ¡ˆå‘ç°åœºï¼</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨tryæˆ–è€…catchè¯­å¥å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œfinallyè¯­å¥æ˜¯å¦ä¼šæ‰§è¡Œï¼Ÿä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            Integer.<span style="color:#007f7f">parseInt</span>(<span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;catched&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;finally&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>catched
</span></span><span style="display:flex;"><span>finally
</span></span><span style="display:flex;"><span>Exception in thread &#34;main&#34; java.lang.RuntimeException: java.lang.NumberFormatException: For input string: &#34;abc&#34;
</span></span><span style="display:flex;"><span>    at Main.main(Main.java:8)
</span></span><span style="display:flex;"><span>Caused by: java.lang.NumberFormatException: For input string: &#34;abc&#34;
</span></span><span style="display:flex;"><span>    at ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€è¡Œæ‰“å°äº†catchedï¼Œè¯´æ˜è¿›å…¥äº†catchè¯­å¥å—ã€‚ç¬¬äºŒè¡Œæ‰“å°äº†finallyï¼Œè¯´æ˜æ‰§è¡Œäº†finallyè¯­å¥å—ã€‚
å› æ­¤ï¼Œåœ¨catchä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šå½±å“finallyçš„æ‰§è¡Œã€‚JVMä¼šå…ˆæ‰§è¡Œfinallyï¼Œç„¶åæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h2 id="å¼‚å¸¸å±è”½">å¼‚å¸¸å±è”½<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸å±è”½">#</a></h2>
<p>å¦‚æœåœ¨æ‰§è¡Œfinallyè¯­å¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆï¼Œcatchè¯­å¥çš„å¼‚å¸¸è¿˜èƒ½å¦ç»§ç»­æŠ›å‡ºï¼Ÿä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            Integer.<span style="color:#007f7f">parseInt</span>(<span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;catched&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;finally&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå‘ç°å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>catched
</span></span><span style="display:flex;"><span>finally
</span></span><span style="display:flex;"><span>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
</span></span><span style="display:flex;"><span>    at Main.main(Main.java:11)
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™è¯´æ˜finallyæŠ›å‡ºå¼‚å¸¸åï¼ŒåŸæ¥åœ¨catchä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±â€œæ¶ˆå¤±â€äº†ï¼Œå› ä¸ºåªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚æ²¡æœ‰è¢«æŠ›å‡ºçš„å¼‚å¸¸ç§°ä¸ºâ€œè¢«å±è”½â€çš„å¼‚å¸¸ï¼ˆSuppressed Exceptionï¼‰ã€‚
åœ¨æå°‘æ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è·çŸ¥æ‰€æœ‰çš„å¼‚å¸¸ã€‚å¦‚ä½•ä¿å­˜æ‰€æœ‰çš„å¼‚å¸¸ä¿¡æ¯ï¼Ÿæ–¹æ³•æ˜¯å…ˆç”¨originå˜é‡ä¿å­˜åŸå§‹å¼‚å¸¸ï¼Œç„¶åè°ƒç”¨<code>Throwable.addSuppressed()</code>ï¼ŒæŠŠåŸå§‹å¼‚å¸¸æ·»åŠ è¿›æ¥ï¼Œæœ€ååœ¨finallyæŠ›å‡ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        Exception origin = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(Integer.<span style="color:#007f7f">parseInt</span>(<span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            origin = e;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> e;
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            Exception e = <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (origin != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#007f7f">addSuppressed</span>(origin);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> e;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“catchå’Œfinallyéƒ½æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œè™½ç„¶catchçš„å¼‚å¸¸è¢«å±è”½äº†ï¼Œä½†æ˜¯ï¼ŒfinallyæŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶åŒ…å«äº†å®ƒï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Exception in thread <span style="color:#0ff;font-weight:bold">&#34;main&#34;</span> java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">IllegalArgumentException</span>
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">main</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">11</span>)
</span></span><span style="display:flex;"><span>Suppressed: java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">NumberFormatException</span>: For input string: <span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">base</span>/java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">NumberFormatException</span>.<span style="color:#007f7f">forInputString</span>(NumberFormatException.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">65</span>)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">base</span>/java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">Integer</span>.<span style="color:#007f7f">parseInt</span>(Integer.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">652</span>)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">base</span>/java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">Integer</span>.<span style="color:#007f7f">parseInt</span>(Integer.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">770</span>)
</span></span><span style="display:flex;"><span>    at Main.<span style="color:#007f7f">main</span>(Main.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">6</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡Throwable.getSuppressed()å¯ä»¥è·å–æ‰€æœ‰çš„Suppressed Exceptionã€‚
ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨finallyä¸­ä¸è¦æŠ›å‡ºå¼‚å¸¸ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦å…³å¿ƒSuppressed Exceptionã€‚</p>
<h1 id="è‡ªå®šä¹‰å¼‚å¸¸">è‡ªå®šä¹‰å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#è‡ªå®šä¹‰å¼‚å¸¸">#</a></h1>
<p>Javaæ ‡å‡†åº“å®šä¹‰çš„å¸¸ç”¨å¼‚å¸¸åŒ…æ‹¬ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Exception
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â”œâ”€ RuntimeException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ NullPointerException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ IndexOutOfBoundsException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ SecurityException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â””â”€ IllegalArgumentException
</span></span><span style="display:flex;"><span>â”‚     â”‚
</span></span><span style="display:flex;"><span>â”‚     â””â”€ NumberFormatException
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â”œâ”€ IOException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ UnsupportedCharsetException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ FileNotFoundException
</span></span><span style="display:flex;"><span>â”‚  â”‚
</span></span><span style="display:flex;"><span>â”‚  â””â”€ SocketException
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â”œâ”€ ParseException
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â”œâ”€ GeneralSecurityException
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â”œâ”€ SQLException
</span></span><span style="display:flex;"><span>â”‚
</span></span><span style="display:flex;"><span>â””â”€ TimeoutException
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­éœ€è¦æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå°½é‡ä½¿ç”¨JDKå·²å®šä¹‰çš„å¼‚å¸¸ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå‚æ•°æ£€æŸ¥ä¸åˆæ³•ï¼Œåº”è¯¥æŠ›å‡º<code>IllegalArgumentException</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> process1(<span style="color:#fff;font-weight:bold">int</span> age) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (age &lt;= <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰æ–°çš„å¼‚å¸¸ç±»å‹ï¼Œä½†æ˜¯ï¼Œä¿æŒä¸€ä¸ªåˆç†çš„å¼‚å¸¸ç»§æ‰¿ä½“ç³»æ˜¯éå¸¸é‡è¦çš„ã€‚
ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªBaseExceptionä½œä¸ºâ€œæ ¹å¼‚å¸¸â€ï¼Œç„¶åï¼Œæ´¾ç”Ÿå‡ºå„ç§ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸ã€‚
BaseExceptionéœ€è¦ä»ä¸€ä¸ªé€‚åˆçš„Exceptionæ´¾ç”Ÿï¼Œé€šå¸¸å»ºè®®ä»RuntimeExceptionæ´¾ç”Ÿï¼š
<code>public class BaseException extends RuntimeException {}</code>
å…¶ä»–ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸å°±å¯ä»¥ä»BaseExceptionæ´¾ç”Ÿï¼š
<code>public class UserNotFoundException extends BaseException {}</code>
<code>public class LoginFailedException extends BaseException {}</code></p>
<p>è‡ªå®šä¹‰çš„BaseExceptionåº”è¯¥æä¾›å¤šä¸ªæ„é€ æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> BaseException <span style="color:#fff;font-weight:bold">extends</span> RuntimeException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BaseException() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BaseException(String message, Throwable cause) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(message, cause);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BaseException(String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(message);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BaseException(Throwable cause) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(cause);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°æ„é€ æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯åŸæ ·ç…§æŠ„RuntimeExceptionã€‚è¿™æ ·ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©åˆé€‚çš„æ„é€ æ–¹æ³•ã€‚é€šè¿‡IDEå¯ä»¥æ ¹æ®çˆ¶ç±»å¿«é€Ÿç”Ÿæˆå­ç±»çš„æ„é€ æ–¹æ³•ã€‚</p>
<h1 id="nullpointerexception">NullPointerException<a hidden class="anchor" aria-hidden="true" href="#nullpointerexception">#</a></h1>
<p>åœ¨æ‰€æœ‰çš„RuntimeExceptionå¼‚å¸¸ä¸­ï¼ŒJavaç¨‹åºå‘˜æœ€ç†Ÿæ‚‰çš„ææ€•å°±æ˜¯NullPointerExceptionäº†ã€‚
NullPointerExceptionå³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¿—ç§°NPEã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸ºnullï¼Œè°ƒç”¨å…¶æ–¹æ³•æˆ–è®¿é—®å…¶å­—æ®µå°±ä¼šäº§ç”ŸNullPointerExceptionï¼Œè¿™ä¸ªå¼‚å¸¸é€šå¸¸æ˜¯ç”±JVMæŠ›å‡ºçš„ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String s = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s.<span style="color:#007f7f">toLowerCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡é’ˆè¿™ä¸ªæ¦‚å¿µå®é™…ä¸Šæºè‡ªCè¯­è¨€ï¼ŒJavaè¯­è¨€ä¸­å¹¶æ— æŒ‡é’ˆã€‚æˆ‘ä»¬å®šä¹‰çš„å˜é‡å®é™…ä¸Šæ˜¯å¼•ç”¨ï¼ŒNull Pointeræ›´ç¡®åˆ‡åœ°è¯´æ˜¯Null Referenceï¼Œä¸è¿‡ä¸¤è€…åŒºåˆ«ä¸å¤§ã€‚
å¦‚æœé‡åˆ°NullPointerExceptionï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿé¦–å…ˆï¼Œå¿…é¡»æ˜ç¡®ï¼ŒNullPointerExceptionæ˜¯ä¸€ç§ä»£ç é€»è¾‘é”™è¯¯ï¼Œé‡åˆ°NullPointerExceptionï¼Œéµå¾ªåŸåˆ™æ˜¯æ—©æš´éœ²ï¼Œæ—©ä¿®å¤ï¼Œä¸¥ç¦ä½¿ç”¨catchæ¥éšè—è¿™ç§ç¼–ç é”™è¯¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// é”™è¯¯ç¤ºä¾‹: æ•è·NullPointerException
</span></span><span style="display:flex;"><span>try {
</span></span><span style="display:flex;"><span>    transferMoney(from, to, amount);
</span></span><span style="display:flex;"><span>} catch (NullPointerException e) {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¥½çš„ç¼–ç ä¹ æƒ¯å¯ä»¥æå¤§åœ°é™ä½NullPointerExceptionçš„äº§ç”Ÿï¼Œä¾‹å¦‚ï¼š
æˆå‘˜å˜é‡åœ¨å®šä¹‰æ—¶åˆå§‹åŒ–ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public class Person {
</span></span><span style="display:flex;"><span>    private String name = &#34;&#34;;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ç©ºå­—ç¬¦ä¸²&quot;&ldquo;è€Œä¸æ˜¯é»˜è®¤çš„nullå¯é¿å…å¾ˆå¤šNullPointerExceptionï¼Œç¼–å†™ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œç”¨ç©ºå­—ç¬¦ä¸²&quot;&ldquo;è¡¨ç¤ºæœªå¡«å†™æ¯”nullå®‰å…¨å¾—å¤šã€‚
è¿”å›ç©ºå­—ç¬¦ä¸²&rdquo;&quot;ã€ç©ºæ•°ç»„è€Œä¸æ˜¯nullï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String[] readLinesFromFile(String file) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (getFileSize(file) == <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿”å›ç©ºæ•°ç»„è€Œä¸æ˜¯null:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> String[<span style="color:#ff0;font-weight:bold">0</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·å¯ä»¥ä½¿å¾—è°ƒç”¨æ–¹æ— éœ€æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºnullã€‚
å¦‚æœè°ƒç”¨æ–¹ä¸€å®šè¦æ ¹æ®nullåˆ¤æ–­ï¼Œæ¯”å¦‚è¿”å›nullè¡¨ç¤ºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè€ƒè™‘è¿”å›<code>Optional&lt;T&gt;</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Optional&lt;String&gt; readFromFile(String file) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!fileExist(file)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Optional.<span style="color:#007f7f">empty</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·è°ƒç”¨æ–¹å¿…é¡»é€šè¿‡Optional.isPresent()åˆ¤æ–­æ˜¯å¦æœ‰ç»“æœã€‚</p>
<h2 id="å®šä½nullpointerexception">å®šä½NullPointerException<a hidden class="anchor" aria-hidden="true" href="#å®šä½nullpointerexception">#</a></h2>
<p>å¦‚æœäº§ç”Ÿäº†NullPointerExceptionï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨a.b.c.x()æ—¶äº§ç”Ÿäº†NullPointerExceptionï¼ŒåŸå› å¯èƒ½æ˜¯ï¼š</p>
<p>aæ˜¯nullï¼›
a.bæ˜¯nullï¼›
a.b.cæ˜¯nullï¼›</p>
<p>åªèƒ½é€šè¿‡è¿™æ ·çš„æ—¥å¿—ï¼Œæ‰èƒ½åˆ¤æ–­å“ªä¸ªå¯¹è±¡æ˜¯null</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>System.out.println(a);
</span></span><span style="display:flex;"><span>System.out.println(a.b);
</span></span><span style="display:flex;"><span>System.out.println(a.b.c);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»Java 14å¼€å§‹ï¼Œå¦‚æœäº§ç”Ÿäº†NullPointerExceptionï¼ŒJVMå¯ä»¥ç»™å‡ºè¯¦ç»†çš„ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬nullå¯¹è±¡åˆ°åº•æ˜¯è°ã€‚æˆ‘ä»¬æ¥çœ‹ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Person p = <span style="color:#fff;font-weight:bold">new</span> Person();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(p.<span style="color:#007f7f">address</span>.<span style="color:#007f7f">city</span>.<span style="color:#007f7f">toLowerCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String[] name = <span style="color:#fff;font-weight:bold">new</span> String[<span style="color:#ff0;font-weight:bold">2</span>];
</span></span><span style="display:flex;"><span>    Address address = <span style="color:#fff;font-weight:bold">new</span> Address();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Address {
</span></span><span style="display:flex;"><span>    String city;
</span></span><span style="display:flex;"><span>    String street;
</span></span><span style="display:flex;"><span>    String zipcode;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥åœ¨<code>NullPointerException</code>çš„è¯¦ç»†ä¿¡æ¯ä¸­çœ‹åˆ°ç±»ä¼¼<code>... because &quot;&lt;local1&gt;.address.city&quot; is null</code>ï¼Œæ„æ€æ˜¯cityå­—æ®µä¸ºnullï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚
è¿™ç§å¢å¼ºçš„NullPointerExceptionè¯¦ç»†ä¿¡æ¯æ˜¯Java 14æ–°å¢çš„åŠŸèƒ½ï¼Œä½†é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»™JVMæ·»åŠ å‚æ•°å¯ç”¨å®ƒï¼š
<code>java -XX:+ShowCodeDetailsInExceptionMessages Main.java</code></p>
<h1 id="ä½¿ç”¨æ–­è¨€">ä½¿ç”¨æ–­è¨€<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨æ–­è¨€">#</a></h1>
<p>æ–­è¨€ï¼ˆAssertionï¼‰æ˜¯ä¸€ç§è°ƒè¯•ç¨‹åºçš„æ–¹å¼ã€‚åœ¨Javaä¸­ï¼Œä½¿ç”¨assertå…³é”®å­—æ¥å®ç°æ–­è¨€ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">double</span> x = Math.<span style="color:#007f7f">abs</span>(-<span style="color:#ff0;font-weight:bold">123.45</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">assert</span> x &gt;= <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(x);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯­å¥assert x &gt;= 0;å³ä¸ºæ–­è¨€ï¼Œæ–­è¨€æ¡ä»¶x &gt;= 0é¢„æœŸä¸ºtrueã€‚å¦‚æœè®¡ç®—ç»“æœä¸ºfalseï¼Œåˆ™æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºAssertionErrorã€‚
ä½¿ç”¨assertè¯­å¥æ—¶ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªå¯é€‰çš„æ–­è¨€æ¶ˆæ¯ï¼š
<code>assert x &gt;= 0 : &quot;x must &gt;= 0&quot;;</code>
Javaæ–­è¨€çš„ç‰¹ç‚¹æ˜¯ï¼šæ–­è¨€å¤±è´¥æ—¶ä¼šæŠ›å‡ºAssertionErrorï¼Œå¯¼è‡´ç¨‹åºç»“æŸé€€å‡ºã€‚å› æ­¤ï¼Œæ–­è¨€ä¸èƒ½ç”¨äºå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œåªåº”è¯¥ç”¨äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µã€‚
å¯¹äºå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œä¸åº”è¯¥ä½¿ç”¨æ–­è¨€ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>void sort(int[] arr) {
</span></span><span style="display:flex;"><span>    assert arr != null;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åº”è¯¥æŠ›å‡ºå¼‚å¸¸å¹¶åœ¨ä¸Šå±‚æ•è·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>void sort(int[] arr) {
</span></span><span style="display:flex;"><span>    if (arr == null) {
</span></span><span style="display:flex;"><span>        throw new IllegalArgumentException(&#34;array cannot be null&#34;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­ä½¿ç”¨assertæ—¶ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æ–­è¨€ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> x = -<span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">assert</span> x &gt; <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(x);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–­è¨€xå¿…é¡»å¤§äº0ï¼Œå®é™…ä¸Šxä¸º-1ï¼Œæ–­è¨€è‚¯å®šå¤±è´¥ã€‚æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå‘ç°ç¨‹åºå¹¶æœªæŠ›å‡ºAssertionErrorï¼Œè€Œæ˜¯æ­£å¸¸æ‰“å°äº†xçš„å€¼ã€‚
è¿™æ˜¯æ€ä¹ˆè‚¥å››ï¼Ÿä¸ºä»€ä¹ˆassertè¯­å¥ä¸èµ·ä½œç”¨ï¼Ÿ
è¿™æ˜¯å› ä¸ºJVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œå³é‡åˆ°assertè¯­å¥å°±è‡ªåŠ¨å¿½ç•¥äº†ï¼Œä¸æ‰§è¡Œã€‚
è¦æ‰§è¡Œassertè¯­å¥ï¼Œå¿…é¡»ç»™Javaè™šæ‹Ÿæœºä¼ é€’-enableassertionsï¼ˆå¯ç®€å†™ä¸º-eaï¼‰å‚æ•°å¯ç”¨æ–­è¨€ã€‚æ‰€ä»¥ï¼Œä¸Šè¿°ç¨‹åºå¿…é¡»åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œæ‰æœ‰æ•ˆæœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ java -ea Main.java
</span></span><span style="display:flex;"><span>Exception in thread &#34;main&#34; java.lang.AssertionError
</span></span><span style="display:flex;"><span>	at Main.main(Main.java:5)
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜å¯ä»¥æœ‰é€‰æ‹©åœ°å¯¹ç‰¹å®šåœ°ç±»å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š-ea:com.itranswarp.sample.Mainï¼Œè¡¨ç¤ºåªå¯¹com.itranswarp.sample.Mainè¿™ä¸ªç±»å¯ç”¨æ–­è¨€ã€‚
æˆ–è€…å¯¹ç‰¹å®šåœ°åŒ…å¯ç”¨æ–­è¨€ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ï¼š-ea:com.itranswarp.sample&hellip;ï¼ˆæ³¨æ„ç»“å°¾æœ‰3ä¸ª.ï¼‰ï¼Œè¡¨ç¤ºå¯¹com.itranswarp.sampleè¿™ä¸ªåŒ…å¯åŠ¨æ–­è¨€ã€‚
å®é™…å¼€å‘ä¸­ï¼Œå¾ˆå°‘ä½¿ç”¨æ–­è¨€ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œåç»­æˆ‘ä»¬ä¼šè®²è§£JUnitçš„ä½¿ç”¨ã€‚</p>
<h1 id="å¼‚å¸¸å’Œæ—¥å¿—">å¼‚å¸¸å’Œæ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸å’Œæ—¥å¿—">#</a></h1>
<h2 id="ä½¿ç”¨jdk-logging">ä½¿ç”¨JDK Logging<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨jdk-logging">#</a></h2>
<p>åœ¨ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¨‹åºè¿è¡Œç»“æœä¸é¢„æœŸä¸ç¬¦ï¼Œæ€ä¹ˆåŠï¼Ÿå½“ç„¶æ˜¯ç”¨<code>System.out.println()</code>æ‰“å°å‡ºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸäº›å˜é‡ï¼Œè§‚å¯Ÿæ¯ä¸€æ­¥çš„ç»“æœä¸ä»£ç é€»è¾‘æ˜¯å¦ç¬¦åˆï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°ä¿®æ”¹ä»£ç ã€‚</p>
<p>ä»£ç æ”¹å¥½äº†æ€ä¹ˆåŠï¼Ÿå½“ç„¶æ˜¯åˆ é™¤æ²¡æœ‰ç”¨çš„System.out.println()è¯­å¥äº†ã€‚
å¦‚æœæ”¹ä»£ç åˆæ”¹å‡ºé—®é¢˜æ€ä¹ˆåŠï¼Ÿå†åŠ ä¸ŠSystem.out.println()ã€‚
åå¤è¿™ä¹ˆæå‡ æ¬¡ï¼Œå¾ˆå¿«å¤§å®¶å°±å‘ç°ä½¿ç”¨System.out.println()éå¸¸éº»çƒ¦ã€‚
æ€ä¹ˆåŠï¼Ÿ
è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨æ—¥å¿—ã€‚
é‚£ä»€ä¹ˆæ˜¯æ—¥å¿—ï¼Ÿæ—¥å¿—å°±æ˜¯Loggingï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å–ä»£System.out.println()ã€‚
è¾“å‡ºæ—¥å¿—ï¼Œè€Œä¸æ˜¯ç”¨System.out.println()ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š</p>
<p>å¯ä»¥è®¾ç½®è¾“å‡ºæ ·å¼ï¼Œé¿å…è‡ªå·±æ¯æ¬¡éƒ½å†™&quot;ERROR: &quot; + varï¼›
å¯ä»¥è®¾ç½®è¾“å‡ºçº§åˆ«ï¼Œç¦æ­¢æŸäº›çº§åˆ«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œåªè¾“å‡ºé”™è¯¯æ—¥å¿—ï¼›
å¯ä»¥è¢«é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨ç¨‹åºè¿è¡Œç»“æŸåæŸ¥çœ‹æ—¥å¿—ï¼›
å¯ä»¥æŒ‰åŒ…åæ§åˆ¶æ—¥å¿—çº§åˆ«ï¼Œåªè¾“å‡ºæŸäº›åŒ…æ‰“çš„æ—¥å¿—ï¼›
å¯ä»¥â€¦â€¦
æ€»ä¹‹å°±æ˜¯å¥½å¤„å¾ˆå¤šå•¦ã€‚
å› ä¸ºJavaæ ‡å‡†åº“å†…ç½®äº†æ—¥å¿—åŒ…<code>java.util.logging</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ã€‚å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Hello {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Logger logger = Logger.<span style="color:#007f7f">getGlobal</span>();
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;start process...&#34;</span>);
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">warning</span>(<span style="color:#0ff;font-weight:bold">&#34;memory is running out...&#34;</span>);
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">fine</span>(<span style="color:#0ff;font-weight:bold">&#34;ignored.&#34;</span>);
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">severe</span>(<span style="color:#0ff;font-weight:bold">&#34;process will be terminated...&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Mar 02, 2019 6:32:13 PM Hello main
</span></span><span style="display:flex;"><span>INFO: start process...
</span></span><span style="display:flex;"><span>Mar 02, 2019 6:32:13 PM Hello main
</span></span><span style="display:flex;"><span>WARNING: memory is running out...
</span></span><span style="display:flex;"><span>Mar 02, 2019 6:32:13 PM Hello main
</span></span><span style="display:flex;"><span>SEVERE: process will be terminated...
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹æ¯”å¯è§ï¼Œä½¿ç”¨æ—¥å¿—æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒè‡ªåŠ¨æ‰“å°äº†æ—¶é—´ã€è°ƒç”¨ç±»ã€è°ƒç”¨æ–¹æ³•ç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚
å†ä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ4æ¡æ—¥å¿—ï¼Œåªæ‰“å°äº†3æ¡ï¼Œlogger.fine()æ²¡æœ‰æ‰“å°ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¥å¿—çš„è¾“å‡ºå¯ä»¥è®¾å®šçº§åˆ«ã€‚JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»ä¸¥é‡åˆ°æ™®é€šï¼š</p>
<p>SEVERE
WARNING
INFO
CONFIG
FINE
FINER
FINEST</p>
<p>å› ä¸ºé»˜è®¤çº§åˆ«æ˜¯INFOï¼Œå› æ­¤ï¼ŒINFOçº§åˆ«ä»¥ä¸‹çš„æ—¥å¿—ï¼Œä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚ä½¿ç”¨æ—¥å¿—çº§åˆ«çš„å¥½å¤„åœ¨äºï¼Œè°ƒæ•´çº§åˆ«ï¼Œå°±å¯ä»¥å±è”½æ‰å¾ˆå¤šè°ƒè¯•ç›¸å…³çš„æ—¥å¿—è¾“å‡ºã€‚
ä½¿ç”¨Javaæ ‡å‡†åº“å†…ç½®çš„Loggingæœ‰ä»¥ä¸‹å±€é™ï¼š</p>
<p>Loggingç³»ç»Ÿåœ¨JVMå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶å¹¶å®Œæˆåˆå§‹åŒ–ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œmain()æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®ï¼›é…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•°<code>-Djava.util.logging.config.file=&lt;config-file-name&gt;ã€‚</code>
å› æ­¤ï¼ŒJavaæ ‡å‡†åº“å†…ç½®çš„Loggingä½¿ç”¨å¹¶ä¸æ˜¯éå¸¸å¹¿æ³›ã€‚æ›´æ–¹ä¾¿çš„æ—¥å¿—ç³»ç»Ÿæˆ‘ä»¬ç¨åä»‹ç»ã€‚</p>
<h2 id="ä½¿ç”¨commons-logging">ä½¿ç”¨Commons Logging<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨commons-logging">#</a></h2>
<p>å’ŒJavaæ ‡å‡†åº“æä¾›çš„æ—¥å¿—ä¸åŒï¼ŒCommons Loggingæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ—¥å¿—åº“ï¼Œå®ƒæ˜¯ç”±Apacheåˆ›å»ºçš„æ—¥å¿—æ¨¡å—ã€‚</p>
<p>ä½¿ç”¨ Commons Loggingï¼Œéœ€è¦å¼•å…¥</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>commons-logging<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>commons-logging<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Commons Loggingçš„ç‰¹è‰²æ˜¯ï¼Œå®ƒå¯ä»¥æŒ‚æ¥ä¸åŒçš„æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šæŒ‚æ¥çš„æ—¥å¿—ç³»ç»Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCommons Logginè‡ªåŠ¨æœç´¢å¹¶ä½¿ç”¨Log4jï¼ˆLog4jæ˜¯å¦ä¸€ä¸ªæµè¡Œçš„æ—¥å¿—ç³»ç»Ÿï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°Log4jï¼Œå†ä½¿ç”¨JDK Loggingã€‚
ä½¿ç”¨Commons Loggingåªéœ€è¦å’Œä¸¤ä¸ªç±»æ‰“äº¤é“ï¼Œå¹¶ä¸”åªæœ‰ä¸¤æ­¥ï¼š
ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡LogFactoryè·å–Logç±»çš„å®ä¾‹ï¼› ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨Logå®ä¾‹çš„æ–¹æ³•æ‰“æ—¥å¿—ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Log log = LogFactory.<span style="color:#007f7f">getLog</span>(Main.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;start...&#34;</span>);
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">warn</span>(<span style="color:#0ff;font-weight:bold">&#34;end.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Mar 02, 2019 7:15:31 PM Main main
</span></span><span style="display:flex;"><span>INFO: start...
</span></span><span style="display:flex;"><span>Mar 02, 2019 7:15:31 PM Main main
</span></span><span style="display:flex;"><span>WARNING: end.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Commons Loggingå®šä¹‰äº†6ä¸ªæ—¥å¿—çº§åˆ«ï¼š</p>
<p>fatal
error
waring
info
debug
trace</p>
<p>é»˜è®¤çº§åˆ«æ˜¯INFOã€‚
ä½¿ç”¨Commons Loggingæ—¶ï¼Œå¦‚æœåœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Logï¼Œé€šå¸¸ç›´æ¥å®šä¹‰ä¸€ä¸ªé™æ€ç±»å‹å˜é‡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Log log = LogFactory.<span style="color:#007f7f">getLog</span>(Main.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> foo() {
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;foo&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Logï¼Œé€šå¸¸å®šä¹‰ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">final</span> Log log = LogFactory.<span style="color:#007f7f">getLog</span>(getClass());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> foo() {
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;foo&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°å®ä¾‹å˜é‡logçš„è·å–æ–¹å¼æ˜¯
<code>LogFactory.getLog(getClass())</code>ï¼Œ
è™½ç„¶ä¹Ÿå¯ä»¥ç”¨
<code>LogFactory.getLog(Person.class)</code>ï¼Œ
ä½†æ˜¯å‰ä¸€ç§æ–¹å¼æœ‰ä¸ªéå¸¸å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥logå®ä¾‹ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»å®ä¾‹åŒ–çš„log:
</span></span><span style="display:flex;"><span>public class Student extends Person {
</span></span><span style="display:flex;"><span>    void bar() {
</span></span><span style="display:flex;"><span>        log.info(&#34;bar&#34;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äºJavaç±»çš„åŠ¨æ€ç‰¹æ€§ï¼Œå­ç±»è·å–çš„logå­—æ®µå®é™…ä¸Šç›¸å½“äºLogFactory.getLog(Student.class)ï¼Œä½†å´æ˜¯ä»çˆ¶ç±»ç»§æ‰¿è€Œæ¥ï¼Œå¹¶ä¸”æ— éœ€æ”¹åŠ¨ä»£ç ã€‚
æ­¤å¤–ï¼ŒCommons Loggingçš„æ—¥å¿—æ–¹æ³•ï¼Œä¾‹å¦‚info()ï¼Œé™¤äº†æ ‡å‡†çš„info(String)å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é‡è½½æ–¹æ³•ï¼šinfo(String, Throwable)ï¼Œè¿™ä½¿å¾—è®°å½•å¼‚å¸¸æ›´åŠ ç®€å•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>    log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;got exception!&#34;</span>, e);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨log4j">ä½¿ç”¨Log4j<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨log4j">#</a></h2>
<p>å‰é¢ä»‹ç»äº†Commons Loggingï¼Œå¯ä»¥ä½œä¸ºâ€œæ—¥å¿—æ¥å£â€æ¥ä½¿ç”¨ã€‚è€ŒçœŸæ­£çš„â€œæ—¥å¿—å®ç°â€å¯ä»¥ä½¿ç”¨Log4jã€‚
Log4jæ˜¯ä¸€ç§éå¸¸æµè¡Œçš„æ—¥å¿—æ¡†æ¶ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯2.xã€‚
Log4jæ˜¯ä¸€ä¸ªç»„ä»¶åŒ–è®¾è®¡çš„æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒçš„æ¶æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>log.info(&#34;User signed in.&#34;);
</span></span><span style="display:flex;"><span> â”‚
</span></span><span style="display:flex;"><span> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span> â”œâ”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚ Console  â”‚
</span></span><span style="display:flex;"><span> â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span> â”‚
</span></span><span style="display:flex;"><span> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span> â”œâ”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚   File   â”‚
</span></span><span style="display:flex;"><span> â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span> â”‚
</span></span><span style="display:flex;"><span> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span> â””â”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚  Socket  â”‚
</span></span><span style="display:flex;"><span>     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬ä½¿ç”¨Log4jè¾“å‡ºä¸€æ¡æ—¥å¿—æ—¶ï¼ŒLog4jè‡ªåŠ¨é€šè¿‡ä¸åŒçš„AppenderæŠŠåŒä¸€æ¡æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼š</p>
<p>consoleï¼šè¾“å‡ºåˆ°å±å¹•ï¼›
fileï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼›
socketï¼šé€šè¿‡ç½‘ç»œè¾“å‡ºåˆ°è¿œç¨‹è®¡ç®—æœºï¼›
jdbcï¼šè¾“å‡ºåˆ°æ•°æ®åº“</p>
<p>åœ¨è¾“å‡ºæ—¥å¿—çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Filteræ¥è¿‡æ»¤å“ªäº›logéœ€è¦è¢«è¾“å‡ºï¼Œå“ªäº›logä¸éœ€è¦è¢«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä»…è¾“å‡ºERRORçº§åˆ«çš„æ—¥å¿—ã€‚
æœ€åï¼Œé€šè¿‡Layoutæ¥æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œè‡ªåŠ¨æ·»åŠ æ—¥æœŸã€æ—¶é—´ã€æ–¹æ³•åç§°ç­‰ä¿¡æ¯ã€‚
ä¸Šè¿°ç»“æ„è™½ç„¶å¤æ‚ï¼Œä½†æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒLog4jçš„APIï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒã€‚
ä»¥XMLé…ç½®ä¸ºä¾‹ï¼Œä½¿ç”¨Log4jçš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªlog4j2.xmlçš„æ–‡ä»¶æ”¾åˆ°classpathä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;Configuration&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;Properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å®šä¹‰æ—¥å¿—æ ¼å¼ --&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;Property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;log.pattern&#34;</span><span style="font-weight:bold">&gt;</span>%d{MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36}%n%msg%n%n<span style="font-weight:bold">&lt;/Property&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å®šä¹‰æ–‡ä»¶åå˜é‡ --&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;Property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;file.err.filename&#34;</span><span style="font-weight:bold">&gt;</span>log/err.log<span style="font-weight:bold">&lt;/Property&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;Property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;file.err.pattern&#34;</span><span style="font-weight:bold">&gt;</span>log/err.%i.log.gz<span style="font-weight:bold">&lt;/Property&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/Properties&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- å®šä¹‰Appenderï¼Œå³ç›®çš„åœ° --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;Appenders&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°å±å¹• --&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;Console</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;console&#34;</span> <span style="color:#007f7f">target=</span><span style="color:#0ff;font-weight:bold">&#34;SYSTEM_OUT&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- æ—¥å¿—æ ¼å¼å¼•ç”¨ä¸Šé¢å®šä¹‰çš„log.pattern --&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;PatternLayout</span> <span style="color:#007f7f">pattern=</span><span style="color:#0ff;font-weight:bold">&#34;${log.pattern}&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/Console&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°æ–‡ä»¶,æ–‡ä»¶åå¼•ç”¨ä¸Šé¢å®šä¹‰çš„file.err.filename --&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;RollingFile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;err&#34;</span> <span style="color:#007f7f">bufferedIO=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">fileName=</span><span style="color:#0ff;font-weight:bold">&#34;${file.err.filename}&#34;</span> <span style="color:#007f7f">filePattern=</span><span style="color:#0ff;font-weight:bold">&#34;${file.err.pattern}&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;PatternLayout</span> <span style="color:#007f7f">pattern=</span><span style="color:#0ff;font-weight:bold">&#34;${log.pattern}&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;Policies&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!-- æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨åˆ‡å‰²æ—¥å¿— --&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;SizeBasedTriggeringPolicy</span> <span style="color:#007f7f">size=</span><span style="color:#0ff;font-weight:bold">&#34;1 MB&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/Policies&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- ä¿ç•™æœ€è¿‘10ä»½ --&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;DefaultRolloverStrategy</span> <span style="color:#007f7f">max=</span><span style="color:#0ff;font-weight:bold">&#34;10&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/RollingFile&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/Appenders&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;Loggers&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;Root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;info&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- å¯¹infoçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°console --&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;AppenderRef</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;console&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;info&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- å¯¹errorçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°errï¼Œå³ä¸Šé¢å®šä¹‰çš„RollingFile --&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;AppenderRef</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;err&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;error&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/Root&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/Loggers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/Configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶é…ç½®Log4jæ¯”è¾ƒç¹çï¼Œä½†ä¸€æ—¦é…ç½®å®Œæˆï¼Œä½¿ç”¨èµ·æ¥å°±éå¸¸æ–¹ä¾¿ã€‚å¯¹ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œå‡¡æ˜¯INFOçº§åˆ«çš„æ—¥å¿—ï¼Œä¼šè‡ªåŠ¨è¾“å‡ºåˆ°å±å¹•ï¼Œè€ŒERRORçº§åˆ«çš„æ—¥å¿—ï¼Œä¸ä½†ä¼šè¾“å‡ºåˆ°å±å¹•ï¼Œè¿˜ä¼šåŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶ã€‚å¹¶ä¸”ï¼Œä¸€æ—¦æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°ï¼ˆ1MBï¼‰ï¼ŒLog4jå°±ä¼šè‡ªåŠ¨åˆ‡å‰²æ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶æœ€å¤šä¿ç•™10ä»½ã€‚</p>
<p>ä½¿ç”¨log4jï¼Œéœ€è¦å…ˆå¼•å…¥</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;org.<span style="color:#007f7f">apache</span>.<span style="color:#007f7f">logging</span>.<span style="color:#007f7f">log4j</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">2.14.1</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;org.<span style="color:#007f7f">apache</span>.<span style="color:#007f7f">logging</span>.<span style="color:#007f7f">log4j</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">2.14.1</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;org.<span style="color:#007f7f">apache</span>.<span style="color:#007f7f">logging</span>.<span style="color:#007f7f">log4j</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;log4j-jcl&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">2.14.1</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºCommons Loggingä¼šè‡ªåŠ¨å‘ç°å¹¶ä½¿ç”¨Log4jï¼Œè¦æ‰“å°æ—¥å¿—ï¼Œåªéœ€è¦æŒ‰Commons Loggingçš„å†™æ³•å†™ï¼Œä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå°±å¯ä»¥å¾—åˆ°Log4jçš„æ—¥å¿—è¾“å‡ºï¼Œç±»ä¼¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>03-03 12:09:45.880 [main] INFO  com.itranswarp.learnjava.Main
</span></span><span style="display:flex;"><span>Start process...
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨slf4jå’Œlogback">ä½¿ç”¨SLF4Jå’ŒLogback<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨slf4jå’Œlogback">#</a></h2>
<p>SLF4Jç±»ä¼¼äºCommons Loggingï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ—¥å¿—æ¥å£ï¼Œè€ŒLogbackç±»ä¼¼äºLog4jï¼Œæ˜¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°ã€‚
ä¸ºä»€ä¹ˆæœ‰äº†Commons Loggingå’ŒLog4jï¼Œåˆä¼šè¹¦å‡ºæ¥SLF4Jå’ŒLogbackï¼Ÿè¿™æ˜¯å› ä¸ºJavaæœ‰ç€éå¸¸æ‚ ä¹…çš„å¼€æºå†å²ï¼Œä¸ä½†OpenJDKæœ¬èº«æ˜¯å¼€æºçš„ï¼Œè€Œä¸”æˆ‘ä»¬ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå‡ ä¹å…¨éƒ¨éƒ½æ˜¯å¼€æºçš„ã€‚å¼€æºç”Ÿæ€ä¸°å¯Œçš„ä¸€ä¸ªç‰¹å®šå°±æ˜¯ï¼ŒåŒä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥æ‰¾åˆ°è‹¥å¹²ç§äº’ç›¸ç«äº‰çš„å¼€æºåº“ã€‚
å› ä¸ºå¯¹Commons Loggingçš„æ¥å£ä¸æ»¡æ„ï¼Œæœ‰äººå°±æäº†SLF4Jã€‚å› ä¸ºå¯¹Log4jçš„æ€§èƒ½ä¸æ»¡æ„ï¼Œæœ‰äººå°±æäº†Logbackã€‚
æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹SLF4Jå¯¹Commons Loggingçš„æ¥å£æœ‰ä½•æ”¹è¿›ã€‚åœ¨Commons Loggingä¸­ï¼Œæˆ‘ä»¬è¦æ‰“å°æ—¥å¿—ï¼Œæœ‰æ—¶å€™å¾—è¿™ä¹ˆå†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>int score = 99;
</span></span><span style="display:flex;"><span>p.setScore(score);
</span></span><span style="display:flex;"><span>log.info(&#34;Set score &#34; + score + &#34; for Person &#34; + p.getName() + &#34; ok.&#34;);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‹¼å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œæ‰€ä»¥SLF4Jçš„æ—¥å¿—æ¥å£æ”¹è¿›æˆè¿™æ ·äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>int score = 99;
</span></span><span style="display:flex;"><span>p.setScore(score);
</span></span><span style="display:flex;"><span>logger.info(&#34;Set score {} for Person {} ok.&#34;, score, p.getName());
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬é çŒœä¹Ÿèƒ½çŒœå‡ºæ¥ï¼ŒSLF4Jçš„æ—¥å¿—æ¥å£ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå¸¦å ä½ç¬¦çš„å­—ç¬¦ä¸²ï¼Œç”¨åé¢çš„å˜é‡è‡ªåŠ¨æ›¿æ¢å ä½ç¬¦ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æ›´åŠ è‡ªç„¶ã€‚
å¦‚ä½•ä½¿ç”¨SLF4Jï¼Ÿå®ƒçš„æ¥å£å®é™…ä¸Šå’ŒCommons Loggingå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> Logger logger = LoggerFactory.<span style="color:#007f7f">getLogger</span>(getClass());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹æ¯”ä¸€ä¸‹Commons Loggingå’ŒSLF4Jçš„æ¥å£ï¼š</p>
<table>
<thead>
<tr>
<th>Commons Logging</th>
<th>SLF4J</th>
</tr>
</thead>
<tbody>
<tr>
<td>org.apache.commons.logging.Log</td>
<td>org.slf4j.Logger</td>
</tr>
<tr>
<td>org.apache.commons.logging.LogFactory</td>
<td>org.slf4j.LoggerFactory</td>
</tr>
</tbody>
</table>
<p>ä¸åŒä¹‹å¤„å°±æ˜¯Logå˜æˆäº†Loggerï¼ŒLogFactoryå˜æˆäº†LoggerFactoryã€‚
è¦ä½¿ç”¨SLF4Jå’ŒLogbackï¼Œå…ˆå¼•å…¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;org.<span style="color:#007f7f">slf4j</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">1.7.32</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;ch.<span style="color:#007f7f">qos</span>.<span style="color:#007f7f">logback</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">1.2.5</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;dependency&gt;
</span></span><span style="display:flex;"><span>    &lt;groupId&gt;ch.<span style="color:#007f7f">qos</span>.<span style="color:#007f7f">logback</span>&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>    &lt;artifactId&gt;logback-core&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>    &lt;version&gt;<span style="color:#ff0;font-weight:bold">1.2.5</span>&lt;/version&gt;
</span></span><span style="display:flex;"><span>&lt;/dependency&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åä½¿ç”¨SLF4Jçš„Loggerå’ŒLoggerFactoryå³å¯ã€‚å’ŒLog4jç±»ä¼¼ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€ä¸ªLogbackçš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠlogback.xmlæ”¾åˆ°classpathä¸‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;charset&gt;</span>utf-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;file&gt;</span>log/output.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;fileNamePattern&gt;</span>log/output.log.%i<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;triggeringPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;MaxFileSize&gt;</span>1MB<span style="font-weight:bold">&lt;/MaxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/triggeringPolicy&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œå³å¯è·å¾—ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š
<code>13:15:25.328 [main] INFO  com.itranswarp.learnjava.Main - Start process...</code></p>
<h1 id="å¼‚å¸¸ç®€å•ç¤ºä¾‹">å¼‚å¸¸ç®€å•ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸ç®€å•ç¤ºä¾‹">#</a></h1>
<h2 id="tryå’ŒcatchåŸºæœ¬ç”¨æ³•">tryå’ŒcatchåŸºæœ¬ç”¨æ³•<a hidden class="anchor" aria-hidden="true" href="#tryå’ŒcatchåŸºæœ¬ç”¨æ³•">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Demo1 {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">10</span>/<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;i=&#34;</span>+i); 
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ArithmeticException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Caught Exception&#34;</span>); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.getMessage(): &#34;</span> + e.<span style="color:#007f7f">getMessage</span>()); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.toString(): &#34;</span> + e.<span style="color:#007f7f">toString</span>()); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.printStackTrace():&#34;</span>);
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>(); 
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Caught Exception
</span></span><span style="display:flex;"><span>e.<span style="color:#007f7f">getMessage</span>(): / by zero
</span></span><span style="display:flex;"><span>e.<span style="color:#007f7f">toString</span>(): java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">ArithmeticException</span>: / by zero
</span></span><span style="display:flex;"><span>e.<span style="color:#007f7f">printStackTrace</span>():
</span></span><span style="display:flex;"><span>java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">ArithmeticException</span>: / by zero
</span></span><span style="display:flex;"><span>    at Demo1.<span style="color:#007f7f">main</span>(Demo1.<span style="color:#007f7f">java</span>:<span style="color:#ff0;font-weight:bold">6</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼šåœ¨tryè¯­å¥å—ä¸­æœ‰é™¤æ•°ä¸º0çš„æ“ä½œï¼Œè¯¥æ“ä½œä¼šæŠ›å‡ºjava.lang.ArithmeticExceptionå¼‚å¸¸ã€‚
é€šè¿‡catchï¼Œå¯¹è¯¥å¼‚å¸¸è¿›è¡Œæ•è·ã€‚è§‚å¯Ÿç»“æœæˆ‘ä»¬å‘ç°ï¼Œå¹¶æ²¡æœ‰æ‰§è¡ŒSystem.out.println(&ldquo;i=&quot;+i)ã€‚
è¿™è¯´æ˜tryè¯­å¥å—å‘ç”Ÿå¼‚å¸¸ä¹‹åï¼Œtryè¯­å¥å—ä¸­çš„å‰©ä½™å†…å®¹å°±ä¸ä¼šå†è¢«æ‰§è¡Œäº†ã€‚</p>
<h2 id="finallyçš„åŸºæœ¬ç”¨æ³•">finallyçš„åŸºæœ¬ç”¨æ³•<a hidden class="anchor" aria-hidden="true" href="#finallyçš„åŸºæœ¬ç”¨æ³•">#</a></h2>
<p>åœ¨ç¤ºä¾‹ä¸€çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ finallyè¯­å¥ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Demo2 {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">10</span>/<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;i=&#34;</span>+i); 
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ArithmeticException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Caught Exception&#34;</span>); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.getMessage(): &#34;</span> + e.<span style="color:#007f7f">getMessage</span>()); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.toString(): &#34;</span> + e.<span style="color:#007f7f">toString</span>()); 
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;e.printStackTrace():&#34;</span>);
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>(); 
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;run finally&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Caught Exception
</span></span><span style="display:flex;"><span>e.getMessage(): / by zero
</span></span><span style="display:flex;"><span>e.toString(): java.lang.ArithmeticException: / by zero
</span></span><span style="display:flex;"><span>e.printStackTrace():
</span></span><span style="display:flex;"><span>java.lang.ArithmeticException: / by zero
</span></span><span style="display:flex;"><span>    at Demo2.main(Demo2.java:6)
</span></span><span style="display:flex;"><span>run finally
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼šæœ€ç»ˆæ‰§è¡Œäº†finallyè¯­å¥å—ã€‚</p>
<h2 id="throwså’Œthrowçš„åŸºæœ¬ç”¨æ³•">throwså’Œthrowçš„åŸºæœ¬ç”¨æ³•<a hidden class="anchor" aria-hidden="true" href="#throwså’Œthrowçš„åŸºæœ¬ç”¨æ³•">#</a></h2>
<p>throwsæ˜¯ç”¨äºå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè€Œthrowæ˜¯ç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> MyException <span style="color:#fff;font-weight:bold">extends</span> Exception {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> MyException() {}
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> MyException(String msg) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(msg);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Demo3 {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            test();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (MyException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Catch My Exception&#34;</span>);
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> test() <span style="color:#fff;font-weight:bold">throws</span> MyException{
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">10</span>/<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>              System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;i=&#34;</span>+i); 
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ArithmeticException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MyException(<span style="color:#0ff;font-weight:bold">&#34;This is MyException&#34;</span>); 
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Catch My Exception
</span></span><span style="display:flex;"><span>MyException: This is MyException
</span></span><span style="display:flex;"><span>    at Demo3.test(Demo3.java:24)
</span></span><span style="display:flex;"><span>    at Demo3.main(Demo3.java:13)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼š
MyExceptionæ˜¯ç»§æ‰¿äºExceptionçš„å­ç±»ã€‚test()çš„tryè¯­å¥å—ä¸­äº§ç”ŸArithmeticExceptionå¼‚å¸¸(é™¤æ•°ä¸º0)ï¼Œå¹¶åœ¨catchä¸­æ•è·è¯¥å¼‚å¸¸ï¼›æ¥ç€æŠ›å‡ºMyExceptionå¼‚å¸¸ã€‚main()æ–¹æ³•å¯¹test()ä¸­æŠ›å‡ºçš„MyExceptionè¿›è¡Œæ•è·å¤„ç†ã€‚</p>
<h1 id="try-catchå’Œå¾ªç¯">try-catchå’Œå¾ªç¯<a hidden class="anchor" aria-hidden="true" href="#try-catchå’Œå¾ªç¯">#</a></h1>
<p>try-catch åº”è¯¥æ”¾åœ¨å¾ªç¯ä½“å¤–ï¼Œè¿˜æ˜¯æ”¾åœ¨å¾ªç¯ä½“å†…ï¼Ÿä¸‹é¢ä»æ€§èƒ½å’Œä¸šåŠ¡åœºæ™¯åˆ†æè¿™ä¸¤ä¸ªæ–¹é¢æ¥åˆ†æè¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="æ€§èƒ½åˆ†æ">æ€§èƒ½åˆ†æ<a hidden class="anchor" aria-hidden="true" href="#æ€§èƒ½åˆ†æ">#</a></h2>
<p>æˆ‘ä»¬ä½¿ç”¨ Oracle å®˜æ–¹æä¾›çš„ JMHï¼ˆJava Microbenchmark Harnessï¼ŒJAVA å¾®åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼‰æ¥è¿›è¡Œæµ‹è¯•ã€‚
é¦–å…ˆåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  JMH æ¡†æ¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- https://mvnrepository.com/artifact/org.openjdk.jmh/jmh-core --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;groupId&gt;</span>org.openjdk.jmh<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;artifactId&gt;</span>jmh-core<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;version&gt;</span>{version}<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œæ•´æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.openjdk.jmh.annotations.*;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.openjdk.jmh.runner.Runner;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.openjdk.jmh.runner.RunnerException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.openjdk.jmh.runner.options.Options;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.openjdk.jmh.runner.options.OptionsBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.concurrent.TimeUnit;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * try - catch æ€§èƒ½æµ‹è¯•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>@BenchmarkMode(Mode.<span style="color:#007f7f">AverageTime</span>) <span style="color:#007f7f">// æµ‹è¯•å®Œæˆæ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@OutputTimeUnit(TimeUnit.<span style="color:#007f7f">NANOSECONDS</span>)
</span></span><span style="display:flex;"><span>@Warmup(iterations = <span style="color:#ff0;font-weight:bold">1</span>, time = <span style="color:#ff0;font-weight:bold">1</span>, timeUnit = TimeUnit.<span style="color:#007f7f">SECONDS</span>) <span style="color:#007f7f">// é¢„çƒ­ 1 è½®ï¼Œæ¯æ¬¡ 1s
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Measurement(iterations = <span style="color:#ff0;font-weight:bold">5</span>, time = <span style="color:#ff0;font-weight:bold">5</span>, timeUnit = TimeUnit.<span style="color:#007f7f">SECONDS</span>) <span style="color:#007f7f">// æµ‹è¯• 5 è½®ï¼Œæ¯æ¬¡ 3s
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Fork(<span style="color:#ff0;font-weight:bold">1</span>) <span style="color:#007f7f">// fork 1 ä¸ªçº¿ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@State(Scope.<span style="color:#007f7f">Benchmark</span>)
</span></span><span style="display:flex;"><span>@Threads(<span style="color:#ff0;font-weight:bold">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TryCatchPerformanceTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> forSize = <span style="color:#ff0;font-weight:bold">1000</span>; <span style="color:#007f7f">// å¾ªç¯æ¬¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> RunnerException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¯åŠ¨åŸºå‡†æµ‹è¯•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Options opt = <span style="color:#fff;font-weight:bold">new</span> OptionsBuilder()
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">include</span>(TryCatchPerformanceTest.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">getSimpleName</span>()) <span style="color:#007f7f">// è¦å¯¼å…¥çš„æµ‹è¯•ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                .<span style="color:#007f7f">build</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Runner(opt).<span style="color:#007f7f">run</span>(); <span style="color:#007f7f">// æ‰§è¡Œæµ‹è¯•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Benchmark
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> innerForeach() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; forSize; i++) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (i == forSize) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;new Exception&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                count++;
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Benchmark
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> outerForeach() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; forSize; i++) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (i == forSize) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;new Exception&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                count++;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œé™¤å»è¯¯å·®å€¼ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“è®ºæ˜¯ï¼štry-catch æ— è®ºæ˜¯åœ¨ for å¾ªç¯å†…è¿˜æ˜¯  for å¾ªç¯å¤–ï¼Œå®ƒä»¬çš„æ€§èƒ½ç›¸åŒï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚</p>
<h2 id="try-catchçš„æœ¬è´¨">try-catchçš„æœ¬è´¨<a hidden class="anchor" aria-hidden="true" href="#try-catchçš„æœ¬è´¨">#</a></h2>
<p>è¦ç†è§£ try-catch çš„æ€§èƒ½é—®é¢˜ï¼Œå¿…é¡»ä»å®ƒçš„å­—èŠ‚ç å¼€å§‹åˆ†æï¼Œåªæœ‰è¿™æ ·æˆ‘èƒ½æ‰èƒ½çŸ¥é“ try-catch çš„æœ¬è´¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒæ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬å†™ä¸€ä¸ªæœ€ç®€å•çš„ try-catch ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> count = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;new Exception&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åä½¿ç”¨ javac ç”Ÿæˆå­—èŠ‚ç ä¹‹åï¼Œå†ä½¿ç”¨ javap -c AppTest çš„å‘½ä»¤æ¥æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f00">âœ</span> javap -c AppTest 
</span></span><span style="display:flex;"><span><span style="color:#f00">è­¦å‘Š</span>: <span style="color:#f00">äºŒè¿›åˆ¶æ–‡ä»¶</span>AppTest<span style="color:#f00">åŒ…å«</span>com.<span style="color:#007f7f">example</span>.<span style="color:#007f7f">AppTest</span>
</span></span><span style="display:flex;"><span>Compiled from <span style="color:#0ff;font-weight:bold">&#34;AppTest.java&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> com.<span style="color:#007f7f">example</span>.<span style="color:#007f7f">AppTest</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> com.<span style="color:#007f7f">example</span>.<span style="color:#007f7f">AppTest</span>();
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">0</span>: aload_0
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">1</span>: invokespecial <span style="color:#f00">#</span><span style="color:#ff0;font-weight:bold">1</span>                  <span style="color:#007f7f">// Method java/lang/Object.&#34;&lt;init&gt;&#34;:()V
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>       <span style="color:#ff0;font-weight:bold">4</span>: <span style="color:#fff;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">String</span>[]);
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">0</span>: iconst_0
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">1</span>: istore_1
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">2</span>: <span style="color:#fff;font-weight:bold">new</span>           <span style="color:#f00">#</span><span style="color:#ff0;font-weight:bold">2</span>                  <span style="color:#007f7f">// class java/lang/Exception
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>       <span style="color:#ff0;font-weight:bold">5</span>: dup
</span></span><span style="display:flex;"><span>       <span style="color:#ff0;font-weight:bold">6</span>: ldc           <span style="color:#f00">#</span><span style="color:#ff0;font-weight:bold">3</span>                  <span style="color:#007f7f">// String new Exception
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>       <span style="color:#ff0;font-weight:bold">8</span>: invokespecial <span style="color:#f00">#</span><span style="color:#ff0;font-weight:bold">4</span>                  <span style="color:#007f7f">// Method java/lang/Exception.&#34;&lt;init&gt;&#34;:(Ljava/lang/String;)V
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#ff0;font-weight:bold">11</span>: athrow
</span></span><span style="display:flex;"><span>      <span style="color:#ff0;font-weight:bold">12</span>: astore_1
</span></span><span style="display:flex;"><span>      <span style="color:#ff0;font-weight:bold">13</span>: aload_1
</span></span><span style="display:flex;"><span>      <span style="color:#ff0;font-weight:bold">14</span>: invokevirtual <span style="color:#f00">#</span><span style="color:#ff0;font-weight:bold">5</span>                  <span style="color:#007f7f">// Method java/lang/Exception.printStackTrace:()V
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#ff0;font-weight:bold">17</span>: <span style="color:#fff;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    Exception table:
</span></span><span style="display:flex;"><span>       from    to  target type
</span></span><span style="display:flex;"><span>           <span style="color:#ff0;font-weight:bold">0</span>    <span style="color:#ff0;font-weight:bold">12</span>    <span style="color:#ff0;font-weight:bold">12</span>   Class java/lang/Exception
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä»¥ä¸Šå­—èŠ‚ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå¼‚å¸¸è¡¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Exception table:
</span></span><span style="display:flex;"><span>       from    to  target type
</span></span><span style="display:flex;"><span>          <span style="color:#ff0;font-weight:bold">0</span>    <span style="color:#ff0;font-weight:bold">12</span>    <span style="color:#ff0;font-weight:bold">12</span>   Class java/lang/Exception
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚æ•°è¯´æ˜ï¼š
fromï¼šè¡¨ç¤º try-catch çš„å¼€å§‹åœ°å€ï¼›
toï¼šè¡¨ç¤º try-catch çš„ç»“æŸåœ°å€ï¼›
targetï¼šè¡¨ç¤ºå¼‚å¸¸çš„å¤„ç†èµ·å§‹ä½ï¼›
typeï¼šè¡¨ç¤ºå¼‚å¸¸ç±»åç§°ã€‚</p>
<p>ä»å­—èŠ‚ç æŒ‡ä»¤å¯ä»¥çœ‹å‡ºï¼Œå½“ä»£ç è¿è¡Œæ—¶å‡ºé”™æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­å‡ºé”™æ•°æ®æ˜¯å¦åœ¨ from åˆ°to çš„èŒƒå›´å†…ï¼Œå¦‚æœæ˜¯åˆ™ä» target æ ‡å¿—ä½å¾€ä¸‹æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰å‡ºé”™ï¼Œç›´æ¥ goto åˆ°returnã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»£ç ä¸å‡ºé”™çš„è¯ï¼Œæ€§èƒ½å‡ ä¹æ˜¯ä¸å—å½±å“çš„ï¼Œå’Œæ­£å¸¸çš„ä»£ç çš„æ‰§è¡Œé€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="ä¸šåŠ¡æƒ…å†µåˆ†æ">ä¸šåŠ¡æƒ…å†µåˆ†æ<a hidden class="anchor" aria-hidden="true" href="#ä¸šåŠ¡æƒ…å†µåˆ†æ">#</a></h2>
<p>è™½ç„¶ try-catch åœ¨å¾ªç¯ä½“å†…è¿˜æ˜¯å¾ªç¯ä½“å¤–çš„æ€§èƒ½æ˜¯ç±»ä¼¼çš„ï¼Œä½†æ˜¯å®ƒä»¬æ‰€ä»£ç çš„ä¸šåŠ¡å«ä¹‰å´å®Œå…¨ä¸åŒï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å¾ªç¯å†…çš„æ‰§è¡Œç»“æœï¼š&#34;</span> + innerForeach());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å¾ªç¯å¤–çš„æ‰§è¡Œç»“æœï¼š&#34;</span> + outerForeach());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ–¹æ³•ä¸€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> innerForeach() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">6</span>; i++) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (i == <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;new Exception&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                count++;
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ–¹æ³•äºŒ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> outerForeach() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">6</span>; i++) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (i == <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;new Exception&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                count++;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>java.lang.Exception: new Exception
</span></span><span style="display:flex;"><span>at com.example.AppTest.innerForeach(AppTest.java:15)
</span></span><span style="display:flex;"><span>at com.example.AppTest.main(AppTest.java:5)
</span></span><span style="display:flex;"><span>java.lang.Exception: new Exception
</span></span><span style="display:flex;"><span>at com.example.AppTest.outerForeach(AppTest.java:31)
</span></span><span style="display:flex;"><span>at com.example.AppTest.main(AppTest.java:6)
</span></span><span style="display:flex;"><span>å¾ªç¯å†…çš„æ‰§è¡Œç»“æœï¼š5
</span></span><span style="display:flex;"><span>å¾ªç¯å¤–çš„æ‰§è¡Œç»“æœï¼š3
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹å‡ºåœ¨å¾ªç¯ä½“å†…çš„ try-catch åœ¨å‘ç”Ÿå¼‚å¸¸ä¹‹åï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼›è€Œå¾ªç¯å¤–çš„ try-catch åœ¨å‘ç”Ÿå¼‚å¸¸ä¹‹åä¼šç»ˆæ­¢å¾ªç¯ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬åœ¨å†³å®š try-catch ç©¶ç«Ÿæ˜¯åº”è¯¥æ”¾åœ¨å¾ªç¯å†…è¿˜æ˜¯å¾ªç¯å¤–ï¼Œä¸å–å†³äºæ€§èƒ½ï¼ˆå› ä¸ºæ€§èƒ½å‡ ä¹ç›¸åŒï¼‰ï¼Œè€Œæ˜¯åº”è¯¥å–å†³äºå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å¤„ç†ä¸€æ‰¹æ•°æ®ï¼Œè€Œæ— è®ºè¿™ç»„æ•°æ®ä¸­æœ‰å“ªä¸€ä¸ªæ•°æ®æœ‰é—®é¢˜ï¼Œéƒ½ä¸èƒ½å½±å“å…¶ä»–ç»„çš„æ­£å¸¸æ‰§è¡Œï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æŠŠ try-catch æ”¾ç½®åœ¨å¾ªç¯ä½“å†…ï¼›è€Œå½“æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ç»„æ•°æ®çš„åˆè®¡å€¼æ—¶ï¼Œåªè¦æœ‰ä¸€ç»„æ•°æ®æœ‰è¯¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ç»ˆæ­¢æ‰§è¡Œï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å°† try-catch æ”¾ç½®åœ¨å¾ªç¯ä½“å¤–æ¥æ‰§è¡Œã€‚</p>
<p>æ€»ç»“
æˆ‘ä»¬æµ‹è¯•äº† try-catch æ”¾åœ¨å¾ªç¯ä½“å†…å’Œå¾ªç¯ä½“å¤–çš„æ€§èƒ½ï¼Œå‘ç°äºŒè€…åœ¨å¾ªç¯å¾ˆå¤šæ¬¡çš„æƒ…å†µä¸‹æ€§èƒ½å‡ ä¹æ˜¯ä¸€è‡´çš„ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡å­—èŠ‚ç åˆ†æï¼Œå‘ç°åªæœ‰å½“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œæ‰ä¼šå¯¹æ¯”å¼‚å¸¸è¡¨è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œè€Œæ­£å¸¸æƒ…å†µä¸‹åˆ™å¯ä»¥å¿½ç•¥ try-catch çš„æ‰§è¡Œã€‚ä½†åœ¨å¾ªç¯ä½“å†…è¿˜æ˜¯å¾ªç¯ä½“å¤–ä½¿ç”¨ try-catchï¼Œå¯¹äºç¨‹åºçš„æ‰§è¡Œç»“æœæ¥è¯´æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä»å®é™…çš„ä¸šåŠ¡å‡ºå‘ï¼Œæ¥å†³å®šåˆ° try-catch åº”è¯¥å­˜æ”¾çš„ä½ç½®ï¼Œè€Œéæ€§èƒ½è€ƒè™‘ã€‚</p>
<h1 id="effective-javaä¸­å…³äºå¤„ç†å¼‚å¸¸çš„å»ºè®®">ã€ŠEffective Javaã€‹ä¸­å…³äºå¤„ç†å¼‚å¸¸çš„å»ºè®®<a hidden class="anchor" aria-hidden="true" href="#effective-javaä¸­å…³äºå¤„ç†å¼‚å¸¸çš„å»ºè®®">#</a></h1>
<p>ä¸‹é¢çš„å†…å®¹å¯¹åº”åŸä¹¦ä¸­â€˜ç¬¬8ç«  å¼‚å¸¸â€™éƒ¨åˆ†çš„ç¬¬39-47æ¡ã€‚</p>
<h2 id="åªé’ˆå¯¹ä¸æ­£å¸¸çš„æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸">åªé’ˆå¯¹ä¸æ­£å¸¸çš„æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#åªé’ˆå¯¹ä¸æ­£å¸¸çš„æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸">#</a></h2>
<p>å»ºè®®ï¼šå¼‚å¸¸åªåº”è¯¥è¢«ç”¨äºä¸æ­£å¸¸çš„æ¡ä»¶ï¼Œå®ƒä»¬æ°¸è¿œä¸åº”è¯¥è¢«ç”¨äºæ­£å¸¸çš„æ§åˆ¶æµã€‚
é€šè¿‡æ¯”è¾ƒä¸‹é¢çš„ä¸¤ä»½ä»£ç è¿›è¡Œè¯´æ˜ã€‚
ä»£ç 1</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">while</span> (<span style="color:#fff;font-weight:bold">true</span>) {
</span></span><span style="display:flex;"><span>        arr[i]=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        i++;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">catch</span> (IndexOutOfBoundsException e) {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç 2</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>; i&lt;arr.<span style="color:#007f7f">length</span>; i++) {
</span></span><span style="display:flex;"><span>    arr[i]=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸¤ä»½ä»£ç çš„ä½œç”¨éƒ½æ˜¯éå†arræ•°ç»„ï¼Œå¹¶è®¾ç½®æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„å€¼ä¸º0ã€‚ä»£ç 1çš„æ˜¯é€šè¿‡å¼‚å¸¸æ¥ç»ˆæ­¢ï¼Œçœ‹èµ·æ¥éå¸¸éš¾æ‡‚ï¼Œä»£ç 2æ˜¯é€šè¿‡æ•°ç»„è¾¹ç•Œæ¥ç»ˆæ­¢ã€‚æˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨ä»£ç 1è¿™ç§æ–¹å¼ï¼Œä¸»è¦åŸå› æœ‰ä¸‰ç‚¹ï¼š</p>
<ul>
<li>å¼‚å¸¸æœºåˆ¶çš„è®¾è®¡åˆè¡·æ˜¯ç”¨äºä¸æ­£å¸¸çš„æƒ…å†µï¼Œæ‰€ä»¥å¾ˆå°‘ä¼šä¼šJVMå®ç°è¯•å›¾å¯¹å®ƒä»¬çš„æ€§èƒ½è¿›è¡Œä¼˜åŒ–ã€‚æ‰€ä»¥ï¼Œåˆ›å»ºã€æŠ›å‡ºå’Œæ•è·å¼‚å¸¸çš„å¼€é”€æ˜¯å¾ˆæ˜‚è´µçš„ã€‚</li>
<li>æŠŠä»£ç æ”¾åœ¨try-catchä¸­è¿”å›é˜»æ­¢äº†JVMå®ç°æœ¬æ¥å¯èƒ½è¦æ‰§è¡Œçš„æŸäº›ç‰¹å®šçš„ä¼˜åŒ–ã€‚</li>
<li>å¯¹æ•°ç»„è¿›è¡Œéå†çš„æ ‡å‡†æ¨¡å¼å¹¶ä¸ä¼šå¯¼è‡´å†—ä½™çš„æ£€æŸ¥ï¼Œæœ‰äº›ç°ä»£çš„JVMå®ç°ä¼šå°†å®ƒä»¬ä¼˜åŒ–æ‰ã€‚</li>
</ul>
<p>å®é™…ä¸Šï¼ŒåŸºäºå¼‚å¸¸çš„æ¨¡å¼æ¯”æ ‡å‡†æ¨¡å¼è¦æ…¢å¾—å¤šã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Advice1 {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span>[] arr = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">int</span>[]{<span style="color:#ff0;font-weight:bold">1</span><span style="color:#f00">ï¼Œ</span><span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">ï¼Œ</span><span style="color:#ff0;font-weight:bold">3</span><span style="color:#f00">ï¼Œ</span><span style="color:#ff0;font-weight:bold">4</span><span style="color:#f00">ï¼Œ</span><span style="color:#ff0;font-weight:bold">5</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> SIZE = <span style="color:#ff0;font-weight:bold">10000</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> s1 = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>; i&lt;SIZE; i++)
</span></span><span style="display:flex;"><span>            endByRange(arr);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> e1 = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;endByRange time:&#34;</span>+(e1-s1)+<span style="color:#0ff;font-weight:bold">&#34;ms&#34;</span> );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> s2 = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>; i&lt;SIZE; i++)
</span></span><span style="display:flex;"><span>            endByException(arr);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> e2 = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;endByException time:&#34;</span>+(e2-s2)+<span style="color:#0ff;font-weight:bold">&#34;ms&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// éå†arræ•°ç»„: é€šè¿‡å¼‚å¸¸çš„æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> endByException(<span style="color:#fff;font-weight:bold">int</span>[] arr) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">while</span> (<span style="color:#fff;font-weight:bold">true</span>) {
</span></span><span style="display:flex;"><span>                arr[i]=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>                i++;
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//System.out.println(&#34;endByRange: arr[&#34;+i+&#34;]=&#34;+arr[i]);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (IndexOutOfBoundsException e) {
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// éå†arræ•°ç»„: é€šè¿‡è¾¹ç•Œçš„æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> endByRange(<span style="color:#fff;font-weight:bold">int</span>[] arr) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>; i&lt;arr.<span style="color:#007f7f">length</span>; i++) {
</span></span><span style="display:flex;"><span>            arr[i]=<span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//System.out.println(&#34;endByException: arr[&#34;+i+&#34;]=&#34;+arr[i]);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>endByRange time:0ms
</span></span><span style="display:flex;"><span>endByException time:25ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼šé€šè¿‡å¼‚å¸¸éå†çš„é€Ÿåº¦æ¯”æ™®é€šæ–¹å¼éå†æ•°ç»„æ…¢å¾ˆå¤šã€‚</p>
<h2 id="å¯¹äºå¯æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸å¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸">å¯¹äºå¯æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#å¯¹äºå¯æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸å¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸">#</a></h2>
<ul>
<li>è¿è¡Œæ—¶å¼‚å¸¸     &ndash; RuntimeExceptionç±»åŠå…¶å­ç±»éƒ½è¢«ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</li>
<li>è¢«æ£€æŸ¥çš„å¼‚å¸¸ &ndash; Exceptionç±»æœ¬èº«ï¼Œä»¥åŠExceptionçš„å­ç±»ä¸­é™¤äº†&quot;è¿è¡Œæ—¶å¼‚å¸¸&quot;ä¹‹å¤–çš„å…¶å®ƒå­ç±»éƒ½å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚</li>
</ul>
<p>å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼šJavaç¼–è¯‘å™¨ä¼šå¯¹&quot;è¢«æ£€æŸ¥çš„å¼‚å¸¸&quot;è¿›è¡Œæ£€æŸ¥ï¼Œè€Œå¯¹&quot;è¿è¡Œæ—¶å¼‚å¸¸&quot;ä¸ä¼šæ£€æŸ¥ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œè¦ä¹ˆé€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œè¦ä¹ˆé€šè¿‡try-catchè¿›è¡Œæ•è·å¤„ç†ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚è€Œå¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå€˜è‹¥æ—¢&quot;æ²¡æœ‰é€šè¿‡throwså£°æ˜æŠ›å‡ºå®ƒ&rdquo;ï¼Œä¹Ÿ&quot;æ²¡æœ‰ç”¨try-catchè¯­å¥æ•è·å®ƒ&rdquo;ï¼Œè¿˜æ˜¯ä¼šç¼–è¯‘é€šè¿‡ã€‚è™½è¯´Javaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡throwså¯¹è¯¥å¼‚å¸¸è¿›è¡Œè¯´æ˜ï¼Œæˆ–é€šè¿‡try-catchè¿›è¡Œæ•è·ã€‚</p>
<p>ArithmeticException(ä¾‹å¦‚ï¼Œé™¤æ•°ä¸º0)ï¼ŒIndexOutOfBoundsException(ä¾‹å¦‚ï¼Œæ•°ç»„è¶Šç•Œ)ç­‰éƒ½å±äºè¿è¡Œæ—¶å¼‚å¸¸ã€‚å¯¹äºè¿™ç§å¼‚å¸¸ï¼Œæˆ‘ä»¬åº”è¯¥é€šè¿‡ä¿®æ”¹ä»£ç è¿›è¡Œé¿å…å®ƒçš„äº§ç”Ÿã€‚è€Œå¯¹äºè¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œåˆ™å¯ä»¥é€šè¿‡å¤„ç†è®©ç¨‹åºæ¢å¤è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå‡è®¾å› ä¸ºä¸€ä¸ªç”¨æˆ·æ²¡æœ‰å­˜å‚¨è¶³å¤Ÿæ•°é‡çš„é’±ï¼Œæ‰€ä»¥ä»–åœ¨ä¼å›¾åœ¨ä¸€ä¸ªæ”¶è´¹ç”µè¯ä¸Šè¿›è¡Œå‘¼å«å°±ä¼šå¤±è´¥ï¼›äºæ˜¯å°±å°†ä¸€ä¸ªè¢«æ£€æŸ¥å¼‚å¸¸æŠ›å‡ºã€‚</p>
<h2 id="é¿å…ä¸å¿…è¦çš„ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸">é¿å…ä¸å¿…è¦çš„ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#é¿å…ä¸å¿…è¦çš„ä½¿ç”¨è¢«æ£€æŸ¥çš„å¼‚å¸¸">#</a></h2>
<p>&ldquo;è¢«æ£€æŸ¥çš„å¼‚å¸¸&quot;æ˜¯Javaè¯­è¨€çš„ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ã€‚ä¸è¿”å›ä»£ç ä¸åŒï¼Œ&ldquo;è¢«æ£€æŸ¥çš„å¼‚å¸¸&quot;ä¼šå¼ºè¿«ç¨‹åºå‘˜å¤„ç†ä¾‹å¤–çš„æ¡ä»¶ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„å¯é æ€§ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿‡åˆ†ä½¿ç”¨è¢«æ£€æŸ¥å¼‚å¸¸ä¼šä½¿APIç”¨èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æŠ›å‡ºä¸€ä¸ªæˆ–å¤šä¸ªè¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆè°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç åˆ™å¿…é¡»åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªcatchè¯­å¥å—ä¸­å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œæˆ–è€…å¿…é¡»é€šè¿‡throwså£°æ˜æŠ›å‡ºè¿™äº›å¼‚å¸¸ã€‚æ— è®ºæ˜¯é€šè¿‡catchå¤„ç†ï¼Œè¿˜æ˜¯é€šè¿‡throwså£°æ˜æŠ›å‡ºï¼Œéƒ½ç»™ç¨‹åºå‘˜æ·»åŠ äº†ä¸å¯å¿½ç•¥çš„è´Ÿæ‹…ã€‚</p>
<p>é€‚ç”¨äº&quot;è¢«æ£€æŸ¥çš„å¼‚å¸¸&quot;å¿…é¡»åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼šç¬¬ä¸€ï¼Œå³ä½¿æ­£ç¡®ä½¿ç”¨APIå¹¶ä¸èƒ½é˜»æ­¢å¼‚å¸¸æ¡ä»¶çš„å‘ç”Ÿã€‚ç¬¬äºŒï¼Œä¸€æ—¦äº§ç”Ÿäº†å¼‚å¸¸ï¼Œä½¿ç”¨APIçš„ç¨‹åºå‘˜å¯ä»¥é‡‡å–æœ‰ç”¨çš„åŠ¨ä½œå¯¹ç¨‹åºè¿›è¡Œå¤„ç†ã€‚</p>
<h2 id="å°½é‡ä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸">å°½é‡ä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#å°½é‡ä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸">#</a></h2>
<p>ä»£ç é‡ç”¨æ˜¯å€¼å¾—æå€¡çš„ï¼Œè¿™æ˜¯ä¸€æ¡é€šç”¨è§„åˆ™ï¼Œå¼‚å¸¸ä¹Ÿä¸ä¾‹å¤–ã€‚é‡ç”¨ç°æœ‰çš„å¼‚å¸¸æœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å®ƒä½¿å¾—ä½ çš„APIæ›´åŠ æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¸ç¨‹åºå‘˜åŸæ¥å·²ç»ç†Ÿæ‚‰çš„ä¹ æƒ¯ç”¨æ³•æ˜¯ä¸€è‡´çš„ã€‚</li>
<li>å¯¹äºç”¨åˆ°è¿™äº›APIçš„ç¨‹åºè€Œè¨€ï¼Œå®ƒä»¬çš„å¯è¯»æ€§æ›´å¥½ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šå……æ–¥ç€ç¨‹åºå‘˜ä¸ç†Ÿæ‚‰çš„å¼‚å¸¸ã€‚</li>
<li>å¼‚å¸¸ç±»è¶Šå°‘ï¼Œæ„å‘³ç€å†…å­˜å ç”¨è¶Šå°ï¼Œå¹¶ä¸”è½¬è½½è¿™äº›ç±»çš„æ—¶é—´å¼€é”€ä¹Ÿè¶Šå°ã€‚</li>
</ul>
<p>Javaæ ‡å‡†å¼‚å¸¸ä¸­æœ‰å‡ ä¸ªæ˜¯ç»å¸¸è¢«ä½¿ç”¨çš„å¼‚å¸¸ã€‚å¦‚ä¸‹è¡¨æ ¼ï¼š</p>
<table>
<thead>
<tr>
<th>å¼‚å¸¸</th>
<th>ä½¿ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>IllegalArgumentException</td>
<td>éæ³•å‚æ•°</td>
</tr>
<tr>
<td>IllegalStateException</td>
<td>éæ³•å‚æ•°çŠ¶æ€</td>
</tr>
<tr>
<td>NullPointerException</td>
<td>åœ¨nullè¢«ç¦æ­¢çš„æƒ…å†µä¸‹å‚æ•°å€¼ä¸ºnull(ç©ºæŒ‡é’ˆ)</td>
</tr>
<tr>
<td>IndexOutOfBoundsException</td>
<td>æ•°ç»„ä¸‹æ ‡è¶Šç•Œ</td>
</tr>
<tr>
<td>ConcurrentModificationException</td>
<td>åœ¨ç¦æ­¢å¹¶å‘ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œå¯¹è±¡æ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹</td>
</tr>
<tr>
<td>UnsupportedOperationException</td>
<td>å¯¹è±¡ä¸æ”¯æŒå®¢æˆ·è¯·æ±‚çš„æ–¹æ³•</td>
</tr>
</tbody>
</table>
<p>è™½ç„¶å®ƒä»¬æ˜¯Javaå¹³å°åº“è¿„ä»Šä¸ºæ­¢æœ€å¸¸è¢«é‡ç”¨çš„å¼‚å¸¸ï¼Œä½†æ˜¯ï¼Œåœ¨è®¸å¯çš„æ¡ä»¶ä¸‹ï¼Œå…¶å®ƒçš„å¼‚å¸¸ä¹Ÿå¯ä»¥è¢«é‡ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦å®ç°è¯¸å¦‚å¤æ•°æˆ–è€…çŸ©é˜µä¹‹ç±»çš„ç®—æœ¯å¯¹è±¡ï¼Œé‚£ä¹ˆé‡ç”¨ArithmeticExceptionå’ŒNumberFormatExceptionå°†æ˜¯éå¸¸åˆé€‚çš„ã€‚
å¦‚æœä¸€ä¸ªå¼‚å¸¸æ»¡è¶³ä½ çš„éœ€è¦ï¼Œåˆ™ä¸è¦çŠ¹è±«ï¼Œä½¿ç”¨å°±å¯ä»¥ï¼Œä¸è¿‡ä½ ä¸€å®šè¦ç¡®ä¿æŠ›å‡ºå¼‚å¸¸çš„æ¡ä»¶ä¸è¯¥å¼‚å¸¸çš„æ–‡æ¡£ä¸­æè¿°çš„æ¡ä»¶ä¸€è‡´ã€‚è¿™ç§é‡ç”¨å¿…é¡»å»ºç«‹åœ¨è¯­ä¹‰çš„åŸºç¡€ä¸Šï¼Œè€Œä¸æ˜¯åå­—çš„åŸºç¡€ä¸Šã€‚</p>
<p>æœ€åï¼Œä¸€å®šè¦æ¸…æ¥šï¼Œé€‰æ‹©é‡ç”¨å“ªä¸€ç§å¼‚å¸¸å¹¶æ²¡æœ‰å¿…é¡»éµå¾ªçš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘çº¸ç‰Œå¯¹è±¡çš„æƒ…å½¢ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç”¨äºå‘ç‰Œæ“ä½œçš„æ–¹æ³•ï¼Œå®ƒçš„å‚æ•°(handSize)æ˜¯å‘ä¸€æ‰‹ç‰Œçš„çº¸ç‰Œå¼ æ•°ã€‚å‡è®¾è°ƒç”¨è€…åœ¨è¿™ä¸ªå‚æ•°ä¸­ä¼ é€’çš„å€¼å¤§äºæ•´å‰¯ç‰Œçš„å‰©ä½™å¼ æ•°ã€‚é‚£ä¹ˆè¿™ç§æƒ…å½¢æ—¢å¯ä»¥è¢«è§£é‡Šä¸ºIllegalArgumentException(handSizeçš„å€¼å¤ªå¤§)ï¼Œä¹Ÿå¯ä»¥è¢«è§£é‡Šä¸ºIllegalStateException(ç›¸å¯¹å®¢æˆ·çš„è¯·æ±‚è€Œè¨€ï¼Œçº¸ç‰Œå¯¹è±¡çš„çº¸ç‰Œå¤ªå°‘)ã€‚</p>
<h2 id="æŠ›å‡ºçš„å¼‚å¸¸è¦é€‚åˆäºç›¸åº”çš„æŠ½è±¡">æŠ›å‡ºçš„å¼‚å¸¸è¦é€‚åˆäºç›¸åº”çš„æŠ½è±¡<a hidden class="anchor" aria-hidden="true" href="#æŠ›å‡ºçš„å¼‚å¸¸è¦é€‚åˆäºç›¸åº”çš„æŠ½è±¡">#</a></h2>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸å®ƒæ‰§è¡Œçš„ä»»åŠ¡æ²¡æœ‰æ˜æ˜¾çš„å…³è”å…³ç³»ï¼Œè¿™ç§æƒ…å½¢ä¼šè®©äººä¸çŸ¥æ‰€æªã€‚å½“ä¸€ä¸ªæ–¹æ³•ä¼ é€’ä¸€ä¸ªç”±ä½å±‚æŠ½è±¡æŠ›å‡ºçš„å¼‚å¸¸æ—¶ï¼Œå¾€å¾€ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä¸ä»…è®©äººå›°æƒ‘ï¼Œè€Œä¸”ä¹Ÿ&quot;æ±¡æŸ“&quot;äº†é«˜å±‚APIã€‚
ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œé«˜å±‚å®ç°åº”è¯¥æ•è·ä½å±‚çš„å¼‚å¸¸ï¼ŒåŒæ—¶æŠ›å‡ºä¸€ä¸ªå¯ä»¥æŒ‰ç…§é«˜å±‚æŠ½è±¡è¿›è¡Œä»‹ç»çš„å¼‚å¸¸ã€‚è¿™ç§åšæ³•è¢«ç§°ä¸º&quot;å¼‚å¸¸è½¬è¯‘(exception translation)&quot;ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨Javaçš„é›†åˆæ¡†æ¶AbstractSequentialListçš„get()æ–¹æ³•å¦‚ä¸‹(åŸºäºJDK1.7.0_40)ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> E get(<span style="color:#fff;font-weight:bold">int</span> index) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> listIterator(index).<span style="color:#007f7f">next</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (NoSuchElementException exc) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IndexOutOfBoundsException(<span style="color:#0ff;font-weight:bold">&#34;Index: &#34;</span>+index);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>listIterator(index)ä¼šè¿”å›ListIteratorå¯¹è±¡ï¼Œ
è°ƒç”¨è¯¥å¯¹è±¡çš„next()æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡º NoSuchElementException å¼‚å¸¸ã€‚
è€Œåœ¨get()æ–¹æ³•ä¸­ï¼ŒæŠ›å‡ºNoSuchElementExceptionå¼‚å¸¸ä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ã€‚
æ‰€ä»¥ï¼Œget()å¯¹NoSuchElementExceptionè¿›è¡Œäº†æ•è·ï¼Œå¹¶æŠ›å‡ºäº†IndexOutOfBoundsExceptionå¼‚å¸¸ã€‚å³ï¼Œç›¸å½“äºå°†NoSuchElementExceptionè½¬è¯‘æˆäº†IndexOutOfBoundsExceptionå¼‚å¸¸ã€‚</p>
<h2 id="æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£">æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£<a hidden class="anchor" aria-hidden="true" href="#æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£">#</a></h2>
<p>è¦å•ç‹¬çš„å£°æ˜è¢«æ£€æŸ¥çš„å¼‚å¸¸ï¼Œå¹¶ä¸”åˆ©ç”¨Javadocçš„@throwsæ ‡è®°ï¼Œå‡†ç¡®åœ°è®°å½•ä¸‹æ¯ä¸ªå¼‚å¸¸è¢«æŠ›å‡ºçš„æ¡ä»¶ã€‚å¦‚æœä¸€ä¸ªç±»ä¸­çš„è®¸å¤šæ–¹æ³•å¤„äºåŒæ ·çš„åŸå› è€ŒæŠ›å‡ºåŒä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆåœ¨è¯¥ç±»çš„æ–‡æ¡£æ³¨é‡Šä¸­å¯¹è¿™ä¸ªå¼‚å¸¸åšæ–‡æ¡£ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ–¹æ³•å•ç‹¬åšæ–‡æ¡£ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<h2 id="åœ¨ç»†èŠ‚æ¶ˆæ¯ä¸­åŒ…å«å¤±è´¥----æ•è·æ¶ˆæ¯">åœ¨ç»†èŠ‚æ¶ˆæ¯ä¸­åŒ…å«å¤±è´¥ &ndash; æ•è·æ¶ˆæ¯<a hidden class="anchor" aria-hidden="true" href="#åœ¨ç»†èŠ‚æ¶ˆæ¯ä¸­åŒ…å«å¤±è´¥----æ•è·æ¶ˆæ¯">#</a></h2>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰å¼‚å¸¸æˆ–è€…æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œåº”è¯¥åŒ…å«å¤±è´¥ç›¸å…³çš„ä¿¡æ¯ã€‚
å½“ä¸€ä¸ªç¨‹åºç”±äºä¸€ä¸ªæœªè¢«æ•è·çš„å¼‚å¸¸è€Œå¤±è´¥çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰“å°å‡ºè¯¥å¼‚å¸¸çš„æ ˆè½¨è¿¹ã€‚
åœ¨æ ˆè½¨è¿¹ä¸­åŒ…å«è¯¥å¼‚å¸¸çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å…¸å‹æƒ…å†µä¸‹å®ƒåŒ…å«è¯¥å¼‚å¸¸ç±»çš„ç±»åï¼Œä»¥åŠç´§éšå…¶åçš„ç»†èŠ‚æ¶ˆæ¯ã€‚</p>
<h2 id="åŠªåŠ›ä½¿å¤±è´¥ä¿æŒåŸå­æ€§">åŠªåŠ›ä½¿å¤±è´¥ä¿æŒåŸå­æ€§<a hidden class="anchor" aria-hidden="true" href="#åŠªåŠ›ä½¿å¤±è´¥ä¿æŒåŸå­æ€§">#</a></h2>
<p>å½“ä¸€ä¸ªå¯¹è±¡æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ä¹‹åï¼Œæˆ‘ä»¬æ€»æœŸæœ›è¿™ä¸ªå¯¹è±¡ä»ç„¶ä¿æŒåœ¨ä¸€ç§å®šä¹‰è‰¯å¥½çš„å¯ç”¨çŠ¶æ€ä¹‹ä¸­ã€‚
å¯¹äºè¢«æ£€æŸ¥çš„å¼‚å¸¸è€Œè¨€ï¼Œè¿™å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºè°ƒç”¨è€…é€šå¸¸æœŸæœ›ä»è¢«æ£€æŸ¥çš„å¼‚å¸¸ä¸­æ¢å¤è¿‡æ¥ã€‚
ä¸€èˆ¬è€Œè¨€ï¼Œä¸€ä¸ªå¤±è´¥çš„æ–¹æ³•è°ƒç”¨åº”è¯¥ä¿æŒä½¿å¯¹è±¡ä¿æŒåœ¨&quot;å®ƒåœ¨è¢«è°ƒç”¨ä¹‹å‰çš„çŠ¶æ€&rdquo;ã€‚å…·æœ‰è¿™ç§å±æ€§çš„æ–¹æ³•è¢«ç§°ä¸ºå…·æœ‰&quot;å¤±è´¥åŸå­æ€§(failure atomic)&quot;ã€‚
å¯ä»¥ç†è§£ä¸ºï¼Œå¤±è´¥äº†è¿˜ä¿æŒç€åŸå­æ€§ã€‚å¯¹è±¡ä¿æŒ&quot;å¤±è´¥åŸå­æ€§&quot;çš„æ–¹å¼æœ‰å‡ ç§ï¼š</p>
<ul>
<li>è®¾è®¡ä¸€ä¸ªéå¯å˜å¯¹è±¡ã€‚</li>
<li>å¯¹äºåœ¨å¯å˜å¯¹è±¡ä¸Šæ‰§è¡Œæ“ä½œçš„æ–¹æ³•ï¼Œè·å¾—&quot;å¤±è´¥åŸå­æ€§&quot;çš„æœ€å¸¸è§æ–¹æ³•æ˜¯ï¼Œåœ¨æ‰§è¡Œæ“ä½œä¹‹å‰æ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§ã€‚å¦‚ä¸‹(Stack.javaä¸­çš„popæ–¹æ³•)ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Object pop() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (size==<span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> EmptyStackException();
</span></span><span style="display:flex;"><span>    Object result = elements[--size];
</span></span><span style="display:flex;"><span>    elements[size] = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸ä¸Šä¸€ç§æ–¹æ³•ç±»ä¼¼ï¼Œå¯ä»¥å¯¹è®¡ç®—å¤„ç†è¿‡ç¨‹è°ƒæ•´é¡ºåºï¼Œä½¿å¾—ä»»ä½•å¯èƒ½ä¼šå¤±è´¥çš„è®¡ç®—éƒ¨åˆ†éƒ½å‘ç”Ÿåœ¨å¯¹è±¡çŠ¶æ€è¢«ä¿®æ”¹ä¹‹å‰ã€‚</li>
<li>ç¼–å†™ä¸€æ®µæ¢å¤ä»£ç ï¼Œç”±å®ƒæ¥è§£é‡Šæ“ä½œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„å¤±è´¥ï¼Œä»¥åŠä½¿å¯¹è±¡å›æ»šåˆ°æ“ä½œå¼€å§‹ä¹‹å‰çš„çŠ¶æ€ä¸Šã€‚</li>
<li>åœ¨å¯¹è±¡çš„ä¸€ä»½ä¸´æ—¶æ‹·è´ä¸Šæ‰§è¡Œæ“ä½œï¼Œå½“æ“ä½œå®Œæˆä¹‹åå†æŠŠä¸´æ—¶æ‹·è´ä¸­çš„ç»“æœå¤åˆ¶ç»™åŸæ¥çš„å¯¹è±¡ã€‚
è™½ç„¶&quot;ä¿æŒå¯¹è±¡çš„å¤±è´¥åŸå­æ€§&quot;æ˜¯æœŸæœ›ç›®æ ‡ï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯å¯ä»¥åšå¾—åˆ°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹ä¼å›¾åœ¨æ²¡æœ‰é€‚å½“çš„åŒæ­¥æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œå¹¶å‘çš„è®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±æœ‰å¯èƒ½è¢«ç•™åœ¨ä¸ä¸€è‡´çš„çŠ¶æ€ä¸­ã€‚</li>
</ul>
<p>å³ä½¿åœ¨å¯ä»¥å®ç°&quot;å¤±è´¥åŸå­æ€§&quot;çš„åœºåˆï¼Œå®ƒä¹Ÿä¸æ˜¯æ€»è¢«æœŸæœ›çš„ã€‚å¯¹äºæŸäº›æ“ä½œï¼Œå®ƒä¼šæ˜¾è‘—çš„å¢åŠ å¼€é”€æˆ–è€…å¤æ‚æ€§ã€‚
æ€»çš„è§„åˆ™æ˜¯ï¼šä½œä¸ºæ–¹æ³•è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•ä¸€ä¸ªå¼‚å¸¸éƒ½ä¸åº”è¯¥æ”¹å˜å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰çš„çŠ¶æ€ï¼Œå¦‚æœè¿™æ¡è§„åˆ™è¢«è¿åï¼Œåˆ™APIæ–‡æ¡£ä¸­åº”è¯¥æ¸…æ¥šçš„æŒ‡æ˜å¯¹è±¡å°†ä¼šå¤„äºä»€ä¹ˆæ ·çš„çŠ¶æ€ã€‚</p>
<h2 id="ä¸è¦å¿½ç•¥å¼‚å¸¸">ä¸è¦å¿½ç•¥å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#ä¸è¦å¿½ç•¥å¼‚å¸¸">#</a></h2>
<p>å½“ä¸€ä¸ªAPIçš„è®¾è®¡è€…å£°æ˜ä¸€ä¸ªæ–¹æ³•ä¼šæŠ›å‡ºæŸä¸ªå¼‚å¸¸çš„æ—¶å€™ï¼Œä»–ä»¬æ­£åœ¨è¯•å›¾è¯´æ˜æŸäº›äº‹æƒ…ã€‚æ‰€ä»¥ï¼Œè¯·ä¸è¦å¿½ç•¥å®ƒï¼å¿½ç•¥å¼‚å¸¸çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">catch</span> (SomeException e) {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç©ºçš„catchå—ä¼šä½¿å¼‚å¸¸è¾¾ä¸åˆ°åº”æœ‰çš„ç›®çš„ï¼Œå¼‚å¸¸çš„ç›®çš„æ˜¯å¼ºè¿«ä½ å¤„ç†ä¸æ­£å¸¸çš„æ¡ä»¶ã€‚å¿½ç•¥ä¸€ä¸ªå¼‚å¸¸ï¼Œå°±å¦‚åŒå¿½ç•¥ä¸€ä¸ªç«è­¦ä¿¡å·ä¸€æ ·ï¼Œè‹¥æŠŠç«è­¦ä¿¡å·å™¨å…³é—­äº†ï¼Œé‚£ä¹ˆå½“çœŸæ­£çš„ç«ç¾å‘ç”Ÿæ—¶ï¼Œå°±æ²¡æœ‰äººçœ‹åˆ°ç«è­¦ä¿¡å·äº†ã€‚æ‰€ä»¥ï¼Œè‡³å°‘catchå—åº”è¯¥åŒ…å«ä¸€æ¡è¯´æ˜ï¼Œç”¨æ¥è§£é‡Šä¸ºä»€ä¹ˆå¿½ç•¥è¿™ä¸ªå¼‚å¸¸æ˜¯åˆé€‚çš„ã€‚</p>
<h1 id="java-puzzlesä¸­å…³äºå¼‚å¸¸çš„å‡ ä¸ªé—®é¢˜">ã€ŠJava Puzzlesã€‹ä¸­å…³äºå¼‚å¸¸çš„å‡ ä¸ªé—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#java-puzzlesä¸­å…³äºå¼‚å¸¸çš„å‡ ä¸ªé—®é¢˜">#</a></h1>
<h2 id="ä¼˜æŸ”å¯¡æ–­">ä¼˜æŸ”å¯¡æ–­<a hidden class="anchor" aria-hidden="true" href="#ä¼˜æŸ”å¯¡æ–­">#</a></h2>
<p>ä¸‹é¢çš„ç¨‹åºæ‰“å°ä»€ä¹ˆï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Indecisive {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(decision());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">boolean</span> decision() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
false</p>
<p>ç»“æœè¯´æ˜ï¼š
åœ¨ä¸€ä¸ª try-finally è¯­å¥ä¸­ï¼Œfinally è¯­å¥å—æ€»æ˜¯åœ¨æ§åˆ¶æƒç¦»å¼€ try è¯­å¥å—æ—¶æ‰§è¡Œçš„ã€‚
æ— è®º try è¯­å¥å—æ˜¯æ­£å¸¸ç»“æŸï¼Œè¿˜æ˜¯æ„å¤–ç»“æŸã€‚</p>
<p>ä¸€æ¡è¯­å¥æˆ–ä¸€ä¸ªè¯­å¥å—åœ¨å®ƒæŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œæˆ–è€…å¯¹æŸä¸ªå°é—­å‹è¯­å¥æ‰§è¡Œäº†ä¸€ä¸ª break æˆ– continueï¼Œæˆ–æ˜¯è±¡è¿™ä¸ªç¨‹åºä¸€æ ·åœ¨æ–¹æ³•ä¸­æ‰§è¡Œäº†ä¸€ä¸ªreturn æ—¶ï¼Œå°†å‘ç”Ÿæ„å¤–ç»“æŸã€‚
å®ƒä»¬ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæ„å¤–ç»“æŸï¼Œæ˜¯å› ä¸ºå®ƒä»¬é˜»æ­¢ç¨‹åºå»æŒ‰é¡ºåºæ‰§è¡Œä¸‹é¢çš„è¯­å¥ã€‚
å½“ try è¯­å¥å—å’Œ finally è¯­å¥å—éƒ½æ„å¤–ç»“æŸæ—¶ï¼Œtry è¯­å¥å—ä¸­å¼•å‘æ„å¤–ç»“æŸçš„åŸå› å°†è¢«ä¸¢å¼ƒï¼Œ
è€Œæ•´ä¸ª try-finally è¯­å¥æ„å¤–ç»“æŸçš„åŸå› å°†äº finally è¯­å¥å—æ„å¤–ç»“æŸçš„åŸå› ç›¸åŒã€‚
åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œåœ¨ try è¯­å¥å—ä¸­çš„ return è¯­å¥æ‰€å¼•å‘çš„æ„å¤–ç»“æŸå°†è¢«ä¸¢å¼ƒï¼Œ try-finally è¯­å¥æ„å¤–ç»“æŸæ˜¯ç”± finally è¯­å¥å—ä¸­çš„ return è€Œé€ æˆçš„ã€‚</p>
<p>ç®€å•åœ°è®²ï¼Œç¨‹åºå°è¯•ç€ (try) (return) è¿”å› trueï¼Œä½†æ˜¯å®ƒæœ€ç»ˆ (finally) è¿”å›(return)çš„æ˜¯ falseã€‚
å¯¹äºé‚£äº›åœ¨ try è¯­å¥å—ä¸­æ‰§è¡Œ breakã€continue æˆ– return è¯­å¥ï¼Œåªæ˜¯ä¸ºäº†ä½¿å…¶è¡Œä¸ºè¢« finally è¯­å¥å—æ‰€å¦å†³æ‰çš„ç¨‹åºï¼Œè¦ç†è§£å…¶è¡Œä¸ºæ˜¯ç‰¹åˆ«å›°éš¾çš„ã€‚</p>
<p>æ€»ä¹‹ï¼Œæ¯ä¸€ä¸ª finally è¯­å¥å—éƒ½åº”è¯¥æ­£å¸¸ç»“æŸï¼Œé™¤éæŠ›å‡ºçš„æ˜¯ä¸å—æ£€æŸ¥çš„å¼‚å¸¸ã€‚
åƒä¸‡ä¸è¦ç”¨ä¸€ä¸ª returnã€breakã€continue æˆ– throw æ¥é€€å‡ºä¸€ä¸ª finally è¯­å¥å—ï¼Œå¹¶ä¸”åƒä¸‡ä¸è¦å…è®¸å°†ä¸€ä¸ªå—æ£€æŸ¥çš„å¼‚å¸¸ä¼ æ’­åˆ°ä¸€ä¸ª finally è¯­å¥å—ä¹‹å¤–å»ã€‚å¯¹äºè¯­è¨€è®¾è®¡è€…ï¼Œä¹Ÿè®¸åº”è¯¥è¦æ±‚ finally è¯­å¥å—åœ¨æœªå‡ºç°ä¸å—æ£€æŸ¥çš„å¼‚å¸¸æ—¶å¿…é¡»æ­£å¸¸ç»“æŸã€‚æœç€è¿™ä¸ªç›®æ ‡ï¼Œtry-finally ç»“æ„å°†è¦æ±‚ finally è¯­å¥å—å¯ä»¥æ­£å¸¸ç»“æŸã€‚</p>
<p>returnã€break æˆ– continue è¯­å¥æŠŠæ§åˆ¶æƒä¼ é€’åˆ° finally è¯­å¥å—ä¹‹å¤–åº”è¯¥æ˜¯è¢«ç¦æ­¢çš„ï¼Œä»»ä½•å¯ä»¥å¼•å‘å°†è¢«æ£€æŸ¥å¼‚å¸¸ä¼ æ’­åˆ° finally è¯­å¥å—ä¹‹å¤–çš„è¯­å¥ä¹ŸåŒæ ·åº”è¯¥æ˜¯è¢«ç¦æ­¢çš„ã€‚</p>
<h2 id="ä¸å¯æ€è®®">ä¸å¯æ€è®®<a hidden class="anchor" aria-hidden="true" href="#ä¸å¯æ€è®®">#</a></h2>
<p>ä¸‹é¢çš„ä¸‰ä¸ªç¨‹åºæ¯ä¸€ä¸ªéƒ½ä¼šæ‰“å°äº›ä»€ä¹ˆ?
ç¬¬ä¸€ä¸ªç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Arcane1 {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span>(IOException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;I&#39;ve never seen println fail!&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒä¸ªç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Arcane2 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// If you have nothing nice to sayï¼Œ say nothing
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        } <span style="color:#fff;font-weight:bold">catch</span>(Exception e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;This can&#39;t happen&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰ä¸ªç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">interface</span> Type1 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> f() <span style="color:#fff;font-weight:bold">throws</span> CloneNotSupportedException;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">interface</span> Type2 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> f() <span style="color:#fff;font-weight:bold">throws</span> InterruptedException;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">interface</span> Type3 <span style="color:#fff;font-weight:bold">extends</span> Type1<span style="color:#f00">ï¼Œ</span> Type2 {
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Arcane3 <span style="color:#fff;font-weight:bold">implements</span> Type3 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> f() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Type3 t3 = <span style="color:#fff;font-weight:bold">new</span> Arcane3();
</span></span><span style="display:flex;"><span>        t3.<span style="color:#007f7f">f</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªç¨‹åºç¼–è¯‘é”™è¯¯
<code>Error:(13ï¼Œ 11) java: åœ¨ç›¸åº”çš„ try è¯­å¥ä¸»ä½“ä¸­ä¸èƒ½æŠ›å‡ºå¼‚å¸¸é”™è¯¯java.io.IOException</code></p>
</li>
<li>
<p>ç¬¬äºŒä¸ªç¨‹åºèƒ½æ­£å¸¸ç¼–è¯‘å’Œè¿è¡Œã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰ä¸ªç¨‹åºèƒ½æ­£å¸¸ç¼–è¯‘å’Œè¿è¡Œã€‚è¾“å‡ºç»“æœæ˜¯: Hello world</p>
</li>
</ul>
<p>ç»“æœè¯´æ˜ï¼š</p>
<ul>
<li>
<p>Arcane1å±•ç¤ºäº†è¢«æ£€æŸ¥å¼‚å¸¸çš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ã€‚
å®ƒçœ‹èµ·æ¥åº”è¯¥æ˜¯å¯ä»¥ç¼–è¯‘çš„ï¼štry å­å¥æ‰§è¡Œ I/Oï¼Œå¹¶ä¸” catch å­å¥æ•è· IOException å¼‚å¸¸ã€‚ä½†æ˜¯è¿™ä¸ªç¨‹åºä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸º <code>System.out.println</code> æ–¹æ³•æ²¡æœ‰å£°æ˜ä¼šæŠ›å‡ºä»»ä½•è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œè€ŒIOException å´æ­£æ˜¯ä¸€ä¸ªè¢«æ£€æŸ¥å¼‚å¸¸ã€‚
è¯­è¨€è§„èŒƒä¸­æè¿°é“ï¼šå¦‚æœä¸€ä¸ª catch å­å¥è¦æ•è·ä¸€ä¸ªç±»å‹ä¸º E çš„è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œè€Œå…¶ç›¸å¯¹åº”çš„ try å­å¥ä¸èƒ½æŠ›å‡ºE çš„æŸç§å­ç±»å‹çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸé”™è¯¯ã€‚</p>
</li>
<li>
<p>åŸºäºåŒæ ·çš„ç†ç”±ï¼Œç¬¬äºŒä¸ªç¨‹åºArcane2ã€‚çœ‹èµ·æ¥åº”è¯¥æ˜¯ä¸å¯ä»¥ç¼–è¯‘çš„ï¼Œä½†æ˜¯å®ƒå´å¯ä»¥ã€‚
å®ƒä¹‹æ‰€ä»¥å¯ä»¥ç¼–è¯‘ï¼Œæ˜¯å› ä¸ºå®ƒå”¯ä¸€çš„ catch å­å¥æ£€æŸ¥äº† Exceptionã€‚
å°½ç®¡åœ¨è¿™ä¸€ç‚¹ä¸Šååˆ†å«æ··ä¸æ¸…ï¼Œä½†æ˜¯æ•è· Exception æˆ– Throwble çš„ catch å­å¥æ˜¯åˆæ³•çš„ï¼Œä¸ç®¡ä¸å…¶ç›¸å¯¹åº”çš„ try å­å¥çš„å†…å®¹ä¸ºä½•ã€‚å°½ç®¡ Arcane2 æ˜¯ä¸€ä¸ªåˆæ³•çš„ç¨‹åºï¼Œä½†æ˜¯ catch å­å¥çš„å†…å®¹æ°¸è¿œçš„ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸ªç¨‹åºä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰ä¸ªç¨‹åºArcane3ï¼Œçœ‹èµ·æ¥å®ƒä¹Ÿä¸èƒ½ç¼–è¯‘ã€‚
æ–¹æ³• f åœ¨ Type1 æ¥å£ä¸­å£°æ˜è¦æŠ›å‡ºè¢«æ£€æŸ¥å¼‚å¸¸ CloneNotSupportedExceptionï¼Œå¹¶ä¸”åœ¨ Type2 æ¥å£ä¸­å£°æ˜è¦æŠ›å‡ºè¢«æ£€æŸ¥å¼‚å¸¸ InterruptedExceptionã€‚Type3 æ¥å£ç»§æ‰¿äº† Type1 å’Œ Type2ï¼Œå› æ­¤ï¼Œçœ‹èµ·æ¥åœ¨é™æ€ç±»å‹ä¸º Type3 çš„å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³• f æ—¶ï¼Œ æœ‰æ½œåœ¨å¯èƒ½ä¼šæŠ›å‡ºè¿™äº›å¼‚å¸¸ã€‚ä¸€ä¸ªæ–¹æ³•å¿…é¡»è¦ä¹ˆæ•è·å…¶æ–¹æ³•ä½“å¯ä»¥æŠ›å‡ºçš„æ‰€æœ‰è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œè¦ä¹ˆå£°æ˜å®ƒå°†æŠ›å‡ºè¿™äº›å¼‚å¸¸ã€‚Arcane3 çš„ main æ–¹æ³•åœ¨é™æ€ç±»å‹ä¸º Type3 çš„å¯¹è±¡ä¸Šè°ƒç”¨äº†æ–¹æ³• fï¼Œä½†å®ƒå¯¹ CloneNotSupportedException å’Œ InterruptedExceptioin å¹¶æ²¡æœ‰ä½œè¿™äº›å¤„ç†ã€‚
é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªç¨‹åºå¯ä»¥ç¼–è¯‘å‘¢?
ä¸Šè¿°åˆ†æçš„ç¼ºé™·åœ¨äºå¯¹â€œType3.f å¯ä»¥æŠ›å‡ºåœ¨ Type1.f ä¸Šå£°æ˜çš„å¼‚å¸¸å’Œåœ¨ Type2.f ä¸Šå£°æ˜çš„å¼‚å¸¸â€æ‰€åšçš„å‡è®¾ã€‚è¿™å¹¶ä¸æ­£ç¡®ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ¥å£éƒ½é™åˆ¶äº†æ–¹æ³• f å¯ä»¥æŠ›å‡ºçš„è¢«æ£€æŸ¥å¼‚å¸¸é›†åˆã€‚ä¸€ä¸ªæ–¹æ³•å¯ä»¥æŠ›å‡ºçš„è¢«æ£€æŸ¥å¼‚å¸¸é›†åˆæ˜¯å®ƒæ‰€é€‚ç”¨çš„æ‰€æœ‰ç±»å‹å£°æ˜è¦æŠ›å‡ºçš„è¢«æ£€æŸ¥å¼‚å¸¸é›†åˆçš„äº¤é›†ï¼Œè€Œä¸æ˜¯åˆé›†ã€‚
å› æ­¤ï¼Œé™æ€ç±»å‹ä¸º Type3 çš„å¯¹è±¡ä¸Šçš„ f æ–¹æ³•æ ¹æœ¬å°±ä¸èƒ½æŠ›å‡ºä»»ä½•è¢«æ£€æŸ¥å¼‚å¸¸ã€‚å› æ­¤ï¼ŒArcane3å¯ä»¥æ¯«æ— é”™è¯¯åœ°é€šè¿‡ç¼–è¯‘ï¼Œå¹¶ä¸”æ‰“å° Hello worldã€‚</p>
</li>
</ul>
<h2 id="ä¸å—æ¬¢è¿çš„å®¾å®¢">ä¸å—æ¬¢è¿çš„å®¾å®¢<a hidden class="anchor" aria-hidden="true" href="#ä¸å—æ¬¢è¿çš„å®¾å®¢">#</a></h2>
<p>ä¸‹é¢çš„ç¨‹åºä¼šæ‰“å°å‡ºä»€ä¹ˆå‘¢?</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> UnwelcomeGuest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> GUEST_USER_ID = -<span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> USER_ID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            USER_ID = getUserIdFromEnvironment();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (IdUnavailableException e) {
</span></span><span style="display:flex;"><span>            USER_ID = GUEST_USER_ID;
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Logging in as guest&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> getUserIdFromEnvironment() 
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throws</span> IdUnavailableException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IdUnavailableException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;User ID: &#34;</span> + USER_ID);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> IdUnavailableException <span style="color:#fff;font-weight:bold">extends</span> Exception {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>UnwelcomeGuest.java:10: variable USER_ID might already have been assigned
</span></span><span style="display:flex;"><span>            USER_ID = GUEST_USER_ID;
</span></span><span style="display:flex;"><span>            ^
</span></span><span style="display:flex;"><span>1 error
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼š
è¯¥ç¨‹åºçœ‹èµ·æ¥å¾ˆç›´è§‚ã€‚å¯¹ getUserIdFromEnvironment çš„è°ƒç”¨å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œ
ä»è€Œä½¿ç¨‹åºå°† GUEST_USER_ID(-1L)èµ‹å€¼ç»™ USER_IDï¼Œ å¹¶æ‰“å° Loggin in as guestã€‚
ç„¶å main æ–¹æ³•æ‰§è¡Œï¼Œä½¿ç¨‹åºæ‰“å° User ID: -1ã€‚è¡¨è±¡å†æ¬¡æ¬ºéª—äº†æˆ‘ä»¬ï¼Œè¯¥ç¨‹åºå¹¶ä¸èƒ½ç¼–è¯‘ã€‚
å¦‚æœä½ å°è¯•ç€å»ç¼–è¯‘å®ƒï¼Œ ä½ å°†çœ‹åˆ°å’Œä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚
é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†?USER_ID åŸŸæ˜¯ä¸€ä¸ªç©º final(blank final)ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨å£°æ˜ä¸­æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–æ“ä½œçš„ final åŸŸã€‚
å¾ˆæ˜æ˜¾ï¼Œåªæœ‰åœ¨å¯¹ USER_ID èµ‹å€¼å¤±è´¥æ—¶ï¼Œæ‰ä¼šåœ¨ try è¯­å¥å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œ
å› æ­¤ï¼Œåœ¨ catch è¯­å¥å—ä¸­èµ‹å€¼æ˜¯ç›¸å½“å®‰å…¨çš„ã€‚ä¸ç®¡æ€æ ·æ‰§è¡Œé™æ€åˆå§‹åŒ–æ“ä½œè¯­å¥å—ï¼Œ
åªä¼šå¯¹ USER_ID èµ‹å€¼ä¸€æ¬¡ï¼Œè¿™æ­£æ˜¯ç©º final æ‰€è¦æ±‚çš„ã€‚ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸çŸ¥é“è¿™äº›å‘¢?
è¦ç¡®å®šä¸€ä¸ªç¨‹åºæ˜¯å¦å¯ä»¥ä¸æ­¢ä¸€æ¬¡åœ°å¯¹ä¸€ä¸ªç©º final è¿›è¡Œèµ‹å€¼æ˜¯ä¸€ä¸ªå¾ˆå›°éš¾çš„é—®é¢˜ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
è¿™ç­‰ä»·äºç»å…¸çš„åœæœºé—®é¢˜ï¼Œå®ƒé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸å¯èƒ½è§£å†³çš„ã€‚ä¸ºäº†èƒ½å¤Ÿç¼–å†™å‡ºä¸€ä¸ªç¼–è¯‘å™¨ï¼Œè¯­è¨€è§„èŒƒåœ¨è¿™ä¸€ç‚¹ä¸Šé‡‡ç”¨äº†ä¿å®ˆçš„æ–¹å¼ã€‚åœ¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªç©º final åŸŸåªæœ‰åœ¨å®ƒæ˜¯æ˜ç¡®æœªèµ‹è¿‡å€¼çš„åœ°æ–¹æ‰å¯ä»¥è¢«èµ‹å€¼ã€‚è§„èŒƒé•¿ç¯‡å¤§è®ºï¼Œå¯¹æ­¤æœ¯è¯­æä¾›äº†ä¸€ä¸ªå‡†ç¡®çš„ä½†ä¿å®ˆçš„å®šä¹‰ã€‚ å› ä¸ºå®ƒæ˜¯ä¿å®ˆçš„ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å¿…é¡»æ‹’ç»æŸäº›å¯ä»¥è¯æ˜æ˜¯å®‰å…¨çš„ç¨‹åºã€‚è¿™ä¸ªè°œé¢˜å°±å±•ç¤ºäº†è¿™æ ·çš„ä¸€ä¸ªç¨‹åºã€‚å¹¸è¿çš„æ˜¯ï¼Œ ä½ ä¸å¿…ä¸ºäº†ç¼–å†™ Java ç¨‹åºè€Œå»å­¦ä¹ é‚£äº›éª‡äººçš„ç”¨äºæ˜ç¡®èµ‹å€¼çš„ç»†èŠ‚ã€‚é€šå¸¸æ˜ç¡®èµ‹å€¼è§„åˆ™ä¸ä¼šæœ‰ä»»ä½•å¦¨ç¢ã€‚å¦‚æœç¢°å·§ä½ ç¼–å†™äº†ä¸€ä¸ªçœŸçš„å¯èƒ½ä¼šå¯¹ä¸€ä¸ªç©ºfinal èµ‹å€¼è¶…è¿‡ä¸€æ¬¡çš„ç¨‹åºï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ æŒ‡å‡ºçš„ã€‚åªæœ‰åœ¨æå°‘çš„æƒ…å†µä¸‹ï¼Œå°±åƒæœ¬è°œé¢˜ä¸€æ ·ï¼Œ ä½ æ‰ä¼šç¼–å†™å‡ºä¸€ä¸ªå®‰å…¨çš„ç¨‹åºï¼Œ ä½†æ˜¯å®ƒå¹¶ä¸æ»¡è¶³è§„èŒƒçš„å½¢å¼åŒ–è¦æ±‚ã€‚ç¼–è¯‘å™¨çš„æŠ±æ€¨å°±å¥½åƒæ˜¯ä½ ç¼–å†™äº†ä¸€ä¸ªä¸å®‰å…¨çš„ç¨‹åºä¸€æ ·ï¼Œè€Œä¸”ä½ å¿…é¡»ä¿®æ”¹ä½ çš„ç¨‹åºä»¥æ»¡è¶³å®ƒã€‚</p>
<p>è§£å†³è¿™ç±»é—®é¢˜çš„æœ€å¥½æ–¹å¼å°±æ˜¯å°†è¿™ä¸ªçƒ¦äººçš„åŸŸä»ç©º final ç±»å‹æ”¹å˜ä¸ºæ™®é€šçš„final ç±»å‹ï¼Œç”¨ä¸€ä¸ªé™æ€åŸŸçš„åˆå§‹åŒ–æ“ä½œæ›¿æ¢æ‰é™æ€çš„åˆå§‹åŒ–è¯­å¥å—ã€‚å®ç°è¿™ä¸€ç‚¹çš„æœ€ä½³æ–¹å¼æ˜¯é‡æ„é™æ€è¯­å¥å—ä¸­çš„ä»£ç ä¸ºä¸€ä¸ªåŠ©æ‰‹æ–¹æ³•:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> UnwelcomeGuest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> GUEST_USER_ID = -<span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">long</span> USER_ID = getUserIdOrGuest();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> getUserIdOrGuest() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> getUserIdFromEnvironment();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (IdUnavailableException e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Logging in as guest&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> GUEST_USER_ID;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> getUserIdFromEnvironment() 
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throws</span> IdUnavailableException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IdUnavailableException();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;User ID: &#34;</span> + USER_ID);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> IdUnavailableException <span style="color:#fff;font-weight:bold">extends</span> Exception {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¨‹åºçš„è¿™ä¸ªç‰ˆæœ¬å¾ˆæ˜¾ç„¶æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”æ¯”æœ€åˆçš„ç‰ˆæœ¬æ ¹æ®å¯è¯»æ€§ï¼Œå› ä¸ºå®ƒä¸ºäº†åŸŸå€¼çš„è®¡ç®—è€Œå¢åŠ äº†ä¸€ä¸ªæè¿°æ€§çš„åå­—ï¼Œ è€Œæœ€åˆçš„ç‰ˆæœ¬åªæœ‰ä¸€ä¸ªåŒ¿åçš„é™æ€åˆå§‹åŒ–æ“ä½œè¯­å¥å—ã€‚å°†è¿™æ ·çš„ä¿®æ”¹ä½œç”¨äºç¨‹åºï¼Œå®ƒå°±å¯ä»¥å¦‚æˆ‘ä»¬çš„æœŸæœ›æ¥è¿è¡Œäº†ã€‚æ€»ä¹‹ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸éœ€è¦å­¦ä¹ æ˜ç¡®èµ‹å€¼è§„åˆ™çš„ç»†èŠ‚ã€‚è¯¥è§„åˆ™çš„ä½œä¸ºé€šå¸¸éƒ½æ˜¯æ­£ç¡®çš„ã€‚å¦‚æœä½ å¿…é¡»é‡æ„ä¸€ä¸ªç¨‹åºï¼Œä»¥æ¶ˆé™¤ç”±æ˜ç¡®èµ‹å€¼è§„åˆ™æ‰€å¼•å‘çš„é”™è¯¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ã€‚è¿™æ ·åšé™¤äº†å¯ä»¥è§£å†³æ˜ç¡®èµ‹å€¼é—®é¢˜ï¼Œè¿˜å¯ä»¥ä½¿ç¨‹åºçš„å¯è¯»æ€§æé«˜ã€‚</p>
<h2 id="æ‚¨å¥½å†è§">æ‚¨å¥½ï¼Œå†è§!<a hidden class="anchor" aria-hidden="true" href="#æ‚¨å¥½å†è§">#</a></h2>
<p>ä¸‹é¢çš„ç¨‹åºå°†ä¼šæ‰“å°å‡ºä»€ä¹ˆå‘¢?</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloGoodbye {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">exit</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Goodbye world&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ:
<code>Hello world</code></p>
<p>ç»“æœè¯´æ˜ï¼š
è¿™ä¸ªç¨‹åºåŒ…å«ä¸¤ä¸ª println è¯­å¥: ä¸€ä¸ªåœ¨ try è¯­å¥å—ä¸­ï¼Œ å¦ä¸€ä¸ªåœ¨ç›¸åº”çš„ finallyè¯­å¥å—ä¸­ã€‚try è¯­å¥å—æ‰§è¡Œå®ƒçš„ println è¯­å¥ï¼Œå¹¶ä¸”é€šè¿‡è°ƒç”¨ System.exit æ¥æå‰ç»“æŸæ‰§è¡Œã€‚
åœ¨æ­¤æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›æ§åˆ¶æƒä¼šè½¬äº¤ç»™ finally è¯­å¥å—ã€‚ç„¶è€Œï¼Œå¦‚æœä½ è¿è¡Œè¯¥ç¨‹åºï¼Œ
å°±ä¼šå‘ç°å®ƒæ°¸è¿œä¸ä¼šè¯´å†è§:å®ƒåªæ‰“å°äº† Hello worldã€‚è¿™æ˜¯å¦è¿èƒŒäº†&quot;Indecisiveç¤ºä¾‹&rdquo; ä¸­æ‰€è§£é‡Šçš„åŸåˆ™å‘¢? ä¸è®º try è¯­å¥å—çš„æ‰§è¡Œæ˜¯æ­£å¸¸åœ°è¿˜æ˜¯æ„å¤–åœ°ç»“æŸï¼Œ finally è¯­å¥å—ç¡®å®éƒ½ä¼šæ‰§è¡Œã€‚ç„¶è€Œåœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œtry è¯­å¥å—æ ¹æœ¬å°±æ²¡æœ‰ç»“æŸå…¶æ‰§è¡Œè¿‡ç¨‹ã€‚System.exit æ–¹æ³•å°†åœæ­¢å½“å‰çº¿ç¨‹å’Œæ‰€æœ‰å…¶ä»–å½“åœºæ­»äº¡çš„çº¿ç¨‹ã€‚
finally å­å¥çš„å‡ºç°å¹¶ä¸èƒ½ç»™äºˆçº¿ç¨‹ç»§ç»­å»æ‰§è¡Œçš„ç‰¹æ®Šæƒé™ã€‚
å½“ System.exit è¢«è°ƒç”¨æ—¶ï¼Œè™šæ‹Ÿæœºåœ¨å…³é—­å‰è¦æ‰§è¡Œä¸¤é¡¹æ¸…ç†å·¥ä½œã€‚é¦–å…ˆï¼Œå®ƒæ‰§è¡Œæ‰€æœ‰çš„å…³é—­æŒ‚é’©æ“ä½œï¼Œè¿™äº›æŒ‚é’©å·²ç»æ³¨å†Œåˆ°äº† Runtime.addShutdownHook ä¸Šã€‚è¿™å¯¹äºé‡Šæ”¾ VM ä¹‹å¤–çš„èµ„æºå°†å¾ˆæœ‰å¸®åŠ©ã€‚åŠ¡å¿…è¦ä¸ºé‚£äº›å¿…é¡»åœ¨ VM é€€å‡ºä¹‹å‰å‘ç”Ÿçš„è¡Œä¸ºå…³é—­æŒ‚é’©ã€‚ä¸‹é¢çš„ç¨‹åºç‰ˆæœ¬ç¤ºèŒƒäº†è¿™ç§æŠ€æœ¯ï¼Œ
å®ƒå¯ä»¥å¦‚æˆ‘ä»¬æ‰€æœŸæœ›åœ°æ‰“å°å‡º Hello world å’Œ Goodbye world:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloGoodbye1 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world&#34;</span>);
</span></span><span style="display:flex;"><span>        Runtime.<span style="color:#007f7f">getRuntime</span>().<span style="color:#007f7f">addShutdownHook</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Thread() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Goodbye world&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">exit</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>VM æ‰§è¡Œåœ¨ System.exit è¢«è°ƒç”¨æ—¶æ‰§è¡Œçš„ç¬¬äºŒä¸ªæ¸…ç†ä»»åŠ¡ä¸ç»ˆç»“å™¨æœ‰å…³ã€‚
å¦‚æœSystem.runFinalizerOnExit æˆ–å®ƒçš„é­”é¬¼åŒèƒèƒ Runtime.runFinalizersOnExitè¢«è°ƒç”¨äº†ï¼Œ
é‚£ä¹ˆ VM å°†åœ¨æ‰€æœ‰è¿˜æœªç»ˆç»“çš„å¯¹è±¡ä¸Šé¢è°ƒç”¨ç»ˆç»“å™¨ã€‚è¿™äº›æ–¹æ³•å¾ˆä¹…ä»¥å‰å°±å·²ç»è¿‡æ—¶äº†ï¼Œè€Œä¸”å…¶åŸå› ä¹Ÿå¾ˆåˆç†ã€‚
æ— è®ºä»€ä¹ˆåŸå› ï¼Œæ°¸è¿œä¸è¦è°ƒç”¨System.runFinalizersOnExit å’Œ Runtime.runFinalizersOnExit:
å®ƒä»¬å±äº Javaç±»åº“ä¸­æœ€å±é™©çš„æ–¹æ³•ä¹‹ä¸€[ThreadStop]ã€‚è°ƒç”¨è¿™äº›æ–¹æ³•å¯¼è‡´çš„ç»“æœæ˜¯ï¼Œ
ç»ˆç»“å™¨ä¼šåœ¨é‚£äº›å…¶ä»–çº¿ç¨‹æ­£åœ¨å¹¶å‘æ“ä½œçš„å¯¹è±¡ä¸Šé¢è¿è¡Œï¼Œ ä»è€Œå¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºæˆ–å¯¼è‡´æ­»é”ã€‚</p>
<p>æ€»ä¹‹ï¼ŒSystem.exit å°†ç«‹å³åœæ­¢æ‰€æœ‰çš„ç¨‹åºçº¿ç¨‹ï¼Œå®ƒå¹¶ä¸ä¼šä½¿ finally è¯­å¥å—å¾—åˆ°è°ƒç”¨ï¼Œä½†æ˜¯å®ƒåœ¨åœæ­¢ VMä¹‹å‰ä¼šæ‰§è¡Œå…³é—­æŒ‚é’©æ“ä½œã€‚å½“ VM è¢«å…³é—­æ—¶ï¼Œè¯·ä½¿ç”¨å…³é—­æŒ‚é’©æ¥ç»ˆæ­¢å¤–éƒ¨èµ„æºã€‚é€šè¿‡è°ƒç”¨ System.halt å¯ä»¥åœ¨ä¸æ‰§è¡Œå…³é—­æŒ‚é’©çš„æƒ…å†µä¸‹åœæ­¢ VMï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¾ˆå°‘ä½¿ç”¨ã€‚</p>
<h2 id="ä¸æƒ…æ„¿çš„æ„é€ å™¨">ä¸æƒ…æ„¿çš„æ„é€ å™¨<a hidden class="anchor" aria-hidden="true" href="#ä¸æƒ…æ„¿çš„æ„é€ å™¨">#</a></h2>
<p>ä¸‹é¢çš„ç¨‹åºå°†æ‰“å°å‡ºä»€ä¹ˆå‘¢?</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Reluctant {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Reluctant internalInstance = <span style="color:#fff;font-weight:bold">new</span> Reluctant();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Reluctant() <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> Exception(<span style="color:#0ff;font-weight:bold">&#34;I&#39;m not coming out&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            Reluctant b = <span style="color:#fff;font-weight:bold">new</span> Reluctant();
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Surprise!&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;I told you so&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Exception in thread &#34;main&#34; java.lang.StackOverflowError
</span></span><span style="display:flex;"><span>    at Reluctant.&lt;init&gt;(Reluctant.java:3)
</span></span><span style="display:flex;"><span>    ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¯´æ˜ï¼š
main æ–¹æ³•è°ƒç”¨äº† Reluctant æ„é€ å™¨ï¼Œå®ƒå°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä½ å¯èƒ½æœŸæœ› catch å­å¥èƒ½å¤Ÿæ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”æ‰“å° I told you soã€‚å‡‘è¿‘ä»”ç»†çœ‹çœ‹è¿™ä¸ªç¨‹åºå°±ä¼šå‘ç°ï¼ŒReluctant å®ä¾‹è¿˜åŒ…å«ç¬¬äºŒä¸ªå†…éƒ¨å®ä¾‹ï¼Œå®ƒçš„æ„é€ å™¨ä¹Ÿä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚æ— è®ºæŠ›å‡ºå“ªä¸€ä¸ªå¼‚å¸¸ï¼Œçœ‹èµ·æ¥ main ä¸­çš„ catch å­å¥éƒ½åº”è¯¥æ•è·å®ƒï¼Œå› æ­¤é¢„æµ‹è¯¥ç¨‹åºå°†æ‰“å° I told you åº”è¯¥æ˜¯ä¸€ä¸ªå®‰å…¨çš„èµŒæ³¨ã€‚ä½†æ˜¯å½“ä½ å°è¯•ç€å»è¿è¡Œå®ƒæ—¶ï¼Œå°±ä¼šå‘ç°å®ƒå‹æ ¹æ²¡æœ‰å»åšè¿™ç±»çš„äº‹æƒ…ï¼šå®ƒæŠ›å‡ºäº† StackOverflowError å¼‚å¸¸ï¼Œä¸ºä»€ä¹ˆå‘¢?</p>
<p>ä¸å¤§å¤šæ•°æŠ›å‡º StackOverflowError å¼‚å¸¸çš„ç¨‹åºä¸€æ ·ï¼Œæœ¬ç¨‹åºä¹ŸåŒ…å«äº†ä¸€ä¸ªæ— é™é€’å½’ã€‚
å½“ä½ è°ƒç”¨ä¸€ä¸ªæ„é€ å™¨æ—¶ï¼Œå®ä¾‹å˜é‡çš„åˆå§‹åŒ–æ“ä½œå°†å…ˆäºæ„é€ å™¨çš„ç¨‹åºä½“è€Œè¿è¡Œ[JLS 12.5]ã€‚åœ¨æœ¬è°œé¢˜ä¸­ï¼Œ internalInstance å˜é‡çš„åˆå§‹åŒ–æ“ä½œé€’å½’è°ƒç”¨äº†æ„é€ å™¨ï¼Œè€Œè¯¥æ„é€ å™¨é€šè¿‡å†æ¬¡è°ƒç”¨ Reluctant æ„é€ å™¨è€Œåˆå§‹åŒ–è¯¥å˜é‡è‡ªå·±çš„ internalInstance åŸŸï¼Œå¦‚æ­¤æ— é™é€’å½’ä¸‹å»ã€‚è¿™äº›é€’å½’è°ƒç”¨åœ¨æ„é€ å™¨ç¨‹åºä½“è·å¾—æ‰§è¡Œæœºä¼šä¹‹å‰å°±ä¼šæŠ›å‡º StackOverflowError å¼‚å¸¸ï¼Œå› ä¸º StackOverflowError æ˜¯ Error çš„å­ç±»å‹è€Œä¸æ˜¯ Exception çš„å­ç±»å‹ï¼Œæ‰€ä»¥ catch å­å¥æ— æ³•æ•è·å®ƒã€‚å¯¹äºä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸å®ƒè‡ªå·±ç±»å‹ç›¸åŒçš„å®ä¾‹çš„æƒ…å†µï¼Œå¹¶ä¸å°‘è§ã€‚ä¾‹å¦‚ï¼Œé“¾æ¥åˆ—è¡¨èŠ‚ç‚¹ã€æ ‘èŠ‚ç‚¹å’Œå›¾èŠ‚ç‚¹éƒ½å±äºè¿™ç§æƒ…å†µã€‚ä½ å¿…é¡»éå¸¸å°å¿ƒåœ°åˆå§‹åŒ–è¿™æ ·çš„åŒ…å«å®ä¾‹ï¼Œä»¥é¿å… StackOverflowError å¼‚å¸¸ã€‚</p>
<p>è‡³äºæœ¬è°œé¢˜åä¹‰ä¸Šçš„é¢˜ç›®:å£°æ˜å°†æŠ›å‡ºå¼‚å¸¸çš„æ„é€ å™¨ï¼Œä½ éœ€è¦æ³¨æ„ï¼Œæ„é€ å™¨å¿…é¡»å£°æ˜å…¶å®ä¾‹åˆå§‹åŒ–æ“ä½œä¼šæŠ›å‡ºçš„æ‰€æœ‰è¢«æ£€æŸ¥å¼‚å¸¸ã€‚</p>
<h2 id="åŸŸå’Œæµ">åŸŸå’Œæµ<a hidden class="anchor" aria-hidden="true" href="#åŸŸå’Œæµ">#</a></h2>
<p>ä¸‹é¢çš„æ–¹æ³•å°†ä¸€ä¸ªæ–‡ä»¶æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¢«è®¾è®¡ä¸ºè¦å…³é—­å®ƒæ‰€åˆ›å»ºçš„æ¯ä¸€ä¸ªæµï¼Œå³ä½¿å®ƒç¢°åˆ° I/O é”™è¯¯ä¹Ÿè¦å¦‚æ­¤ã€‚é—æ†¾çš„æ˜¯ï¼Œå®ƒå¹¶éæ€»æ˜¯èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸ºä»€ä¹ˆä¸èƒ½å‘¢ï¼Œä½ å¦‚ä½•æ‰èƒ½è®¢æ­£å®ƒå‘¢?</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> copy(String src<span style="color:#f00">ï¼Œ</span> String dest) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    InputStream in = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    OutputStream out = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        in = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(src);
</span></span><span style="display:flex;"><span>        out = <span style="color:#fff;font-weight:bold">new</span> FileOutputStream(dest);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] buf = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[<span style="color:#ff0;font-weight:bold">1024</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">while</span> ((n = in.<span style="color:#007f7f">read</span>(buf)) &gt; <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">write</span>(buf<span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">0</span><span style="color:#f00">ï¼Œ</span> n);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (in != <span style="color:#fff;font-weight:bold">null</span>) in.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (out != <span style="color:#fff;font-weight:bold">null</span>) out.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è°œé¢˜åˆ†æï¼š
è¿™ä¸ªç¨‹åºçœ‹èµ·æ¥å·²ç»é¢é¢ä¿±åˆ°äº†ã€‚å…¶æµåŸŸ(in å’Œ out)è¢«åˆå§‹åŒ–ä¸º nullï¼Œå¹¶ä¸”æ–°çš„æµä¸€æ—¦è¢«åˆ›å»ºï¼Œå®ƒä»¬é©¬ä¸Šå°±è¢«è®¾ç½®ä¸ºè¿™äº›æµåŸŸçš„æ–°å€¼ã€‚å¯¹äºè¿™äº›åŸŸæ‰€å¼•ç”¨çš„æµï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™ finally è¯­å¥å—ä¼šå°†å…¶å…³é—­ã€‚å³ä¾¿åœ¨æ‹·è´æ“ä½œå¼•å‘äº†ä¸€ä¸ª IOException çš„æƒ…å†µä¸‹ï¼Œfinally è¯­å¥å—ä¹Ÿä¼šåœ¨æ–¹æ³•è¿”å›ä¹‹å‰æ‰§è¡Œã€‚å‡ºä»€ä¹ˆé”™äº†å‘¢?
é—®é¢˜åœ¨ finally è¯­å¥å—è‡ªèº«ä¸­ã€‚close æ–¹æ³•ä¹Ÿå¯èƒ½ä¼šæŠ›å‡º IOException å¼‚å¸¸ã€‚å¦‚æœè¿™æ­£å¥½å‘ç”Ÿåœ¨ in.close è¢«è°ƒç”¨ä¹‹æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸å°±ä¼šé˜»æ­¢ out.close è¢«è°ƒç”¨ï¼Œä»è€Œä½¿è¾“å‡ºæµä»ä¿æŒåœ¨å¼€æ”¾çŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œè¯¥ç¨‹åºè¿åäº†&quot;ä¼˜æŸ”å¯¡æ–­&quot; çš„å»ºè®®:å¯¹ close çš„è°ƒç”¨å¯èƒ½ä¼šå¯¼è‡´ finally è¯­å¥å—æ„å¤–ç»“æŸã€‚é—æ†¾çš„æ˜¯ï¼Œç¼–è¯‘å™¨å¹¶ä¸èƒ½å¸®åŠ©ä½ å‘ç°æ­¤é—®é¢˜ï¼Œå› ä¸º close æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸ read å’Œ write æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ç›¸åŒï¼Œè€Œå…¶å¤–å›´æ–¹æ³•(copy)å£°æ˜å°†ä¼ æ’­è¯¥å¼‚å¸¸ã€‚è§£å†³æ–¹å¼æ˜¯å°†æ¯ä¸€ä¸ª close éƒ½åŒ…è£…åœ¨ä¸€ä¸ªåµŒå¥—çš„ try è¯­å¥å—ä¸­ã€‚</p>
<p>ä¸‹é¢çš„ finally è¯­å¥å—çš„ç‰ˆæœ¬å¯ä»¥ä¿è¯åœ¨ä¸¤ä¸ªæµä¸Šéƒ½ä¼šè°ƒç”¨ close:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å’Œä¹‹å‰ä¸€æ ·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>} <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (in != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            in.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (IOException ex) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// There is nothing we can do if close fails
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (out != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (IOException ex) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// There is nothing we can do if close fails
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ä¹‹ï¼Œå½“ä½ åœ¨ finally è¯­å¥å—ä¸­è°ƒç”¨ close æ–¹æ³•æ—¶ï¼Œè¦ç”¨ä¸€ä¸ªåµŒå¥—çš„ try-catch è¯­å¥æ¥ä¿æŠ¤å®ƒï¼Œ
ä»¥é˜²æ­¢ IOException çš„ä¼ æ’­ã€‚æ›´ä¸€èˆ¬åœ°è®²ï¼Œå¯¹äºä»»ä½•åœ¨ finally è¯­å¥å—ä¸­å¯èƒ½ä¼šæŠ›å‡ºçš„è¢«æ£€æŸ¥å¼‚å¸¸éƒ½è¦è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä»»å…¶ä¼ æ’­ã€‚</p>
<h2 id="å¼‚å¸¸ä¸ºå¾ªç¯è€ŒæŠ›">å¼‚å¸¸ä¸ºå¾ªç¯è€ŒæŠ›<a hidden class="anchor" aria-hidden="true" href="#å¼‚å¸¸ä¸ºå¾ªç¯è€ŒæŠ›">#</a></h2>
<p>ä¸‹é¢çš„ç¨‹åºä¼šæ‰“å°å‡ºä»€ä¹ˆå‘¢?</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Loop {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span>[][] tests = { { <span style="color:#ff0;font-weight:bold">6</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">5</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">4</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">3</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">1</span> }<span style="color:#f00">ï¼Œ</span> { <span style="color:#ff0;font-weight:bold">1</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">2</span> }<span style="color:#f00">ï¼Œ</span>
</span></span><span style="display:flex;"><span>            { <span style="color:#ff0;font-weight:bold">1</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">3</span> }<span style="color:#f00">ï¼Œ</span> { <span style="color:#ff0;font-weight:bold">1</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">3</span><span style="color:#f00">ï¼Œ</span> <span style="color:#ff0;font-weight:bold">4</span> }<span style="color:#f00">ï¼Œ</span> { <span style="color:#ff0;font-weight:bold">1</span> } };
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> successCount = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">while</span> (<span style="color:#fff;font-weight:bold">true</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (thirdElementIsThree(tests[i++]))
</span></span><span style="display:flex;"><span>                    successCount ++;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span>(ArrayIndexOutOfBoundsException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// No more tests to process
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(successCount);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">boolean</span> thirdElementIsThree(<span style="color:#fff;font-weight:bold">int</span>[] a) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> a.<span style="color:#007f7f">length</span> &gt;= <span style="color:#ff0;font-weight:bold">3</span> &amp; a[<span style="color:#ff0;font-weight:bold">2</span>] == <span style="color:#ff0;font-weight:bold">3</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
<code>0</code></p>
<p>ç»“æœè¯´æ˜ï¼š
è¯¥ç¨‹åºä¸»è¦è¯´æ˜äº†ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ä¸åº”è¯¥ä½¿ç”¨å¼‚å¸¸ä½œä¸ºç»ˆæ­¢å¾ªç¯çš„æ‰‹æ®µï¼
è¯¥ç¨‹åºç”¨ thirdElementIsThree æ–¹æ³•æµ‹è¯•äº† tests æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚éå†è¿™ä¸ªæ•°ç»„çš„å¾ªç¯æ˜¾ç„¶æ˜¯éä¼ ç»Ÿçš„å¾ªç¯ï¼šå®ƒä¸æ˜¯åœ¨å¾ªç¯å˜é‡ç­‰äºæ•°ç»„é•¿åº¦çš„æ—¶å€™ç»ˆæ­¢ï¼Œè€Œæ˜¯åœ¨å®ƒè¯•å›¾è®¿é—®ä¸€ä¸ªå¹¶ä¸åœ¨æ•°ç»„ä¸­çš„å…ƒç´ æ—¶ç»ˆæ­¢ã€‚å°½ç®¡å®ƒæ˜¯éä¼ ç»Ÿçš„ï¼Œä½†æ˜¯è¿™ä¸ªå¾ªç¯åº”è¯¥å¯ä»¥å·¥ä½œã€‚
å¦‚æœä¼ é€’ç»™ thirdElementIsThree çš„å‚æ•°å…·æœ‰ 3 ä¸ªæˆ–æ›´å¤šçš„å…ƒç´ ï¼Œå¹¶ä¸”å…¶ç¬¬ä¸‰ä¸ªå…ƒç´ ç­‰äº 3ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°†è¿”å› trueã€‚å¯¹äº testsä¸­çš„ 5 ä¸ªå…ƒç´ æ¥è¯´ï¼Œæœ‰ 2 ä¸ªå°†è¿”å› trueï¼Œå› æ­¤çœ‹èµ·æ¥è¯¥ç¨‹åºåº”è¯¥æ‰“å° 2ã€‚å¦‚æœä½ è¿è¡Œå®ƒï¼Œå°±ä¼šå‘ç°å®ƒæ‰“å°çš„æ—¶ 0ã€‚è‚¯å®šæ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œä½ èƒ½ç¡®å®šå—? äº‹å®ä¸Šï¼Œè¿™ä¸ªç¨‹åºçŠ¯äº†ä¸¤ä¸ªé”™è¯¯ã€‚ç¬¬ä¸€ä¸ªé”™è¯¯æ˜¯è¯¥ç¨‹åºä½¿ç”¨äº†ä¸€ç§å¯æ€•çš„å¾ªç¯æƒ¯ç”¨æ³•ï¼Œè¯¥æƒ¯ç”¨æ³•ä¾èµ–çš„æ˜¯å¯¹æ•°ç»„çš„è®¿é—®ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
è¿™ç§æƒ¯ç”¨æ³•ä¸ä»…éš¾ä»¥é˜…è¯»ï¼Œ è€Œä¸”è¿è¡Œé€Ÿåº¦è¿˜éå¸¸åœ°æ…¢ã€‚
ä¸è¦ä½¿ç”¨å¼‚å¸¸æ¥è¿›è¡Œå¾ªç¯æ§åˆ¶;åº”è¯¥åªä¸ºå¼‚å¸¸æ¡ä»¶è€Œä½¿ç”¨å¼‚å¸¸ã€‚ä¸ºäº†çº æ­£è¿™ä¸ªé”™è¯¯ï¼Œå¯ä»¥å°†æ•´ä¸ª try-finally è¯­å¥å—æ›¿æ¢ä¸ºå¾ªç¯éå†æ•°ç»„çš„æ ‡å‡†æƒ¯ç”¨æ³•:</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>for (int i = 0; i &lt; test.length; i++)
</span></span><span style="display:flex;"><span>    if (thirdElementIsThree(tests[i]))
</span></span><span style="display:flex;"><span>        successCount++;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ 5.0 æˆ–è€…æ˜¯æ›´æ–°çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç”¨ for å¾ªç¯ç»“æ„æ¥ä»£æ›¿:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span>[] test : tests)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span>(thirdElementIsThree(test))
</span></span><span style="display:flex;"><span>        successCount++;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸»è¦æ¯”è¾ƒ&quot;&amp;æ“ä½œç¬¦&quot; å’Œ &ldquo;&amp;&amp;æ“ä½œç¬¦&quot;çš„åŒºåˆ«ã€‚æ³¨æ„ç¤ºä¾‹ä¸­çš„æ“ä½œç¬¦æ˜¯&amp;ï¼Œè¿™æ˜¯æŒ‰ä½è¿›è¡Œ&quot;ä¸&quot;æ“ä½œã€‚</li>
</ul>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/java%E5%9F%BA%E7%A1%80/">javaåŸºç¡€</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Wjy&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>