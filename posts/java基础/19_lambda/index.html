<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>19_lambda | Wjy&#39;s Blog</title>
<meta name="keywords" content="javaåŸºç¡€">
<meta name="description" content="å‡½æ•°å¼ç¼–ç¨‹
æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚
Javaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦thiså‚æ•°çš„å‡½æ•°ã€‚
è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚
æˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚
åœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚
è€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚
å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚
å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚
å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼
å‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶é˜¿éš†ä½Â·é‚±å¥‡ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚
Javaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/19_lambda/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://009965.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://009965.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://009965.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://009965.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://009965.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/19_lambda/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/19_lambda/">
  <meta property="og:site_name" content="Wjy&#39;s Blog">
  <meta property="og:title" content="19_lambda">
  <meta property="og:description" content="å‡½æ•°å¼ç¼–ç¨‹ æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚
Javaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦thiså‚æ•°çš„å‡½æ•°ã€‚
è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚
æˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚
åœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚
è€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚
å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚
å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚
å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼
å‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶é˜¿éš†ä½Â·é‚±å¥‡ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚
Javaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-08-15T18:18:18+00:00">
    <meta property="article:modified_time" content="2022-08-15T18:18:18+00:00">
    <meta property="article:tag" content="JavaåŸºç¡€">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="19_lambda">
<meta name="twitter:description" content="å‡½æ•°å¼ç¼–ç¨‹
æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚
Javaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦thiså‚æ•°çš„å‡½æ•°ã€‚
è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚
æˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚
åœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚
è€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚
å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚
å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚
å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼
å‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶é˜¿éš†ä½Â·é‚±å¥‡ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚
Javaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://009965.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "19_lambda",
      "item": "https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/19_lambda/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "19_lambda",
  "name": "19_lambda",
  "description": "å‡½æ•°å¼ç¼–ç¨‹ æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚\nJavaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦thiså‚æ•°çš„å‡½æ•°ã€‚\nè€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚\næˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚\nåœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚\nè€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚\nå¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚\nå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚\nå‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼\nå‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶é˜¿éš†ä½Â·é‚±å¥‡ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚\nJavaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚\n",
  "keywords": [
    "javaåŸºç¡€"
  ],
  "articleBody": "å‡½æ•°å¼ç¼–ç¨‹ æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚\nJavaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦thiså‚æ•°çš„å‡½æ•°ã€‚\nè€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚\næˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚\nåœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚\nè€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚\nå¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚\nå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚\nå‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼\nå‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶é˜¿éš†ä½Â·é‚±å¥‡ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚\nJavaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚\nLambdaåŸºç¡€ åœ¨äº†è§£Lambdaä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹Javaçš„æ–¹æ³•ã€‚\nJavaçš„æ–¹æ³•åˆ†ä¸ºå®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚Integerå®šä¹‰çš„equals()æ–¹æ³•ï¼š\n1 2 3 4 5 public final class Integer { boolean equals(Object o) { } } ä»¥åŠé™æ€æ–¹æ³•ï¼Œä¾‹å¦‚Integerå®šä¹‰çš„parseInt()æ–¹æ³•ï¼š\n1 2 3 4 5 public final class Integer { public static int parseInt(String s) { } } æ— è®ºæ˜¯å®ä¾‹æ–¹æ³•ï¼Œè¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šéƒ½ç›¸å½“äºè¿‡ç¨‹å¼è¯­è¨€çš„å‡½æ•°ã€‚ä¾‹å¦‚Cå‡½æ•°ï¼š\n1 char* strcpy(char* dest, char* src) åªä¸è¿‡Javaçš„å®ä¾‹æ–¹æ³•éšå«åœ°ä¼ å…¥äº†ä¸€ä¸ªthiså˜é‡ï¼Œå³å®ä¾‹æ–¹æ³•æ€»æ˜¯æœ‰ä¸€ä¸ªéšå«å‚æ•°thisã€‚\nå‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰æ˜¯æŠŠå‡½æ•°ä½œä¸ºåŸºæœ¬è¿ç®—å•å…ƒï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå˜é‡ï¼Œå¯ä»¥æ¥æ”¶å‡½æ•°ï¼Œè¿˜å¯ä»¥è¿”å›å‡½æ•°ã€‚å†å²ä¸Šç ”ç©¶å‡½æ•°å¼ç¼–ç¨‹çš„ç†è®ºæ˜¯Lambdaæ¼”ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸æŠŠæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„ç¼–ç é£æ ¼ç§°ä¸ºLambdaè¡¨è¾¾å¼ã€‚\nLambdaè¡¨è¾¾å¼ åœ¨Javaç¨‹åºä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€å¤§å †å•æ–¹æ³•æ¥å£ï¼Œå³ä¸€ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š\nComparator Runnable Callable ä»¥Comparatorä¸ºä¾‹ï¼Œæˆ‘ä»¬æƒ³è¦è°ƒç”¨Arrays.sort()æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªComparatorå®ä¾‹ï¼Œä»¥åŒ¿åç±»æ–¹å¼ç¼–å†™å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 String[] array = [\"c\",\"b\",\"a\"]; Arrays.sort(array, new Comparator() { public int compare(String s1, String s2) { return s1.compareTo(s2); } }); ä¸Šè¿°å†™æ³•éå¸¸ç¹çã€‚ä»Java 8å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ›¿æ¢å•æ–¹æ³•æ¥å£ã€‚æ”¹å†™ä¸Šè¿°ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 public class Main { public static void main(String[] args) { String[] array = new String[] {\"Apple\", \"Orange\", \"Banana\", \"Lemon\"}; Arrays.sort(array, (s1, s2) -\u003e { return s1.compareTo(s2); }); System.out.println(String.join(\", \", array)); } } è§‚å¯ŸLambdaè¡¨è¾¾å¼çš„å†™æ³•ï¼Œå®ƒåªéœ€è¦å†™å‡ºæ–¹æ³•å®šä¹‰ï¼š\n1 2 3 (s1, s2) -\u003e { return s1.compareTo(s2); } å…¶ä¸­ï¼Œå‚æ•°æ˜¯(s1, s2)ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºStringç±»å‹ã€‚-\u003e { ... }è¡¨ç¤ºæ–¹æ³•ä½“ï¼Œæ‰€æœ‰ä»£ç å†™åœ¨å†…éƒ¨å³å¯ã€‚Lambdaè¡¨è¾¾å¼æ²¡æœ‰classå®šä¹‰ï¼Œå› æ­¤å†™æ³•éå¸¸ç®€æ´ã€‚\nå¦‚æœåªæœ‰ä¸€è¡Œreturn xxxçš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥ç”¨æ›´ç®€å•çš„å†™æ³•ï¼š\n1 Arrays.sort(array, (s1, s2) -\u003e s1.compareTo(s2)); è¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­çš„ï¼Œè¿™é‡Œæ¨æ–­å‡ºçš„è¿”å›å€¼æ˜¯intï¼Œå› æ­¤ï¼Œåªè¦è¿”å›intï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šæŠ¥é”™ã€‚\nFunctionalInterface æˆ‘ä»¬æŠŠåªå®šä¹‰äº†å•æ–¹æ³•çš„æ¥å£ç§°ä¹‹ä¸ºFunctionalInterfaceï¼Œç”¨æ³¨è§£@FunctionalInterfaceæ ‡è®°ã€‚ä¾‹å¦‚ï¼ŒCallableæ¥å£ï¼š\n1 2 3 4 @FunctionalInterface public interface Callable { V call() throws Exception; } å†æ¥çœ‹Comparatoræ¥å£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @FunctionalInterface public interface Comparator { int compare(T o1, T o2); boolean equals(Object obj); default Comparator reversed() { return Collections.reverseOrder(this); } default Comparator thenComparing(Comparator\u003c? super T\u003e other) { ... } ... } è™½ç„¶Comparatoræ¥å£æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•int compare(T o1, T o2)ï¼Œå…¶ä»–çš„æ–¹æ³•éƒ½æ˜¯defaultæ–¹æ³•æˆ–staticæ–¹æ³•ã€‚å¦å¤–æ³¨æ„åˆ°boolean equals(Object obj)æ˜¯Objectå®šä¹‰çš„æ–¹æ³•ï¼Œä¸ç®—åœ¨æ¥å£æ–¹æ³•å†…ã€‚å› æ­¤ï¼ŒComparatorä¹Ÿæ˜¯ä¸€ä¸ªFunctionalInterfaceã€‚\nå°ç»“ å•æ–¹æ³•æ¥å£è¢«ç§°ä¸ºFunctionalInterfaceã€‚\næ¥æ”¶FunctionalInterfaceä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ä¾‹åŒ–çš„åŒ¿åç±»æ”¹å†™ä¸ºLambdaè¡¨è¾¾å¼ï¼Œèƒ½å¤§å¤§ç®€åŒ–ä»£ç ã€‚\nLambdaè¡¨è¾¾å¼çš„å‚æ•°å’Œè¿”å›å€¼å‡å¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ã€‚\næ–¹æ³•å¼•ç”¨ ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸å¿…ç¼–å†™FunctionalInterfaceæ¥å£çš„å®ç°ç±»ï¼Œä»è€Œç®€åŒ–ä»£ç ï¼š\n1 2 3 Arrays.sort(array, (s1, s2) -\u003e { return s1.compareTo(s2); }); å®é™…ä¸Šï¼Œé™¤äº†Lambdaè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public class Main { public static void main(String[] args) { String[] array = new String[] { \"Apple\", \"Orange\", \"Banana\", \"Lemon\" }; Arrays.sort(array, Main::cmp); System.out.println(String.join(\", \", array)); } static int cmp(String s1, String s2) { return s1.compareTo(s2); } } ä¸Šè¿°ä»£ç åœ¨Arrays.sort()ä¸­ç›´æ¥ä¼ å…¥äº†é™æ€æ–¹æ³•cmpçš„å¼•ç”¨ï¼Œç”¨Main::cmpè¡¨ç¤ºã€‚\nå› æ­¤ï¼Œæ‰€è°“æ–¹æ³•å¼•ç”¨ï¼Œæ˜¯æŒ‡å¦‚æœæŸä¸ªæ–¹æ³•ç­¾åå’Œæ¥å£æ°å¥½ä¸€è‡´ï¼Œå°±å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚\nå› ä¸ºComparatoræ¥å£å®šä¹‰çš„æ–¹æ³•æ˜¯int compare(String, String)ï¼Œå’Œé™æ€æ–¹æ³•int cmp(String, String)ç›¸æ¯”ï¼Œé™¤äº†æ–¹æ³•åå¤–ï¼Œæ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œè¿”å›ç±»å‹ç›¸åŒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¯´ä¸¤è€…çš„æ–¹æ³•ç­¾åä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–¹æ³•åä½œä¸ºLambdaè¡¨è¾¾å¼ä¼ å…¥ï¼š\n1 Arrays.sort(array, Main::cmp); æ³¨æ„ï¼šåœ¨è¿™é‡Œï¼Œæ–¹æ³•ç­¾ååªçœ‹å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼Œä¸çœ‹æ–¹æ³•åç§°ï¼Œä¹Ÿä¸çœ‹ç±»çš„ç»§æ‰¿å…³ç³»ã€‚\næˆ‘ä»¬å†çœ‹çœ‹å¦‚ä½•å¼•ç”¨å®ä¾‹æ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬æŠŠä»£ç æ”¹å†™å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 public class Main { public static void main(String[] args) { String[] array = new String[] { \"Apple\", \"Orange\", \"Banana\", \"Lemon\" }; Arrays.sort(array, String::compareTo); System.out.println(String.join(\", \", array)); } } ä¸ä½†å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œè€Œä¸”è¿è¡Œç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜String.compareTo()æ–¹æ³•ä¹Ÿç¬¦åˆLambdaå®šä¹‰ã€‚\nè§‚å¯ŸString.compareTo()çš„æ–¹æ³•å®šä¹‰ï¼š\n1 2 3 4 5 public final class String { public int compareTo(String o) { } } è¿™ä¸ªæ–¹æ³•çš„ç­¾ååªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸ºä»€ä¹ˆå’Œint Comparator.compare(String, String)èƒ½åŒ¹é…å‘¢ï¼Ÿ\nå› ä¸ºå®ä¾‹æ–¹æ³•æœ‰ä¸€ä¸ªéšå«çš„thiså‚æ•°ï¼ŒStringç±»çš„compareTo()æ–¹æ³•åœ¨å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªéšå«å‚æ•°æ€»æ˜¯ä¼ å…¥thisï¼Œç›¸å½“äºé™æ€æ–¹æ³•ï¼š\n1 public static int compareTo(this, String o); æ‰€ä»¥ï¼ŒString.compareTo()æ–¹æ³•ä¹Ÿå¯ä½œä¸ºæ–¹æ³•å¼•ç”¨ä¼ å…¥ã€‚\næ„é€ æ–¹æ³•å¼•ç”¨ é™¤äº†å¯ä»¥å¼•ç”¨é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼šå¦‚æœè¦æŠŠä¸€ä¸ªListè½¬æ¢ä¸ºListï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ\n1 2 3 4 5 6 7 8 9 class Person { String name; public Person(String name) { this.name = name; } } List names = List.of(\"Bob\", \"Alice\", \"Tim\"); List persons = ??? ä¼ ç»Ÿçš„åšæ³•æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªArrayListï¼Œç„¶åç”¨forå¾ªç¯å¡«å……è¿™ä¸ªListï¼š\n1 2 3 4 5 List names = List.of(\"Bob\", \"Alice\", \"Tim\"); List persons = new ArrayList\u003c\u003e(); for (String name : names) { persons.add(new Person(name)); } è¦æ›´ç®€å•åœ°å®ç°Stringåˆ°Personçš„è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å¼•ç”¨Personçš„æ„é€ æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class Main { public static void main(String[] args) { List names = List.of(\"Bob\", \"Alice\", \"Tim\"); List persons = names.stream().map(Person::new).collect(Collectors.toList()); System.out.println(persons); } } class Person { String name; public Person(String name) { this.name = name; } public String toString() { return \"Person:\" + this.name; } } åé¢æˆ‘ä»¬ä¼šè®²åˆ°Streamçš„map()æ–¹æ³•ã€‚ç°åœ¨æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™é‡Œçš„map()éœ€è¦ä¼ å…¥çš„FunctionalInterfaceçš„å®šä¹‰æ˜¯ï¼š\n1 2 3 4 @FunctionalInterface public interface Function { R apply(T t); } æŠŠæ³›å‹å¯¹åº”ä¸Šå°±æ˜¯æ–¹æ³•ç­¾åPerson apply(String)ï¼Œå³ä¼ å…¥å‚æ•°Stringï¼Œè¿”å›ç±»å‹Personã€‚è€ŒPersonç±»çš„æ„é€ æ–¹æ³•æ°å¥½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå› ä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°æ˜¯Stringï¼Œè€Œæ„é€ æ–¹æ³•è™½ç„¶æ²¡æœ‰returnè¯­å¥ï¼Œä½†å®ƒä¼šéšå¼åœ°è¿”å›thiså®ä¾‹ï¼Œç±»å‹å°±æ˜¯Personï¼Œå› æ­¤ï¼Œæ­¤å¤„å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚æ„é€ æ–¹æ³•çš„å¼•ç”¨å†™æ³•æ˜¯ç±»å::newï¼Œå› æ­¤ï¼Œæ­¤å¤„ä¼ å…¥Person::newã€‚\nå°ç»“ FunctionalInterfaceå…è®¸ä¼ å…¥ï¼š\næ¥å£çš„å®ç°ç±»ï¼ˆä¼ ç»Ÿå†™æ³•ï¼Œä»£ç è¾ƒç¹çï¼‰ï¼› Lambdaè¡¨è¾¾å¼ï¼ˆåªéœ€åˆ—å‡ºå‚æ•°åï¼Œç”±ç¼–è¯‘å™¨æ¨æ–­ç±»å‹ï¼‰ï¼› ç¬¦åˆæ–¹æ³•ç­¾åçš„é™æ€æ–¹æ³•ï¼› ç¬¦åˆæ–¹æ³•ç­¾åçš„å®ä¾‹æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ï¼‰ï¼› ç¬¦åˆæ–¹æ³•ç­¾åçš„æ„é€ æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšè¿”å›ç±»å‹ï¼‰ã€‚ FunctionalInterfaceä¸å¼ºåˆ¶ç»§æ‰¿å…³ç³»ï¼Œä¸éœ€è¦æ–¹æ³•åç§°ç›¸åŒï¼Œåªè¦æ±‚æ–¹æ³•å‚æ•°ï¼ˆç±»å‹å’Œæ•°é‡ï¼‰ä¸æ–¹æ³•è¿”å›ç±»å‹ç›¸åŒï¼Œå³è®¤ä¸ºæ–¹æ³•ç­¾åç›¸åŒã€‚\nä½¿ç”¨Stream Javaä»8å¼€å§‹ï¼Œä¸ä½†å¼•å…¥äº†Lambdaè¡¨è¾¾å¼ï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„æµå¼APIï¼šStream APIã€‚å®ƒä½äºjava.util.streamåŒ…ä¸­ã€‚\nåˆ’é‡ç‚¹ï¼šè¿™ä¸ªStreamä¸åŒäºjava.ioçš„InputStreamå’ŒOutputStreamï¼Œå®ƒä»£è¡¨çš„æ˜¯ä»»æ„Javaå¯¹è±¡çš„åºåˆ—ã€‚ä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š\njava.io java.util.stream å­˜å‚¨ é¡ºåºè¯»å†™çš„byteæˆ–char é¡ºåºè¾“å‡ºçš„ä»»æ„Javaå¯¹è±¡å®ä¾‹ ç”¨é€” åºåˆ—åŒ–è‡³æ–‡ä»¶æˆ–ç½‘ç»œ å†…å­˜è®¡ç®—ï¼ä¸šåŠ¡é€»è¾‘ æœ‰åŒå­¦ä¼šé—®ï¼šä¸€ä¸ªé¡ºåºè¾“å‡ºçš„Javaå¯¹è±¡åºåˆ—ï¼Œä¸å°±æ˜¯ä¸€ä¸ªListå®¹å™¨å—ï¼Ÿ\nå†æ¬¡åˆ’é‡ç‚¹ï¼šè¿™ä¸ªStreamå’ŒListä¹Ÿä¸ä¸€æ ·ï¼ŒListå­˜å‚¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å·²ç»å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æŸä¸ªJavaå¯¹è±¡ï¼Œè€ŒStreamè¾“å‡ºçš„å…ƒç´ å¯èƒ½å¹¶æ²¡æœ‰é¢„å…ˆå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚\næ¢å¥è¯è¯´ï¼ŒListçš„ç”¨é€”æ˜¯æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„Javaå¯¹è±¡ï¼Œè€ŒStreamå®ç°çš„æ˜¯æƒ°æ€§è®¡ç®—ï¼Œä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š\njava.util.List java.util.stream å…ƒç´  å·²åˆ†é…å¹¶å­˜å‚¨åœ¨å†…å­˜ å¯èƒ½æœªåˆ†é…ï¼Œå®æ—¶è®¡ç®— ç”¨é€” æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„Javaå¯¹è±¡ æƒ°æ€§è®¡ç®— Streamçœ‹ä¸Šå»æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å°±æ˜ç™½äº†ã€‚\nå¦‚æœæˆ‘ä»¬è¦è¡¨ç¤ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„é›†åˆï¼Œæ˜¾ç„¶ï¼Œç”¨Listæ˜¯ä¸å¯èƒ½å†™å‡ºæ¥çš„ï¼Œå› ä¸ºè‡ªç„¶æ•°æ˜¯æ— é™çš„ï¼Œå†…å­˜å†å¤§ä¹Ÿæ²¡æ³•æ”¾åˆ°Listä¸­ï¼š\n1 List list = ??? // å…¨ä½“è‡ªç„¶æ•°? ä½†æ˜¯ï¼Œç”¨Streamå¯ä»¥åšåˆ°ã€‚å†™æ³•å¦‚ä¸‹ï¼š\n1 Stream naturals = createNaturalStream(); // å…¨ä½“è‡ªç„¶æ•° æˆ‘ä»¬å…ˆä¸è€ƒè™‘createNaturalStream()è¿™ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™ä¸ªStreamã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªè‡ªç„¶æ•°åšä¸€ä¸ªå¹³æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±æŠŠè¿™ä¸ªStreamè½¬æ¢æˆäº†å¦ä¸€ä¸ªStreamï¼š\n1 2 Stream naturals = createNaturalStream(); // å…¨ä½“è‡ªç„¶æ•° Stream streamNxN = naturals.map(n -\u003e n.multiply(n)); // å…¨ä½“è‡ªç„¶æ•°çš„å¹³æ–¹ å› ä¸ºè¿™ä¸ªstreamNxNä¹Ÿæœ‰æ— é™å¤šä¸ªå…ƒç´ ï¼Œè¦æ‰“å°å®ƒï¼Œå¿…é¡»é¦–å…ˆæŠŠæ— é™å¤šä¸ªå…ƒç´ å˜æˆæœ‰é™ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨limit()æ–¹æ³•æˆªå–å‰100ä¸ªå…ƒç´ ï¼Œæœ€åç”¨forEach()å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ‰“å°å‡ºäº†å‰100ä¸ªè‡ªç„¶æ•°çš„å¹³æ–¹ï¼š\n1 2 3 4 Stream naturals = createNaturalStream(); naturals.map(n -\u003e n.multiply(n)) // 1, 4, 9, 16, 25... .limit(100) .forEach(System.out::println); æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹Streamçš„ç‰¹ç‚¹ï¼šå®ƒå¯ä»¥â€œå­˜å‚¨â€æœ‰é™ä¸ªæˆ–æ— é™ä¸ªå…ƒç´ ã€‚è¿™é‡Œçš„å­˜å‚¨æ‰“äº†ä¸ªå¼•å·ï¼Œæ˜¯å› ä¸ºå…ƒç´ æœ‰å¯èƒ½å·²ç»å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ ¹æ®éœ€è¦å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚\nStreamçš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä¸€ä¸ªStreamå¯ä»¥è½»æ˜“åœ°è½¬æ¢ä¸ºå¦ä¸€ä¸ªStreamï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸStreamæœ¬èº«ã€‚\næœ€åï¼ŒçœŸæ­£çš„è®¡ç®—é€šå¸¸å‘ç”Ÿåœ¨æœ€åç»“æœçš„è·å–ï¼Œä¹Ÿå°±æ˜¯æƒ°æ€§è®¡ç®—ã€‚\n1 2 3 4 Stream naturals = createNaturalStream(); // ä¸è®¡ç®— Stream s2 = naturals.map(BigInteger::multiply); // ä¸è®¡ç®— Stream s3 = s2.limit(100); // ä¸è®¡ç®— s3.forEach(System.out::println); // è®¡ç®— æƒ°æ€§è®¡ç®—çš„ç‰¹ç‚¹æ˜¯ï¼šä¸€ä¸ªStreamè½¬æ¢ä¸ºå¦ä¸€ä¸ªStreamæ—¶ï¼Œå®é™…ä¸Šåªå­˜å‚¨äº†è½¬æ¢è§„åˆ™ï¼Œå¹¶æ²¡æœ‰ä»»ä½•è®¡ç®—å‘ç”Ÿã€‚\nä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„Streamï¼Œä¸ä¼šè¿›è¡Œè®¡ç®—ï¼ŒæŠŠå®ƒè½¬æ¢ä¸ºä¸Šè¿°s2è¿™ä¸ªStreamï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚å†æŠŠs2è¿™ä¸ªæ— é™Streamè½¬æ¢ä¸ºs3è¿™ä¸ªæœ‰é™çš„Streamï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚åªæœ‰æœ€åï¼Œè°ƒç”¨forEachç¡®å®éœ€è¦Streamè¾“å‡ºçš„å…ƒç´ æ—¶ï¼Œæ‰è¿›è¡Œè®¡ç®—ã€‚æˆ‘ä»¬é€šå¸¸æŠŠStreamçš„æ“ä½œå†™æˆé“¾å¼æ“ä½œï¼Œä»£ç æ›´ç®€æ´ï¼š\n1 2 3 4 createNaturalStream() .map(BigInteger::multiply) .limit(100) .forEach(System.out::println); å› æ­¤ï¼ŒStream APIçš„åŸºæœ¬ç”¨æ³•å°±æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªStreamï¼Œç„¶ååšè‹¥å¹²æ¬¡è½¬æ¢ï¼Œæœ€åè°ƒç”¨ä¸€ä¸ªæ±‚å€¼æ–¹æ³•è·å–çœŸæ­£è®¡ç®—çš„ç»“æœï¼š\n1 2 3 4 5 int result = createNaturalStream() // åˆ›å»ºStream .filter(n -\u003e n % 2 == 0) // ä»»æ„ä¸ªè½¬æ¢ .map(n -\u003e n * n) // ä»»æ„ä¸ªè½¬æ¢ .limit(100) // ä»»æ„ä¸ªè½¬æ¢ .sum(); // æœ€ç»ˆè®¡ç®—ç»“æœ å°ç»“ Stream APIçš„ç‰¹ç‚¹æ˜¯ï¼š\nStream APIæä¾›äº†ä¸€å¥—æ–°çš„æµå¼å¤„ç†çš„æŠ½è±¡åºåˆ—ï¼› Stream APIæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹å’Œé“¾å¼æ“ä½œï¼› Streamå¯ä»¥è¡¨ç¤ºæ— é™åºåˆ—ï¼Œå¹¶ä¸”å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚ åˆ›å»ºStream è¦ä½¿ç”¨Streamï¼Œå°±å¿…é¡»å…ˆåˆ›å»ºå®ƒã€‚åˆ›å»ºStreamæœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€ä»‹ç»ã€‚\nStream.of() åˆ›å»ºStreamæœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥ç”¨Stream.of()é™æ€æ–¹æ³•ï¼Œä¼ å…¥å¯å˜å‚æ•°å³åˆ›å»ºäº†ä¸€ä¸ªèƒ½è¾“å‡ºç¡®å®šå…ƒç´ çš„Streamï¼š\n1 2 3 4 5 6 7 8 public class Main { public static void main(String[] args) { Stream stream = Stream.of(\"A\", \"B\", \"C\", \"D\"); // forEach()æ–¹æ³•ç›¸å½“äºå†…éƒ¨å¾ªç¯è°ƒç”¨ï¼Œ // å¯ä¼ å…¥ç¬¦åˆConsumeræ¥å£çš„void accept(T t)çš„æ–¹æ³•å¼•ç”¨ï¼š stream.forEach(System.out::println); } } è™½ç„¶è¿™ç§æ–¹å¼åŸºæœ¬ä¸Šæ²¡å•¥å®è´¨æ€§ç”¨é€”ï¼Œä½†æµ‹è¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿ã€‚\nåŸºäºæ•°ç»„æˆ–Collectionåˆ›å»ºStream ç¬¬äºŒç§åˆ›å»ºStreamçš„æ–¹æ³•æ˜¯åŸºäºä¸€ä¸ªæ•°ç»„æˆ–è€…Collectionï¼Œè¿™æ ·è¯¥Streamè¾“å‡ºçš„å…ƒç´ å°±æ˜¯æ•°ç»„æˆ–è€…CollectionæŒæœ‰çš„å…ƒç´ ï¼š\n1 2 3 4 5 6 7 8 public class Main { public static void main(String[] args) { Stream stream1 = Arrays.stream(new String[] { \"A\", \"B\", \"C\" }); Stream stream2 = List.of(\"X\", \"Y\", \"Z\").stream(); stream1.forEach(System.out::println); stream2.forEach(System.out::println); } } æŠŠæ•°ç»„å˜æˆStreamä½¿ç”¨Arrays.stream()æ–¹æ³•ã€‚å¯¹äºCollectionï¼ˆListã€Setã€Queueç­‰ï¼‰ï¼Œç›´æ¥è°ƒç”¨stream()æ–¹æ³•å°±å¯ä»¥è·å¾—Streamã€‚\nä¸Šè¿°åˆ›å»ºStreamçš„æ–¹æ³•éƒ½æ˜¯æŠŠä¸€ä¸ªç°æœ‰çš„åºåˆ—å˜ä¸ºStreamï¼Œå®ƒçš„å…ƒç´ æ˜¯å›ºå®šçš„ã€‚\nåŸºäºSupplieråˆ›å»ºStream åˆ›å»ºStreamè¿˜å¯ä»¥é€šè¿‡Stream.generate()æ–¹æ³•ï¼Œå®ƒéœ€è¦ä¼ å…¥ä¸€ä¸ªSupplierå¯¹è±¡ï¼š\n1 Stream s = Stream.generate(Supplier sp); åŸºäºSupplieråˆ›å»ºçš„Streamä¼šä¸æ–­è°ƒç”¨Supplier.get()æ–¹æ³•æ¥ä¸æ–­äº§ç”Ÿä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ç§Streamä¿å­˜çš„ä¸æ˜¯å…ƒç´ ï¼Œè€Œæ˜¯ç®—æ³•ï¼Œå®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºæ— é™åºåˆ—ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªèƒ½ä¸æ–­ç”Ÿæˆè‡ªç„¶æ•°çš„Supplierï¼Œå®ƒçš„ä»£ç éå¸¸ç®€å•ï¼Œæ¯æ¬¡è°ƒç”¨get()æ–¹æ³•ï¼Œå°±ç”Ÿæˆä¸‹ä¸€ä¸ªè‡ªç„¶æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Main { public static void main(String[] args) { Stream natual = Stream.generate(new NatualSupplier()); // æ³¨æ„ï¼šæ— é™åºåˆ—å¿…é¡»å…ˆå˜æˆæœ‰é™åºåˆ—å†æ‰“å°: natual.limit(20).forEach(System.out::println); } } class NatualSupplier implements Supplier { int n = 0; public Integer get() { n++; return n; } } ä¸Šè¿°ä»£ç æˆ‘ä»¬ç”¨ä¸€ä¸ªSupplieræ¨¡æ‹Ÿäº†ä¸€ä¸ªæ— é™åºåˆ—ï¼ˆå½“ç„¶å—intèŒƒå›´é™åˆ¶ä¸æ˜¯çœŸçš„æ— é™å¤§ï¼‰ã€‚å¦‚æœç”¨Listè¡¨ç¤ºï¼Œå³ä¾¿åœ¨intèŒƒå›´å†…ï¼Œä¹Ÿä¼šå ç”¨å·¨å¤§çš„å†…å­˜ï¼Œè€ŒStreamå‡ ä¹ä¸å ç”¨ç©ºé—´ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œç”¨çš„æ—¶å€™å†ç®—ã€‚\nå¯¹äºæ— é™åºåˆ—ï¼Œå¦‚æœç›´æ¥è°ƒç”¨forEach()æˆ–è€…count()è¿™äº›æœ€ç»ˆæ±‚å€¼æ“ä½œï¼Œä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œå› ä¸ºæ°¸è¿œæ— æ³•è®¡ç®—å®Œè¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•æ˜¯å…ˆæŠŠæ— é™åºåˆ—å˜æˆæœ‰é™åºåˆ—ï¼Œä¾‹å¦‚ï¼Œç”¨limit()æ–¹æ³•å¯ä»¥æˆªå–å‰é¢è‹¥å¹²ä¸ªå…ƒç´ ï¼Œè¿™æ ·å°±å˜æˆäº†ä¸€ä¸ªæœ‰é™åºåˆ—ï¼Œå¯¹è¿™ä¸ªæœ‰é™åºåˆ—è°ƒç”¨forEach()æˆ–è€…count()æ“ä½œå°±æ²¡æœ‰é—®é¢˜ã€‚\nå…¶ä»–æ–¹å¼åˆ›å»ºStream åˆ›å»ºStreamçš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯é€šè¿‡ä¸€äº›APIæä¾›çš„æ¥å£ï¼Œç›´æ¥è·å¾—Streamã€‚\nä¾‹å¦‚ï¼ŒFilesç±»çš„lines()æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªæ–‡ä»¶å˜æˆä¸€ä¸ªStreamï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨æ–‡ä»¶çš„ä¸€è¡Œå†…å®¹ï¼š\n1 2 3 try (Stream lines = Files.lines(Paths.get(\"/path/to/file.txt\"))) { ... } æ­¤æ–¹æ³•å¯¹äºæŒ‰è¡Œéå†æ–‡æœ¬æ–‡ä»¶ååˆ†æœ‰ç”¨ã€‚\nå¦å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„Patternå¯¹è±¡æœ‰ä¸€ä¸ªsplitAsStream()æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªé•¿å­—ç¬¦ä¸²åˆ†å‰²æˆStreamåºåˆ—è€Œä¸æ˜¯æ•°ç»„ï¼š\n1 2 3 Pattern p = Pattern.compile(\"\\\\s+\"); Stream s = p.splitAsStream(\"The quick brown fox jumps over the lazy dog\"); s.forEach(System.out::println); åŸºæœ¬ç±»å‹ å› ä¸ºJavaçš„èŒƒå‹ä¸æ”¯æŒåŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç”¨Streamè¿™æ ·çš„ç±»å‹ï¼Œä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ä¸ºäº†ä¿å­˜intï¼Œåªèƒ½ä½¿ç”¨Streamï¼Œä½†è¿™æ ·ä¼šäº§ç”Ÿé¢‘ç¹çš„è£…ç®±ã€æ‹†ç®±æ“ä½œã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼ŒJavaæ ‡å‡†åº“æä¾›äº†IntStreamã€LongStreamå’ŒDoubleStreamè¿™ä¸‰ç§ä½¿ç”¨åŸºæœ¬ç±»å‹çš„Streamï¼Œå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å’ŒèŒƒå‹Streamæ²¡æœ‰å¤§çš„åŒºåˆ«ï¼Œè®¾è®¡è¿™ä¸‰ä¸ªStreamçš„ç›®çš„æ˜¯æé«˜è¿è¡Œæ•ˆç‡ï¼š\n1 2 3 4 // å°†int[]æ•°ç»„å˜ä¸ºIntStream: IntStream is = Arrays.stream(new int[] { 1, 2, 3 }); // å°†Streamè½¬æ¢ä¸ºLongStream: LongStream ls = List.of(\"1\", \"2\", \"3\").stream().mapToLong(Long::parseLong); å°ç»“ åˆ›å»ºStreamçš„æ–¹æ³•æœ‰ ï¼š\né€šè¿‡æŒ‡å®šå…ƒç´ ã€æŒ‡å®šæ•°ç»„ã€æŒ‡å®šCollectionåˆ›å»ºStreamï¼› é€šè¿‡Supplieråˆ›å»ºStreamï¼Œå¯ä»¥æ˜¯æ— é™åºåˆ—ï¼› é€šè¿‡å…¶ä»–ç±»çš„ç›¸å…³æ–¹æ³•åˆ›å»ºã€‚ åŸºæœ¬ç±»å‹çš„Streamæœ‰IntStreamã€LongStreamå’ŒDoubleStreamã€‚\nä½¿ç”¨ Stream.map() Stream.map()æ˜¯Streamæœ€å¸¸ç”¨çš„ä¸€ä¸ªè½¬æ¢æ–¹æ³•ï¼Œå®ƒæŠŠä¸€ä¸ªStreamè½¬æ¢ä¸ºå¦ä¸€ä¸ªStreamã€‚\næ‰€è°“mapæ“ä½œï¼Œå°±æ˜¯æŠŠä¸€ç§æ“ä½œè¿ç®—ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªåºåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä¾‹å¦‚ï¼Œå¯¹xè®¡ç®—å®ƒçš„å¹³æ–¹ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°f(x) = x * xã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªåºåˆ—1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ä¸Šï¼Œå°±å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ—1ï¼Œ4ï¼Œ9ï¼Œ16ï¼Œ25ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 f(x) = x * x â”‚ â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ [ 1 2 3 4 5 6 7 8 9 ] â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ [ 1 4 9 16 25 36 49 64 81 ] å¯è§ï¼Œmapæ“ä½œï¼ŒæŠŠä¸€ä¸ªStreamçš„æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”åˆ°åº”ç”¨äº†ç›®æ ‡å‡½æ•°çš„ç»“æœä¸Šã€‚\n1 2 Stream s = Stream.of(1, 2, 3, 4, 5); Stream s2 = s.map(n -\u003e n * n); å¦‚æœæˆ‘ä»¬æŸ¥çœ‹Streamçš„æºç ï¼Œä¼šå‘ç°map()æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯Functionæ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªapply()æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªTç±»å‹è½¬æ¢æˆRç±»å‹ï¼š\n1 Stream map(Function\u003c? super T, ? extends R\u003e mapper); å…¶ä¸­ï¼ŒFunctionçš„å®šä¹‰æ˜¯ï¼š\n1 2 3 4 5 @FunctionalInterface public interface Function { // å°†Tç±»å‹è½¬æ¢ä¸ºR: R apply(T t); } åˆ©ç”¨map()ï¼Œä¸ä½†èƒ½å®Œæˆæ•°å­¦è®¡ç®—ï¼Œå¯¹äºå­—ç¬¦ä¸²æ“ä½œï¼Œä»¥åŠä»»ä½•Javaå¯¹è±¡éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 public class Main { public static void main(String[] args) { List.of(\" Apple \", \" pear \", \" ORANGE\", \" BaNaNa \") .stream() .map(String::trim) // å»ç©ºæ ¼ .map(String::toLowerCase) // å˜å°å†™ .forEach(System.out::println); // æ‰“å° } } é€šè¿‡è‹¥å¹²æ­¥mapè½¬æ¢ï¼Œå¯ä»¥å†™å‡ºé€»è¾‘ç®€å•ã€æ¸…æ™°çš„ä»£ç ã€‚\nä½¿ç”¨filter Stream.filter()æ˜¯Streamçš„å¦ä¸€ä¸ªå¸¸ç”¨è½¬æ¢æ–¹æ³•ã€‚\næ‰€è°“filter()æ“ä½œï¼Œå°±æ˜¯å¯¹ä¸€ä¸ªStreamçš„æ‰€æœ‰å…ƒç´ ä¸€ä¸€è¿›è¡Œæµ‹è¯•ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„å°±è¢«â€œæ»¤æ‰â€äº†ï¼Œå‰©ä¸‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ å°±æ„æˆäº†ä¸€ä¸ªæ–°çš„Streamã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5è¿™ä¸ªStreamè°ƒç”¨filter()ï¼Œä¼ å…¥çš„æµ‹è¯•å‡½æ•°f(x) = x % 2 != 0ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯å¥‡æ•°ï¼Œè¿™æ ·å°±è¿‡æ»¤æ‰å¶æ•°ï¼Œåªå‰©ä¸‹å¥‡æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ—1ï¼Œ3ï¼Œ5ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 f(x) = x % 2 != 0 â”‚ â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ [ 1 2 3 4 5 6 7 8 9 ] â”‚ X â”‚ X â”‚ X â”‚ X â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ â–¼ â–¼ [ 1 3 5 7 9 ] ç”¨IntStreamå†™å‡ºä¸Šè¿°é€»è¾‘ï¼Œä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 public class Main { public static void main(String[] args) { IntStream.of(1, 2, 3, 4, 5, 6, 7, 8, 9) .filter(n -\u003e n % 2 != 0) .forEach(System.out::println); } } ä»ç»“æœå¯çŸ¥ï¼Œç»è¿‡filter()åç”Ÿæˆçš„Streamå…ƒç´ å¯èƒ½å˜å°‘ã€‚\nfilter()æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯Predicateæ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªtest()æ–¹æ³•ï¼Œè´Ÿè´£åˆ¤æ–­å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼š\n1 2 3 4 5 @FunctionalInterface public interface Predicate { // åˆ¤æ–­å…ƒç´ tæ˜¯å¦ç¬¦åˆæ¡ä»¶: boolean test(T t); } filter()é™¤äº†å¸¸ç”¨äºæ•°å€¼å¤–ï¼Œä¹Ÿå¯åº”ç”¨äºä»»ä½•Javaå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ç»„ç»™å®šçš„LocalDateä¸­è¿‡æ»¤æ‰å·¥ä½œæ—¥ï¼Œä»¥ä¾¿å¾—åˆ°ä¼‘æ¯æ—¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class Main { public static void main(String[] args) { Stream.generate(new LocalDateSupplier()) .limit(31) .filter(ldt -\u003e ldt.getDayOfWeek() == DayOfWeek.SATURDAY || ldt.getDayOfWeek() == DayOfWeek.SUNDAY) .forEach(System.out::println); } } class LocalDateSupplier implements Supplier { LocalDate start = LocalDate.of(2020, 1, 1); int n = -1; public LocalDate get() { n++; return start.plusDays(n); } } ä½¿ç”¨reduce map()å’Œfilter()éƒ½æ˜¯Streamçš„è½¬æ¢æ–¹æ³•ï¼Œè€ŒStream.reduce()åˆ™æ˜¯Streamçš„ä¸€ä¸ªèšåˆæ–¹æ³•ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªStreamçš„æ‰€æœ‰å…ƒç´ æŒ‰ç…§èšåˆå‡½æ•°èšåˆæˆä¸€ä¸ªç»“æœã€‚\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„èšåˆæ–¹æ³•ï¼š\n1 2 3 4 5 6 public class Main { public static void main(String[] args) { int sum = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9).reduce(0, (acc, n) -\u003e acc + n); System.out.println(sum); // 45 } } reduce()æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡æ˜¯BinaryOperatoræ¥å£ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªapply()æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸Šæ¬¡ç´¯åŠ çš„ç»“æœå’Œæœ¬æ¬¡çš„å…ƒç´  è¿›è¡Œè¿ç®—ï¼Œå¹¶è¿”å›ç´¯åŠ çš„ç»“æœï¼š\n1 2 3 4 5 @FunctionalInterface public interface BinaryOperator { // Biæ“ä½œï¼šä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º T apply(T t, T u); } ä¸Šè¿°ä»£ç çœ‹ä¸Šå»ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ç”¨forå¾ªç¯æ”¹å†™ä¸€ä¸‹ï¼Œå°±å®¹æ˜“ç†è§£äº†ï¼š\n1 2 3 4 5 Stream stream = ... int sum = 0; for (n : stream) { sum = (sum, n) -\u003e sum + n; } å¯è§ï¼Œreduce()æ“ä½œé¦–å…ˆåˆå§‹åŒ–ç»“æœä¸ºæŒ‡å®šå€¼ï¼ˆè¿™é‡Œæ˜¯0ï¼‰ï¼Œç´§æ¥ç€ï¼Œreduce()å¯¹æ¯ä¸ªå…ƒç´ ä¾æ¬¡è°ƒç”¨(acc, n) -\u003e acc + nï¼Œå…¶ä¸­ï¼Œaccæ˜¯ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼š\n1 2 3 4 5 6 7 8 9 10 11 // è®¡ç®—è¿‡ç¨‹: acc = 0 // åˆå§‹åŒ–ä¸ºæŒ‡å®šå€¼ acc = acc + n = 0 + 1 = 1 // n = 1 acc = acc + n = 1 + 2 = 3 // n = 2 acc = acc + n = 3 + 3 = 6 // n = 3 acc = acc + n = 6 + 4 = 10 // n = 4 acc = acc + n = 10 + 5 = 15 // n = 5 acc = acc + n = 15 + 6 = 21 // n = 6 acc = acc + n = 21 + 7 = 28 // n = 7 acc = acc + n = 28 + 8 = 36 // n = 8 acc = acc + n = 36 + 9 = 45 // n = 9 å› æ­¤ï¼Œå®é™…ä¸Šè¿™ä¸ªreduce()æ“ä½œæ˜¯ä¸€ä¸ªæ±‚å’Œã€‚\nå¦‚æœå»æ‰åˆå§‹å€¼ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªOptionalï¼š\n1 2 3 4 Optional opt = stream.reduce((acc, n) -\u003e acc + n); if (opt.isPresent()) { System.out.println(opt.get()); } è¿™æ˜¯å› ä¸ºStreamçš„å…ƒç´ æœ‰å¯èƒ½æ˜¯0ä¸ªï¼Œè¿™æ ·å°±æ²¡æ³•è°ƒç”¨reduce()çš„èšåˆå‡½æ•°äº†ï¼Œå› æ­¤è¿”å›Optionalå¯¹è±¡ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­ç»“æœæ˜¯å¦å­˜åœ¨ã€‚\nåˆ©ç”¨reduce()ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ±‚å’Œæ”¹æˆæ±‚ç§¯ï¼Œä»£ç ä¹Ÿååˆ†ç®€å•ï¼š\n1 2 3 4 5 6 public class Main { public static void main(String[] args) { int s = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9).reduce(1, (acc, n) -\u003e acc * n); System.out.println(s); // 362880 } } æ³¨æ„ï¼šè®¡ç®—æ±‚ç§¯æ—¶ï¼Œåˆå§‹å€¼å¿…é¡»è®¾ç½®ä¸º1ã€‚\né™¤äº†å¯ä»¥å¯¹æ•°å€¼è¿›è¡Œç´¯ç§¯è®¡ç®—å¤–ï¼Œçµæ´»è¿ç”¨reduce()ä¹Ÿå¯ä»¥å¯¹Javaå¯¹è±¡è¿›è¡Œæ“ä½œã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†é…ç½®æ–‡ä»¶çš„æ¯ä¸€è¡Œé…ç½®é€šè¿‡map()å’Œreduce()æ“ä½œèšåˆæˆä¸€ä¸ªMapï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class Main { public static void main(String[] args) { // æŒ‰è¡Œè¯»å–é…ç½®æ–‡ä»¶: List props = List.of(\"profile=native\", \"debug=true\", \"logging=warn\", \"interval=500\"); Map map = props.stream() // æŠŠk=vè½¬æ¢ä¸ºMap[k]=v: .map(kv -\u003e { String[] ss = kv.split(\"\\\\=\", 2); return Map.of(ss[0], ss[1]); }) // æŠŠæ‰€æœ‰Mapèšåˆåˆ°ä¸€ä¸ªMap: .reduce(new HashMap(), (m, kv) -\u003e { m.putAll(kv); return m; }); // æ‰“å°ç»“æœ: map.forEach((k, v) -\u003e { System.out.println(k + \" = \" + v); }); } } å°ç»“ reduce()æ–¹æ³•å°†ä¸€ä¸ªStreamçš„æ¯ä¸ªå…ƒç´ ä¾æ¬¡ä½œç”¨äºBinaryOperatorï¼Œå¹¶å°†ç»“æœåˆå¹¶ã€‚\nreduce()æ˜¯èšåˆæ–¹æ³•ï¼Œèšåˆæ–¹æ³•ä¼šç«‹åˆ»å¯¹Streamè¿›è¡Œè®¡ç®—ã€‚\nè¾“å‡ºé›†åˆ æˆ‘ä»¬ä»‹ç»äº†Streamçš„å‡ ä¸ªå¸¸è§æ“ä½œï¼šmap()ã€filter()ã€reduce()ã€‚è¿™äº›æ“ä½œå¯¹Streamæ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯è½¬æ¢æ“ä½œï¼Œå³æŠŠä¸€ä¸ªStreamè½¬æ¢ä¸ºå¦ä¸€ä¸ªStreamï¼Œä¾‹å¦‚map()å’Œfilter()ï¼Œå¦ä¸€ç±»æ˜¯èšåˆæ“ä½œï¼Œå³å¯¹Streamçš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªç¡®å®šçš„ç»“æœï¼Œä¾‹å¦‚reduce()ã€‚\nåŒºåˆ†è¿™ä¸¤ç§æ“ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå¯¹äºStreamæ¥è¯´ï¼Œå¯¹å…¶è¿›è¡Œè½¬æ¢æ“ä½œå¹¶ä¸ä¼šè§¦å‘ä»»ä½•è®¡ç®—ï¼æˆ‘ä»¬å¯ä»¥åšä¸ªå®éªŒï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class Main { public static void main(String[] args) { Stream s1 = Stream.generate(new NatualSupplier()); Stream s2 = s1.map(n -\u003e n * n); Stream s3 = s2.map(n -\u003e n - 1); System.out.println(s3); // java.util.stream.ReferencePipeline$3@49476842 } } class NatualSupplier implements Supplier { long n = 0; public Long get() { n++; return n; } } å› ä¸ºs1æ˜¯ä¸€ä¸ªLongç±»å‹çš„åºåˆ—ï¼Œå®ƒçš„å…ƒç´ é«˜è¾¾922äº¿äº¿ä¸ªï¼Œä½†æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œæ—¢ä¸ä¼šæœ‰ä»»ä½•å†…å­˜å¢é•¿ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•è®¡ç®—ï¼Œå› ä¸ºè½¬æ¢æ“ä½œåªæ˜¯ä¿å­˜äº†è½¬æ¢è§„åˆ™ï¼Œæ— è®ºæˆ‘ä»¬å¯¹ä¸€ä¸ªStreamè½¬æ¢å¤šå°‘æ¬¡ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•å®é™…è®¡ç®—å‘ç”Ÿã€‚\nè€Œèšåˆæ“ä½œåˆ™ä¸ä¸€æ ·ï¼Œèšåˆæ“ä½œä¼šç«‹åˆ»ä¿ƒä½¿Streamè¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¾æ¬¡çº³å…¥è®¡ç®—ï¼Œä»¥è·å¾—æœ€ç»ˆç»“æœã€‚æ‰€ä»¥ï¼Œå¯¹ä¸€ä¸ªStreamè¿›è¡Œèšåˆæ“ä½œï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—è¿é”ååº”ï¼š\n1 2 3 4 5 Stream s1 = Stream.generate(new NatualSupplier()); Stream s2 = s1.map(n -\u003e n * n); Stream s3 = s2.map(n -\u003e n - 1); Stream s4 = s3.limit(10); s4.reduce(0, (acc, n) -\u003e acc + n); æˆ‘ä»¬å¯¹s4è¿›è¡Œreduce()èšåˆè®¡ç®—ï¼Œä¼šä¸æ–­è¯·æ±‚s4è¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚å› ä¸ºs4çš„ä¸Šæ¸¸æ˜¯s3ï¼Œå®ƒåˆä¼šå‘s3è¯·æ±‚å…ƒç´ ï¼Œå¯¼è‡´s3å‘s2è¯·æ±‚å…ƒç´ ï¼Œs2å‘s1è¯·æ±‚å…ƒç´ ï¼Œæœ€ç»ˆï¼Œs1ä»Supplierå®ä¾‹ä¸­è¯·æ±‚åˆ°çœŸæ­£çš„å…ƒç´ ï¼Œå¹¶ç»è¿‡ä¸€ç³»åˆ—è½¬æ¢ï¼Œæœ€ç»ˆè¢«reduce()èšåˆå‡ºç»“æœã€‚\nå¯è§ï¼Œèšåˆæ“ä½œæ˜¯çœŸæ­£éœ€è¦ä»Streamè¯·æ±‚æ•°æ®çš„ï¼Œå¯¹ä¸€ä¸ªStreamåšèšåˆè®¡ç®—åï¼Œç»“æœå°±ä¸æ˜¯ä¸€ä¸ªStreamï¼Œè€Œæ˜¯ä¸€ä¸ªå…¶ä»–çš„Javaå¯¹è±¡ã€‚\nè¾“å‡ºä¸ºList reduce()åªæ˜¯ä¸€ç§èšåˆæ“ä½œï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æŠŠStreamçš„å…ƒç´ ä¿å­˜åˆ°é›†åˆï¼Œä¾‹å¦‚Listï¼Œå› ä¸ºListçš„å…ƒç´ æ˜¯ç¡®å®šçš„Javaå¯¹è±¡ï¼Œå› æ­¤ï¼ŒæŠŠStreamå˜ä¸ºListä¸æ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªèšåˆæ“ä½œï¼Œå®ƒä¼šå¼ºåˆ¶Streamè¾“å‡ºæ¯ä¸ªå…ƒç´ ã€‚\nä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†ä¸€ç»„Stringå…ˆè¿‡æ»¤æ‰ç©ºå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠéç©ºå­—ç¬¦ä¸²ä¿å­˜åˆ°Listä¸­ï¼š\n1 2 3 4 5 6 7 8 9 public class Main { public static void main(String[] args) { Stream stream = Stream.of(\"Apple\", \"\", null, \"Pear\", \" \", \"Orange\"); List list = stream .filter(s -\u003e s != null \u0026\u0026 !s.isBlank()) .collect(Collectors.toList()); System.out.println(list); } } æŠŠStreamçš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°Listçš„æ–¹æ³•æ˜¯è°ƒç”¨collect()å¹¶ä¼ å…¥Collectors.toList()å¯¹è±¡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªCollectorå®ä¾‹ï¼Œé€šè¿‡ç±»ä¼¼reduce()çš„æ“ä½œï¼ŒæŠŠæ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ”¶é›†å™¨ä¸­ï¼ˆå®é™…ä¸Šæ˜¯ArrayListï¼‰ã€‚\nç±»ä¼¼çš„ï¼Œcollect(Collectors.toSet())å¯ä»¥æŠŠStreamçš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°Setä¸­ã€‚\nè¾“å‡ºä¸ºæ•°ç»„ æŠŠStreamçš„å…ƒç´ è¾“å‡ºä¸ºæ•°ç»„å’Œè¾“å‡ºä¸ºListç±»ä¼¼ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨toArray()æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ•°ç»„çš„â€œæ„é€ æ–¹æ³•â€ï¼š\n1 2 List list = List.of(\"Apple\", \"Banana\", \"Orange\"); String[] array = list.stream().toArray(String[]::new); æ³¨æ„åˆ°ä¼ å…¥çš„â€œæ„é€ æ–¹æ³•â€æ˜¯String[]::newï¼Œå®ƒçš„ç­¾åå®é™…ä¸Šæ˜¯IntFunctionå®šä¹‰çš„String[] apply(int)ï¼Œå³ä¼ å…¥intå‚æ•°ï¼Œè·å¾—String[]æ•°ç»„çš„è¿”å›å€¼ã€‚\nè¾“å‡ºä¸ºMap å¦‚æœæˆ‘ä»¬è¦æŠŠStreamçš„å…ƒç´ æ”¶é›†åˆ°Mapä¸­ï¼Œå°±ç¨å¾®éº»çƒ¦ä¸€ç‚¹ã€‚å› ä¸ºå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ·»åŠ åˆ°Mapæ—¶éœ€è¦keyå’Œvalueï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¦æŒ‡å®šä¸¤ä¸ªæ˜ å°„å‡½æ•°ï¼Œåˆ†åˆ«æŠŠå…ƒç´ æ˜ å°„ä¸ºkeyå’Œvalueï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 public class Main { public static void main(String[] args) { Stream stream = Stream.of(\"APPL:Apple\", \"MSFT:Microsoft\"); Map map = stream .collect(Collectors.toMap( // æŠŠå…ƒç´ sæ˜ å°„ä¸ºkey: s -\u003e s.substring(0, s.indexOf(':')), // æŠŠå…ƒç´ sæ˜ å°„ä¸ºvalue: s -\u003e s.substring(s.indexOf(':') + 1))); System.out.println(map); } } åˆ†ç»„è¾“å‡º Streamè¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„åˆ†ç»„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç»„è¾“å‡ºã€‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 public class Main { public static void main(String[] args) { List list = List.of(\"Apple\", \"Banana\", \"Blackberry\", \"Coconut\", \"Avocado\", \"Cherry\", \"Apricots\"); Map",
  "wordCount" : "34718",
  "inLanguage": "en",
  "datePublished": "2022-08-15T18:18:18Z",
  "dateModified": "2022-08-15T18:18:18Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/19_lambda/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://009965.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;Â»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      19_lambda
    </h1>
    <div class="post-meta"><span title='2022-08-15 18:18:18 +0000 UTC'>2022-08-15</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b" aria-label="å‡½æ•°å¼ç¼–ç¨‹">å‡½æ•°å¼ç¼–ç¨‹</a></li>
                <li>
                    <a href="#lambda%e5%9f%ba%e7%a1%80" aria-label="LambdaåŸºç¡€">LambdaåŸºç¡€</a><ul>
                        
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="Lambdaè¡¨è¾¾å¼">Lambdaè¡¨è¾¾å¼</a></li>
                <li>
                    <a href="#functionalinterface" aria-label="FunctionalInterface">FunctionalInterface</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="æ–¹æ³•å¼•ç”¨">æ–¹æ³•å¼•ç”¨</a><ul>
                        
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="æ„é€ æ–¹æ³•å¼•ç”¨">æ„é€ æ–¹æ³•å¼•ç”¨</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-1" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8stream" aria-label="ä½¿ç”¨Stream">ä½¿ç”¨Stream</a><ul>
                        
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-2" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%bastream" aria-label="åˆ›å»ºStream">åˆ›å»ºStream</a><ul>
                        
                <li>
                    <a href="#streamof" aria-label="Stream.of()">Stream.of()</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8e%e6%95%b0%e7%bb%84%e6%88%96collection%e5%88%9b%e5%bb%bastream" aria-label="åŸºäºæ•°ç»„æˆ–Collectionåˆ›å»ºStream">åŸºäºæ•°ç»„æˆ–Collectionåˆ›å»ºStream</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8esupplier%e5%88%9b%e5%bb%bastream" aria-label="åŸºäºSupplieråˆ›å»ºStream">åŸºäºSupplieråˆ›å»ºStream</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e6%96%b9%e5%bc%8f%e5%88%9b%e5%bb%bastream" aria-label="å…¶ä»–æ–¹å¼åˆ›å»ºStream">å…¶ä»–æ–¹å¼åˆ›å»ºStream</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%b1%bb%e5%9e%8b" aria-label="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-3" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-streammap" aria-label="ä½¿ç”¨ Stream.map()">ä½¿ç”¨ Stream.map()</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8filter" aria-label="ä½¿ç”¨filter">ä½¿ç”¨filter</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8reduce" aria-label="ä½¿ç”¨reduce">ä½¿ç”¨reduce</a><ul>
                        
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-4" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e9%9b%86%e5%90%88" aria-label="è¾“å‡ºé›†åˆ">è¾“å‡ºé›†åˆ</a><ul>
                        
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e4%b8%balist" aria-label="è¾“å‡ºä¸ºList">è¾“å‡ºä¸ºList</a></li>
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e4%b8%ba%e6%95%b0%e7%bb%84" aria-label="è¾“å‡ºä¸ºæ•°ç»„">è¾“å‡ºä¸ºæ•°ç»„</a></li>
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e4%b8%bamap" aria-label="è¾“å‡ºä¸ºMap">è¾“å‡ºä¸ºMap</a></li>
                <li>
                    <a href="#%e5%88%86%e7%bb%84%e8%be%93%e5%87%ba" aria-label="åˆ†ç»„è¾“å‡º">åˆ†ç»„è¾“å‡º</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e6%93%8d%e4%bd%9c" aria-label="å…¶ä»–æ“ä½œ">å…¶ä»–æ“ä½œ</a><ul>
                        
                <li>
                    <a href="#%e6%8e%92%e5%ba%8f" aria-label="æ’åº">æ’åº</a></li>
                <li>
                    <a href="#%e5%8e%bb%e9%87%8d" aria-label="å»é‡">å»é‡</a></li>
                <li>
                    <a href="#%e6%88%aa%e5%8f%96" aria-label="æˆªå–">æˆªå–</a></li>
                <li>
                    <a href="#%e5%90%88%e5%b9%b6" aria-label="åˆå¹¶">åˆå¹¶</a></li>
                <li>
                    <a href="#flatmap" aria-label="flatMap">flatMap</a></li>
                <li>
                    <a href="#%e5%b9%b6%e8%a1%8c" aria-label="å¹¶è¡Œ">å¹¶è¡Œ</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e8%81%9a%e5%90%88%e6%96%b9%e6%b3%95" aria-label="å…¶ä»–èšåˆæ–¹æ³•">å…¶ä»–èšåˆæ–¹æ³•</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-5" aria-label="å°ç»“">å°ç»“</a></li></ul>
                </li>
                <li>
                    <a href="#----------%e5%88%86%e5%89%b2%e7%ba%bf-----------" aria-label="&mdash;&mdash;&mdash;-åˆ†å‰²çº¿&mdash;&mdash;&mdash;&ndash;">&mdash;&mdash;&mdash;-åˆ†å‰²çº¿&mdash;&mdash;&mdash;&ndash;</a></li>
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f-1" aria-label="Lambdaè¡¨è¾¾å¼">Lambdaè¡¨è¾¾å¼</a><ul>
                        
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e8%af%ad%e6%b3%95" aria-label="Lambdaè¡¨è¾¾å¼çš„è¯­æ³•">Lambdaè¡¨è¾¾å¼çš„è¯­æ³•</a></li>
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f%e5%92%8c%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3%e7%bb%93%e5%90%88" aria-label="Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ç»“åˆ">Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ç»“åˆ</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e5%bd%a2%e5%bc%8f%e7%9a%84%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3%e5%8f%8a%e5%ae%9e%e7%8e%b0" aria-label="å…¶ä»–å½¢å¼çš„å‡½æ•°å¼æ¥å£åŠå®ç°">å…¶ä»–å½¢å¼çš„å‡½æ•°å¼æ¥å£åŠå®ç°</a><ul>
                        
                <li>
                    <a href="#%e6%9c%89%e5%8f%82%e6%97%a0%e8%bf%94%e5%9b%9e%e5%80%bc" aria-label="æœ‰å‚æ— è¿”å›å€¼">æœ‰å‚æ— è¿”å›å€¼</a></li>
                <li>
                    <a href="#%e6%97%a0%e5%8f%82%e6%9c%89%e8%bf%94%e5%9b%9e%e5%80%bc" aria-label="æ— å‚æœ‰è¿”å›å€¼">æ— å‚æœ‰è¿”å›å€¼</a></li>
                <li>
                    <a href="#%e6%9c%89%e5%8f%82%e6%9c%89%e8%bf%94%e5%9b%9e%e5%80%bc" aria-label="æœ‰å‚æœ‰è¿”å›å€¼">æœ‰å‚æœ‰è¿”å›å€¼</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%87%a0%e7%a7%8d%e7%ae%80%e5%8d%95%e5%bd%a2%e5%bc%8f" aria-label="å‡ ç§ç®€å•å½¢å¼">å‡ ç§ç®€å•å½¢å¼</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%9a%84lambda%e4%be%8b%e5%ad%90" aria-label="åŸºæœ¬çš„Lambdaä¾‹å­">åŸºæœ¬çš„Lambdaä¾‹å­</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8lambda%e5%af%b9%e9%9b%86%e5%90%88%e8%bf%9b%e8%a1%8c%e6%8e%92%e5%ba%8f" aria-label="ä½¿ç”¨Lambdaå¯¹é›†åˆè¿›è¡Œæ’åº">ä½¿ç”¨Lambdaå¯¹é›†åˆè¿›è¡Œæ’åº</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8lambdas%e5%92%8cstreams" aria-label="ä½¿ç”¨Lambdaså’ŒStreams">ä½¿ç”¨Lambdaså’ŒStreams</a></li>
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%af%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3" aria-label="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£">ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£</a></li>
                <li>
                    <a href="#%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8-1" aria-label="æ–¹æ³•å¼•ç”¨">æ–¹æ³•å¼•ç”¨</a><ul>
                        
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="é™æ€æ–¹æ³•å¼•ç”¨">é™æ€æ–¹æ³•å¼•ç”¨</a></li>
                <li>
                    <a href="#%e5%ae%9e%e4%be%8b%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="å®ä¾‹æ–¹æ³•å¼•ç”¨">å®ä¾‹æ–¹æ³•å¼•ç”¨</a></li>
                <li>
                    <a href="#%e7%b1%bb%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="ç±»æ–¹æ³•å¼•ç”¨">ç±»æ–¹æ³•å¼•ç”¨</a></li>
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8-1" aria-label="æ„é€ æ–¹æ³•å¼•ç”¨">æ„é€ æ–¹æ³•å¼•ç”¨</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e4%b8%80%e4%ba%9b%e5%b0%8f%e9%97%ae%e9%a2%98" aria-label="lambdaè¡¨è¾¾å¼çš„ä¸€äº›å°é—®é¢˜">lambdaè¡¨è¾¾å¼çš„ä¸€äº›å°é—®é¢˜</a><ul>
                        
                <li>
                    <a href="#variable-used-in-lambda-expression-should-be-final-or-effectively-final" aria-label="Variable used in lambda expression should be final or effectively final">Variable used in lambda expression should be final or effectively final</a></li>
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8fforeach%e5%a6%82%e4%bd%95%e6%8f%90%e5%89%8d%e7%bb%88%e6%ad%a2" aria-label="lambdaè¡¨è¾¾å¼foreach()å¦‚ä½•æå‰ç»ˆæ­¢">lambdaè¡¨è¾¾å¼foreach()å¦‚ä½•æå‰ç»ˆæ­¢</a></li></ul>
                </li>
                <li>
                    <a href="#collectors" aria-label="Collectors">Collectors</a><ul>
                        
                <li>
                    <a href="#tolist" aria-label="toList">toList</a></li>
                <li>
                    <a href="#toset" aria-label="toSet">toSet</a></li>
                <li>
                    <a href="#joining" aria-label="joining">joining</a></li>
                <li>
                    <a href="#collectorsgroupingby" aria-label="Collectors.groupingBy">Collectors.groupingBy</a><ul>
                        
                <li>
                    <a href="#groupingby%e7%9a%84%e6%8e%92%e5%ba%8f" aria-label="groupingByçš„æ’åº">groupingByçš„æ’åº</a></li></ul>
                </li>
                <li>
                    <a href="#collectorstomap" aria-label="Collectors.toMap">Collectors.toMap</a><ul>
                        
                <li>
                    <a href="#%e5%85%b3%e4%ba%8e-collectorstomap-%e6%96%b9%e6%b3%95" aria-label="å…³äº Collectors.toMap æ–¹æ³•">å…³äº Collectors.toMap æ–¹æ³•</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#java8%e5%86%85%e7%bd%ae%e7%9a%84%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3" aria-label="java8å†…ç½®çš„å‡½æ•°å¼æ¥å£">java8å†…ç½®çš„å‡½æ•°å¼æ¥å£</a><ul>
                        
                <li>
                    <a href="#predicate%e6%96%ad%e8%a8%80" aria-label="Predicateï¼šæ–­è¨€">Predicateï¼šæ–­è¨€</a></li>
                <li>
                    <a href="#function" aria-label="Function">Function</a></li>
                <li>
                    <a href="#supplier%e7%94%9f%e4%ba%a7%e8%80%85" aria-label="Supplierï¼šç”Ÿäº§è€…">Supplierï¼šç”Ÿäº§è€…</a></li>
                <li>
                    <a href="#consumer%e6%b6%88%e8%b4%b9%e8%80%85" aria-label="Consumerï¼šæ¶ˆè´¹è€…">Consumerï¼šæ¶ˆè´¹è€…</a></li>
                <li>
                    <a href="#comparator" aria-label="Comparator">Comparator</a></li>
                <li>
                    <a href="#optional" aria-label="Optional">Optional</a></li></ul>
                </li>
                <li>
                    <a href="#stream" aria-label="stream">stream</a><ul>
                        
                <li>
                    <a href="#filter-%e8%bf%87%e6%bb%a4" aria-label="Filter è¿‡æ»¤">Filter è¿‡æ»¤</a></li>
                <li>
                    <a href="#sorted-%e6%8e%92%e5%ba%8f" aria-label="Sorted æ’åº">Sorted æ’åº</a></li>
                <li>
                    <a href="#map-%e8%bd%ac%e6%8d%a2" aria-label="Map è½¬æ¢">Map è½¬æ¢</a></li>
                <li>
                    <a href="#match-%e5%8c%b9%e9%85%8d" aria-label="Match åŒ¹é…">Match åŒ¹é…</a></li>
                <li>
                    <a href="#count-%e8%ae%a1%e6%95%b0" aria-label="Count è®¡æ•°">Count è®¡æ•°</a></li>
                <li>
                    <a href="#reduce" aria-label="Reduce">Reduce</a></li>
                <li>
                    <a href="#parallel-streams-%e5%b9%b6%e8%a1%8c%e6%b5%81" aria-label="Parallel-Streams å¹¶è¡Œæµ">Parallel-Streams å¹¶è¡Œæµ</a></li>
                <li>
                    <a href="#map-%e9%9b%86%e5%90%88" aria-label="Map é›†åˆ">Map é›†åˆ</a></li>
                <li>
                    <a href="#stream-%e7%9a%84%e5%a4%84%e7%90%86%e9%a1%ba%e5%ba%8f" aria-label="Stream çš„å¤„ç†é¡ºåº">Stream çš„å¤„ç†é¡ºåº</a></li>
                <li>
                    <a href="#%e4%b8%ad%e9%97%b4%e6%93%8d%e4%bd%9c%e7%9a%84%e9%a1%ba%e5%ba%8f" aria-label="ä¸­é—´æ“ä½œçš„é¡ºåº">ä¸­é—´æ“ä½œçš„é¡ºåº</a></li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e6%b5%81%e5%a4%8d%e7%94%a8%e9%97%ae%e9%a2%98" aria-label="æ•°æ®æµå¤ç”¨é—®é¢˜">æ•°æ®æµå¤ç”¨é—®é¢˜</a></li>
                <li>
                    <a href="#%e9%ab%98%e7%ba%a7%e6%93%8d%e4%bd%9c" aria-label="é«˜çº§æ“ä½œ">é«˜çº§æ“ä½œ</a><ul>
                        
                <li>
                    <a href="#collect" aria-label="Collect">Collect</a></li>
                <li>
                    <a href="#flatmap-1" aria-label="FlatMap">FlatMap</a></li>
                <li>
                    <a href="#reduce-1" aria-label="Reduce">Reduce</a></li>
                <li>
                    <a href="#%e5%b9%b6%e8%a1%8c%e6%b5%81" aria-label="å¹¶è¡Œæµ">å¹¶è¡Œæµ</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="å‡½æ•°å¼ç¼–ç¨‹">å‡½æ•°å¼ç¼–ç¨‹<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°å¼ç¼–ç¨‹">#</a></h1>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ã€‚å‡½æ•°æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œä¸€ä¸ªå¤§å‹ç¨‹åºå°±æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°è°ƒç”¨è‹¥å¹²åº•å±‚å‡½æ•°ï¼Œè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°åˆå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå³å¤§ä»»åŠ¡è¢«ä¸€å±‚å±‚æ‹†è§£å¹¶æ‰§è¡Œã€‚æ‰€ä»¥å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚</p>
<p>Javaä¸æ”¯æŒå•ç‹¬å®šä¹‰å‡½æ•°ï¼Œä½†å¯ä»¥æŠŠé™æ€æ–¹æ³•è§†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ŒæŠŠå®ä¾‹æ–¹æ³•è§†ä¸ºè‡ªå¸¦<code>this</code>å‚æ•°çš„å‡½æ•°ã€‚</p>
<p>è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—æœºï¼ˆComputerï¼‰å’Œè®¡ç®—ï¼ˆComputeï¼‰çš„æ¦‚å¿µã€‚</p>
<p>åœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚</p>
<p>è€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚</p>
<p>å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œçº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼</p>
<p>å‡½æ•°å¼ç¼–ç¨‹æœ€æ—©æ˜¯æ•°å­¦å®¶<a href="https://zh.wikipedia.org/wiki/%E9%98%BF%E9%9A%86%E4%BD%90%C2%B7%E9%82%B1%E5%A5%87">é˜¿éš†ä½Â·é‚±å¥‡</a>ç ”ç©¶çš„ä¸€å¥—å‡½æ•°å˜æ¢é€»è¾‘ï¼Œåˆç§°Lambda Calculusï¼ˆÎ»-Calculusï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸æŠŠå‡½æ•°å¼ç¼–ç¨‹ç§°ä¸ºLambdaè®¡ç®—ã€‚</p>
<p>Javaå¹³å°ä»Java 8å¼€å§‹ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<h1 id="lambdaåŸºç¡€">LambdaåŸºç¡€<a hidden class="anchor" aria-hidden="true" href="#lambdaåŸºç¡€">#</a></h1>
<p>åœ¨äº†è§£Lambdaä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹Javaçš„æ–¹æ³•ã€‚</p>
<p>Javaçš„æ–¹æ³•åˆ†ä¸ºå®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚<code>Integer</code>å®šä¹‰çš„<code>equals()</code>æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> Integer {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥åŠé™æ€æ–¹æ³•ï¼Œä¾‹å¦‚<code>Integer</code>å®šä¹‰çš„<code>parseInt()</code>æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> Integer {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> parseInt(String s) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ— è®ºæ˜¯å®ä¾‹æ–¹æ³•ï¼Œè¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šéƒ½ç›¸å½“äºè¿‡ç¨‹å¼è¯­è¨€çš„å‡½æ•°ã€‚ä¾‹å¦‚Cå‡½æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">char</span>* strcpy(<span style="color:#fff;font-weight:bold">char</span>* dest, <span style="color:#fff;font-weight:bold">char</span>* src)
</span></span></code></pre></td></tr></table>
</div>
</div><p>åªä¸è¿‡Javaçš„å®ä¾‹æ–¹æ³•éšå«åœ°ä¼ å…¥äº†ä¸€ä¸ª<code>this</code>å˜é‡ï¼Œå³å®ä¾‹æ–¹æ³•æ€»æ˜¯æœ‰ä¸€ä¸ªéšå«å‚æ•°<code>this</code>ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰æ˜¯æŠŠå‡½æ•°ä½œä¸ºåŸºæœ¬è¿ç®—å•å…ƒï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå˜é‡ï¼Œå¯ä»¥æ¥æ”¶å‡½æ•°ï¼Œè¿˜å¯ä»¥è¿”å›å‡½æ•°ã€‚å†å²ä¸Šç ”ç©¶å‡½æ•°å¼ç¼–ç¨‹çš„ç†è®ºæ˜¯Lambdaæ¼”ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸æŠŠæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„ç¼–ç é£æ ¼ç§°ä¸ºLambdaè¡¨è¾¾å¼ã€‚</p>
<h2 id="lambdaè¡¨è¾¾å¼">Lambdaè¡¨è¾¾å¼<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼">#</a></h2>
<p>åœ¨Javaç¨‹åºä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€å¤§å †å•æ–¹æ³•æ¥å£ï¼Œå³ä¸€ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>Comparator</li>
<li>Runnable</li>
<li>Callable</li>
</ul>
<p>ä»¥<code>Comparator</code>ä¸ºä¾‹ï¼Œæˆ‘ä»¬æƒ³è¦è°ƒç”¨<code>Arrays.sort()</code>æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª<code>Comparator</code>å®ä¾‹ï¼Œä»¥åŒ¿åç±»æ–¹å¼ç¼–å†™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String[] array = [<span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;b&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>];
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(array, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°å†™æ³•éå¸¸ç¹çã€‚ä»Java 8å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ›¿æ¢å•æ–¹æ³•æ¥å£ã€‚æ”¹å†™ä¸Šè¿°ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String[] array = <span style="color:#fff;font-weight:bold">new</span> String[] {<span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Lemon&#34;</span>};
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(array, (s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(String.<span style="color:#007f7f">join</span>(<span style="color:#0ff;font-weight:bold">&#34;, &#34;</span>, array));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§‚å¯ŸLambdaè¡¨è¾¾å¼çš„å†™æ³•ï¼Œå®ƒåªéœ€è¦å†™å‡ºæ–¹æ³•å®šä¹‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>(s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ï¼Œå‚æ•°æ˜¯<code>(s1, s2)</code>ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡º<code>String</code>ç±»å‹ã€‚<code>-&gt; { ... }</code>è¡¨ç¤ºæ–¹æ³•ä½“ï¼Œæ‰€æœ‰ä»£ç å†™åœ¨å†…éƒ¨å³å¯ã€‚Lambdaè¡¨è¾¾å¼æ²¡æœ‰<code>class</code>å®šä¹‰ï¼Œå› æ­¤å†™æ³•éå¸¸ç®€æ´ã€‚</p>
<p>å¦‚æœåªæœ‰ä¸€è¡Œ<code>return xxx</code>çš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥ç”¨æ›´ç®€å•çš„å†™æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(array, (s1, s2) -&gt; s1.<span style="color:#007f7f">compareTo</span>(s2));
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­çš„ï¼Œè¿™é‡Œæ¨æ–­å‡ºçš„è¿”å›å€¼æ˜¯<code>int</code>ï¼Œå› æ­¤ï¼Œåªè¦è¿”å›<code>int</code>ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šæŠ¥é”™ã€‚</p>
<h2 id="functionalinterface">FunctionalInterface<a hidden class="anchor" aria-hidden="true" href="#functionalinterface">#</a></h2>
<p>æˆ‘ä»¬æŠŠåªå®šä¹‰äº†å•æ–¹æ³•çš„æ¥å£ç§°ä¹‹ä¸º<code>FunctionalInterface</code>ï¼Œç”¨æ³¨è§£<code>@FunctionalInterface</code>æ ‡è®°ã€‚ä¾‹å¦‚ï¼Œ<code>Callable</code>æ¥å£ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Callable&lt;V&gt; {
</span></span><span style="display:flex;"><span>    V call() <span style="color:#fff;font-weight:bold">throws</span> Exception;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¥çœ‹<code>Comparator</code>æ¥å£ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Comparator&lt;T&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> compare(T o1, T o2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> equals(Object obj);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">default</span> Comparator&lt;T&gt; reversed() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Collections.<span style="color:#007f7f">reverseOrder</span>(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">default</span> Comparator&lt;T&gt; thenComparing(Comparator&lt;? <span style="color:#fff;font-weight:bold">super</span> T&gt; other) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶<code>Comparator</code>æ¥å£æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•<code>int compare(T o1, T o2)</code>ï¼Œå…¶ä»–çš„æ–¹æ³•éƒ½æ˜¯<code>default</code>æ–¹æ³•æˆ–<code>static</code>æ–¹æ³•ã€‚å¦å¤–æ³¨æ„åˆ°<code>boolean equals(Object obj)</code>æ˜¯<code>Object</code>å®šä¹‰çš„æ–¹æ³•ï¼Œä¸ç®—åœ¨æ¥å£æ–¹æ³•å†…ã€‚å› æ­¤ï¼Œ<code>Comparator</code>ä¹Ÿæ˜¯ä¸€ä¸ª<code>FunctionalInterface</code>ã€‚</p>
<h2 id="å°ç»“">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“">#</a></h2>
<p>å•æ–¹æ³•æ¥å£è¢«ç§°ä¸º<code>FunctionalInterface</code>ã€‚</p>
<p>æ¥æ”¶<code>FunctionalInterface</code>ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ä¾‹åŒ–çš„åŒ¿åç±»æ”¹å†™ä¸ºLambdaè¡¨è¾¾å¼ï¼Œèƒ½å¤§å¤§ç®€åŒ–ä»£ç ã€‚</p>
<p>Lambdaè¡¨è¾¾å¼çš„å‚æ•°å’Œè¿”å›å€¼å‡å¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ã€‚</p>
<h1 id="æ–¹æ³•å¼•ç”¨">æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#æ–¹æ³•å¼•ç”¨">#</a></h1>
<p>ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸å¿…ç¼–å†™<code>FunctionalInterface</code>æ¥å£çš„å®ç°ç±»ï¼Œä»è€Œç®€åŒ–ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(array, (s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®é™…ä¸Šï¼Œé™¤äº†Lambdaè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String[] array = <span style="color:#fff;font-weight:bold">new</span> String[] { <span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Lemon&#34;</span> };
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(array, Main::cmp);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(String.<span style="color:#007f7f">join</span>(<span style="color:#0ff;font-weight:bold">&#34;, &#34;</span>, array));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> cmp(String s1, String s2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç åœ¨<code>Arrays.sort()</code>ä¸­ç›´æ¥ä¼ å…¥äº†é™æ€æ–¹æ³•<code>cmp</code>çš„å¼•ç”¨ï¼Œç”¨<code>Main::cmp</code>è¡¨ç¤ºã€‚</p>
<p>å› æ­¤ï¼Œæ‰€è°“æ–¹æ³•å¼•ç”¨ï¼Œæ˜¯æŒ‡å¦‚æœæŸä¸ªæ–¹æ³•ç­¾åå’Œæ¥å£æ°å¥½ä¸€è‡´ï¼Œå°±å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚</p>
<p>å› ä¸º<code>Comparator&lt;String&gt;</code>æ¥å£å®šä¹‰çš„æ–¹æ³•æ˜¯<code>int compare(String, String)</code>ï¼Œå’Œé™æ€æ–¹æ³•<code>int cmp(String, String)</code>ç›¸æ¯”ï¼Œé™¤äº†æ–¹æ³•åå¤–ï¼Œæ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œè¿”å›ç±»å‹ç›¸åŒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¯´ä¸¤è€…çš„æ–¹æ³•ç­¾åä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–¹æ³•åä½œä¸ºLambdaè¡¨è¾¾å¼ä¼ å…¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(array, Main::cmp);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šåœ¨è¿™é‡Œï¼Œæ–¹æ³•ç­¾ååªçœ‹å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼Œä¸çœ‹æ–¹æ³•åç§°ï¼Œä¹Ÿä¸çœ‹ç±»çš„ç»§æ‰¿å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬å†çœ‹çœ‹å¦‚ä½•å¼•ç”¨å®ä¾‹æ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬æŠŠä»£ç æ”¹å†™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String[] array = <span style="color:#fff;font-weight:bold">new</span> String[] { <span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Lemon&#34;</span> };
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(array, String::compareTo);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(String.<span style="color:#007f7f">join</span>(<span style="color:#0ff;font-weight:bold">&#34;, &#34;</span>, array));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ä½†å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œè€Œä¸”è¿è¡Œç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™è¯´æ˜<code>String.compareTo()</code>æ–¹æ³•ä¹Ÿç¬¦åˆLambdaå®šä¹‰ã€‚</p>
<p>è§‚å¯Ÿ<code>String.compareTo()</code>çš„æ–¹æ³•å®šä¹‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> String {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compareTo(String o) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ–¹æ³•çš„ç­¾ååªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸ºä»€ä¹ˆå’Œ<code>int Comparator&lt;String&gt;.compare(String, String)</code>èƒ½åŒ¹é…å‘¢ï¼Ÿ</p>
<p>å› ä¸ºå®ä¾‹æ–¹æ³•æœ‰ä¸€ä¸ªéšå«çš„<code>this</code>å‚æ•°ï¼Œ<code>String</code>ç±»çš„<code>compareTo()</code>æ–¹æ³•åœ¨å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªéšå«å‚æ•°æ€»æ˜¯ä¼ å…¥<code>this</code>ï¼Œç›¸å½“äºé™æ€æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> compareTo(<span style="color:#fff;font-weight:bold">this</span>, String o);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€ä»¥ï¼Œ<code>String.compareTo()</code>æ–¹æ³•ä¹Ÿå¯ä½œä¸ºæ–¹æ³•å¼•ç”¨ä¼ å…¥ã€‚</p>
<h2 id="æ„é€ æ–¹æ³•å¼•ç”¨">æ„é€ æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#æ„é€ æ–¹æ³•å¼•ç”¨">#</a></h2>
<p>é™¤äº†å¯ä»¥å¼•ç”¨é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼šå¦‚æœè¦æŠŠä¸€ä¸ª<code>List&lt;String&gt;</code>è½¬æ¢ä¸º<code>List&lt;Person&gt;</code>ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Person(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>List&lt;String&gt; names = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Bob&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Alice&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Tim&#34;</span>);
</span></span><span style="display:flex;"><span>List&lt;Person&gt; persons = ???
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼ ç»Ÿçš„åšæ³•æ˜¯å…ˆå®šä¹‰ä¸€ä¸ª<code>ArrayList&lt;Person&gt;</code>ï¼Œç„¶åç”¨<code>for</code>å¾ªç¯å¡«å……è¿™ä¸ª<code>List</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;String&gt; names = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Bob&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Alice&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Tim&#34;</span>);
</span></span><span style="display:flex;"><span>List&lt;Person&gt; persons = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (String name : names) {
</span></span><span style="display:flex;"><span>    persons.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Person(name));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¦æ›´ç®€å•åœ°å®ç°<code>String</code>åˆ°<code>Person</code>çš„è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å¼•ç”¨<code>Person</code>çš„æ„é€ æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        List&lt;String&gt; names = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Bob&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Alice&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Tim&#34;</span>);
</span></span><span style="display:flex;"><span>        List&lt;Person&gt; persons = names.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">map</span>(Person::<span style="color:#fff;font-weight:bold">new</span>).<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(persons);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Person(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;Person:&#34;</span> + <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åé¢æˆ‘ä»¬ä¼šè®²åˆ°<code>Stream</code>çš„<code>map()</code>æ–¹æ³•ã€‚ç°åœ¨æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™é‡Œçš„<code>map()</code>éœ€è¦ä¼ å…¥çš„FunctionalInterfaceçš„å®šä¹‰æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Function&lt;T, R&gt; {
</span></span><span style="display:flex;"><span>    R apply(T t);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠæ³›å‹å¯¹åº”ä¸Šå°±æ˜¯æ–¹æ³•ç­¾å<code>Person apply(String)</code>ï¼Œå³ä¼ å…¥å‚æ•°<code>String</code>ï¼Œè¿”å›ç±»å‹<code>Person</code>ã€‚è€Œ<code>Person</code>ç±»çš„æ„é€ æ–¹æ³•æ°å¥½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå› ä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°æ˜¯<code>String</code>ï¼Œè€Œæ„é€ æ–¹æ³•è™½ç„¶æ²¡æœ‰<code>return</code>è¯­å¥ï¼Œä½†å®ƒä¼šéšå¼åœ°è¿”å›<code>this</code>å®ä¾‹ï¼Œç±»å‹å°±æ˜¯<code>Person</code>ï¼Œå› æ­¤ï¼Œæ­¤å¤„å¯ä»¥å¼•ç”¨æ„é€ æ–¹æ³•ã€‚æ„é€ æ–¹æ³•çš„å¼•ç”¨å†™æ³•æ˜¯<code>ç±»å::new</code>ï¼Œå› æ­¤ï¼Œæ­¤å¤„ä¼ å…¥<code>Person::new</code>ã€‚</p>
<h2 id="å°ç»“-1">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“-1">#</a></h2>
<p><code>FunctionalInterface</code>å…è®¸ä¼ å…¥ï¼š</p>
<ul>
<li>æ¥å£çš„å®ç°ç±»ï¼ˆä¼ ç»Ÿå†™æ³•ï¼Œä»£ç è¾ƒç¹çï¼‰ï¼›</li>
<li>Lambdaè¡¨è¾¾å¼ï¼ˆåªéœ€åˆ—å‡ºå‚æ•°åï¼Œç”±ç¼–è¯‘å™¨æ¨æ–­ç±»å‹ï¼‰ï¼›</li>
<li>ç¬¦åˆæ–¹æ³•ç­¾åçš„é™æ€æ–¹æ³•ï¼›</li>
<li>ç¬¦åˆæ–¹æ³•ç­¾åçš„å®ä¾‹æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ï¼‰ï¼›</li>
<li>ç¬¦åˆæ–¹æ³•ç­¾åçš„æ„é€ æ–¹æ³•ï¼ˆå®ä¾‹ç±»å‹è¢«çœ‹åšè¿”å›ç±»å‹ï¼‰ã€‚</li>
</ul>
<p><code>FunctionalInterface</code>ä¸å¼ºåˆ¶ç»§æ‰¿å…³ç³»ï¼Œä¸éœ€è¦æ–¹æ³•åç§°ç›¸åŒï¼Œåªè¦æ±‚æ–¹æ³•å‚æ•°ï¼ˆç±»å‹å’Œæ•°é‡ï¼‰ä¸æ–¹æ³•è¿”å›ç±»å‹ç›¸åŒï¼Œå³è®¤ä¸ºæ–¹æ³•ç­¾åç›¸åŒã€‚</p>
<h1 id="ä½¿ç”¨stream">ä½¿ç”¨Stream<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨stream">#</a></h1>
<p>Javaä»8å¼€å§‹ï¼Œä¸ä½†å¼•å…¥äº†Lambdaè¡¨è¾¾å¼ï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„æµå¼APIï¼šStream APIã€‚å®ƒä½äº<code>java.util.stream</code>åŒ…ä¸­ã€‚</p>
<p><em>åˆ’é‡ç‚¹</em>ï¼šè¿™ä¸ª<code>Stream</code>ä¸åŒäº<code>java.io</code>çš„<code>InputStream</code>å’Œ<code>OutputStream</code>ï¼Œå®ƒä»£è¡¨çš„æ˜¯ä»»æ„Javaå¯¹è±¡çš„åºåˆ—ã€‚ä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">java.io</th>
<th style="text-align:left">java.util.stream</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å­˜å‚¨</td>
<td style="text-align:left">é¡ºåºè¯»å†™çš„<code>byte</code>æˆ–<code>char</code></td>
<td style="text-align:left">é¡ºåºè¾“å‡ºçš„ä»»æ„Javaå¯¹è±¡å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left">ç”¨é€”</td>
<td style="text-align:left">åºåˆ—åŒ–è‡³æ–‡ä»¶æˆ–ç½‘ç»œ</td>
<td style="text-align:left">å†…å­˜è®¡ç®—ï¼ä¸šåŠ¡é€»è¾‘</td>
</tr>
</tbody>
</table>
<p>æœ‰åŒå­¦ä¼šé—®ï¼šä¸€ä¸ªé¡ºåºè¾“å‡ºçš„Javaå¯¹è±¡åºåˆ—ï¼Œä¸å°±æ˜¯ä¸€ä¸ª<code>List</code>å®¹å™¨å—ï¼Ÿ</p>
<p><em>å†æ¬¡åˆ’é‡ç‚¹</em>ï¼šè¿™ä¸ª<code>Stream</code>å’Œ<code>List</code>ä¹Ÿä¸ä¸€æ ·ï¼Œ<code>List</code>å­˜å‚¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å·²ç»å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æŸä¸ªJavaå¯¹è±¡ï¼Œè€Œ<code>Stream</code>è¾“å‡ºçš„å…ƒç´ å¯èƒ½å¹¶æ²¡æœ‰é¢„å…ˆå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<code>List</code>çš„ç”¨é€”æ˜¯æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„Javaå¯¹è±¡ï¼Œè€Œ<code>Stream</code>å®ç°çš„æ˜¯æƒ°æ€§è®¡ç®—ï¼Œä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">java.util.List</th>
<th style="text-align:left">java.util.stream</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å…ƒç´ </td>
<td style="text-align:left">å·²åˆ†é…å¹¶å­˜å‚¨åœ¨å†…å­˜</td>
<td style="text-align:left">å¯èƒ½æœªåˆ†é…ï¼Œå®æ—¶è®¡ç®—</td>
</tr>
<tr>
<td style="text-align:left">ç”¨é€”</td>
<td style="text-align:left">æ“ä½œä¸€ç»„å·²å­˜åœ¨çš„Javaå¯¹è±¡</td>
<td style="text-align:left">æƒ°æ€§è®¡ç®—</td>
</tr>
</tbody>
</table>
<p><code>Stream</code>çœ‹ä¸Šå»æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å°±æ˜ç™½äº†ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦è¡¨ç¤ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„é›†åˆï¼Œæ˜¾ç„¶ï¼Œç”¨<code>List</code>æ˜¯ä¸å¯èƒ½å†™å‡ºæ¥çš„ï¼Œå› ä¸ºè‡ªç„¶æ•°æ˜¯æ— é™çš„ï¼Œå†…å­˜å†å¤§ä¹Ÿæ²¡æ³•æ”¾åˆ°<code>List</code>ä¸­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;BigInteger&gt; list = ??? <span style="color:#007f7f">// å…¨ä½“è‡ªç„¶æ•°?</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ï¼Œç”¨<code>Stream</code>å¯ä»¥åšåˆ°ã€‚å†™æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;BigInteger&gt; naturals = createNaturalStream(); <span style="color:#007f7f">// å…¨ä½“è‡ªç„¶æ•°</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å…ˆä¸è€ƒè™‘<code>createNaturalStream()</code>è¿™ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™ä¸ª<code>Stream</code>ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªè‡ªç„¶æ•°åšä¸€ä¸ªå¹³æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±æŠŠè¿™ä¸ª<code>Stream</code>è½¬æ¢æˆäº†å¦ä¸€ä¸ª<code>Stream</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;BigInteger&gt; naturals = createNaturalStream(); <span style="color:#007f7f">// å…¨ä½“è‡ªç„¶æ•°</span>
</span></span><span style="display:flex;"><span>Stream&lt;BigInteger&gt; streamNxN = naturals.<span style="color:#007f7f">map</span>(n -&gt; n.<span style="color:#007f7f">multiply</span>(n)); <span style="color:#007f7f">// å…¨ä½“è‡ªç„¶æ•°çš„å¹³æ–¹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºè¿™ä¸ª<code>streamNxN</code>ä¹Ÿæœ‰æ— é™å¤šä¸ªå…ƒç´ ï¼Œè¦æ‰“å°å®ƒï¼Œå¿…é¡»é¦–å…ˆæŠŠæ— é™å¤šä¸ªå…ƒç´ å˜æˆæœ‰é™ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨<code>limit()</code>æ–¹æ³•æˆªå–å‰100ä¸ªå…ƒç´ ï¼Œæœ€åç”¨<code>forEach()</code>å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ‰“å°å‡ºäº†å‰100ä¸ªè‡ªç„¶æ•°çš„å¹³æ–¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;BigInteger&gt; naturals = createNaturalStream();
</span></span><span style="display:flex;"><span>naturals.<span style="color:#007f7f">map</span>(n -&gt; n.<span style="color:#007f7f">multiply</span>(n)) <span style="color:#007f7f">// 1, 4, 9, 16, 25...</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">limit</span>(100)
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹<code>Stream</code>çš„ç‰¹ç‚¹ï¼šå®ƒå¯ä»¥â€œå­˜å‚¨â€æœ‰é™ä¸ªæˆ–æ— é™ä¸ªå…ƒç´ ã€‚è¿™é‡Œçš„å­˜å‚¨æ‰“äº†ä¸ªå¼•å·ï¼Œæ˜¯å› ä¸ºå…ƒç´ æœ‰å¯èƒ½å·²ç»å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ ¹æ®éœ€è¦å®æ—¶è®¡ç®—å‡ºæ¥çš„ã€‚</p>
<p><code>Stream</code>çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä¸€ä¸ª<code>Stream</code>å¯ä»¥è½»æ˜“åœ°è½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Stream</code>ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸ<code>Stream</code>æœ¬èº«ã€‚</p>
<p>æœ€åï¼ŒçœŸæ­£çš„è®¡ç®—é€šå¸¸å‘ç”Ÿåœ¨æœ€åç»“æœçš„è·å–ï¼Œä¹Ÿå°±æ˜¯æƒ°æ€§è®¡ç®—ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;BigInteger&gt; naturals = createNaturalStream(); <span style="color:#007f7f">// ä¸è®¡ç®—</span>
</span></span><span style="display:flex;"><span>Stream&lt;BigInteger&gt; s2 = naturals.<span style="color:#007f7f">map</span>(BigInteger::multiply); <span style="color:#007f7f">// ä¸è®¡ç®—</span>
</span></span><span style="display:flex;"><span>Stream&lt;BigInteger&gt; s3 = s2.<span style="color:#007f7f">limit</span>(100); <span style="color:#007f7f">// ä¸è®¡ç®—</span>
</span></span><span style="display:flex;"><span>s3.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println); <span style="color:#007f7f">// è®¡ç®—</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æƒ°æ€§è®¡ç®—çš„ç‰¹ç‚¹æ˜¯ï¼šä¸€ä¸ª<code>Stream</code>è½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Stream</code>æ—¶ï¼Œå®é™…ä¸Šåªå­˜å‚¨äº†è½¬æ¢è§„åˆ™ï¼Œå¹¶æ²¡æœ‰ä»»ä½•è®¡ç®—å‘ç”Ÿã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå…¨ä½“è‡ªç„¶æ•°çš„<code>Stream</code>ï¼Œä¸ä¼šè¿›è¡Œè®¡ç®—ï¼ŒæŠŠå®ƒè½¬æ¢ä¸ºä¸Šè¿°<code>s2</code>è¿™ä¸ª<code>Stream</code>ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚å†æŠŠ<code>s2</code>è¿™ä¸ªæ— é™<code>Stream</code>è½¬æ¢ä¸º<code>s3</code>è¿™ä¸ªæœ‰é™çš„<code>Stream</code>ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè®¡ç®—ã€‚åªæœ‰æœ€åï¼Œè°ƒç”¨<code>forEach</code>ç¡®å®éœ€è¦<code>Stream</code>è¾“å‡ºçš„å…ƒç´ æ—¶ï¼Œæ‰è¿›è¡Œè®¡ç®—ã€‚æˆ‘ä»¬é€šå¸¸æŠŠ<code>Stream</code>çš„æ“ä½œå†™æˆé“¾å¼æ“ä½œï¼Œä»£ç æ›´ç®€æ´ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>createNaturalStream()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(BigInteger::multiply)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">limit</span>(100)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› æ­¤ï¼ŒStream APIçš„åŸºæœ¬ç”¨æ³•å°±æ˜¯ï¼šåˆ›å»ºä¸€ä¸ª<code>Stream</code>ï¼Œç„¶ååšè‹¥å¹²æ¬¡è½¬æ¢ï¼Œæœ€åè°ƒç”¨ä¸€ä¸ªæ±‚å€¼æ–¹æ³•è·å–çœŸæ­£è®¡ç®—çš„ç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> result = createNaturalStream() <span style="color:#007f7f">// åˆ›å»ºStream</span>
</span></span><span style="display:flex;"><span>             .<span style="color:#007f7f">filter</span>(n -&gt; n % 2 == 0) <span style="color:#007f7f">// ä»»æ„ä¸ªè½¬æ¢</span>
</span></span><span style="display:flex;"><span>             .<span style="color:#007f7f">map</span>(n -&gt; n * n) <span style="color:#007f7f">// ä»»æ„ä¸ªè½¬æ¢</span>
</span></span><span style="display:flex;"><span>             .<span style="color:#007f7f">limit</span>(100) <span style="color:#007f7f">// ä»»æ„ä¸ªè½¬æ¢</span>
</span></span><span style="display:flex;"><span>             .<span style="color:#007f7f">sum</span>(); <span style="color:#007f7f">// æœ€ç»ˆè®¡ç®—ç»“æœ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°ç»“-2">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“-2">#</a></h2>
<p>Stream APIçš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>Stream APIæä¾›äº†ä¸€å¥—æ–°çš„æµå¼å¤„ç†çš„æŠ½è±¡åºåˆ—ï¼›</li>
<li>Stream APIæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹å’Œé“¾å¼æ“ä½œï¼›</li>
<li>Streamå¯ä»¥è¡¨ç¤ºæ— é™åºåˆ—ï¼Œå¹¶ä¸”å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚</li>
</ul>
<h1 id="åˆ›å»ºstream">åˆ›å»ºStream<a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºstream">#</a></h1>
<p>è¦ä½¿ç”¨<code>Stream</code>ï¼Œå°±å¿…é¡»å…ˆåˆ›å»ºå®ƒã€‚åˆ›å»º<code>Stream</code>æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€ä»‹ç»ã€‚</p>
<h2 id="streamof">Stream.of()<a hidden class="anchor" aria-hidden="true" href="#streamof">#</a></h2>
<p>åˆ›å»º<code>Stream</code>æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥ç”¨<code>Stream.of()</code>é™æ€æ–¹æ³•ï¼Œä¼ å…¥å¯å˜å‚æ•°å³åˆ›å»ºäº†ä¸€ä¸ªèƒ½è¾“å‡ºç¡®å®šå…ƒç´ çš„<code>Stream</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;String&gt; stream = Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;D&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// forEach()æ–¹æ³•ç›¸å½“äºå†…éƒ¨å¾ªç¯è°ƒç”¨ï¼Œ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¯ä¼ å…¥ç¬¦åˆConsumeræ¥å£çš„void accept(T t)çš„æ–¹æ³•å¼•ç”¨ï¼š</span>
</span></span><span style="display:flex;"><span>        stream.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶è¿™ç§æ–¹å¼åŸºæœ¬ä¸Šæ²¡å•¥å®è´¨æ€§ç”¨é€”ï¼Œä½†æµ‹è¯•çš„æ—¶å€™å¾ˆæ–¹ä¾¿ã€‚</p>
<h2 id="åŸºäºæ•°ç»„æˆ–collectionåˆ›å»ºstream">åŸºäºæ•°ç»„æˆ–Collectionåˆ›å»ºStream<a hidden class="anchor" aria-hidden="true" href="#åŸºäºæ•°ç»„æˆ–collectionåˆ›å»ºstream">#</a></h2>
<p>ç¬¬äºŒç§åˆ›å»º<code>Stream</code>çš„æ–¹æ³•æ˜¯åŸºäºä¸€ä¸ªæ•°ç»„æˆ–è€…<code>Collection</code>ï¼Œè¿™æ ·è¯¥<code>Stream</code>è¾“å‡ºçš„å…ƒç´ å°±æ˜¯æ•°ç»„æˆ–è€…<code>Collection</code>æŒæœ‰çš„å…ƒç´ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;String&gt; stream1 = Arrays.<span style="color:#007f7f">stream</span>(<span style="color:#fff;font-weight:bold">new</span> String[] { <span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;C&#34;</span> });
</span></span><span style="display:flex;"><span>        Stream&lt;String&gt; stream2 = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;X&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Y&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Z&#34;</span>).<span style="color:#007f7f">stream</span>();
</span></span><span style="display:flex;"><span>        stream1.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>        stream2.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠæ•°ç»„å˜æˆ<code>Stream</code>ä½¿ç”¨<code>Arrays.stream()</code>æ–¹æ³•ã€‚å¯¹äº<code>Collection</code>ï¼ˆ<code>List</code>ã€<code>Set</code>ã€<code>Queue</code>ç­‰ï¼‰ï¼Œç›´æ¥è°ƒç”¨<code>stream()</code>æ–¹æ³•å°±å¯ä»¥è·å¾—<code>Stream</code>ã€‚</p>
<p>ä¸Šè¿°åˆ›å»º<code>Stream</code>çš„æ–¹æ³•éƒ½æ˜¯æŠŠä¸€ä¸ªç°æœ‰çš„åºåˆ—å˜ä¸º<code>Stream</code>ï¼Œå®ƒçš„å…ƒç´ æ˜¯å›ºå®šçš„ã€‚</p>
<h2 id="åŸºäºsupplieråˆ›å»ºstream">åŸºäºSupplieråˆ›å»ºStream<a hidden class="anchor" aria-hidden="true" href="#åŸºäºsupplieråˆ›å»ºstream">#</a></h2>
<p>åˆ›å»º<code>Stream</code>è¿˜å¯ä»¥é€šè¿‡<code>Stream.generate()</code>æ–¹æ³•ï¼Œå®ƒéœ€è¦ä¼ å…¥ä¸€ä¸ª<code>Supplier</code>å¯¹è±¡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Stream&lt;String&gt; s = Stream.generate(Supplier&lt;String&gt; sp);
</span></span></code></pre></td></tr></table>
</div>
</div><p>åŸºäº<code>Supplier</code>åˆ›å»ºçš„<code>Stream</code>ä¼šä¸æ–­è°ƒç”¨<code>Supplier.get()</code>æ–¹æ³•æ¥ä¸æ–­äº§ç”Ÿä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ç§<code>Stream</code>ä¿å­˜çš„ä¸æ˜¯å…ƒç´ ï¼Œè€Œæ˜¯ç®—æ³•ï¼Œå®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºæ— é™åºåˆ—ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªèƒ½ä¸æ–­ç”Ÿæˆè‡ªç„¶æ•°çš„<code>Supplier</code>ï¼Œå®ƒçš„ä»£ç éå¸¸ç®€å•ï¼Œæ¯æ¬¡è°ƒç”¨<code>get()</code>æ–¹æ³•ï¼Œå°±ç”Ÿæˆä¸‹ä¸€ä¸ªè‡ªç„¶æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;Integer&gt; natual = Stream.<span style="color:#007f7f">generate</span>(<span style="color:#fff;font-weight:bold">new</span> NatualSupplier());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ³¨æ„ï¼šæ— é™åºåˆ—å¿…é¡»å…ˆå˜æˆæœ‰é™åºåˆ—å†æ‰“å°:</span>
</span></span><span style="display:flex;"><span>        natual.<span style="color:#007f7f">limit</span>(20).<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> NatualSupplier <span style="color:#fff;font-weight:bold">implements</span> Supplier&lt;Integer&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> n = 0;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Integer get() {
</span></span><span style="display:flex;"><span>        n++;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬ç”¨ä¸€ä¸ª<code>Supplier&lt;Integer&gt;</code>æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ— é™åºåˆ—ï¼ˆå½“ç„¶å—<code>int</code>èŒƒå›´é™åˆ¶ä¸æ˜¯çœŸçš„æ— é™å¤§ï¼‰ã€‚å¦‚æœç”¨<code>List</code>è¡¨ç¤ºï¼Œå³ä¾¿åœ¨<code>int</code>èŒƒå›´å†…ï¼Œä¹Ÿä¼šå ç”¨å·¨å¤§çš„å†…å­˜ï¼Œè€Œ<code>Stream</code>å‡ ä¹ä¸å ç”¨ç©ºé—´ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œç”¨çš„æ—¶å€™å†ç®—ã€‚</p>
<p>å¯¹äºæ— é™åºåˆ—ï¼Œå¦‚æœç›´æ¥è°ƒç”¨<code>forEach()</code>æˆ–è€…<code>count()</code>è¿™äº›æœ€ç»ˆæ±‚å€¼æ“ä½œï¼Œä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œå› ä¸ºæ°¸è¿œæ— æ³•è®¡ç®—å®Œè¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•æ˜¯å…ˆæŠŠæ— é™åºåˆ—å˜æˆæœ‰é™åºåˆ—ï¼Œä¾‹å¦‚ï¼Œç”¨<code>limit()</code>æ–¹æ³•å¯ä»¥æˆªå–å‰é¢è‹¥å¹²ä¸ªå…ƒç´ ï¼Œè¿™æ ·å°±å˜æˆäº†ä¸€ä¸ªæœ‰é™åºåˆ—ï¼Œå¯¹è¿™ä¸ªæœ‰é™åºåˆ—è°ƒç”¨<code>forEach()</code>æˆ–è€…<code>count()</code>æ“ä½œå°±æ²¡æœ‰é—®é¢˜ã€‚</p>
<h2 id="å…¶ä»–æ–¹å¼åˆ›å»ºstream">å…¶ä»–æ–¹å¼åˆ›å»ºStream<a hidden class="anchor" aria-hidden="true" href="#å…¶ä»–æ–¹å¼åˆ›å»ºstream">#</a></h2>
<p>åˆ›å»º<code>Stream</code>çš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯é€šè¿‡ä¸€äº›APIæä¾›çš„æ¥å£ï¼Œç›´æ¥è·å¾—<code>Stream</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<code>Files</code>ç±»çš„<code>lines()</code>æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªæ–‡ä»¶å˜æˆä¸€ä¸ª<code>Stream</code>ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨æ–‡ä»¶çš„ä¸€è¡Œå†…å®¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>try (Stream&lt;String&gt; lines = Files.lines(Paths.get(&#34;/path/to/file.txt&#34;))) {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ–¹æ³•å¯¹äºæŒ‰è¡Œéå†æ–‡æœ¬æ–‡ä»¶ååˆ†æœ‰ç”¨ã€‚</p>
<p>å¦å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„<code>Pattern</code>å¯¹è±¡æœ‰ä¸€ä¸ª<code>splitAsStream()</code>æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªé•¿å­—ç¬¦ä¸²åˆ†å‰²æˆ<code>Stream</code>åºåˆ—è€Œä¸æ˜¯æ•°ç»„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Pattern p = Pattern.<span style="color:#007f7f">compile</span>(<span style="color:#0ff;font-weight:bold">&#34;\\s+&#34;</span>);
</span></span><span style="display:flex;"><span>Stream&lt;String&gt; s = p.<span style="color:#007f7f">splitAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;The quick brown fox jumps over the lazy dog&#34;</span>);
</span></span><span style="display:flex;"><span>s.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹<a hidden class="anchor" aria-hidden="true" href="#åŸºæœ¬ç±»å‹">#</a></h2>
<p>å› ä¸ºJavaçš„èŒƒå‹ä¸æ”¯æŒåŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç”¨<code>Stream&lt;int&gt;</code>è¿™æ ·çš„ç±»å‹ï¼Œä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ä¸ºäº†ä¿å­˜<code>int</code>ï¼Œåªèƒ½ä½¿ç”¨<code>Stream&lt;Integer&gt;</code>ï¼Œä½†è¿™æ ·ä¼šäº§ç”Ÿé¢‘ç¹çš„è£…ç®±ã€æ‹†ç®±æ“ä½œã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼ŒJavaæ ‡å‡†åº“æä¾›äº†<code>IntStream</code>ã€<code>LongStream</code>å’Œ<code>DoubleStream</code>è¿™ä¸‰ç§ä½¿ç”¨åŸºæœ¬ç±»å‹çš„<code>Stream</code>ï¼Œå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å’ŒèŒƒå‹<code>Stream</code>æ²¡æœ‰å¤§çš„åŒºåˆ«ï¼Œè®¾è®¡è¿™ä¸‰ä¸ª<code>Stream</code>çš„ç›®çš„æ˜¯æé«˜è¿è¡Œæ•ˆç‡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å°†int[]æ•°ç»„å˜ä¸ºIntStream:</span>
</span></span><span style="display:flex;"><span>IntStream is = Arrays.<span style="color:#007f7f">stream</span>(<span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">int</span>[] { 1, 2, 3 });
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å°†Stream&lt;String&gt;è½¬æ¢ä¸ºLongStream:</span>
</span></span><span style="display:flex;"><span>LongStream ls = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>).<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">mapToLong</span>(Long::parseLong);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°ç»“-3">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“-3">#</a></h2>
<p>åˆ›å»º<code>Stream</code>çš„æ–¹æ³•æœ‰ ï¼š</p>
<ul>
<li>é€šè¿‡æŒ‡å®šå…ƒç´ ã€æŒ‡å®šæ•°ç»„ã€æŒ‡å®š<code>Collection</code>åˆ›å»º<code>Stream</code>ï¼›</li>
<li>é€šè¿‡<code>Supplier</code>åˆ›å»º<code>Stream</code>ï¼Œå¯ä»¥æ˜¯æ— é™åºåˆ—ï¼›</li>
<li>é€šè¿‡å…¶ä»–ç±»çš„ç›¸å…³æ–¹æ³•åˆ›å»ºã€‚</li>
</ul>
<p>åŸºæœ¬ç±»å‹çš„<code>Stream</code>æœ‰<code>IntStream</code>ã€<code>LongStream</code>å’Œ<code>DoubleStream</code>ã€‚</p>
<h1 id="ä½¿ç”¨-streammap">ä½¿ç”¨ Stream.map()<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-streammap">#</a></h1>
<p><code>Stream.map()</code>æ˜¯<code>Stream</code>æœ€å¸¸ç”¨çš„ä¸€ä¸ªè½¬æ¢æ–¹æ³•ï¼Œå®ƒæŠŠä¸€ä¸ª<code>Stream</code>è½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Stream</code>ã€‚</p>
<p>æ‰€è°“<code>map</code>æ“ä½œï¼Œå°±æ˜¯æŠŠä¸€ç§æ“ä½œè¿ç®—ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªåºåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä¾‹å¦‚ï¼Œå¯¹<code>x</code>è®¡ç®—å®ƒçš„å¹³æ–¹ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°<code>f(x) = x * x</code>ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªåºåˆ—1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ä¸Šï¼Œå°±å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ—1ï¼Œ4ï¼Œ9ï¼Œ16ï¼Œ25ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>            f(x) = x * x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                  â”‚
</span></span><span style="display:flex;"><span>                  â”‚
</span></span><span style="display:flex;"><span>  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
</span></span><span style="display:flex;"><span>  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
</span></span><span style="display:flex;"><span>  â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[ 1   2   3   4   5   6   7   8   9 ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
</span></span><span style="display:flex;"><span>  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
</span></span><span style="display:flex;"><span>  â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[ 1   4   9  16  25  36  49  64  81 ]
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è§ï¼Œ<code>map</code>æ“ä½œï¼ŒæŠŠä¸€ä¸ª<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”åˆ°åº”ç”¨äº†ç›®æ ‡å‡½æ•°çš„ç»“æœä¸Šã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;Integer&gt; s = Stream.<span style="color:#007f7f">of</span>(1, 2, 3, 4, 5);
</span></span><span style="display:flex;"><span>Stream&lt;Integer&gt; s2 = s.<span style="color:#007f7f">map</span>(n -&gt; n * n);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæˆ‘ä»¬æŸ¥çœ‹<code>Stream</code>çš„æºç ï¼Œä¼šå‘ç°<code>map()</code>æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯<code>Function</code>æ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª<code>apply()</code>æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸€ä¸ª<code>T</code>ç±»å‹è½¬æ¢æˆ<code>R</code>ç±»å‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;<span style="color:#f00">?</span> super T, <span style="color:#f00">?</span> <span style="color:#fff;font-weight:bold">extends</span> R&gt; mapper);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ï¼Œ<code>Function</code>çš„å®šä¹‰æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span>public interface Function&lt;T, R&gt; {
</span></span><span style="display:flex;"><span>    // å°†Tç±»å‹è½¬æ¢ä¸ºR:
</span></span><span style="display:flex;"><span>    R apply(T t);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ©ç”¨<code>map()</code>ï¼Œä¸ä½†èƒ½å®Œæˆæ•°å­¦è®¡ç®—ï¼Œå¯¹äºå­—ç¬¦ä¸²æ“ä½œï¼Œä»¥åŠä»»ä½•Javaå¯¹è±¡éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;  Apple &#34;</span>, <span style="color:#0ff;font-weight:bold">&#34; pear &#34;</span>, <span style="color:#0ff;font-weight:bold">&#34; ORANGE&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34; BaNaNa &#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">map</span>(String::trim) <span style="color:#007f7f">// å»ç©ºæ ¼</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">map</span>(String::toLowerCase) <span style="color:#007f7f">// å˜å°å†™</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println); <span style="color:#007f7f">// æ‰“å°</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡è‹¥å¹²æ­¥<code>map</code>è½¬æ¢ï¼Œå¯ä»¥å†™å‡ºé€»è¾‘ç®€å•ã€æ¸…æ™°çš„ä»£ç ã€‚</p>
<h1 id="ä½¿ç”¨filter">ä½¿ç”¨filter<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨filter">#</a></h1>
<p><code>Stream.filter()</code>æ˜¯<code>Stream</code>çš„å¦ä¸€ä¸ªå¸¸ç”¨è½¬æ¢æ–¹æ³•ã€‚</p>
<p>æ‰€è°“<code>filter()</code>æ“ä½œï¼Œå°±æ˜¯å¯¹ä¸€ä¸ª<code>Stream</code>çš„æ‰€æœ‰å…ƒç´ ä¸€ä¸€è¿›è¡Œæµ‹è¯•ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„å°±è¢«â€œæ»¤æ‰â€äº†ï¼Œå‰©ä¸‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ å°±æ„æˆäº†ä¸€ä¸ªæ–°çš„<code>Stream</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5è¿™ä¸ª<code>Stream</code>è°ƒç”¨<code>filter()</code>ï¼Œä¼ å…¥çš„æµ‹è¯•å‡½æ•°<code>f(x) = x % 2 != 0</code>ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯å¥‡æ•°ï¼Œè¿™æ ·å°±è¿‡æ»¤æ‰å¶æ•°ï¼Œåªå‰©ä¸‹å¥‡æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†å¦ä¸€ä¸ªåºåˆ—1ï¼Œ3ï¼Œ5ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>            f(x) = x % 2 != 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                  â”‚
</span></span><span style="display:flex;"><span>                  â”‚
</span></span><span style="display:flex;"><span>  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
</span></span><span style="display:flex;"><span>  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
</span></span><span style="display:flex;"><span>  â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[ 1   2   3   4   5   6   7   8   9 ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  â”‚   X   â”‚   X   â”‚   X   â”‚   X   â”‚
</span></span><span style="display:flex;"><span>  â”‚       â”‚       â”‚       â”‚       â”‚
</span></span><span style="display:flex;"><span>  â–¼       â–¼       â–¼       â–¼       â–¼
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[ 1       3       5       7       9 ]
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨IntStreamå†™å‡ºä¸Šè¿°é€»è¾‘ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        IntStream.<span style="color:#007f7f">of</span>(1, 2, 3, 4, 5, 6, 7, 8, 9)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">filter</span>(n -&gt; n % 2 != 0)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ç»“æœå¯çŸ¥ï¼Œç»è¿‡<code>filter()</code>åç”Ÿæˆçš„<code>Stream</code>å…ƒç´ å¯èƒ½å˜å°‘ã€‚</p>
<p><code>filter()</code>æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯<code>Predicate</code>æ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª<code>test()</code>æ–¹æ³•ï¼Œè´Ÿè´£åˆ¤æ–­å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Predicate&lt;T&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ¤æ–­å…ƒç´ tæ˜¯å¦ç¬¦åˆæ¡ä»¶:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> test(T t);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>filter()</code>é™¤äº†å¸¸ç”¨äºæ•°å€¼å¤–ï¼Œä¹Ÿå¯åº”ç”¨äºä»»ä½•Javaå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ç»„ç»™å®šçš„<code>LocalDate</code>ä¸­è¿‡æ»¤æ‰å·¥ä½œæ—¥ï¼Œä»¥ä¾¿å¾—åˆ°ä¼‘æ¯æ—¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream.<span style="color:#007f7f">generate</span>(<span style="color:#fff;font-weight:bold">new</span> LocalDateSupplier())
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">limit</span>(31)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">filter</span>(ldt -&gt; ldt.<span style="color:#007f7f">getDayOfWeek</span>() == DayOfWeek.<span style="color:#007f7f">SATURDAY</span> 
</span></span><span style="display:flex;"><span>                    || ldt.<span style="color:#007f7f">getDayOfWeek</span>() == DayOfWeek.<span style="color:#007f7f">SUNDAY</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> LocalDateSupplier <span style="color:#fff;font-weight:bold">implements</span> Supplier&lt;LocalDate&gt; {
</span></span><span style="display:flex;"><span>    LocalDate start = LocalDate.<span style="color:#007f7f">of</span>(2020, 1, 1);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> n = -1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> LocalDate get() {
</span></span><span style="display:flex;"><span>        n++;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> start.<span style="color:#007f7f">plusDays</span>(n);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ä½¿ç”¨reduce">ä½¿ç”¨reduce<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨reduce">#</a></h1>
<p><code>map()</code>å’Œ<code>filter()</code>éƒ½æ˜¯<code>Stream</code>çš„è½¬æ¢æ–¹æ³•ï¼Œè€Œ<code>Stream.reduce()</code>åˆ™æ˜¯<code>Stream</code>çš„ä¸€ä¸ªèšåˆæ–¹æ³•ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ª<code>Stream</code>çš„æ‰€æœ‰å…ƒç´ æŒ‰ç…§èšåˆå‡½æ•°èšåˆæˆä¸€ä¸ªç»“æœã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„èšåˆæ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> sum = Stream.<span style="color:#007f7f">of</span>(1, 2, 3, 4, 5, 6, 7, 8, 9).<span style="color:#007f7f">reduce</span>(0, (acc, n) -&gt; acc + n);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(sum); <span style="color:#007f7f">// 45</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>reduce()</code>æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡æ˜¯<code>BinaryOperator</code>æ¥å£ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª<code>apply()</code>æ–¹æ³•ï¼Œè´Ÿè´£æŠŠä¸Šæ¬¡ç´¯åŠ çš„ç»“æœå’Œæœ¬æ¬¡çš„å…ƒç´  è¿›è¡Œè¿ç®—ï¼Œå¹¶è¿”å›ç´¯åŠ çš„ç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> BinaryOperator&lt;T&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Biæ“ä½œï¼šä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º</span>
</span></span><span style="display:flex;"><span>    T apply(T t, T u);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°ä»£ç çœ‹ä¸Šå»ä¸å¥½ç†è§£ï¼Œä½†æˆ‘ä»¬ç”¨<code>for</code>å¾ªç¯æ”¹å†™ä¸€ä¸‹ï¼Œå°±å®¹æ˜“ç†è§£äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;Integer&gt; stream = ...
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> sum = 0;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (n : stream) {
</span></span><span style="display:flex;"><span>    sum = (sum, n) -&gt; sum + n;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è§ï¼Œ<code>reduce()</code>æ“ä½œé¦–å…ˆåˆå§‹åŒ–ç»“æœä¸ºæŒ‡å®šå€¼ï¼ˆè¿™é‡Œæ˜¯0ï¼‰ï¼Œç´§æ¥ç€ï¼Œ<code>reduce()</code>å¯¹æ¯ä¸ªå…ƒç´ ä¾æ¬¡è°ƒç”¨<code>(acc, n) -&gt; acc + n</code>ï¼Œå…¶ä¸­ï¼Œ<code>acc</code>æ˜¯ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// è®¡ç®—è¿‡ç¨‹:</span>
</span></span><span style="display:flex;"><span>acc = 0 <span style="color:#007f7f">// åˆå§‹åŒ–ä¸ºæŒ‡å®šå€¼</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 0 + 1 = 1 <span style="color:#007f7f">// n = 1</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 1 + 2 = 3 <span style="color:#007f7f">// n = 2</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 3 + 3 = 6 <span style="color:#007f7f">// n = 3</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 6 + 4 = 10 <span style="color:#007f7f">// n = 4</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 10 + 5 = 15 <span style="color:#007f7f">// n = 5</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 15 + 6 = 21 <span style="color:#007f7f">// n = 6</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 21 + 7 = 28 <span style="color:#007f7f">// n = 7</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 28 + 8 = 36 <span style="color:#007f7f">// n = 8</span>
</span></span><span style="display:flex;"><span>acc = acc + n = 36 + 9 = 45 <span style="color:#007f7f">// n = 9</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› æ­¤ï¼Œå®é™…ä¸Šè¿™ä¸ª<code>reduce()</code>æ“ä½œæ˜¯ä¸€ä¸ªæ±‚å’Œã€‚</p>
<p>å¦‚æœå»æ‰åˆå§‹å€¼ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª<code>Optional&lt;Integer&gt;</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Optional&lt;Integer&gt; opt = stream.<span style="color:#007f7f">reduce</span>((acc, n) -&gt; acc + n);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (opt.<span style="color:#007f7f">isPresent</span>()) {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(opt.<span style="color:#007f7f">get</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ˜¯å› ä¸º<code>Stream</code>çš„å…ƒç´ æœ‰å¯èƒ½æ˜¯0ä¸ªï¼Œè¿™æ ·å°±æ²¡æ³•è°ƒç”¨<code>reduce()</code>çš„èšåˆå‡½æ•°äº†ï¼Œå› æ­¤è¿”å›<code>Optional</code>å¯¹è±¡ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­ç»“æœæ˜¯å¦å­˜åœ¨ã€‚</p>
<p>åˆ©ç”¨reduce()ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ±‚å’Œæ”¹æˆæ±‚ç§¯ï¼Œä»£ç ä¹Ÿååˆ†ç®€å•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> s = Stream.<span style="color:#007f7f">of</span>(1, 2, 3, 4, 5, 6, 7, 8, 9).<span style="color:#007f7f">reduce</span>(1, (acc, n) -&gt; acc * n);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s); <span style="color:#007f7f">// 362880</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šè®¡ç®—æ±‚ç§¯æ—¶ï¼Œåˆå§‹å€¼å¿…é¡»è®¾ç½®ä¸º<code>1</code>ã€‚</p>
<p>é™¤äº†å¯ä»¥å¯¹æ•°å€¼è¿›è¡Œç´¯ç§¯è®¡ç®—å¤–ï¼Œçµæ´»è¿ç”¨<code>reduce()</code>ä¹Ÿå¯ä»¥å¯¹Javaå¯¹è±¡è¿›è¡Œæ“ä½œã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†é…ç½®æ–‡ä»¶çš„æ¯ä¸€è¡Œé…ç½®é€šè¿‡<code>map()</code>å’Œ<code>reduce()</code>æ“ä½œèšåˆæˆä¸€ä¸ª<code>Map&lt;String, String&gt;</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŒ‰è¡Œè¯»å–é…ç½®æ–‡ä»¶:</span>
</span></span><span style="display:flex;"><span>        List&lt;String&gt; props = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;profile=native&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;debug=true&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;logging=warn&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;interval=500&#34;</span>);
</span></span><span style="display:flex;"><span>        Map&lt;String, String&gt; map = props.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æŠŠk=vè½¬æ¢ä¸ºMap[k]=v:</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">map</span>(kv -&gt; {
</span></span><span style="display:flex;"><span>                String[] ss = kv.<span style="color:#007f7f">split</span>(<span style="color:#0ff;font-weight:bold">&#34;\\=&#34;</span>, 2);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> Map.<span style="color:#007f7f">of</span>(ss[0], ss[1]);
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æŠŠæ‰€æœ‰Mapèšåˆåˆ°ä¸€ä¸ªMap:</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">reduce</span>(<span style="color:#fff;font-weight:bold">new</span> HashMap&lt;String, String&gt;(), (m, kv) -&gt; {
</span></span><span style="display:flex;"><span>                m.<span style="color:#007f7f">putAll</span>(kv);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> m;
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ‰“å°ç»“æœ:</span>
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">forEach</span>((k, v) -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(k + <span style="color:#0ff;font-weight:bold">&#34; = &#34;</span> + v);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°ç»“-4">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“-4">#</a></h2>
<p><code>reduce()</code>æ–¹æ³•å°†ä¸€ä¸ª<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ ä¾æ¬¡ä½œç”¨äº<code>BinaryOperator</code>ï¼Œå¹¶å°†ç»“æœåˆå¹¶ã€‚</p>
<p><code>reduce()</code>æ˜¯èšåˆæ–¹æ³•ï¼Œèšåˆæ–¹æ³•ä¼šç«‹åˆ»å¯¹<code>Stream</code>è¿›è¡Œè®¡ç®—ã€‚</p>
<h1 id="è¾“å‡ºé›†åˆ">è¾“å‡ºé›†åˆ<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºé›†åˆ">#</a></h1>
<p>æˆ‘ä»¬ä»‹ç»äº†<code>Stream</code>çš„å‡ ä¸ªå¸¸è§æ“ä½œï¼š<code>map()</code>ã€<code>filter()</code>ã€<code>reduce()</code>ã€‚è¿™äº›æ“ä½œå¯¹<code>Stream</code>æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯è½¬æ¢æ“ä½œï¼Œå³æŠŠä¸€ä¸ª<code>Stream</code>è½¬æ¢ä¸ºå¦ä¸€ä¸ª<code>Stream</code>ï¼Œä¾‹å¦‚<code>map()</code>å’Œ<code>filter()</code>ï¼Œå¦ä¸€ç±»æ˜¯èšåˆæ“ä½œï¼Œå³å¯¹<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªç¡®å®šçš„ç»“æœï¼Œä¾‹å¦‚<code>reduce()</code>ã€‚</p>
<p>åŒºåˆ†è¿™ä¸¤ç§æ“ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå¯¹äº<code>Stream</code>æ¥è¯´ï¼Œå¯¹å…¶è¿›è¡Œè½¬æ¢æ“ä½œ<em>å¹¶ä¸ä¼šè§¦å‘ä»»ä½•è®¡ç®—</em>ï¼æˆ‘ä»¬å¯ä»¥åšä¸ªå®éªŒï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;Long&gt; s1 = Stream.<span style="color:#007f7f">generate</span>(<span style="color:#fff;font-weight:bold">new</span> NatualSupplier());
</span></span><span style="display:flex;"><span>        Stream&lt;Long&gt; s2 = s1.<span style="color:#007f7f">map</span>(n -&gt; n * n);
</span></span><span style="display:flex;"><span>        Stream&lt;Long&gt; s3 = s2.<span style="color:#007f7f">map</span>(n -&gt; n - 1);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s3); <span style="color:#007f7f">// java.util.stream.ReferencePipeline$3@49476842</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> NatualSupplier <span style="color:#fff;font-weight:bold">implements</span> Supplier&lt;Long&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">long</span> n = 0;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Long get() {
</span></span><span style="display:flex;"><span>        n++;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸º<code>s1</code>æ˜¯ä¸€ä¸ª<code>Long</code>ç±»å‹çš„åºåˆ—ï¼Œå®ƒçš„å…ƒç´ é«˜è¾¾922äº¿äº¿ä¸ªï¼Œä½†æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œæ—¢ä¸ä¼šæœ‰ä»»ä½•å†…å­˜å¢é•¿ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•è®¡ç®—ï¼Œå› ä¸ºè½¬æ¢æ“ä½œåªæ˜¯ä¿å­˜äº†è½¬æ¢è§„åˆ™ï¼Œæ— è®ºæˆ‘ä»¬å¯¹ä¸€ä¸ª<code>Stream</code>è½¬æ¢å¤šå°‘æ¬¡ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•å®é™…è®¡ç®—å‘ç”Ÿã€‚</p>
<p>è€Œèšåˆæ“ä½œåˆ™ä¸ä¸€æ ·ï¼Œèšåˆæ“ä½œä¼šç«‹åˆ»ä¿ƒä½¿<code>Stream</code>è¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¾æ¬¡çº³å…¥è®¡ç®—ï¼Œä»¥è·å¾—æœ€ç»ˆç»“æœã€‚æ‰€ä»¥ï¼Œå¯¹ä¸€ä¸ª<code>Stream</code>è¿›è¡Œèšåˆæ“ä½œï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—è¿é”ååº”ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;Long&gt; s1 = Stream.<span style="color:#007f7f">generate</span>(<span style="color:#fff;font-weight:bold">new</span> NatualSupplier());
</span></span><span style="display:flex;"><span>Stream&lt;Long&gt; s2 = s1.<span style="color:#007f7f">map</span>(n -&gt; n * n);
</span></span><span style="display:flex;"><span>Stream&lt;Long&gt; s3 = s2.<span style="color:#007f7f">map</span>(n -&gt; n - 1);
</span></span><span style="display:flex;"><span>Stream&lt;Long&gt; s4 = s3.<span style="color:#007f7f">limit</span>(10);
</span></span><span style="display:flex;"><span>s4.<span style="color:#007f7f">reduce</span>(0, (acc, n) -&gt; acc + n);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯¹<code>s4</code>è¿›è¡Œ<code>reduce()</code>èšåˆè®¡ç®—ï¼Œä¼šä¸æ–­è¯·æ±‚<code>s4</code>è¾“å‡ºå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚å› ä¸º<code>s4</code>çš„ä¸Šæ¸¸æ˜¯<code>s3</code>ï¼Œå®ƒåˆä¼šå‘<code>s3</code>è¯·æ±‚å…ƒç´ ï¼Œå¯¼è‡´<code>s3</code>å‘<code>s2</code>è¯·æ±‚å…ƒç´ ï¼Œ<code>s2</code>å‘<code>s1</code>è¯·æ±‚å…ƒç´ ï¼Œæœ€ç»ˆï¼Œ<code>s1</code>ä»<code>Supplier</code>å®ä¾‹ä¸­è¯·æ±‚åˆ°çœŸæ­£çš„å…ƒç´ ï¼Œå¹¶ç»è¿‡ä¸€ç³»åˆ—è½¬æ¢ï¼Œæœ€ç»ˆè¢«<code>reduce()</code>èšåˆå‡ºç»“æœã€‚</p>
<p>å¯è§ï¼Œèšåˆæ“ä½œæ˜¯çœŸæ­£éœ€è¦ä»<code>Stream</code>è¯·æ±‚æ•°æ®çš„ï¼Œå¯¹ä¸€ä¸ª<code>Stream</code>åšèšåˆè®¡ç®—åï¼Œç»“æœå°±ä¸æ˜¯ä¸€ä¸ª<code>Stream</code>ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¶ä»–çš„Javaå¯¹è±¡ã€‚</p>
<h2 id="è¾“å‡ºä¸ºlist">è¾“å‡ºä¸ºList<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºä¸ºlist">#</a></h2>
<p><code>reduce()</code>åªæ˜¯ä¸€ç§èšåˆæ“ä½œï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æŠŠ<code>Stream</code>çš„å…ƒç´ ä¿å­˜åˆ°é›†åˆï¼Œä¾‹å¦‚<code>List</code>ï¼Œå› ä¸º<code>List</code>çš„å…ƒç´ æ˜¯ç¡®å®šçš„Javaå¯¹è±¡ï¼Œå› æ­¤ï¼ŒæŠŠ<code>Stream</code>å˜ä¸º<code>List</code>ä¸æ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªèšåˆæ“ä½œï¼Œå®ƒä¼šå¼ºåˆ¶<code>Stream</code>è¾“å‡ºæ¯ä¸ªå…ƒç´ ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†ä¸€ç»„<code>String</code>å…ˆè¿‡æ»¤æ‰ç©ºå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠéç©ºå­—ç¬¦ä¸²ä¿å­˜åˆ°<code>List</code>ä¸­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;String&gt; stream = Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;Pear&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;  &#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>);
</span></span><span style="display:flex;"><span>        List&lt;String&gt; list = stream
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">filter</span>(s -&gt; s != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; !s.<span style="color:#007f7f">isBlank</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(list);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠ<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°<code>List</code>çš„æ–¹æ³•æ˜¯è°ƒç”¨<code>collect()</code>å¹¶ä¼ å…¥<code>Collectors.toList()</code>å¯¹è±¡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>Collector</code>å®ä¾‹ï¼Œé€šè¿‡ç±»ä¼¼<code>reduce()</code>çš„æ“ä½œï¼ŒæŠŠæ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ”¶é›†å™¨ä¸­ï¼ˆå®é™…ä¸Šæ˜¯<code>ArrayList</code>ï¼‰ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œ<code>collect(Collectors.toSet())</code>å¯ä»¥æŠŠ<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°<code>Set</code>ä¸­ã€‚</p>
<h2 id="è¾“å‡ºä¸ºæ•°ç»„">è¾“å‡ºä¸ºæ•°ç»„<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºä¸ºæ•°ç»„">#</a></h2>
<p>æŠŠStreamçš„å…ƒç´ è¾“å‡ºä¸ºæ•°ç»„å’Œè¾“å‡ºä¸ºListç±»ä¼¼ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨<code>toArray()</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ•°ç»„çš„â€œæ„é€ æ–¹æ³•â€ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;String&gt; list = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>);
</span></span><span style="display:flex;"><span>String[] array = list.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">toArray</span>(String[]::<span style="color:#fff;font-weight:bold">new</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°ä¼ å…¥çš„â€œæ„é€ æ–¹æ³•â€æ˜¯<code>String[]::new</code>ï¼Œå®ƒçš„ç­¾åå®é™…ä¸Šæ˜¯<code>IntFunction&lt;String[]&gt;</code>å®šä¹‰çš„<code>String[] apply(int)</code>ï¼Œå³ä¼ å…¥<code>int</code>å‚æ•°ï¼Œè·å¾—<code>String[]</code>æ•°ç»„çš„è¿”å›å€¼ã€‚</p>
<h2 id="è¾“å‡ºä¸ºmap">è¾“å‡ºä¸ºMap<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºä¸ºmap">#</a></h2>
<p>å¦‚æœæˆ‘ä»¬è¦æŠŠStreamçš„å…ƒç´ æ”¶é›†åˆ°Mapä¸­ï¼Œå°±ç¨å¾®éº»çƒ¦ä¸€ç‚¹ã€‚å› ä¸ºå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ·»åŠ åˆ°Mapæ—¶éœ€è¦keyå’Œvalueï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¦æŒ‡å®šä¸¤ä¸ªæ˜ å°„å‡½æ•°ï¼Œåˆ†åˆ«æŠŠå…ƒç´ æ˜ å°„ä¸ºkeyå’Œvalueï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Stream&lt;String&gt; stream = Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;APPL:Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;MSFT:Microsoft&#34;</span>);
</span></span><span style="display:flex;"><span>        Map&lt;String, String&gt; map = stream
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æŠŠå…ƒç´ sæ˜ å°„ä¸ºkey:</span>
</span></span><span style="display:flex;"><span>                s -&gt; s.<span style="color:#007f7f">substring</span>(0, s.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#39;:&#39;</span>)),
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// æŠŠå…ƒç´ sæ˜ å°„ä¸ºvalue:</span>
</span></span><span style="display:flex;"><span>                s -&gt; s.<span style="color:#007f7f">substring</span>(s.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#39;:&#39;</span>) + 1)));
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åˆ†ç»„è¾“å‡º">åˆ†ç»„è¾“å‡º<a hidden class="anchor" aria-hidden="true" href="#åˆ†ç»„è¾“å‡º">#</a></h2>
<p><code>Stream</code>è¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„åˆ†ç»„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç»„è¾“å‡ºã€‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        List&lt;String&gt; list = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Blackberry&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Coconut&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Avocado&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Cherry&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Apricots&#34;</span>);
</span></span><span style="display:flex;"><span>        Map&lt;String, List&lt;String&gt;&gt; groups = list.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(s -&gt; s.<span style="color:#007f7f">substring</span>(0, 1), Collectors.<span style="color:#007f7f">toList</span>()));
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(groups);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ†ç»„è¾“å‡ºä½¿ç”¨<code>Collectors.groupingBy()</code>ï¼Œå®ƒéœ€è¦æä¾›ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯åˆ†ç»„çš„keyï¼Œè¿™é‡Œä½¿ç”¨<code>s -&gt; s.substring(0, 1)</code>ï¼Œè¡¨ç¤ºåªè¦é¦–å­—æ¯ç›¸åŒçš„<code>String</code>åˆ†åˆ°ä¸€ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯åˆ†ç»„çš„valueï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨<code>Collectors.toList()</code>ï¼Œè¡¨ç¤ºè¾“å‡ºä¸º<code>List</code>ï¼Œä¸Šè¿°ä»£ç è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    A=[Apple, Avocado, Apricots],
</span></span><span style="display:flex;"><span>    B=[Banana, Blackberry],
</span></span><span style="display:flex;"><span>    C=[Coconut, Cherry]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è§ï¼Œç»“æœä¸€å…±æœ‰3ç»„ï¼ŒæŒ‰<code>&quot;A&quot;</code>ï¼Œ<code>&quot;B&quot;</code>ï¼Œ<code>&quot;C&quot;</code>åˆ†ç»„ï¼Œæ¯ä¸€ç»„éƒ½æ˜¯ä¸€ä¸ª<code>List</code>ã€‚</p>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª<code>Student</code>ç±»ï¼ŒåŒ…å«å­¦ç”Ÿå§“åã€ç­çº§å’Œæˆç»©ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Student {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> gradeId; <span style="color:#007f7f">// å¹´çº§</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> classId; <span style="color:#007f7f">// ç­çº§</span>
</span></span><span style="display:flex;"><span>    String name; <span style="color:#007f7f">// åå­—</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> score; <span style="color:#007f7f">// åˆ†æ•°</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>Stream&lt;Student&gt;</code>ï¼Œåˆ©ç”¨åˆ†ç»„è¾“å‡ºï¼Œå¯ä»¥éå¸¸ç®€å•åœ°æŒ‰å¹´çº§æˆ–ç­çº§æŠŠ<code>Student</code>å½’ç±»ã€‚</p>
<h1 id="å…¶ä»–æ“ä½œ">å…¶ä»–æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#å…¶ä»–æ“ä½œ">#</a></h1>
<p>æˆ‘ä»¬æŠŠ<code>Stream</code>æä¾›çš„æ“ä½œåˆ†ä¸ºä¸¤ç±»ï¼šè½¬æ¢æ“ä½œå’Œèšåˆæ“ä½œã€‚é™¤äº†å‰é¢ä»‹ç»çš„å¸¸ç”¨æ“ä½œå¤–ï¼Œ<code>Stream</code>è¿˜æä¾›äº†ä¸€ç³»åˆ—éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚</p>
<h2 id="æ’åº">æ’åº<a hidden class="anchor" aria-hidden="true" href="#æ’åº">#</a></h2>
<p>å¯¹<code>Stream</code>çš„å…ƒç´ è¿›è¡Œæ’åºååˆ†ç®€å•ï¼Œåªéœ€è°ƒç”¨<code>sorted()</code>æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        List&lt;String&gt; list = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">sorted</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(list);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ–¹æ³•è¦æ±‚<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ å¿…é¡»å®ç°<code>Comparable</code>æ¥å£ã€‚å¦‚æœè¦è‡ªå®šä¹‰æ’åºï¼Œä¼ å…¥æŒ‡å®šçš„<code>Comparator</code>å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;String&gt; list = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;Orange&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;apple&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Banana&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>(String::compareToIgnoreCase)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„<code>sorted()</code>åªæ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„<code>Stream</code>ã€‚</p>
<h2 id="å»é‡">å»é‡<a hidden class="anchor" aria-hidden="true" href="#å»é‡">#</a></h2>
<p>å¯¹ä¸€ä¸ª<code>Stream</code>çš„å…ƒç´ è¿›è¡Œå»é‡ï¼Œæ²¡å¿…è¦å…ˆè½¬æ¢ä¸º<code>Set</code>ï¼Œå¯ä»¥ç›´æ¥ç”¨<code>distinct()</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;D&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">distinct</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>()); <span style="color:#007f7f">// [A, B, C, D]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æˆªå–">æˆªå–<a hidden class="anchor" aria-hidden="true" href="#æˆªå–">#</a></h2>
<p>æˆªå–æ“ä½œå¸¸ç”¨äºæŠŠä¸€ä¸ªæ— é™çš„<code>Stream</code>è½¬æ¢æˆæœ‰é™çš„<code>Stream</code>ï¼Œ<code>skip()</code>ç”¨äºè·³è¿‡å½“å‰<code>Stream</code>çš„å‰Nä¸ªå…ƒç´ ï¼Œ<code>limit()</code>ç”¨äºæˆªå–å½“å‰<code>Stream</code>æœ€å¤šå‰Nä¸ªå…ƒç´ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;D&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;E&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;F&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">skip</span>(2) <span style="color:#007f7f">// è·³è¿‡A, B</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">limit</span>(3) <span style="color:#007f7f">// æˆªå–C, D, E</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>()); <span style="color:#007f7f">// [C, D, E]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆªå–æ“ä½œä¹Ÿæ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå°†è¿”å›æ–°çš„<code>Stream</code>ã€‚</p>
<h2 id="åˆå¹¶">åˆå¹¶<a hidden class="anchor" aria-hidden="true" href="#åˆå¹¶">#</a></h2>
<p>å°†ä¸¤ä¸ª<code>Stream</code>åˆå¹¶ä¸ºä¸€ä¸ª<code>Stream</code>å¯ä»¥ä½¿ç”¨<code>Stream</code>çš„é™æ€æ–¹æ³•<code>concat()</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;String&gt; s1 = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>).<span style="color:#007f7f">stream</span>();
</span></span><span style="display:flex;"><span>Stream&lt;String&gt; s2 = List.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;D&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;E&#34;</span>).<span style="color:#007f7f">stream</span>();
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// åˆå¹¶:</span>
</span></span><span style="display:flex;"><span>Stream&lt;String&gt; s = Stream.<span style="color:#007f7f">concat</span>(s1, s2);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s.<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>())); <span style="color:#007f7f">// [A, B, C, D, E]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="flatmap">flatMap<a hidden class="anchor" aria-hidden="true" href="#flatmap">#</a></h2>
<p>å¦‚æœ<code>Stream</code>çš„å…ƒç´ æ˜¯é›†åˆï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;List&lt;Integer&gt;&gt; s = Stream.<span style="color:#007f7f">of</span>(
</span></span><span style="display:flex;"><span>    Arrays.<span style="color:#007f7f">asList</span>(1, 2, 3),
</span></span><span style="display:flex;"><span>    Arrays.<span style="color:#007f7f">asList</span>(4, 5, 6),
</span></span><span style="display:flex;"><span>    Arrays.<span style="color:#007f7f">asList</span>(7, 8, 9));
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€Œæˆ‘ä»¬å¸Œæœ›æŠŠä¸Šè¿°<code>Stream</code>è½¬æ¢ä¸º<code>Stream&lt;Integer&gt;</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>flatMap()</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;Integer&gt; i = s.<span style="color:#007f7f">flatMap</span>(list -&gt; list.<span style="color:#007f7f">stream</span>());
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› æ­¤ï¼Œæ‰€è°“<code>flatMap()</code>ï¼Œæ˜¯æŒ‡æŠŠ<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ ï¼ˆè¿™é‡Œæ˜¯<code>List</code>ï¼‰æ˜ å°„ä¸º<code>Stream</code>ï¼Œç„¶ååˆå¹¶æˆä¸€ä¸ªæ–°çš„<code>Stream</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚
</span></span><span style="display:flex;"><span>â”‚â”‚ 1 â”‚ 2 â”‚ 3 â”‚â”‚â”‚ 4 â”‚ 5 â”‚ 6 â”‚â”‚â”‚ 7 â”‚ 8 â”‚ 9 â”‚â”‚
</span></span><span style="display:flex;"><span>â”‚â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                     â”‚
</span></span><span style="display:flex;"><span>                     â”‚flatMap(List -&gt; Stream)
</span></span><span style="display:flex;"><span>                     â”‚
</span></span><span style="display:flex;"><span>                     â”‚
</span></span><span style="display:flex;"><span>                     â–¼
</span></span><span style="display:flex;"><span>   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
</span></span><span style="display:flex;"><span>   â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚ 8 â”‚ 9 â”‚
</span></span><span style="display:flex;"><span>   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å¹¶è¡Œ">å¹¶è¡Œ<a hidden class="anchor" aria-hidden="true" href="#å¹¶è¡Œ">#</a></h2>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹<code>Stream</code>çš„å…ƒç´ è¿›è¡Œå¤„ç†æ˜¯å•çº¿ç¨‹çš„ï¼Œå³ä¸€ä¸ªä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¹¶è¡Œå¤„ç†<code>Stream</code>çš„å…ƒç´ ï¼Œå› ä¸ºåœ¨å…ƒç´ æ•°é‡éå¸¸å¤§çš„æƒ…å†µï¼Œå¹¶è¡Œå¤„ç†å¯ä»¥å¤§å¤§åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚</p>
<p>æŠŠä¸€ä¸ªæ™®é€š<code>Stream</code>è½¬æ¢ä¸ºå¯ä»¥å¹¶è¡Œå¤„ç†çš„<code>Stream</code>éå¸¸ç®€å•ï¼Œåªéœ€è¦ç”¨<code>parallel()</code>è¿›è¡Œè½¬æ¢ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;String&gt; s = ...
</span></span><span style="display:flex;"><span>String[] result = s.<span style="color:#007f7f">parallel</span>() <span style="color:#007f7f">// å˜æˆä¸€ä¸ªå¯ä»¥å¹¶è¡Œå¤„ç†çš„Stream</span>
</span></span><span style="display:flex;"><span>                   .<span style="color:#007f7f">sorted</span>() <span style="color:#007f7f">// å¯ä»¥è¿›è¡Œå¹¶è¡Œæ’åº</span>
</span></span><span style="display:flex;"><span>                   .<span style="color:#007f7f">toArray</span>(String[]::<span style="color:#fff;font-weight:bold">new</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»è¿‡<code>parallel()</code>è½¬æ¢åçš„<code>Stream</code>åªè¦å¯èƒ½ï¼Œå°±ä¼šå¯¹åç»­æ“ä½œè¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚æˆ‘ä»¬ä¸éœ€è¦ç¼–å†™ä»»ä½•å¤šçº¿ç¨‹ä»£ç å°±å¯ä»¥äº«å—åˆ°å¹¶è¡Œå¤„ç†å¸¦æ¥çš„æ‰§è¡Œæ•ˆç‡çš„æå‡ã€‚</p>
<h2 id="å…¶ä»–èšåˆæ–¹æ³•">å…¶ä»–èšåˆæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#å…¶ä»–èšåˆæ–¹æ³•">#</a></h2>
<p>é™¤äº†<code>reduce()</code>å’Œ<code>collect()</code>å¤–ï¼Œ<code>Stream</code>è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„èšåˆæ–¹æ³•ï¼š</p>
<ul>
<li><code>count()</code>ï¼šç”¨äºè¿”å›å…ƒç´ ä¸ªæ•°ï¼›</li>
<li><code>max(Comparator&lt;? super T&gt; cp)</code>ï¼šæ‰¾å‡ºæœ€å¤§å…ƒç´ ï¼›</li>
<li><code>min(Comparator&lt;? super T&gt; cp)</code>ï¼šæ‰¾å‡ºæœ€å°å…ƒç´ ã€‚</li>
</ul>
<p>é’ˆå¯¹<code>IntStream</code>ã€<code>LongStream</code>å’Œ<code>DoubleStream</code>ï¼Œè¿˜é¢å¤–æä¾›äº†ä»¥ä¸‹èšåˆæ–¹æ³•ï¼š</p>
<ul>
<li><code>sum()</code>ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å’Œï¼›</li>
<li><code>average()</code>ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å¹³å‡æ•°ã€‚</li>
</ul>
<p>è¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼Œç”¨æ¥æµ‹è¯•<code>Stream</code>çš„å…ƒç´ æ˜¯å¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li><code>boolean allMatch(Predicate&lt;? super T&gt;)</code>ï¼šæµ‹è¯•æ˜¯å¦æ‰€æœ‰å…ƒç´ å‡æ»¡è¶³æµ‹è¯•æ¡ä»¶ï¼›</li>
<li><code>boolean anyMatch(Predicate&lt;? super T&gt;)</code>ï¼šæµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æµ‹è¯•æ¡ä»¶ã€‚</li>
</ul>
<p>æœ€åä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ˜¯<code>forEach()</code>ï¼Œå®ƒå¯ä»¥å¾ªç¯å¤„ç†<code>Stream</code>çš„æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ç»å¸¸ä¼ å…¥<code>System.out::println</code>æ¥æ‰“å°<code>Stream</code>çš„å…ƒç´ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;String&gt; s = ...
</span></span><span style="display:flex;"><span>s.<span style="color:#007f7f">forEach</span>(str -&gt; {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello, &#34;</span> + str);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°ç»“-5">å°ç»“<a hidden class="anchor" aria-hidden="true" href="#å°ç»“-5">#</a></h2>
<p><code>Stream</code>æä¾›çš„å¸¸ç”¨æ“ä½œæœ‰ï¼š</p>
<p>è½¬æ¢æ“ä½œï¼š<code>map()</code>ï¼Œ<code>filter()</code>ï¼Œ<code>sorted()</code>ï¼Œ<code>distinct()</code>ï¼›</p>
<p>åˆå¹¶æ“ä½œï¼š<code>concat()</code>ï¼Œ<code>flatMap()</code>ï¼›</p>
<p>å¹¶è¡Œå¤„ç†ï¼š<code>parallel()</code>ï¼›</p>
<p>èšåˆæ“ä½œï¼š<code>reduce()</code>ï¼Œ<code>collect()</code>ï¼Œ<code>count()</code>ï¼Œ<code>max()</code>ï¼Œ<code>min()</code>ï¼Œ<code>sum()</code>ï¼Œ<code>average()</code>ï¼›</p>
<p>å…¶ä»–æ“ä½œï¼š<code>allMatch()</code>, <code>anyMatch()</code>, <code>forEach()</code>ã€‚</p>
<h1 id="----------åˆ†å‰²çº¿-----------">&mdash;&mdash;&mdash;-åˆ†å‰²çº¿&mdash;&mdash;&mdash;&ndash;<a hidden class="anchor" aria-hidden="true" href="#----------åˆ†å‰²çº¿-----------">#</a></h1>
<h1 id="lambdaè¡¨è¾¾å¼-1">Lambdaè¡¨è¾¾å¼<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼-1">#</a></h1>
<h2 id="lambdaè¡¨è¾¾å¼çš„è¯­æ³•">Lambdaè¡¨è¾¾å¼çš„è¯­æ³•<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼çš„è¯­æ³•">#</a></h2>
<p>åŸºæœ¬è¯­æ³•:<br>
(parameters) -&gt; expression<br>
æˆ–<br>
(parameters) -&gt;{ statements; }</p>
<p>Lambdaè¡¨è¾¾å¼æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒ¿åæ–¹æ³•ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> add(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> x + y;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è½¬æˆLambdaè¡¨è¾¾å¼åæ˜¯è¿™ä¸ªæ ·å­ï¼š<br>
<code>(int x, int y) -&gt; x + y;</code><br>
å‚æ•°ç±»å‹ä¹Ÿå¯ä»¥çœç•¥ï¼ŒJavaç¼–è¯‘å™¨ä¼šæ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥ï¼š<br>
<code>(x, y) -&gt; x + y; //è¿”å›ä¸¤æ•°ä¹‹å’Œ</code><br>
æˆ–è€…<br>
<code>(x, y) -&gt; { return x + y; } //æ˜¾å¼æŒ‡æ˜è¿”å›å€¼</code><br>
å¯è§Lambdaè¡¨è¾¾å¼ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå‚æ•°åˆ—è¡¨ï¼Œç®­å¤´ï¼ˆ-&gt;ï¼‰ï¼Œä»¥åŠä¸€ä¸ªè¡¨è¾¾å¼æˆ–è¯­å¥å—ã€‚</p>
<h2 id="lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ç»“åˆ">Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ç»“åˆ<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£ç»“åˆ">#</a></h2>
<p>æ–°å»ºæ— å‚å‡½æ•°å¼æ¥å£</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> InterfaceWithNoParam {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> run();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–°å»ºåŒ…å«å±æ€§ä¸ºå‡½æ•°å¼æ¥å£çš„ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8{
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°å‡½æ•°å¼æ¥å£</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8{
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//åŒ¿åå†…éƒ¨ç±»</span>
</span></span><span style="display:flex;"><span>	InterfaceWithNoParam param1 = <span style="color:#fff;font-weight:bold">new</span> InterfaceWithNoParam() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡åŒ¿åå†…éƒ¨ç±»å®ç°run()&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//Lambdaè¡¨è¾¾å¼(ç©ºæ‹¬å·è¡¨ç¤ºæ— å‚)</span>
</span></span><span style="display:flex;"><span>	InterfaceWithNoParam param = () -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡Lambdaè¡¨è¾¾å¼å®ç°run()&#34;</span>) ;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•å‡½æ•°å¼æ¥å£çš„æ–¹æ³•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8 {
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param = <span style="color:#fff;font-weight:bold">new</span> InterfaceWithNoParam() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡åŒ¿åå†…éƒ¨ç±»å®ç°run()&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param1 = ()-&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡Lambdaè¡¨è¾¾å¼å®ç°run()&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        TestJava8 testJava8 = <span style="color:#fff;font-weight:bold">new</span> TestJava8();
</span></span><span style="display:flex;"><span>        testJava8.<span style="color:#007f7f">param</span>.<span style="color:#007f7f">run</span>();
</span></span><span style="display:flex;"><span>        testJava8.<span style="color:#007f7f">param1</span>.<span style="color:#007f7f">run</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š<br>
é€šè¿‡åŒ¿åå†…éƒ¨ç±»å®ç°run()<br>
é€šè¿‡Lambdaè¡¨è¾¾å¼å®ç°run()</p>
<h2 id="å…¶ä»–å½¢å¼çš„å‡½æ•°å¼æ¥å£åŠå®ç°">å…¶ä»–å½¢å¼çš„å‡½æ•°å¼æ¥å£åŠå®ç°<a hidden class="anchor" aria-hidden="true" href="#å…¶ä»–å½¢å¼çš„å‡½æ•°å¼æ¥å£åŠå®ç°">#</a></h2>
<p>ä¸Šè¿°å†…å®¹å®ç°äº†æ— å‚æ— è¿”å›å€¼çš„å‡½æ•°æ¥å£ä¸å®ç°ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–å½¢å¼ï¼š</p>
<h3 id="æœ‰å‚æ— è¿”å›å€¼">æœ‰å‚æ— è¿”å›å€¼<a hidden class="anchor" aria-hidden="true" href="#æœ‰å‚æ— è¿”å›å€¼">#</a></h3>
<p>æ¥å£</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> InterfaceWithParams {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> run(String s);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8 {
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param = <span style="color:#fff;font-weight:bold">new</span> InterfaceWithNoParam() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run(String s) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡&#34;</span> + s + <span style="color:#0ff;font-weight:bold">&#34;å®ç°run(String)&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param1 = (s)-&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é€šè¿‡&#34;</span> + s + <span style="color:#0ff;font-weight:bold">&#34;å®ç°run(String)&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        TestJava8 testJava8 = <span style="color:#fff;font-weight:bold">new</span> TestJava8();
</span></span><span style="display:flex;"><span>        testJava8.<span style="color:#007f7f">param</span>.<span style="color:#007f7f">run</span>(<span style="color:#0ff;font-weight:bold">&#34;åŒ¿åå†…éƒ¨ç±»&#34;</span>);
</span></span><span style="display:flex;"><span>        testJava8.<span style="color:#007f7f">param1</span>.<span style="color:#007f7f">run</span>(<span style="color:#0ff;font-weight:bold">&#34;Lambda&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š<br>
é€šè¿‡åŒ¿åå†…éƒ¨ç±»å®ç°run(String)<br>
é€šè¿‡Lambdaå®ç°run(String)</p>
<h3 id="æ— å‚æœ‰è¿”å›å€¼">æ— å‚æœ‰è¿”å›å€¼<a hidden class="anchor" aria-hidden="true" href="#æ— å‚æœ‰è¿”å›å€¼">#</a></h3>
<p>æ¥å£</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> InterfaceUnVoidWithNoParam {
</span></span><span style="display:flex;"><span>    String run();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8 {
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param = <span style="color:#fff;font-weight:bold">new</span> InterfaceWithNoParam() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> String run() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param1 = ()-&gt; <span style="color:#0ff;font-weight:bold">&#34;Hello Lambda!&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        TestJava8 testJava8 = <span style="color:#fff;font-weight:bold">new</span> TestJava8();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(testJava8.<span style="color:#007f7f">param</span>.<span style="color:#007f7f">run</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(testJava8.<span style="color:#007f7f">param1</span>.<span style="color:#007f7f">run</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š<br>
Hello World!<br>
Hello Lambda!</p>
<h3 id="æœ‰å‚æœ‰è¿”å›å€¼">æœ‰å‚æœ‰è¿”å›å€¼<a hidden class="anchor" aria-hidden="true" href="#æœ‰å‚æœ‰è¿”å›å€¼">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>@FunctionalInterface
</span></span><span style="display:flex;"><span>public interface InterfaceWithNoParam {
</span></span><span style="display:flex;"><span>    String run(Integer i);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestJava8 {
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param = <span style="color:#fff;font-weight:bold">new</span> InterfaceWithNoParam() {
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> String run(Integer i) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> String.<span style="color:#007f7f">valueOf</span>(i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    InterfaceWithNoParam param1 = (Integer i)-&gt; String.<span style="color:#007f7f">valueOf</span>(i);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        TestJava8 testJava8 = <span style="color:#fff;font-weight:bold">new</span> TestJava8();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(testJava8.<span style="color:#007f7f">param</span>.<span style="color:#007f7f">run</span>(1));
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(testJava8.<span style="color:#007f7f">param1</span>.<span style="color:#007f7f">run</span>(2));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ:<br>
1<br>
2</p>
<h2 id="å‡ ç§ç®€å•å½¢å¼">å‡ ç§ç®€å•å½¢å¼<a hidden class="anchor" aria-hidden="true" href="#å‡ ç§ç®€å•å½¢å¼">#</a></h2>
<ul>
<li>ä¸éœ€è¦å‚æ•°ï¼Œè¿”å›å€¼ä¸º 5<br>
<code>() -&gt; 5</code></li>
<li>æ¥æ”¶ä¸€ä¸ªå‚æ•°(æ•°å­—ç±»å‹)ï¼Œè¿”å›å…¶2å€çš„å€¼<br>
<code>x -&gt; 2 * x</code></li>
<li>æ¥å—2ä¸ªå‚æ•°(æ•°å­—)ï¼Œå¹¶è¿”å›ä»–ä»¬çš„å·®å€¼<br>
<code>(x, y) -&gt; x â€“ y</code></li>
<li>æ¥æ”¶2ä¸ªintå‹æ•´æ•°ï¼Œè¿”å›ä»–ä»¬çš„å’Œ<br>
<code>(int x, int y) -&gt; x + y</code></li>
<li>æ¥å—ä¸€ä¸ª string å¯¹è±¡ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°ï¼Œä¸è¿”å›ä»»ä½•å€¼(çœ‹èµ·æ¥åƒæ˜¯è¿”å›void)<br>
<code>(String s) -&gt; System.out.print(s)</code></li>
</ul>
<h2 id="åŸºæœ¬çš„lambdaä¾‹å­">åŸºæœ¬çš„Lambdaä¾‹å­<a hidden class="anchor" aria-hidden="true" href="#åŸºæœ¬çš„lambdaä¾‹å­">#</a></h2>
<p>å‡è®¾æœ‰ä¸€ä¸ªç©å®¶Listï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨ forå¾ªç¯æ¥éå†ï¼Œåœ¨Java 8ä¸­å¯ä»¥è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String[] atp = {<span style="color:#0ff;font-weight:bold">&#34;d&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;b&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>};
</span></span><span style="display:flex;"><span>List&lt;String&gt; players =  Arrays.<span style="color:#007f7f">asList</span>(atp);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä»¥å‰çš„å¾ªç¯æ–¹å¼</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (String player : players) {
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">print</span>(player + <span style="color:#0ff;font-weight:bold">&#34;; &#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨lambdaè¡¨è¾¾å¼ä»¥åŠå‡½æ•°æ“ä½œ(functional operation)</span>
</span></span><span style="display:flex;"><span>players.<span style="color:#007f7f">forEach</span>((player) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(player + <span style="color:#0ff;font-weight:bold">&#34;;&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åœ¨JAVA 8 ä¸­ä½¿ç”¨åŒå†’å·æ“ä½œç¬¦(double colon operator)</span>
</span></span><span style="display:flex;"><span>players.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä¸‹é¢æ˜¯ä½¿ç”¨lambdas æ¥å®ç° Runnableæ¥å£ çš„ç¤ºä¾‹:</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.1ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">new</span> Thread(<span style="color:#fff;font-weight:bold">new</span> Runnable() {
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>		System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}).<span style="color:#007f7f">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.2ä½¿ç”¨ lambda expression</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">new</span> Thread(() -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>)).<span style="color:#007f7f">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 2.1ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</span>
</span></span><span style="display:flex;"><span>Runnable race1 = <span style="color:#fff;font-weight:bold">new</span> Runnable() {
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>		System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 2.2ä½¿ç”¨ lambda expression</span>
</span></span><span style="display:flex;"><span>Runnable race2 = () -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç›´æ¥è°ƒç”¨ run æ–¹æ³•(æ²¡å¼€æ–°çº¿ç¨‹å“¦!)</span>
</span></span><span style="display:flex;"><span>race1.<span style="color:#007f7f">run</span>();
</span></span><span style="display:flex;"><span>race2.<span style="color:#007f7f">run</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨lambdaå¯¹é›†åˆè¿›è¡Œæ’åº">ä½¿ç”¨Lambdaå¯¹é›†åˆè¿›è¡Œæ’åº<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨lambdaå¯¹é›†åˆè¿›è¡Œæ’åº">#</a></h2>
<p>åœ¨javaä¸­ï¼ŒComparator ç±»è¢«ç”¨æ¥æ’åºé›†åˆï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®çƒå‘˜çš„ nameï¼Œsurnameï¼Œname é•¿åº¦ä»¥åŠæœ€åä¸€ä¸ªå­—æ¯ã€‚å’Œå‰é¢çš„ç¤ºä¾‹ä¸€æ ·ï¼Œå…ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥æ’åºï¼Œç„¶åå†ä½¿ç”¨lambdaè¡¨è¾¾å¼ç²¾ç®€æˆ‘ä»¬çš„ä»£ç ã€‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®nameæ¥æ’åºlistã€‚ä½¿ç”¨æ—§çš„æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String[] players = {<span style="color:#0ff;font-weight:bold">&#34;Rafael Nadal&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Novak Djokovic&#34;</span>,   
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#34;Stanislas Wawrinka&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;David Ferrer&#34;</span>,  
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#34;Roger Federer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Andy Murray&#34;</span>,  
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#34;Tomas Berdych&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Juan Martin Del Potro&#34;</span>,  
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#34;Richard Gasquet&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;John Isner&#34;</span>};  
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ ¹æ® name æ’åº players  </span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {  
</span></span><span style="display:flex;"><span>    @Override  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">compareTo</span>(s2));  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨lambdaï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç å®ç°åŒæ ·çš„åŠŸèƒ½ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// 1.2 ä½¿ç”¨ lambda è¡¨è¾¾å¼ æ’åº players </span>
</span></span><span style="display:flex;"><span>Comparator&lt;String&gt; sortByName = (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">compareTo</span>(s2)); 
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, sortByName); 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.3 ä¹Ÿå¯ä»¥é‡‡ç”¨å¦‚ä¸‹å½¢å¼: </span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">compareTo</span>(s2)));
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä»–çš„æ’åºå¦‚ä¸‹æ‰€ç¤ºã€‚å’Œä¸Šé¢çš„ç¤ºä¾‹ä¸€æ ·ï¼Œä»£ç åˆ†åˆ«é€šè¿‡åŒ¿åå†…éƒ¨ç±»å’Œä¸€äº›lambdaè¡¨è¾¾å¼æ¥å®ç°Comparatorï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// 1.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ ¹æ® surnameï¼ˆå§“ï¼‰ æ’åº players </span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() { 
</span></span><span style="display:flex;"><span>    @Override 
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) { 
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">substring</span>(s1.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)).<span style="color:#007f7f">compareTo</span>(s2.<span style="color:#007f7f">substring</span>(s2.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>))));  
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}); 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.2 ä½¿ç”¨ lambda expression æ’åº,æ ¹æ® surname </span>
</span></span><span style="display:flex;"><span>Comparator&lt;String&gt; sortBySurname = (String s1, String s2) -&gt;
</span></span><span style="display:flex;"><span>    ( s1.<span style="color:#007f7f">substring</span>(s1.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)).<span style="color:#007f7f">compareTo</span>( s2.<span style="color:#007f7f">substring</span>(s2.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)) ) ); 
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, sortBySurname); 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.3 æˆ–è€…è¿™æ ·</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; 
</span></span><span style="display:flex;"><span>      ( s1.<span style="color:#007f7f">substring</span>(s1.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)).<span style="color:#007f7f">compareTo</span>( s2.<span style="color:#007f7f">substring</span>(s2.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)) ) ) 
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 1.4 æˆ–è€…ä½¿ç”¨comparingä¼˜åŒ–</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, Comparator.<span style="color:#007f7f">comparing</span>((String s) -&gt; s.<span style="color:#007f7f">substring</span>(s.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 2.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ ¹æ® name lenght æ’åº players</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">length</span>() - s2.<span style="color:#007f7f">length</span>());  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 2.2 ä½¿ç”¨ lambda expression æ’åº,æ ¹æ® name lenght</span>
</span></span><span style="display:flex;"><span>Comparator&lt;String&gt; sortByNameLenght = (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">length</span>() - s2.<span style="color:#007f7f">length</span>());
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, sortByNameLenght);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 2.3 æˆ–è€…è¿™æ ·</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">length</span>() - s2.<span style="color:#007f7f">length</span>()));
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 3.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ’åº players, æ ¹æ®æœ€åä¸€ä¸ªå­—æ¯</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">charAt</span>(s1.<span style="color:#007f7f">length</span>() - 1) - s2.<span style="color:#007f7f">charAt</span>(s2.<span style="color:#007f7f">length</span>() - 1));  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 3.2 ä½¿ç”¨ lambda expression æ’åº,æ ¹æ®æœ€åä¸€ä¸ªå­—æ¯</span>
</span></span><span style="display:flex;"><span>Comparator&lt;String&gt; sortByLastLetter = 
</span></span><span style="display:flex;"><span>    (String s1, String s2) -&gt;
</span></span><span style="display:flex;"><span>        (s1.<span style="color:#007f7f">charAt</span>(s1.<span style="color:#007f7f">length</span>() - 1) - s2.<span style="color:#007f7f">charAt</span>(s2.<span style="color:#007f7f">length</span>() - 1));  
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, sortByLastLetter);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// 3.3 æˆ–è€…è¿™æ ·</span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">charAt</span>(s1.<span style="color:#007f7f">length</span>() - 1) - s2.<span style="color:#007f7f">charAt</span>(s2.<span style="color:#007f7f">length</span>() - 1)));
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨lambdaså’Œstreams">ä½¿ç”¨Lambdaså’ŒStreams<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨lambdaså’Œstreams">#</a></h2>
<p>Streamæ˜¯å¯¹é›†åˆçš„åŒ…è£…ï¼Œé€šå¸¸å’Œlambdaä¸€èµ·ä½¿ç”¨ã€‚ ä½¿ç”¨lambdaså¯ä»¥æ”¯æŒè®¸å¤šæ“ä½œï¼Œ<br>
å¦‚ mapã€filterã€limitã€sortedã€countã€minã€maxã€sumã€collectç­‰ç­‰ã€‚<br>
åŒæ ·ï¼Œstreamä½¿ç”¨æ‡’è¿ç®—ï¼Œä»–ä»¬å¹¶ä¸ä¼šçœŸæ­£åœ°è¯»å–æ‰€æœ‰æ•°æ®ï¼Œé‡åˆ°åƒgetFirst()è¿™æ ·çš„æ–¹æ³•å°±ä¼šç»“æŸé“¾å¼è¯­æ³•ã€‚<br>
åœ¨æ¥ä¸‹æ¥çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢lambdaså’Œstreams èƒ½åšä»€ä¹ˆã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªPersonç±»å¹¶ä½¿ç”¨è¿™ä¸ªç±»æ¥æ·»åŠ ä¸€äº›æ•°æ®åˆ°listä¸­ï¼Œå°†ç”¨äºè¿›ä¸€æ­¥æµæ“ä½œã€‚</p>
<p>Personåªæ˜¯ä¸€ä¸ªç®€å•çš„POJOç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> String firstName, lastName, job, gender;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> salary, age;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Person(String firstName, String lastName, String job,
</span></span><span style="display:flex;"><span>                String gender, <span style="color:#fff;font-weight:bold">int</span> age, <span style="color:#fff;font-weight:bold">int</span> salary)       {  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">firstName</span> = firstName;  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">lastName</span> = lastName;  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">gender</span> = gender;  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">age</span> = age;  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">job</span> = job;  
</span></span><span style="display:flex;"><span>          <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">salary</span> = salary;  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Getter and Setter</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// . . . . .</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªlistï¼Œéƒ½ç”¨æ¥å­˜æ”¾Personå¯¹è±¡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Person&gt; javaProgrammers = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;Person&gt;() {
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Elsdon&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Jaycob&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 43, 2000));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Tamsen&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Brittany&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 23, 1500));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Floyd&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Donny&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 33, 1800));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Sindy&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Jonie&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 32, 1600));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Vere&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Hervey&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 22, 1200));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Maude&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Jaimie&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 27, 1900));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Shawn&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Randall&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 30, 2300));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Jayden&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Corrina&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 35, 1700));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Palmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Dene&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 33, 2000));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Addison&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Pam&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Java programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 34, 1300));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>List&lt;Person&gt; phpProgrammers = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;Person&gt;() {
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Jarrod&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Pace&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 34, 1550));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Clarette&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Cicely&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 23, 1200));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Victor&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Channing&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 32, 1600));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Tori&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Sheryl&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 21, 1000));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Osborne&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Shad&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 32, 1100));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Rosalind&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Layla&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 25, 1300));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Fraser&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Hewie&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 36, 1100));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Quinn&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Tamara&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 21, 1000));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Alvin&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Lance&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;male&#34;</span>, 38, 1600));
</span></span><span style="display:flex;"><span>    add(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Evonne&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Shari&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;PHP programmer&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>, 40, 1800));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨forEachæ–¹æ³•æ¥è¿­ä»£è¾“å‡ºä¸Šè¿°åˆ—è¡¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ‰€æœ‰ç¨‹åºå‘˜çš„å§“å:&#34;</span>);
</span></span><span style="display:flex;"><span>javaProgrammers.<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span><span style="display:flex;"><span>phpProgrammers.<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬åŒæ ·ä½¿ç”¨forEachæ–¹æ³•ï¼Œå¢åŠ ç¨‹åºå‘˜çš„å·¥èµ„5%ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ç»™ç¨‹åºå‘˜åŠ è–ª 5% :&#34;</span>);
</span></span><span style="display:flex;"><span>Consumer&lt;Person&gt; giveRaise = e -&gt; e.<span style="color:#007f7f">setSalary</span>(e.<span style="color:#007f7f">getSalary</span>() / 100 * 5 + e.<span style="color:#007f7f">getSalary</span>());
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>javaProgrammers.<span style="color:#007f7f">forEach</span>(giveRaise);
</span></span><span style="display:flex;"><span>phpProgrammers.<span style="color:#007f7f">forEach</span>(giveRaise);
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡è¿‡æ»¤å™¨filter()ï¼Œç­›é€‰å‡ºæœˆè–ªè¶…è¿‡1400ç¾å…ƒçš„PHPç¨‹åºå‘˜ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸‹é¢æ˜¯æœˆè–ªè¶…è¿‡ $1,400 çš„PHPç¨‹åºå‘˜:&#34;</span>);
</span></span><span style="display:flex;"><span>phpProgrammers.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>((p) -&gt; (p.<span style="color:#007f7f">getSalary</span>() &gt; 1400))  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è¿‡æ»¤å™¨ï¼Œç„¶åé‡ç”¨å®ƒä»¬æ¥æ‰§è¡Œå…¶ä»–æ“ä½œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å®šä¹‰ filters</span>
</span></span><span style="display:flex;"><span>Predicate&lt;Person&gt; ageFilter = (p) -&gt; (p.<span style="color:#007f7f">getAge</span>() &gt; 25);
</span></span><span style="display:flex;"><span>Predicate&lt;Person&gt; salaryFilter = (p) -&gt; (p.<span style="color:#007f7f">getSalary</span>() &gt; 1400);
</span></span><span style="display:flex;"><span>Predicate&lt;Person&gt; genderFilter = (p) -&gt; (<span style="color:#0ff;font-weight:bold">&#34;female&#34;</span>.<span style="color:#007f7f">equals</span>(p.<span style="color:#007f7f">getGender</span>()));
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸‹é¢æ˜¯å¹´é¾„å¤§äº 24å²ä¸”æœˆè–ªåœ¨$1,400ä»¥ä¸Šçš„å¥³PHPç¨‹åºå‘˜:&#34;</span>);
</span></span><span style="display:flex;"><span>phpProgrammers.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(ageFilter)
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(salaryFilter)
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(genderFilter)
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// é‡ç”¨filters</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å¹´é¾„å¤§äº 24å²çš„å¥³æ€§ Java programmers:&#34;</span>);
</span></span><span style="display:flex;"><span>javaProgrammers.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(ageFilter)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(genderFilter)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));  
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨limitæ–¹æ³•ï¼Œå¯ä»¥é™åˆ¶ç»“æœé›†çš„ä¸ªæ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æœ€å‰é¢çš„3ä¸ª Java programmers:&#34;</span>);
</span></span><span style="display:flex;"><span>javaProgrammers.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">limit</span>(3)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span><span style="display:flex;"><span>		  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æœ€å‰é¢çš„3ä¸ªå¥³æ€§ Java programmers:&#34;</span>);
</span></span><span style="display:flex;"><span>javaProgrammers.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">filter</span>(genderFilter)
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">limit</span>(3)
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; &#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ’åºå‘¢? æˆ‘ä»¬åœ¨streamä¸­èƒ½å¤„ç†å—? ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­,æˆ‘ä»¬å°†æ ¹æ®åå­—å’Œè–ªæ°´æ’åºJavaç¨‹åºå‘˜ï¼Œæ”¾åˆ°ä¸€ä¸ªlistä¸­,ç„¶åæ˜¾ç¤ºåˆ—è¡¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ ¹æ® name æ’åº,å¹¶æ˜¾ç¤ºå‰5ä¸ª Java programmers:&#34;</span>);
</span></span><span style="display:flex;"><span>List&lt;Person&gt; sortedJavaProgrammers = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">sorted</span>((p, p2) -&gt; (p.<span style="color:#007f7f">getFirstName</span>().<span style="color:#007f7f">compareTo</span>(p2.<span style="color:#007f7f">getFirstName</span>())))  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">limit</span>(5)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">collect</span>(toList());  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>sortedJavaProgrammers.<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; %n&#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>()));
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ ¹æ® salary æ’åº Java programmers:&#34;</span>);
</span></span><span style="display:flex;"><span>sortedJavaProgrammers = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">sorted</span>( (p, p2) -&gt; (p.<span style="color:#007f7f">getSalary</span>() - p2.<span style="color:#007f7f">getSalary</span>()) )  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">collect</span>( toList() );  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>sortedJavaProgrammers.<span style="color:#007f7f">forEach</span>((p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;%s %s; %n&#34;</span>, p.<span style="color:#007f7f">getFirstName</span>(), p.<span style="color:#007f7f">getLastName</span>())); 
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæˆ‘ä»¬åªå¯¹æœ€ä½å’Œæœ€é«˜çš„è–ªæ°´æ„Ÿå…´è¶£ï¼Œæ¯”æ’åºåé€‰æ‹©ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªæ›´å¿«çš„æ˜¯minå’Œmaxæ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å·¥èµ„æœ€ä½çš„ Java programmer:&#34;</span>);
</span></span><span style="display:flex;"><span>Person pers = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">min</span>((p1, p2) -&gt; (p1.<span style="color:#007f7f">getSalary</span>() - p2.<span style="color:#007f7f">getSalary</span>()))  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;Name: %s %s; Salary: $%,d.&#34;</span>, pers.<span style="color:#007f7f">getFirstName</span>(), pers.<span style="color:#007f7f">getLastName</span>(), pers.<span style="color:#007f7f">getSalary</span>());
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å·¥èµ„æœ€é«˜çš„ Java programmer:&#34;</span>);
</span></span><span style="display:flex;"><span>Person person = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">max</span>((p, p2) -&gt; (p.<span style="color:#007f7f">getSalary</span>() - p2.<span style="color:#007f7f">getSalary</span>()))
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;Name: %s %s; Salary: $%,d.&#34;</span>, person.<span style="color:#007f7f">getFirstName</span>(), person.<span style="color:#007f7f">getLastName</span>(), person.<span style="color:#007f7f">getSalary</span>());
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å·²ç»çœ‹åˆ° collect æ–¹æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç»“åˆ map æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ collect æ–¹æ³•æ¥å°†æˆ‘ä»¬çš„ç»“æœé›†æ”¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ª Set æˆ–ä¸€ä¸ªTreeSetä¸­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å°† PHP programmers çš„ first name æ‹¼æ¥æˆå­—ç¬¦ä¸²:&#34;</span>);
</span></span><span style="display:flex;"><span>String phpDevelopers = phpProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">map</span>(Person::getFirstName)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">collect</span>(joining(<span style="color:#0ff;font-weight:bold">&#34; ; &#34;</span>)); <span style="color:#007f7f">// åœ¨è¿›ä¸€æ­¥çš„æ“ä½œä¸­å¯ä»¥ä½œä¸ºæ ‡è®°(token)     </span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å°† Java programmers çš„ first name å­˜æ”¾åˆ° Set:&#34;</span>);
</span></span><span style="display:flex;"><span>Set&lt;String&gt; javaDevFirstName = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">map</span>(Person::getFirstName)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">collect</span>(toSet());  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å°† Java programmers çš„ first name å­˜æ”¾åˆ° TreeSet:&#34;</span>);
</span></span><span style="display:flex;"><span>TreeSet&lt;String&gt; javaDevLastName = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">map</span>(Person::getLastName)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">collect</span>(toCollection(TreeSet::<span style="color:#fff;font-weight:bold">new</span>));
</span></span></code></pre></td></tr></table>
</div>
</div><p>Streams è¿˜å¯ä»¥æ˜¯å¹¶è¡Œçš„(parallel)ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;è®¡ç®—ä»˜ç»™ Java programmers çš„æ‰€æœ‰money:&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> totalSalary = javaProgrammers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">parallelStream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">mapToInt</span>(p -&gt; p.<span style="color:#007f7f">getSalary</span>())  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">sum</span>();  
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨summaryStatisticsæ–¹æ³•è·å¾—streamä¸­å…ƒç´ çš„å„ç§æ±‡æ€»æ•°æ®ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®è¿™äº›æ–¹æ³•ï¼Œæ¯”å¦‚getMaxï¼ŒgetMinï¼ŒgetSumæˆ–getAverageï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è®¡ç®— count, min, max, sum, and average for numbers</span>
</span></span><span style="display:flex;"><span>List&lt;Integer&gt; numbers = Arrays.<span style="color:#007f7f">asList</span>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
</span></span><span style="display:flex;"><span>IntSummaryStatistics stats = numbers
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">stream</span>()  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">mapToInt</span>((x) -&gt; x)  
</span></span><span style="display:flex;"><span>          .<span style="color:#007f7f">summaryStatistics</span>();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Listä¸­æœ€å¤§çš„æ•°å­— : &#34;</span> + stats.<span style="color:#007f7f">getMax</span>());
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Listä¸­æœ€å°çš„æ•°å­— : &#34;</span> + stats.<span style="color:#007f7f">getMin</span>());
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ‰€æœ‰æ•°å­—çš„æ€»å’Œ   : &#34;</span> + stats.<span style="color:#007f7f">getSum</span>());
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ‰€æœ‰æ•°å­—çš„å¹³å‡å€¼ : &#34;</span> + stats.<span style="color:#007f7f">getAverage</span>()); 
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.cnblogs.com/franson-2016/p/5593080.html">å‚è€ƒ</a></p>
<h2 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£">ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£<a hidden class="anchor" aria-hidden="true" href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£">#</a></h2>
<p>å‡½æ•°å¼æ¥å£å°±æ˜¯<code>åªæ˜¾å¼å£°æ˜ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£</code>ã€‚<br>
ä¸ºä¿è¯æ–¹æ³•æ•°é‡ä¸å¤šä¸å°‘ï¼Œjava8æä¾›äº†ä¸€ä¸ªä¸“ç”¨æ³¨è§£@FunctionalInterfaceï¼Œå½“æ¥å£ä¸­å£°æ˜çš„æŠ½è±¡æ–¹æ³•å¤šäºæˆ–å°‘äºä¸€ä¸ªæ—¶å°±ä¼šæŠ¥é”™ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface  <span style="color:#007f7f">//æŠ¥é”™</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> InterfaceWithNoParam {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@FunctionalInterface  <span style="color:#007f7f">//æŠ¥é”™</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> InterfaceWithNoParam {
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">void</span> f1();
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">void</span> f2();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¿…é¡»å…ˆæ¥ç†è§£ä¸‹å‡½æ•°å¼æ¥å£ï¼Œå› ä¸ºLambdaæ˜¯å»ºç«‹åœ¨å‡½æ•°å¼æ¥å£çš„åŸºç¡€ä¸Šçš„ã€‚</p>
<ul>
<li>åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚</li>
<li>ä½ å¯ä»¥é€šè¿‡ Lambda è¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å‡½æ•°å¼æ¥å£ä¸Šä½¿ç”¨ @FunctionalInterface æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æµ‹å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ŒåŒæ—¶ javadoc ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</li>
</ul>
<p>ğŸˆ¶ï¸ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„å‡½æ•°å¼æ¥å£ï¼šRunnableæ¥å£ï¼ŒComparatoræ¥å£</p>
<p>Runnableæ¥å£ç›¸å…³</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Test {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.1ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Thread(<span style="color:#fff;font-weight:bold">new</span> Runnable() {  
</span></span><span style="display:flex;"><span>            @Override  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {  
</span></span><span style="display:flex;"><span>                System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }).<span style="color:#007f7f">start</span>();  
</span></span><span style="display:flex;"><span>          
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.2ä½¿ç”¨ lambda è·å¾—Runnableæ¥å£å¯¹è±¡  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Thread(() -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>)).<span style="color:#007f7f">start</span>();  
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//=============================================================================</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.1ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»  </span>
</span></span><span style="display:flex;"><span>        Runnable race1 = <span style="color:#fff;font-weight:bold">new</span> Runnable() {  
</span></span><span style="display:flex;"><span>            @Override  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {  
</span></span><span style="display:flex;"><span>                System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        };  
</span></span><span style="display:flex;"><span>          
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.2ä½¿ç”¨ lambdaç›´æ¥è·å¾—æ¥å£å¯¹è±¡ </span>
</span></span><span style="display:flex;"><span>        Runnable race2 = () -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello world !&#34;</span>);          
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç›´æ¥è°ƒç”¨ run æ–¹æ³•(æ²¡å¼€æ–°çº¿ç¨‹å“¦!)  </span>
</span></span><span style="display:flex;"><span>        race1.<span style="color:#007f7f">run</span>();  
</span></span><span style="display:flex;"><span>        race2.<span style="color:#007f7f">run</span>();  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>/*è¾“å‡ºç»“æœ
</span></span><span style="display:flex;"><span> * Hello world !
</span></span><span style="display:flex;"><span> * Hello world !
</span></span><span style="display:flex;"><span> * Hello world !
</span></span><span style="display:flex;"><span> * Hello world !
</span></span><span style="display:flex;"><span> *<span style="color:#f00">ï¼</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨Lambdaå¯¹æ•°ç»„æ’åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestArray {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String[] players = {<span style="color:#0ff;font-weight:bold">&#34;zhansgan&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;lisi&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;wangwu&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;zhaoliu&#34;</span>,  <span style="color:#0ff;font-weight:bold">&#34;wangmazi&#34;</span>};  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ ¹æ® surname æ’åº players  </span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {  
</span></span><span style="display:flex;"><span>            @Override  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">compareTo</span>(s2));  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        });  
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.2 ä½¿ç”¨ lambda æ’åº,æ ¹æ® surname  </span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt;  s1.<span style="color:#007f7f">compareTo</span>(s2));  
</span></span><span style="display:flex;"><span>         
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//================================================================================================</span>
</span></span><span style="display:flex;"><span>          
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ ¹æ® name lenght æ’åº players  </span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {  
</span></span><span style="display:flex;"><span>            @Override  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">length</span>() - s2.<span style="color:#007f7f">length</span>());  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        });  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.2ä½¿ç”¨Lambda,æ ¹æ®name length  </span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">length</span>() - s2.<span style="color:#007f7f">length</span>()));  
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//==================================================================================================    </span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3.1 ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ’åº players, æ ¹æ®æœ€åä¸€ä¸ªå­—æ¯  </span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, <span style="color:#fff;font-weight:bold">new</span> Comparator&lt;String&gt;() {
</span></span><span style="display:flex;"><span>            @Override  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compare(String s1, String s2) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> (s1.<span style="color:#007f7f">charAt</span>(s1.<span style="color:#007f7f">length</span>() - 1) - s2.<span style="color:#007f7f">charAt</span>(s2.<span style="color:#007f7f">length</span>() - 1));  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        });  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3.2 ä½¿ç”¨Lambda,æ ¹æ®æœ€åä¸€ä¸ªå­—æ¯</span>
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">sort</span>(players, (String s1, String s2) -&gt; (s1.<span style="color:#007f7f">charAt</span>(s1.<span style="color:#007f7f">length</span>() - 1) - s2.<span style="color:#007f7f">charAt</span>(s2.<span style="color:#007f7f">length</span>() - 1)));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢ä¾‹å­æˆ‘ä»¬å†æ¥æ€è€ƒä¸ºä»€ä¹ˆLambdaè¡¨è¾¾å¼éœ€è¦å‡½æ•°å¼æ¥å£ï¼Ÿå…¶å®å¾ˆç®€å•ç›®çš„å°±æ˜¯ä¸ºæ¥ä¿è¯å”¯ä¸€ã€‚<br>
ä½ çš„Runnableæ¥å£åªè¦ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ç”¨<code>() -&gt; System.out.println(&quot;Hello world !&quot;)</code>ï¼Œå°±åªèƒ½ä»£è¡¨runæ–¹æ³•ï¼Œå¦‚æœä½ ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£æˆ‘ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œé‚£é¬¼æ‰çŸ¥é“è¦è°ƒç”¨å“ªä¸ªæŠ½è±¡æ–¹æ³•å‘¢ã€‚</p>
<h2 id="æ–¹æ³•å¼•ç”¨-1">æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#æ–¹æ³•å¼•ç”¨-1">#</a></h2>
<p>å‡½æ•°å¼æ¥å£çš„å®ä¾‹å¯ä»¥é€šè¿‡ lambda è¡¨è¾¾å¼ã€ æ–¹æ³•å¼•ç”¨ã€æ„é€ æ–¹æ³•å¼•ç”¨æ¥åˆ›å»ºã€‚æ–¹æ³•å¼•ç”¨æ˜¯ lambda è¡¨è¾¾å¼çš„è¯­æ³•ç³–ï¼Œä»»ä½•ç”¨æ–¹æ³•å¼•ç”¨çš„åœ°æ–¹éƒ½å¯ç”±lambdaè¡¨è¾¾å¼æ›¿æ¢ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„lambdaè¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨æ¥æ›¿æ¢ã€‚<br>
ä¸¾ä¾‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ‰“å°é›†åˆæ‰€æœ‰å…ƒç´ çš„ä¾‹å­ï¼Œ<code>value -&gt; System.out.println(value) </code>æ˜¯ä¸€ä¸ªConsumerå‡½æ•°å¼æ¥å£ï¼Œ è¿™ä¸ªå‡½æ•°å¼æ¥å£å¯ä»¥é€šè¿‡æ–¹æ³•å¼•ç”¨æ¥æ›¿æ¢ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestArray {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>         List&lt;String&gt; list = Arrays.<span style="color:#007f7f">asList</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>);
</span></span><span style="display:flex;"><span>         list.<span style="color:#007f7f">forEach</span>(value -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(value));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/* è¾“å‡ºï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * a
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * b
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * c
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨æ–¹æ³•å¼•ç”¨çš„æ–¹å¼ï¼Œå’Œä¸Šé¢çš„è¾“å‡ºæ˜¯ä¸€æ ·çš„ï¼Œæ–¹æ³•å¼•ç”¨ä½¿ç”¨çš„æ˜¯åŒå†’å·ï¼ˆ::ï¼‰<br>
<code>list.forEach(System.out::println);</code></p>
<p>åˆ†ç±»</p>
<table>
<thead>
<tr>
<th>ç±»åˆ«</th>
<th>ä½¿ç”¨å½¢å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>é™æ€æ–¹æ³•å¼•ç”¨</td>
<td>ç±»å :: é™æ€æ–¹æ³•å</td>
</tr>
<tr>
<td>å®ä¾‹æ–¹æ³•å¼•ç”¨</td>
<td>å¯¹è±¡å(å¼•ç”¨å) :: å®ä¾‹æ–¹æ³•å</td>
</tr>
<tr>
<td>ç±»æ–¹æ³•å¼•ç”¨</td>
<td>ç±»å :: å®ä¾‹æ–¹æ³•å</td>
</tr>
<tr>
<td>æ„é€ æ–¹æ³•å¼•ç”¨</td>
<td>ç±»å :: new</td>
</tr>
</tbody>
</table>
<h3 id="é™æ€æ–¹æ³•å¼•ç”¨">é™æ€æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#é™æ€æ–¹æ³•å¼•ç”¨">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Apple {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String color;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">double</span> weight;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Apple(String name, String color, <span style="color:#fff;font-weight:bold">double</span> weight) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">color</span> = color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">int</span> compareByWeight(Apple a1, Apple a2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">double</span> diff = a1.<span style="color:#007f7f">getWeight</span>() - a2.<span style="color:#007f7f">getWeight</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Double(diff).<span style="color:#007f7f">intValue</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿˜æœ‰getter setter toString</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ‰ä¸€ä¸ªè‹¹æœçš„Listï¼Œç°åœ¨éœ€è¦æ ¹æ®è‹¹æœçš„é‡é‡è¿›è¡Œæ’åºã€‚List çš„ sort å‡½æ•°æ¥æ”¶ä¸€ä¸ª Comparator ç±»å‹çš„å‚æ•°ï¼ŒComparator æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªintå€¼ã€‚<br>
Appleçš„é™æ€æ–¹æ³•compareByWeightæ­£å¥½ç¬¦åˆComparatorå‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ï¼š<br>
<code>Apple::compareByWeight</code>é™æ€æ–¹æ³•å¼•ç”¨æ¥æ›¿ä»£lambdaè¡¨è¾¾å¼</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LambdaTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Apple apple1 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;çº¢å¯Œå£«&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 280);
</span></span><span style="display:flex;"><span>        Apple apple2 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å†¯å¿ƒ&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Yello&#34;</span>, 470);
</span></span><span style="display:flex;"><span>        Apple apple3 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å¤§ç‰›&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 320);
</span></span><span style="display:flex;"><span>        Apple apple4 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å°å°&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Green&#34;</span>, 300);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        List&lt;Apple&gt; appleList = Arrays.<span style="color:#007f7f">asList</span>(apple1, apple2, apple3, apple4);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//lambda è¡¨è¾¾å¼å½¢å¼</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//appleList.sort((Apple a1, Apple a2) -&gt; {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//    return new Double(a1.getWeight() - a2.getWeight()).intValue();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é™æ€æ–¹æ³•å¼•ç”¨å½¢å¼ï¼ˆå¯ä»¥çœ‹å‡ºå¼•ç”¨æ–¹æ³•æ¯”ä¸Šé¢çš„æ›´åŠ ç®€å•</span>
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">sort</span>(Apple::compareByWeight);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">forEach</span>(apple -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(apple));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>è¾“å‡º<span style="color:#f00">ï¼š</span>
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>çº¢å¯Œå£«<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=280.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å°å°<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Green<span style="color:#f00">&#39;</span>, weight=300.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å¤§ç‰›<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=320.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å†¯å¿ƒ<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Yello<span style="color:#f00">&#39;</span>, weight=470.<span style="color:#007f7f">0</span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Apple.compareByWeight</code>æ˜¯æ–¹æ³•çš„è°ƒç”¨ï¼Œè€Œ<code>Apple::compareByWeight</code>æ–¹æ³•å¼•ç”¨ï¼Œè¿™ä¸¤è€…å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚</p>
<h3 id="å®ä¾‹æ–¹æ³•å¼•ç”¨">å®ä¾‹æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#å®ä¾‹æ–¹æ³•å¼•ç”¨">#</a></h3>
<p>è¿™ä¸ª compareByWeight æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppleComparator {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compareByWeight(Apple a1, Apple a2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">double</span> diff = a1.<span style="color:#007f7f">getWeight</span>() - a2.<span style="color:#007f7f">getWeight</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Double(diff).<span style="color:#007f7f">intValue</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢çš„ä¾‹å­é€šè¿‡å®ä¾‹å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ <code>comparator::compareByWeight</code> æ¥ä»£æ›¿lambdaè¡¨è¾¾å¼</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LambdaTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Apple apple1 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;çº¢å¯Œå£«&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 280);
</span></span><span style="display:flex;"><span>        Apple apple2 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å†¯å¿ƒ&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Yello&#34;</span>, 470);
</span></span><span style="display:flex;"><span>        Apple apple3 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å“ˆå“ˆ&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 320);
</span></span><span style="display:flex;"><span>        Apple apple4 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å°å°&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Green&#34;</span>, 300);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        List&lt;Apple&gt; appleList = Arrays.<span style="color:#007f7f">asList</span>(apple1, apple2, apple3, apple4);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//lambda è¡¨è¾¾å¼å½¢å¼</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//appleList.sort((Apple a1, Apple a2) -&gt; {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//    return new Double(a1.getWeight() - a2.getWeight()).intValue();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å®ä¾‹æ–¹æ³•å¼•ç”¨</span>
</span></span><span style="display:flex;"><span>        AppleComparator comparator = <span style="color:#fff;font-weight:bold">new</span> AppleComparator();
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">sort</span>(comparator::compareByWeight);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">forEach</span>(apple -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(apple));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>è¾“å‡º<span style="color:#f00">ï¼š</span>
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>çº¢å¯Œå£«<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=280.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å°å°<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Green<span style="color:#f00">&#39;</span>, weight=300.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å“ˆå“ˆ<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=320.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å†¯å¿ƒ<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Yello<span style="color:#f00">&#39;</span>, weight=470.<span style="color:#007f7f">0</span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œé™æ€æ–¹æ³•å¼•ç”¨å’Œå®ä¾‹æ–¹æ³•å¼•ç”¨éƒ½æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚</p>
<h3 id="ç±»æ–¹æ³•å¼•ç”¨">ç±»æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#ç±»æ–¹æ³•å¼•ç”¨">#</a></h3>
<p>ä¸€èˆ¬æ¥è¯´ï¼ŒåŒç±»å‹å¯¹è±¡çš„æ¯”è¾ƒï¼Œåº”è¯¥å½“å‰è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ä¸å¦å¤–ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œå¥½çš„è®¾è®¡åº”è¯¥åƒä¸‹é¢ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Apple {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String category;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String color;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">double</span> weight;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Apple(String category, String color, <span style="color:#fff;font-weight:bold">double</span> weight) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">category</span> = category;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">color</span> = color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è¿™é‡Œå’Œä¸Šé¢é™æ€æ–¹å¼å”¯ä¸€åŒºåˆ«å°±æ˜¯è¿™ä¸ªå‚æ•°å°±ä¸€ä¸ªï¼Œéœ€è¦å®ä¾‹å¯¹è±¡è°ƒè¿™ä¸ªæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compareByWeight(Apple other) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">double</span> diff = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">getWeight</span>() - other.<span style="color:#007f7f">getWeight</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Double(diff).<span style="color:#007f7f">intValue</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//getter setter toString</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜æ˜¯ä¹‹å‰Listæ’åºçš„ä¾‹å­ï¼Œçœ‹çœ‹ä½¿ç”¨ç±»æ–¹æ³•å¼•ç”¨å¦‚ä½•å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LambdaTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Apple apple1 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;çº¢å¯Œå£«&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 280);
</span></span><span style="display:flex;"><span>        Apple apple2 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;é»„å…ƒå¸…&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Yello&#34;</span>, 470);
</span></span><span style="display:flex;"><span>        Apple apple3 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;çº¢å°†å†›&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Red&#34;</span>, 320);
</span></span><span style="display:flex;"><span>        Apple apple4 = <span style="color:#fff;font-weight:bold">new</span> Apple(<span style="color:#0ff;font-weight:bold">&#34;å›½å…‰&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Green&#34;</span>, 300);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        List&lt;Apple&gt; appleList = Arrays.<span style="color:#007f7f">asList</span>(apple1, apple2, apple3, apple4);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//lambda è¡¨è¾¾å¼å½¢å¼</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//appleList.sort((Apple a1, Apple a2) -&gt; {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//    return new Double(a1.getWeight() - a2.getWeight()).intValue();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è¿™é‡Œæ˜¯ç±»æ–¹æ³•å¼•ç”¨</span>
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">sort</span>(Apple::compareByWeight);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        appleList.<span style="color:#007f7f">forEach</span>(apple -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(apple));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>è¾“å‡º<span style="color:#f00">ï¼š</span>
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>çº¢å¯Œå£«<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=280.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>å›½å…‰<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Green<span style="color:#f00">&#39;</span>, weight=300.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>çº¢å°†å†›<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Red<span style="color:#f00">&#39;</span>, weight=320.<span style="color:#007f7f">0</span>}
</span></span><span style="display:flex;"><span>Apple{category=<span style="color:#f00">&#39;</span>é»„å…ƒå¸…<span style="color:#f00">&#39;</span>, color=<span style="color:#f00">&#39;</span>Yello<span style="color:#f00">&#39;</span>, weight=470.<span style="color:#007f7f">0</span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ï¼šç±»å::å®ä¾‹æ–¹æ³•åã€‚é¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼Œæ–¹æ³•å¼•ç”¨ä¸æ˜¯æ–¹æ³•è°ƒç”¨ã€‚compareByWeightä¸€å®šæ˜¯æŸä¸ªå®ä¾‹è°ƒç”¨çš„ï¼Œå°±æ˜¯lambdaè¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç„¶ålambdaè¡¨è¾¾å¼å‰©ä¸‹çš„å‚æ•°ä½œä¸º<br>
compareByWeightçš„å‚æ•°ï¼Œè¿™æ ·compareByWeightæ­£å¥½ç¬¦åˆlambdaè¡¨è¾¾å¼çš„å®šä¹‰ã€‚<br>
æˆ–è€…ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼š<br>
<code>(Apple a1, Apple a2) -&gt; { return new Double(a1.getWeight() - a2.getWeight()).intValue(); }</code><br>
int compareByWeight(Apple other) éœ€è¦å½“å‰å¯¹è±¡è°ƒç”¨ï¼Œç„¶åä¸å¦å¤–ä¸€ä¸ªå¯¹è±¡æ¯”è¾ƒï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªintå€¼ã€‚å¯ä»¥ç†è§£ä¸ºlambdaè¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå‚æ•° a1 èµ‹å€¼ç»™å½“å‰å¯¹è±¡ï¼Œ ç„¶å a2 èµ‹å€¼ç»™ otherå¯¹è±¡ï¼Œç„¶åè¿”å›intå€¼ã€‚</p>
<h3 id="æ„é€ æ–¹æ³•å¼•ç”¨-1">æ„é€ æ–¹æ³•å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#æ„é€ æ–¹æ³•å¼•ç”¨-1">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConstructionMethodTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getString(Supplier&lt;String&gt; supplier) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> supplier.<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ConstructionMethodTest test = <span style="color:#fff;font-weight:bold">new</span> ConstructionMethodTest();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//lambdaè¡¨è¾¾å¼å½¢å¼</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(test.<span style="color:#007f7f">getString</span>(() -&gt; { <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> String();}));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ„é€ æ–¹æ³•å¼•ç”¨å½¢å¼</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(test.<span style="color:#007f7f">getString</span>(String::<span style="color:#fff;font-weight:bold">new</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>getString æ–¹æ³•æ¥æ”¶ä¸€ä¸ªSupplierç±»å‹çš„å‚æ•°ï¼ŒSupplier ä¸æ¥æ”¶å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªStringã€‚lambdaè¡¨è¾¾å¼åº”è¯¥è¿™æ ·å†™ï¼š<br>
<code>() -&gt; { return new String();}</code><br>
æ›¿æ¢æˆæ–¹æ³•å¼•ç”¨çš„å½¢å¼å¦‚ä¸‹ï¼š å®é™…ä¸Šè°ƒç”¨çš„æ˜¯String æ— å‚æ„é€ æ–¹æ³•ã€‚<br>
<code>String::new</code></p>
<p><a href="https://www.cnblogs.com/xiaoxi/p/7099667.html">æ–¹æ³•å¼•ç”¨å‚è€ƒ</a></p>
<h1 id="lambdaè¡¨è¾¾å¼çš„ä¸€äº›å°é—®é¢˜">lambdaè¡¨è¾¾å¼çš„ä¸€äº›å°é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼çš„ä¸€äº›å°é—®é¢˜">#</a></h1>
<h2 id="variable-used-in-lambda-expression-should-be-final-or-effectively-final">Variable used in lambda expression should be final or effectively final<a hidden class="anchor" aria-hidden="true" href="#variable-used-in-lambda-expression-should-be-final-or-effectively-final">#</a></h2>
<p>ç¿»è¯‘ï¼šlambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡åº”è¯¥æ˜¯finalæˆ–æœ‰æ•ˆçš„finalã€‚<br>
Lambdaä¸åŒ¿åå†…éƒ¨ç±»åœ¨è®¿é—®å¤–éƒ¨å˜é‡æ—¶ï¼Œéƒ½ä¸å…è®¸æœ‰ä¿®æ”¹å˜é‡çš„å€¾å‘ï¼Œå³ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span> a  = 3.<span style="color:#007f7f">141592</span>;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">double</span> b = 3.<span style="color:#007f7f">141592</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DoubleUnaryOperator anotherDoubleUnaryOperator = x -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ERRORï¼ŒCannot assign a value to final variableï¼Œæ— æ³•æ”¹å˜finalé‡çš„å€¼</span>
</span></span><span style="display:flex;"><span>    a = 2; 
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ERRORï¼ŒVariable used in lambda expression should be final or effectively finalï¼Œ</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ä¸å…è®¸åœ¨Lambdaè¡¨è¾¾å¼ä¸­ä¿®æ”¹ä½¿ç”¨çš„ï¼ˆå¤–éƒ¨ï¼‰å˜é‡</span>
</span></span><span style="display:flex;"><span>    b = 3; 
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> 0.<span style="color:#007f7f">0</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä½•è§„é¿è¿™ä¸ªï¼Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span>[] a = {3.<span style="color:#007f7f">141592</span>};
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span>[] b = {3.<span style="color:#007f7f">141592</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DoubleUnaryOperator anotherDoubleUnaryOperator = x -&gt; {
</span></span><span style="display:flex;"><span>    a[0] = 2; <span style="color:#007f7f">// COOL</span>
</span></span><span style="display:flex;"><span>    b[0] = 3; <span style="color:#007f7f">// ALSO COOL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> 0.<span style="color:#007f7f">0</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="lambdaè¡¨è¾¾å¼foreachå¦‚ä½•æå‰ç»ˆæ­¢">lambdaè¡¨è¾¾å¼foreach()å¦‚ä½•æå‰ç»ˆæ­¢<a hidden class="anchor" aria-hidden="true" href="#lambdaè¡¨è¾¾å¼foreachå¦‚ä½•æå‰ç»ˆæ­¢">#</a></h2>
<p><a href="https://www.cnblogs.com/Marydon20170307/p/14207705.html">å‚è€ƒ</a><br>
<code>lambda</code> è¡¨è¾¾å¼ <code>foreach()</code> æ˜¯æ— æ³•é€šè¿‡ <code>continue</code> æˆ– <code>break</code> è·³å‡ºçš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡returnè·³è¿‡æœ¬è½®å¾ªç¯ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    String[] nameArray = {<span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;2&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;4&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;5&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;6&#34;</span>};
</span></span><span style="display:flex;"><span>    List&lt;String&gt; list = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;(Arrays.<span style="color:#007f7f">asList</span>(nameArray));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    list.<span style="color:#007f7f">forEach</span>(i-&gt;{
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span>(<span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>.<span style="color:#007f7f">equals</span>(i)){
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ç»“æŸæœ¬è½®å¾ªç¯&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(i);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä¸Šï¼Œæƒ³è¦è·³å‡ºå½“å‰å¾ªç¯ï¼Œä½¿ç”¨äº† <code>return</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>2
</span></span><span style="display:flex;"><span>ç»“æŸæœ¬è½®å¾ªç¯
</span></span><span style="display:flex;"><span>4
</span></span><span style="display:flex;"><span>5
</span></span><span style="display:flex;"><span>6
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰3æ²¡è¢«æ‰“å°å‡ºæ¥ï¼Œå…¶ä»–å…ƒç´ éƒ½è¢«æ‰“å°äº†ã€‚<br>
å°±æ˜¯è¯´ï¼Œå…³é”®å­—returnï¼Œåœ¨è¿™é‡Œçš„æ‰§è¡Œæ•ˆæœç›¸å½“äºæ™®é€šforå¾ªç¯é‡Œçš„å…³é”®å­—continueã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>æˆ‘ä»¬çŸ¥é“<span style="color:#f00">ï¼Œ</span>åœ¨æ™®é€šçš„forå¾ªç¯é‡Œ<span style="color:#f00">ï¼Œ</span>
</span></span><span style="display:flex;"><span>- æƒ³è¦æå‰ç»ˆæ­¢å¾ªç¯ä½“<span style="color:#f00">ï¼Œ</span>ä½¿ç”¨break<span style="color:#f00">ã€‚</span>
</span></span><span style="display:flex;"><span>- æƒ³è¦ç»“æŸæœ¬è½®å¾ªç¯<span style="color:#f00">ï¼Œ</span>è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯<span style="color:#f00">ï¼Œ</span>ä½¿ç”¨continue<span style="color:#f00">ã€‚</span>
</span></span><span style="display:flex;"><span>å¦å¤–<span style="color:#f00">ï¼Œ</span>åœ¨æ™®é€šforé‡Œ<span style="color:#f00">ï¼Œ</span>å¦‚æœä½¿ç”¨<span style="color:#0ff;font-weight:bold">&#34;return&#34;</span><span style="color:#f00">ï¼Œ</span>ä¸ä»…å¼ºåˆ¶ç»“æŸforå¾ªç¯ä½“<span style="color:#f00">ï¼Œ</span>è¿˜ä¼šæå‰ç»“æŸåŒ…å«è¿™ä¸ªå¾ªç¯ä½“çš„æ•´ä¸ªæ–¹æ³•<span style="color:#f00">ã€‚</span>
</span></span><span style="display:flex;"><span>è€Œåœ¨Java8ä¸­çš„forEach()ä¸­<span style="color:#f00">ï¼Œ</span><span style="color:#0ff;font-weight:bold">&#34;break&#34;</span>æˆ–<span style="color:#0ff;font-weight:bold">&#34;continue&#34;</span>æ˜¯ä¸è¢«å…è®¸ä½¿ç”¨çš„<span style="color:#f00">ï¼Œ</span>è€Œreturnçš„æ„æ€ä¹Ÿä¸æ˜¯åŸæ¥returnä»£è¡¨çš„å«ä¹‰äº†<span style="color:#f00">ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæƒ³è¦è·³å‡º<code>foreach</code>ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨æ™®é€šçš„<code>foreach</code>ã€‚</p>
<h1 id="collectors">Collectors<a hidden class="anchor" aria-hidden="true" href="#collectors">#</a></h1>
<p>Collectorå’ŒCollectorsã€‚<br>
Collectoræ˜¯ä¸“é—¨ç”¨æ¥ä½œä¸ºStreamçš„collectæ–¹æ³•çš„å‚æ•°çš„ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Stream&lt;T&gt; <span style="color:#fff;font-weight:bold">extends</span> BaseStream&lt;T, Stream&lt;T&gt;&gt; {
</span></span><span style="display:flex;"><span>    &lt;R, A&gt; R collect(Collector&lt;? <span style="color:#fff;font-weight:bold">super</span> T, A, R&gt; collector);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Collectors æ˜¯å·¥å…·ç±»ï¼Œç”¨æ¥ç”Ÿäº§å…·ä½“çš„ Collectorã€‚</p>
<h2 id="tolist">toList<a hidden class="anchor" aria-hidden="true" href="#tolist">#</a></h2>
<p>å°†æµä¸­çš„å…ƒç´ æ”¾ç½®åˆ°ä¸€ä¸ªé›†åˆä¸­ã€‚è¿™ä¸ªåˆ—è¡¨é»˜è®¤ä¸ºArrayListã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Integer&gt; list = Arrays.<span style="color:#007f7f">asList</span>(1,2,3,4);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¿‡æ»¤listï¼Œç„¶åå°†è¿‡æ»¤åçš„æ•°æ®ï¼Œæ”¾åˆ°ä¸€ä¸ªæ–°çš„listä¸­</span>
</span></span><span style="display:flex;"><span>List&lt;Integer&gt; newList = list.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(i-&gt; i&gt;2)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(newList);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="toset">toSet<a hidden class="anchor" aria-hidden="true" href="#toset">#</a></h2>
<p>å°†æµä¸­çš„å…ƒç´ æ”¾ç½®åˆ°ä¸€ä¸ªæ— åºé›†setä¸­å»ï¼Œé»˜è®¤ä¸ºHashSetã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Integer&gt; list = Arrays.<span style="color:#007f7f">asList</span>(1,2,3,3,4);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¿‡æ»¤listï¼Œç„¶åå°†è¿‡æ»¤åçš„æ•°æ®ï¼Œæ”¾åˆ°ä¸€ä¸ªsetä¸­ï¼ˆsetä¼šå»æ‰é‡å¤å…ƒç´ ï¼‰</span>
</span></span><span style="display:flex;"><span>Set&lt;Integer&gt; set = list.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(i -&gt; i&gt;2)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toSet</span>());
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(set);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="joining">joining<a hidden class="anchor" aria-hidden="true" href="#joining">#</a></h2>
<p>joining å¯ä»¥å°†listä¸­çš„æ•°æ®æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šè¿æ¥ç¬¦ï¼Œè¿˜å¯ä»¥æŒ‡å®šç»“æœçš„å‰åç¼€ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;String&gt; list = Arrays.<span style="color:#007f7f">asList</span>(<span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;4&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å°†listä¸­çš„æ•°æ®ï¼Œæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</span>
</span></span><span style="display:flex;"><span>String s1 = list.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">joining</span>());
</span></span><span style="display:flex;"><span>String s2 = list.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">joining</span>(<span style="color:#0ff;font-weight:bold">&#34;,&#34;</span>));
</span></span><span style="display:flex;"><span>String s3 = list.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">joining</span>(<span style="color:#0ff;font-weight:bold">&#34;,&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;[&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡ºï¼Œè§‚å¯Ÿä¸‰ä¸ªæ–¹æ³•çš„ä¸åŒ</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s1);<span style="color:#007f7f">// 1234</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s2);<span style="color:#007f7f">// 1,2,3,4</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s3);<span style="color:#007f7f">// [1,2,3,4]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="collectorsgroupingby">Collectors.groupingBy<a hidden class="anchor" aria-hidden="true" href="#collectorsgroupingby">#</a></h2>
<p><code>Collectors.groupingBy</code> æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å¯¹é›†åˆä¸­çš„é¡¹ç›®è¿›è¡Œåˆ†ç»„ã€‚</p>
<p>å‡†å¤‡ä¸€ä¸ªç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Data
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Product{
</span></span><span style="display:flex;"><span>    Long id;
</span></span><span style="display:flex;"><span>    Integer num;
</span></span><span style="display:flex;"><span>    BigDecimal price;
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    String category;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Product(Long id, Integer num, BigDecimal price, String name, String category) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">num</span> = num;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">price</span> = price;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">category</span> = category;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¼€å§‹æµ‹è¯•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Product prod1 = <span style="color:#fff;font-weight:bold">new</span> Product(1L, 1, <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;15.5&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;é¢åŒ…&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;é›¶é£Ÿ&#34;</span>);
</span></span><span style="display:flex;"><span>Product prod2 = <span style="color:#fff;font-weight:bold">new</span> Product(2L, 2, <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;20&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;é¥¼å¹²&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;é›¶é£Ÿ&#34;</span>);
</span></span><span style="display:flex;"><span>Product prod3 = <span style="color:#fff;font-weight:bold">new</span> Product(3L, 3, <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;30&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;æœˆé¥¼&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;é›¶é£Ÿ&#34;</span>);
</span></span><span style="display:flex;"><span>Product prod4 = <span style="color:#fff;font-weight:bold">new</span> Product(4L, 3, <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;10&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;é’å²›å•¤é…’&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å•¤é…’&#34;</span>);
</span></span><span style="display:flex;"><span>Product prod5 = <span style="color:#fff;font-weight:bold">new</span> Product(5L, 10, <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;15&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;ç™¾å¨å•¤é…’&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å•¤é…’&#34;</span>);
</span></span><span style="display:flex;"><span>List&lt;Product&gt; prodList = Lists.<span style="color:#007f7f">newArrayList</span>(prod1, prod2, prod3, prod4, prod5);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æŒ‰ç…§ç±»ç›®åˆ†ç»„ï¼š</span>
</span></span><span style="display:flex;"><span>Map&lt;String, List&lt;Product&gt;&gt; prodMap = prodList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Product::getCategory));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å’Œä¸Šé¢çš„å†™æ³•ç»“æœç›¸åŒ</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//Map&lt;String, List&lt;Product&gt;&gt; prodMap2 = prodList.stream().collect(Collectors.groupingBy(item -&gt; item.getCategory()));</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ ¼å¼åŒ–ç»“æœ</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;å•¤é…’&#34;:[{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:4,&#34;name&#34;:&#34;é’å²›å•¤é…’&#34;,&#34;num&#34;:3,&#34;price&#34;:10},{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:5,&#34;name&#34;:&#34;ç™¾å¨å•¤é…’&#34;,&#34;num&#34;:10,&#34;price&#34;:15}],&#34;é›¶é£Ÿ&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:1,&#34;name&#34;:&#34;é¢åŒ…&#34;,&#34;num&#34;:1,&#34;price&#34;:15.5},{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:2,&#34;name&#34;:&#34;é¥¼å¹²&#34;,&#34;num&#34;:2,&#34;price&#34;:20},{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:3,&#34;name&#34;:&#34;æœˆé¥¼&#34;,&#34;num&#34;:3,&#34;price&#34;:30}]}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æŒ‰ç…§å‡ ä¸ªå±æ€§æ‹¼æ¥åˆ†ç»„ï¼š</span>
</span></span><span style="display:flex;"><span>Map&lt;String, List&lt;Product&gt;&gt; prodMap2 = prodList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(item -&gt; item.<span style="color:#007f7f">getCategory</span>() + <span style="color:#0ff;font-weight:bold">&#34;_&#34;</span> + item.<span style="color:#007f7f">getName</span>()));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;é›¶é£Ÿ_æœˆé¥¼&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:3,&#34;name&#34;:&#34;æœˆé¥¼&#34;,&#34;num&#34;:3,&#34;price&#34;:30}],&#34;é›¶é£Ÿ_é¢åŒ…&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:1,&#34;name&#34;:&#34;é¢åŒ…&#34;,&#34;num&#34;:1,&#34;price&#34;:15.5}],&#34;å•¤é…’_ç™¾å¨å•¤é…’&#34;:[{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:5,&#34;name&#34;:&#34;ç™¾å¨å•¤é…’&#34;,&#34;num&#34;:10,&#34;price&#34;:15}],&#34;å•¤é…’_é’å²›å•¤é…’&#34;:[{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:4,&#34;name&#34;:&#34;é’å²›å•¤é…’&#34;,&#34;num&#34;:3,&#34;price&#34;:10}],&#34;é›¶é£Ÿ_é¥¼å¹²&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:2,&#34;name&#34;:&#34;é¥¼å¹²&#34;,&#34;num&#34;:2,&#34;price&#34;:20}]}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ ¹æ®ä¸åŒæ¡ä»¶åˆ†ç»„ï¼š</span>
</span></span><span style="display:flex;"><span>Map&lt;String, List&lt;Product&gt;&gt; prodMap3 = prodList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(item -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span>(item.<span style="color:#007f7f">getNum</span>() &lt; 3) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>;
</span></span><span style="display:flex;"><span>    }<span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;other&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;other&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:3,&#34;name&#34;:&#34;æœˆé¥¼&#34;,&#34;num&#34;:3,&#34;price&#34;:30},{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:4,&#34;name&#34;:&#34;é’å²›å•¤é…’&#34;,&#34;num&#34;:3,&#34;price&#34;:10},{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:5,&#34;name&#34;:&#34;ç™¾å¨å•¤é…’&#34;,&#34;num&#34;:10,&#34;price&#34;:15}],&#34;3&#34;:[{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:1,&#34;name&#34;:&#34;é¢åŒ…&#34;,&#34;num&#34;:1,&#34;price&#34;:15.5},{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:2,&#34;name&#34;:&#34;é¥¼å¹²&#34;,&#34;num&#34;:2,&#34;price&#34;:20}]}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//---------å¤šçº§åˆ†ç»„</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æŒ‰å­ç»„æ”¶é›†æ•°æ®</span>
</span></span><span style="display:flex;"><span>Map&lt;String, Long&gt; prodMap4 = prodList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Product::getCategory, Collectors.<span style="color:#007f7f">counting</span>()));
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(prodMap4);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;å•¤é…’&#34;:2,&#34;é›¶é£Ÿ&#34;:3}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ±‚å’Œ</span>
</span></span><span style="display:flex;"><span>Map&lt;String, Integer&gt; prodMap5 = prodList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Product::getCategory, Collectors.<span style="color:#007f7f">summingInt</span>(Product::getNum)));
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(prodMap5);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;å•¤é…’&#34;:13,&#34;é›¶é£Ÿ&#34;:6}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æŠŠæ”¶é›†å™¨çš„ç»“æœè½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹</span>
</span></span><span style="display:flex;"><span>Map&lt;String, Product&gt; prodMap6 = prodList.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Product::getCategory,
</span></span><span style="display:flex;"><span>                                   Collectors.<span style="color:#007f7f">collectingAndThen</span>(Collectors.<span style="color:#007f7f">maxBy</span>(Comparator.<span style="color:#007f7f">comparingInt</span>(Product::getNum)), Optional::get)));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//{&#34;å•¤é…’&#34;:{&#34;category&#34;:&#34;å•¤é…’&#34;,&#34;id&#34;:5,&#34;name&#34;:&#34;ç™¾å¨å•¤é…’&#34;,&#34;num&#34;:10,&#34;price&#34;:15},&#34;é›¶é£Ÿ&#34;:{&#34;category&#34;:&#34;é›¶é£Ÿ&#34;,&#34;id&#34;:3,&#34;name&#34;:&#34;æœˆé¥¼&#34;,&#34;num&#34;:3,&#34;price&#34;:30}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="groupingbyçš„æ’åº">groupingByçš„æ’åº<a hidden class="anchor" aria-hidden="true" href="#groupingbyçš„æ’åº">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Question {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String type;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> sortOrder;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// çœç•¥get/setå’Œæ„é€ æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å‡å¦‚æœ‰ä¸€ä¸ªè¿™æ ·çš„list</span>
</span></span><span style="display:flex;"><span>List&lt;Question&gt; questions = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>questions.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Question(<span style="color:#0ff;font-weight:bold">&#34;ä¸™&#34;</span>, 3));
</span></span><span style="display:flex;"><span>questions.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Question(<span style="color:#0ff;font-weight:bold">&#34;ä¹™&#34;</span>, 2));
</span></span><span style="display:flex;"><span>questions.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Question(<span style="color:#0ff;font-weight:bold">&#34;ç”²&#34;</span>, 1));
</span></span><span style="display:flex;"><span>questions.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Question(<span style="color:#0ff;font-weight:bold">&#34;ä¸™&#34;</span>, 4));
</span></span><span style="display:flex;"><span>questions.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Question(<span style="color:#0ff;font-weight:bold">&#34;ä¹™&#34;</span>, 5));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æœŸæœ›æ ¹æ®typeå­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸”æ ¹æ®typeå­—æ®µæ’åº</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ–¹æ³•ä¸€ï¼šå› ä¸ºsortOrderå­—æ®µæ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å…ˆæ ¹æ®sortOrderå­—æ®µæ’åº</span>
</span></span><span style="display:flex;"><span>questions = questions.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">sorted</span>(Comparator.<span style="color:#007f7f">comparing</span>(Question::getSortOrder)).<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// åˆ†ç»„ï¼Œä½¿ç”¨LinkedHashMap</span>
</span></span><span style="display:flex;"><span>Map&lt;String, List&lt;Question&gt;&gt; groupedQuestions = questions.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Question::getType, LinkedHashMap::<span style="color:#fff;font-weight:bold">new</span>, Collectors.<span style="color:#007f7f">toList</span>()));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ‰“å°åˆ†ç»„ç»“æœ</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (Map.<span style="color:#007f7f">Entry</span>&lt;String, List&lt;Question&gt;&gt; entry : groupedQuestions.<span style="color:#007f7f">entrySet</span>()) {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;é¢˜å‹å: &#34;</span> + entry.<span style="color:#007f7f">getKey</span>());
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’åºç»“æœ: &#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (Question question : entry.<span style="color:#007f7f">getValue</span>()) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(question.<span style="color:#007f7f">getSortOrder</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;--------&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>é¢˜å‹å: ç”²
</span></span><span style="display:flex;"><span>æ’åºç»“æœ: 
</span></span><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>--------
</span></span><span style="display:flex;"><span>é¢˜å‹å: ä¹™
</span></span><span style="display:flex;"><span>æ’åºç»“æœ: 
</span></span><span style="display:flex;"><span>2
</span></span><span style="display:flex;"><span>5
</span></span><span style="display:flex;"><span>--------
</span></span><span style="display:flex;"><span>é¢˜å‹å: ä¸™
</span></span><span style="display:flex;"><span>æ’åºç»“æœ: 
</span></span><span style="display:flex;"><span>3
</span></span><span style="display:flex;"><span>4
</span></span><span style="display:flex;"><span>--------
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ–¹æ³•äºŒï¼šå…ˆåˆ†ç»„ï¼Œå¯¹åˆ†ç»„ç»“æœè¿›è¡Œæ’åº</span>
</span></span><span style="display:flex;"><span>Map&lt;String, List&lt;Question&gt;&gt; groupedQuestions = questions.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(Question::getType));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¯¹åˆ†ç»„ç»“æœè¿›è¡Œæ’åº</span>
</span></span><span style="display:flex;"><span>LinkedHashMap&lt;String, List&lt;Question&gt;&gt; sortedGroupedQuestions = <span style="color:#fff;font-weight:bold">new</span> LinkedHashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>groupedQuestions.<span style="color:#007f7f">entrySet</span>().<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEachOrdered</span>(entry -&gt; sortedGroupedQuestions.<span style="color:#007f7f">put</span>(entry.<span style="color:#007f7f">getKey</span>(), sortBySortOrder(entry.<span style="color:#007f7f">getValue</span>())));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> List&lt;Question&gt; sortBySortOrder(List&lt;Question&gt; questions) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> questions.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">sorted</span>(Comparator.<span style="color:#007f7f">comparingInt</span>(Question::getSortOrder))
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ç»“ï¼šå› ä¸º<code>groupingBy</code>åï¼Œmapçš„keyæ˜¯æ±‰å­—ï¼Œä¸èƒ½ä»¥è‡ªç„¶åºæ’åºï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½æ ¹æ®listä¸­çš„å…¶ä»–å†…å®¹è¿›è¡Œæ’åºã€‚</p>
<h2 id="collectorstomap">Collectors.toMap<a hidden class="anchor" aria-hidden="true" href="#collectorstomap">#</a></h2>
<p>æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ° List è½¬ Map æ“ä½œï¼Œä»¥å‰æˆ‘ä»¬ç”¨ for å¾ªç¯éå†çš„æ–¹å¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<br>
å…ˆå®šä¹‰ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// ç®€å•å¯¹è±¡ </span>
</span></span><span style="display:flex;"><span>@Accessors(chain = <span style="color:#fff;font-weight:bold">true</span>) <span style="color:#007f7f">// é“¾å¼æ–¹æ³• </span>
</span></span><span style="display:flex;"><span>@lombok.Data
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> User {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæœ‰è¿™æ ·ä¸€ä¸ª Listï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;User&gt; userList = Lists.<span style="color:#007f7f">newArrayList</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;æå››&#34;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‹äº”&#34;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¸Œæœ›è½¬æˆ Map çš„æ ¼å¼ä¸ºï¼š<br>
A-&gt; å¼ ä¸‰<br>
B-&gt; æå››<br>
C-&gt; ç‹äº”</p>
<p>è¿‡å»çš„åšæ³•ï¼ˆå¾ªç¯ï¼‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;String, String&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (User user : userList) {
</span></span><span style="display:flex;"><span>    map.<span style="color:#007f7f">put</span>(user.<span style="color:#007f7f">getId</span>(), user.<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Java8 ä¸­æ–°å¢äº† Stream ç‰¹æ€§ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨å¤„ç†é›†åˆæ“ä½œæ—¶æ›´æ–¹ä¾¿äº†ã€‚<br>
ä»¥ä¸Šè¿°ä¾‹å­ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¡Œä»£ç æå®šï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName));
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ï¼Œå¦‚æœå¸Œæœ›å¾—åˆ° Map çš„ value ä¸ºå¯¹è±¡æœ¬èº«æ—¶ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, t -&gt; t));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æˆ–è€…</span>
</span></span><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, Function.<span style="color:#007f7f">identity</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å…³äº-collectorstomap-æ–¹æ³•">å…³äº Collectors.toMap æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#å…³äº-collectorstomap-æ–¹æ³•">#</a></h3>
<p>Collectors.toMap æœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>toMap(Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> K&gt; keyMapper, Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> U&gt; valueMapper);
</span></span><span style="display:flex;"><span>toMap(Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> K&gt; keyMapper, Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> U&gt; valueMapper,
</span></span><span style="display:flex;"><span>        BinaryOperator&lt;U&gt; mergeFunction);
</span></span><span style="display:flex;"><span>toMap(Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> K&gt; keyMapper, Function&lt;? <span style="color:#fff;font-weight:bold">super</span> T, ? <span style="color:#fff;font-weight:bold">extends</span> U&gt; valueMapper,
</span></span><span style="display:flex;"><span>        BinaryOperator&lt;U&gt; mergeFunction, Supplier&lt;M&gt; mapSupplier);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚æ•°å«ä¹‰åˆ†åˆ«æ˜¯ï¼š<br>
keyMapperï¼šKey çš„æ˜ å°„å‡½æ•°<br>
valueMapperï¼šValue çš„æ˜ å°„å‡½æ•°<br>
mergeFunctionï¼šå½“ Key å†²çªæ—¶ï¼Œè°ƒç”¨çš„åˆå¹¶æ–¹æ³•<br>
mapSupplierï¼šMap æ„é€ å™¨ï¼Œåœ¨éœ€è¦è¿”å›ç‰¹å®šçš„ Map æ—¶ä½¿ç”¨<br>
è¿˜æ˜¯ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœ List ä¸­ userId æœ‰ç›¸åŒçš„ï¼Œä½¿ç”¨ä¸Šé¢çš„å†™æ³•ä¼šæŠ›å¼‚å¸¸ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;User&gt; userList = Lists.<span style="color:#007f7f">newArrayList</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;æå››&#34;</span>), <span style="color:#007f7f">// Key ç›¸åŒ </span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‹äº”&#34;</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¼‚å¸¸ï¼š</span>
</span></span><span style="display:flex;"><span>java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">IllegalStateException</span>: Duplicate key å¼ ä¸‰ 
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">Collectors</span>.<span style="color:#007f7f">lambda$throwingMerger$114</span>(Collectors.<span style="color:#007f7f">java</span>:133)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">HashMap</span>.<span style="color:#007f7f">merge</span>(HashMap.<span style="color:#007f7f">java</span>:1245)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">Collectors</span>.<span style="color:#007f7f">lambda$toMap$172</span>(Collectors.<span style="color:#007f7f">java</span>:1320)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">ReduceOps$3ReducingSink</span>.<span style="color:#007f7f">accept</span>(ReduceOps.<span style="color:#007f7f">java</span>:169)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">ArrayList$ArrayListSpliterator</span>.<span style="color:#007f7f">forEachRemaining</span>(ArrayList.<span style="color:#007f7f">java</span>:1374)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">AbstractPipeline</span>.<span style="color:#007f7f">copyInto</span>(AbstractPipeline.<span style="color:#007f7f">java</span>:481)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">AbstractPipeline</span>.<span style="color:#007f7f">wrapAndCopyInto</span>(AbstractPipeline.<span style="color:#007f7f">java</span>:471)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">ReduceOps$ReduceOp</span>.<span style="color:#007f7f">evaluateSequential</span>(ReduceOps.<span style="color:#007f7f">java</span>:708)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">AbstractPipeline</span>.<span style="color:#007f7f">evaluate</span>(AbstractPipeline.<span style="color:#007f7f">java</span>:234)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">ReferencePipeline</span>.<span style="color:#007f7f">collect</span>(ReferencePipeline.<span style="color:#007f7f">java</span>:499)
</span></span><span style="display:flex;"><span>    at Test.<span style="color:#007f7f">toMap</span>(Test.<span style="color:#007f7f">java</span>:17)
</span></span><span style="display:flex;"><span>    ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ—¶å°±éœ€è¦è°ƒç”¨ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•ï¼Œä¼ å…¥åˆå¹¶å‡½æ•°ï¼Œå¦‚å°†å€¼æ‹¼æ¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName, (v1,v2) -&gt; v1+v2)));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡ºç»“æœï¼š</span>
</span></span><span style="display:flex;"><span>A-&gt; å¼ ä¸‰æå›› 
</span></span><span style="display:flex;"><span>C-&gt; ç‹äº” 
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…å€¼è¦†ç›–ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åè¾¹çš„å€¼è¦†ç›–å‰è¾¹çš„å€¼</span>
</span></span><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName, (v1, v2) -&gt; v2));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å‰è¾¹çš„å€¼è¦†ç›–åè¾¹çš„å€¼</span>
</span></span><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName, (v1, v2) -&gt; v1));
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å››ä¸ªå‚æ•°ï¼ˆmapSupplierï¼‰ç”¨äºè‡ªå®šä¹‰è¿”å› Map ç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›è¿”å›çš„ Map æ˜¯æ ¹æ® Key æ’åºçš„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å†™æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;User&gt; userList = Lists.<span style="color:#007f7f">newArrayList</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;B&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;æå››&#34;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> User().<span style="color:#007f7f">setId</span>(<span style="color:#0ff;font-weight:bold">&#34;C&#34;</span>).<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‹äº”&#34;</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>userList.<span style="color:#007f7f">stream</span>().<span style="color:#007f7f">collect</span>(
</span></span><span style="display:flex;"><span>    Collectors.<span style="color:#007f7f">toMap</span>(User::getId, User::getName, (n1, n2) -&gt; n1, TreeMap::<span style="color:#fff;font-weight:bold">new</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡ºç»“æœï¼š</span>
</span></span><span style="display:flex;"><span>A-&gt; æå›› 
</span></span><span style="display:flex;"><span>B-&gt; å¼ ä¸‰ 
</span></span><span style="display:flex;"><span>C-&gt; ç‹äº” 
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="java8å†…ç½®çš„å‡½æ•°å¼æ¥å£">java8å†…ç½®çš„å‡½æ•°å¼æ¥å£<a hidden class="anchor" aria-hidden="true" href="#java8å†…ç½®çš„å‡½æ•°å¼æ¥å£">#</a></h1>
<p>JDK 1.8 API åŒ…å«äº†å¾ˆå¤šå†…ç½®çš„å‡½æ•°å¼æ¥å£ã€‚å…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬åœ¨è€ç‰ˆæœ¬ä¸­ç»å¸¸è§åˆ°çš„ Comparator å’Œ Runnableï¼ŒJava 8 ä¸ºä»–ä»¬éƒ½æ·»åŠ äº† @FunctionalInterface æ³¨è§£ï¼Œä»¥ç”¨æ¥æ”¯æŒ Lambda è¡¨è¾¾å¼ã€‚<br>
å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé™¤äº† Comparator å’Œ Runnable å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„å‡½æ•°å¼æ¥å£ï¼Œå®ƒä»¬å¾ˆå¤šéƒ½å€Ÿé‰´äºçŸ¥åçš„ Google Guava åº“ã€‚</p>
<h2 id="predicateæ–­è¨€">Predicateï¼šæ–­è¨€<a hidden class="anchor" aria-hidden="true" href="#predicateæ–­è¨€">#</a></h2>
<p>Predicate æ˜¯ä¸€ä¸ªå¯ä»¥æŒ‡å®šå…¥å‚ç±»å‹ï¼Œå¹¶è¿”å› boolean å€¼çš„å‡½æ•°å¼æ¥å£ã€‚å®ƒå†…éƒ¨æä¾›äº†ä¸€äº›å¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œå¯ä»¥è¢«ç”¨æ¥ç»„åˆä¸€ä¸ªå¤æ‚çš„é€»è¾‘åˆ¤æ–­ï¼ˆandã€orã€negateï¼‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å®šä¹‰predicateï¼ŒåŒ¿åå®ç°ï¼šåˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦å¤§äº0</span>
</span></span><span style="display:flex;"><span>Predicate&lt;String&gt; predicate = (s) -&gt; s.<span style="color:#007f7f">length</span>() &gt; 0;
</span></span><span style="display:flex;"><span>predicate.<span style="color:#007f7f">test</span>(<span style="color:#0ff;font-weight:bold">&#34;foo&#34;</span>);<span style="color:#007f7f">// true</span>
</span></span><span style="display:flex;"><span>predicate.<span style="color:#007f7f">negate</span>().<span style="color:#007f7f">test</span>(<span style="color:#0ff;font-weight:bold">&#34;foo&#34;</span>);<span style="color:#007f7f">// false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å®šä¹‰å…¶ä»–predicate</span>
</span></span><span style="display:flex;"><span>Predicate&lt;Boolean&gt; nonNull = Objects::nonNull;<span style="color:#007f7f">// énull</span>
</span></span><span style="display:flex;"><span>Predicate&lt;Boolean&gt; isNull = Objects::isNull;<span style="color:#007f7f">// null</span>
</span></span><span style="display:flex;"><span>Predicate&lt;String&gt; isEmpty = String::isEmpty;<span style="color:#007f7f">// ç©ºä¸²</span>
</span></span><span style="display:flex;"><span>Predicate&lt;String&gt; isNotEmpty = isEmpty.<span style="color:#007f7f">negate</span>();<span style="color:#007f7f">// éç©ºä¸²</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="function">Function<a hidden class="anchor" aria-hidden="true" href="#function">#</a></h2>
<p>Function å‡½æ•°å¼æ¥å£çš„ä½œç”¨æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æä¾›ä¸€ä¸ªåŸæ–™ï¼Œä»–ç»™ç”Ÿäº§ä¸€ä¸ªæœ€ç»ˆçš„äº§å“ã€‚é€šè¿‡å®ƒæä¾›çš„é»˜è®¤æ–¹æ³•ï¼Œç»„åˆï¼Œé“¾è¡Œå¤„ç†(composeã€andThen)ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å®šä¹‰Functionï¼Œå­—ç¬¦ä¸²è½¬integer</span>
</span></span><span style="display:flex;"><span>Function&lt;String, Integer&gt; toInteger = Integer::valueOf;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å®šä¹‰Functionï¼Œ+5</span>
</span></span><span style="display:flex;"><span>Function&lt;String, Integer&gt; integerAdd = toInteger.<span style="color:#007f7f">andThen</span>(i -&gt; i + 5);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(integerAdd.<span style="color:#007f7f">apply</span>(<span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>));<span style="color:#007f7f">// 6</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä¸Šè¾¹é€šè¿‡functionå®šä¹‰äº†ä¸€ä¸ªé“¾å¼æ“ä½œ<span style="color:#f00">ï¼Œ</span>å…ˆå°†ä¼ è¿›æ¥çš„å‚æ•°è½¬ä¸ºinteger<span style="color:#f00">ï¼Œ</span>ç„¶å+5<span style="color:#f00">ï¼Œ</span>æœ€ç»ˆç»“æœæ˜¯6<span style="color:#f00">ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="supplierç”Ÿäº§è€…">Supplierï¼šç”Ÿäº§è€…<a hidden class="anchor" aria-hidden="true" href="#supplierç”Ÿäº§è€…">#</a></h2>
<p>Supplier ä¸ Function ä¸åŒï¼Œå®ƒä¸æ¥å—å…¥å‚ï¼Œç›´æ¥ä¸ºæˆ‘ä»¬ç”Ÿäº§ä¸€ä¸ªæŒ‡å®šçš„ç»“æœï¼Œæœ‰ç‚¹åƒç”Ÿäº§è€…æ¨¡å¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String firstName;
</span></span><span style="display:flex;"><span>    String lastName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Person() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Person(String firstName, String lastName) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">firstName</span> = firstName;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">lastName</span> = lastName;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Supplier&lt;Person&gt; personSupplier = Person::<span style="color:#fff;font-weight:bold">new</span>;
</span></span><span style="display:flex;"><span>personSupplier.<span style="color:#007f7f">get</span>();   <span style="color:#007f7f">// new Person</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="consumeræ¶ˆè´¹è€…">Consumerï¼šæ¶ˆè´¹è€…<a hidden class="anchor" aria-hidden="true" href="#consumeræ¶ˆè´¹è€…">#</a></h2>
<p>å¯¹äº Consumerï¼Œæˆ‘ä»¬éœ€è¦æä¾›å…¥å‚ï¼Œç”¨æ¥è¢«æ¶ˆè´¹ï¼Œå¦‚ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String firstName;
</span></span><span style="display:flex;"><span>    String lastName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Person() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Person(String firstName, String lastName) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">firstName</span> = firstName;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">lastName</span> = lastName;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Consumer&lt;Person&gt; greeter = (p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello, &#34;</span> + p.<span style="color:#007f7f">firstName</span>);
</span></span><span style="display:flex;"><span>greeter.<span style="color:#007f7f">accept</span>(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Luke&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Skywalker&#34;</span>));
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="comparator">Comparator<a hidden class="anchor" aria-hidden="true" href="#comparator">#</a></h2>
<p>Comparator åœ¨ Java 8 ä¹‹å‰æ˜¯ä½¿ç”¨æ¯”è¾ƒæ™®éçš„ã€‚Java 8 ä¸­é™¤äº†å°†å…¶å‡çº§æˆäº†å‡½æ•°å¼æ¥å£ï¼Œè¿˜ä¸ºå®ƒæ‹“å±•äº†ä¸€äº›é»˜è®¤æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Comparator&lt;Person&gt; comparator = (p1, p2) -&gt; p1.<span style="color:#007f7f">firstName</span>.<span style="color:#007f7f">compareTo</span>(p2.<span style="color:#007f7f">firstName</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Person p1 = <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;John&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Doe&#34;</span>);
</span></span><span style="display:flex;"><span>Person p2 = <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Alice&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;Wonderland&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>comparator.<span style="color:#007f7f">compare</span>(p1, p2);             <span style="color:#007f7f">// &gt; 0</span>
</span></span><span style="display:flex;"><span>comparator.<span style="color:#007f7f">reversed</span>().<span style="color:#007f7f">compare</span>(p1, p2);  <span style="color:#007f7f">// &lt; 0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="optional">Optional<a hidden class="anchor" aria-hidden="true" href="#optional">#</a></h2>
<p>é¦–å…ˆï¼ŒOptional å®ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè®¾è®¡å®ƒçš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸ <code>NullPointerException</code>ã€‚<br>
è®©æˆ‘ä»¬æ¥å¿«é€Ÿäº†è§£ä¸€ä¸‹ Optional è¦å¦‚ä½•ä½¿ç”¨ï¼ä½ å¯ä»¥å°† Optional çœ‹åšæ˜¯åŒ…è£…å¯¹è±¡ï¼ˆå¯èƒ½æ˜¯ null, ä¹Ÿæœ‰å¯èƒ½é nullï¼‰çš„å®¹å™¨ã€‚å½“ä½ å®šä¹‰äº† ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡å¯èƒ½æ˜¯ç©ºï¼Œä¹Ÿæœ‰å¯èƒ½éç©ºçš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥è€ƒè™‘ç”¨ Optional æ¥åŒ…è£…å®ƒï¼Œè¿™ä¹Ÿæ˜¯åœ¨ Java 8 è¢«æ¨èä½¿ç”¨çš„åšæ³•ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Optional&lt;String&gt; optional = Optional.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;bam&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>optional.<span style="color:#007f7f">isPresent</span>();           <span style="color:#007f7f">// true</span>
</span></span><span style="display:flex;"><span>optional.<span style="color:#007f7f">get</span>();                 <span style="color:#007f7f">// &#34;bam&#34;</span>
</span></span><span style="display:flex;"><span>optional.<span style="color:#007f7f">orElse</span>(<span style="color:#0ff;font-weight:bold">&#34;fallback&#34;</span>);    <span style="color:#007f7f">// &#34;bam&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>optional.<span style="color:#007f7f">ifPresent</span>((s) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s.<span style="color:#007f7f">charAt</span>(0)));     <span style="color:#007f7f">// &#34;b&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®é™…åº”ç”¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªé«˜çº§ä¼šå‘˜</span>
</span></span><span style="display:flex;"><span>List&lt;VipProduct&gt; products = vipMapper.<span style="color:#007f7f">productInfo</span>(vipInfoVo.<span style="color:#007f7f">getId</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç­›é€‰å‡ºæ¯ä»½ä»·æ ¼æœ€ä½çš„</span>
</span></span><span style="display:flex;"><span>Optional&lt;BigDecimal&gt; min = products.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(i -&gt; i.<span style="color:#007f7f">getUnitPrice</span>())
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">min</span>(Comparator.<span style="color:#007f7f">naturalOrder</span>());
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (min.<span style="color:#007f7f">isPresent</span>()) {
</span></span><span style="display:flex;"><span>    BigDecimal minPrice = min.<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (BigDecimal.<span style="color:#007f7f">ZERO</span>.<span style="color:#007f7f">compareTo</span>(minPrice) == 0) {
</span></span><span style="display:flex;"><span>        minPrice = <span style="color:#fff;font-weight:bold">new</span> BigDecimal(<span style="color:#0ff;font-weight:bold">&#34;0.01&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ¯ä»½ä½è‡³å¤šå°‘å…ƒ</span>
</span></span><span style="display:flex;"><span>    vipInfoVo.<span style="color:#007f7f">setCent</span>(minPrice.<span style="color:#007f7f">toString</span>());
</span></span><span style="display:flex;"><span>} <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// é»˜è®¤0.1å…ƒ</span>
</span></span><span style="display:flex;"><span>    vipInfoVo.<span style="color:#007f7f">setCent</span>(<span style="color:#0ff;font-weight:bold">&#34;0.1&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="stream">stream<a hidden class="anchor" aria-hidden="true" href="#stream">#</a></h1>
<p>ä»€ä¹ˆæ˜¯ Stream ï¼Ÿ<br>
ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>java.util.Stream</code> å¯¹åŒ…å«å¤šä¸ªå…ƒç´ çš„é›†åˆåšå„ç§æ“ä½œã€‚è¿™äº›æ“ä½œå¯èƒ½æ˜¯<code>ä¸­é—´æ“ä½œ</code> äº¦æˆ–æ˜¯<code>ç»ˆç«¯æ“ä½œ</code>ã€‚ç»ˆç«¯æ“ä½œä¼šè¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œä¸­é—´æ“ä½œä¼šè¿”å›ä¸€ä¸ª Stream æµã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ åªèƒ½å¯¹å®ç°äº†<code>java.util.Collection</code> æ¥å£çš„ç±»åšæµçš„æ“ä½œã€‚Map ä¸æ”¯æŒ Stream æµã€‚</p>
<h2 id="filter-è¿‡æ»¤">Filter è¿‡æ»¤<a hidden class="anchor" aria-hidden="true" href="#filter-è¿‡æ»¤">#</a></h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª List é›†åˆï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;String&gt; stringCollection = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;ddd2&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;aaa2&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;bbb1&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;aaa1&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;bbb3&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;ccc&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;bbb2&#34;</span>);
</span></span><span style="display:flex;"><span>stringCollection.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;ddd1&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>Filter çš„å…¥å‚æ˜¯ä¸€ä¸ª Predicateï¼Œä¸Šé¢å·²ç»è¯´åˆ°ï¼ŒPredicate æ˜¯ä¸€ä¸ªæ–­è¨€çš„ä¸­é—´æ“ä½œï¼Œå®ƒèƒ½å¤Ÿå¸®æˆ‘ä»¬ç­›é€‰å‡ºæˆ‘ä»¬éœ€è¦çš„é›†åˆå…ƒç´ ã€‚å®ƒçš„è¿”å‚åŒæ · æ˜¯ä¸€ä¸ª Stream æµï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ foreach ç»ˆç«¯æ“ä½œï¼Œæ¥æ‰“å°è¢«ç­›é€‰çš„å…ƒç´ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// &#34;aaa2&#34;, &#34;aaa1&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šforeach æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒçš„è¿”å‚æ˜¯ voidï¼Œæ— æ³•å¯¹å…¶å†æ¬¡è¿›è¡Œæµæ“ä½œã€‚</p>
<h2 id="sorted-æ’åº">Sorted æ’åº<a hidden class="anchor" aria-hidden="true" href="#sorted-æ’åº">#</a></h2>
<p>Sorted åŒæ ·æ˜¯ä¸€ä¸ªä¸­é—´æ“ä½œï¼Œå®ƒçš„è¿”å‚æ˜¯ä¸€ä¸ª Stream æµã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ª Comparator ç”¨æ¥è‡ªå®šä¹‰æ’åºï¼Œå¦‚æœä¸ä¼ ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„æ’åºè§„åˆ™ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// &#34;aaa1&#34;, &#34;aaa2&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>éœ€è¦æ³¨æ„ï¼Œsorted ä¸ä¼šå¯¹ stringCollection åšå‡ºä»»ä½•æ”¹å˜ï¼ŒstringCollection è¿˜æ˜¯åŸæœ‰çš„é‚£äº›ä¸ªå…ƒç´ ï¼Œä¸”é¡ºåºä¸å˜ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(stringCollection);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ddd2, aaa2, bbb1, aaa1, bbb3, ccc, bbb2, ddd1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="map-è½¬æ¢">Map è½¬æ¢<a hidden class="anchor" aria-hidden="true" href="#map-è½¬æ¢">#</a></h2>
<p>ä¸­é—´æ“ä½œ Map èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å°† List ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åšåŠŸèƒ½å¤„ç†ã€‚ä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼Œé€šè¿‡ map æˆ‘ä»¬å°†æ¯ä¸€ä¸ª string è½¬æˆå¤§å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(String::toUpperCase)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>((a, b) -&gt; b.<span style="color:#007f7f">compareTo</span>(a))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// &#34;DDD2&#34;, &#34;DDD1&#34;, &#34;CCC&#34;, &#34;BBB3&#34;, &#34;BBB2&#34;, &#34;AAA2&#34;, &#34;AAA1&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="match-åŒ¹é…">Match åŒ¹é…<a hidden class="anchor" aria-hidden="true" href="#match-åŒ¹é…">#</a></h2>
<p>é¡¾åæ€ä¹‰ï¼Œmatch ç”¨æ¥åšåŒ¹é…æ“ä½œï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ª boolean ç±»å‹ã€‚é€šè¿‡ matchï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„éªŒè¯ä¸€ä¸ª list ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªç±»å‹çš„å…ƒç´ ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// éªŒè¯ list ä¸­ string æ˜¯å¦æœ‰ä»¥ a å¼€å¤´çš„, åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªï¼Œå³è¿”å› true</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">boolean</span> anyStartsWithA =
</span></span><span style="display:flex;"><span>    stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">anyMatch</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(anyStartsWithA);      <span style="color:#007f7f">// true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// éªŒè¯ list ä¸­ string æ˜¯å¦éƒ½æ˜¯ä»¥ a å¼€å¤´çš„</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">boolean</span> allStartsWithA =
</span></span><span style="display:flex;"><span>    stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">allMatch</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(allStartsWithA);      <span style="color:#007f7f">// false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// éªŒè¯ list ä¸­ string æ˜¯å¦éƒ½ä¸æ˜¯ä»¥ z å¼€å¤´çš„,</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">boolean</span> noneStartsWithZ =
</span></span><span style="display:flex;"><span>    stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">noneMatch</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;z&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(noneStartsWithZ);      <span style="color:#007f7f">// true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="count-è®¡æ•°">Count è®¡æ•°<a hidden class="anchor" aria-hidden="true" href="#count-è®¡æ•°">#</a></h2>
<p>count æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒèƒ½å¤Ÿç»Ÿè®¡ stream æµä¸­çš„å…ƒç´ æ€»æ•°ï¼Œè¿”å›å€¼æ˜¯ long ç±»å‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å…ˆå¯¹ list ä¸­å­—ç¬¦ä¸²å¼€å¤´ä¸º b è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åç»Ÿè®¡æ•°é‡</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">long</span> startsWithB =
</span></span><span style="display:flex;"><span>    stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>((s) -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;b&#34;</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">count</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(startsWithB);<span style="color:#007f7f">// 3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="reduce">Reduce<a hidden class="anchor" aria-hidden="true" href="#reduce">#</a></h2>
<p>Reduce ä¸­æ–‡ç¿»è¯‘ä¸ºï¼šå‡å°‘ã€ç¼©å°ã€‚é€šè¿‡å…¥å‚çš„ Functionï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°† list å½’çº¦æˆä¸€ä¸ªå€¼ã€‚å®ƒçš„è¿”å›ç±»å‹æ˜¯ Optional ç±»å‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Optional&lt;String&gt; reduced =
</span></span><span style="display:flex;"><span>    stringCollection
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>((s1, s2) -&gt; s1 + <span style="color:#0ff;font-weight:bold">&#34;#&#34;</span> + s2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>reduced.<span style="color:#007f7f">ifPresent</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// &#34;aaa1#aaa2#bbb1#bbb2#bbb3#ccc#ddd1#ddd2&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="parallel-streams-å¹¶è¡Œæµ">Parallel-Streams å¹¶è¡Œæµ<a hidden class="anchor" aria-hidden="true" href="#parallel-streams-å¹¶è¡Œæµ">#</a></h2>
<p>stream æµæ˜¯æ”¯æŒé¡ºåºå’Œå¹¶è¡Œçš„ã€‚é¡ºåºæµæ“ä½œæ˜¯å•çº¿ç¨‹æ“ä½œï¼Œè€Œå¹¶è¡Œæµæ˜¯é€šè¿‡å¤šçº¿ç¨‹æ¥å¤„ç†çš„ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç‰©ç†æœºå¤šæ ¸CPU çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶å¤„ç†é€Ÿåº¦æ›´å¿«ã€‚<br>
é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å« 1000000 UUID list é›†åˆã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> max = 1000000;
</span></span><span style="display:flex;"><span>List&lt;String&gt; values = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;(max);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = 0; i &lt; max; i++) {
</span></span><span style="display:flex;"><span>    UUID uuid = UUID.<span style="color:#007f7f">randomUUID</span>();
</span></span><span style="display:flex;"><span>    values.<span style="color:#007f7f">add</span>(uuid.<span style="color:#007f7f">toString</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ†åˆ«é€šè¿‡é¡ºåºæµå’Œå¹¶è¡Œæµï¼Œå¯¹è¿™ä¸ª list è¿›è¡Œæ’åºï¼Œæµ‹ç®—è€—æ—¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// å¼€å§‹æ—¶é—´</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">long</span> startTime = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä¸²è¡Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//long count = values.stream().sorted().count();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å¹¶è¡Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">long</span> count = values.<span style="color:#007f7f">parallelStream</span>().<span style="color:#007f7f">sorted</span>().<span style="color:#007f7f">count</span>();
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(count);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç»“æŸæ—¶é—´</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">long</span> endTime = System.<span style="color:#007f7f">currentTimeMillis</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(String.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’åºè€—æ—¶: %d ms&#34;</span>, endTime - startTime));
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ä¸²è¡Œæ’åºè€—æ—¶: 505 ms</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¹¶è¡Œæ’åºè€—æ—¶: 302 ms</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åŒæ ·çš„é€»è¾‘å¤„ç†ï¼Œé€šè¿‡å¹¶è¡Œæµï¼Œæˆ‘ä»¬çš„æ€§èƒ½æå‡äº†è¿‘ 50%ã€‚å®Œæˆè¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬éœ€è¦åšçš„ä»…ä»…æ˜¯å°† stream æ”¹æˆäº† parallelStreamã€‚</p>
<h2 id="map-é›†åˆ">Map é›†åˆ<a hidden class="anchor" aria-hidden="true" href="#map-é›†åˆ">#</a></h2>
<p>å‰é¢å·²ç»æåˆ°è¿‡ Map æ˜¯ä¸æ”¯æŒ Stream æµçš„ï¼Œå› ä¸º Map æ¥å£å¹¶æ²¡æœ‰åƒ Collection æ¥å£é‚£æ ·ï¼Œå®šä¹‰äº† stream() æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶ keyã€valuesã€entry ä½¿ç”¨æµæ“ä½œï¼Œå¦‚ <code>map.keySet().stream()</code>ã€<code>map.values().stream()</code> å’Œ <code>map.entrySet().stream()</code>ã€‚<br>
å¦å¤–ï¼ŒJDK 8 ä¸­å¯¹ map æä¾›äº†ä¸€äº›å…¶ä»–æ–°ç‰¹æ€§ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;Integer, String&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//putIfAbent()ï¼šput ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­ key æ˜¯å¦å­˜åœ¨ï¼Œ</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// - å¦‚æœkeyå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å› value</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// - å¦‚æœkeyä¸å­˜åœ¨ï¼Œåˆ™ put, å†è¿”å› value</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">putIfAbsent</span>(1, <span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));<span style="color:#007f7f">// null</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">putIfAbsent</span>(1, <span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));<span style="color:#007f7f">// a</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// forEach å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹ map è¿›è¡Œéå†æ“ä½œ</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">forEach</span>((key, value) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(value));
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™¤äº†ä¸Šé¢çš„ <code>putIfAbsent()</code> å’Œ <code>forEach()</code> å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æŸä¸ª key çš„å€¼åšç›¸å…³æ“ä½œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// computeIfPresent(), å½“ key å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåšç›¸å…³å¤„ç†</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¦‚ä¸‹ï¼šå¯¹ key ä¸º 3 çš„å€¼ï¼Œå†…éƒ¨ä¼šå…ˆåˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ï¼Œåˆ™åš value + key çš„æ‹¼æ¥æ“ä½œ</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(3,<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">computeIfPresent</span>(3, (k, v) -&gt; k + v);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">get</span>(3);<span style="color:#007f7f">// 3a</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å…ˆåˆ¤æ–­ key ä¸º 9 çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ï¼Œåˆ™åšåˆ é™¤æ“ä½œ</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">computeIfPresent</span>(9, (k, v) -&gt; <span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">containsKey</span>(9));<span style="color:#007f7f">// false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// computeIfAbsent(), å½“ key ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåšç›¸å…³å¤„ç†</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¦‚ä¸‹ï¼šå…ˆåˆ¤æ–­ key ä¸º 23 çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ 23,å¹¶è®¾ç½®value</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">computeIfAbsent</span>(23, num -&gt; <span style="color:#0ff;font-weight:bold">&#34;23å­˜åœ¨&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">get</span>(23));<span style="color:#007f7f">// true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…³äºåˆ é™¤æ“ä½œï¼ŒJDK 8 ä¸­æä¾›äº†æ–°çš„ <code>remove()</code> APIï¼š<br>
åªæœ‰å½“ç»™å®šçš„ key å’Œ value å®Œå…¨åŒ¹é…æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œåˆ é™¤æ“ä½œã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(3,<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">remove</span>(3, <span style="color:#0ff;font-weight:bold">&#34;abc&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">get</span>(3));<span style="color:#007f7f">// a</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">remove</span>(3, <span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map.<span style="color:#007f7f">get</span>(3));<span style="color:#007f7f">// null</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…³äºæ·»åŠ æ–¹æ³•ï¼ŒJDK 8 ä¸­æä¾›äº†å¸¦æœ‰é»˜è®¤å€¼çš„ <code>getOrDefault()</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// è‹¥ key 42 ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› not found</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">getOrDefault</span>(42, <span style="color:#0ff;font-weight:bold">&#34;not found&#34;</span>);  <span style="color:#007f7f">// not found</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äº value çš„åˆå¹¶æ“ä½œä¹Ÿå˜å¾—æ›´åŠ ç®€å•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// merge æ–¹æ³•ï¼Œä¼šå…ˆåˆ¤æ–­è¿›è¡Œåˆå¹¶çš„ key æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ·»åŠ å…ƒç´ </span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">merge</span>(9, <span style="color:#0ff;font-weight:bold">&#34;val9&#34;</span>, (value, newValue) -&gt; value.<span style="color:#007f7f">concat</span>(newValue));
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">get</span>(9);             <span style="color:#007f7f">// val9</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è‹¥ key çš„å…ƒç´ å­˜åœ¨ï¼Œåˆ™å¯¹ value æ‰§è¡Œæ‹¼æ¥æ“ä½œ</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">merge</span>(9, <span style="color:#0ff;font-weight:bold">&#34;concat&#34;</span>, (value, newValue) -&gt; value.<span style="color:#007f7f">concat</span>(newValue));
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">get</span>(9);             <span style="color:#007f7f">// val9concat</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="stream-çš„å¤„ç†é¡ºåº">Stream çš„å¤„ç†é¡ºåº<a hidden class="anchor" aria-hidden="true" href="#stream-çš„å¤„ç†é¡ºåº">#</a></h2>
<p>ä¸­é—´æ“ä½œçš„æœ‰ä¸ªé‡è¦ç‰¹æ€§ â€”â€” å»¶è¿Ÿæ€§ã€‚è§‚å¯Ÿä¸‹é¢è¿™ä¸ªæ²¡æœ‰ç»ˆç«¯æ“ä½œçš„ç¤ºä¾‹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    });
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µä»£ç ä¸ä¼šæ‰“å°ä»»ä½•å†…å®¹ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥‡æ€ªã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>
åŸå› æ˜¯ï¼šå½“ä¸”ä»…å½“å­˜åœ¨ç»ˆç«¯æ“ä½œæ—¶ï¼Œä¸­é—´æ“ä½œæ“ä½œæ‰ä¼šè¢«æ‰§è¡Œã€‚<br>
æ˜¯ä¸æ˜¯ä¸ä¿¡ï¼Ÿæ¥ä¸‹æ¥ï¼Œå¯¹ä¸Šé¢çš„ä»£ç æ·»åŠ  forEachç»ˆç«¯æ“ä½œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: &#34;</span> + s));
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡æ‰§è¡Œï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>filter:  d2
</span></span><span style="display:flex;"><span>forEach: d2
</span></span><span style="display:flex;"><span>filter:  a2
</span></span><span style="display:flex;"><span>forEach: a2
</span></span><span style="display:flex;"><span>filter:  b1
</span></span><span style="display:flex;"><span>forEach: b1
</span></span><span style="display:flex;"><span>filter:  b3
</span></span><span style="display:flex;"><span>forEach: b3
</span></span><span style="display:flex;"><span>filter:  c
</span></span><span style="display:flex;"><span>forEach: c
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ˜¯ä¸æ˜¯å¾ˆå¥‡æ€ªï¼Œä¸æ˜¯åº”è¯¥å…ˆå°†æ‰€æœ‰ filter å‰ç¼€çš„å­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ï¼Œæ¥ç€æ‰ä¼šæ‰“å° forEach å‰ç¼€çš„å­—ç¬¦ä¸²ä¹ˆï¼Ÿäº‹å®ä¸Šï¼Œè¾“å‡ºçš„ç»“æœå´æ˜¯éšç€é“¾æ¡å‚ç›´ç§»åŠ¨çš„ã€‚æ¯”å¦‚è¯´ï¼Œå½“ Stream å¼€å§‹å¤„ç† d2 å…ƒç´ æ—¶ï¼Œå®ƒå®é™…ä¸Šä¼šåœ¨æ‰§è¡Œå®Œ filter æ“ä½œåï¼Œå†æ‰§è¡Œ forEach æ“ä½œï¼Œæ¥ç€æ‰ä¼šå¤„ç†ç¬¬äºŒä¸ªå…ƒç´ ã€‚ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆè¿™æ ·å‘¢ï¼ŸåŸå› æ˜¯å‡ºäºæ€§èƒ½çš„è€ƒè™‘ã€‚è¿™æ ·è®¾è®¡å¯ä»¥å‡å°‘å¯¹æ¯ä¸ªå…ƒç´ çš„å®é™…æ“ä½œæ•°ï¼Œçœ‹å®Œä¸‹é¢ä»£ç ä½ å°±æ˜ç™½äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;map: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>(); <span style="color:#007f7f">// è½¬å¤§å†™</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">anyMatch</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;anyMatch: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>); <span style="color:#007f7f">// è¿‡æ»¤å‡ºä»¥ A ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:      d2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// anyMatch: D2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:      a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// anyMatch: A2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»ˆç«¯æ“ä½œ anyMatch()è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå…ƒç´ ä»¥ A ä¸ºå‰ç¼€ï¼Œè¿”å›ä¸º trueï¼Œå°±åœæ­¢å¾ªç¯ã€‚æ‰€ä»¥å®ƒä¼šä» d2 å¼€å§‹åŒ¹é…ï¼Œæ¥ç€å¾ªç¯åˆ° a2 çš„æ—¶å€™ï¼Œè¿”å›ä¸º true ï¼Œäºæ˜¯åœæ­¢å¾ªç¯ã€‚<br>
ç”±äºæ•°æ®æµçš„é“¾å¼è°ƒç”¨æ˜¯å‚ç›´æ‰§è¡Œçš„ï¼Œmapè¿™é‡Œåªéœ€è¦æ‰§è¡Œä¸¤æ¬¡ã€‚ç›¸å¯¹äºæ°´å¹³æ‰§è¡Œæ¥è¯´ï¼Œmapä¼šæ‰§è¡Œå°½å¯èƒ½å°‘çš„æ¬¡æ•°ï¼Œè€Œä¸æ˜¯æŠŠæ‰€æœ‰å…ƒç´ éƒ½ map è½¬æ¢ä¸€éã€‚</p>
<h2 id="ä¸­é—´æ“ä½œçš„é¡ºåº">ä¸­é—´æ“ä½œçš„é¡ºåº<a hidden class="anchor" aria-hidden="true" href="#ä¸­é—´æ“ä½œçš„é¡ºåº">#</a></h2>
<p>ä¸‹é¢çš„ä¾‹å­ç”±ä¸¤ä¸ªä¸­é—´æ“ä½œmapå’Œfilterï¼Œä»¥åŠä¸€ä¸ªç»ˆç«¯æ“ä½œforEachç»„æˆã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™äº›æ“ä½œæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;map: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>(); <span style="color:#007f7f">// è½¬å¤§å†™</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>); <span style="color:#007f7f">// è¿‡æ»¤å‡ºä»¥ A ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: &#34;</span> + s)); <span style="color:#007f7f">// for å¾ªç¯è¾“å‡º</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     d2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  D2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  A2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// forEach: A2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     b1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  B1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     b3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  B3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     c</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  C</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­¦ä¹ äº†ä¸Šé¢ä¸€å°èŠ‚ï¼Œæ‚¨åº”è¯¥å·²ç»çŸ¥é“äº†ï¼Œmapå’Œfilterä¼šå¯¹é›†åˆä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²è°ƒç”¨äº”æ¬¡ï¼Œè€ŒforEachå´åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºåªæœ‰ &ldquo;a2&rdquo; æ»¡è¶³è¿‡æ»¤æ¡ä»¶ã€‚<br>
å¦‚æœæˆ‘ä»¬æ”¹å˜ä¸­é—´æ“ä½œçš„é¡ºåºï¼Œå°†filterç§»åŠ¨åˆ°é“¾å¤´çš„æœ€å¼€å§‹ï¼Œå°±å¯ä»¥å¤§å¤§å‡å°‘å®é™…çš„æ‰§è¡Œæ¬¡æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>); <span style="color:#007f7f">// è¿‡æ»¤å‡ºä»¥ a ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;map: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>(); <span style="color:#007f7f">// è½¬å¤§å†™</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: &#34;</span> + s)); <span style="color:#007f7f">// for å¾ªç¯è¾“å‡º</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  d2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// forEach: A2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  b1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  b3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  c</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨ï¼Œmapä»…ä»…åªéœ€è°ƒç”¨ä¸€æ¬¡ï¼Œæ€§èƒ½å¾—åˆ°äº†æå‡ï¼Œè¿™ç§å°æŠ€å·§å¯¹äºæµä¸­å­˜åœ¨å¤§é‡å…ƒç´ æ¥è¯´ï¼Œæ˜¯éå¸¸å¾ˆæœ‰ç”¨çš„ã€‚<br>
æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç å†æ·»åŠ ä¸€ä¸ªä¸­é—´æ“ä½œsortedï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>((s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;sort: %s; %s\n&#34;</span>, s1, s2);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2); <span style="color:#007f7f">// æ’åº</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>); <span style="color:#007f7f">// è¿‡æ»¤å‡ºä»¥ a ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;map: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>(); <span style="color:#007f7f">// è½¬å¤§å†™</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: &#34;</span> + s)); <span style="color:#007f7f">// for å¾ªç¯è¾“å‡º</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>sorted æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„æ“ä½œï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œä¿å­˜çŠ¶æ€ä»¥å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚<br>
æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>sort:    a2; d2
</span></span><span style="display:flex;"><span>sort:    b1; a2
</span></span><span style="display:flex;"><span>sort:    b1; d2
</span></span><span style="display:flex;"><span>sort:    b1; a2
</span></span><span style="display:flex;"><span>sort:    b3; b1
</span></span><span style="display:flex;"><span>sort:    b3; d2
</span></span><span style="display:flex;"><span>sort:    c; b3
</span></span><span style="display:flex;"><span>sort:    c; d2
</span></span><span style="display:flex;"><span>filter:  a2
</span></span><span style="display:flex;"><span>map:     a2
</span></span><span style="display:flex;"><span>forEach: A2
</span></span><span style="display:flex;"><span>filter:  b1
</span></span><span style="display:flex;"><span>filter:  b3
</span></span><span style="display:flex;"><span>filter:  c
</span></span><span style="display:flex;"><span>filter:  d2
</span></span></code></pre></td></tr></table>
</div>
</div><p>å’¦ï¼Ÿè¿™æ¬¡æ€ä¹ˆåˆä¸æ˜¯å‚ç›´æ‰§è¡Œäº†ã€‚ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œsortedæ˜¯æ°´å¹³æ‰§è¡Œçš„ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œsortedä¼šå¯¹é›†åˆä¸­çš„å…ƒç´ ç»„åˆè°ƒç”¨å…«æ¬¡ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸Šé¢è¯´é“çš„ä¼˜åŒ–æŠ€å·§ï¼Œå°† filter è¿‡æ»¤ä¸­é—´æ“ä½œç§»åŠ¨åˆ°å¼€å¤´éƒ¨åˆ†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>((s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">printf</span>(<span style="color:#0ff;font-weight:bold">&#34;sort: %s; %s\n&#34;</span>, s1, s2);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;map: &#34;</span> + s);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>();
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: &#34;</span> + s));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  d2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  b1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  b3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// filter:  c</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// map:     a2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// forEach: A2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† sortedä»æœªè¢«è°ƒç”¨è¿‡ï¼Œå› ä¸ºç»è¿‡filterè¿‡åçš„å…ƒç´ å·²ç»å‡å°‘åˆ°åªæœ‰ä¸€ä¸ªï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ç”¨æ‰§è¡Œæ’åºæ“ä½œçš„ã€‚å› æ­¤æ€§èƒ½è¢«å¤§å¤§æé«˜äº†ã€‚</p>
<h2 id="æ•°æ®æµå¤ç”¨é—®é¢˜">æ•°æ®æµå¤ç”¨é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®æµå¤ç”¨é—®é¢˜">#</a></h2>
<p>Java8 Stream æµæ˜¯ä¸èƒ½è¢«å¤ç”¨çš„ï¼Œä¸€æ—¦ä½ è°ƒç”¨ä»»ä½•ç»ˆç«¯æ“ä½œï¼Œæµå°±ä¼šå…³é—­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream&lt;String&gt; stream =
</span></span><span style="display:flex;"><span>    Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">filter</span>(s -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stream.<span style="color:#007f7f">anyMatch</span>(s -&gt; <span style="color:#fff;font-weight:bold">true</span>);    <span style="color:#007f7f">// ok</span>
</span></span><span style="display:flex;"><span>stream.<span style="color:#007f7f">noneMatch</span>(s -&gt; <span style="color:#fff;font-weight:bold">true</span>);   <span style="color:#007f7f">// exception</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬å¯¹ stream è°ƒç”¨äº† anyMatch ç»ˆç«¯æ“ä½œä»¥åï¼Œæµå³å…³é—­äº†ï¼Œå†è°ƒç”¨ noneMatch å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>java.<span style="color:#007f7f">lang</span>.<span style="color:#007f7f">IllegalStateException</span>: stream has already been operated upon or closed
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">AbstractPipeline</span>.<span style="color:#007f7f">evaluate</span>(AbstractPipeline.<span style="color:#007f7f">java</span>:229)
</span></span><span style="display:flex;"><span>    at java.<span style="color:#007f7f">util</span>.<span style="color:#007f7f">stream</span>.<span style="color:#007f7f">ReferencePipeline</span>.<span style="color:#007f7f">noneMatch</span>(ReferencePipeline.<span style="color:#007f7f">java</span>:459)
</span></span><span style="display:flex;"><span>    at com.<span style="color:#007f7f">winterbe</span>.<span style="color:#007f7f">java8</span>.<span style="color:#007f7f">Streams5</span>.<span style="color:#007f7f">test7</span>(Streams5.<span style="color:#007f7f">java</span>:38)
</span></span><span style="display:flex;"><span>    at com.<span style="color:#007f7f">winterbe</span>.<span style="color:#007f7f">java8</span>.<span style="color:#007f7f">Streams5</span>.<span style="color:#007f7f">main</span>(Streams5.<span style="color:#007f7f">java</span>:28)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºäº†å…‹æœè¿™ä¸ªé™åˆ¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æ¯ä¸ªç»ˆç«¯æ“ä½œåˆ›å»ºä¸€ä¸ªæ–°çš„æµé“¾ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Supplier æ¥åŒ…è£…ä¸€ä¸‹æµï¼Œé€šè¿‡ get() æ–¹æ³•æ¥æ„å»ºä¸€ä¸ªæ–°çš„ Stream æµï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Supplier&lt;Stream&lt;String&gt;&gt; streamSupplier =
</span></span><span style="display:flex;"><span>    () -&gt; Stream.<span style="color:#007f7f">of</span>(<span style="color:#0ff;font-weight:bold">&#34;d2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; s.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;a&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>streamSupplier.<span style="color:#007f7f">get</span>().<span style="color:#007f7f">anyMatch</span>(s -&gt; <span style="color:#fff;font-weight:bold">true</span>);   <span style="color:#007f7f">// ok</span>
</span></span><span style="display:flex;"><span>streamSupplier.<span style="color:#007f7f">get</span>().<span style="color:#007f7f">noneMatch</span>(s -&gt; <span style="color:#fff;font-weight:bold">true</span>);  <span style="color:#007f7f">// ok</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æ„é€ ä¸€ä¸ªæ–°çš„æµï¼Œæ¥é¿å¼€æµä¸èƒ½è¢«å¤ç”¨çš„é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯å–å·§çš„ä¸€ç§æ–¹å¼ã€‚</p>
<h2 id="é«˜çº§æ“ä½œ">é«˜çº§æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#é«˜çº§æ“ä½œ">#</a></h2>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a><br>
æœ¬å°èŠ‚ä¸­çš„å¤§å¤šæ•°ä»£ç ç¤ºä¾‹å‡ä¼šä½¿ç”¨ä»¥ä¸‹ <code>List&lt;Person&gt;</code>è¿›è¡Œæ¼”ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> age;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Person(String name, <span style="color:#fff;font-weight:bold">int</span> age) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ„å»ºä¸€ä¸ª Person é›†åˆ</span>
</span></span><span style="display:flex;"><span>List&lt;Person&gt; persons =
</span></span><span style="display:flex;"><span>    Arrays.<span style="color:#007f7f">asList</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Max&#34;</span>, 18),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Peter&#34;</span>, 23),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Pamela&#34;</span>, 23),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;David&#34;</span>, 12));
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="collect">Collect<a hidden class="anchor" aria-hidden="true" href="#collect">#</a></h3>
<p>collect æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç»ˆç«¯æ“ä½œï¼Œå®ƒå¯ä»¥å°†æµä¸­çš„å…ƒç´ è½¬å˜æˆå¦å¤–ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ªListï¼ŒSetæˆ–Mapã€‚collect æ¥å—å…¥å‚ä¸ºCollectorï¼ˆæ”¶é›†å™¨ï¼‰ï¼Œå®ƒç”±å››ä¸ªä¸åŒçš„æ“ä½œç»„æˆï¼šä¾›åº”å™¨ï¼ˆsupplierï¼‰ã€ç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰ã€ç»„åˆå™¨ï¼ˆcombinerï¼‰å’Œç»ˆæ­¢å™¨ï¼ˆfinisherï¼‰ã€‚<br>
è¿™äº›éƒ½æ˜¯ä¸ªå•¥ï¼Ÿåˆ«æ…Œï¼Œçœ‹ä¸Šå»éå¸¸å¤æ‚çš„æ ·å­ï¼Œä½†å¥½åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¹¶ä¸éœ€è¦è‡ªå·±å»å®ç°æ”¶é›†å™¨ã€‚å› ä¸º Java 8é€šè¿‡Collectorsç±»å†…ç½®äº†å„ç§å¸¸ç”¨çš„æ”¶é›†å™¨ï¼Œä½ ç›´æ¥æ‹¿æ¥ç”¨å°±è¡Œäº†ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Person&gt; filtered =
</span></span><span style="display:flex;"><span>    persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>() <span style="color:#007f7f">// æ„å»ºæµ</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(p -&gt; p.<span style="color:#007f7f">name</span>.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;P&#34;</span>)) <span style="color:#007f7f">// è¿‡æ»¤å‡ºåå­—ä»¥ P å¼€å¤´çš„</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toList</span>()); <span style="color:#007f7f">// ç”Ÿæˆä¸€ä¸ªæ–°çš„ List</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(filtered);    <span style="color:#007f7f">// [Peter, Pamela]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ ä¹Ÿçœ‹åˆ°äº†ï¼Œä»æµä¸­æ„é€ ä¸€ä¸ª List å¼‚å¸¸ç®€å•ã€‚å¦‚æœè¯´ä½ éœ€è¦æ„é€ ä¸€ä¸ª Set é›†åˆï¼Œåªéœ€è¦ä½¿ç”¨<code>Collectors.toSet()</code>å°±å¯ä»¥äº†ã€‚</p>
<p>ä¸‹é¢æŒ‰å¹´é¾„å¯¹æ‰€æœ‰äººè¿›è¡Œåˆ†ç»„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;Integer, List&lt;Person&gt;&gt; personsByAge = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">groupingBy</span>(p -&gt; p.<span style="color:#007f7f">age</span>)); <span style="color:#007f7f">// ä»¥å¹´é¾„ä¸º key,è¿›è¡Œåˆ†ç»„</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>personsByAge.<span style="color:#007f7f">forEach</span>((age, p) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;age %s: %s\n&#34;</span>, age, p));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// age 18: [Max]</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// age 23: [Peter, Pamela]</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// age 12: [David]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œèšåˆæ“ä½œï¼Œä¾‹å¦‚ï¼Œè®¡ç®—æ‰€æœ‰äººçš„å¹³å‡å¹´é¾„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Double averageAge = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">averagingInt</span>(p -&gt; p.<span style="color:#007f7f">age</span>)); <span style="color:#007f7f">// èšåˆå‡ºå¹³å‡å¹´é¾„</span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(averageAge);     <span style="color:#007f7f">// 19.0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ‚¨è¿˜æƒ³å¾—åˆ°ä¸€ä¸ªæ›´å…¨é¢çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ‘˜è¦æ”¶é›†å™¨å¯ä»¥è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½®ç»Ÿè®¡å¯¹è±¡ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è®¡ç®—å‡ºæœ€å°å¹´é¾„ã€æœ€å¤§å¹´é¾„ã€å¹³å‡å¹´é¾„ã€æ€»å’Œä»¥åŠæ€»æ•°é‡ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>IntSummaryStatistics ageSummary =
</span></span><span style="display:flex;"><span>    persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">summarizingInt</span>(p -&gt; p.<span style="color:#007f7f">age</span>)); <span style="color:#007f7f">// ç”Ÿæˆæ‘˜è¦ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(ageSummary);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// IntSummaryStatistics{count=4, sum=76, min=12, average=19.000000, max=23}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°†æ‰€æœ‰äººåè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String phrase = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(p -&gt; p.<span style="color:#007f7f">age</span> &gt;= 18) <span style="color:#007f7f">// è¿‡æ»¤å‡ºå¹´é¾„å¤§äºç­‰äº18çš„</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(p -&gt; p.<span style="color:#007f7f">name</span>) <span style="color:#007f7f">// æå–åå­—</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ä»¥ In Germany å¼€å¤´ï¼Œand è¿æ¥å„å…ƒç´ ï¼Œå†ä»¥ are of legal age. ç»“æŸ</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">joining</span>(<span style="color:#0ff;font-weight:bold">&#34; and &#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;In Germany &#34;</span>, <span style="color:#0ff;font-weight:bold">&#34; are of legal age.&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(phrase);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// In Germany Max and Peter and Pamela are of legal age.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°†æµè½¬æ¢ä¸º Mapé›†åˆï¼Œå¿…é¡»æŒ‡å®š Map çš„é”®å’Œå€¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒMap çš„é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalStateException å¼‚å¸¸ã€‚<br>
ä½ å¯ä»¥é€‰æ‹©ä¼ é€’ä¸€ä¸ªåˆå¹¶å‡½æ•°ä½œä¸ºé¢å¤–çš„å‚æ•°æ¥é¿å…å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;Integer, String&gt; map = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(Collectors.<span style="color:#007f7f">toMap</span>(
</span></span><span style="display:flex;"><span>        p -&gt; p.<span style="color:#007f7f">age</span>,
</span></span><span style="display:flex;"><span>        p -&gt; p.<span style="color:#007f7f">name</span>,
</span></span><span style="display:flex;"><span>        (name1, name2) -&gt; name1 + <span style="color:#0ff;font-weight:bold">&#34;;&#34;</span> + name2)); <span style="color:#007f7f">// å¯¹äºåŒæ · key çš„ï¼Œå°†å€¼æ‹¼æ¥</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(map);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// {18=Max, 23=Peter;Pamela, 12=David}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°è¯•æ„å»ºè‡ªå®šä¹‰æ”¶é›†å™¨ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æµä¸­çš„æ‰€æœ‰äººè½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«æ‰€æœ‰å¤§å†™çš„åç§°ï¼Œå¹¶ä»¥|åˆ†å‰²ã€‚ä¸ºäº†è¾¾åˆ°è¿™ç§æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Collector.of()åˆ›å»ºä¸€ä¸ªæ–°çš„æ”¶é›†å™¨ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¼ å…¥æ”¶é›†å™¨çš„å››ä¸ªç»„æˆéƒ¨åˆ†ï¼šä¾›åº”å™¨ã€ç´¯åŠ å™¨ã€ç»„åˆå™¨å’Œç»ˆæ­¢å™¨ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Collector&lt;Person, StringJoiner, String&gt; personNameCollector =
</span></span><span style="display:flex;"><span>    Collector.<span style="color:#007f7f">of</span>(
</span></span><span style="display:flex;"><span>    () -&gt; <span style="color:#fff;font-weight:bold">new</span> StringJoiner(<span style="color:#0ff;font-weight:bold">&#34; | &#34;</span>),          <span style="color:#007f7f">// supplier ä¾›åº”å™¨</span>
</span></span><span style="display:flex;"><span>    (j, p) -&gt; j.<span style="color:#007f7f">add</span>(p.<span style="color:#007f7f">name</span>.<span style="color:#007f7f">toUpperCase</span>()),  <span style="color:#007f7f">// accumulator ç´¯åŠ å™¨</span>
</span></span><span style="display:flex;"><span>    (j1, j2) -&gt; j1.<span style="color:#007f7f">merge</span>(j2),               <span style="color:#007f7f">// combiner ç»„åˆå™¨</span>
</span></span><span style="display:flex;"><span>    StringJoiner::toString);                <span style="color:#007f7f">// finisher ç»ˆæ­¢å™¨</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String names = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">collect</span>(personNameCollector); <span style="color:#007f7f">// ä¼ å…¥è‡ªå®šä¹‰çš„æ”¶é›†å™¨</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(names);  <span style="color:#007f7f">// MAX | PETER | PAMELA | DAVID</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äºJava ä¸­çš„å­—ç¬¦ä¸²æ˜¯ final ç±»å‹çš„ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©è¾…åŠ©ç±»StringJoinerï¼Œæ¥å¸®æˆ‘ä»¬æ„é€ å­—ç¬¦ä¸²ã€‚<br>
æœ€å¼€å§‹ä¾›åº”å™¨ä½¿ç”¨åˆ†éš”ç¬¦æ„é€ äº†ä¸€ä¸ªStringJointerã€‚<br>
ç´¯åŠ å™¨ç”¨äºå°†æ¯ä¸ªäººçš„äººåè½¬å¤§å†™ï¼Œç„¶ååŠ åˆ°StringJointerä¸­ã€‚<br>
ç»„åˆå™¨å°†ä¸¤ä¸ªStringJointeråˆå¹¶ä¸ºä¸€ä¸ªã€‚<br>
æœ€ç»ˆï¼Œç»ˆç»“å™¨ä»StringJointeræ„é€ å‡ºé¢„æœŸçš„å­—ç¬¦ä¸²ã€‚</p>
<h3 id="flatmap-1">FlatMap<a hidden class="anchor" aria-hidden="true" href="#flatmap-1">#</a></h3>
<p>ä¸Šé¢æˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚é€šè¿‡mapæ“ä½œï¼Œå°†æµä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚ä½†æ˜¯ï¼ŒMapåªèƒ½å°†æ¯ä¸ªå¯¹è±¡æ˜ å°„åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¯´ï¼Œæˆ‘ä»¬æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¤šä¸ªå…¶ä»–å¯¹è±¡æˆ–è€…æ ¹æœ¬ä¸åšè½¬æ¢æ“ä½œå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼ŒflatMapå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>FlatMap èƒ½å¤Ÿå°†æµçš„æ¯ä¸ªå…ƒç´ ï¼Œè½¬æ¢ä¸ºå…¶ä»–å¯¹è±¡çš„æµã€‚å› æ­¤ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥è¢«è½¬æ¢ä¸ºé›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å¯¹è±¡ï¼Œå¹¶ä»¥æµçš„æ–¹å¼è¿”å›ã€‚ä¹‹åï¼Œè¿™äº›æµçš„å†…å®¹ä¼šè¢«æ”¾å…¥flatMapè¿”å›çš„æµä¸­ã€‚<br>
åœ¨å­¦ä¹ å¦‚ä½•å®é™…æ“ä½œflatMapä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ–°å»ºä¸¤ä¸ªç±»ï¼Œç”¨æ¥æµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Foo {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    List&lt;Bar&gt; bars = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Foo(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Bar {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Bar(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡æˆ‘ä»¬ä¸Šé¢å­¦ä¹ åˆ°çš„æµçŸ¥è¯†ï¼Œæ¥å®ä¾‹åŒ–ä¸€äº›å¯¹è±¡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Foo&gt; foos = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// åˆ›å»º foos é›†åˆ</span>
</span></span><span style="display:flex;"><span>IntStream
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">range</span>(1, 4)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(i -&gt; foos.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Foo(<span style="color:#0ff;font-weight:bold">&#34;Foo&#34;</span> + i)));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// åˆ›å»º bars é›†åˆ</span>
</span></span><span style="display:flex;"><span>foos.<span style="color:#007f7f">forEach</span>(f -&gt;
</span></span><span style="display:flex;"><span>             IntStream.<span style="color:#007f7f">range</span>(1, 4)
</span></span><span style="display:flex;"><span>             .<span style="color:#007f7f">forEach</span>(i -&gt; f.<span style="color:#007f7f">bars</span>.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> Bar(<span style="color:#0ff;font-weight:bold">&#34;Bar&#34;</span> + i + <span style="color:#0ff;font-weight:bold">&#34; &lt;- &#34;</span> + f.<span style="color:#007f7f">name</span>))));
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬åˆ›å»ºäº†åŒ…å«ä¸‰ä¸ªfooçš„é›†åˆï¼Œæ¯ä¸ªfooä¸­åˆåŒ…å«ä¸‰ä¸ª barã€‚<br>
flatMap çš„å…¥å‚æ¥å—ä¸€ä¸ªè¿”å›å¯¹è±¡æµçš„å‡½æ•°ã€‚ä¸ºäº†å¤„ç†æ¯ä¸ªfooä¸­çš„barï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥ç›¸åº” stream æµï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>foos.<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">flatMap</span>(f -&gt; f.<span style="color:#007f7f">bars</span>.<span style="color:#007f7f">stream</span>())
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(b -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(b.<span style="color:#007f7f">name</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar1 &lt;- Foo1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar2 &lt;- Foo1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar3 &lt;- Foo1</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar1 &lt;- Foo2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar2 &lt;- Foo2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar3 &lt;- Foo2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar1 &lt;- Foo3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar2 &lt;- Foo3</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Bar3 &lt;- Foo3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å·²æˆåŠŸå°†ä¸‰ä¸ª fooå¯¹è±¡çš„æµè½¬æ¢ä¸ºä¹ä¸ªbarå¯¹è±¡çš„æµã€‚<br>
æœ€åï¼Œä¸Šé¢çš„è¿™æ®µä»£ç å¯ä»¥ç®€åŒ–ä¸ºå•ä¸€çš„æµå¼æ“ä½œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>IntStream.<span style="color:#007f7f">range</span>(1, 4)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">mapToObj</span>(i -&gt; <span style="color:#fff;font-weight:bold">new</span> Foo(<span style="color:#0ff;font-weight:bold">&#34;Foo&#34;</span> + i))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">peek</span>(f -&gt; IntStream.<span style="color:#007f7f">range</span>(1, 4)
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">mapToObj</span>(i -&gt; <span style="color:#fff;font-weight:bold">new</span> Bar(<span style="color:#0ff;font-weight:bold">&#34;Bar&#34;</span> + i + <span style="color:#0ff;font-weight:bold">&#34; &lt;- &#34;</span> f.<span style="color:#007f7f">name</span>))
</span></span><span style="display:flex;"><span>        .<span style="color:#007f7f">forEach</span>(f.<span style="color:#007f7f">bars</span>::add))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">flatMap</span>(f -&gt; f.<span style="color:#007f7f">bars</span>.<span style="color:#007f7f">stream</span>())
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(b -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(b.<span style="color:#007f7f">name</span>));
</span></span></code></pre></td></tr></table>
</div>
</div><p>flatMapä¹Ÿå¯ç”¨äºJava8å¼•å…¥çš„Optionalç±»ã€‚Optionalçš„flatMapæ“ä½œè¿”å›ä¸€ä¸ªOptionalæˆ–å…¶ä»–ç±»å‹çš„å¯¹è±¡ã€‚æ‰€ä»¥å®ƒå¯ä»¥ç”¨äºé¿å…ç¹ççš„nullæ£€æŸ¥ã€‚<br>
æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå±‚æ¬¡æ›´æ·±çš„å¯¹è±¡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Outer {
</span></span><span style="display:flex;"><span>    Nested nested;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Nested {
</span></span><span style="display:flex;"><span>    Inner inner;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Inner {
</span></span><span style="display:flex;"><span>    String foo;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºäº†å¤„ç†ä» Outer å¯¹è±¡ä¸­è·å–æœ€åº•å±‚çš„ foo å­—ç¬¦ä¸²ï¼Œä½ éœ€è¦æ·»åŠ å¤šä¸ªnullæ£€æŸ¥æ¥é¿å…å¯èƒ½å‘ç”Ÿçš„NullPointerExceptionï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Outer outer = <span style="color:#fff;font-weight:bold">new</span> Outer();
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> (outer != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; outer.<span style="color:#007f7f">nested</span> != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; outer.<span style="color:#007f7f">nested</span>.<span style="color:#007f7f">inner</span> != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(outer.<span style="color:#007f7f">nested</span>.<span style="color:#007f7f">inner</span>.<span style="color:#007f7f">foo</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨Optionalçš„flatMapæ“ä½œï¼Œæ¥å®Œæˆä¸Šè¿°ç›¸åŒåŠŸèƒ½çš„åˆ¤æ–­ï¼Œä¸”æ›´åŠ ä¼˜é›…ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Optional.<span style="color:#007f7f">of</span>(<span style="color:#fff;font-weight:bold">new</span> Outer())
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">flatMap</span>(o -&gt; Optional.<span style="color:#007f7f">ofNullable</span>(o.<span style="color:#007f7f">nested</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">flatMap</span>(n -&gt; Optional.<span style="color:#007f7f">ofNullable</span>(n.<span style="color:#007f7f">inner</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">flatMap</span>(i -&gt; Optional.<span style="color:#007f7f">ofNullable</span>(i.<span style="color:#007f7f">foo</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">ifPresent</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä¸ä¸ºç©ºçš„è¯ï¼Œæ¯ä¸ªflatMapçš„è°ƒç”¨éƒ½ä¼šè¿”å›é¢„æœŸå¯¹è±¡çš„OptionalåŒ…è£…ï¼Œå¦åˆ™è¿”å›ä¸ºnullçš„OptionalåŒ…è£…ç±»ã€‚</p>
<h3 id="reduce-1">Reduce<a hidden class="anchor" aria-hidden="true" href="#reduce-1">#</a></h3>
<p>è§„çº¦æ“ä½œå¯ä»¥å°†æµçš„æ‰€æœ‰å…ƒç´ ç»„åˆæˆä¸€ä¸ªç»“æœã€‚Java 8 æ”¯æŒä¸‰ç§ä¸åŒçš„reduceæ–¹æ³•ã€‚ç¬¬ä¸€ç§å°†æµä¸­çš„å…ƒç´ è§„çº¦æˆæµä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ¥ç­›é€‰å‡ºå¹´é¾„æœ€å¤§çš„é‚£ä¸ªäººï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>((p1, p2) -&gt; p1.<span style="color:#007f7f">age</span> &gt; p2.<span style="color:#007f7f">age</span> ? p1 : p2)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">ifPresent</span>(System.<span style="color:#007f7f">out</span>::println);    <span style="color:#007f7f">// Pamela</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>reduceæ–¹æ³•æ¥å— <code>BinaryOperator</code> ç§¯ç´¯å‡½æ•°ã€‚è¯¥å‡½æ•°å®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ç›¸åŒçš„ <code>BiFunction</code>ã€‚<code>BiFunction</code> åŠŸèƒ½å’ŒFunctionä¸€æ ·ï¼Œä½†æ˜¯å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒä¸¤ä¸ªäººçš„å¹´é¾„ï¼Œæ¥è¿”å›å¹´é¾„è¾ƒå¤§çš„äººã€‚<br>
ç¬¬äºŒç§reduceæ–¹æ³•æ¥å—æ ‡è¯†å€¼å’Œ <code>BinaryOperator</code> ç´¯åŠ å™¨ã€‚æ­¤æ–¹æ³•å¯ç”¨äºæ„é€ ä¸€ä¸ªæ–°çš„ Personï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªæµä¸­æ‰€æœ‰å…¶ä»–äººçš„èšåˆåç§°å’Œå¹´é¾„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Person result =
</span></span><span style="display:flex;"><span>    persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>(<span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, 0), (p1, p2) -&gt; {
</span></span><span style="display:flex;"><span>        p1.<span style="color:#007f7f">age</span> += p2.<span style="color:#007f7f">age</span>;
</span></span><span style="display:flex;"><span>        p1.<span style="color:#007f7f">name</span> += p2.<span style="color:#007f7f">name</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> p1;
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;name=%s; age=%s&#34;</span>, result.<span style="color:#007f7f">name</span>, result.<span style="color:#007f7f">age</span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// name=MaxPeterPamelaDavid; age=76</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰ç§reduceæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šæ ‡è¯†å€¼ï¼ŒBiFunctionç´¯åŠ å™¨å’Œç±»å‹çš„ç»„åˆå™¨å‡½æ•°BinaryOperatorã€‚ç”±äºåˆå§‹å€¼çš„ç±»å‹ä¸ä¸€å®šä¸ºPersonï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå½’çº¦å‡½æ•°æ¥è®¡ç®—æ‰€æœ‰äººçš„å¹´é¾„æ€»å’Œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Integer ageSum = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>(0, (sum, p) -&gt; sum += p.<span style="color:#007f7f">age</span>, (sum1, sum2) -&gt; sum1 + sum2);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(ageSum);  <span style="color:#007f7f">// 76</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœä¸º76ï¼Œä½†æ˜¯å†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬å†æ‰“å°ä¸€äº›è°ƒè¯•æ—¥å¿—ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Integer ageSum = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>(0,
</span></span><span style="display:flex;"><span>            (sum, p) -&gt; {
</span></span><span style="display:flex;"><span>                System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;accumulator: sum=%s; person=%s\n&#34;</span>, sum, p);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> sum += p.<span style="color:#007f7f">age</span>;
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            (sum1, sum2) -&gt; {
</span></span><span style="display:flex;"><span>                System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;combiner: sum1=%s; sum2=%s\n&#34;</span>, sum1, sum2);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> sum1 + sum2;
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=0; person=Max</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=18; person=Peter</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=41; person=Pamela</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=64; person=David</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œç´¯åŠ å™¨å‡½æ•°å®Œæˆäº†æ‰€æœ‰å·¥ä½œã€‚å®ƒé¦–å…ˆä½¿ç”¨åˆå§‹å€¼0å’Œç¬¬ä¸€ä¸ªäººå¹´é¾„ç›¸åŠ ã€‚æ¥ä¸‹æ¥çš„ä¸‰æ­¥ä¸­sumä¼šæŒç»­å¢åŠ ï¼Œç›´åˆ°76ã€‚<br>
ç­‰ç­‰ï¼Ÿå¥½åƒå“ªé‡Œä¸å¤ªå¯¹ï¼ç»„åˆå™¨ä»æ¥éƒ½æ²¡æœ‰è°ƒç”¨è¿‡å•Šï¼Ÿ<br>
æˆ‘ä»¬ä»¥å¹¶è¡Œæµçš„æ–¹å¼è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œçœ‹çœ‹æ—¥å¿—è¾“å‡ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Integer ageSum = persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">parallelStream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>(0,
</span></span><span style="display:flex;"><span>        (sum, p) -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;accumulator: sum=%s; person=%s\n&#34;</span>, sum, p);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> sum += p.<span style="color:#007f7f">age</span>;
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        (sum1, sum2) -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;combiner: sum1=%s; sum2=%s\n&#34;</span>, sum1, sum2);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> sum1 + sum2;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=0; person=Pamela</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=0; person=David</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=0; person=Max</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// accumulator: sum=0; person=Peter</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// combiner: sum1=18; sum2=23</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// combiner: sum1=23; sum2=12</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// combiner: sum1=41; sum2=35</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¹¶è¡Œæµçš„æ‰§è¡Œæ–¹å¼å®Œå…¨ä¸åŒã€‚è¿™é‡Œç»„åˆå™¨è¢«è°ƒç”¨äº†ã€‚å®é™…ä¸Šï¼Œç”±äºç´¯åŠ å™¨è¢«å¹¶è¡Œè°ƒç”¨ï¼Œç»„åˆå™¨éœ€è¦è¢«ç”¨äºè®¡ç®—éƒ¨åˆ†ç´¯åŠ å€¼çš„æ€»å’Œã€‚è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€ç« æ·±å…¥æ¢è®¨å¹¶è¡Œæµã€‚</p>
<h3 id="å¹¶è¡Œæµ">å¹¶è¡Œæµ<a hidden class="anchor" aria-hidden="true" href="#å¹¶è¡Œæµ">#</a></h3>
<p>æµæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œå½“æµä¸­å­˜åœ¨å¤§é‡å…ƒç´ æ—¶ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚å¹¶è¡Œæµåº•å±‚ä½¿ç”¨çš„ForkJoinPool, å®ƒç”±ForkJoinPool.commonPool()æ–¹æ³•æä¾›ã€‚åº•å±‚çº¿ç¨‹æ± çš„å¤§å°æœ€å¤šä¸ºäº”ä¸ª - å…·ä½“å–å†³äº CPU å¯ç”¨æ ¸å¿ƒæ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ForkJoinPool commonPool = ForkJoinPool.<span style="color:#007f7f">commonPool</span>();
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(commonPool.<span style="color:#007f7f">getParallelism</span>());    <span style="color:#007f7f">// 7</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œå…¬å…±æ± åˆå§‹åŒ–é»˜è®¤å€¼ä¸º 7ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®ä»¥ä¸‹JVMå‚æ•°å¯ä»¥å‡å°æˆ–å¢åŠ æ­¤å€¼ï¼š<br>
<code>-Djava.util.concurrent.ForkJoinPool.common.parallelism=5</code></p>
<p>é›†åˆæ”¯æŒparallelStream()æ–¹æ³•æ¥åˆ›å»ºå…ƒç´ çš„å¹¶è¡Œæµã€‚æˆ–è€…ä½ å¯ä»¥åœ¨å·²å­˜åœ¨çš„æ•°æ®æµä¸Šè°ƒç”¨ä¸­é—´æ–¹æ³•parallel()ï¼Œå°†ä¸²è¡Œæµè½¬æ¢ä¸ºå¹¶è¡Œæµï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br>
ä¸ºäº†è¯¦ç»†äº†è§£å¹¶è¡Œæµçš„æ‰§è¡Œè¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ‰“å°å½“å‰çº¿ç¨‹çš„ä¿¡æ¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">asList</span>(<span style="color:#0ff;font-weight:bold">&#34;a1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c1&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">parallelStream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>            s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;map: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>            s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>();
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>        s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æ—¥å¿—è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å“ªä¸ªçº¿ç¨‹è¢«ç”¨äºæ‰§è¡Œæµå¼æ“ä½œï¼Œæœ‰ä¸ªæ›´æ·±å…¥çš„ç†è§£ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>filter:  b1 [main]
</span></span><span style="display:flex;"><span>filter:  a2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>map:     a2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>filter:  c2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>map:     c2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>filter:  c1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>map:     c1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>forEach: C2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>forEach: A2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>map:     b1 [main]
</span></span><span style="display:flex;"><span>forEach: B1 [main]
</span></span><span style="display:flex;"><span>filter:  a1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>map:     a1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>forEach: A1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>forEach: C1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æ‚¨æ‰€è§ï¼Œå¹¶è¡Œæµä½¿ç”¨äº†æ‰€æœ‰çš„ForkJoinPoolä¸­çš„å¯ç”¨çº¿ç¨‹æ¥æ‰§è¡Œæµå¼æ“ä½œã€‚<br>
è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸­é—´æ“ä½œsortæ¥æ‰©å±•ä¸Šé¢ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">asList</span>(<span style="color:#0ff;font-weight:bold">&#34;a1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;a2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;b1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;c1&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">parallelStream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">filter</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;filter: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>            s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">map</span>(s -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;map: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>            s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">toUpperCase</span>();
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">sorted</span>((s1, s2) -&gt; {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;sort: %s &lt;&gt; %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>            s1, s2, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> s1.<span style="color:#007f7f">compareTo</span>(s2);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">forEach</span>(s -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;forEach: %s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>        s, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>()));
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä»£ç ï¼Œè¾“å‡ºç»“æœçœ‹ä¸Šå»æœ‰äº›å¥‡æ€ªï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>filter:  c2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>filter:  c1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>map:     c1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>filter:  a2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>map:     a2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>filter:  b1 [main]
</span></span><span style="display:flex;"><span>map:     b1 [main]
</span></span><span style="display:flex;"><span>filter:  a1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>map:     a1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>map:     c2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>sort:    A2 &lt;&gt; A1 [main]
</span></span><span style="display:flex;"><span>sort:    B1 &lt;&gt; A2 [main]
</span></span><span style="display:flex;"><span>sort:    C2 &lt;&gt; B1 [main]
</span></span><span style="display:flex;"><span>sort:    C1 &lt;&gt; C2 [main]
</span></span><span style="display:flex;"><span>sort:    C1 &lt;&gt; B1 [main]
</span></span><span style="display:flex;"><span>sort:    C1 &lt;&gt; C2 [main]
</span></span><span style="display:flex;"><span>forEach: A1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>forEach: C2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>forEach: B1 [main]
</span></span><span style="display:flex;"><span>forEach: A2 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>forEach: C1 [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span></code></pre></td></tr></table>
</div>
</div><p>è²Œä¼¼sortåªåœ¨ä¸»çº¿ç¨‹ä¸Šä¸²è¡Œæ‰§è¡Œã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œå¹¶è¡Œæµä¸­çš„sortåœ¨åº•å±‚ä½¿ç”¨äº†Java8ä¸­æ–°çš„æ–¹æ³•Arrays.parallelSort()ã€‚å¦‚ javadocå®˜æ–¹æ–‡æ¡£è§£é‡Šçš„ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæŒ‰ç…§æ•°æ®é•¿åº¦æ¥å†³å®šä»¥ä¸²è¡Œæ–¹å¼ï¼Œæˆ–è€…ä»¥å¹¶è¡Œçš„æ–¹å¼æ¥æ‰§è¡Œã€‚<br>
å›åˆ°ä¸Šå°èŠ‚ reduceçš„ä¾‹å­ã€‚æˆ‘ä»¬å·²ç»å‘ç°äº†ç»„åˆå™¨å‡½æ•°åªåœ¨å¹¶è¡Œæµä¸­è°ƒç”¨ï¼Œè€Œä¸ä¸ä¼šåœ¨ä¸²è¡Œæµä¸­è¢«è°ƒç”¨ã€‚è®©æˆ‘ä»¬æ¥å®é™…è§‚å¯Ÿä¸€ä¸‹æ¶‰åŠåˆ°å“ªä¸ªçº¿ç¨‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Person&gt; persons = Arrays.<span style="color:#007f7f">asList</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Max&#34;</span>, 18),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Peter&#34;</span>, 23),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;Pamela&#34;</span>, 23),
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> Person(<span style="color:#0ff;font-weight:bold">&#34;David&#34;</span>, 12));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>persons
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">parallelStream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">reduce</span>(0,
</span></span><span style="display:flex;"><span>        (sum, p) -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;accumulator: sum=%s; person=%s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>                sum, p, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> sum += p.<span style="color:#007f7f">age</span>;
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        (sum1, sum2) -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">format</span>(<span style="color:#0ff;font-weight:bold">&#34;combiner: sum1=%s; sum2=%s [%s]\n&#34;</span>,
</span></span><span style="display:flex;"><span>                sum1, sum2, Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> sum1 + sum2;
</span></span><span style="display:flex;"><span>        });
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æ§åˆ¶å°æ—¥å¿—è¾“å‡ºï¼Œç´¯åŠ å™¨å’Œç»„åˆå™¨å‡åœ¨æ‰€æœ‰å¯ç”¨çš„çº¿ç¨‹ä¸Šå¹¶è¡Œæ‰§è¡Œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>accumulator: sum=0; person=Pamela; [main]
</span></span><span style="display:flex;"><span>accumulator: sum=0; person=Max;    [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-3]
</span></span><span style="display:flex;"><span>accumulator: sum=0; person=David;  [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>accumulator: sum=0; person=Peter;  [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>combiner:    sum1=18; sum2=23;     [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-1]
</span></span><span style="display:flex;"><span>combiner:    sum1=23; sum2=12;     [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span><span style="display:flex;"><span>combiner:    sum1=41; sum2=35;     [ForkJoinPool.<span style="color:#007f7f">commonPool</span>-worker-2]
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ä¹‹ï¼Œå¹¶è¡Œæµå¯¹å«æœ‰å¤§é‡å…ƒç´ çš„æ•°æ®æµæå‡æ€§èƒ½æå¤§ã€‚ä½†æ˜¯ä½ ä¹Ÿéœ€è¦è®°ä½å¹¶è¡Œæµçš„ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚reduceå’Œcollectæ“ä½œï¼Œéœ€è¦é¢å¤–çš„è®¡ç®—ï¼ˆå¦‚ç»„åˆæ“ä½œï¼‰ï¼Œè¿™åœ¨ä¸²è¡Œæ‰§è¡Œæ—¶æ˜¯å¹¶ä¸éœ€è¦ã€‚<br>
æ­¤å¤–ï¼Œæ‰€æœ‰å¹¶è¡Œæµæ“ä½œéƒ½å…±äº«ç›¸åŒçš„ JVM ç›¸å…³çš„å…¬å…±ForkJoinPoolã€‚æ‰€ä»¥ä½ å¯èƒ½éœ€è¦é¿å…å†™å‡ºä¸€äº›åˆæ…¢åˆå¡çš„æµå¼æ“ä½œï¼Œè¿™å¾ˆæœ‰å¯èƒ½ä¼šæ‹–æ…¢ä½ åº”ç”¨ä¸­ï¼Œä¸¥é‡ä¾èµ–å¹¶è¡Œæµçš„å…¶å®ƒéƒ¨åˆ†ä»£ç çš„æ€§èƒ½ã€‚</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/java%E5%9F%BA%E7%A1%80/">JavaåŸºç¡€</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
