<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>23_MyBatis | Wjy&#39;s Blog</title>
<meta name="keywords" content="javaåŸºç¡€">
<meta name="description" content="ä¸€ã€MyBatisæ¦‚è¿° 1.1 æ¡†æ¶ åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ Javaå¸¸ç”¨æ¡†æ¶ï¼š SSMä¸‰å¤§æ¡†æ¶ï¼šSpring &#43; SpringMVC &#43; MyBatis SpringBoot SpringCloud ç­‰ã€‚ã€‚ æ¡†æ¶">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://009965.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://009965.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://009965.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://009965.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://009965.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/">
  <meta property="og:site_name" content="Wjy&#39;s Blog">
  <meta property="og:title" content="23_MyBatis">
  <meta property="og:description" content="ä¸€ã€MyBatisæ¦‚è¿° 1.1 æ¡†æ¶ åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ Javaå¸¸ç”¨æ¡†æ¶ï¼š SSMä¸‰å¤§æ¡†æ¶ï¼šSpring &#43; SpringMVC &#43; MyBatis SpringBoot SpringCloud ç­‰ã€‚ã€‚ æ¡†æ¶">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-08-18T15:40:43+00:00">
    <meta property="article:modified_time" content="2022-08-18T15:40:43+00:00">
    <meta property="article:tag" content="JavaåŸºç¡€">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="23_MyBatis">
<meta name="twitter:description" content="ä¸€ã€MyBatisæ¦‚è¿° 1.1 æ¡†æ¶ åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ Javaå¸¸ç”¨æ¡†æ¶ï¼š SSMä¸‰å¤§æ¡†æ¶ï¼šSpring &#43; SpringMVC &#43; MyBatis SpringBoot SpringCloud ç­‰ã€‚ã€‚ æ¡†æ¶">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://009965.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "23_MyBatis",
      "item": "https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "23_MyBatis",
  "name": "23_MyBatis",
  "description": "ä¸€ã€MyBatisæ¦‚è¿° 1.1 æ¡†æ¶ åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ Javaå¸¸ç”¨æ¡†æ¶ï¼š SSMä¸‰å¤§æ¡†æ¶ï¼šSpring + SpringMVC + MyBatis SpringBoot SpringCloud ç­‰ã€‚ã€‚ æ¡†æ¶",
  "keywords": [
    "javaåŸºç¡€"
  ],
  "articleBody": "ä¸€ã€MyBatisæ¦‚è¿° 1.1 æ¡†æ¶ åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ Javaå¸¸ç”¨æ¡†æ¶ï¼š SSMä¸‰å¤§æ¡†æ¶ï¼šSpring + SpringMVC + MyBatis SpringBoot SpringCloud ç­‰ã€‚ã€‚ æ¡†æ¶å…¶å®å°±æ˜¯å¯¹é€šç”¨ä»£ç çš„å°è£…ï¼Œæå‰å†™å¥½äº†ä¸€å †æ¥å£å’Œç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšé¡¹ç›®çš„æ—¶å€™ç›´æ¥å¼•å…¥è¿™äº›æ¥å£å’Œç±»ï¼ˆå¼•å…¥æ¡†æ¶ï¼‰ï¼ŒåŸºäºè¿™äº›ç°æœ‰çš„æ¥å£å’Œç±»è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚ æ¡†æ¶ä¸€èˆ¬éƒ½ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚(jaråŒ…ä¸­æœ‰classæ–‡ä»¶ä»¥åŠå„ç§é…ç½®æ–‡ä»¶ç­‰ã€‚) SSMä¸‰å¤§æ¡†æ¶çš„å­¦ä¹ é¡ºåºï¼šMyBatisã€Springã€SpringMVCï¼ˆä»…ä»…æ˜¯å»ºè®®ï¼‰ 1.2 ä¸‰å±‚æ¶æ„ è¡¨ç°å±‚ï¼ˆUIï¼‰ï¼šç›´æ¥è·Ÿå‰ç«¯æ‰“äº¤äº’ï¼ˆä¸€æ˜¯æ¥æ”¶å‰ç«¯ajaxè¯·æ±‚ï¼ŒäºŒæ˜¯è¿”å›jsonæ•°æ®ç»™å‰ç«¯ï¼‰ ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆBLLï¼‰ï¼šä¸€æ˜¯å¤„ç†è¡¨ç°å±‚è½¬å‘è¿‡æ¥çš„å‰ç«¯è¯·æ±‚ï¼ˆä¹Ÿå°±æ˜¯å…·ä½“ä¸šåŠ¡ï¼‰ï¼ŒäºŒæ˜¯å°†ä»æŒä¹…å±‚è·å–çš„æ•°æ®è¿”å›åˆ°è¡¨ç°å±‚ã€‚ æ•°æ®è®¿é—®å±‚ï¼ˆDALï¼‰ï¼šç›´æ¥æ“ä½œæ•°æ®åº“å®ŒæˆCRUDï¼Œå¹¶å°†è·å¾—çš„æ•°æ®è¿”å›åˆ°ä¸Šä¸€å±‚ï¼ˆä¹Ÿå°±æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼‰ã€‚ JavaæŒä¹…å±‚æ¡†æ¶ï¼š MyBatis Hibernateï¼ˆå®ç°äº†JPAè§„èŒƒï¼‰ jOOQ Guzz Spring Dataï¼ˆå®ç°äº†JPAè§„èŒƒï¼‰ ActiveJDBC â€¦â€¦ 1.3 JDBCä¸è¶³ ç¤ºä¾‹ä»£ç 1ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // ...... // sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­ String sql = \"insert into t_user(id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade) values(?,?,?,?,?,?,?,?,?,?,?,?)\"; PreparedStatement ps = conn.prepareStatement(sql); // ç¹ççš„èµ‹å€¼ï¼šæ€è€ƒä¸€ä¸‹ï¼Œè¿™ç§æœ‰è§„å¾‹çš„ä»£ç èƒ½ä¸èƒ½é€šè¿‡åå°„æœºåˆ¶æ¥åšè‡ªåŠ¨åŒ–ã€‚ ps.setString(1, \"1\"); ps.setString(2, \"123456789\"); ps.setString(3, \"zhangsan\"); ps.setString(4, \"123456\"); ps.setString(5, \"1980-10-11\"); ps.setString(6, \"ç”·\"); ps.setString(7, \"zhangsan@126.com\"); ps.setString(8, \"åŒ—äº¬\"); ps.setString(9, \"å¤§å…´åŒºå‡‰æ°´æ²³äºŒè¡—\"); ps.setString(10, \"1000000\"); ps.setString(11, \"16398574152\"); ps.setString(12, \"A\"); // æ‰§è¡ŒSQL int count = ps.executeUpdate(); // ...... ç¤ºä¾‹ä»£ç 2ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 // ...... // sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­ String sql = \"select id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade from t_user\"; PreparedStatement ps = conn.prepareStatement(sql); ResultSet rs = ps.executeQuery(); List userList = new ArrayList\u003c\u003e(); // æ€è€ƒä»¥ä¸‹å¾ªç¯ä¸­çš„æ‰€æœ‰ä»£ç æ˜¯å¦å¯ä»¥ä½¿ç”¨åå°„è¿›è¡Œè‡ªåŠ¨åŒ–å°è£…ã€‚ while(rs.next()){ // è·å–æ•°æ® String id = rs.getString(\"id\"); String idCard = rs.getString(\"idCard\"); String username = rs.getString(\"username\"); String password = rs.getString(\"password\"); String birth = rs.getString(\"birth\"); String gender = rs.getString(\"gender\"); String email = rs.getString(\"email\"); String city = rs.getString(\"city\"); String street = rs.getString(\"street\"); String zipcode = rs.getString(\"zipcode\"); String phone = rs.getString(\"phone\"); String grade = rs.getString(\"grade\"); // åˆ›å»ºå¯¹è±¡ User user = new User(); // ç»™å¯¹è±¡å±æ€§èµ‹å€¼ user.setId(id); user.setIdCard(idCard); user.setUsername(username); user.setPassword(password); user.setBirth(birth); user.setGender(gender); user.setEmail(email); user.setCity(city); user.setStreet(street); user.setZipcode(zipcode); user.setPhone(phone); user.setGrade(grade); // æ·»åŠ åˆ°é›†åˆ userList.add(user); } // ...... JDBCä¸è¶³ï¼š SQLè¯­å¥å†™æ­»åœ¨Javaç¨‹åºä¸­ï¼Œä¸çµæ´»ã€‚æ”¹SQLçš„è¯å°±è¦æ”¹Javaä»£ç ã€‚è¿èƒŒå¼€é—­åŸåˆ™OCPã€‚ ç»™?ä¼ å€¼æ˜¯ç¹ççš„ã€‚èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Ÿï¼Ÿï¼Ÿ å°†ç»“æœé›†å°è£…æˆJavaå¯¹è±¡æ˜¯ç¹ççš„ã€‚èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Ÿï¼Ÿï¼Ÿ 1.4 äº†è§£MyBatis MyBatisæœ¬è´¨ä¸Šå°±æ˜¯å¯¹JDBCçš„å°è£…ï¼Œé€šè¿‡MyBatiså®ŒæˆCRUDã€‚ MyBatisåœ¨ä¸‰å±‚æ¶æ„ä¸­è´Ÿè´£æŒä¹…å±‚çš„ï¼Œå±äºæŒä¹…å±‚æ¡†æ¶ã€‚ MyBatisçš„å‘å±•å†ç¨‹ï¼šã€å¼•ç”¨ç™¾åº¦ç™¾ç§‘ã€‘ MyBatisæœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundationè¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatisã€‚2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚ iBATISä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚iBATISæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒData Access Objectsï¼ˆDAOsï¼‰ã€‚ æ‰“å¼€mybatisä»£ç å¯ä»¥çœ‹åˆ°å®ƒçš„åŒ…ç»“æ„ä¸­åŒ…å«ï¼šibatis ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„ Oï¼ˆObjectï¼‰ï¼šJavaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡ Rï¼ˆRelationalï¼‰ï¼šå…³ç³»å‹æ•°æ®åº“ Mï¼ˆMappingï¼‰ï¼šå°†Javaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•ï¼Œæˆ–æ˜¯å°†æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•æ˜ å°„æˆJavaè™šæ‹Ÿæœºä¸­çš„ä¸€ä¸ªJavaå¯¹è±¡ã€‚ ORMå›¾ç¤º MyBatiså±äºåŠè‡ªåŠ¨åŒ–ORMæ¡†æ¶ã€‚ Hibernateå±äºå…¨è‡ªåŠ¨åŒ–çš„ORMæ¡†æ¶ã€‚ MyBatisæ¡†æ¶ç‰¹ç‚¹ï¼š æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ã€åŸºæœ¬æ˜ å°„ä»¥åŠé«˜çº§æ˜ å°„ é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä¸­æ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›† æ”¯æŒXMLå¼€å‘ï¼Œä¹Ÿæ”¯æŒæ³¨è§£å¼å¼€å‘ã€‚ã€ä¸ºäº†ä¿è¯sqlè¯­å¥çš„çµæ´»ï¼Œæ‰€ä»¥mybatiså¤§éƒ¨åˆ†æ˜¯é‡‡ç”¨XMLæ–¹å¼å¼€å‘ã€‚ã€‘ å°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Objectï¼Œç®€å•æ™®é€šçš„Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½• ä½“ç§¯å°å¥½å­¦ï¼šä¸¤ä¸ªjaråŒ…ï¼Œä¸¤ä¸ªXMLé…ç½®æ–‡ä»¶ã€‚ å®Œå…¨åšåˆ°sqlè§£è€¦åˆã€‚ æä¾›äº†åŸºæœ¬æ˜ å°„æ ‡ç­¾ã€‚ æä¾›äº†é«˜çº§æ˜ å°„æ ‡ç­¾ã€‚ æä¾›äº†XMLæ ‡ç­¾ï¼Œæ”¯æŒåŠ¨æ€SQLçš„ç¼–å†™ã€‚ â€¦â€¦ äºŒã€MyBatiså…¥é—¨ç¨‹åº åªè¦ä½ ä¼šJDBCï¼ŒMyBatiså°±å¯ä»¥å­¦ã€‚\n2.1 ç‰ˆæœ¬ è½¯ä»¶ç‰ˆæœ¬ï¼š IntelliJ IDEAï¼š2022.1.4 Navicat for MySQLï¼š16.0.14 MySQLæ•°æ®åº“ï¼š8.0.30 ç»„ä»¶ç‰ˆæœ¬ï¼š MySQLé©±åŠ¨ï¼š8.0.30 MyBatisï¼š3.5.10 JDKï¼šJava17 JUnitï¼š4.13.2 Logbackï¼š1.2.11 2.2 MyBatisä¸‹è½½ ä»githubä¸Šä¸‹è½½ï¼Œåœ°å€ï¼šhttps://github.com/mybatis/mybatis-3 å°†æ¡†æ¶ä»¥åŠæ¡†æ¶çš„æºç éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½æ¡†æ¶åè§£å‹ï¼Œæ‰“å¼€mybatisç›®å½• é€šè¿‡ä»¥ä¸Šè§£å‹å¯ä»¥çœ‹åˆ°ï¼Œæ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚æˆ‘ä»¬çš„mybatisè¯¾ç¨‹ä½¿ç”¨mavenï¼Œæ‰€ä»¥è¿™ä¸ªjaræˆ‘ä»¬ä¸éœ€è¦ã€‚ å®˜æ–¹æ‰‹å†Œéœ€è¦ã€‚ 2.3 MyBatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤ å†™ä»£ç å‰å‡†å¤‡ï¼š å‡†å¤‡æ•°æ®åº“è¡¨ï¼šæ±½è½¦è¡¨t_carï¼Œå­—æ®µåŒ…æ‹¬ï¼š idï¼šä¸»é”®ï¼ˆè‡ªå¢ï¼‰ã€bigintã€‘ car_numï¼šæ±½è½¦ç¼–å·ã€varcharã€‘ brandï¼šå“ç‰Œã€varcharã€‘ guide_priceï¼šå‚å®¶æŒ‡å¯¼ä»·ã€decimalç±»å‹ï¼Œä¸“é—¨ä¸ºè´¢åŠ¡æ•°æ®å‡†å¤‡çš„ç±»å‹ã€‘ produce_timeï¼šç”Ÿäº§æ—¶é—´ã€charï¼Œå¹´æœˆæ—¥å³å¯ï¼Œ10ä¸ªé•¿åº¦ï¼Œâ€˜2022-10-11â€™ã€‘ car_typeï¼šæ±½è½¦ç±»å‹ï¼ˆç‡ƒæ²¹è½¦ã€ç”µè½¦ã€æ°¢èƒ½æºï¼‰ã€varcharã€‘ ä½¿ç”¨navicat for mysqlå·¥å…·å»ºè¡¨ ä½¿ç”¨navicat for mysqlå·¥å…·å‘t_carè¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼š åˆ›å»ºProjectï¼šå»ºè®®åˆ›å»ºEmpty Projectï¼Œè®¾ç½®Javaç‰ˆæœ¬ä»¥åŠç¼–è¯‘ç‰ˆæœ¬ç­‰ã€‚ è®¾ç½®IDEAçš„maven åˆ›å»ºModuleï¼šæ™®é€šçš„Maven Javaæ¨¡å— æ­¥éª¤1ï¼šæ‰“åŒ…æ–¹å¼ï¼šjarï¼ˆä¸éœ€è¦warï¼Œå› ä¸ºmybatiså°è£…çš„æ˜¯jdbcã€‚ï¼‰ 1 2 3 4 com.powernode mybatis-001-introduction 1.0-SNAPSHOT jar æ­¥éª¤2ï¼šå¼•å…¥ä¾èµ–ï¼ˆmybatisä¾èµ– + mysqlé©±åŠ¨ä¾èµ–ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 org.mybatis mybatis 3.5.10 mysql mysql-connector-java 8.0.30 æ­¥éª¤3ï¼šåœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºmybatis-config.xmlé…ç½®æ–‡ä»¶ï¼ˆå¯ä»¥å‚è€ƒmybatisæ‰‹å†Œæ‹·è´ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"\u003e ",
  "wordCount" : "49864",
  "inLanguage": "en",
  "datePublished": "2022-08-18T15:40:43Z",
  "dateModified": "2022-08-18T15:40:43Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://009965.xyz/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://009965.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;Â»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      23_MyBatis
    </h1>
    <div class="post-meta"><span title='2022-08-18 15:40:43 +0000 UTC'>2022-08-18</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%b8%80mybatis%e6%a6%82%e8%bf%b0" aria-label="ä¸€ã€MyBatisæ¦‚è¿°">ä¸€ã€MyBatisæ¦‚è¿°</a><ul>
                        
                <li>
                    <a href="#11-%e6%a1%86%e6%9e%b6" aria-label="1.1 æ¡†æ¶">1.1 æ¡†æ¶</a></li>
                <li>
                    <a href="#12-%e4%b8%89%e5%b1%82%e6%9e%b6%e6%9e%84" aria-label="1.2 ä¸‰å±‚æ¶æ„">1.2 ä¸‰å±‚æ¶æ„</a></li>
                <li>
                    <a href="#13-jdbc%e4%b8%8d%e8%b6%b3" aria-label="1.3 JDBCä¸è¶³">1.3 JDBCä¸è¶³</a></li>
                <li>
                    <a href="#14-%e4%ba%86%e8%a7%a3mybatis" aria-label="1.4 äº†è§£MyBatis">1.4 äº†è§£MyBatis</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8cmybatis%e5%85%a5%e9%97%a8%e7%a8%8b%e5%ba%8f" aria-label="äºŒã€MyBatiså…¥é—¨ç¨‹åº">äºŒã€MyBatiså…¥é—¨ç¨‹åº</a><ul>
                        
                <li>
                    <a href="#21-%e7%89%88%e6%9c%ac" aria-label="2.1 ç‰ˆæœ¬">2.1 ç‰ˆæœ¬</a><ul>
                        
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e7%89%88%e6%9c%ac" aria-label="è½¯ä»¶ç‰ˆæœ¬ï¼š">è½¯ä»¶ç‰ˆæœ¬ï¼š</a></li>
                <li>
                    <a href="#%e7%bb%84%e4%bb%b6%e7%89%88%e6%9c%ac" aria-label="ç»„ä»¶ç‰ˆæœ¬ï¼š">ç»„ä»¶ç‰ˆæœ¬ï¼š</a></li></ul>
                </li>
                <li>
                    <a href="#22-mybatis%e4%b8%8b%e8%bd%bd" aria-label="2.2 MyBatisä¸‹è½½">2.2 MyBatisä¸‹è½½</a></li>
                <li>
                    <a href="#23-mybatis%e5%85%a5%e9%97%a8%e7%a8%8b%e5%ba%8f%e5%bc%80%e5%8f%91%e6%ad%a5%e9%aa%a4" aria-label="2.3 MyBatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤">2.3 MyBatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤</a></li>
                <li>
                    <a href="#24-%e5%85%b3%e4%ba%8emybatis%e6%a0%b8%e5%bf%83%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e5%90%8d%e5%ad%97%e5%92%8c%e8%b7%af%e5%be%84%e8%af%a6%e8%a7%a3" aria-label="2.4 å…³äºMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£">2.4 å…³äºMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£</a></li>
                <li>
                    <a href="#25-mybatis%e7%ac%ac%e4%b8%80%e4%b8%aa%e6%af%94%e8%be%83%e5%ae%8c%e6%95%b4%e7%9a%84%e4%bb%a3%e7%a0%81%e5%86%99%e6%b3%95" aria-label="2.5 MyBatisç¬¬ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•">2.5 MyBatisç¬¬ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•</a></li>
                <li>
                    <a href="#26-%e5%bc%95%e5%85%a5junit" aria-label="2.6 å¼•å…¥JUnit">2.6 å¼•å…¥JUnit</a></li>
                <li>
                    <a href="#27-%e5%bc%95%e5%85%a5%e6%97%a5%e5%bf%97%e6%a1%86%e6%9e%b6logback" aria-label="2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶logback">2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶logback</a></li>
                <li>
                    <a href="#28-mybatis%e5%b7%a5%e5%85%b7%e7%b1%bbsqlsessionutil%e7%9a%84%e5%b0%81%e8%a3%85" aria-label="2.8 MyBatiså·¥å…·ç±»SqlSessionUtilçš„å°è£…">2.8 MyBatiså·¥å…·ç±»SqlSessionUtilçš„å°è£…</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e4%bd%bf%e7%94%a8mybatis%e5%ae%8c%e6%88%90crud" aria-label="ä¸‰ã€ä½¿ç”¨MyBatiså®ŒæˆCRUD">ä¸‰ã€ä½¿ç”¨MyBatiså®ŒæˆCRUD</a><ul>
                        
                <li>
                    <a href="#31-insertcreate" aria-label="3.1 insertï¼ˆCreateï¼‰">3.1 insertï¼ˆCreateï¼‰</a></li>
                <li>
                    <a href="#32-deletedelete" aria-label="3.2 deleteï¼ˆDeleteï¼‰">3.2 deleteï¼ˆDeleteï¼‰</a></li>
                <li>
                    <a href="#33-updateupdate" aria-label="3.3 updateï¼ˆUpdateï¼‰">3.3 updateï¼ˆUpdateï¼‰</a></li>
                <li>
                    <a href="#34-selectretrieve" aria-label="3.4 selectï¼ˆRetrieveï¼‰">3.4 selectï¼ˆRetrieveï¼‰</a><ul>
                        
                <li>
                    <a href="#%e6%9f%a5%e8%af%a2%e4%b8%80%e6%9d%a1%e6%95%b0%e6%8d%ae" aria-label="æŸ¥è¯¢ä¸€æ¡æ•°æ®">æŸ¥è¯¢ä¸€æ¡æ•°æ®</a></li>
                <li>
                    <a href="#%e6%9f%a5%e8%af%a2%e5%a4%9a%e6%9d%a1%e6%95%b0%e6%8d%ae" aria-label="æŸ¥è¯¢å¤šæ¡æ•°æ®">æŸ¥è¯¢å¤šæ¡æ•°æ®</a></li></ul>
                </li>
                <li>
                    <a href="#35-%e5%85%b3%e4%ba%8esql-mapper%e7%9a%84namespace" aria-label="3.5 å…³äºSQL Mapperçš„namespace">3.5 å…³äºSQL Mapperçš„namespace</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9bmybatis%e6%a0%b8%e5%bf%83%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3" aria-label="å››ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£">å››ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</a><ul>
                        
                <li>
                    <a href="#41-environment" aria-label="4.1 environment">4.1 environment</a></li>
                <li>
                    <a href="#42-transactionmanager" aria-label="4.2 transactionManager">4.2 transactionManager</a></li>
                <li>
                    <a href="#43-datasource" aria-label="4.3 dataSource">4.3 dataSource</a></li>
                <li>
                    <a href="#44-properties" aria-label="4.4 properties">4.4 properties</a></li>
                <li>
                    <a href="#45-mapper" aria-label="4.5 mapper">4.5 mapper</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%94%e6%89%8b%e5%86%99mybatis%e6%a1%86%e6%9e%b6%e6%8e%8c%e6%8f%a1%e5%8e%9f%e7%90%86" aria-label="äº”ã€æ‰‹å†™MyBatisæ¡†æ¶ï¼ˆæŒæ¡åŸç†ï¼‰">äº”ã€æ‰‹å†™MyBatisæ¡†æ¶ï¼ˆæŒæ¡åŸç†ï¼‰</a><ul>
                        
                <li>
                    <a href="#51-dom4j%e8%a7%a3%e6%9e%90xml%e6%96%87%e4%bb%b6" aria-label="5.1 dom4jè§£æXMLæ–‡ä»¶">5.1 dom4jè§£æXMLæ–‡ä»¶</a></li>
                <li>
                    <a href="#52-godbatis" aria-label="5.2 GodBatis">5.2 GodBatis</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5idea%e4%b8%ad%e5%88%9b%e5%bb%ba%e6%a8%a1%e5%9d%97" aria-label="ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—">ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e8%b5%84%e6%ba%90%e5%b7%a5%e5%85%b7%e7%b1%bb%e6%96%b9%e4%be%bf%e8%8e%b7%e5%8f%96%e6%8c%87%e5%90%91%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e8%be%93%e5%85%a5%e6%b5%81" aria-label="ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ">ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5%e5%ae%9a%e4%b9%89sqlsessionfactorybuilder%e7%b1%bb" aria-label="ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»">ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5%e5%88%86%e6%9e%90sqlsessionfactory%e7%b1%bb%e4%b8%ad%e6%9c%89%e5%93%aa%e4%ba%9b%e5%b1%9e%e6%80%a7" aria-label="ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§">ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%94%e6%ad%a5%e5%ae%9a%e4%b9%89godjdbctransaction" aria-label="ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction">ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ad%e6%ad%a5%e4%ba%8b%e5%8a%a1%e7%ae%a1%e7%90%86%e5%99%a8%e4%b8%ad%e9%9c%80%e8%a6%81%e6%95%b0%e6%8d%ae%e6%ba%90%e5%ae%9a%e4%b9%89godunpooleddatasource" aria-label="ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource">ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%83%e6%ad%a5%e5%ae%9a%e4%b9%89godmappedstatement" aria-label="ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement">ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ab%e6%ad%a5%e5%ae%8c%e5%96%84sqlsessionfactory%e7%b1%bb" aria-label="ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»">ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b9%9d%e6%ad%a5%e5%ae%8c%e5%96%84sqlsessionfactorybuilder%e4%b8%ad%e7%9a%84build%e6%96%b9%e6%b3%95" aria-label="ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•">ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%8d%81%e6%ad%a5%e5%9c%a8sqlsessionfactory%e4%b8%ad%e6%b7%bb%e5%8a%a0opensession%e6%96%b9%e6%b3%95" aria-label="ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•">ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%8d%81%e4%b8%80%e6%ad%a5%e7%bc%96%e5%86%99sqlsession%e7%b1%bb%e4%b8%adcommit-rollback-close%e6%96%b9%e6%b3%95" aria-label="ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit rollback closeæ–¹æ³•">ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit rollback closeæ–¹æ³•</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%8d%81%e4%ba%8c%e6%ad%a5%e7%bc%96%e5%86%99sqlsession%e7%b1%bb%e4%b8%ad%e7%9a%84insert%e6%96%b9%e6%b3%95" aria-label="ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•">ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%8d%81%e4%b8%89%e6%ad%a5%e7%bc%96%e5%86%99sqlsession%e7%b1%bb%e4%b8%ad%e7%9a%84selectone%e6%96%b9%e6%b3%95" aria-label="ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•">ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•</a></li></ul>
                </li>
                <li>
                    <a href="#53-godbatis%e4%bd%bf%e7%94%a8maven%e6%89%93%e5%8c%85" aria-label="5.3 GodBatisä½¿ç”¨Mavenæ‰“åŒ…">5.3 GodBatisä½¿ç”¨Mavenæ‰“åŒ…</a></li>
                <li>
                    <a href="#54-%e4%bd%bf%e7%94%a8godbatis" aria-label="5.4 ä½¿ç”¨GodBatis">5.4 ä½¿ç”¨GodBatis</a></li>
                <li>
                    <a href="#55-%e6%80%bb%e7%bb%93mybatis%e6%a1%86%e6%9e%b6%e7%9a%84%e9%87%8d%e8%a6%81%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86" aria-label="5.5 æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†">5.5 æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%ad%e5%9c%a8web%e4%b8%ad%e5%ba%94%e7%94%a8mybatis%e4%bd%bf%e7%94%a8mvc%e6%9e%b6%e6%9e%84%e6%a8%a1%e5%bc%8f" aria-label="å…­ã€åœ¨WEBä¸­åº”ç”¨MyBatisï¼ˆä½¿ç”¨MVCæ¶æ„æ¨¡å¼ï¼‰">å…­ã€åœ¨WEBä¸­åº”ç”¨MyBatisï¼ˆä½¿ç”¨MVCæ¶æ„æ¨¡å¼ï¼‰</a><ul>
                        
                <li>
                    <a href="#61-%e9%9c%80%e6%b1%82%e6%8f%8f%e8%bf%b0" aria-label="6.1 éœ€æ±‚æè¿°">6.1 éœ€æ±‚æè¿°</a></li>
                <li>
                    <a href="#62-%e6%95%b0%e6%8d%ae%e5%ba%93%e8%a1%a8%e7%9a%84%e8%ae%be%e8%ae%a1%e5%92%8c%e5%87%86%e5%a4%87%e6%95%b0%e6%8d%ae" aria-label="6.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®">6.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®</a></li>
                <li>
                    <a href="#63-%e5%ae%9e%e7%8e%b0%e6%ad%a5%e9%aa%a4" aria-label="6.3 å®ç°æ­¥éª¤">6.3 å®ç°æ­¥éª¤</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e5%89%8d%e7%ab%af%e9%a1%b5%e9%9d%a2indexhtml" aria-label="ç¬¬äºŒæ­¥ï¼šå‰ç«¯é¡µé¢index.html">ç¬¬äºŒæ­¥ï¼šå‰ç«¯é¡µé¢index.html</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5%e5%88%9b%e5%bb%bapojo%e5%8c%85service%e5%8c%85dao%e5%8c%85web%e5%8c%85utils%e5%8c%85" aria-label="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5%e5%ae%9a%e4%b9%89pojo%e7%b1%bbaccount" aria-label="ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount">ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%94%e6%ad%a5%e7%bc%96%e5%86%99accountdao%e6%8e%a5%e5%8f%a3%e4%bb%a5%e5%8f%8aaccountdaoimpl%e5%ae%9e%e7%8e%b0%e7%b1%bb" aria-label="ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥å£ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»">ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥å£ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ad%e6%ad%a5accountdaoimpl%e4%b8%ad%e7%bc%96%e5%86%99%e4%ba%86mybatis%e4%bb%a3%e7%a0%81%e9%9c%80%e8%a6%81%e7%bc%96%e5%86%99sql%e6%98%a0%e5%b0%84%e6%96%87%e4%bb%b6%e4%ba%86" aria-label="ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„æ–‡ä»¶äº†">ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„æ–‡ä»¶äº†</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%83%e6%ad%a5%e7%bc%96%e5%86%99accountservice%e6%8e%a5%e5%8f%a3%e4%bb%a5%e5%8f%8aaccountserviceimpl" aria-label="ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥å£ä»¥åŠAccountServiceImpl">ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥å£ä»¥åŠAccountServiceImpl</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ab%e6%ad%a5%e7%bc%96%e5%86%99accountcontroller" aria-label="ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController">ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController</a></li></ul>
                </li>
                <li>
                    <a href="#64-mybatis%e5%af%b9%e8%b1%a1%e4%bd%9c%e7%94%a8%e5%9f%9f%e4%bb%a5%e5%8f%8a%e4%ba%8b%e5%8a%a1%e9%97%ae%e9%a2%98" aria-label="6.4 MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜">6.4 MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜</a><ul>
                        
                <li>
                    <a href="#mybatis%e6%a0%b8%e5%bf%83%e5%af%b9%e8%b1%a1%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ">MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ</a><ul>
                        
                <li>
                    <a href="#sqlsessionfactorybuilder" aria-label="SqlSessionFactoryBuilder">SqlSessionFactoryBuilder</a></li>
                <li>
                    <a href="#sqlsessionfactory" aria-label="SqlSessionFactory">SqlSessionFactory</a></li>
                <li>
                    <a href="#sqlsession" aria-label="SqlSession">SqlSession</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8b%e5%8a%a1%e9%97%ae%e9%a2%98" aria-label="äº‹åŠ¡é—®é¢˜">äº‹åŠ¡é—®é¢˜</a></li></ul>
                </li>
                <li>
                    <a href="#65-%e5%88%86%e6%9e%90%e5%bd%93%e5%89%8d%e7%a8%8b%e5%ba%8f%e5%ad%98%e5%9c%a8%e7%9a%84%e9%97%ae%e9%a2%98" aria-label="6.5 åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜">6.5 åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%83%e4%bd%bf%e7%94%a8javassist%e7%94%9f%e6%88%90%e7%b1%bb" aria-label="ä¸ƒã€ä½¿ç”¨javassistç”Ÿæˆç±»">ä¸ƒã€ä½¿ç”¨javassistç”Ÿæˆç±»</a><ul>
                        
                <li>
                    <a href="#71-javassist%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="7.1 Javassistçš„ä½¿ç”¨">7.1 Javassistçš„ä½¿ç”¨</a></li>
                <li>
                    <a href="#72-%e4%bd%bf%e7%94%a8javassist%e7%94%9f%e6%88%90daoimpl%e7%b1%bb" aria-label="7.2 ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»">7.2 ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%abmybatis%e4%b8%ad%e6%8e%a5%e5%8f%a3%e4%bb%a3%e7%90%86%e6%9c%ba%e5%88%b6%e5%8f%8a%e4%bd%bf%e7%94%a8" aria-label="å…«ã€MyBatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨">å…«ã€MyBatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨</a></li>
                <li>
                    <a href="#%e4%b9%9dmybatis%e5%b0%8f%e6%8a%80%e5%b7%a7" aria-label="ä¹ã€MyBatiså°æŠ€å·§">ä¹ã€MyBatiså°æŠ€å·§</a><ul>
                        
                <li>
                    <a href="#91-%e5%92%8c" aria-label="9.1 #{}å’Œ$">9.1 #{}å’Œ$</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8" aria-label="ä½¿ç”¨#">ä½¿ç”¨#</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-1" aria-label="ä½¿ç”¨$">ä½¿ç”¨$</a></li>
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%83%85%e5%86%b5%e4%b8%8b%e5%bf%85%e9%a1%bb%e4%bd%bf%e7%94%a8" aria-label="ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨$">ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨$</a></li>
                <li>
                    <a href="#%e6%8b%bc%e6%8e%a5%e8%a1%a8%e5%90%8d" aria-label="æ‹¼æ¥è¡¨å">æ‹¼æ¥è¡¨å</a></li>
                <li>
                    <a href="#%e6%89%b9%e9%87%8f%e5%88%a0%e9%99%a4" aria-label="æ‰¹é‡åˆ é™¤">æ‰¹é‡åˆ é™¤</a></li>
                <li>
                    <a href="#%e6%a8%a1%e7%b3%8a%e6%9f%a5%e8%af%a2" aria-label="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-2" aria-label="ä½¿ç”¨$">ä½¿ç”¨$</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8-3" aria-label="ä½¿ç”¨#">ä½¿ç”¨#</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#92-typealiases" aria-label="9.2 typeAliases">9.2 typeAliases</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8ftypealias" aria-label="ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias">ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8fpackage" aria-label="ç¬¬äºŒç§æ–¹å¼ï¼špackage">ç¬¬äºŒç§æ–¹å¼ï¼špackage</a></li>
                <li>
                    <a href="#%e5%9c%a8sql%e6%98%a0%e5%b0%84%e6%96%87%e4%bb%b6%e4%b8%ad%e7%94%a8%e4%b8%80%e4%b8%8b" aria-label="åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹">åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹</a></li></ul>
                </li>
                <li>
                    <a href="#93-mappers" aria-label="9.3 mappers">9.3 mappers</a><ul>
                        
                <li>
                    <a href="#resource" aria-label="resource">resource</a></li>
                <li>
                    <a href="#url" aria-label="url">url</a></li>
                <li>
                    <a href="#class" aria-label="class">class</a></li>
                <li>
                    <a href="#package" aria-label="package">package</a></li></ul>
                </li>
                <li>
                    <a href="#94-idea%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e6%a8%a1%e6%9d%bf" aria-label="9.4 ideaé…ç½®æ–‡ä»¶æ¨¡æ¿">9.4 ideaé…ç½®æ–‡ä»¶æ¨¡æ¿</a></li>
                <li>
                    <a href="#95-%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae%e6%97%b6%e8%8e%b7%e5%8f%96%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e7%9a%84%e4%b8%bb%e9%94%ae" aria-label="9.5 æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®">9.5 æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81mybatis%e5%8f%82%e6%95%b0%e5%a4%84%e7%90%86" aria-label="åã€MyBatiså‚æ•°å¤„ç†">åã€MyBatiså‚æ•°å¤„ç†</a><ul>
                        
                <li>
                    <a href="#101-%e5%8d%95%e4%b8%aa%e7%ae%80%e5%8d%95%e7%b1%bb%e5%9e%8b%e5%8f%82%e6%95%b0" aria-label="10.1 å•ä¸ªç®€å•ç±»å‹å‚æ•°">10.1 å•ä¸ªç®€å•ç±»å‹å‚æ•°</a></li>
                <li>
                    <a href="#102-map%e5%8f%82%e6%95%b0" aria-label="10.2 Mapå‚æ•°">10.2 Mapå‚æ•°</a></li>
                <li>
                    <a href="#103-%e5%ae%9e%e4%bd%93%e7%b1%bb%e5%8f%82%e6%95%b0" aria-label="10.3 å®ä½“ç±»å‚æ•°">10.3 å®ä½“ç±»å‚æ•°</a></li>
                <li>
                    <a href="#104-%e5%a4%9a%e5%8f%82%e6%95%b0" aria-label="10.4 å¤šå‚æ•°">10.4 å¤šå‚æ•°</a></li>
                <li>
                    <a href="#105-param%e6%b3%a8%e8%a7%a3%e5%91%bd%e5%90%8d%e5%8f%82%e6%95%b0" aria-label="10.5 @Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰">10.5 @Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰</a></li>
                <li>
                    <a href="#106-param%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" aria-label="10.6 @Paramæºç åˆ†æ">10.6 @Paramæºç åˆ†æ</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e4%b8%80mybatis%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5%e4%b8%93%e9%a2%98" aria-label="åä¸€ã€MyBatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜">åä¸€ã€MyBatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜</a><ul>
                        
                <li>
                    <a href="#111-%e8%bf%94%e5%9b%9ecar" aria-label="11.1 è¿”å›Car">11.1 è¿”å›Car</a></li>
                <li>
                    <a href="#112-%e8%bf%94%e5%9b%9elistcar" aria-label="11.2 è¿”å›List&lt;Car&gt;">11.2 è¿”å›List&lt;Car&gt;</a></li>
                <li>
                    <a href="#113-%e8%bf%94%e5%9b%9emap" aria-label="11.3 è¿”å›Map">11.3 è¿”å›Map</a></li>
                <li>
                    <a href="#114-%e8%bf%94%e5%9b%9elistmap" aria-label="11.4 è¿”å›List&lt;Map&gt;">11.4 è¿”å›List&lt;Map&gt;</a></li>
                <li>
                    <a href="#115-%e8%bf%94%e5%9b%9emapstringmap" aria-label="11.5 è¿”å›Map&lt;String,Map&gt;">11.5 è¿”å›Map&lt;String,Map&gt;</a></li>
                <li>
                    <a href="#116-resultmap%e7%bb%93%e6%9e%9c%e6%98%a0%e5%b0%84" aria-label="11.6 resultMapç»“æœæ˜ å°„">11.6 resultMapç»“æœæ˜ å°„</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8resultmap%e8%bf%9b%e8%a1%8c%e7%bb%93%e6%9e%9c%e6%98%a0%e5%b0%84" aria-label="ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„">ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</a></li>
                <li>
                    <a href="#%e6%98%af%e5%90%a6%e5%bc%80%e5%90%af%e9%a9%bc%e5%b3%b0%e5%91%bd%e5%90%8d%e8%87%aa%e5%8a%a8%e6%98%a0%e5%b0%84" aria-label="æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„">æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„</a></li></ul>
                </li>
                <li>
                    <a href="#117-%e8%bf%94%e5%9b%9e%e6%80%bb%e8%ae%b0%e5%bd%95%e6%9d%a1%e6%95%b0" aria-label="11.7 è¿”å›æ€»è®°å½•æ¡æ•°">11.7 è¿”å›æ€»è®°å½•æ¡æ•°</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e4%ba%8c%e5%8a%a8%e6%80%81sql" aria-label="åäºŒã€åŠ¨æ€SQL">åäºŒã€åŠ¨æ€SQL</a><ul>
                        
                <li>
                    <a href="#121-if%e6%a0%87%e7%ad%be" aria-label="12.1 ifæ ‡ç­¾">12.1 ifæ ‡ç­¾</a></li>
                <li>
                    <a href="#122-where%e6%a0%87%e7%ad%be" aria-label="12.2 whereæ ‡ç­¾">12.2 whereæ ‡ç­¾</a></li>
                <li>
                    <a href="#123-trim%e6%a0%87%e7%ad%be" aria-label="12.3 trimæ ‡ç­¾">12.3 trimæ ‡ç­¾</a></li>
                <li>
                    <a href="#124-set%e6%a0%87%e7%ad%be" aria-label="12.4 setæ ‡ç­¾">12.4 setæ ‡ç­¾</a></li>
                <li>
                    <a href="#125-choose-when-otherwise" aria-label="12.5 choose when otherwise">12.5 choose when otherwise</a></li>
                <li>
                    <a href="#126-foreach%e6%a0%87%e7%ad%be" aria-label="12.6 foreachæ ‡ç­¾">12.6 foreachæ ‡ç­¾</a><ul>
                        
                <li>
                    <a href="#%e6%89%b9%e9%87%8f%e5%88%a0%e9%99%a4-1" aria-label="æ‰¹é‡åˆ é™¤">æ‰¹é‡åˆ é™¤</a></li>
                <li>
                    <a href="#%e6%89%b9%e9%87%8f%e6%b7%bb%e5%8a%a0" aria-label="æ‰¹é‡æ·»åŠ ">æ‰¹é‡æ·»åŠ </a></li></ul>
                </li>
                <li>
                    <a href="#127-sql%e6%a0%87%e7%ad%be%e4%b8%8einclude%e6%a0%87%e7%ad%be" aria-label="12.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾">12.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e4%b8%89mybatis%e7%9a%84%e9%ab%98%e7%ba%a7%e6%98%a0%e5%b0%84%e5%8f%8a%e5%bb%b6%e8%bf%9f%e5%8a%a0%e8%bd%bd" aria-label="åä¸‰ã€MyBatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½">åä¸‰ã€MyBatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½</a><ul>
                        
                <li>
                    <a href="#131-%e5%a4%9a%e5%af%b9%e4%b8%80" aria-label="13.1 å¤šå¯¹ä¸€">13.1 å¤šå¯¹ä¸€</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f%e7%ba%a7%e8%81%94%e5%b1%9e%e6%80%a7%e6%98%a0%e5%b0%84" aria-label="ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„">ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8fassociation" aria-label="ç¬¬äºŒç§æ–¹å¼ï¼šassociation">ç¬¬äºŒç§æ–¹å¼ï¼šassociation</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%88%86%e6%ad%a5%e6%9f%a5%e8%af%a2" aria-label="ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢">ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</a></li></ul>
                </li>
                <li>
                    <a href="#132-%e5%a4%9a%e5%af%b9%e4%b8%80%e5%bb%b6%e8%bf%9f%e5%8a%a0%e8%bd%bd" aria-label="13.2 å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½">13.2 å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½</a></li>
                <li>
                    <a href="#133-%e4%b8%80%e5%af%b9%e5%a4%9a" aria-label="13.3 ä¸€å¯¹å¤š">13.3 ä¸€å¯¹å¤š</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8fcollection" aria-label="ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection">ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%88%86%e6%ad%a5%e6%9f%a5%e8%af%a2" aria-label="ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢">ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</a></li></ul>
                </li>
                <li>
                    <a href="#134-%e4%b8%80%e5%af%b9%e5%a4%9a%e5%bb%b6%e8%bf%9f%e5%8a%a0%e8%bd%bd" aria-label="13.4 ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½">13.4 ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e5%9b%9bmybatis%e7%9a%84%e7%bc%93%e5%ad%98" aria-label="åå››ã€MyBatisçš„ç¼“å­˜">åå››ã€MyBatisçš„ç¼“å­˜</a><ul>
                        
                <li>
                    <a href="#141-%e4%b8%80%e7%ba%a7%e7%bc%93%e5%ad%98" aria-label="14.1 ä¸€çº§ç¼“å­˜">14.1 ä¸€çº§ç¼“å­˜</a></li>
                <li>
                    <a href="#142-%e4%ba%8c%e7%ba%a7%e7%bc%93%e5%ad%98" aria-label="14.2 äºŒçº§ç¼“å­˜">14.2 äºŒçº§ç¼“å­˜</a></li>
                <li>
                    <a href="#143-mybatis%e9%9b%86%e6%88%90ehcache" aria-label="14.3 MyBatisé›†æˆEhCache">14.3 MyBatisé›†æˆEhCache</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e4%ba%94mybatis%e7%9a%84%e9%80%86%e5%90%91%e5%b7%a5%e7%a8%8b" aria-label="åäº”ã€MyBatisçš„é€†å‘å·¥ç¨‹">åäº”ã€MyBatisçš„é€†å‘å·¥ç¨‹</a><ul>
                        
                <li>
                    <a href="#151-%e9%80%86%e5%90%91%e5%b7%a5%e7%a8%8b%e9%85%8d%e7%bd%ae%e4%b8%8e%e7%94%9f%e6%88%90" aria-label="15.1 é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ">15.1 é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5%e5%9f%ba%e7%a1%80%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" aria-label="ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡">ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e5%9c%a8pom%e4%b8%ad%e6%b7%bb%e5%8a%a0%e9%80%86%e5%90%91%e5%b7%a5%e7%a8%8b%e6%8f%92%e4%bb%b6" aria-label="ç¬¬äºŒæ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶">ç¬¬äºŒæ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5%e9%85%8d%e7%bd%aegeneratorconfigxml" aria-label="ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml">ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5%e8%bf%90%e8%a1%8c%e6%8f%92%e4%bb%b6" aria-label="ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶">ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶</a></li></ul>
                </li>
                <li>
                    <a href="#152-%e6%b5%8b%e8%af%95%e9%80%86%e5%90%91%e5%b7%a5%e7%a8%8b%e7%94%9f%e6%88%90%e7%9a%84%e6%98%af%e5%90%a6%e5%a5%bd%e7%94%a8" aria-label="15.2 æµ‹è¯•é€†å‘å·¥ç¨‹ç”Ÿæˆçš„æ˜¯å¦å¥½ç”¨">15.2 æµ‹è¯•é€†å‘å·¥ç¨‹ç”Ÿæˆçš„æ˜¯å¦å¥½ç”¨</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" aria-label="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e7%bc%96%e5%86%99%e6%b5%8b%e8%af%95%e7%a8%8b%e5%ba%8f" aria-label="ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•ç¨‹åº">ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•ç¨‹åº</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e5%85%admybatis%e4%bd%bf%e7%94%a8pagehelper" aria-label="åå…­ã€MyBatisä½¿ç”¨PageHelper">åå…­ã€MyBatisä½¿ç”¨PageHelper</a><ul>
                        
                <li>
                    <a href="#161-limit%e5%88%86%e9%a1%b5" aria-label="16.1 limitåˆ†é¡µ">16.1 limitåˆ†é¡µ</a></li>
                <li>
                    <a href="#163-pagehelper%e6%8f%92%e4%bb%b6" aria-label="16.3 PageHelperæ’ä»¶">16.3 PageHelperæ’ä»¶</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5%e5%bc%95%e5%85%a5%e4%be%9d%e8%b5%96" aria-label="ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–">ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e5%9c%a8mybatis-configxml%e6%96%87%e4%bb%b6%e4%b8%ad%e9%85%8d%e7%bd%ae%e6%8f%92%e4%bb%b6" aria-label="ç¬¬äºŒæ­¥ï¼šåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶">ç¬¬äºŒæ­¥ï¼šåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5%e7%bc%96%e5%86%99java%e4%bb%a3%e7%a0%81" aria-label="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç ">ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç </a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%81%e4%b8%83mybatis%e7%9a%84%e6%b3%a8%e8%a7%a3%e5%bc%8f%e5%bc%80%e5%8f%91" aria-label="åä¸ƒã€MyBatisçš„æ³¨è§£å¼å¼€å‘">åä¸ƒã€MyBatisçš„æ³¨è§£å¼å¼€å‘</a><ul>
                        
                <li>
                    <a href="#171-insert" aria-label="17.1 @Insert">17.1 @Insert</a></li>
                <li>
                    <a href="#172-delete" aria-label="17.2 @Delete">17.2 @Delete</a></li>
                <li>
                    <a href="#173-update" aria-label="17.3 @Update">17.3 @Update</a></li>
                <li>
                    <a href="#174-select" aria-label="17.4 @Select">17.4 @Select</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="ä¸€mybatisæ¦‚è¿°">ä¸€ã€MyBatisæ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#ä¸€mybatisæ¦‚è¿°">#</a></h1>
<h2 id="11-æ¡†æ¶">1.1 æ¡†æ¶<a hidden class="anchor" aria-hidden="true" href="#11-æ¡†æ¶">#</a></h2>
<ul>
<li>åœ¨æ–‡çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶</li>
<li>Javaå¸¸ç”¨æ¡†æ¶ï¼š
<ul>
<li>SSMä¸‰å¤§æ¡†æ¶ï¼šSpring + SpringMVC + MyBatis</li>
<li>SpringBoot</li>
<li>SpringCloud</li>
<li>ç­‰ã€‚ã€‚</li>
</ul>
</li>
<li>æ¡†æ¶å…¶å®å°±æ˜¯å¯¹é€šç”¨ä»£ç çš„å°è£…ï¼Œæå‰å†™å¥½äº†ä¸€å †æ¥å£å’Œç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšé¡¹ç›®çš„æ—¶å€™ç›´æ¥å¼•å…¥è¿™äº›æ¥å£å’Œç±»ï¼ˆå¼•å…¥æ¡†æ¶ï¼‰ï¼ŒåŸºäºè¿™äº›ç°æœ‰çš„æ¥å£å’Œç±»è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚</li>
<li>æ¡†æ¶ä¸€èˆ¬éƒ½ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚(jaråŒ…ä¸­æœ‰classæ–‡ä»¶ä»¥åŠå„ç§é…ç½®æ–‡ä»¶ç­‰ã€‚)</li>
<li>SSMä¸‰å¤§æ¡†æ¶çš„å­¦ä¹ é¡ºåºï¼šMyBatisã€Springã€SpringMVCï¼ˆä»…ä»…æ˜¯å»ºè®®ï¼‰</li>
</ul>
<h2 id="12-ä¸‰å±‚æ¶æ„">1.2 ä¸‰å±‚æ¶æ„<a hidden class="anchor" aria-hidden="true" href="#12-ä¸‰å±‚æ¶æ„">#</a></h2>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/56d4be324d208494fce8bd52e03bca79_MD5.png"></p>
<ul>
<li>è¡¨ç°å±‚ï¼ˆUIï¼‰ï¼šç›´æ¥è·Ÿå‰ç«¯æ‰“äº¤äº’ï¼ˆä¸€æ˜¯æ¥æ”¶å‰ç«¯ajaxè¯·æ±‚ï¼ŒäºŒæ˜¯è¿”å›jsonæ•°æ®ç»™å‰ç«¯ï¼‰</li>
<li>ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆBLLï¼‰ï¼šä¸€æ˜¯å¤„ç†è¡¨ç°å±‚è½¬å‘è¿‡æ¥çš„å‰ç«¯è¯·æ±‚ï¼ˆä¹Ÿå°±æ˜¯å…·ä½“ä¸šåŠ¡ï¼‰ï¼ŒäºŒæ˜¯å°†ä»æŒä¹…å±‚è·å–çš„æ•°æ®è¿”å›åˆ°è¡¨ç°å±‚ã€‚</li>
<li>æ•°æ®è®¿é—®å±‚ï¼ˆDALï¼‰ï¼šç›´æ¥æ“ä½œæ•°æ®åº“å®ŒæˆCRUDï¼Œå¹¶å°†è·å¾—çš„æ•°æ®è¿”å›åˆ°ä¸Šä¸€å±‚ï¼ˆä¹Ÿå°±æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼‰ã€‚</li>
<li>JavaæŒä¹…å±‚æ¡†æ¶ï¼š
<ul>
<li>MyBatis</li>
<li>Hibernateï¼ˆå®ç°äº†JPAè§„èŒƒï¼‰</li>
<li>jOOQ</li>
<li>Guzz</li>
<li>Spring Dataï¼ˆå®ç°äº†JPAè§„èŒƒï¼‰</li>
<li>ActiveJDBC</li>
<li>&hellip;&hellip;</li>
</ul>
</li>
</ul>
<h2 id="13-jdbcä¸è¶³">1.3 JDBCä¸è¶³<a hidden class="anchor" aria-hidden="true" href="#13-jdbcä¸è¶³">#</a></h2>
<ul>
<li>ç¤ºä¾‹ä»£ç 1ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// ......</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­</span>
</span></span><span style="display:flex;"><span>String sql = <span style="color:#0ff;font-weight:bold">&#34;insert into t_user(id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade) values(?,?,?,?,?,?,?,?,?,?,?,?)&#34;</span>;
</span></span><span style="display:flex;"><span>PreparedStatement ps = conn.<span style="color:#007f7f">prepareStatement</span>(sql);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç¹ççš„èµ‹å€¼ï¼šæ€è€ƒä¸€ä¸‹ï¼Œè¿™ç§æœ‰è§„å¾‹çš„ä»£ç èƒ½ä¸èƒ½é€šè¿‡åå°„æœºåˆ¶æ¥åšè‡ªåŠ¨åŒ–ã€‚</span>
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(1, <span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(2, <span style="color:#0ff;font-weight:bold">&#34;123456789&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(3, <span style="color:#0ff;font-weight:bold">&#34;zhangsan&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(4, <span style="color:#0ff;font-weight:bold">&#34;123456&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(5, <span style="color:#0ff;font-weight:bold">&#34;1980-10-11&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(6, <span style="color:#0ff;font-weight:bold">&#34;ç”·&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(7, <span style="color:#0ff;font-weight:bold">&#34;zhangsan@126.com&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(8, <span style="color:#0ff;font-weight:bold">&#34;åŒ—äº¬&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(9, <span style="color:#0ff;font-weight:bold">&#34;å¤§å…´åŒºå‡‰æ°´æ²³äºŒè¡—&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(10, <span style="color:#0ff;font-weight:bold">&#34;1000000&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(11, <span style="color:#0ff;font-weight:bold">&#34;16398574152&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(12, <span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> count = ps.<span style="color:#007f7f">executeUpdate</span>();
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ......</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¤ºä¾‹ä»£ç 2ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// ......</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// sqlè¯­å¥å†™æ­»åœ¨javaç¨‹åºä¸­</span>
</span></span><span style="display:flex;"><span>String sql = <span style="color:#0ff;font-weight:bold">&#34;select id,idCard,username,password,birth,gender,email,city,street,zipcode,phone,grade from t_user&#34;</span>;
</span></span><span style="display:flex;"><span>PreparedStatement ps = conn.<span style="color:#007f7f">prepareStatement</span>(sql);
</span></span><span style="display:flex;"><span>ResultSet rs = ps.<span style="color:#007f7f">executeQuery</span>();
</span></span><span style="display:flex;"><span>List&lt;User&gt; userList = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ€è€ƒä»¥ä¸‹å¾ªç¯ä¸­çš„æ‰€æœ‰ä»£ç æ˜¯å¦å¯ä»¥ä½¿ç”¨åå°„è¿›è¡Œè‡ªåŠ¨åŒ–å°è£…ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">while</span>(rs.<span style="color:#007f7f">next</span>()){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–æ•°æ®</span>
</span></span><span style="display:flex;"><span>    String id = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>    String idCard = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;idCard&#34;</span>);
</span></span><span style="display:flex;"><span>    String username = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>);
</span></span><span style="display:flex;"><span>    String password = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>);
</span></span><span style="display:flex;"><span>    String birth = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;birth&#34;</span>);
</span></span><span style="display:flex;"><span>    String gender = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;gender&#34;</span>);
</span></span><span style="display:flex;"><span>    String email = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;email&#34;</span>);
</span></span><span style="display:flex;"><span>    String city = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;city&#34;</span>);
</span></span><span style="display:flex;"><span>    String street = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;street&#34;</span>);
</span></span><span style="display:flex;"><span>    String zipcode = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;zipcode&#34;</span>);
</span></span><span style="display:flex;"><span>    String phone = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;phone&#34;</span>);
</span></span><span style="display:flex;"><span>    String grade = rs.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;grade&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ›å»ºå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    User user = <span style="color:#fff;font-weight:bold">new</span> User();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ç»™å¯¹è±¡å±æ€§èµ‹å€¼</span>
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setId</span>(id);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setIdCard</span>(idCard);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setUsername</span>(username);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setPassword</span>(password);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setBirth</span>(birth);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setGender</span>(gender);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setEmail</span>(email);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setCity</span>(city);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setStreet</span>(street);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setZipcode</span>(zipcode);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setPhone</span>(phone);
</span></span><span style="display:flex;"><span>    user.<span style="color:#007f7f">setGrade</span>(grade);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ·»åŠ åˆ°é›†åˆ</span>
</span></span><span style="display:flex;"><span>    userList.<span style="color:#007f7f">add</span>(user);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ......</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>JDBCä¸è¶³ï¼š
<ul>
<li>SQLè¯­å¥å†™æ­»åœ¨Javaç¨‹åºä¸­ï¼Œä¸çµæ´»ã€‚æ”¹SQLçš„è¯å°±è¦æ”¹Javaä»£ç ã€‚è¿èƒŒå¼€é—­åŸåˆ™OCPã€‚</li>
<li>ç»™?ä¼ å€¼æ˜¯ç¹ççš„ã€‚èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Ÿï¼Ÿï¼Ÿ</li>
<li>å°†ç»“æœé›†å°è£…æˆJavaå¯¹è±¡æ˜¯ç¹ççš„ã€‚èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Ÿï¼Ÿï¼Ÿ</li>
</ul>
</li>
</ul>
<h2 id="14-äº†è§£mybatis">1.4 äº†è§£MyBatis<a hidden class="anchor" aria-hidden="true" href="#14-äº†è§£mybatis">#</a></h2>
<ul>
<li>MyBatisæœ¬è´¨ä¸Šå°±æ˜¯å¯¹JDBCçš„å°è£…ï¼Œé€šè¿‡MyBatiså®ŒæˆCRUDã€‚</li>
<li>MyBatisåœ¨ä¸‰å±‚æ¶æ„ä¸­è´Ÿè´£æŒä¹…å±‚çš„ï¼Œå±äºæŒä¹…å±‚æ¡†æ¶ã€‚</li>
<li>MyBatisçš„å‘å±•å†ç¨‹ï¼š<font style="color:#E8323C;">ã€å¼•ç”¨ç™¾åº¦ç™¾ç§‘ã€‘</font>
<ul>
<li>MyBatisæœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundationè¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatisã€‚2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚</li>
<li>iBATISä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚iBATISæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒData Access Objectsï¼ˆDAOsï¼‰ã€‚</li>
</ul>
</li>
<li>æ‰“å¼€mybatisä»£ç å¯ä»¥çœ‹åˆ°å®ƒçš„åŒ…ç»“æ„ä¸­åŒ…å«ï¼šibatis
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ffd9d6a00222a6a9858f4a3c07722a51_MD5.png"></li>
</ul>
</li>
<li>ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„
<ul>
<li>Oï¼ˆObjectï¼‰ï¼šJavaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡</li>
<li>Rï¼ˆRelationalï¼‰ï¼šå…³ç³»å‹æ•°æ®åº“</li>
<li>Mï¼ˆMappingï¼‰ï¼šå°†Javaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•ï¼Œæˆ–æ˜¯å°†æ•°æ®åº“è¡¨ä¸­ä¸€è¡Œè®°å½•æ˜ å°„æˆJavaè™šæ‹Ÿæœºä¸­çš„ä¸€ä¸ªJavaå¯¹è±¡ã€‚</li>
<li>ORMå›¾ç¤º
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e2f6cc7a546a044051272e14e8d39462_MD5.png"></li>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/0fdee9625b1dcef173c7c39a9d891699_MD5.png"></li>
</ul>
</li>
<li>MyBatiså±äºåŠè‡ªåŠ¨åŒ–ORMæ¡†æ¶ã€‚</li>
<li>Hibernateå±äºå…¨è‡ªåŠ¨åŒ–çš„ORMæ¡†æ¶ã€‚</li>
</ul>
</li>
<li>MyBatisæ¡†æ¶ç‰¹ç‚¹ï¼š
<ul>
<li>æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ã€åŸºæœ¬æ˜ å°„ä»¥åŠé«˜çº§æ˜ å°„</li>
<li>é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä¸­æ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†</li>
<li>æ”¯æŒXMLå¼€å‘ï¼Œä¹Ÿæ”¯æŒæ³¨è§£å¼å¼€å‘ã€‚ã€ä¸ºäº†ä¿è¯sqlè¯­å¥çš„çµæ´»ï¼Œæ‰€ä»¥mybatiså¤§éƒ¨åˆ†æ˜¯é‡‡ç”¨XMLæ–¹å¼å¼€å‘ã€‚ã€‘</li>
<li>å°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Objectï¼Œç®€å•æ™®é€šçš„Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</li>
<li>ä½“ç§¯å°å¥½å­¦ï¼šä¸¤ä¸ªjaråŒ…ï¼Œä¸¤ä¸ªXMLé…ç½®æ–‡ä»¶ã€‚</li>
<li>å®Œå…¨åšåˆ°sqlè§£è€¦åˆã€‚</li>
<li>æä¾›äº†åŸºæœ¬æ˜ å°„æ ‡ç­¾ã€‚</li>
<li>æä¾›äº†é«˜çº§æ˜ å°„æ ‡ç­¾ã€‚</li>
<li>æä¾›äº†XMLæ ‡ç­¾ï¼Œæ”¯æŒåŠ¨æ€SQLçš„ç¼–å†™ã€‚</li>
<li>&hellip;&hellip;</li>
</ul>
</li>
</ul>
<h1 id="äºŒmybatiså…¥é—¨ç¨‹åº">äºŒã€MyBatiså…¥é—¨ç¨‹åº<a hidden class="anchor" aria-hidden="true" href="#äºŒmybatiså…¥é—¨ç¨‹åº">#</a></h1>
<p>åªè¦ä½ ä¼šJDBCï¼ŒMyBatiså°±å¯ä»¥å­¦ã€‚</p>
<h2 id="21-ç‰ˆæœ¬">2.1 ç‰ˆæœ¬<a hidden class="anchor" aria-hidden="true" href="#21-ç‰ˆæœ¬">#</a></h2>
<h3 id="è½¯ä»¶ç‰ˆæœ¬">è½¯ä»¶ç‰ˆæœ¬ï¼š<a hidden class="anchor" aria-hidden="true" href="#è½¯ä»¶ç‰ˆæœ¬">#</a></h3>
<ul>
<li>IntelliJ IDEAï¼š2022.1.4</li>
<li>Navicat for MySQLï¼š16.0.14</li>
<li>MySQLæ•°æ®åº“ï¼š8.0.30</li>
</ul>
<h3 id="ç»„ä»¶ç‰ˆæœ¬">ç»„ä»¶ç‰ˆæœ¬ï¼š<a hidden class="anchor" aria-hidden="true" href="#ç»„ä»¶ç‰ˆæœ¬">#</a></h3>
<ul>
<li>MySQLé©±åŠ¨ï¼š8.0.30</li>
<li><font style="color:#F5222D;">MyBatisï¼š3.5.10</font></li>
<li><font style="color:#F5222D;">JDKï¼šJava17</font></li>
<li>JUnitï¼š4.13.2</li>
<li>Logbackï¼š1.2.11</li>
</ul>
<h2 id="22-mybatisä¸‹è½½">2.2 MyBatisä¸‹è½½<a hidden class="anchor" aria-hidden="true" href="#22-mybatisä¸‹è½½">#</a></h2>
<ul>
<li>ä»githubä¸Šä¸‹è½½ï¼Œåœ°å€ï¼š<a href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a>
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/9f73b11dbc575e75f5f48a09f2aa0585_MD5.png"></li>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/34a4a4a47a618249b431f974c5aa4c00_MD5.png"></li>
</ul>
</li>
<li>å°†æ¡†æ¶ä»¥åŠæ¡†æ¶çš„æºç éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½æ¡†æ¶åè§£å‹ï¼Œæ‰“å¼€mybatisç›®å½•
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6d712fc956f2d8ffa9c86c5108448030_MD5.png"></li>
<li>é€šè¿‡ä»¥ä¸Šè§£å‹å¯ä»¥çœ‹åˆ°ï¼Œæ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚æˆ‘ä»¬çš„mybatisè¯¾ç¨‹ä½¿ç”¨mavenï¼Œæ‰€ä»¥è¿™ä¸ªjaræˆ‘ä»¬ä¸éœ€è¦ã€‚</li>
<li>å®˜æ–¹æ‰‹å†Œéœ€è¦ã€‚</li>
</ul>
</li>
</ul>
<h2 id="23-mybatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤">2.3 MyBatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤<a hidden class="anchor" aria-hidden="true" href="#23-mybatiså…¥é—¨ç¨‹åºå¼€å‘æ­¥éª¤">#</a></h2>
<ul>
<li>å†™ä»£ç å‰å‡†å¤‡ï¼š
<ul>
<li>å‡†å¤‡æ•°æ®åº“è¡¨ï¼šæ±½è½¦è¡¨t_carï¼Œå­—æ®µåŒ…æ‹¬ï¼š
<ul>
<li>idï¼šä¸»é”®ï¼ˆè‡ªå¢ï¼‰ã€bigintã€‘</li>
<li>car_numï¼šæ±½è½¦ç¼–å·ã€varcharã€‘</li>
<li>brandï¼šå“ç‰Œã€varcharã€‘</li>
<li>guide_priceï¼šå‚å®¶æŒ‡å¯¼ä»·ã€decimalç±»å‹ï¼Œä¸“é—¨ä¸ºè´¢åŠ¡æ•°æ®å‡†å¤‡çš„ç±»å‹ã€‘</li>
<li>produce_timeï¼šç”Ÿäº§æ—¶é—´ã€charï¼Œå¹´æœˆæ—¥å³å¯ï¼Œ10ä¸ªé•¿åº¦ï¼Œ&lsquo;2022-10-11&rsquo;ã€‘</li>
<li>car_typeï¼šæ±½è½¦ç±»å‹ï¼ˆç‡ƒæ²¹è½¦ã€ç”µè½¦ã€æ°¢èƒ½æºï¼‰ã€varcharã€‘</li>
</ul>
</li>
<li>ä½¿ç”¨navicat for mysqlå·¥å…·å»ºè¡¨
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/675a6137195db9f7d11870e049bc786f_MD5.png"></li>
</ul>
</li>
<li>ä½¿ç”¨navicat for mysqlå·¥å…·å‘t_carè¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼š
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c187a312b713e376afeb32719bd484f9_MD5.png"></li>
</ul>
</li>
<li>åˆ›å»ºProjectï¼šå»ºè®®åˆ›å»ºEmpty Projectï¼Œè®¾ç½®Javaç‰ˆæœ¬ä»¥åŠç¼–è¯‘ç‰ˆæœ¬ç­‰ã€‚
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/be5370b0feddac093dc12e597253918c_MD5.png"></li>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e66664f9b75e9c81f4eaff2e173cf240_MD5.png"></li>
</ul>
</li>
<li>è®¾ç½®IDEAçš„maven
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/b2da04abcdf01d2e03f1c631312445cf_MD5.png"></li>
</ul>
</li>
<li>åˆ›å»ºModuleï¼šæ™®é€šçš„Maven Javaæ¨¡å—
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a3f339225d56ab3ab8257b0c57c92045_MD5.png"></li>
</ul>
</li>
</ul>
</li>
<li>æ­¥éª¤1ï¼šæ‰“åŒ…æ–¹å¼ï¼šjarï¼ˆ<font style="color:#F5222D;">ä¸éœ€è¦warï¼Œå› ä¸ºmybatiså°è£…çš„æ˜¯jdbcã€‚</font>ï¼‰</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;groupId&gt;</span>com.powernode<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-001-introduction<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ­¥éª¤2ï¼šå¼•å…¥ä¾èµ–ï¼ˆmybatisä¾èµ– + mysqlé©±åŠ¨ä¾èµ–ï¼‰</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--mybatisæ ¸å¿ƒä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>3.5.10<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>8.0.30<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ­¥éª¤3ï¼šåœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºmybatis-config.xmlé…ç½®æ–‡ä»¶ï¼ˆå¯ä»¥å‚è€ƒmybatisæ‰‹å†Œæ‹·è´ï¼‰</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--sqlæ˜ å°„æ–‡ä»¶åˆ›å»ºå¥½ä¹‹åï¼Œéœ€è¦å°†è¯¥æ–‡ä»¶è·¯å¾„é…ç½®åˆ°è¿™é‡Œ--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„1ï¼šmybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ–‡ä»¶åä¸ä¸€å®šæ˜¯mybatis-config.xmlï¼Œå¯ä»¥æ˜¯å…¶å®ƒåå­—ã€‚</p>
<p>æ³¨æ„2ï¼šmybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ä¹Ÿå¯ä»¥éšæ„ã€‚è¿™é‡Œé€‰æ‹©æ”¾åœ¨resourcesæ ¹ä¸‹ï¼Œç›¸å½“äºæ”¾åˆ°äº†ç±»çš„æ ¹è·¯å¾„ä¸‹ã€‚</p>
<ul>
<li>æ­¥éª¤4ï¼šåœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºCarMapper.xmlé…ç½®æ–‡ä»¶ï¼ˆå¯ä»¥å‚è€ƒmybatisæ‰‹å†Œæ‹·è´ï¼‰</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--namespaceå…ˆéšæ„å†™ä¸€ä¸ª--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--insert sqlï¼šä¿å­˜ä¸€ä¸ªæ±½è½¦ä¿¡æ¯--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car
</span></span><span style="display:flex;"><span>            (id,car_num,brand,guide_price,produce_time,car_type) 
</span></span><span style="display:flex;"><span>        values
</span></span><span style="display:flex;"><span>            (null,&#39;102&#39;,&#39;ä¸°ç”°mirai&#39;,40.30,&#39;2014-10-05&#39;,&#39;æ°¢èƒ½æº&#39;)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„1ï¼š<strong><font style="color:#E8323C;">sqlè¯­å¥æœ€åç»“å°¾å¯ä»¥ä¸å†™â€œ;â€</font></strong></p>
<p>æ³¨æ„2ï¼šCarMapper.xmlæ–‡ä»¶çš„åå­—ä¸æ˜¯å›ºå®šçš„ã€‚å¯ä»¥ä½¿ç”¨å…¶å®ƒåå­—ã€‚</p>
<p>æ³¨æ„3ï¼šCarMapper.xmlæ–‡ä»¶çš„ä½ç½®ä¹Ÿæ˜¯éšæ„çš„ã€‚è¿™é‡Œé€‰æ‹©æ”¾åœ¨resourcesæ ¹ä¸‹ï¼Œç›¸å½“äºæ”¾åˆ°äº†ç±»çš„æ ¹è·¯å¾„ä¸‹ã€‚</p>
<p>æ³¨æ„4ï¼š<font style="color:#F5222D;">å°†CarMapper.xmlæ–‡ä»¶è·¯å¾„é…ç½®åˆ°mybatis-config.xmlï¼š</font></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ­¥éª¤5ï¼šç¼–å†™MyBatisIntroductionTestä»£ç </li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * MyBatiså…¥é—¨ç¨‹åº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MyBatisIntroductionTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2. åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        InputStream is = Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getContextClassLoader</span>().<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(is);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3. åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 4. æ‰§è¡Œsql</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>); <span style="color:#007f7f">// è¿™ä¸ª&#34;insertCar&#34;å¿…é¡»æ˜¯sqlçš„id</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥å‡ æ¡æ•°æ®ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 5. æäº¤ï¼ˆmybatisé»˜è®¤é‡‡ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯JDBCï¼Œé»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ã€‚ï¼‰</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 6. å…³é—­èµ„æºï¼ˆåªå…³é—­æ˜¯ä¸ä¼šæäº¤çš„ï¼‰</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„1ï¼šé»˜è®¤é‡‡ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šJDBCã€‚JDBCäº‹åŠ¡é»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ã€‚</p>
<ul>
<li>æ­¥éª¤6ï¼šè¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœï¼Œä»¥åŠæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4f11051dc315b59935f1be2b07959600_MD5.png"></li>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5e32bc304be01984469a2ba7c592d2b8_MD5.png"></li>
</ul>
</li>
</ul>
<h2 id="24-å…³äºmybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£">2.4 å…³äºMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£<a hidden class="anchor" aria-hidden="true" href="#24-å…³äºmybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£">#</a></h2>
<ul>
<li>æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—æ˜¯éšæ„çš„ï¼Œå› ä¸ºä»¥ä¸‹çš„ä»£ç ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// æ–‡ä»¶åæ˜¯å‡ºç°åœ¨ç¨‹åºä¸­çš„ï¼Œæ–‡ä»¶åå¦‚æœä¿®æ”¹äº†ï¼Œå¯¹åº”è¿™é‡Œçš„javaç¨‹åºä¹Ÿæ”¹ä¸€ä¸‹å°±è¡Œäº†ã€‚</span>
</span></span><span style="display:flex;"><span>InputStream is = Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getContextClassLoader</span>().<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ ¸å¿ƒé…ç½®æ–‡ä»¶å¿…é¡»æ”¾åˆ°resourcesä¸‹å—ï¼Ÿæ”¾åˆ°Dç›˜æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥å—ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼š</li>
</ul>
<p><font style="color:#F5222D;">å°†mybatis-config.xmlæ–‡ä»¶æ‹·è´ä¸€ä»½æ”¾åˆ°Dç›˜æ ¹ä¸‹ï¼Œç„¶åç¼–å†™ä»¥ä¸‹ç¨‹åºï¼š</font></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.FileInputStream;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æµ‹è¯•mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„é—®é¢˜
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MyBatisConfigFilePath {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2. åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿™åªæ˜¯ä¸€ä¸ªè¾“å…¥æµï¼Œå¯ä»¥è‡ªå·±newã€‚</span>
</span></span><span style="display:flex;"><span>        InputStream is = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(<span style="color:#0ff;font-weight:bold">&#34;D:/mybatis-config.xml&#34;</span>); 
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(is);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3. åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 4. æ‰§è¡Œsql</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥å‡ æ¡æ•°æ®ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 5. æäº¤ï¼ˆmybatisé»˜è®¤é‡‡ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯JDBCï¼Œé»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ã€‚ï¼‰</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 6. å…³é—­èµ„æºï¼ˆåªå…³é—­æ˜¯ä¸ä¼šæäº¤çš„ï¼‰</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šç¨‹åºè¿è¡Œåï¼Œçœ‹åˆ°æ•°æ®åº“è¡¨t_carä¸­åˆæ–°å¢ä¸€æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼ˆæˆåŠŸäº†ï¼‰ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7049b267dd6823e1105752185cf7738a_MD5.png"></p>
<p>ç»è¿‡æµ‹è¯•è¯´æ˜mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—æ˜¯éšæ„çš„ï¼Œå­˜æ”¾è·¯å¾„ä¹Ÿæ˜¯éšæ„çš„ã€‚</p>
<p>è™½ç„¶mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—ä¸æ˜¯å›ºå®šçš„ï¼Œä½†é€šå¸¸è¯¥æ–‡ä»¶çš„åå­—å«åšï¼šmybatis-config.xml</p>
<p>è™½ç„¶mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è·¯å¾„ä¸æ˜¯å›ºå®šçš„ï¼Œä½†é€šå¸¸è¯¥æ–‡ä»¶ä¼šå­˜æ”¾åˆ°**<font style="color:#F5222D;">ç±»è·¯å¾„</font>**å½“ä¸­ï¼Œè¿™æ ·è®©é¡¹ç›®çš„ç§»æ¤æ›´åŠ å¥å£®ã€‚</p>
<ul>
<li>åœ¨mybatisä¸­æä¾›äº†ä¸€ä¸ªç±»ï¼šResourcesã€org.apache.ibatis.io.Resourcesã€‘ï¼Œè¯¥ç±»å¯ä»¥ä»ç±»è·¯å¾„å½“ä¸­è·å–èµ„æºï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å®ƒæ¥è·å–è¾“å…¥æµInputStreamï¼Œä»£ç å¦‚ä¸‹</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// è¿™ç§æ–¹å¼åªèƒ½ä»ç±»è·¯å¾„å½“ä¸­è·å–èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´mybatis-config.xmlæ–‡ä»¶éœ€è¦åœ¨ç±»è·¯å¾„ä¸‹ã€‚</span>
</span></span><span style="display:flex;"><span>InputStream is = Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="25-mybatisç¬¬ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•">2.5 MyBatisç¬¬ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•<a hidden class="anchor" aria-hidden="true" href="#25-mybatisç¬¬ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ¯”è¾ƒå®Œæ•´çš„ç¬¬ä¸€ä¸ªmybatisç¨‹åºå†™æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MyBatisCompleteCodeTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 4.æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 5.æäº¤</span>
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// å›æ»š</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                sqlSession.<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 6.å…³é—­</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåæ•°æ®åº“è¡¨çš„å˜åŒ–ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6a9356643d168f9b1fc3cd4240f1d1d6_MD5.png"></p>
<h2 id="26-å¼•å…¥junit">2.6 å¼•å…¥JUnit<a hidden class="anchor" aria-hidden="true" href="#26-å¼•å…¥junit">#</a></h2>
<ul>
<li>JUnitæ˜¯ä¸“é—¨åšå•å…ƒæµ‹è¯•çš„ç»„ä»¶ã€‚
<ul>
<li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå•å…ƒæµ‹è¯•ä¸€èˆ¬æ˜¯ç”±æˆ‘ä»¬Javaç¨‹åºå‘˜æ¥å®Œæˆçš„ã€‚</li>
<li>æˆ‘ä»¬è¦å¯¹æˆ‘ä»¬è‡ªå·±å†™çš„æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è´Ÿè´£ä»»ï¼Œè¦ä¿è¯æ¯ä¸ªä¸šåŠ¡æ–¹æ³•åœ¨è¿›è¡Œæµ‹è¯•çš„æ—¶å€™éƒ½èƒ½é€šè¿‡ã€‚</li>
<li>æµ‹è¯•çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ä¸¤ä¸ªæ¦‚å¿µï¼š
<ul>
<li>æœŸæœ›å€¼</li>
<li>å®é™…å€¼</li>
</ul>
</li>
<li>æœŸæœ›å€¼å’Œå®é™…å€¼ç›¸åŒè¡¨ç¤ºæµ‹è¯•é€šè¿‡ï¼ŒæœŸæœ›å€¼å’Œå®é™…å€¼ä¸åŒåˆ™å•å…ƒæµ‹è¯•æ‰§è¡Œæ—¶ä¼šæŠ¥é”™ã€‚</li>
</ul>
</li>
<li>è¿™é‡Œå¼•å…¥JUnitæ˜¯ä¸ºäº†ä»£æ›¿mainæ–¹æ³•ã€‚</li>
<li>ä½¿ç”¨JUnitæ­¥éª¤ï¼š
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- junitä¾èµ– --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- ç¬¬äºŒæ­¥ï¼šç¼–å†™å•å…ƒæµ‹è¯•ç±»ã€æµ‹è¯•ç”¨ä¾‹ã€‘ï¼Œæµ‹è¯•ç”¨ä¾‹ä¸­æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¸Šä½¿ç”¨@Testæ³¨è§£è¿›è¡Œæ ‡æ³¨ã€‚
    * æµ‹è¯•ç”¨ä¾‹çš„åå­—ä»¥åŠæ¯ä¸ªæµ‹è¯•æ–¹æ³•çš„å®šä¹‰éƒ½æ˜¯æœ‰è§„èŒƒçš„ï¼š
        + æµ‹è¯•ç”¨ä¾‹çš„åå­—ï¼šXxxTest
        + æµ‹è¯•æ–¹æ³•å£°æ˜æ ¼å¼ï¼špublic void testä¸šåŠ¡æ–¹æ³•å(){}
</code></pre>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// æµ‹è¯•ç”¨ä¾‹</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æµ‹è¯•æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsert(){}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testUpdate(){}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- ç¬¬ä¸‰æ­¥ï¼šå¯ä»¥åœ¨ç±»ä¸Šæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•ä¸Šæ‰§è¡Œ
    * åœ¨ç±»ä¸Šæ‰§è¡Œæ—¶ï¼Œè¯¥ç±»ä¸­æ‰€æœ‰çš„æµ‹è¯•æ–¹æ³•éƒ½ä¼šæ‰§è¡Œã€‚
    * åœ¨æ–¹æ³•ä¸Šæ‰§è¡Œæ—¶ï¼Œåªæ‰§è¡Œå½“å‰çš„æµ‹è¯•æ–¹æ³•ã€‚
</code></pre>
<ul>
<li>ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæ¥æµ‹è¯•insertCarä¸šåŠ¡</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertCar(){
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 4.æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 5.æäº¤</span>
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// å›æ»š</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                sqlSession.<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// 6.å…³é—­</span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨çš„å˜åŒ–ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/9fb5d437f14267fb9a8f825453c964d5_MD5.png"></p>
<h2 id="27-å¼•å…¥æ—¥å¿—æ¡†æ¶logback">2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶logback<a hidden class="anchor" aria-hidden="true" href="#27-å¼•å…¥æ—¥å¿—æ¡†æ¶logback">#</a></h2>
<ul>
<li>å¼•å…¥æ—¥å¿—æ¡†æ¶çš„ç›®çš„æ˜¯ä¸ºäº†çœ‹æ¸…æ¥šmybatisæ‰§è¡Œçš„å…·ä½“sqlã€‚</li>
<li>å¯ç”¨æ ‡å‡†æ—¥å¿—ç»„ä»¶ï¼Œåªéœ€è¦åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼šã€å¯å‚è€ƒmybatisæ‰‹å†Œã€‘</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;logImpl&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT_LOGGING&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ‡å‡†æ—¥å¿—ä¹Ÿå¯ä»¥ç”¨ï¼Œä½†æ˜¯é…ç½®ä¸å¤Ÿçµæ´»ï¼Œå¯ä»¥é›†æˆå…¶ä»–çš„æ—¥å¿—ç»„ä»¶ï¼Œä¾‹å¦‚ï¼šlog4jï¼Œlogbackç­‰ã€‚</p>
<ul>
<li>logbackæ˜¯ç›®å‰æ—¥å¿—æ¡†æ¶ä¸­æ€§èƒ½è¾ƒå¥½çš„ï¼Œè¾ƒæµè¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰å®ƒã€‚</li>
<li>å¼•å…¥logbackçš„æ­¥éª¤ï¼š
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥logbackç›¸å…³ä¾èµ–</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>1.2.11<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- ç¬¬äºŒæ­¥ï¼šå¼•å…¥logbackç›¸å…³é…ç½®æ–‡ä»¶ï¼ˆæ–‡ä»¶åå«åšlogback.xmlæˆ–logback-test.xmlï¼Œæ”¾åˆ°ç±»è·¯å¾„å½“ä¸­ï¼‰
</code></pre>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.encoder.PatternLayoutEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æŒ‰ç…§æ¯å¤©ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;FileNamePattern&gt;</span>${LOG_HOME}/TestWeb.log.%d{yyyy-MM-dd}.log<span style="font-weight:bold">&lt;/FileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;MaxHistory&gt;</span>30<span style="font-weight:bold">&lt;/MaxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.encoder.PatternLayoutEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶æœ€å¤§çš„å¤§å°--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;triggeringPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;MaxFileSize&gt;</span>100MB<span style="font-weight:bold">&lt;/MaxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/triggeringPolicy&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--mybatis log configure--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.apache.ibatis&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;TRACE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.Connection&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.Statement&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.PreparedStatement&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ«,logbackæ—¥å¿—çº§åˆ«åŒ…æ‹¬äº”ä¸ªï¼šTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å†æ¬¡æ‰§è¡Œå•å…ƒæµ‹è¯•æ–¹æ³•testInsertCarï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰sqlè¯­å¥è¾“å‡º
<ul>
<li><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6b24dd0d26538bc352c3c2bfd5f03007_MD5.png"></li>
</ul>
</li>
</ul>
<h2 id="28-mybatiså·¥å…·ç±»sqlsessionutilçš„å°è£…">2.8 MyBatiså·¥å…·ç±»SqlSessionUtilçš„å°è£…<a hidden class="anchor" aria-hidden="true" href="#28-mybatiså·¥å…·ç±»sqlsessionutilçš„å°è£…">#</a></h2>
<ul>
<li>æ¯ä¸€æ¬¡è·å–SqlSessionå¯¹è±¡ä»£ç å¤ªç¹çï¼Œå°è£…ä¸€ä¸ªå·¥å…·ç±»</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.utils;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * MyBatiså·¥å…·ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionUtil {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> SqlSessionFactory sqlSessionFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>            sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return æ–°çš„ä¼šè¯å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> SqlSession openSession() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlSessionFactory.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æµ‹è¯•å·¥å…·ç±»ï¼Œå°†testInsertCar()æ”¹é€ </li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertCar(){
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•:&#34;</span> + count);
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ä¸‰ä½¿ç”¨mybatiså®Œæˆcrud">ä¸‰ã€ä½¿ç”¨MyBatiså®ŒæˆCRUD<a hidden class="anchor" aria-hidden="true" href="#ä¸‰ä½¿ç”¨mybatiså®Œæˆcrud">#</a></h1>
<ul>
<li>å‡†å¤‡å·¥ä½œ
<ul>
<li>åˆ›å»ºmoduleï¼ˆMavençš„æ™®é€šJavaæ¨¡å—ï¼‰ï¼šmybatis-002-crud</li>
<li>pom.xml
<ul>
<li>æ‰“åŒ…æ–¹å¼jar</li>
<li>ä¾èµ–ï¼š
<ul>
<li>mybatisä¾èµ–</li>
<li>mysqlé©±åŠ¨ä¾èµ–</li>
<li>junitä¾èµ–</li>
<li>logbackä¾èµ–</li>
</ul>
</li>
</ul>
</li>
<li>mybatis-config.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li>
<li>CarMapper.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li>
<li>logback.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</li>
<li>æä¾›com.powernode.mybatis.utils.SqlSessionUtilå·¥å…·ç±»</li>
<li>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šcom.powernode.mybatis.CarMapperTest</li>
</ul>
</li>
</ul>
<h2 id="31-insertcreate">3.1 insertï¼ˆCreateï¼‰<a hidden class="anchor" aria-hidden="true" href="#31-insertcreate">#</a></h2>
<p>åˆ†æä»¥ä¸‹SQLæ˜ å°„æ–‡ä»¶ä¸­SQLè¯­å¥å­˜åœ¨çš„é—®é¢˜</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(&#39;103&#39;, &#39;å¥”é©°E300L&#39;, 50.3, &#39;2022-01-01&#39;, &#39;ç‡ƒæ²¹è½¦&#39;)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼šSQLè¯­å¥ä¸­çš„å€¼ä¸åº”è¯¥å†™æ­»ï¼Œå€¼åº”è¯¥æ˜¯ç”¨æˆ·æä¾›çš„ã€‚ä¹‹å‰çš„JDBCä»£ç æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// JDBCä¸­ä½¿ç”¨ ? ä½œä¸ºå ä½ç¬¦ã€‚é‚£ä¹ˆMyBatisä¸­ä¼šä½¿ç”¨ä»€ä¹ˆä½œä¸ºå ä½ç¬¦å‘¢ï¼Ÿ</span>
</span></span><span style="display:flex;"><span>String sql = <span style="color:#0ff;font-weight:bold">&#34;insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(?,?,?,?,?)&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ......</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// ç»™ ? ä¼ å€¼ã€‚é‚£ä¹ˆMyBatisä¸­åº”è¯¥æ€ä¹ˆä¼ å€¼å‘¢ï¼Ÿ</span>
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(1,<span style="color:#0ff;font-weight:bold">&#34;103&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(2,<span style="color:#0ff;font-weight:bold">&#34;å¥”é©°E300L&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setDouble</span>(3,50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(4,<span style="color:#0ff;font-weight:bold">&#34;2022-01-01&#34;</span>);
</span></span><span style="display:flex;"><span>ps.<span style="color:#007f7f">setString</span>(5,<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨MyBatisä¸­å¯ä»¥è¿™æ ·åšï¼š</p>
<p><strong><font style="color:#E8323C;">åœ¨Javaç¨‹åºä¸­ï¼Œå°†æ•°æ®æ”¾åˆ°Mapé›†åˆä¸­</font></strong></p>
<p><strong><font style="color:#E8323C;">åœ¨sqlè¯­å¥ä¸­ä½¿ç”¨ #{mapé›†åˆçš„key} æ¥å®Œæˆä¼ å€¼ï¼Œ#{} ç­‰åŒäºJDBCä¸­çš„ ? ï¼Œ#{}å°±æ˜¯å ä½ç¬¦</font></strong></p>
<p>Javaç¨‹åºè¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.HashMap;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æµ‹è¯•MyBatisçš„CRUD
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertCar(){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å‡†å¤‡æ•°æ®</span>
</span></span><span style="display:flex;"><span>        Map&lt;String, Object&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;k1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;103&#34;</span>);
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;k2&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å¥”é©°E300L&#34;</span>);
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;k3&#34;</span>, 50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;k4&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2020-10-01&#34;</span>);
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;k5&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥ï¼ˆä½¿ç”¨mapé›†åˆç»™sqlè¯­å¥ä¼ é€’æ•°æ®ï¼‰</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>, map);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>SQLè¯­å¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{k1},#{k2},#{k3},#{k4},#{k5})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>**<font style="color:#E8323C;">#{} çš„é‡Œé¢å¿…é¡»å¡«å†™mapé›†åˆçš„keyï¼Œä¸èƒ½éšä¾¿å†™ã€‚</font>**è¿è¡Œæµ‹è¯•ç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®åº“ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7256a20a3354af4499edf45bd9d1618e_MD5.png"></p>
<p>å¦‚æœ#{}é‡Œå†™çš„æ˜¯mapé›†åˆä¸­ä¸å­˜åœ¨çš„keyä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{kk},#{k2},#{k3},#{k4},#{k5})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/231b833bca987ee323517541626af395_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/80e9f7ed9c4050261dfd9a14e8c26aaf_MD5.png"></p>
<p>é€šè¿‡æµ‹è¯•ï¼Œçœ‹åˆ°ç¨‹åºå¹¶æ²¡æœ‰æŠ¥é”™ã€‚æ­£å¸¸æ‰§è¡Œã€‚ä¸è¿‡ #{kk} çš„å†™æ³•å¯¼è‡´æ— æ³•è·å–åˆ°mapé›†åˆä¸­çš„æ•°æ®ï¼Œæœ€ç»ˆå¯¼è‡´æ•°æ®åº“è¡¨car_numæ’å…¥äº†NULLã€‚</p>
<p>åœ¨ä»¥ä¸Šsqlè¯­å¥ä¸­ï¼Œå¯ä»¥çœ‹åˆ°#{k1} #{k2} #{k3} #{k4} #{k5}çš„å¯è¯»æ€§å¤ªå·®ï¼Œä¸ºäº†å¢å¼ºå¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†Javaç¨‹åºåšå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;String, Object&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è®©keyçš„å¯è¯»æ€§å¢å¼º</span>
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;carNum&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;103&#34;</span>);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å¥”é©°E300L&#34;</span>);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>, 50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;produceTime&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2020-10-01&#34;</span>);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>SQLè¯­å¥åšå¦‚ä¸‹ä¿®æ”¹ï¼Œè¿™æ ·å¯ä»¥å¢å¼ºç¨‹åºçš„å¯è¯»æ€§ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6a4362f9653845ab1578f6dc683f5311_MD5.png"></p>
<p>ä½¿ç”¨Mapé›†åˆå¯ä»¥ä¼ å‚ï¼Œé‚£ä½¿ç”¨pojoï¼ˆç®€å•æ™®é€šçš„javaå¯¹è±¡ï¼‰å¯ä»¥å®Œæˆä¼ å‚å—ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ä¸€ä¸ªpojoç±»Carï¼Œæä¾›ç›¸å…³å±æ€§ã€‚</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">88
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * POJOsï¼Œç®€å•æ™®é€šçš„Javaå¯¹è±¡ã€‚å°è£…æ•°æ®ç”¨çš„ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Car {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String carNum;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String brand;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Double guidePrice;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String produceTime;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String carType;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;Car{&#34;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;id=&#34;</span> + id +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, carNum=&#39;&#34;</span> + carNum + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, brand=&#39;&#34;</span> + brand + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, guidePrice=&#34;</span> + guidePrice +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, produceTime=&#39;&#34;</span> + produceTime + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, carType=&#39;&#34;</span> + carType + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#39;}&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Car() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Car(Long id, String carNum, String brand, Double guidePrice, String produceTime, String carType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">carNum</span> = carNum;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">brand</span> = brand;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">guidePrice</span> = guidePrice;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">produceTime</span> = produceTime;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">carType</span> = carType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Long getId() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setId(Long id) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getCarNum() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> carNum;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setCarNum(String carNum) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">carNum</span> = carNum;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getBrand() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> brand;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setBrand(String brand) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">brand</span> = brand;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Double getGuidePrice() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> guidePrice;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setGuidePrice(Double guidePrice) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">guidePrice</span> = guidePrice;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getProduceTime() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> produceTime;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setProduceTime(String produceTime) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">produceTime</span> = produceTime;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getCarType() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> carType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setCarType(String carType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">carType</span> = carType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¬¬äºŒæ­¥ï¼šJavaç¨‹åº</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertCarByPOJO(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ›å»ºPOJOï¼Œå°è£…æ•°æ®</span>
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;103&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;å¥”é©°C200&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setGuidePrice</span>(33.<span style="color:#007f7f">23</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2020-10-11&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLï¼Œä¼ æ•°æ®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCarByPOJO&#34;</span>, car);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•&#34;</span> + count);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¬¬ä¸‰æ­¥ï¼šSQLè¯­å¥</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCarByPOJO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--#{} é‡Œå†™çš„æ˜¯POJOçš„å±æ€§å--&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨ï¼š</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8108cbbe1d836cccf92627c1669c2fd5_MD5.png"></p>
<p>#{} é‡Œå†™çš„æ˜¯POJOçš„å±æ€§åï¼Œå¦‚æœå†™æˆå…¶ä»–çš„ä¼šæœ‰é—®é¢˜å—ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCarByPOJO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{a},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç¨‹åºï¼Œå‡ºç°äº†ä»¥ä¸‹å¼‚å¸¸ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/636b8b56e8a0068ffbf2c5461264e687_MD5.png"></p>
<p>é”™è¯¯ä¿¡æ¯ä¸­æè¿°ï¼šåœ¨Carç±»ä¸­æ²¡æœ‰æ‰¾åˆ°aå±æ€§çš„getteræ–¹æ³•ã€‚</p>
<p>ä¿®æ”¹POJOç±»Carçš„ä»£ç ï¼Œ<strong><font style="color:#E8323C;">åªå°†getCarNum()æ–¹æ³•åä¿®æ”¹ä¸ºgetA()ï¼Œå…¶ä»–ä»£ç ä¸å˜</font></strong>ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/b65fc0d1cfa06bd4859ce08bc2b0b38b_MD5.png"></p>
<p>å†è¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨ä¸­æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/3b16c95dd0ee10a523d7241d99dbc022_MD5.png"></p>
<p><strong><font style="color:#E8323C;">ç»è¿‡æµ‹è¯•å¾—å‡ºç»“è®ºï¼š</font></strong></p>
<p><strong><font style="color:#E8323C;">å¦‚æœé‡‡ç”¨mapé›†åˆä¼ å‚ï¼Œ#{} é‡Œå†™çš„æ˜¯mapé›†åˆçš„keyï¼Œå¦‚æœkeyä¸å­˜åœ¨ä¸ä¼šæŠ¥é”™ï¼Œæ•°æ®åº“è¡¨ä¸­ä¼šæ’å…¥NULLã€‚</font></strong></p>
<p><strong><font style="color:#E8323C;">å¦‚æœé‡‡ç”¨POJOä¼ å‚ï¼Œ#{} é‡Œå†™çš„æ˜¯getæ–¹æ³•çš„æ–¹æ³•åå»æ‰getä¹‹åå°†å‰©ä¸‹çš„å•è¯é¦–å­—æ¯å˜å°å†™ï¼ˆä¾‹å¦‚ï¼šgetAgeå¯¹åº”çš„æ˜¯#{age}ï¼ŒgetUserNameå¯¹åº”çš„æ˜¯#{userName}ï¼‰ï¼Œå¦‚æœè¿™æ ·çš„getæ–¹æ³•ä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚</font></strong></p>
<p>æ³¨æ„ï¼šå…¶å®ä¼ å‚æ•°çš„æ—¶å€™æœ‰ä¸€ä¸ªå±æ€§parameterTypeï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥æŒ‡å®šä¼ å‚çš„æ•°æ®ç±»å‹ï¼Œä¸è¿‡è¿™ä¸ªå±æ€§æ˜¯å¯ä»¥çœç•¥çš„</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span> <span style="color:#007f7f">parameterType=</span><span style="color:#0ff;font-weight:bold">&#34;java.util.Map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCarByPOJO&#34;</span> <span style="color:#007f7f">parameterType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car(car_num,brand,guide_price,produce_time,car_type) values(#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="32-deletedelete">3.2 deleteï¼ˆDeleteï¼‰<a hidden class="anchor" aria-hidden="true" href="#32-deletedelete">#</a></h2>
<p>éœ€æ±‚ï¼šæ ¹æ®car_numè¿›è¡Œåˆ é™¤ã€‚</p>
<p>SQLè¯­å¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteByCarNum&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  delete from t_car where car_num = #{SuiBianXie}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaç¨‹åºè¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDeleteByCarNum(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">delete</span>(<span style="color:#0ff;font-weight:bold">&#34;deleteByCarNum&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;102&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7aa6e447c14572d81354d0b9caf63704_MD5.png"></p>
<p><strong><font style="color:#E8323C;">æ³¨æ„ï¼šå½“å ä½ç¬¦åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œ${} é‡Œé¢çš„å†…å®¹å¯ä»¥éšä¾¿å†™ã€‚</font></strong></p>
<h2 id="33-updateupdate">3.3 updateï¼ˆUpdateï¼‰<a hidden class="anchor" aria-hidden="true" href="#33-updateupdate">#</a></h2>
<p>éœ€æ±‚ï¼šä¿®æ”¹id=34çš„Carä¿¡æ¯ï¼Œcar_numä¸º102ï¼Œbrandä¸ºæ¯”äºšè¿ªæ±‰ï¼Œguide_priceä¸º30.23ï¼Œproduce_timeä¸º2018-09-10ï¼Œcar_typeä¸ºç”µè½¦</p>
<p>ä¿®æ”¹å‰ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/0fbed105baf4d1f6b5dfcba5e58454d1_MD5.png"></p>
<p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;update</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;updateCarByPOJO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  update t_car set 
</span></span><span style="display:flex;"><span>    car_num = #{carNum}, brand = #{brand}, 
</span></span><span style="display:flex;"><span>    guide_price = #{guidePrice}, produce_time = #{produceTime}, 
</span></span><span style="display:flex;"><span>    car_type = #{carType} 
</span></span><span style="display:flex;"><span>  where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testUpdateCarByPOJO(){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å‡†å¤‡æ•°æ®</span>
</span></span><span style="display:flex;"><span>        Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setId</span>(34L);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;102&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;æ¯”äºšè¿ªæ±‰&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setGuidePrice</span>(30.<span style="color:#007f7f">23</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2018-09-10&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç”µè½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">update</span>(<span style="color:#0ff;font-weight:bold">&#34;updateCarByPOJO&#34;</span>, car);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/429b424e3c5fcf0fe22661bada574b38_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/03bba578f291ca4061c66963e44897be_MD5.png"></p>
<p>å½“ç„¶äº†ï¼Œå¦‚æœä½¿ç”¨**<font style="color:#E8323C;">map</font>**ä¼ æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h2 id="34-selectretrieve">3.4 selectï¼ˆRetrieveï¼‰<a hidden class="anchor" aria-hidden="true" href="#34-selectretrieve">#</a></h2>
<p>selectè¯­å¥å’Œå…¶å®ƒè¯­å¥ä¸åŒçš„æ˜¯ï¼šæŸ¥è¯¢ä¼šæœ‰ä¸€ä¸ªç»“æœé›†ã€‚æ¥çœ‹mybatisæ˜¯æ€ä¹ˆå¤„ç†ç»“æœé›†çš„ï¼ï¼ï¼</p>
<h3 id="æŸ¥è¯¢ä¸€æ¡æ•°æ®">æŸ¥è¯¢ä¸€æ¡æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#æŸ¥è¯¢ä¸€æ¡æ•°æ®">#</a></h3>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢idä¸º1çš„Carä¿¡æ¯</p>
<p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarById&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaç¨‹åºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectCarById(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>    Object car = sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarById&#34;</span>, 1);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f00">###</span> Error querying database.  Cause: org.<span style="color:#007f7f">apache</span>.<span style="color:#007f7f">ibatis</span>.<span style="color:#007f7f">executor</span>.<span style="color:#007f7f">ExecutorException</span>: 
</span></span><span style="display:flex;"><span>    A query was run and no Result Maps were found <span style="color:#fff;font-weight:bold">for</span> the Mapped Statement <span style="color:#f00">&#39;</span>car.<span style="color:#007f7f">selectCarById</span><span style="color:#f00">&#39;</span>.  <span style="color:#f00">ã€</span>ç¿»è¯‘<span style="color:#f00">ã€‘ï¼š</span>å¯¹äºä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´<span style="color:#f00">ï¼Œ</span>æ²¡æœ‰æ‰¾åˆ°æŸ¥è¯¢çš„ç»“æœæ˜ å°„<span style="color:#f00">ã€‚</span>
</span></span><span style="display:flex;"><span>    It<span style="color:#f00">&#39;</span>s likely that neither a Result Type nor a Result Map was specified.						 <span style="color:#f00">ã€</span>ç¿»è¯‘<span style="color:#f00">ã€‘ï¼š</span>å¾ˆå¯èƒ½æ—¢æ²¡æœ‰æŒ‡å®šç»“æœç±»å‹<span style="color:#f00">ï¼Œ</span>ä¹Ÿæ²¡æœ‰æŒ‡å®šç»“æœæ˜ å°„<span style="color:#f00">ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šçš„å¼‚å¸¸å¤§è‡´çš„æ„æ€æ˜¯ï¼šå¯¹äºä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œä½ éœ€è¦æŒ‡å®šå®ƒçš„â€œç»“æœç±»å‹â€æˆ–è€…â€œç»“æœæ˜ å°„â€ã€‚</p>
<p>æ‰€ä»¥è¯´ï¼Œä½ æƒ³è®©mybatisæŸ¥è¯¢ä¹‹åè¿”å›ä¸€ä¸ªJavaå¯¹è±¡çš„è¯ï¼Œè‡³å°‘ä½ è¦å‘Šè¯‰mybatisè¿”å›ä¸€ä¸ªä»€ä¹ˆç±»å‹çš„Javaå¯¹è±¡ï¼Œå¯ä»¥åœ¨<code>&lt;select&gt;</code>æ ‡ç­¾ä¸­æ·»åŠ resultTypeå±æ€§ï¼Œç”¨æ¥æŒ‡å®šæŸ¥è¯¢è¦è½¬æ¢çš„ç±»å‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/fe8d0cc0789da90faaa57e5b61998980_MD5.png"></p>
<p>è¿è¡Œåä¹‹å‰çš„å¼‚å¸¸ä¸å†å‡ºç°äº†ï¼Œè¿™è¯´æ˜æ·»åŠ äº†resultTypeå±æ€§ä¹‹åï¼Œè§£å†³äº†ä¹‹å‰çš„å¼‚å¸¸ï¼Œå¯ä»¥çœ‹å‡ºresultTypeæ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p>
<p>ä»”ç»†è§‚å¯Ÿæ§åˆ¶å°çš„æ—¥å¿—ä¿¡æ¯ï¼Œä¸éš¾çœ‹å‡ºï¼Œç»“æœæŸ¥è¯¢å‡ºäº†ä¸€æ¡ã€‚å¹¶ä¸”æ¯ä¸ªå­—æ®µéƒ½æŸ¥è¯¢åˆ°å€¼äº†ï¼šRow: 1, 100, å®é©¬520Li, 41.00, 2022-09-01, ç‡ƒæ²¹è½¦</p>
<p>ä½†æ˜¯å¥‡æ€ªçš„æ˜¯è¿”å›çš„Carå¯¹è±¡ï¼Œåªæœ‰idå’Œbrandä¸¤ä¸ªå±æ€§æœ‰å€¼ï¼Œå…¶å®ƒå±æ€§çš„å€¼éƒ½æ˜¯nullï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹æŸ¥è¯¢ç»“æœåˆ—åå’ŒCarç±»çš„å±æ€§åæ˜¯å¦èƒ½ä¸€ä¸€å¯¹åº”ï¼š</p>
<p>æŸ¥è¯¢ç»“æœé›†çš„åˆ—åï¼šid, car_num, brand, guide_price, produce_time, car_type</p>
<p>Carç±»çš„å±æ€§åï¼šid, carNum, brand, guidePrice, produceTime, carType</p>
<p>é€šè¿‡è§‚å¯Ÿå‘ç°ï¼šåªæœ‰idå’Œbrandæ˜¯ä¸€è‡´çš„ï¼Œå…¶ä»–å­—æ®µåå’Œå±æ€§åå¯¹åº”ä¸ä¸Šï¼Œè¿™æ˜¯ä¸æ˜¯å¯¼è‡´nullçš„åŸå› å‘¢ï¼Ÿæˆ‘ä»¬å°è¯•åœ¨sqlè¯­å¥ä¸­ä½¿ç”¨aså…³é”®å­—æ¥ç»™æŸ¥è¯¢ç»“æœåˆ—åèµ·åˆ«åè¯•è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select 
</span></span><span style="display:flex;"><span>    id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType 
</span></span><span style="display:flex;"><span>  from 
</span></span><span style="display:flex;"><span>    t_car 
</span></span><span style="display:flex;"><span>  where 
</span></span><span style="display:flex;"><span>    id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/1299fe8abf9a959e5cbd2f09f795cf07_MD5.png"></p>
<p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼Œå¦‚æœå½“æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸ä¸Šçš„è¯ï¼Œå¯ä»¥é‡‡ç”¨aså…³é”®å­—èµ·åˆ«åï¼Œ<strong><font style="color:#E8323C;">å½“ç„¶è¿˜æœ‰å…¶å®ƒè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬åé¢å†çœ‹</font></strong>ã€‚</p>
<h3 id="æŸ¥è¯¢å¤šæ¡æ•°æ®">æŸ¥è¯¢å¤šæ¡æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#æŸ¥è¯¢å¤šæ¡æ•°æ®">#</a></h3>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰çš„Carä¿¡æ¯ã€‚</p>
<p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--è™½ç„¶ç»“æœæ˜¯Listé›†åˆï¼Œä½†æ˜¯resultTypeå±æ€§éœ€è¦æŒ‡å®šçš„æ˜¯Listé›†åˆä¸­å…ƒç´ çš„ç±»å‹ã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--è®°å¾—ä½¿ç”¨asèµ·åˆ«åï¼Œè®©æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸Šã€‚--&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>    id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>    t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectCarAll(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>    List&lt;Object&gt; cars = sqlSession.<span style="color:#007f7f">selectList</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarAll&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è¾“å‡ºç»“æœ</span>
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ee01a35a145f5bca5bcaca822d4f9e26_MD5.png"></p>
<h2 id="35-å…³äºsql-mapperçš„namespace">3.5 å…³äºSQL Mapperçš„namespace<a hidden class="anchor" aria-hidden="true" href="#35-å…³äºsql-mapperçš„namespace">#</a></h2>
<p>åœ¨SQL Mapperé…ç½®æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>æ ‡ç­¾çš„namespaceå±æ€§å¯ä»¥ç¿»è¯‘ä¸ºå‘½åç©ºé—´ï¼Œè¿™ä¸ªå‘½åç©ºé—´ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢sqlIdå†²çªçš„ã€‚</p>
<p>åˆ›å»ºCarMapper2.xmlæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car2&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id, car_num as carNum, brand, guide_price as guidePrice, produce_time as produceTime, car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸éš¾çœ‹å‡ºï¼ŒCarMapper.xmlå’ŒCarMapper2.xmlæ–‡ä»¶ä¸­éƒ½æœ‰ id=&ldquo;selectCarAll&rdquo;</p>
<p>å°†CarMapper2.xmlé…ç½®åˆ°mybatis-config.xmlæ–‡ä»¶ä¸­ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper2.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¼–å†™Javaä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testNamespace(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>    List&lt;Object&gt; cars = sqlSession.<span style="color:#007f7f">selectList</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarAll&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è¾“å‡ºç»“æœ</span>
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>org.apache.ibatis.exceptions.PersistenceException: 
</span></span><span style="display:flex;"><span>### Error querying database.  Cause: java.lang.IllegalArgumentException: 
</span></span><span style="display:flex;"><span>  selectCarAll is ambiguous in Mapped Statements collection (try using the full name including the namespace, or rename one of the entries) 
</span></span><span style="display:flex;"><span>  ã€ç¿»è¯‘ã€‘selectCarAllåœ¨Mapped Statementsé›†åˆä¸­ä¸æ˜ç¡®ï¼ˆè¯·å°è¯•ä½¿ç”¨åŒ…å«åç§°ç©ºé—´çš„å…¨åï¼Œæˆ–é‡å‘½åå…¶ä¸­ä¸€ä¸ªæ¡ç›®ï¼‰
</span></span><span style="display:flex;"><span>  ã€å¤§è‡´æ„æ€æ˜¯ã€‘selectCarAllé‡åäº†ï¼Œä½ è¦ä¹ˆåœ¨selectCarAllå‰æ·»åŠ ä¸€ä¸ªåç§°ç©ºé—´ï¼Œè¦æœ‰ä½ æ”¹ä¸ªå…¶å®ƒåå­—ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testNamespace(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQLè¯­å¥</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//List&lt;Object&gt; cars = sqlSession.selectList(&#34;car.selectCarAll&#34;);</span>
</span></span><span style="display:flex;"><span>    List&lt;Object&gt; cars = sqlSession.<span style="color:#007f7f">selectList</span>(<span style="color:#0ff;font-weight:bold">&#34;car2.selectCarAll&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è¾“å‡ºç»“æœ</span>
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8a4a3ff919e6f626b252a3e5ea27eb1f_MD5.png"></p>
<h1 id="å››mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£">å››ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£<a hidden class="anchor" aria-hidden="true" href="#å››mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£">#</a></h1>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper2.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>configurationï¼šæ ¹æ ‡ç­¾ï¼Œè¡¨ç¤ºé…ç½®ä¿¡æ¯ã€‚</li>
<li>environmentsï¼šç¯å¢ƒï¼ˆå¤šä¸ªï¼‰ï¼Œä»¥â€œsâ€ç»“å°¾è¡¨ç¤ºå¤æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´mybatisçš„ç¯å¢ƒå¯ä»¥é…ç½®å¤šä¸ªæ•°æ®æºã€‚
<ul>
<li>defaultå±æ€§ï¼šè¡¨ç¤ºé»˜è®¤ä½¿ç”¨çš„æ˜¯å“ªä¸ªç¯å¢ƒï¼Œdefaultåé¢å¡«å†™çš„æ˜¯environmentçš„idã€‚<strong><font style="color:#E8323C;">defaultçš„å€¼åªéœ€è¦å’Œenvironmentçš„idå€¼ä¸€è‡´å³å¯</font></strong>ã€‚</li>
</ul>
</li>
<li>environmentï¼šå…·ä½“çš„ç¯å¢ƒé…ç½®ï¼ˆ<strong><font style="color:#E8323C;">ä¸»è¦åŒ…æ‹¬ï¼šäº‹åŠ¡ç®¡ç†å™¨çš„é…ç½® + æ•°æ®æºçš„é…ç½®</font></strong>ï¼‰
<ul>
<li>idï¼šç»™å½“å‰ç¯å¢ƒä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œè¯¥æ ‡è¯†ç”¨åœ¨environmentsçš„defaultåé¢ï¼Œç”¨æ¥æŒ‡å®šé»˜è®¤ç¯å¢ƒçš„é€‰æ‹©ã€‚</li>
</ul>
</li>
<li>transactionManagerï¼šé…ç½®äº‹åŠ¡ç®¡ç†å™¨
<ul>
<li>typeå±æ€§ï¼šæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨å…·ä½“ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸¤ä¸ª
<ul>
<li><strong><font style="color:#E8323C;">JDBC</font></strong>ï¼šä½¿ç”¨JDBCåŸç”Ÿçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ã€‚<strong><font style="color:#E8323C;">åº•å±‚åŸç†ï¼šäº‹åŠ¡å¼€å¯conn.setAutoCommit(false); &hellip;å¤„ç†ä¸šåŠ¡&hellip;äº‹åŠ¡æäº¤conn.commit();</font></strong></li>
<li><strong><font style="color:#E8323C;">MANAGED</font></strong>ï¼šäº¤ç»™å…¶å®ƒå®¹å™¨æ¥ç®¡ç†äº‹åŠ¡ï¼Œæ¯”å¦‚WebLogicã€JBOSSç­‰ã€‚å¦‚æœæ²¡æœ‰ç®¡ç†äº‹åŠ¡çš„å®¹å™¨ï¼Œåˆ™æ²¡æœ‰äº‹åŠ¡ã€‚<strong><font style="color:#E8323C;">æ²¡æœ‰äº‹åŠ¡çš„å«ä¹‰ï¼šåªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤ä¸€æ¬¡</font></strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>dataSourceï¼šæŒ‡å®šæ•°æ®æº
<ul>
<li>typeå±æ€§ï¼šç”¨æ¥æŒ‡å®šå…·ä½“ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥æ± çš„ç­–ç•¥ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸‰ä¸ª
<ul>
<li><strong><font style="color:#E8323C;">UNPOOLED</font></strong>ï¼šé‡‡ç”¨ä¼ ç»Ÿçš„è·å–è¿æ¥çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå®ç°Javax.sql.DataSourceæ¥å£ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨æ± çš„æ€æƒ³ã€‚
<ul>
<li>propertyå¯ä»¥æ˜¯ï¼š
<ul>
<li>driver è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåã€‚</li>
<li>url è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚</li>
<li>username <font style="color:rgb(64, 64, 64);">ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·å</font>ã€‚</li>
<li>password <font style="color:rgb(64, 64, 64);">ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚</font></li>
<li>defaultTransactionIsolationLevel <font style="color:rgb(64, 64, 64);">é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</font></li>
<li>defaultNetworkTimeout <font style="color:rgb(64, 64, 64);">ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</font></li>
</ul>
</li>
</ul>
</li>
<li><strong><font style="color:#E8323C;">POOLED</font></strong>ï¼šé‡‡ç”¨ä¼ ç»Ÿçš„javax.sql.DataSourceè§„èŒƒä¸­çš„è¿æ¥æ± ï¼Œmybatisä¸­æœ‰é’ˆå¯¹è§„èŒƒçš„å®ç°ã€‚
<ul>
<li>propertyå¯ä»¥æ˜¯ï¼ˆé™¤äº†åŒ…å«**<font style="color:#E8323C;">UNPOOLED</font>**<font style="color:rgb(64, 64, 64);">ä¸­ä¹‹å¤–</font>ï¼‰ï¼š
<ul>
<li>poolMaximumActiveConnections åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</li>
<li>poolMaximumIdleConnections <font style="color:rgb(64, 64, 64);">ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚</font></li>
<li><font style="color:rgb(64, 64, 64);">å…¶å®ƒ&hellip;.</font></li>
</ul>
</li>
</ul>
</li>
<li><strong><font style="color:#E8323C;">JNDI</font></strong>ï¼šé‡‡ç”¨æœåŠ¡å™¨æä¾›çš„JNDIæŠ€æœ¯å®ç°ï¼Œæ¥è·å–DataSourceå¯¹è±¡ï¼Œä¸åŒçš„æœåŠ¡å™¨æ‰€èƒ½æ‹¿åˆ°DataSourceæ˜¯ä¸ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯webæˆ–è€…mavençš„warå·¥ç¨‹ï¼ŒJNDIæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚
<ul>
<li>propertyå¯ä»¥æ˜¯ï¼ˆ<font style="color:#E8323C;">æœ€å¤šåªåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§</font>ï¼‰ï¼š
<ul>
<li>initial_context <font style="color:rgb(64, 64, 64);">è¿™ä¸ªå±æ€§ç”¨æ¥åœ¨ InitialContext ä¸­å¯»æ‰¾ä¸Šä¸‹æ–‡ï¼ˆå³ï¼ŒinitialContext.lookup(initial_context)ï¼‰è¿™æ˜¯ä¸ªå¯é€‰å±æ€§ï¼Œå¦‚æœå¿½ç•¥ï¼Œé‚£ä¹ˆå°†ä¼šç›´æ¥ä» InitialContext ä¸­å¯»æ‰¾ data_source å±æ€§ã€‚</font></li>
<li>data_source <font style="color:rgb(64, 64, 64);">è¿™æ˜¯å¼•ç”¨æ•°æ®æºå®ä¾‹ä½ç½®çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚æä¾›äº† initial_context é…ç½®æ—¶ä¼šåœ¨å…¶è¿”å›çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ²¡æœ‰æä¾›æ—¶åˆ™ç›´æ¥åœ¨ InitialContext ä¸­æŸ¥æ‰¾ã€‚</font></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>mappersï¼šåœ¨mappersæ ‡ç­¾ä¸­å¯ä»¥é…ç½®å¤šä¸ªsqlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„ã€‚</li>
<li>mapperï¼šé…ç½®æŸä¸ªsqlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„
<ul>
<li>resourceå±æ€§ï¼šä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨æ–¹å¼</li>
<li>urlå±æ€§ï¼šä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰æ–¹å¼</li>
</ul>
</li>
</ul>
<h2 id="41-environment">4.1 environment<a hidden class="anchor" aria-hidden="true" href="#41-environment">#</a></h2>
<p>mybatis-003-configuration</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--é»˜è®¤ä½¿ç”¨å¼€å‘ç¯å¢ƒ--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--&lt;environments default=&#34;dev&#34;&gt;--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--é»˜è®¤ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;production&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--ç”Ÿäº§ç¯å¢ƒ--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;production&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/mybatis&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConfigurationTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testEnvironment() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å‡†å¤‡æ•°æ®</span>
</span></span><span style="display:flex;"><span>        Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;133&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°éœ¸é“&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setGuidePrice</span>(50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2020-01-10&#34;</span>);
</span></span><span style="display:flex;"><span>        car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä¸€ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä¸¤ä¸ªæ•°æ®åº“å¯¹åº”ä¸¤ä¸ªSqlSessionFactoryå¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä½¿ç”¨é»˜è®¤æ•°æ®åº“</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>, car);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä½¿ç”¨æŒ‡å®šæ•°æ®åº“</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory1 = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>), <span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span>);
</span></span><span style="display:flex;"><span>        SqlSession sqlSession1 = sqlSessionFactory1.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count1 = sqlSession1.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>, car);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count1);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/20b836e2fa6bfedf6249bb62fbd5331e_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/0bc0aa28b840e60c311d7c20848db045_MD5.png"></p>
<h2 id="42-transactionmanager">4.2 transactionManager<a hidden class="anchor" aria-hidden="true" href="#42-transactionmanager">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;MANAGED&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testTransactionManager() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å‡†å¤‡æ•°æ®</span>
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;133&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°éœ¸é“&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setGuidePrice</span>(50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2020-01-10&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config2.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>, car);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šJDBC</p>
<ul>
<li>é‡‡ç”¨JDBCçš„åŸç”Ÿäº‹åŠ¡æœºåˆ¶ï¼š
<ul>
<li>å¼€å¯äº‹åŠ¡ï¼šconn.setAutoCommit(false);</li>
<li>å¤„ç†ä¸šåŠ¡&hellip;&hellip;</li>
<li>æäº¤äº‹åŠ¡ï¼šconn.commit();</li>
</ul>
</li>
</ul>
<p>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šMANAGED</p>
<ul>
<li>äº¤ç»™å®¹å™¨å»ç®¡ç†äº‹åŠ¡ï¼Œä½†ç›®å‰ä½¿ç”¨çš„æ˜¯æœ¬åœ°ç¨‹åºï¼Œæ²¡æœ‰å®¹å™¨çš„æ”¯æŒï¼Œ<strong><font style="color:#E8323C;">å½“mybatisæ‰¾ä¸åˆ°å®¹å™¨çš„æ”¯æŒæ—¶ï¼šæ²¡æœ‰äº‹åŠ¡</font></strong>ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤ä¸€æ¬¡ã€‚</li>
</ul>
<h2 id="43-datasource">4.3 dataSource<a hidden class="anchor" aria-hidden="true" href="#43-datasource">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;UNPOOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDataSource() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å‡†å¤‡æ•°æ®</span>
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;133&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°éœ¸é“&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setGuidePrice</span>(50.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2020-01-10&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config3.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–SqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>, car);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å…³é—­ä¼šè¯</span>
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“typeæ˜¯UNPOOLEDï¼Œæ§åˆ¶å°è¾“å‡ºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4751519af332797c89ae0ac2a64ab852_MD5.png"></p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶mybatis-config3.xmlä¸­çš„é…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Javaæµ‹è¯•ç¨‹åºä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥æ‰§è¡Œï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/04eab81301621746e465cca3ed19812c_MD5.png"></p>
<p>é€šè¿‡æµ‹è¯•å¾—å‡ºï¼šUNPOOLEDä¸ä¼šä½¿ç”¨è¿æ¥æ± ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šæ–°å»ºJDBCè¿æ¥å¯¹è±¡ã€‚POOLEDä¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚ã€è¿™ä¸ªè¿æ¥æ± æ˜¯mybatisè‡ªå·±å®ç°çš„ã€‚ã€‘</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JNDI&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>JNDIçš„æ–¹å¼ï¼šè¡¨ç¤ºå¯¹æ¥JNDIæœåŠ¡å™¨ä¸­çš„è¿æ¥æ± ã€‚è¿™ç§æ–¹å¼ç»™äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹è¿æ¥æ± çš„æ¥å£ã€‚å¦‚æœæƒ³ä½¿ç”¨dbcpã€c3p0ã€druidï¼ˆå¾·é²ä¼Šï¼‰ç­‰ï¼Œéœ€è¦ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<p>è¿™ç§å†é‡ç‚¹è¯´ä¸€ä¸‹type=&ldquo;POOLED&quot;çš„æ—¶å€™ï¼Œå®ƒçš„å±æ€§æœ‰å“ªäº›ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--æœ€å¤§è¿æ¥æ•°--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;poolMaximumActiveConnections&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;3&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;poolTimeToWait&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;20000&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--å¼ºè¡Œå›å½’æ± çš„æ—¶é—´--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;poolMaximumCheckoutTime&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;20000&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--æœ€å¤šç©ºé—²æ•°é‡--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;poolMaximumIdleConnections&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;1&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>poolMaximumActiveConnectionsï¼šæœ€å¤§çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼10</p>
<p>poolMaximumIdleConnectionsï¼šæœ€å¤§çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5</p>
<p>poolMaximumCheckoutTimeï¼šå¼ºè¡Œå›å½’æ± çš„æ—¶é—´ã€‚é»˜è®¤å€¼20ç§’ã€‚</p>
<p>poolTimeToWaitï¼šå½“æ— æ³•è·å–åˆ°ç©ºé—²è¿æ¥æ—¶ï¼Œæ¯éš”20ç§’æ‰“å°ä¸€æ¬¡æ—¥å¿—ï¼Œé¿å…å› ä»£ç é…ç½®æœ‰è¯¯ï¼Œå¯¼è‡´å‚»ç­‰ã€‚ï¼ˆæ—¶é•¿æ˜¯å¯ä»¥é…ç½®çš„ï¼‰</p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–å±æ€§ã€‚å¯¹äºè¿æ¥æ± æ¥è¯´ï¼Œä»¥ä¸Šå‡ ä¸ªå±æ€§æ¯”è¾ƒé‡è¦ã€‚</p>
<p>æœ€å¤§çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡å°±æ˜¯è¿æ¥æ± è¿æ¥æ•°é‡çš„ä¸Šé™ã€‚é»˜è®¤å€¼10ï¼Œå¦‚æœæœ‰10ä¸ªè¯·æ±‚æ­£åœ¨ä½¿ç”¨è¿™10ä¸ªè¿æ¥ï¼Œç¬¬11ä¸ªè¯·æ±‚åªèƒ½ç­‰å¾…ç©ºé—²è¿æ¥ã€‚</p>
<p>æœ€å¤§çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5ï¼Œå¦‚ä½•å·²ç»æœ‰äº†5ä¸ªç©ºé—²è¿æ¥ï¼Œå½“ç¬¬6ä¸ªè¿æ¥è¦ç©ºé—²ä¸‹æ¥çš„æ—¶å€™ï¼Œè¿æ¥æ± ä¼šé€‰æ‹©å…³é—­è¯¥è¿æ¥å¯¹è±¡ã€‚æ¥å‡å°‘æ•°æ®åº“çš„å¼€é”€ã€‚</p>
<p>éœ€è¦æ ¹æ®ç³»ç»Ÿçš„å¹¶å‘æƒ…å†µï¼Œæ¥åˆç†è°ƒæ•´è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ä»¥åŠæœ€å¤šç©ºé—²æ•°é‡ã€‚å……åˆ†å‘æŒ¥æ•°æ®åº“è¿æ¥æ± çš„æ€§èƒ½ã€‚ã€å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæµ‹è¯•ï¼Œç„¶åè°ƒæ•´ä¸€ä¸ªåˆç†çš„æ•°é‡ã€‚ã€‘</p>
<p>ä¸‹å›¾æ˜¯é»˜è®¤é…ç½®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6cb6854cceec03fcd83d1bf20dd4463d_MD5.png"></p>
<p>åœ¨ä»¥ä¸Šé…ç½®çš„åŸºç¡€ä¹‹ä¸Šï¼Œå¯ä»¥ç¼–å†™javaç¨‹åºæµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testPool() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config3.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = 0; i &lt; 4; i++) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        Object selectCarByCarNum = sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarByCarNum&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarByCarNum&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where car_num = &#39;100&#39;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/91e28fd8f6061ae9243d93ff6502bdb1_MD5.png"></p>
<h2 id="44-properties">4.4 properties<a hidden class="anchor" aria-hidden="true" href="#44-properties">#</a></h2>
<p>mybatisæä¾›äº†æ›´åŠ çµæ´»çš„é…ç½®ï¼Œè¿æ¥æ•°æ®åº“çš„ä¿¡æ¯å¯ä»¥å•ç‹¬å†™åˆ°ä¸€ä¸ªå±æ€§èµ„æºæ–‡ä»¶ä¸­ï¼Œå‡è®¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºjdbc.propertiesæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#007f7f">jdbc.driver</span>=<span style="color:#0ff;font-weight:bold">com.mysql.cj.jdbc.Driver</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.url</span>=<span style="color:#0ff;font-weight:bold">jdbc:mysql://localhost:3306/powernode</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--å¼•å…¥å¤–éƒ¨å±æ€§èµ„æºæ–‡ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.properties&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--${key}ä½¿ç”¨--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.driver}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.url}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.username}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.password}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¼–å†™Javaç¨‹åºè¿›è¡Œæµ‹è¯•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testProperties() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config4.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    Object car = sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarByCarNum&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><font style="color:#E8323C;">propertiesä¸¤ä¸ªå±æ€§ï¼š</font></strong></p>
<p><strong><font style="color:#E8323C;">resourceï¼šè¿™ä¸ªå±æ€§ä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€‚ã€å¸¸ç”¨çš„ã€‚ã€‘</font></strong></p>
<p><strong><font style="color:#E8323C;">urlï¼šä»æŒ‡å®šçš„urlåŠ è½½ï¼Œå‡è®¾æ–‡ä»¶æ”¾åœ¨d:/jdbc.propertiesï¼Œè¿™ä¸ªurlå¯ä»¥å†™æˆï¼šfile:///d:/jdbc.propertiesã€‚æ³¨æ„æ˜¯ä¸‰ä¸ªæ–œæ å“¦ã€‚</font></strong></p>
<p>æ³¨æ„ï¼šå¦‚æœä¸çŸ¥é“mybatis-config.xmlæ–‡ä»¶ä¸­æ ‡ç­¾çš„ç¼–å†™é¡ºåºçš„è¯ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹å¼çŸ¥é“å®ƒçš„é¡ºåºï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼šæŸ¥çœ‹dtdçº¦æŸæ–‡ä»¶ã€‚</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡ideaçš„æŠ¥é”™æç¤ºä¿¡æ¯ã€‚ã€ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ–¹å¼ã€‘</li>
</ul>
<h2 id="45-mapper">4.5 mapper<a hidden class="anchor" aria-hidden="true" href="#45-mapper">#</a></h2>
<p>mapperæ ‡ç­¾ç”¨æ¥æŒ‡å®šSQLæ˜ å°„æ–‡ä»¶çš„è·¯å¾„ï¼ŒåŒ…å«å¤šç§æŒ‡å®šæ–¹å¼ï¼Œè¿™é‡Œå…ˆä¸»è¦çœ‹å…¶ä¸­ä¸¤ç§ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼šresourceï¼Œä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€æ¯”urlå¸¸ç”¨ã€‘</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ˜¯è¿™æ ·å†™çš„è¯ï¼Œå¿…é¡»ä¿è¯ç±»çš„æ ¹ä¸‹æœ‰CarMapper.xmlæ–‡ä»¶ã€‚</p>
<p>å¦‚æœç±»çš„æ ¹è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªåŒ…å«åštestï¼ŒCarMapper.xmlå¦‚æœæ”¾åœ¨teståŒ…ä¸‹çš„è¯ï¼Œè¿™ä¸ªé…ç½®åº”è¯¥æ˜¯è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;test/CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒç§ï¼šurlï¼Œä»æŒ‡å®šçš„urlä½ç½®åŠ è½½</p>
<p>å‡è®¾CarMapper.xmlæ–‡ä»¶æ”¾åœ¨dç›˜çš„æ ¹ä¸‹ï¼Œè¿™ä¸ªé…ç½®å°±éœ€è¦è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">url=</span><span style="color:#0ff;font-weight:bold">&#34;file:///d:/CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><font style="color:#E8323C;">mapperè¿˜æœ‰å…¶ä»–çš„æŒ‡å®šæ–¹å¼ï¼Œåé¢å†çœ‹ï¼ï¼ï¼</font></strong></p>
<h1 id="äº”æ‰‹å†™mybatisæ¡†æ¶æŒæ¡åŸç†">äº”ã€æ‰‹å†™MyBatisæ¡†æ¶ï¼ˆæŒæ¡åŸç†ï¼‰<a hidden class="anchor" aria-hidden="true" href="#äº”æ‰‹å†™mybatisæ¡†æ¶æŒæ¡åŸç†">#</a></h1>
<p>è­¦ç¤ºï¼šè¯¥éƒ¨åˆ†å†…å®¹æœ‰éš¾åº¦ï¼ŒåŸºç¡€è¾ƒå¼±çš„ç¨‹åºå‘˜å¯èƒ½æœ‰äº›éƒ¨åˆ†æ˜¯å¬ä¸æ‡‚çš„ï¼Œå¦‚æœæ— æ³•è·Ÿä¸‹æ¥ï¼Œå¯ç›´æ¥è·³è¿‡ï¼Œä¸å½±å“åç»­çŸ¥è¯†ç‚¹çš„å­¦ä¹ ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦èƒ½å¤Ÿè·Ÿä¸‹æ¥ï¼Œå¿…ç„¶ä¼šè®©ä½ åŠ æ·±å¯¹MyBatisæ¡†æ¶çš„ç†è§£ã€‚</p>
<p><strong><font style="color:#096DD9;">æˆ‘ä»¬ç»™è‡ªå·±çš„æ¡†æ¶èµ·ä¸ªåï¼šGodBatisï¼ˆèµ·åçµæ„Ÿæ¥æºäºï¼šmy god!!! æˆ‘çš„å¤©å‘¢ï¼ï¼‰</font></strong></p>
<h2 id="51-dom4jè§£æxmlæ–‡ä»¶">5.1 dom4jè§£æXMLæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#51-dom4jè§£æxmlæ–‡ä»¶">#</a></h2>
<p>è¯¥éƒ¨åˆ†å†…å®¹ä¸å†èµ˜è¿°ï¼Œä¸ä¼šè§£æXMLçš„ï¼Œè¯·è§‚çœ‹è€æœå‰é¢è®²è§£çš„dom4jè§£æXMLæ–‡ä»¶çš„è§†é¢‘ã€‚</p>
<p>æ¨¡å—åï¼šparse-xml-by-dom4jï¼ˆæ™®é€šçš„Java Mavenæ¨¡å—ï¼‰</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥dom4jçš„ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>org.group<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>parse-xml-by-dom4j<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--dom4jä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>org.dom4j<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>dom4j<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>2.1.3<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--jaxenä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>jaxen<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>jaxen<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>1.2.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--junitä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.source&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.target&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ­¥ï¼šç¼–å†™é…ç½®æ–‡ä»¶godbatis-config.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;sqlmapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰æ­¥ï¼šè§£ægodbatis-config.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.dom4j;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.Document;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.Element;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.Node;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.io.SAXReader;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.HashMap;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * ä½¿ç”¨dom4jè§£æXMLæ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ParseXMLByDom4j {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testGodBatisConfig() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¯»å–xmlï¼Œè·å–documentå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SAXReader saxReader = <span style="color:#fff;font-weight:bold">new</span> SAXReader();
</span></span><span style="display:flex;"><span>        Document document = saxReader.<span style="color:#007f7f">read</span>(Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getContextClassLoader</span>().<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;godbatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–&lt;environments&gt;æ ‡ç­¾çš„defaultå±æ€§çš„å€¼</span>
</span></span><span style="display:flex;"><span>        Element environmentsElt = (Element)document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/configuration/environments&#34;</span>);
</span></span><span style="display:flex;"><span>        String defaultId = environmentsElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;default&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(defaultId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–environmentæ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>        Element environmentElt = (Element)document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/configuration/environments/environment[@id=&#39;&#34;</span> + defaultId + <span style="color:#0ff;font-weight:bold">&#34;&#39;]&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–äº‹åŠ¡ç®¡ç†å™¨ç±»å‹</span>
</span></span><span style="display:flex;"><span>        Element transactionManager = environmentElt.<span style="color:#007f7f">element</span>(<span style="color:#0ff;font-weight:bold">&#34;transactionManager&#34;</span>);
</span></span><span style="display:flex;"><span>        String transactionManagerType = transactionManager.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;type&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(transactionManagerType);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–æ•°æ®æºç±»å‹</span>
</span></span><span style="display:flex;"><span>        Element dataSource = environmentElt.<span style="color:#007f7f">element</span>(<span style="color:#0ff;font-weight:bold">&#34;dataSource&#34;</span>);
</span></span><span style="display:flex;"><span>        String dataSourceType = dataSource.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;type&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(dataSourceType);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å°†æ•°æ®æºä¿¡æ¯å°è£…åˆ°Mapé›†åˆ</span>
</span></span><span style="display:flex;"><span>        Map&lt;String,String&gt; dataSourceMap = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>        dataSource.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(propertyElt -&gt; {
</span></span><span style="display:flex;"><span>            dataSourceMap.<span style="color:#007f7f">put</span>(propertyElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>), propertyElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;value&#34;</span>));
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        dataSourceMap.<span style="color:#007f7f">forEach</span>((k, v) -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(k + <span style="color:#0ff;font-weight:bold">&#34;:&#34;</span> + v));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–sqlmapper.xmlæ–‡ä»¶çš„è·¯å¾„</span>
</span></span><span style="display:flex;"><span>        Element mappersElt = (Element) document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/configuration/environments/mappers&#34;</span>);
</span></span><span style="display:flex;"><span>        mappersElt.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(mapper -&gt; {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(mapper.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;resource&#34;</span>));
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c1e36a5e84bb1681587df2014bdbaaaa_MD5.png"></p>
<p>ç¬¬å››æ­¥ï¼šç¼–å†™é…ç½®æ–‡ä»¶sqlmapper.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectCarByCarNum&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where car_num = #{carNum}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äº”æ­¥ï¼šè§£æsqlmapper.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSqlMapper() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è¯»å–xmlï¼Œè·å–documentå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    SAXReader saxReader = <span style="color:#fff;font-weight:bold">new</span> SAXReader();
</span></span><span style="display:flex;"><span>    Document document = saxReader.<span style="color:#007f7f">read</span>(Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getContextClassLoader</span>().<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;sqlmapper.xml&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–namespace</span>
</span></span><span style="display:flex;"><span>    Element mapperElt = (Element) document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/mapper&#34;</span>);
</span></span><span style="display:flex;"><span>    String namespace = mapperElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;namespace&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(namespace);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–sql id</span>
</span></span><span style="display:flex;"><span>    mapperElt.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(statementElt -&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ ‡ç­¾å</span>
</span></span><span style="display:flex;"><span>        String name = statementElt.<span style="color:#007f7f">getName</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;name:&#34;</span> + name);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¦‚æœæ˜¯selectæ ‡ç­¾ï¼Œè¿˜è¦è·å–å®ƒçš„resultType</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;select&#34;</span>.<span style="color:#007f7f">equals</span>(name)) {
</span></span><span style="display:flex;"><span>            String resultType = statementElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;resultType&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;resultType:&#34;</span> + resultType);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// sql id</span>
</span></span><span style="display:flex;"><span>        String id = statementElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;sqlId:&#34;</span> + id);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// sqlè¯­å¥</span>
</span></span><span style="display:flex;"><span>        String sql = statementElt.<span style="color:#007f7f">getTextTrim</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;sql:&#34;</span> + sql);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/f99764e730cabb33f8ee96fb8d7f9576_MD5.png"></p>
<h2 id="52-godbatis">5.2 GodBatis<a hidden class="anchor" aria-hidden="true" href="#52-godbatis">#</a></h2>
<p>æ‰‹å†™æ¡†æ¶ä¹‹å‰ï¼Œå¦‚æœæ²¡æœ‰æ€è·¯ï¼Œå¯ä»¥å…ˆå‚è€ƒä¸€ä¸‹mybatisçš„å®¢æˆ·ç«¯ç¨‹åºï¼Œé€šè¿‡å®¢æˆ·ç«¯ç¨‹åºæ¥é€†æ¨éœ€è¦çš„ç±»ï¼Œå‚è€ƒä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsert(){
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 4.æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>        Car car = <span style="color:#fff;font-weight:bold">new</span> Car(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;111&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å®é©¬X7&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;70.3&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2010-10-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;insertCar&#34;</span>,car);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 5.æäº¤</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å›æ»š</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 6.å…³é—­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectOne(){
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 4.æ‰§è¡ŒSQL</span>
</span></span><span style="display:flex;"><span>        Car car = (Car)sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;selectCarByCarNum&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;111&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 5.æäº¤</span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å›æ»š</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 6.å…³é—­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸€æ­¥ideaä¸­åˆ›å»ºæ¨¡å—">ç¬¬ä¸€æ­¥ï¼šIDEAä¸­åˆ›å»ºæ¨¡å—<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ­¥ideaä¸­åˆ›å»ºæ¨¡å—">#</a></h3>
<p>æ¨¡å—ï¼šgodbatisï¼ˆåˆ›å»ºæ™®é€šçš„Java Mavenæ¨¡å—ï¼Œæ‰“åŒ…æ–¹å¼jarï¼‰ï¼Œå¼•å…¥ç›¸å…³ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>org.god<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>godbatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--dom4jä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>org.dom4j<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>dom4j<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>2.1.3<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--jaxenä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>jaxen<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>jaxen<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>1.2.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--junitä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.source&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.target&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬äºŒæ­¥èµ„æºå·¥å…·ç±»æ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ">ç¬¬äºŒæ­¥ï¼šèµ„æºå·¥å…·ç±»ï¼Œæ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ­¥èµ„æºå·¥å…·ç±»æ–¹ä¾¿è·å–æŒ‡å‘é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * èµ„æºå·¥å…·ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Resources {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ä»ç±»è·¯å¾„ä¸­è·å–é…ç½®æ–‡ä»¶çš„è¾“å…¥æµ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param config
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return è¾“å…¥æµï¼Œè¯¥è¾“å…¥æµæŒ‡å‘ç±»è·¯å¾„ä¸­çš„é…ç½®æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> InputStream getResourcesAsStream(String config){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> Thread.<span style="color:#007f7f">currentThread</span>().<span style="color:#007f7f">getContextClassLoader</span>().<span style="color:#007f7f">getResourceAsStream</span>(config);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸‰æ­¥å®šä¹‰sqlsessionfactorybuilderç±»">ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰SqlSessionFactoryBuilderç±»<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰æ­¥å®šä¹‰sqlsessionfactorybuilderç±»">#</a></h3>
<p>æä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œå†æä¾›ä¸€ä¸ªbuildæ–¹æ³•ï¼Œè¯¥buildæ–¹æ³•è¦è¿”å›SqlSessionFactoryå¯¹è±¡</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * SqlSessionFactoryå¯¹è±¡æ„å»ºå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionFactoryBuilder {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ›å»ºæ„å»ºå™¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSessionFactoryBuilder() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–SqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è¯¥æ–¹æ³•ä¸»è¦åŠŸèƒ½æ˜¯ï¼šè¯»å–godbatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¹¶æ„å»ºSqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param inputStream æŒ‡å‘æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return SqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSessionFactory build(InputStream inputStream){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ•°æ®æºå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œè·å–æ‰€æœ‰çš„SQLæ˜ å°„å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å°†ä»¥ä¸Šä¿¡æ¯å°è£…åˆ°SqlSessionFactoryå¯¹è±¡ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿”å›</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å››æ­¥åˆ†æsqlsessionfactoryç±»ä¸­æœ‰å“ªäº›å±æ€§">ç¬¬å››æ­¥ï¼šåˆ†æSqlSessionFactoryç±»ä¸­æœ‰å“ªäº›å±æ€§<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å››æ­¥åˆ†æsqlsessionfactoryç±»ä¸­æœ‰å“ªäº›å±æ€§">#</a></h3>
<ul>
<li>äº‹åŠ¡ç®¡ç†å™¨
<ul>
<li>GodJDBCTransaction</li>
</ul>
</li>
<li>SQLæ˜ å°„å¯¹è±¡é›†åˆ
<ul>
<li>Map&lt;String, GodMappedStatement&gt;</li>
</ul>
</li>
</ul>
<h3 id="ç¬¬äº”æ­¥å®šä¹‰godjdbctransaction">ç¬¬äº”æ­¥ï¼šå®šä¹‰GodJDBCTransaction<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äº”æ­¥å®šä¹‰godjdbctransaction">#</a></h3>
<p>äº‹åŠ¡ç®¡ç†å™¨æœ€å¥½æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç„¶åæ¯ä¸€ä¸ªå…·ä½“çš„äº‹åŠ¡ç®¡ç†å™¨éƒ½å®ç°è¿™ä¸ªæ¥å£ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.Connection;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * äº‹åŠ¡ç®¡ç†å™¨æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> TransactionManager {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æäº¤äº‹åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> commit();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å›æ»šäº‹åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> rollback();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å…³é—­äº‹åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> close();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å¼€å¯è¿æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> openConnection();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–è¿æ¥å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return è¿æ¥å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Connection getConnection();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">85
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.sql.DataSource;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.Connection;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * äº‹åŠ¡ç®¡ç†å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GodJDBCTransaction <span style="color:#fff;font-weight:bold">implements</span> TransactionManager {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è¿æ¥å¯¹è±¡ï¼Œæ§åˆ¶äº‹åŠ¡æ—¶éœ€è¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Connection conn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ•°æ®æºå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> DataSource dataSource;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è‡ªåŠ¨æäº¤æ ‡å¿—ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * trueè¡¨ç¤ºè‡ªåŠ¨æäº¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * falseè¡¨ç¤ºä¸è‡ªåŠ¨æäº¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">boolean</span> autoCommit;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ„é€ äº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param autoCommit
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> GodJDBCTransaction(DataSource dataSource, <span style="color:#fff;font-weight:bold">boolean</span> autoCommit) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dataSource</span> = dataSource;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">autoCommit</span> = autoCommit;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æäº¤äº‹åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> commit(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            conn.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å›æ»šäº‹åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> rollback(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            conn.<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> close() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            conn.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> openConnection() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">conn</span> = dataSource.<span style="color:#007f7f">getConnection</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">conn</span>.<span style="color:#007f7f">setAutoCommit</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">autoCommit</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Connection getConnection() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> conn;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å…­æ­¥äº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºå®šä¹‰godunpooleddatasource">ç¬¬å…­æ­¥ï¼šäº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºï¼Œå®šä¹‰GodUNPOOLEDDataSource<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…­æ­¥äº‹åŠ¡ç®¡ç†å™¨ä¸­éœ€è¦æ•°æ®æºå®šä¹‰godunpooleddatasource">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.PrintWriter;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.Connection;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.DriverManager;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.SQLFeatureNotSupportedException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.logging.Logger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ•°æ®æºå®ç°ç±»ï¼Œä¸ä½¿ç”¨è¿æ¥æ± 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GodUNPOOLEDDataSource <span style="color:#fff;font-weight:bold">implements</span> javax.<span style="color:#007f7f">sql</span>.<span style="color:#007f7f">DataSource</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String url;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String username;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String password;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> GodUNPOOLEDDataSource(String driver, String url, String username, String password) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ³¨å†Œé©±åŠ¨</span>
</span></span><span style="display:flex;"><span>            Class.<span style="color:#007f7f">forName</span>(driver);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ClassNotFoundException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">url</span> = url;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">username</span> = username;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">password</span> = password;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Connection getConnection() <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> DriverManager.<span style="color:#007f7f">getConnection</span>(url, username, password);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Connection getConnection(String username, String password) <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> PrintWriter getLogWriter() <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setLogWriter(PrintWriter out) <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setLoginTimeout(<span style="color:#fff;font-weight:bold">int</span> seconds) <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> getLoginTimeout() <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> 0;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Logger getParentLogger() <span style="color:#fff;font-weight:bold">throws</span> SQLFeatureNotSupportedException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T unwrap(Class&lt;T&gt; iface) <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isWrapperFor(Class&lt;?&gt; iface) <span style="color:#fff;font-weight:bold">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸ƒæ­¥å®šä¹‰godmappedstatement">ç¬¬ä¸ƒæ­¥ï¼šå®šä¹‰GodMappedStatement<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸ƒæ­¥å®šä¹‰godmappedstatement">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * SQLæ˜ å°„å®ä½“ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GodMappedStatement {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sqlId;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String resultType;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sql;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String parameterType;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sqlType;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;GodMappedStatement{&#34;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;sqlId=&#39;&#34;</span> + sqlId + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, resultType=&#39;&#34;</span> + resultType + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, sql=&#39;&#34;</span> + sql + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, parameterType=&#39;&#34;</span> + parameterType + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, sqlType=&#39;&#34;</span> + sqlType + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#39;}&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getSqlId() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlId;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSqlId(String sqlId) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sqlId</span> = sqlId;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getResultType() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resultType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setResultType(String resultType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">resultType</span> = resultType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getSql() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sql;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSql(String sql) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sql</span> = sql;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getParameterType() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parameterType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setParameterType(String parameterType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parameterType</span> = parameterType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getSqlType() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSqlType(String sqlType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sqlType</span> = sqlType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> GodMappedStatement(String sqlId, String resultType, String sql, String parameterType, String sqlType) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sqlId</span> = sqlId;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">resultType</span> = resultType;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sql</span> = sql;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parameterType</span> = parameterType;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sqlType</span> = sqlType;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å…«æ­¥å®Œå–„sqlsessionfactoryç±»">ç¬¬å…«æ­¥ï¼šå®Œå–„SqlSessionFactoryç±»<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…«æ­¥å®Œå–„sqlsessionfactoryç±»">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.sql.DataSource;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * SqlSessionå·¥å‚å¯¹è±¡ï¼Œä½¿ç”¨SqlSessionFactoryå¯ä»¥è·å–ä¼šè¯å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionFactory {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> TransactionManager transactionManager;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Map&lt;String, GodMappedStatement&gt; mappedStatements;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSessionFactory(TransactionManager transactionManager, Map&lt;String, GodMappedStatement&gt; mappedStatements) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">transactionManager</span> = transactionManager;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">mappedStatements</span> = mappedStatements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TransactionManager getTransactionManager() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> transactionManager;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setTransactionManager(TransactionManager transactionManager) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">transactionManager</span> = transactionManager;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Map&lt;String, GodMappedStatement&gt; getMappedStatements() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> mappedStatements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMappedStatements(Map&lt;String, GodMappedStatement&gt; mappedStatements) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">mappedStatements</span> = mappedStatements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¹æ­¥å®Œå–„sqlsessionfactorybuilderä¸­çš„buildæ–¹æ³•">ç¬¬ä¹æ­¥ï¼šå®Œå–„SqlSessionFactoryBuilderä¸­çš„buildæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¹æ­¥å®Œå–„sqlsessionfactorybuilderä¸­çš„buildæ–¹æ³•">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.Document;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.DocumentException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.Element;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.dom4j.io.SAXReader;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.sql.DataSource;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.HashMap;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * SqlSessionFactoryå¯¹è±¡æ„å»ºå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionFactoryBuilder {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * åˆ›å»ºæ„å»ºå™¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSessionFactoryBuilder() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–SqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è¯¥æ–¹æ³•ä¸»è¦åŠŸèƒ½æ˜¯ï¼šè¯»å–godbatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¹¶æ„å»ºSqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param inputStream æŒ‡å‘æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return SqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSessionFactory build(InputStream inputStream) <span style="color:#fff;font-weight:bold">throws</span> DocumentException {
</span></span><span style="display:flex;"><span>        SAXReader saxReader = <span style="color:#fff;font-weight:bold">new</span> SAXReader();
</span></span><span style="display:flex;"><span>        Document document = saxReader.<span style="color:#007f7f">read</span>(inputStream);
</span></span><span style="display:flex;"><span>        Element environmentsElt = (Element) document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/configuration/environments&#34;</span>);
</span></span><span style="display:flex;"><span>        String defaultEnv = environmentsElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;default&#34;</span>);
</span></span><span style="display:flex;"><span>        Element environmentElt = (Element) document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/configuration/environments/environment[@id=&#39;&#34;</span> + defaultEnv + <span style="color:#0ff;font-weight:bold">&#34;&#39;]&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ•°æ®æºå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Element dataSourceElt = environmentElt.<span style="color:#007f7f">element</span>(<span style="color:#0ff;font-weight:bold">&#34;dataSource&#34;</span>);
</span></span><span style="display:flex;"><span>        DataSource dataSource = getDataSource(dataSourceElt);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Element transactionManagerElt = environmentElt.<span style="color:#007f7f">element</span>(<span style="color:#0ff;font-weight:bold">&#34;transactionManager&#34;</span>);
</span></span><span style="display:flex;"><span>        TransactionManager transactionManager = getTransactionManager(transactionManagerElt, dataSource);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è§£æé…ç½®æ–‡ä»¶ï¼Œè·å–æ‰€æœ‰çš„SQLæ˜ å°„å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Element mappers = environmentsElt.<span style="color:#007f7f">element</span>(<span style="color:#0ff;font-weight:bold">&#34;mappers&#34;</span>);
</span></span><span style="display:flex;"><span>        Map&lt;String, GodMappedStatement&gt; mappedStatements = getMappedStatements(mappers);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å°†ä»¥ä¸Šä¿¡æ¯å°è£…åˆ°SqlSessionFactoryå¯¹è±¡ä¸­</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactory(transactionManager, mappedStatements);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿”å›</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlSessionFactory;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Map&lt;String, GodMappedStatement&gt; getMappedStatements(Element mappers) {
</span></span><span style="display:flex;"><span>        Map&lt;String, GodMappedStatement&gt; mappedStatements = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>        mappers.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(mapperElt -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                String resource = mapperElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;resource&#34;</span>);
</span></span><span style="display:flex;"><span>                SAXReader saxReader = <span style="color:#fff;font-weight:bold">new</span> SAXReader();
</span></span><span style="display:flex;"><span>                Document document = saxReader.<span style="color:#007f7f">read</span>(Resources.<span style="color:#007f7f">getResourcesAsStream</span>(resource));
</span></span><span style="display:flex;"><span>                Element mapper = (Element) document.<span style="color:#007f7f">selectSingleNode</span>(<span style="color:#0ff;font-weight:bold">&#34;/mapper&#34;</span>);
</span></span><span style="display:flex;"><span>                String namespace = mapper.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;namespace&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                mapper.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(sqlMapper -&gt; {
</span></span><span style="display:flex;"><span>                    String sqlId = sqlMapper.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>                    String sql = sqlMapper.<span style="color:#007f7f">getTextTrim</span>();
</span></span><span style="display:flex;"><span>                    String parameterType = sqlMapper.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;parameterType&#34;</span>);
</span></span><span style="display:flex;"><span>                    String resultType = sqlMapper.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;resultType&#34;</span>);
</span></span><span style="display:flex;"><span>                    String sqlType = sqlMapper.<span style="color:#007f7f">getName</span>().<span style="color:#007f7f">toLowerCase</span>();
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">// å°è£…GodMappedStatementå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>                    GodMappedStatement godMappedStatement = <span style="color:#fff;font-weight:bold">new</span> GodMappedStatement(sqlId, resultType, sql, parameterType, sqlType);
</span></span><span style="display:flex;"><span>                    mappedStatements.<span style="color:#007f7f">put</span>(namespace + <span style="color:#0ff;font-weight:bold">&#34;.&#34;</span> + sqlId, godMappedStatement);
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (DocumentException e) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> mappedStatements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> TransactionManager getTransactionManager(Element transactionManagerElt, DataSource dataSource) {
</span></span><span style="display:flex;"><span>        String type = transactionManagerElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;type&#34;</span>).<span style="color:#007f7f">toUpperCase</span>();
</span></span><span style="display:flex;"><span>        TransactionManager transactionManager = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span>.<span style="color:#007f7f">equals</span>(type)) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä½¿ç”¨JDBCäº‹åŠ¡</span>
</span></span><span style="display:flex;"><span>            transactionManager = <span style="color:#fff;font-weight:bold">new</span> GodJDBCTransaction(dataSource, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;MANAGED&#34;</span>.<span style="color:#007f7f">equals</span>(type)) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// äº‹åŠ¡ç®¡ç†å™¨æ˜¯äº¤ç»™JEEå®¹å™¨çš„</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> transactionManager;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> DataSource getDataSource(Element dataSourceElt) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–æ‰€æœ‰æ•°æ®æºçš„å±æ€§é…ç½®</span>
</span></span><span style="display:flex;"><span>        Map&lt;String, String&gt; dataSourceMap = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>        dataSourceElt.<span style="color:#007f7f">elements</span>().<span style="color:#007f7f">forEach</span>(propertyElt -&gt; {
</span></span><span style="display:flex;"><span>            dataSourceMap.<span style="color:#007f7f">put</span>(propertyElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>), propertyElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;value&#34;</span>));
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String dataSourceType = dataSourceElt.<span style="color:#007f7f">attributeValue</span>(<span style="color:#0ff;font-weight:bold">&#34;type&#34;</span>).<span style="color:#007f7f">toUpperCase</span>();
</span></span><span style="display:flex;"><span>        DataSource dataSource = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span>.<span style="color:#007f7f">equals</span>(dataSourceType)) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;UNPOOLED&#34;</span>.<span style="color:#007f7f">equals</span>(dataSourceType)) {
</span></span><span style="display:flex;"><span>            dataSource = <span style="color:#fff;font-weight:bold">new</span> GodUNPOOLEDDataSource(dataSourceMap.<span style="color:#007f7f">get</span>(<span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span>), dataSourceMap.<span style="color:#007f7f">get</span>(<span style="color:#0ff;font-weight:bold">&#34;url&#34;</span>), dataSourceMap.<span style="color:#007f7f">get</span>(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>), dataSourceMap.<span style="color:#007f7f">get</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;JNDI&#34;</span>.<span style="color:#007f7f">equals</span>(dataSourceType)) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> dataSource;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬åæ­¥åœ¨sqlsessionfactoryä¸­æ·»åŠ opensessionæ–¹æ³•">ç¬¬åæ­¥ï¼šåœ¨SqlSessionFactoryä¸­æ·»åŠ openSessionæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#ç¬¬åæ­¥åœ¨sqlsessionfactoryä¸­æ·»åŠ opensessionæ–¹æ³•">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> SqlSession openSession(){
</span></span><span style="display:flex;"><span>    transactionManager.<span style="color:#007f7f">openConnection</span>();
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = <span style="color:#fff;font-weight:bold">new</span> SqlSession(transactionManager, mappedStatements);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> sqlSession;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬åä¸€æ­¥ç¼–å†™sqlsessionç±»ä¸­commit-rollback-closeæ–¹æ³•">ç¬¬åä¸€æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­commit rollback closeæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#ç¬¬åä¸€æ­¥ç¼–å†™sqlsessionç±»ä¸­commit-rollback-closeæ–¹æ³•">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.god.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Map;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ•°æ®åº“ä¼šè¯å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSession {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> TransactionManager transactionManager;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Map&lt;String, GodMappedStatement&gt; mappedStatements;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SqlSession(TransactionManager transactionManager, Map&lt;String, GodMappedStatement&gt; mappedStatements) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">transactionManager</span> = transactionManager;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">mappedStatements</span> = mappedStatements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> commit(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            transactionManager.<span style="color:#007f7f">getConnection</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> rollback(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            transactionManager.<span style="color:#007f7f">getConnection</span>().<span style="color:#007f7f">rollback</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> close(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            transactionManager.<span style="color:#007f7f">getConnection</span>().<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬åäºŒæ­¥ç¼–å†™sqlsessionç±»ä¸­çš„insertæ–¹æ³•">ç¬¬åäºŒæ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„insertæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#ç¬¬åäºŒæ­¥ç¼–å†™sqlsessionç±»ä¸­çš„insertæ–¹æ³•">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ’å…¥æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param sqlId è¦æ‰§è¡Œçš„sqlId
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param obj   æ’å…¥çš„æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> insert(String sqlId, Object obj) {
</span></span><span style="display:flex;"><span>    GodMappedStatement godMappedStatement = mappedStatements.<span style="color:#007f7f">get</span>(sqlId);
</span></span><span style="display:flex;"><span>    Connection connection = transactionManager.<span style="color:#007f7f">getConnection</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–sqlè¯­å¥</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})</span>
</span></span><span style="display:flex;"><span>    String godbatisSql = godMappedStatement.<span style="color:#007f7f">getSql</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,?,?,?,?,?)</span>
</span></span><span style="display:flex;"><span>    String sql = godbatisSql.<span style="color:#007f7f">replaceAll</span>(<span style="color:#0ff;font-weight:bold">&#34;#\\{[a-zA-Z0-9_\\$]*}&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;?&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// é‡ç‚¹ä¸€æ­¥</span>
</span></span><span style="display:flex;"><span>    Map&lt;Integer, String&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> index = 1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">while</span> (godbatisSql.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34;#&#34;</span>) &gt;= 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> beginIndex = godbatisSql.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34;#&#34;</span>) + 2;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> endIndex = godbatisSql.<span style="color:#007f7f">indexOf</span>(<span style="color:#0ff;font-weight:bold">&#34;}&#34;</span>);
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">put</span>(index++, godbatisSql.<span style="color:#007f7f">substring</span>(beginIndex, endIndex).<span style="color:#007f7f">trim</span>());
</span></span><span style="display:flex;"><span>        godbatisSql = godbatisSql.<span style="color:#007f7f">substring</span>(endIndex + 1);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> PreparedStatement ps;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        ps = connection.<span style="color:#007f7f">prepareStatement</span>(sql);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç»™?èµ‹å€¼</span>
</span></span><span style="display:flex;"><span>        map.<span style="color:#007f7f">forEach</span>((k, v) -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// è·å–javaå®ä½“ç±»çš„getæ–¹æ³•å</span>
</span></span><span style="display:flex;"><span>                String getMethodName = <span style="color:#0ff;font-weight:bold">&#34;get&#34;</span> + v.<span style="color:#007f7f">toUpperCase</span>().<span style="color:#007f7f">charAt</span>(0) + v.<span style="color:#007f7f">substring</span>(1);
</span></span><span style="display:flex;"><span>                Method getMethod = obj.<span style="color:#007f7f">getClass</span>().<span style="color:#007f7f">getDeclaredMethod</span>(getMethodName);
</span></span><span style="display:flex;"><span>                ps.<span style="color:#007f7f">setString</span>(k, getMethod.<span style="color:#007f7f">invoke</span>(obj).<span style="color:#007f7f">toString</span>());
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = ps.<span style="color:#007f7f">executeUpdate</span>();
</span></span><span style="display:flex;"><span>        ps.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬åä¸‰æ­¥ç¼–å†™sqlsessionç±»ä¸­çš„selectoneæ–¹æ³•">ç¬¬åä¸‰æ­¥ï¼šç¼–å†™SqlSessionç±»ä¸­çš„selectOneæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#ç¬¬åä¸‰æ­¥ç¼–å†™sqlsessionç±»ä¸­çš„selectoneæ–¹æ³•">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param sqlId
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param parameterObj
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Object selectOne(String sqlId, Object parameterObj){
</span></span><span style="display:flex;"><span>    GodMappedStatement godMappedStatement = mappedStatements.<span style="color:#007f7f">get</span>(sqlId);
</span></span><span style="display:flex;"><span>    Connection connection = transactionManager.<span style="color:#007f7f">getConnection</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–sqlè¯­å¥</span>
</span></span><span style="display:flex;"><span>    String godbatisSql = godMappedStatement.<span style="color:#007f7f">getSql</span>();
</span></span><span style="display:flex;"><span>    String sql = godbatisSql.<span style="color:#007f7f">replaceAll</span>(<span style="color:#0ff;font-weight:bold">&#34;#\\{[a-zA-Z0-9_\\$]*}&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;?&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡Œsql</span>
</span></span><span style="display:flex;"><span>    PreparedStatement ps = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    ResultSet rs = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    Object obj = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        ps = connection.<span style="color:#007f7f">prepareStatement</span>(sql);
</span></span><span style="display:flex;"><span>        ps.<span style="color:#007f7f">setString</span>(1, parameterObj.<span style="color:#007f7f">toString</span>());
</span></span><span style="display:flex;"><span>        rs = ps.<span style="color:#007f7f">executeQuery</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (rs.<span style="color:#007f7f">next</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// å°†ç»“æœé›†å°è£…å¯¹è±¡ï¼Œé€šè¿‡åå°„</span>
</span></span><span style="display:flex;"><span>            String resultType = godMappedStatement.<span style="color:#007f7f">getResultType</span>();
</span></span><span style="display:flex;"><span>            Class&lt;?&gt; aClass = Class.<span style="color:#007f7f">forName</span>(resultType);
</span></span><span style="display:flex;"><span>            Constructor&lt;?&gt; con = aClass.<span style="color:#007f7f">getDeclaredConstructor</span>();
</span></span><span style="display:flex;"><span>            obj = con.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ç»™å¯¹è±¡objå±æ€§èµ‹å€¼</span>
</span></span><span style="display:flex;"><span>            ResultSetMetaData rsmd = rs.<span style="color:#007f7f">getMetaData</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> columnCount = rsmd.<span style="color:#007f7f">getColumnCount</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = 1; i &lt;= columnCount; i++) {
</span></span><span style="display:flex;"><span>                String columnName = rsmd.<span style="color:#007f7f">getColumnName</span>(i);
</span></span><span style="display:flex;"><span>                String setMethodName = <span style="color:#0ff;font-weight:bold">&#34;set&#34;</span> + columnName.<span style="color:#007f7f">toUpperCase</span>().<span style="color:#007f7f">charAt</span>(0) + columnName.<span style="color:#007f7f">substring</span>(1);
</span></span><span style="display:flex;"><span>                Method setMethod = aClass.<span style="color:#007f7f">getDeclaredMethod</span>(setMethodName, aClass.<span style="color:#007f7f">getDeclaredField</span>(columnName).<span style="color:#007f7f">getType</span>());
</span></span><span style="display:flex;"><span>                setMethod.<span style="color:#007f7f">invoke</span>(obj, rs.<span style="color:#007f7f">getString</span>(columnName));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (rs != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                rs.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            ps.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> obj;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="53-godbatisä½¿ç”¨mavenæ‰“åŒ…">5.3 GodBatisä½¿ç”¨Mavenæ‰“åŒ…<a hidden class="anchor" aria-hidden="true" href="#53-godbatisä½¿ç”¨mavenæ‰“åŒ…">#</a></h2>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/af034cc0b0491a6547c2ac1fb02d0d81_MD5.png"></p>
<p>æŸ¥çœ‹æœ¬åœ°ä»“åº“ä¸­æ˜¯å¦å·²ç»æœ‰jaråŒ…ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/534dca7b4c1657b2e664cd613a71b78c_MD5.png"></p>
<h2 id="54-ä½¿ç”¨godbatis">5.4 ä½¿ç”¨GodBatis<a hidden class="anchor" aria-hidden="true" href="#54-ä½¿ç”¨godbatis">#</a></h2>
<p>ä½¿ç”¨GodBatiså°±å’Œä½¿ç”¨MyBatisæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®åº“è¡¨t_user</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5895e4ac802f030dbb9d6d1b82786a8b_MD5.png"></p>
<p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ¨¡å—ï¼Œæ™®é€šçš„Java Mavenæ¨¡å—ï¼šgodbatis-test</p>
<p>ç¬¬ä¸‰æ­¥ï¼šå¼•å…¥ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>com.powernode<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>godbatis-test<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--godbatisä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;groupId&gt;</span>org.god<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;artifactId&gt;</span>godbatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;version&gt;</span>1.0.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--mysql--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;version&gt;</span>8.0.30<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--junit--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;maven.compiler.source&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;maven.compiler.target&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å››æ­¥ï¼šç¼–å†™pojoç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.godbatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> User {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String email;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String address;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;User{&#34;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;id=&#39;&#34;</span> + id + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, name=&#39;&#34;</span> + name + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, email=&#39;&#34;</span> + email + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, address=&#39;&#34;</span> + address + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#39;}&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getId() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setId(String id) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getName() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setName(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getEmail() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> email;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setEmail(String email) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">email</span> = email;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getAddress() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> address;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAddress(String address) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">address</span> = address;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> User() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> User(String id, String name, String email, String address) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">email</span> = email;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">address</span> = address;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äº”æ­¥ï¼šç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼šgodbatis-config.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;UNPOOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;UserMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å…­æ­¥ï¼šç¼–å†™sqlæ˜ å°„æ–‡ä»¶ï¼šUserMapper.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;user&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_user(id,name,email,address) values(#{id},#{name},#{email},#{address})
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectUserById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.godbatis.pojo.User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_user where id = #{id}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™æµ‹è¯•ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.godbatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.godbatis.pojo.User;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.god.core.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.god.core.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.god.core.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.god.core.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GodBatisTest {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertUser() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        User user = <span style="color:#fff;font-weight:bold">new</span> User(<span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;zhangsan&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;zhangsan@1234.com&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;åŒ—äº¬å¤§å…´åŒº&#34;</span>);
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourcesAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;godbatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">insert</span>(<span style="color:#0ff;font-weight:bold">&#34;user.insertUser&#34;</span>, user);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectUserById() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourcesAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;godbatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        Object user = sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;user.selectUserById&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(user);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å…«æ­¥ï¼šè¿è¡Œç»“æœ</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ee72a78e94532c0c6e46ad4c89916dab_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/81b15f17a203acefbce0d509f2d294a5_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/213ea50e073db2dee8ad16747eb210e0_MD5.png"></p>
<h2 id="55-æ€»ç»“mybatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†">5.5 æ€»ç»“MyBatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†<a hidden class="anchor" aria-hidden="true" href="#55-æ€»ç»“mybatisæ¡†æ¶çš„é‡è¦å®ç°åŸç†">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;user&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    insert into t_user(id,name,email,address) values(#{id},#{name},#{email},#{address})
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectUserById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.godbatis.pojo.User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    select id,name,email,address from t_user where id = #{id}
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆinsertè¯­å¥ä¸­ #{} é‡Œå¡«å†™çš„å¿…é¡»æ˜¯å±æ€§åï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆselectè¯­å¥æŸ¥è¯¢ç»“æœåˆ—åè¦å±æ€§åä¸€è‡´ï¼Ÿ</li>
</ul>
<h1 id="å…­åœ¨webä¸­åº”ç”¨mybatisä½¿ç”¨mvcæ¶æ„æ¨¡å¼">å…­ã€åœ¨WEBä¸­åº”ç”¨MyBatisï¼ˆä½¿ç”¨MVCæ¶æ„æ¨¡å¼ï¼‰<a hidden class="anchor" aria-hidden="true" href="#å…­åœ¨webä¸­åº”ç”¨mybatisä½¿ç”¨mvcæ¶æ„æ¨¡å¼">#</a></h1>
<p><strong>ç›®æ ‡ï¼š</strong></p>
<ul>
<li>æŒæ¡mybatisåœ¨webåº”ç”¨ä¸­æ€ä¹ˆç”¨</li>
<li>mybatisä¸‰å¤§å¯¹è±¡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</li>
<li>ThreadLocalåŸç†åŠä½¿ç”¨</li>
<li>å·©å›ºMVCæ¶æ„æ¨¡å¼</li>
<li>ä¸ºå­¦ä¹ MyBatisçš„æ¥å£ä»£ç†æœºåˆ¶åšå‡†å¤‡</li>
</ul>
<p><strong>å®ç°åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>é“¶è¡Œè´¦æˆ·è½¬è´¦</li>
</ul>
<p><strong>ä½¿ç”¨æŠ€æœ¯ï¼š</strong></p>
<ul>
<li>HTML + Servlet + MyBatis</li>
</ul>
<p><strong>WEBåº”ç”¨çš„åç§°ï¼š</strong></p>
<ul>
<li>bank****</li>
</ul>
<h2 id="61-éœ€æ±‚æè¿°">6.1 éœ€æ±‚æè¿°<a hidden class="anchor" aria-hidden="true" href="#61-éœ€æ±‚æè¿°">#</a></h2>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c2c352c291d11f4149253bafbce6660a_MD5.png"></p>
<h2 id="62-æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®">6.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#62-æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®">#</a></h2>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/fb4e1c1ed62134349fab1d990bc1771a_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/2c4c008e47a981fdbadc3b8478d71037_MD5.png"></p>
<h2 id="63-å®ç°æ­¥éª¤">6.3 å®ç°æ­¥éª¤<a hidden class="anchor" aria-hidden="true" href="#63-å®ç°æ­¥éª¤">#</a></h2>
<h3 id="ç¬¬ä¸€æ­¥ç¯å¢ƒæ­å»º">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒæ­å»º<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ­¥ç¯å¢ƒæ­å»º">#</a></h3>
<ul>
<li>IDEAä¸­åˆ›å»ºMaven WEBåº”ç”¨ï¼ˆ<strong><font style="color:#E8323C;">mybatis-004-web</font></strong>ï¼‰</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/530bb6de4269f0aa5f4bbe61ad288d6e_MD5.png"></p>
<ul>
<li>IDEAé…ç½®Tomcatï¼Œè¿™é‡ŒTomcatä½¿ç”¨10+ç‰ˆæœ¬ã€‚å¹¶éƒ¨ç½²åº”ç”¨åˆ°tomcatã€‚</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a45e0fe9e205759a20e279c22b6fe38d_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e2c21829091ed379b1c9e1c5baf15db7_MD5.png"></p>
<ul>
<li>é»˜è®¤åˆ›å»ºçš„maven webåº”ç”¨æ²¡æœ‰javaå’Œresourcesç›®å½•ï¼ŒåŒ…æ‹¬ä¸¤ç§è§£å†³æ–¹æ¡ˆ
<ul>
<li>ç¬¬ä¸€ç§ï¼šè‡ªå·±æ‰‹åŠ¨åŠ ä¸Šã€‚</li>
</ul>
</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/9977a32330303d8dd678eed26dcadddf_MD5.png"></p>
<pre><code>- ç¬¬äºŒç§ï¼šä¿®æ”¹maven-archetype-webapp-1.4.jarä¸­çš„é…ç½®æ–‡ä»¶
</code></pre>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6a8fbb7361e096f952ce858d0f23e511_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e9481ea33213796af9b25fe72d05bd38_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e750d7330b2a3a40adfb4222001fee6c_MD5.png"></p>
<ul>
<li>web.xmlæ–‡ä»¶çš„ç‰ˆæœ¬è¾ƒä½ï¼Œå¯ä»¥ä»tomcat10çš„æ ·ä¾‹æ–‡ä»¶ä¸­å¤åˆ¶ï¼Œç„¶åä¿®æ”¹</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;web-app</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;https://jakarta.ee/xml/ns/jakartaee&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;https://jakarta.ee/xml/ns/jakartaee
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">version=</span><span style="color:#0ff;font-weight:bold">&#34;5.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">metadata-complete=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/web-app&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åˆ é™¤index.jspæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®ä¸ä½¿ç”¨JSPã€‚åªä½¿ç”¨htmlã€‚</li>
<li>ç¡®å®špom.xmlæ–‡ä»¶ä¸­çš„æ‰“åŒ…æ–¹å¼æ˜¯waråŒ…ã€‚</li>
<li>å¼•å…¥ç›¸å…³ä¾èµ–
<ul>
<li>ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿®æ”¹ä¸º17</li>
<li>å¼•å…¥çš„ä¾èµ–åŒ…æ‹¬ï¼šmybatisï¼Œmysqlé©±åŠ¨ï¼Œjunitï¼Œlogbackï¼Œservletã€‚</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">92
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.powernode<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-004-web<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;packaging&gt;</span>war<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;name&gt;</span>mybatis-004-web<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;url&gt;</span>http://localhost:8080/bank<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="font-weight:bold">&lt;/project.build.sourceEncoding&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.source&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.target&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--mybatisä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>3.5.10<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>8.0.30<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--junitä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--logbackä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>1.2.11<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--servletä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>jakarta.servlet<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>jakarta.servlet-api<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>5.0.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;scope&gt;</span>provided<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;finalName&gt;</span>mybatis-004-web<span style="font-weight:bold">&lt;/finalName&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;pluginManagement&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-clean-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>3.1.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-resources-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>3.0.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-compiler-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>3.8.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-surefire-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>2.22.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-war-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>3.2.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-install-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>2.5.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;artifactId&gt;</span>maven-deploy-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;version&gt;</span>2.8.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/pluginManagement&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/build&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¼•å…¥ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œæ”¾åˆ°resourcesç›®å½•ä¸‹ï¼ˆå…¨éƒ¨æ”¾åˆ°ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼‰
<ul>
<li>mybatis-config.xml</li>
<li>AccountMapper.xml</li>
<li>logback.xml</li>
<li>jdbc.properties</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#007f7f">jdbc.driver</span>=<span style="color:#0ff;font-weight:bold">com.mysql.cj.jdbc.Driver</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.url</span>=<span style="color:#0ff;font-weight:bold">jdbc:mysql://localhost:3306/powernode</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.username</span>=<span style="color:#0ff;font-weight:bold">root</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.password</span>=<span style="color:#0ff;font-weight:bold">root</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.properties&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.driver}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.url}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.username}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.password}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--ä¸€å®šè¦æ³¨æ„è¿™é‡Œçš„è·¯å¾„å“¦ï¼ï¼ï¼--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;AccountMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;account&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬äºŒæ­¥å‰ç«¯é¡µé¢indexhtml">ç¬¬äºŒæ­¥ï¼šå‰ç«¯é¡µé¢index.html<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ­¥å‰ç«¯é¡µé¢indexhtml">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">html</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="font-weight:bold">meta</span> <span style="color:#007f7f">charset</span>=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="font-weight:bold">title</span>&gt;é“¶è¡Œè´¦æˆ·è½¬è´¦&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--/bankæ˜¯åº”ç”¨çš„æ ¹ï¼Œéƒ¨ç½²webåº”ç”¨åˆ°tomcatçš„æ—¶å€™ä¸€å®šè¦æ³¨æ„è¿™ä¸ªåå­—--&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">form</span> <span style="color:#007f7f">action</span>=<span style="color:#0ff;font-weight:bold">&#34;/bank/transfer&#34;</span> <span style="color:#007f7f">method</span>=<span style="color:#0ff;font-weight:bold">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    è½¬å‡ºè´¦æˆ·ï¼š&lt;<span style="font-weight:bold">input</span> <span style="color:#007f7f">type</span>=<span style="color:#0ff;font-weight:bold">&#34;text&#34;</span> <span style="color:#007f7f">name</span>=<span style="color:#0ff;font-weight:bold">&#34;fromActno&#34;</span>/&gt;&lt;<span style="font-weight:bold">br</span>&gt;
</span></span><span style="display:flex;"><span>    è½¬å…¥è´¦æˆ·ï¼š&lt;<span style="font-weight:bold">input</span> <span style="color:#007f7f">type</span>=<span style="color:#0ff;font-weight:bold">&#34;text&#34;</span> <span style="color:#007f7f">name</span>=<span style="color:#0ff;font-weight:bold">&#34;toActno&#34;</span>/&gt;&lt;<span style="font-weight:bold">br</span>&gt;
</span></span><span style="display:flex;"><span>    è½¬è´¦é‡‘é¢ï¼š&lt;<span style="font-weight:bold">input</span> <span style="color:#007f7f">type</span>=<span style="color:#0ff;font-weight:bold">&#34;text&#34;</span> <span style="color:#007f7f">name</span>=<span style="color:#0ff;font-weight:bold">&#34;money&#34;</span>/&gt;&lt;<span style="font-weight:bold">br</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="font-weight:bold">input</span> <span style="color:#007f7f">type</span>=<span style="color:#0ff;font-weight:bold">&#34;submit&#34;</span> <span style="color:#007f7f">value</span>=<span style="color:#0ff;font-weight:bold">&#34;è½¬è´¦&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">form</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">html</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸‰æ­¥åˆ›å»ºpojoåŒ…serviceåŒ…daoåŒ…webåŒ…utilsåŒ…">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰æ­¥åˆ›å»ºpojoåŒ…serviceåŒ…daoåŒ…webåŒ…utilsåŒ…">#</a></h3>
<ul>
<li>com.powernode.bank.pojo</li>
<li>com.powernode.bank.service</li>
<li>com.powernode.bank.service.impl</li>
<li>com.powernode.bank.dao</li>
<li>com.powernode.bank.dao.impl</li>
<li>com.powernode.bank.web.controller</li>
<li>com.powernode.bank.exception</li>
<li>com.powernode.bank.utilsï¼š<strong><font style="color:#E8323C;">å°†ä¹‹å‰ç¼–å†™çš„SqlSessionUtilå·¥å…·ç±»æ‹·è´åˆ°è¯¥åŒ…ä¸‹ã€‚</font></strong></li>
</ul>
<h3 id="ç¬¬å››æ­¥å®šä¹‰pojoç±»account">ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å››æ­¥å®šä¹‰pojoç±»account">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * é“¶è¡Œè´¦æˆ·ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Account {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String actno;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Double balance;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;Account{&#34;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;id=&#34;</span> + id +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, actno=&#39;&#34;</span> + actno + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, balance=&#34;</span> + balance +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#39;}&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Account() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Account(Long id, String actno, Double balance) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">actno</span> = actno;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">balance</span> = balance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Long getId() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setId(Long id) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">id</span> = id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getActno() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> actno;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setActno(String actno) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">actno</span> = actno;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Double getBalance() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> balance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setBalance(Double balance) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">balance</span> = balance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬äº”æ­¥ç¼–å†™accountdaoæ¥å£ä»¥åŠaccountdaoimplå®ç°ç±»">ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥å£ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äº”æ­¥ç¼–å†™accountdaoæ¥å£ä»¥åŠaccountdaoimplå®ç°ç±»">#</a></h3>
<p>åˆ†ædaoä¸­è‡³å°‘è¦æä¾›å‡ ä¸ªæ–¹æ³•ï¼Œæ‰èƒ½å®Œæˆè½¬è´¦ï¼š</p>
<ul>
<li>è½¬è´¦å‰éœ€è¦æŸ¥è¯¢ä½™é¢æ˜¯å¦å……è¶³ï¼šselectByActno</li>
<li>è½¬è´¦æ—¶è¦æ›´æ–°è´¦æˆ·ï¼šupdate</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.dao;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * è´¦æˆ·æ•°æ®è®¿é—®å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> AccountDao {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®è´¦å·è·å–è´¦æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param actno è´¦å·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return è´¦æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Account selectByActno(String actno);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ›´æ–°è´¦æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param act è´¦æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return 1è¡¨ç¤ºæ›´æ–°æˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> update(Account act);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.dao.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountDaoImpl <span style="color:#fff;font-weight:bold">implements</span> AccountDao {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Account selectByActno(String actno) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        Account act = (Account)sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;selectByActno&#34;</span>, actno);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> act;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> update(Account act) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">update</span>(<span style="color:#0ff;font-weight:bold">&#34;update&#34;</span>, act);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å…­æ­¥accountdaoimplä¸­ç¼–å†™äº†mybatisä»£ç éœ€è¦ç¼–å†™sqlæ˜ å°„æ–‡ä»¶äº†">ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„æ–‡ä»¶äº†<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…­æ­¥accountdaoimplä¸­ç¼–å†™äº†mybatisä»£ç éœ€è¦ç¼–å†™sqlæ˜ å°„æ–‡ä»¶äº†">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;account&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByActno&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.bank.pojo.Account&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_act where actno = #{actno}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;update</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;update&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        update t_act set balance = #{balance} where actno = #{actno}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/update&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸ƒæ­¥ç¼–å†™accountserviceæ¥å£ä»¥åŠaccountserviceimpl">ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥å£ä»¥åŠAccountServiceImpl<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸ƒæ­¥ç¼–å†™accountserviceæ¥å£ä»¥åŠaccountserviceimpl">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.exception;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * ä½™é¢ä¸è¶³å¼‚å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MoneyNotEnoughException <span style="color:#fff;font-weight:bold">extends</span> Exception{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> MoneyNotEnoughException(){}
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> MoneyNotEnoughException(String msg){ <span style="color:#fff;font-weight:bold">super</span>(msg); }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.exception;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * åº”ç”¨å¼‚å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppException <span style="color:#fff;font-weight:bold">extends</span> Exception{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> AppException(){}
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> AppException(String msg){ <span style="color:#fff;font-weight:bold">super</span>(msg); }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.service;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.AppException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.MoneyNotEnoughException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * è´¦æˆ·ä¸šåŠ¡ç±»ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> AccountService {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * é“¶è¡Œè´¦æˆ·è½¬æ­£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param fromActno è½¬å‡ºè´¦æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param toActno è½¬å…¥è´¦æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param money è½¬è´¦é‡‘é¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @throws MoneyNotEnoughException ä½™é¢ä¸è¶³å¼‚å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @throws AppException Appå‘ç”Ÿå¼‚å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> transfer(String fromActno, String toActno, <span style="color:#fff;font-weight:bold">double</span> money) <span style="color:#fff;font-weight:bold">throws</span> MoneyNotEnoughException, AppException;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.service.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.impl.AccountDaoImpl;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.AppException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.MoneyNotEnoughException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.service.AccountService;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountServiceImpl <span style="color:#fff;font-weight:bold">implements</span> AccountService {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> AccountDao accountDao = <span style="color:#fff;font-weight:bold">new</span> AccountDaoImpl();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> transfer(String fromActno, String toActno, <span style="color:#fff;font-weight:bold">double</span> money) <span style="color:#fff;font-weight:bold">throws</span> MoneyNotEnoughException, AppException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span>
</span></span><span style="display:flex;"><span>        Account fromAct = accountDao.<span style="color:#007f7f">selectByActno</span>(fromActno);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (fromAct.<span style="color:#007f7f">getBalance</span>() &lt; money) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MoneyNotEnoughException(<span style="color:#0ff;font-weight:bold">&#34;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span>
</span></span><span style="display:flex;"><span>            Account toAct = accountDao.<span style="color:#007f7f">selectByActno</span>(toActno);
</span></span><span style="display:flex;"><span>            fromAct.<span style="color:#007f7f">setBalance</span>(fromAct.<span style="color:#007f7f">getBalance</span>() - money);
</span></span><span style="display:flex;"><span>            toAct.<span style="color:#007f7f">setBalance</span>(toAct.<span style="color:#007f7f">getBalance</span>() + money);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ›´æ–°æ•°æ®åº“</span>
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(fromAct);
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(toAct);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> AppException(<span style="color:#0ff;font-weight:bold">&#34;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å…«æ­¥ç¼–å†™accountcontroller">ç¬¬å…«æ­¥ï¼šç¼–å†™AccountController<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…«æ­¥ç¼–å†™accountcontroller">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.web.controller;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.AppException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.MoneyNotEnoughException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.service.AccountService;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.service.impl.AccountServiceImpl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.servlet.ServletException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.servlet.http.HttpServlet;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.servlet.http.HttpServletRequest;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javax.servlet.http.HttpServletResponse;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.io.PrintWriter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * è´¦æˆ·æ§åˆ¶å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>@WebServlet(<span style="color:#0ff;font-weight:bold">&#34;/transfer&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountController <span style="color:#fff;font-weight:bold">extends</span> HttpServlet {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> AccountService accountService = <span style="color:#fff;font-weight:bold">new</span> AccountServiceImpl();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> doPost(HttpServletRequest request, HttpServletResponse response)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throws</span> ServletException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–å“åº”æµ</span>
</span></span><span style="display:flex;"><span>        response.<span style="color:#007f7f">setContentType</span>(<span style="color:#0ff;font-weight:bold">&#34;text/html;charset=UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>        PrintWriter out = response.<span style="color:#007f7f">getWriter</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–è´¦æˆ·ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>        String fromActno = request.<span style="color:#007f7f">getParameter</span>(<span style="color:#0ff;font-weight:bold">&#34;fromActno&#34;</span>);
</span></span><span style="display:flex;"><span>        String toActno = request.<span style="color:#007f7f">getParameter</span>(<span style="color:#0ff;font-weight:bold">&#34;toActno&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">double</span> money = Integer.<span style="color:#007f7f">parseInt</span>(request.<span style="color:#007f7f">getParameter</span>(<span style="color:#0ff;font-weight:bold">&#34;money&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è°ƒç”¨ä¸šåŠ¡æ–¹æ³•å®Œæˆè½¬è´¦</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            accountService.<span style="color:#007f7f">transfer</span>(fromActno, toActno, money);
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">print</span>(<span style="color:#0ff;font-weight:bold">&#34;&lt;h1&gt;è½¬è´¦æˆåŠŸï¼ï¼ï¼&lt;/h1&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (MoneyNotEnoughException e) {
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">print</span>(e.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (AppException e) {
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">print</span>(e.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥åœ°å€ï¼šhttp://localhost:8080/bankï¼Œæµ‹è¯•ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/671eac162f203aacb058c0585b698314_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8b7a18e73ac2e4a13760ce900ade74bc_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7cebd8e897260e9e8284cc6b47533c0a_MD5.png"></p>
<h2 id="64-mybatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜">6.4 MyBatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#64-mybatiså¯¹è±¡ä½œç”¨åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜">#</a></h2>
<h3 id="mybatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ">MyBatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#mybatisæ ¸å¿ƒå¯¹è±¡çš„ä½œç”¨åŸŸ">#</a></h3>
<h4 id="sqlsessionfactorybuilder">SqlSessionFactoryBuilder<a hidden class="anchor" aria-hidden="true" href="#sqlsessionfactorybuilder">#</a></h4>
<p><font style="color:rgb(51, 51, 51);">è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</font></p>
<h4 id="sqlsessionfactory">SqlSessionFactory<a hidden class="anchor" aria-hidden="true" href="#sqlsessionfactory">#</a></h4>
<p><font style="color:rgb(51, 51, 51);">SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ ä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</font></p>
<h4 id="sqlsession">SqlSession<a hidden class="anchor" aria-hidden="true" href="#sqlsession">#</a></h4>
<p><font style="color:rgb(51, 51, 51);">æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªç¡®ä¿ SqlSession å…³é—­çš„æ ‡å‡†æ¨¡å¼ï¼š</font></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">try</span> (SqlSession session = sqlSessionFactory.<span style="color:#007f7f">openSession</span>()) {
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="äº‹åŠ¡é—®é¢˜">äº‹åŠ¡é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#äº‹åŠ¡é—®é¢˜">#</a></h3>
<p>åœ¨ä¹‹å‰çš„è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œæ›´æ–°äº†ä¸¤ä¸ªè´¦æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä»¬çš„åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨äº‹åŠ¡æœºåˆ¶ï¼Œåœ¨transferæ–¹æ³•å¼€å§‹æ‰§è¡Œæ—¶å¼€å¯äº‹åŠ¡ï¼Œç›´åˆ°ä¸¤ä¸ªæ›´æ–°éƒ½æˆåŠŸä¹‹åï¼Œå†æäº¤äº‹åŠ¡ï¼Œæˆ‘ä»¬å°è¯•å°†transferæ–¹æ³•è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.service.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.impl.AccountDaoImpl;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.AppException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.MoneyNotEnoughException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.service.AccountService;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountServiceImpl <span style="color:#fff;font-weight:bold">implements</span> AccountService {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> AccountDao accountDao = <span style="color:#fff;font-weight:bold">new</span> AccountDaoImpl();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> transfer(String fromActno, String toActno, <span style="color:#fff;font-weight:bold">double</span> money) <span style="color:#fff;font-weight:bold">throws</span> MoneyNotEnoughException, AppException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span>
</span></span><span style="display:flex;"><span>        Account fromAct = accountDao.<span style="color:#007f7f">selectByActno</span>(fromActno);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (fromAct.<span style="color:#007f7f">getBalance</span>() &lt; money) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MoneyNotEnoughException(<span style="color:#0ff;font-weight:bold">&#34;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span>
</span></span><span style="display:flex;"><span>            Account toAct = accountDao.<span style="color:#007f7f">selectByActno</span>(toActno);
</span></span><span style="display:flex;"><span>            fromAct.<span style="color:#007f7f">setBalance</span>(fromAct.<span style="color:#007f7f">getBalance</span>() - money);
</span></span><span style="display:flex;"><span>            toAct.<span style="color:#007f7f">setBalance</span>(toAct.<span style="color:#007f7f">getBalance</span>() + money);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ›´æ–°æ•°æ®åº“ï¼ˆæ·»åŠ äº‹åŠ¡ï¼‰</span>
</span></span><span style="display:flex;"><span>            SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(fromAct);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ¨¡æ‹Ÿå¼‚å¸¸</span>
</span></span><span style="display:flex;"><span>            String s = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            s.<span style="color:#007f7f">toString</span>();
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(toAct);
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> AppException(<span style="color:#0ff;font-weight:bold">&#34;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œå‰æ³¨æ„çœ‹æ•°æ®åº“è¡¨ä¸­å½“å‰çš„æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7cebd8e897260e9e8284cc6b47533c0a_MD5.png"></p>
<p>æ‰§è¡Œç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e47ee3cd1a08a194f49d9812a8512ecb_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/d0d03894cce18d631627788e86130a5b_MD5.png"></p>
<p>å†æ¬¡æŸ¥çœ‹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5181c8669114e7debbcf13bc5a5ca9f0_MD5.png"></p>
<p><strong><font style="color:#E8323C;">å‚»çœ¼äº†å§ï¼ï¼ï¼äº‹åŠ¡å‡ºé—®é¢˜äº†ï¼Œè½¬è´¦å¤±è´¥äº†ï¼Œé’±ä»ç„¶æ˜¯å°‘äº†1ä¸‡ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿä¸»è¦æ˜¯å› ä¸ºserviceå’Œdaoä¸­ä½¿ç”¨çš„SqlSessionå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªã€‚</font></strong></p>
<p>æ€ä¹ˆåŠï¼Ÿä¸ºäº†ä¿è¯serviceå’Œdaoä¸­ä½¿ç”¨çš„SqlSessionå¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œå¯ä»¥å°†SqlSessionå¯¹è±¡å­˜æ”¾åˆ°ThreadLocalå½“ä¸­ã€‚ä¿®æ”¹SqlSessionUtilå·¥å…·ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.utils;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * MyBatiså·¥å…·ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionUtil {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> SqlSessionFactory sqlSessionFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>            sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> ThreadLocal&lt;SqlSession&gt; local = <span style="color:#fff;font-weight:bold">new</span> ThreadLocal&lt;&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return æ–°çš„ä¼šè¯å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> SqlSession openSession() {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = local.<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            local.<span style="color:#007f7f">set</span>(sqlSession);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlSession;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å…³é—­SqlSessionå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param sqlSession
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> close(SqlSession sqlSession){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        local.<span style="color:#007f7f">remove</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹daoä¸­çš„æ–¹æ³•ï¼šAccountDaoImplä¸­æ‰€æœ‰æ–¹æ³•ä¸­çš„æäº¤commitå’Œå…³é—­closeä»£ç å…¨éƒ¨åˆ é™¤ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.dao.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountDaoImpl <span style="color:#fff;font-weight:bold">implements</span> AccountDao {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Account selectByActno(String actno) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        Account act = (Account)sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;account.selectByActno&#34;</span>, actno);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> act;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> update(Account act) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">update</span>(<span style="color:#0ff;font-weight:bold">&#34;account.update&#34;</span>, act);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹serviceä¸­çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.service.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.impl.AccountDaoImpl;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.AppException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.exception.MoneyNotEnoughException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.service.AccountService;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountServiceImpl <span style="color:#fff;font-weight:bold">implements</span> AccountService {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> AccountDao accountDao = <span style="color:#fff;font-weight:bold">new</span> AccountDaoImpl();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> transfer(String fromActno, String toActno, <span style="color:#fff;font-weight:bold">double</span> money) <span style="color:#fff;font-weight:bold">throws</span> MoneyNotEnoughException, AppException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span>
</span></span><span style="display:flex;"><span>        Account fromAct = accountDao.<span style="color:#007f7f">selectByActno</span>(fromActno);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (fromAct.<span style="color:#007f7f">getBalance</span>() &lt; money) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MoneyNotEnoughException(<span style="color:#0ff;font-weight:bold">&#34;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸è¶³ã€‚&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ç¨‹åºå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ä½™é¢å……è¶³</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span>
</span></span><span style="display:flex;"><span>            Account toAct = accountDao.<span style="color:#007f7f">selectByActno</span>(toActno);
</span></span><span style="display:flex;"><span>            fromAct.<span style="color:#007f7f">setBalance</span>(fromAct.<span style="color:#007f7f">getBalance</span>() - money);
</span></span><span style="display:flex;"><span>            toAct.<span style="color:#007f7f">setBalance</span>(toAct.<span style="color:#007f7f">getBalance</span>() + money);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ›´æ–°æ•°æ®åº“ï¼ˆæ·»åŠ äº‹åŠ¡ï¼‰</span>
</span></span><span style="display:flex;"><span>            SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(fromAct);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ¨¡æ‹Ÿå¼‚å¸¸</span>
</span></span><span style="display:flex;"><span>            String s = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            s.<span style="color:#007f7f">toString</span>();
</span></span><span style="display:flex;"><span>            accountDao.<span style="color:#007f7f">update</span>(toAct);
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>            SqlSessionUtil.<span style="color:#007f7f">close</span>(sqlSession);  <span style="color:#007f7f">// åªä¿®æ”¹äº†è¿™ä¸€è¡Œä»£ç ã€‚</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> AppException(<span style="color:#0ff;font-weight:bold">&#34;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“å‰æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5181c8669114e7debbcf13bc5a5ca9f0_MD5.png"></p>
<p>å†æ¬¡è¿è¡Œç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e47ee3cd1a08a194f49d9812a8512ecb_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/d0d03894cce18d631627788e86130a5b_MD5.png"></p>
<p>æŸ¥çœ‹æ•°æ®åº“è¡¨ï¼šæ²¡æœ‰é—®é¢˜ã€‚</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5181c8669114e7debbcf13bc5a5ca9f0_MD5.png"></p>
<p>å†æµ‹è¯•è½¬è´¦æˆåŠŸï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e47ee3cd1a08a194f49d9812a8512ecb_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8b7a18e73ac2e4a13760ce900ade74bc_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/56efba99b5c60edde7af07bcf9e692f8_MD5.png"></p>
<p>å¦‚æœä½™é¢ä¸è¶³å‘¢ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a3a1adc2489cb566e62deb46d88fb7c0_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6e2e295267adc0e99f514b565a48d076_MD5.png"></p>
<p>è´¦æˆ·çš„ä½™é¢ä¾ç„¶æ­£å¸¸ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/56efba99b5c60edde7af07bcf9e692f8_MD5.png"></p>
<h2 id="65-åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜">6.5 åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#65-åˆ†æå½“å‰ç¨‹åºå­˜åœ¨çš„é—®é¢˜">#</a></h2>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DaoImplçš„ä»£ç </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.dao.impl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.dao.AccountDao;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.pojo.Account;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.bank.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AccountDaoImpl <span style="color:#fff;font-weight:bold">implements</span> AccountDao {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Account selectByActno(String actno) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        Account act = (Account)sqlSession.<span style="color:#007f7f">selectOne</span>(<span style="color:#0ff;font-weight:bold">&#34;account.selectByActno&#34;</span>, actno);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> act;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> update(Account act) {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = SqlSessionUtil.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = sqlSession.<span style="color:#007f7f">update</span>(<span style="color:#0ff;font-weight:bold">&#34;account.update&#34;</span>, act);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œè¿™ä¸ªdaoå®ç°ç±»ä¸­çš„æ–¹æ³•ä»£ç å¾ˆå›ºå®šï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€è¡Œä»£ç ï¼Œé€šè¿‡SqlSessionå¯¹è±¡è°ƒç”¨insertã€deleteã€updateã€selectç­‰æ–¹æ³•ï¼Œè¿™ä¸ªç±»ä¸­çš„æ–¹æ³•æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œæ—¢ç„¶æ˜¯è¿™æ ·ï¼Œ<strong><font style="color:#E8323C;">è¿™ä¸ªç±»æˆ‘ä»¬èƒ½ä¸èƒ½åŠ¨æ€çš„ç”Ÿæˆ</font></strong>ï¼Œä»¥åå¯ä»¥ä¸å†™è¿™ä¸ªç±»å—ï¼Ÿç­”æ¡ˆï¼šå¯ä»¥ã€‚</p>
<h1 id="ä¸ƒä½¿ç”¨javassistç”Ÿæˆç±»">ä¸ƒã€ä½¿ç”¨javassistç”Ÿæˆç±»<a hidden class="anchor" aria-hidden="true" href="#ä¸ƒä½¿ç”¨javassistç”Ÿæˆç±»">#</a></h1>
<p>æ¥è‡ªç™¾åº¦ç™¾ç§‘ï¼š</p>
<blockquote>
<p>Javassistæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†æã€ç¼–è¾‘å’Œåˆ›å»ºJavaå­—èŠ‚ç çš„ç±»åº“ã€‚æ˜¯ç”±ä¸œäº¬å·¥ä¸šå¤§å­¦çš„æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ç³»çš„ Shigeru Chiba ï¼ˆåƒå¶ æ»‹ï¼‰æ‰€åˆ›å»ºçš„ã€‚å®ƒå·²åŠ å…¥äº†å¼€æ”¾æºä»£ç JBoss åº”ç”¨æœåŠ¡å™¨é¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Javassistå¯¹å­—èŠ‚ç æ“ä½œä¸ºJBosså®ç°åŠ¨æ€&quot;AOP&quot;æ¡†æ¶ã€‚</p>
</blockquote>
<h2 id="71-javassistçš„ä½¿ç”¨">7.1 Javassistçš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#71-javassistçš„ä½¿ç”¨">#</a></h2>
<p>æˆ‘ä»¬è¦ä½¿ç”¨javassistï¼Œé¦–å…ˆè¦å¼•å…¥å®ƒçš„ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>org.javassist<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>javassist<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>3.29.1-GA<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ·ä¾‹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.javassist;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javassist.ClassPool;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javassist.CtClass;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javassist.CtMethod;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> javassist.Modifier;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.lang.reflect.Method;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> JavassistTest {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–ç±»æ± </span>
</span></span><span style="display:flex;"><span>        ClassPool pool = ClassPool.<span style="color:#007f7f">getDefault</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ›å»ºç±»</span>
</span></span><span style="display:flex;"><span>        CtClass ctClass = pool.<span style="color:#007f7f">makeClass</span>(<span style="color:#0ff;font-weight:bold">&#34;com.powernode.javassist.Test&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ›å»ºæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// 1.è¿”å›å€¼ç±»å‹ 2.æ–¹æ³•å 3.å½¢å¼å‚æ•°åˆ—è¡¨ 4.æ‰€å±ç±»</span>
</span></span><span style="display:flex;"><span>        CtMethod ctMethod = <span style="color:#fff;font-weight:bold">new</span> CtMethod(CtClass.<span style="color:#007f7f">voidType</span>, <span style="color:#0ff;font-weight:bold">&#34;execute&#34;</span>, <span style="color:#fff;font-weight:bold">new</span> CtClass[]{}, ctClass);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è®¾ç½®æ–¹æ³•çš„ä¿®é¥°ç¬¦åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>        ctMethod.<span style="color:#007f7f">setModifiers</span>(Modifier.<span style="color:#007f7f">PUBLIC</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è®¾ç½®æ–¹æ³•ä½“</span>
</span></span><span style="display:flex;"><span>        ctMethod.<span style="color:#007f7f">setBody</span>(<span style="color:#0ff;font-weight:bold">&#34;{System.out.println(\&#34;hello world\&#34;);}&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç»™ç±»æ·»åŠ æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>        ctClass.<span style="color:#007f7f">addMethod</span>(ctMethod);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è°ƒç”¨æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>        Class&lt;?&gt; aClass = ctClass.<span style="color:#007f7f">toClass</span>();
</span></span><span style="display:flex;"><span>        Object o = aClass.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>        Method method = aClass.<span style="color:#007f7f">getDeclaredMethod</span>(<span style="color:#0ff;font-weight:bold">&#34;execute&#34;</span>);
</span></span><span style="display:flex;"><span>        method.<span style="color:#007f7f">invoke</span>(o);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œè¦æ³¨æ„ï¼šåŠ ä¸¤ä¸ªå‚æ•°ï¼Œè¦ä¸ç„¶ä¼šæœ‰å¼‚å¸¸ã€‚</p>
<ul>
<li>&ndash;add-opens java.base/java.lang=ALL-UNNAMED</li>
<li>&ndash;add-opens java.base/sun.net.util=ALL-UNNAMED</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4a7721954fec94a7a10c57166a6a6719_MD5.png"></p>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5c04f4ddb1ab0d0d6d5f2a19aae6ab28_MD5.png"></p>
<h2 id="72-ä½¿ç”¨javassistç”Ÿæˆdaoimplç±»">7.2 ä½¿ç”¨Javassistç”ŸæˆDaoImplç±»<a hidden class="anchor" aria-hidden="true" href="#72-ä½¿ç”¨javassistç”Ÿæˆdaoimplç±»">#</a></h2>
<p>ä½¿ç”¨JavassiståŠ¨æ€ç”ŸæˆDaoImplç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">95
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.bank.utils;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.javassist.CannotCompileException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.javassist.ClassPool;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.javassist.CtClass;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.javassist.CtMethod;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.lang.reflect.Constructor;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.lang.reflect.Method;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.lang.reflect.Modifier;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Arrays;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * ä½¿ç”¨javassiståº“åŠ¨æ€ç”Ÿæˆdaoæ¥å£çš„å®ç°ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GenerateDaoByJavassist {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®daoæ¥å£ç”Ÿæˆdaoæ¥å£çš„ä»£ç†å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param sqlSession   sqlä¼šè¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param daoInterface daoæ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return daoæ¥å£ä»£ç†å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Object getMapper(SqlSession sqlSession, Class daoInterface) {
</span></span><span style="display:flex;"><span>        ClassPool pool = ClassPool.<span style="color:#007f7f">getDefault</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç”Ÿæˆä»£ç†ç±»</span>
</span></span><span style="display:flex;"><span>        CtClass ctClass = pool.<span style="color:#007f7f">makeClass</span>(daoInterface.<span style="color:#007f7f">getPackageName</span>() + <span style="color:#0ff;font-weight:bold">&#34;.impl.&#34;</span> + daoInterface.<span style="color:#007f7f">getSimpleName</span>() + <span style="color:#0ff;font-weight:bold">&#34;Impl&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ¥å£</span>
</span></span><span style="display:flex;"><span>        CtClass ctInterface = pool.<span style="color:#007f7f">makeClass</span>(daoInterface.<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»£ç†ç±»å®ç°æ¥å£</span>
</span></span><span style="display:flex;"><span>        ctClass.<span style="color:#007f7f">addInterface</span>(ctInterface);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è·å–æ‰€æœ‰çš„æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>        Method[] methods = daoInterface.<span style="color:#007f7f">getDeclaredMethods</span>();
</span></span><span style="display:flex;"><span>        Arrays.<span style="color:#007f7f">stream</span>(methods).<span style="color:#007f7f">forEach</span>(method -&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ‹¼æ¥æ–¹æ³•çš„ç­¾å</span>
</span></span><span style="display:flex;"><span>            StringBuilder methodStr = <span style="color:#fff;font-weight:bold">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>            String returnTypeName = method.<span style="color:#007f7f">getReturnType</span>().<span style="color:#007f7f">getName</span>();
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(returnTypeName);
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>            String methodName = method.<span style="color:#007f7f">getName</span>();
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(methodName);
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;(&#34;</span>);
</span></span><span style="display:flex;"><span>            Class&lt;?&gt;[] parameterTypes = method.<span style="color:#007f7f">getParameterTypes</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = 0; i &lt; parameterTypes.<span style="color:#007f7f">length</span>; i++) {
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(parameterTypes[i].<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34; arg&#34;</span>);
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(i);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (i != parameterTypes.<span style="color:#007f7f">length</span> - 1) {
</span></span><span style="display:flex;"><span>                    methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;,&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;){&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// æ–¹æ³•ä½“å½“ä¸­çš„ä»£ç æ€ä¹ˆå†™ï¼Ÿ</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// è·å–sqlIdï¼ˆè¿™é‡Œéå¸¸é‡è¦ï¼šå› ä¸ºè¿™è¡Œä»£ç å¯¼è‡´ä»¥ånamespaceå¿…é¡»æ˜¯æ¥å£çš„å…¨é™å®šæ¥å£åï¼ŒsqlIdå¿…é¡»æ˜¯æ¥å£ä¸­æ–¹æ³•çš„æ–¹æ³•åã€‚ï¼‰</span>
</span></span><span style="display:flex;"><span>            String sqlId = daoInterface.<span style="color:#007f7f">getName</span>() + <span style="color:#0ff;font-weight:bold">&#34;.&#34;</span> + methodName;
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// è·å–SqlCommondType</span>
</span></span><span style="display:flex;"><span>            String sqlCommondTypeName = sqlSession.<span style="color:#007f7f">getConfiguration</span>().<span style="color:#007f7f">getMappedStatement</span>(sqlId).<span style="color:#007f7f">getSqlCommandType</span>().<span style="color:#007f7f">name</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;SELECT&#34;</span>.<span style="color:#007f7f">equals</span>(sqlCommondTypeName)) {
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;org.apache.ibatis.session.SqlSession sqlSession = com.powernode.bank.utils.SqlSessionUtil.openSession();&#34;</span>);
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;Object obj = sqlSession.selectOne(\&#34;&#34;</span> + sqlId + <span style="color:#0ff;font-weight:bold">&#34;\&#34;, arg0);&#34;</span>);
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;return (&#34;</span> + returnTypeName + <span style="color:#0ff;font-weight:bold">&#34;)obj;&#34;</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#0ff;font-weight:bold">&#34;UPDATE&#34;</span>.<span style="color:#007f7f">equals</span>(sqlCommondTypeName)) {
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;org.apache.ibatis.session.SqlSession sqlSession = com.powernode.bank.utils.SqlSessionUtil.openSession();&#34;</span>);
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;int count = sqlSession.update(\&#34;&#34;</span> + sqlId + <span style="color:#0ff;font-weight:bold">&#34;\&#34;, arg0);&#34;</span>);
</span></span><span style="display:flex;"><span>                methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;return count;&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            methodStr.<span style="color:#007f7f">append</span>(<span style="color:#0ff;font-weight:bold">&#34;}&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(methodStr);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// åˆ›å»ºCtMethodå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>                CtMethod ctMethod = CtMethod.<span style="color:#007f7f">make</span>(methodStr.<span style="color:#007f7f">toString</span>(), ctClass);
</span></span><span style="display:flex;"><span>                ctMethod.<span style="color:#007f7f">setModifiers</span>(Modifier.<span style="color:#007f7f">PUBLIC</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// å°†æ–¹æ³•æ·»åŠ åˆ°ç±»</span>
</span></span><span style="display:flex;"><span>                ctClass.<span style="color:#007f7f">addMethod</span>(ctMethod);
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">catch</span> (CannotCompileException e) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>            Class&lt;?&gt; aClass = ctClass.<span style="color:#007f7f">toClass</span>();
</span></span><span style="display:flex;"><span>            Constructor&lt;?&gt; defaultCon = aClass.<span style="color:#007f7f">getDeclaredConstructor</span>();
</span></span><span style="display:flex;"><span>            Object o = defaultCon.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> o;
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><font style="color:#E8323C;">ä¿®æ”¹AccountMapper.xmlæ–‡ä»¶ï¼šnamespaceå¿…é¡»æ˜¯daoæ¥å£çš„å…¨é™å®šåç§°ï¼Œidå¿…é¡»æ˜¯daoæ¥å£ä¸­çš„æ–¹æ³•åï¼š</font></strong></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.bank.dao.AccountDao&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByActno&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.bank.pojo.Account&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_act where actno = #{actno}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;update</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;update&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        update t_act set balance = #{balance} where actno = #{actno}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/update&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹serviceç±»ä¸­è·å–daoå¯¹è±¡çš„ä»£ç ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/47eb5019fa89e43151250ea28024a785_MD5.png"></p>
<p>å¯åŠ¨æœåŠ¡å™¨ï¼š<strong><font style="color:#E8323C;">å¯åŠ¨è¿‡ç¨‹ä¸­æ˜¾ç¤ºï¼ŒtomcatæœåŠ¡å™¨è‡ªåŠ¨æ·»åŠ äº†ä»¥ä¸‹çš„ä¸¤ä¸ªè¿è¡Œå‚æ•°ã€‚æ‰€ä»¥ä¸éœ€è¦å†å•ç‹¬é…ç½®ã€‚</font></strong></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/2ac846db1e9c4be37a26f842aaebe54d_MD5.png"></p>
<p>æµ‹è¯•å‰æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c5f9d3e1d6c16713a925c2a338afb6af_MD5.png"></p>
<p>æ‰“å¼€æµè§ˆå™¨æµ‹è¯•ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/b61dbbf75abf297d8346f0f14ba40b21_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5947f26aaf0802938990a05d1f45f5fb_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/715b69ca02d8f1a95a40b3cb4cba458a_MD5.png"></p>
<h1 id="å…«mybatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨">å…«ã€MyBatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#å…«mybatisä¸­æ¥å£ä»£ç†æœºåˆ¶åŠä½¿ç”¨">#</a></h1>
<p>å¥½æ¶ˆæ¯ï¼ï¼ï¼å…¶å®ä»¥ä¸Šæ‰€è®²å†…å®¹mybatiså†…éƒ¨å·²ç»å®ç°äº†ã€‚ç›´æ¥è°ƒç”¨ä»¥ä¸‹ä»£ç å³å¯è·å–daoæ¥å£çš„ä»£ç†ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>AccountDao accountDao = (AccountDao)sqlSession.<span style="color:#007f7f">getMapper</span>(AccountDao.<span style="color:#007f7f">class</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ä»¥ä¸Šä»£ç çš„å‰ææ˜¯ï¼š<strong><font style="color:#E8323C;">AccountMapper.xmlæ–‡ä»¶ä¸­çš„namespaceå¿…é¡»å’Œdaoæ¥å£çš„å…¨é™å®šåç§°ä¸€è‡´ï¼Œidå¿…é¡»å’Œdaoæ¥å£ä¸­æ–¹æ³•åä¸€è‡´ã€‚</font></strong></p>
<p>å°†serviceä¸­è·å–daoå¯¹è±¡çš„ä»£ç å†æ¬¡ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/3cb72d93f56911ef4b6571262e6b8b66_MD5.png"></p>
<p>æµ‹è¯•å‰æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7b51024c8d89b74266440aede65d387f_MD5.png"></p>
<p>æµ‹è¯•åæ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a759150329ba5eff1d9051278fe689fa_MD5.png"></p>
<h1 id="ä¹mybatiså°æŠ€å·§">ä¹ã€MyBatiså°æŠ€å·§<a hidden class="anchor" aria-hidden="true" href="#ä¹mybatiså°æŠ€å·§">#</a></h1>
<h2 id="91-å’Œ">9.1 #{}å’Œ$<a hidden class="anchor" aria-hidden="true" href="#91-å’Œ">#</a></h2>
<p>#{}ï¼šå…ˆç¼–è¯‘sqlè¯­å¥ï¼Œå†ç»™å ä½ç¬¦ä¼ å€¼ï¼Œåº•å±‚æ˜¯PreparedStatementå®ç°ã€‚å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ï¼Œæ¯”è¾ƒå¸¸ç”¨ã€‚</p>
<p>${}ï¼šå…ˆè¿›è¡Œsqlè¯­å¥æ‹¼æ¥ï¼Œç„¶åå†ç¼–è¯‘sqlè¯­å¥ï¼Œåº•å±‚æ˜¯Statementå®ç°ã€‚å­˜åœ¨sqlæ³¨å…¥ç°è±¡ã€‚åªæœ‰åœ¨éœ€è¦è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æƒ…å†µä¸‹æ‰ä¼šç”¨åˆ°ã€‚</p>
<p>éœ€æ±‚ï¼šæ ¹æ®car_typeæŸ¥è¯¢æ±½è½¦</p>
<p>æ¨¡å—åï¼šmybatis-005-antic</p>
<h3 id="ä½¿ç”¨">ä½¿ç”¨#<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨">#</a></h3>
<p>ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.powernode<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-005-antic<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--mybatisä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>3.5.10<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>8.0.30<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--junitä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--logbackä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;version&gt;</span>1.2.11<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.source&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;maven.compiler.target&gt;</span>17<span style="font-weight:bold">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>jdbc.propertiesæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#007f7f">jdbc.driver</span>=<span style="color:#0ff;font-weight:bold">com.mysql.cj.jdbc.Driver</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.url</span>=<span style="color:#0ff;font-weight:bold">jdbc:mysql://localhost:3306/powernode</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.username</span>=<span style="color:#0ff;font-weight:bold">root</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">jdbc.password</span>=<span style="color:#0ff;font-weight:bold">root</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>logback.xmlï¼Œå¯ä»¥æ‹·è´ä¹‹å‰çš„ï¼Œæ”¾åˆ°ç±»çš„æ ¹è·¯å¾„ä¸‹</p>
<p>utils</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.utils;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * MyBatiså·¥å…·ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SqlSessionUtil {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> SqlSessionFactory sqlSessionFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>            sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> ThreadLocal&lt;SqlSession&gt; local = <span style="color:#fff;font-weight:bold">new</span> ThreadLocal&lt;&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ¯è°ƒç”¨ä¸€æ¬¡openSession()å¯è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯æ”¯æŒè‡ªåŠ¨æäº¤ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return æ–°çš„ä¼šè¯å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> SqlSession openSession() {
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = local.<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>            local.<span style="color:#007f7f">set</span>(sqlSession);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sqlSession;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å…³é—­SqlSessionå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param sqlSession
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> close(SqlSession sqlSession){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (sqlSession != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        local.<span style="color:#007f7f">remove</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>pojo</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ™®é€šå®ä½“ç±»ï¼šæ±½è½¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Car {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String carNum;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String brand;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Double guidePrice;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String produceTime;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String carType;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ„é€ æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// set getæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// toStringæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>mapperæ¥å£</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * Carçš„sqlæ˜ å°„å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®car_numè·å–Car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param carType
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; selectByCarType(String carType);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>mybatis-config.xmlï¼Œæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.properties&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.driver}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.url}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.username}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.password}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;CarMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>CarMapper.xmlï¼Œæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼š<strong><font style="color:#E8323C;">æ³¨æ„namespaceå¿…é¡»å’Œæ¥å£åä¸€è‡´ã€‚idå¿…é¡»å’Œæ¥å£ä¸­æ–¹æ³•åä¸€è‡´</font></strong>ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCarType&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        where
</span></span><span style="display:flex;"><span>            car_type = #{carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * CarMapperæµ‹è¯•ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByCarType(){
</span></span><span style="display:flex;"><span>        CarMapper mapper = (CarMapper) SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/796039c31bb5611a5021af4e483b012c_MD5.png"></p>
<p>é€šè¿‡æ‰§è¡Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œsqlè¯­å¥ä¸­æ˜¯å¸¦æœ‰ ? çš„ï¼Œè¿™ä¸ª ? å°±æ˜¯å¤§å®¶åœ¨JDBCä¸­æ‰€å­¦çš„å ä½ç¬¦ï¼Œä¸“é—¨ç”¨æ¥æ¥æ”¶å€¼çš„ã€‚</p>
<p>æŠŠâ€œç‡ƒæ²¹è½¦â€ä»¥Stringç±»å‹çš„å€¼ï¼Œä¼ é€’ç»™ ?</p>
<p>è¿™å°±æ˜¯ #{}ï¼Œå®ƒä¼šå…ˆè¿›è¡Œsqlè¯­å¥çš„é¢„ç¼–è¯‘ï¼Œç„¶åå†ç»™å ä½ç¬¦ä¼ å€¼</p>
<h3 id="ä½¿ç”¨-1">ä½¿ç”¨$<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-1">#</a></h3>
<p>åŒæ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨${}æ¥å®Œæˆ</p>
<p>CarMapper.xmlæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCarType&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        where
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--car_type = #{carType}--&gt;</span>
</span></span><span style="display:flex;"><span>            car_type = ${carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡è¿è¡Œæµ‹è¯•ç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/6754d00e746d7147db4495b00dd45d8d_MD5.png"></p>
<p>å‡ºç°å¼‚å¸¸äº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿçœ‹çœ‹ç”Ÿæˆçš„sqlè¯­å¥ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5f397867d1f5107f52884977cb1d1839_MD5.png"></p>
<p>å¾ˆæ˜¾ç„¶ï¼Œ${} æ˜¯å…ˆè¿›è¡Œsqlè¯­å¥çš„æ‹¼æ¥ï¼Œç„¶åå†ç¼–è¯‘ï¼Œå‡ºç°è¯­æ³•é”™è¯¯æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º ç‡ƒæ²¹è½¦ æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨sqlè¯­å¥ä¸­åº”è¯¥æ·»åŠ å•å¼•å·</p>
<p>ä¿®æ”¹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCarType&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        where
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--car_type = #{carType}--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--car_type = ${carType}--&gt;</span>
</span></span><span style="display:flex;"><span>            car_type = &#39;${carType}&#39;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ‰§è¡Œæµ‹è¯•ç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/624313a43389ed688eaf2e5bb6cf4816_MD5.png"></p>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå¯¹äºä»¥ä¸Šè¿™ç§éœ€æ±‚æ¥è¯´ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ #{} çš„æ–¹å¼ã€‚</p>
<p>åŸåˆ™ï¼šèƒ½ç”¨ #{} å°±ä¸ç”¨ ${}</p>
<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨">ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨$<a hidden class="anchor" aria-hidden="true" href="#ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨">#</a></h3>
<p>å½“éœ€è¦è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ã€‚å¿…é¡»ä½¿ç”¨${}</p>
<p>éœ€æ±‚ï¼šé€šè¿‡å‘sqlè¯­å¥ä¸­æ³¨å…¥ascæˆ–descå…³é”®å­—ï¼Œæ¥å®Œæˆæ•°æ®çš„å‡åºæˆ–é™åºæ’åˆ—ã€‚</p>
<ul>
<li><strong>å…ˆä½¿ç”¨#{}å°è¯•ï¼š</strong></li>
</ul>
<p>CarMapperæ¥å£ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æŸ¥è¯¢æ‰€æœ‰çš„Car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param ascOrDesc ascæˆ–desc
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectAll(String ascOrDesc);
</span></span></code></pre></td></tr></table>
</div>
</div><p>CarMapper.xmlæ–‡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  t_car
</span></span><span style="display:flex;"><span>  order by carNum #{key}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAll(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = (CarMapper) SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectAll</span>(<span style="color:#0ff;font-weight:bold">&#34;desc&#34;</span>);
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ffcecff41e463b1feef749bd094737d4_MD5.png"></p>
<p>æŠ¥é”™çš„åŸå› æ˜¯sqlè¯­å¥ä¸åˆæ³•ï¼Œå› ä¸ºé‡‡ç”¨è¿™ç§æ–¹å¼ä¼ å€¼ï¼Œæœ€ç»ˆsqlè¯­å¥ä¼šæ˜¯è¿™æ ·ï¼š</p>
<p>select id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType from t_car order by carNum &lsquo;desc&rsquo;</p>
<p>descæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¸èƒ½å¸¦å•å¼•å·çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œsqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨${}</p>
<ul>
<li><strong>ä½¿ç”¨${} æ”¹é€ </strong></li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  t_car
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--order by carNum #{key}--&gt;</span>
</span></span><span style="display:flex;"><span>  order by carNum ${key}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡æ‰§è¡Œæµ‹è¯•ç¨‹åºï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5adad6f2e2600b9ebde34d3151d834e2_MD5.png"></p>
<h3 id="æ‹¼æ¥è¡¨å">æ‹¼æ¥è¡¨å<a hidden class="anchor" aria-hidden="true" href="#æ‹¼æ¥è¡¨å">#</a></h3>
<p>ä¸šåŠ¡èƒŒæ™¯ï¼šå®é™…å¼€å‘ä¸­ï¼Œæœ‰çš„è¡¨æ•°æ®é‡éå¸¸åºå¤§ï¼Œå¯èƒ½ä¼šé‡‡ç”¨åˆ†è¡¨æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¯”å¦‚æ¯å¤©ç”Ÿæˆä¸€å¼ è¡¨ï¼Œè¡¨çš„åå­—ä¸æ—¥æœŸæŒ‚é’©ï¼Œä¾‹å¦‚ï¼š2022å¹´8æœˆ1æ—¥ç”Ÿæˆçš„è¡¨ï¼št_user20220108ã€‚2000å¹´1æœˆ1æ—¥ç”Ÿæˆçš„è¡¨ï¼št_user20000101ã€‚æ­¤æ—¶å‰ç«¯åœ¨è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šæäº¤ä¸€ä¸ªå…·ä½“çš„æ—¥æœŸï¼Œæ¯”å¦‚å‰ç«¯æäº¤çš„æ—¥æœŸä¸ºï¼š2000å¹´1æœˆ1æ—¥ï¼Œé‚£ä¹ˆåç«¯å°±ä¼šæ ¹æ®è¿™ä¸ªæ—¥æœŸåŠ¨æ€æ‹¼æ¥è¡¨åä¸ºï¼št_user20000101ã€‚æœ‰äº†è¿™ä¸ªè¡¨åä¹‹åï¼Œå°†è¡¨åæ‹¼æ¥åˆ°sqlè¯­å¥å½“ä¸­ï¼Œè¿”å›æŸ¥è¯¢ç»“æœã€‚é‚£ä¹ˆå¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œæ‹¼æ¥è¡¨ååˆ°sqlè¯­å¥å½“ä¸­åº”è¯¥ä½¿ç”¨#{} è¿˜æ˜¯ ${} å‘¢ï¼Ÿ</p>
<p>ä½¿ç”¨#{}ä¼šæ˜¯è¿™æ ·ï¼šselect * from &rsquo;t_car&rsquo;</p>
<p>ä½¿ç”¨${}ä¼šæ˜¯è¿™æ ·ï¼šselect * from t_car</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllByTableName&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  ${tableName}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * æ ¹æ®è¡¨åæŸ¥è¯¢æ‰€æœ‰çš„Car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param tableName
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectAllByTableName(String tableName);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAllByTableName(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectAllByTableName</span>(<span style="color:#0ff;font-weight:bold">&#34;t_car&#34;</span>);
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/80043dceab72aa70a831666e201518b0_MD5.png"></p>
<h3 id="æ‰¹é‡åˆ é™¤">æ‰¹é‡åˆ é™¤<a hidden class="anchor" aria-hidden="true" href="#æ‰¹é‡åˆ é™¤">#</a></h3>
<p>ä¸šåŠ¡èƒŒæ™¯ï¼šä¸€æ¬¡åˆ é™¤å¤šæ¡è®°å½•ã€‚</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/34164d1101583ec04af27583e72c9e83_MD5.png"></p>
<p>å¯¹åº”çš„sqlè¯­å¥ï¼š</p>
<ul>
<li>delete from t_user where id = 1 or id = 2 or id = 3;</li>
<li>delete from t_user where id in(1, 2, 3);</li>
</ul>
<p>å‡è®¾ç°åœ¨ä½¿ç”¨inçš„æ–¹å¼å¤„ç†ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„å­—ç¬¦ä¸²ï¼š1, 2, 3</p>
<p>å¦‚æœä½¿ç”¨mybatiså¤„ç†ï¼Œåº”è¯¥ä½¿ç”¨#{} è¿˜æ˜¯ ${}</p>
<p>ä½¿ç”¨#{} ï¼šdelete from t_user where id in(&lsquo;1,2,3&rsquo;) <strong><font style="color:#E8323C;">æ‰§è¡Œé”™è¯¯ï¼š1292 - Truncated incorrect DOUBLE value: &lsquo;1,2,3&rsquo;</font></strong></p>
<p>ä½¿ç”¨${} ï¼šdelete from t_user where id in(1, 2, 3)</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®idæ‰¹é‡åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param ids
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> deleteBatch(String ids);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteBatch&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  delete from t_car where id in(${ids})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDeleteBatch(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">deleteBatch</span>(<span style="color:#0ff;font-weight:bold">&#34;1,2,3&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5e8379d66b39a27fad2f213f67de24ea_MD5.png"></p>
<h3 id="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢<a hidden class="anchor" aria-hidden="true" href="#æ¨¡ç³ŠæŸ¥è¯¢">#</a></h3>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢å¥”é©°ç³»åˆ—çš„æ±½è½¦ã€‚ã€åªè¦å“ç‰Œbrandä¸­å«æœ‰å¥”é©°ä¸¤ä¸ªå­—çš„éƒ½æŸ¥è¯¢å‡ºæ¥ã€‚ã€‘</p>
<h4 id="ä½¿ç”¨-2">ä½¿ç”¨$<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-2">#</a></h4>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®å“ç‰Œè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param likeBrank
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectLikeByBrand(String likeBrank);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectLikeByBrand&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  t_car
</span></span><span style="display:flex;"><span>  where
</span></span><span style="display:flex;"><span>  brand like &#39;%${brand}%&#39;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectLikeByBrand(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectLikeByBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;å¥”é©°&#34;</span>);
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ecc8f11c42042811a722ad6c22839e59_MD5.png"></p>
<h4 id="ä½¿ç”¨-3">ä½¿ç”¨#<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-3">#</a></h4>
<p>ç¬¬ä¸€ç§ï¼šconcatå‡½æ•°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectLikeByBrand&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  t_car
</span></span><span style="display:flex;"><span>  where
</span></span><span style="display:flex;"><span>  brand like concat(&#39;%&#39;,#{brand},&#39;%&#39;)
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/d2e13860dc06b592984bcca51e645917_MD5.png"></p>
<p>ç¬¬äºŒç§ï¼šåŒå¼•å·æ–¹å¼</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectLikeByBrand&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>  from
</span></span><span style="display:flex;"><span>  t_car
</span></span><span style="display:flex;"><span>  where
</span></span><span style="display:flex;"><span>  brand like &#34;%&#34;#{brand}&#34;%&#34;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7062bedd730026338c63952d8c2e803f_MD5.png"></p>
<h2 id="92-typealiases">9.2 typeAliases<a hidden class="anchor" aria-hidden="true" href="#92-typealiases">#</a></h2>
<p>æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹CarMapper.xmlä¸­çš„é…ç½®ä¿¡æ¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        order by carNum ${key}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCarType&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        where
</span></span><span style="display:flex;"><span>            car_type = &#39;${carType}&#39;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>resultTypeå±æ€§ç”¨æ¥æŒ‡å®šæŸ¥è¯¢ç»“æœé›†çš„å°è£…ç±»å‹ï¼Œè¿™ä¸ªåå­—å¤ªé•¿ï¼Œå¯ä»¥èµ·åˆ«åå—ï¼Ÿå¯ä»¥ã€‚</p>
<p>åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­ä½¿ç”¨typeAliasesæ ‡ç­¾æ¥èµ·åˆ«åï¼ŒåŒ…æ‹¬ä¸¤ç§æ–¹å¼ï¼š</p>
<h3 id="ç¬¬ä¸€ç§æ–¹å¼typealias">ç¬¬ä¸€ç§æ–¹å¼ï¼štypeAlias<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€ç§æ–¹å¼typealias">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;typeAliases&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;typeAlias</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo.Car&#34;</span> <span style="color:#007f7f">alias=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/typeAliases&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é¦–å…ˆè¦æ³¨æ„typeAliasesæ ‡ç­¾çš„æ”¾ç½®ä½ç½®ï¼Œå¦‚æœä¸æ¸…æ¥šçš„è¯ï¼Œå¯ä»¥çœ‹çœ‹é”™è¯¯æç¤ºä¿¡æ¯ã€‚</li>
<li>typeAliasesæ ‡ç­¾ä¸­çš„typeAliaså¯ä»¥å†™å¤šä¸ªã€‚</li>
<li>typeAliasï¼š
<ul>
<li>typeå±æ€§ï¼šæŒ‡å®šç»™å“ªä¸ªç±»èµ·åˆ«å</li>
<li>aliaså±æ€§ï¼šåˆ«åã€‚
<ul>
<li>aliaså±æ€§ä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœç¼ºçœçš„è¯ï¼Œtypeå±æ€§æŒ‡å®šçš„ç±»å‹åçš„ç®€ç±»åä½œä¸ºåˆ«åã€‚</li>
<li>aliasæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ã€‚ä¹Ÿå°±æ˜¯è¯´å‡è®¾alias=&ldquo;Car&rdquo;ï¼Œå†ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥CARï¼Œä¹Ÿå¯ä»¥carï¼Œä¹Ÿå¯ä»¥Carï¼Œéƒ½è¡Œã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ç¬¬äºŒç§æ–¹å¼package">ç¬¬äºŒç§æ–¹å¼ï¼špackage<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒç§æ–¹å¼package">#</a></h3>
<p>å¦‚æœä¸€ä¸ªåŒ…ä¸‹çš„ç±»å¤ªå¤šï¼Œæ¯ä¸ªç±»éƒ½è¦èµ·åˆ«åï¼Œä¼šå¯¼è‡´typeAliasæ ‡ç­¾é…ç½®è¾ƒå¤šï¼Œæ‰€ä»¥mybatisç”¨æä¾›packageçš„é…ç½®æ–¹å¼ï¼Œåªéœ€è¦æŒ‡å®šåŒ…åï¼Œè¯¥åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½è‡ªåŠ¨èµ·åˆ«åï¼Œåˆ«åå°±æ˜¯ç®€ç±»åã€‚å¹¶ä¸”åˆ«åä¸åŒºåˆ†å¤§å°å†™ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;typeAliases&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;package</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/typeAliases&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>packageä¹Ÿå¯ä»¥é…ç½®å¤šä¸ªçš„ã€‚</p>
<h3 id="åœ¨sqlæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹">åœ¨SQLæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹<a hidden class="anchor" aria-hidden="true" href="#åœ¨sqlæ˜ å°„æ–‡ä»¶ä¸­ç”¨ä¸€ä¸‹">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;CAR&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        order by carNum ${key}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCarType&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select
</span></span><span style="display:flex;"><span>            id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType
</span></span><span style="display:flex;"><span>        from
</span></span><span style="display:flex;"><span>            t_car
</span></span><span style="display:flex;"><span>        where
</span></span><span style="display:flex;"><span>            car_type = &#39;${carType}&#39;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œæµ‹è¯•ç¨‹åºï¼šæ­£å¸¸ã€‚</p>
<h2 id="93-mappers">9.3 mappers<a hidden class="anchor" aria-hidden="true" href="#93-mappers">#</a></h2>
<p>SQLæ˜ å°„æ–‡ä»¶çš„é…ç½®æ–¹å¼åŒ…æ‹¬å››ç§ï¼š</p>
<ul>
<li>resourceï¼šä»ç±»è·¯å¾„ä¸­åŠ è½½</li>
<li>urlï¼šä»æŒ‡å®šçš„å…¨é™å®šèµ„æºè·¯å¾„ä¸­åŠ è½½</li>
<li>classï¼šä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</li>
<li>packageï¼šå°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</li>
</ul>
<h3 id="resource">resource<a hidden class="anchor" aria-hidden="true" href="#resource">#</a></h3>
<p>è¿™ç§æ–¹å¼æ˜¯ä»ç±»è·¯å¾„ä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼è¦æ±‚SQLæ˜ å°„æ–‡ä»¶å¿…é¡»æ”¾åœ¨resourcesç›®å½•ä¸‹æˆ–å…¶å­ç›®å½•ä¸‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;org/mybatis/builder/AuthorMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;org/mybatis/builder/BlogMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;org/mybatis/builder/PostMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="url">url<a hidden class="anchor" aria-hidden="true" href="#url">#</a></h3>
<p>è¿™ç§æ–¹å¼æ˜¾ç„¶ä½¿ç”¨äº†ç»å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œè¿™ç§é…ç½®å¯¹SQLæ˜ å°„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®æ²¡æœ‰è¦æ±‚ï¼Œéšæ„ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">url=</span><span style="color:#0ff;font-weight:bold">&#34;file:///var/mappers/AuthorMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">url=</span><span style="color:#0ff;font-weight:bold">&#34;file:///var/mappers/BlogMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">url=</span><span style="color:#0ff;font-weight:bold">&#34;file:///var/mappers/PostMapper.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="class">class<a hidden class="anchor" aria-hidden="true" href="#class">#</a></h3>
<p>å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>SQLæ˜ å°„æ–‡ä»¶å’Œmapperæ¥å£æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚</li>
<li>SQLæ˜ å°„æ–‡ä»¶çš„åå­—ä¹Ÿå¿…é¡»å’Œmapperæ¥å£åä¸€è‡´ã€‚</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.mybatis.builder.AuthorMapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.mybatis.builder.BlogMapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.mybatis.builder.PostMapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°†CarMapper.xmlæ–‡ä»¶ç§»åŠ¨åˆ°å’Œmapperæ¥å£åŒä¸€ä¸ªç›®å½•ä¸‹ï¼š</p>
<ul>
<li>åœ¨resourcesç›®å½•ä¸‹æ–°å»ºï¼šcom/powernode/mybatis/mapperã€è¿™é‡Œåƒä¸‡è¦æ³¨æ„ï¼š<strong><font style="color:#F5222D;">ä¸èƒ½è¿™æ ·æ–°å»º com.powernode.mybatis.dao</font></strong>ã€‘</li>
<li>å°†CarMapper.xmlæ–‡ä»¶ç§»åŠ¨åˆ°mapperç›®å½•ä¸‹</li>
<li>ä¿®æ”¹mybatis-config.xmlæ–‡ä»¶</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç¨‹åºï¼šæ­£å¸¸ï¼ï¼ï¼</p>
<h3 id="package">package<a hidden class="anchor" aria-hidden="true" href="#package">#</a></h3>
<p>å¦‚æœclassè¾ƒå¤šï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§packageçš„æ–¹å¼ï¼Œä½†å‰ææ¡ä»¶å’Œä¸Šä¸€ç§æ–¹å¼ä¸€æ ·ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;package</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="94-ideaé…ç½®æ–‡ä»¶æ¨¡æ¿">9.4 ideaé…ç½®æ–‡ä»¶æ¨¡æ¿<a hidden class="anchor" aria-hidden="true" href="#94-ideaé…ç½®æ–‡ä»¶æ¨¡æ¿">#</a></h2>
<p>mybatis-config.xmlå’ŒSqlMapper.xmlæ–‡ä»¶å¯ä»¥åœ¨IDEAä¸­æå‰åˆ›å»ºå¥½æ¨¡æ¿ï¼Œä»¥åé€šè¿‡æ¨¡æ¿åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/fe84d5e731b1422a035bbc2638297833_MD5.png"></p>
<h2 id="95-æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®">9.5 æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®<a hidden class="anchor" aria-hidden="true" href="#95-æ’å…¥æ•°æ®æ—¶è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®">#</a></h2>
<p>å‰ææ˜¯ï¼šä¸»é”®æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<p>ä¸šåŠ¡èƒŒæ™¯ï¼šä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè§’è‰²ã€‚</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/024da6f951b133d78316bcc1cef100bd_MD5.png"></p>
<p>æ’å…¥ä¸€æ¡æ–°çš„è®°å½•ä¹‹åï¼Œè‡ªåŠ¨ç”Ÿæˆäº†ä¸»é”®ï¼Œè€Œè¿™ä¸ªä¸»é”®éœ€è¦åœ¨å…¶ä»–è¡¨ä¸­ä½¿ç”¨æ—¶ã€‚</p>
<p>æ’å…¥ä¸€ä¸ªç”¨æˆ·æ•°æ®çš„åŒæ—¶éœ€è¦ç»™è¯¥ç”¨æˆ·åˆ†é…è§’è‰²ï¼šéœ€è¦å°†ç”Ÿæˆçš„ç”¨æˆ·çš„idæ’å…¥åˆ°è§’è‰²è¡¨çš„user_idå­—æ®µä¸Šã€‚</p>
<p>ç¬¬ä¸€ç§æ–¹å¼ï¼šå¯ä»¥å…ˆæ’å…¥ç”¨æˆ·æ•°æ®ï¼Œå†å†™ä¸€æ¡æŸ¥è¯¢è¯­å¥è·å–idï¼Œç„¶åå†æ’å…¥user_idå­—æ®µã€‚ã€æ¯”è¾ƒéº»çƒ¦ã€‘</p>
<p>ç¬¬äºŒç§æ–¹å¼ï¼šmybatisæä¾›äº†ä¸€ç§æ–¹å¼æ›´åŠ ä¾¿æ·ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> insertUseGeneratedKeys(Car car);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUseGeneratedKeys&#34;</span> <span style="color:#007f7f">useGeneratedKeys=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">keyProperty=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) values(null,#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertUseGeneratedKeys(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car();
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarNum</span>(<span style="color:#0ff;font-weight:bold">&#34;5262&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setBrand</span>(<span style="color:#0ff;font-weight:bold">&#34;BYDæ±‰&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setGuidePrice</span>(30.<span style="color:#007f7f">3</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setProduceTime</span>(<span style="color:#0ff;font-weight:bold">&#34;2020-10-11&#34;</span>);
</span></span><span style="display:flex;"><span>    car.<span style="color:#007f7f">setCarType</span>(<span style="color:#0ff;font-weight:bold">&#34;æ–°èƒ½æº&#34;</span>);
</span></span><span style="display:flex;"><span>    mapper.<span style="color:#007f7f">insertUseGeneratedKeys</span>(car);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car.<span style="color:#007f7f">getId</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="åmybatiså‚æ•°å¤„ç†">åã€MyBatiså‚æ•°å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#åmybatiså‚æ•°å¤„ç†">#</a></h1>
<p>æ¨¡å—åï¼šmybatis-006-param</p>
<p>è¡¨ï¼št_student</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a4fe666a065d72773176e1f911e0a920_MD5.png"></p>
<p>è¡¨ä¸­ç°æœ‰æ•°æ®ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c82f72f941a9ec84946693e199f02e88_MD5.png"></p>
<p>pojoç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * å­¦ç”Ÿç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Student {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Long id;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer age;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Double height;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Character sex;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Date birth;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// constructor</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// setter and getter</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// toString</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="101-å•ä¸ªç®€å•ç±»å‹å‚æ•°">10.1 å•ä¸ªç®€å•ç±»å‹å‚æ•°<a hidden class="anchor" aria-hidden="true" href="#101-å•ä¸ªç®€å•ç±»å‹å‚æ•°">#</a></h2>
<p>ç®€å•ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>byte short int long float double char</li>
<li>Byte Short Integer Long Float Double Character</li>
<li>String</li>
<li>java.util.Date</li>
<li>java.sql.Date</li>
</ul>
<p>éœ€æ±‚ï¼šæ ¹æ®nameæŸ¥ã€æ ¹æ®idæŸ¥ã€æ ¹æ®birthæŸ¥ã€æ ¹æ®sexæŸ¥</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Student;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Date;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * å­¦ç”Ÿæ•°æ®Sqlæ˜ å°„å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> StudentMapper {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®nameæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param name
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; selectByName(String name);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®idæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Student selectById(Long id);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®birthæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param birth
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; selectByBirth(Date birth);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®sexæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param sex
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; selectBySex(Character sex);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.StudentMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByName&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_student where name = #{name}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_student where id = #{id}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByBirth&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_student where birth = #{birth}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectBySex&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_student where sex = #{sex}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.StudentMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Student;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.text.ParseException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.text.SimpleDateFormat;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Date;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StudentMapperTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    StudentMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(StudentMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByName(){
</span></span><span style="display:flex;"><span>        List&lt;Student&gt; students = mapper.<span style="color:#007f7f">selectByName</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>);
</span></span><span style="display:flex;"><span>        students.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById(){
</span></span><span style="display:flex;"><span>        Student student = mapper.<span style="color:#007f7f">selectById</span>(2L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByBirth(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            Date birth = <span style="color:#fff;font-weight:bold">new</span> SimpleDateFormat(<span style="color:#0ff;font-weight:bold">&#34;yyyy-MM-dd&#34;</span>).<span style="color:#007f7f">parse</span>(<span style="color:#0ff;font-weight:bold">&#34;2022-08-16&#34;</span>);
</span></span><span style="display:flex;"><span>            List&lt;Student&gt; students = mapper.<span style="color:#007f7f">selectByBirth</span>(birth);
</span></span><span style="display:flex;"><span>            students.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (ParseException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectBySex(){
</span></span><span style="display:flex;"><span>        List&lt;Student&gt; students = mapper.<span style="color:#007f7f">selectBySex</span>(<span style="color:#0ff;font-weight:bold">&#39;ç”·&#39;</span>);
</span></span><span style="display:flex;"><span>        students.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼Œç®€å•ç±»å‹å¯¹äºmybatisæ¥è¯´éƒ½æ˜¯å¯ä»¥è‡ªåŠ¨ç±»å‹è¯†åˆ«çš„ï¼š</p>
<ul>
<li>ä¹Ÿå°±æ˜¯è¯´å¯¹äºmybatisæ¥è¯´ï¼Œå®ƒæ˜¯å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºps.setXxxx()æ–¹æ³•çš„ã€‚ps.setString()è¿˜æ˜¯ps.setInt()ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æ¨æ–­ã€‚</li>
</ul>
<p>å…¶å®SQLæ˜ å°„æ–‡ä»¶ä¸­çš„é…ç½®æ¯”è¾ƒå®Œæ•´çš„å†™æ³•æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByName&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span> <span style="color:#007f7f">parameterType=</span><span style="color:#0ff;font-weight:bold">&#34;java.lang.String&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{name, javaType=String, jdbcType=VARCHAR}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­sqlè¯­å¥ä¸­çš„javaTypeï¼ŒjdbcTypeï¼Œä»¥åŠselectæ ‡ç­¾ä¸­çš„parameterTypeå±æ€§ï¼Œéƒ½æ˜¯ç”¨æ¥å¸®åŠ©mybatisè¿›è¡Œç±»å‹ç¡®å®šçš„ã€‚ä¸è¿‡è¿™äº›é…ç½®å¤šæ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚å› ä¸ºmybatiså®ƒæœ‰å¼ºå¤§çš„è‡ªåŠ¨ç±»å‹æ¨æ–­æœºåˆ¶ã€‚</p>
<ul>
<li>javaTypeï¼šå¯ä»¥çœç•¥</li>
<li>jdbcTypeï¼šå¯ä»¥çœç•¥</li>
<li>parameterTypeï¼šå¯ä»¥çœç•¥</li>
</ul>
<p><strong><font style="color:#F5222D;">å¦‚æœå‚æ•°åªæœ‰ä¸€ä¸ªçš„è¯ï¼Œ#{} é‡Œé¢çš„å†…å®¹å°±éšä¾¿å†™äº†ã€‚å¯¹äº ${} æ¥è¯´ï¼Œæ³¨æ„åŠ å•å¼•å·ã€‚</font></strong></p>
<h2 id="102-mapå‚æ•°">10.2 Mapå‚æ•°<a hidden class="anchor" aria-hidden="true" href="#102-mapå‚æ•°">#</a></h2>
<p>éœ€æ±‚ï¼šæ ¹æ®nameå’ŒageæŸ¥è¯¢</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ ¹æ®nameå’ŒageæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param paramMap
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Student&gt; selectByParamMap(Map&lt;String,Object&gt; paramMap);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByParamMap(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å‡†å¤‡Map</span>
</span></span><span style="display:flex;"><span>    Map&lt;String,Object&gt; paramMap = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>    paramMap.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;nameKey&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>);
</span></span><span style="display:flex;"><span>    paramMap.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;ageKey&#34;</span>, 20);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; students = mapper.<span style="color:#007f7f">selectByParamMap</span>(paramMap);
</span></span><span style="display:flex;"><span>    students.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByParamMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{nameKey} and age = #{ageKey}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•è¿è¡Œæ­£å¸¸ã€‚</p>
<p><strong><font style="color:#E8323C;">è¿™ç§æ–¹å¼æ˜¯æ‰‹åŠ¨å°è£…Mapé›†åˆï¼Œå°†æ¯ä¸ªæ¡ä»¶ä»¥keyå’Œvalueçš„å½¢å¼å­˜æ”¾åˆ°é›†åˆä¸­ã€‚ç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™é€šè¿‡#{mapé›†åˆçš„key}æ¥å–å€¼ã€‚</font></strong></p>
<h2 id="103-å®ä½“ç±»å‚æ•°">10.3 å®ä½“ç±»å‚æ•°<a hidden class="anchor" aria-hidden="true" href="#103-å®ä½“ç±»å‚æ•°">#</a></h2>
<p>éœ€æ±‚ï¼šæ’å…¥ä¸€æ¡Studentæ•°æ®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * ä¿å­˜å­¦ç”Ÿæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param student
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> insert(Student student);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insert&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_student values(null,#{name},#{age},#{height},#{birth},#{sex})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsert(){
</span></span><span style="display:flex;"><span>    Student student = <span style="color:#fff;font-weight:bold">new</span> Student();
</span></span><span style="display:flex;"><span>    student.<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;æå››&#34;</span>);
</span></span><span style="display:flex;"><span>    student.<span style="color:#007f7f">setAge</span>(30);
</span></span><span style="display:flex;"><span>    student.<span style="color:#007f7f">setHeight</span>(1.<span style="color:#007f7f">70</span>);
</span></span><span style="display:flex;"><span>    student.<span style="color:#007f7f">setSex</span>(<span style="color:#0ff;font-weight:bold">&#39;ç”·&#39;</span>);
</span></span><span style="display:flex;"><span>    student.<span style="color:#007f7f">setBirth</span>(<span style="color:#fff;font-weight:bold">new</span> Date());
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">insert</span>(student);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œæ­£å¸¸ï¼Œæ•°æ®åº“ä¸­æˆåŠŸæ·»åŠ ä¸€æ¡æ•°æ®ã€‚</p>
<p><strong><font style="color:#E8323C;">è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š#{} é‡Œé¢å†™çš„æ˜¯å±æ€§åå­—ã€‚è¿™ä¸ªå±æ€§åå…¶æœ¬è´¨ä¸Šæ˜¯ï¼šset/getæ–¹æ³•åå»æ‰set/getä¹‹åçš„åå­—ã€‚</font></strong></p>
<h2 id="104-å¤šå‚æ•°">10.4 å¤šå‚æ•°<a hidden class="anchor" aria-hidden="true" href="#104-å¤šå‚æ•°">#</a></h2>
<p>éœ€æ±‚ï¼šé€šè¿‡nameå’ŒsexæŸ¥è¯¢</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®nameå’ŒsexæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param name
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param sex
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; selectByNameAndSex(String name, Character sex);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByNameAndSex(){
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; students = mapper.<span style="color:#007f7f">selectByNameAndSex</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>, <span style="color:#0ff;font-weight:bold">&#39;å¥³&#39;</span>);
</span></span><span style="display:flex;"><span>    students.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByNameAndSex&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{name} and sex = #{sex}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/1ba02b67acb3036aa848c12a06db120d_MD5.png"></p>
<p>å¼‚å¸¸ä¿¡æ¯æè¿°äº†ï¼šnameå‚æ•°æ‰¾ä¸åˆ°ï¼Œå¯ç”¨çš„å‚æ•°åŒ…æ‹¬[arg1, arg0, param1, param2]</p>
<p>ä¿®æ”¹StudentMapper.xmlé…ç½®æ–‡ä»¶ï¼šå°è¯•ä½¿ç”¨[arg1, arg0, param1, param2]å»å‚æ•°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByNameAndSex&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--select * from t_student where name = #{name} and sex = #{sex}--&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{arg0} and sex = #{arg1}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/b8328d8a746fffd426bdaeb1de343d54_MD5.png"></p>
<p>å†æ¬¡å°è¯•ä¿®æ”¹StudentMapper.xmlæ–‡ä»¶</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByNameAndSex&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--select * from t_student where name = #{name} and sex = #{sex}--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--select * from t_student where name = #{arg0} and sex = #{arg1}--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--select * from t_student where name = #{param1} and sex = #{param2}--&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{arg0} and sex = #{param2}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>arg0 æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li>
<li>param1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li>
<li>arg1 æ˜¯ç¬¬äºŒä¸ªå‚æ•°</li>
<li>param2æ˜¯ç¬¬äºŒä¸ªå‚æ•°</li>
</ul>
<p>å®ç°åŸç†ï¼š<strong><font style="color:#E8323C;">å®é™…ä¸Šåœ¨mybatisåº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªmapé›†åˆï¼Œä»¥arg0/param1ä¸ºkeyï¼Œä»¥æ–¹æ³•ä¸Šçš„å‚æ•°ä¸ºvalue</font></strong>ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;String,Object&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;arg0&#34;</span>, name);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;arg1&#34;</span>, sex);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;param1&#34;</span>, name);
</span></span><span style="display:flex;"><span>map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;param2&#34;</span>, sex);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// æ‰€ä»¥å¯ä»¥è¿™æ ·å–å€¼ï¼š#{arg0} #{arg1} #{param1} #{param2}</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å…¶æœ¬è´¨å°±æ˜¯#{mapé›†åˆçš„key}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼š<strong><font style="color:#E8323C;">ä½¿ç”¨mybatis</font>****<font style="color:#E8323C;">3.4.2ä¹‹å‰çš„ç‰ˆæœ¬æ—¶ï¼šè¦ç”¨#{0}å’Œ#{1}è¿™ç§å½¢å¼ã€‚</font></strong></p>
<h2 id="105-paramæ³¨è§£å‘½åå‚æ•°">10.5 @Paramæ³¨è§£ï¼ˆå‘½åå‚æ•°ï¼‰<a hidden class="anchor" aria-hidden="true" href="#105-paramæ³¨è§£å‘½åå‚æ•°">#</a></h2>
<p>å¯ä»¥ä¸ç”¨arg0 arg1 param1 param2å—ï¼Ÿè¿™ä¸ªmapé›†åˆçš„keyæˆ‘ä»¬è‡ªå®šä¹‰å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ã€‚ä½¿ç”¨@Paramæ³¨è§£å³å¯ã€‚è¿™æ ·å¯ä»¥å¢å¼ºå¯è¯»æ€§ã€‚</p>
<p>éœ€æ±‚ï¼šæ ¹æ®nameå’ŒageæŸ¥è¯¢</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®nameå’ŒageæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param name
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param age
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Student&gt; selectByNameAndAge(@Param(value=<span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>) String name, @Param(<span style="color:#0ff;font-weight:bold">&#34;age&#34;</span>) <span style="color:#fff;font-weight:bold">int</span> age);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByNameAndAge(){
</span></span><span style="display:flex;"><span>        List&lt;Student&gt; stus = mapper.<span style="color:#007f7f">selectByNameAndAge</span>(<span style="color:#0ff;font-weight:bold">&#34;å¼ ä¸‰&#34;</span>, 20);
</span></span><span style="display:flex;"><span>        stus.<span style="color:#007f7f">forEach</span>(student -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student));
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByNameAndAge&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where name = #{name} and age = #{age}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>æ ¸å¿ƒï¼š@Param(&rdquo;<strong><font style="color:#E8323C;">è¿™é‡Œå¡«å†™çš„å…¶å®å°±æ˜¯mapé›†åˆçš„key</font></strong>&quot;)</p>
<h2 id="106-paramæºç åˆ†æ">10.6 @Paramæºç åˆ†æ<a hidden class="anchor" aria-hidden="true" href="#106-paramæºç åˆ†æ">#</a></h2>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/3cd2212446620cf2556af59501b8d163_MD5.png"></p>
<h1 id="åä¸€mybatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜">åä¸€ã€MyBatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜<a hidden class="anchor" aria-hidden="true" href="#åä¸€mybatisæŸ¥è¯¢è¯­å¥ä¸“é¢˜">#</a></h1>
<p>æ¨¡å—åï¼šmybatis-007-select</p>
<p>æ‰“åŒ…æ–¹å¼ï¼šjar</p>
<p>å¼•å…¥ä¾èµ–ï¼šmysqlé©±åŠ¨ä¾èµ–ã€mybatisä¾èµ–ã€logbackä¾èµ–ã€junitä¾èµ–ã€‚</p>
<p>å¼•å…¥é…ç½®æ–‡ä»¶ï¼šjdbc.propertiesã€mybatis-config.xmlã€logback.xml</p>
<p>åˆ›å»ºpojoç±»ï¼šCar</p>
<p>åˆ›å»ºMapperæ¥å£ï¼šCarMapper</p>
<p>åˆ›å»ºMapperæ¥å£å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼šcom/powernode/mybatis/mapper/CarMapper.xml</p>
<p>åˆ›å»ºå•å…ƒæµ‹è¯•ï¼šCarMapperTest</p>
<p>æ‹·è´å·¥å…·ç±»ï¼šSqlSessionUtil</p>
<h2 id="111-è¿”å›car">11.1 è¿”å›Car<a hidden class="anchor" aria-hidden="true" href="#111-è¿”å›car">#</a></h2>
<p>å½“æŸ¥è¯¢çš„ç»“æœï¼Œæœ‰å¯¹åº”çš„å®ä½“ç±»ï¼Œå¹¶ä¸”æŸ¥è¯¢ç»“æœåªæœ‰ä¸€æ¡æ—¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * Car SQLæ˜ å°„å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®idä¸»é”®æŸ¥è¯¢ï¼šç»“æœæœ€å¤šåªæœ‰ä¸€æ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Car selectById(Long id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #{id}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById(){
</span></span><span style="display:flex;"><span>        CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car = mapper.<span style="color:#007f7f">selectById</span>(35L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/b905fa09bdd7da08d645184001990242_MD5.png"></p>
<p><strong><font style="color:#E8323C;">æŸ¥è¯¢ç»“æœæ˜¯ä¸€æ¡çš„è¯å¯ä»¥ä½¿ç”¨Listé›†åˆæ¥æ”¶å—ï¼Ÿå½“ç„¶å¯ä»¥</font></strong>ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ ¹æ®idä¸»é”®æŸ¥è¯¢ï¼šç»“æœæœ€å¤šåªæœ‰ä¸€æ¡ï¼Œå¯ä»¥æ”¾åˆ°Listé›†åˆä¸­å—ï¼Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectByIdToList(Long id);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByIdToList&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByIdToList(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByIdToList</span>(35L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/9ea57145fc07af9cc64159de9072f22d_MD5.png"></p>
<h2 id="112-è¿”å›listcar">11.2 è¿”å›<code>List&lt;Car&gt;</code><a hidden class="anchor" aria-hidden="true" href="#112-è¿”å›listcar">#</a></h2>
<p>å½“æŸ¥è¯¢çš„è®°å½•æ¡æ•°æ˜¯å¤šæ¡çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨é›†åˆæ¥æ”¶ã€‚å¦‚æœä½¿ç”¨å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æŸ¥è¯¢æ‰€æœ‰çš„Car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectAll();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAll(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectAll</span>();
</span></span><span style="display:flex;"><span>    cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a703d51271067aaba9dfe9d26a924541_MD5.png"></p>
<p>å¦‚æœè¿”å›å¤šæ¡è®°å½•ï¼Œé‡‡ç”¨å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šæ€æ ·ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æŸ¥è¯¢å¤šæ¡è®°å½•ï¼Œé‡‡ç”¨å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šæ€æ ·ï¼Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>Car selectAll2();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll2&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAll2(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car = mapper.<span style="color:#007f7f">selectAll2</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/163e039c4a4e9021c17fad6ad9a42d49_MD5.png"></p>
<h2 id="113-è¿”å›map">11.3 è¿”å›Map<a hidden class="anchor" aria-hidden="true" href="#113-è¿”å›map">#</a></h2>
<p>å½“è¿”å›çš„æ•°æ®ï¼Œæ²¡æœ‰åˆé€‚çš„å®ä½“ç±»å¯¹åº”çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨Mapé›†åˆæ¥æ”¶ã€‚å­—æ®µååškeyï¼Œå­—æ®µå€¼åšvalueã€‚</p>
<p>æŸ¥è¯¢å¦‚æœå¯ä»¥ä¿è¯åªæœ‰ä¸€æ¡æ•°æ®ï¼Œåˆ™è¿”å›ä¸€ä¸ªMapé›†åˆå³å¯ã€‚</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/14a3323e2d0f53dd0d01bd45ae95f501_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * é€šè¿‡idæŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œè¿”å›Mapé›†åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>Map&lt;String, Object&gt; selectByIdRetMap(Long id);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByIdRetMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><font style="color:#E8323C;">resultMap=&ldquo;map&rdquo;ï¼Œè¿™æ˜¯å› ä¸ºmybatiså†…ç½®äº†å¾ˆå¤šåˆ«åã€‚ã€å‚è§mybatiså¼€å‘æ‰‹å†Œã€‘</font></strong></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByIdRetMap(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Map&lt;String,Object&gt; car = mapper.<span style="color:#007f7f">selectByIdRetMap</span>(35L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/d351c7c822ace9638ac60cef583a0cfd_MD5.png"></p>
<p>å½“ç„¶ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªMapé›†åˆï¼Œå¯ä»¥å°†Mapé›†åˆæ”¾åˆ°Listé›†åˆä¸­å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè¿™é‡Œå°±ä¸å†æµ‹è¯•äº†ã€‚</p>
<p>åè¿‡æ¥ï¼Œå¦‚æœè¿”å›çš„ä¸æ˜¯ä¸€æ¡è®°å½•ï¼Œæ˜¯å¤šæ¡è®°å½•çš„è¯ï¼Œåªé‡‡ç”¨å•ä¸ªMapé›†åˆæ¥æ”¶ï¼Œè¿™æ ·åŒæ ·ä¼šå‡ºç°ä¹‹å‰çš„å¼‚å¸¸ï¼š<strong><font style="color:#E8323C;">TooManyResultsException</font></strong></p>
<h2 id="114-è¿”å›listmap">11.4 è¿”å›<code>List&lt;Map&gt;</code><a hidden class="anchor" aria-hidden="true" href="#114-è¿”å›listmap">#</a></h2>
<p>æŸ¥è¯¢ç»“æœæ¡æ•°å¤§äºç­‰äº1æ¡æ•°æ®ï¼Œåˆ™å¯ä»¥è¿”å›ä¸€ä¸ªå­˜å‚¨Mapé›†åˆçš„Listé›†åˆã€‚<code>List&lt;Map&gt;</code>ç­‰åŒäº<code>List&lt;Car&gt;</code></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/f9da85044de700d9bf374b4e372e4fac_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æŸ¥è¯¢æ‰€æœ‰çš„Carï¼Œè¿”å›ä¸€ä¸ªListé›†åˆã€‚Listé›†åˆä¸­å­˜å‚¨çš„æ˜¯Mapé›†åˆã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>List&lt;Map&lt;String,Object&gt;&gt; selectAllRetListMap();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllRetListMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAllRetListMap(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Map&lt;String,Object&gt;&gt; cars = mapper.<span style="color:#007f7f">selectAllRetListMap</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=103,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-10-01,</span> <span style="color:#f00">id=33,</span> <span style="color:#f00">brand=å¥”é©°E300L</span>}, 
</span></span><span style="display:flex;"><span>  {<span style="color:#f00">carType=ç”µè½¦,</span> <span style="color:#f00">carNum=102,</span> <span style="color:#f00">guidePrice=30.23,</span> <span style="color:#f00">produceTime=2018-09-10,</span> <span style="color:#f00">id=34,</span> <span style="color:#f00">brand=æ¯”äºšè¿ªæ±‰</span>}, 
</span></span><span style="display:flex;"><span>  {<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=103,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-10-01,</span> <span style="color:#f00">id=35,</span> <span style="color:#f00">brand=å¥”é©°E300L</span>}, 
</span></span><span style="display:flex;"><span>  {<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=103,</span> <span style="color:#f00">guidePrice=33.23,</span> <span style="color:#f00">produceTime=2020-10-11,</span> <span style="color:#f00">id=36,</span> <span style="color:#f00">brand=å¥”é©°C200</span>},
</span></span><span style="display:flex;"><span>  <span style="color:#f00">......</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="115-è¿”å›mapstringmap">11.5 è¿”å›<code>Map&lt;String,Map&gt;</code><a hidden class="anchor" aria-hidden="true" href="#115-è¿”å›mapstringmap">#</a></h2>
<p><strong><font style="color:#E8323C;">æ‹¿Carçš„idåškeyï¼Œä»¥åå–å‡ºå¯¹åº”çš„Mapé›†åˆæ—¶æ›´æ–¹ä¾¿ã€‚</font></strong></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ab9cae389832ca9b8a7dc733b8cd9535_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–æ‰€æœ‰çš„Carï¼Œè¿”å›ä¸€ä¸ªMapé›†åˆã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * Mapé›†åˆçš„keyæ˜¯Carçš„idã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * Mapé›†åˆçš„valueæ˜¯å¯¹åº”Carã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>@MapKey(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>Map&lt;Long,Map&lt;String,Object&gt;&gt; selectAllRetMap();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllRetMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAllRetMap(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Map&lt;Long,Map&lt;String,Object&gt;&gt; cars = mapper.<span style="color:#007f7f">selectAllRetMap</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#f00">64={carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=133,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-01-10,</span> <span style="color:#f00">id=64,</span> <span style="color:#f00">brand=ä¸°ç”°éœ¸é“</span>}<span style="color:#f00">,</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff0;font-weight:bold">66</span><span style="color:#f00">=</span>{<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=133,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-01-10,</span> <span style="color:#f00">id=66,</span> <span style="color:#f00">brand=ä¸°ç”°éœ¸é“</span>}<span style="color:#f00">,</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff0;font-weight:bold">67</span><span style="color:#f00">=</span>{<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=133,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-01-10,</span> <span style="color:#f00">id=67,</span> <span style="color:#f00">brand=ä¸°ç”°éœ¸é“</span>}<span style="color:#f00">,</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff0;font-weight:bold">69</span><span style="color:#f00">=</span>{<span style="color:#f00">carType=ç‡ƒæ²¹è½¦,</span> <span style="color:#f00">carNum=133,</span> <span style="color:#f00">guidePrice=50.30,</span> <span style="color:#f00">produceTime=2020-01-10,</span> <span style="color:#f00">id=69,</span> <span style="color:#f00">brand=ä¸°ç”°éœ¸é“</span>}<span style="color:#f00">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">......</span>
</span></span><span style="display:flex;"><span><span style="color:#f00">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="116-resultmapç»“æœæ˜ å°„">11.6 resultMapç»“æœæ˜ å°„<a hidden class="anchor" aria-hidden="true" href="#116-resultmapç»“æœæ˜ å°„">#</a></h2>
<p>æŸ¥è¯¢ç»“æœçš„åˆ—åå’Œjavaå¯¹è±¡çš„å±æ€§åå¯¹åº”ä¸ä¸Šæ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼šas ç»™åˆ—èµ·åˆ«å</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„</li>
<li>ç¬¬ä¸‰ç§æ–¹å¼ï¼šæ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼ˆé…ç½®settingsï¼‰</li>
</ul>
<h3 id="ä½¿ç”¨resultmapè¿›è¡Œç»“æœæ˜ å°„">ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨resultmapè¿›è¡Œç»“æœæ˜ å°„">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æŸ¥è¯¢æ‰€æœ‰Carï¼Œä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectAllByResultMap();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        resultMap:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            idï¼šè¿™ä¸ªç»“æœæ˜ å°„çš„æ ‡è¯†ï¼Œä½œä¸ºselectæ ‡ç­¾çš„resultMapå±æ€§çš„å€¼ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            typeï¼šç»“æœé›†è¦æ˜ å°„çš„ç±»ã€‚å¯ä»¥ä½¿ç”¨åˆ«åã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;carResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ï¼Œå®˜æ–¹è§£é‡Šæ˜¯ï¼šä¸ºäº†æé«˜mybatisçš„æ€§èƒ½ã€‚å»ºè®®å†™ä¸Šã€‚--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;carNum&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;car_num&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--å½“å±æ€§åå’Œæ•°æ®åº“åˆ—åä¸€è‡´æ—¶ï¼Œå¯ä»¥çœç•¥ã€‚ä½†å»ºè®®éƒ½å†™ä¸Šã€‚--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--javaTypeç”¨æ¥æŒ‡å®šå±æ€§ç±»å‹ã€‚jdbcTypeç”¨æ¥æŒ‡å®šåˆ—ç±»å‹ã€‚ä¸€èˆ¬å¯ä»¥çœç•¥ã€‚--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span> <span style="color:#007f7f">javaType=</span><span style="color:#0ff;font-weight:bold">&#34;string&#34;</span> <span style="color:#007f7f">jdbcType=</span><span style="color:#0ff;font-weight:bold">&#34;VARCHAR&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;guide_price&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;produceTime&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;produce_time&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;car_type&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--resultMapå±æ€§çš„å€¼å¿…é¡»å’ŒresultMapæ ‡ç­¾ä¸­idå±æ€§å€¼ä¸€è‡´ã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllByResultMap&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;carResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAllByResultMap(){
</span></span><span style="display:flex;"><span>    CarMapper carMapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = carMapper.<span style="color:#007f7f">selectAllByResultMap</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœæ­£å¸¸ã€‚</p>
<h3 id="æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„">æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„<a hidden class="anchor" aria-hidden="true" href="#æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„">#</a></h3>
<p>ä½¿ç”¨è¿™ç§æ–¹å¼çš„å‰ææ˜¯ï¼šå±æ€§åéµå¾ªJavaçš„å‘½åè§„èŒƒï¼Œæ•°æ®åº“è¡¨çš„åˆ—åéµå¾ªSQLçš„å‘½åè§„èŒƒã€‚</p>
<p>Javaå‘½åè§„èŒƒï¼šé¦–å­—æ¯å°å†™ï¼Œåé¢æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œéµå¾ªé©¼å³°å‘½åæ–¹å¼ã€‚</p>
<p>SQLå‘½åè§„èŒƒï¼šå…¨éƒ¨å°å†™ï¼Œå•è¯ä¹‹é—´é‡‡ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ã€‚</p>
<p>æ¯”å¦‚ä»¥ä¸‹çš„å¯¹åº”å…³ç³»ï¼š</p>
<table>
<thead>
<tr>
<th><strong>å®ä½“ç±»ä¸­çš„å±æ€§å</strong></th>
<th><strong>æ•°æ®åº“è¡¨çš„åˆ—å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>carNum</td>
<td>car_num</td>
</tr>
<tr>
<td>carType</td>
<td>car_type</td>
</tr>
<tr>
<td>produceTime</td>
<td>produce_time</td>
</tr>
</tbody>
</table>
<p>å¦‚ä½•å¯ç”¨è¯¥åŠŸèƒ½ï¼Œåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--æ”¾åœ¨propertiesæ ‡ç­¾åé¢--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;mapUnderscoreToCamelCase&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æŸ¥è¯¢æ‰€æœ‰Carï¼Œå¯ç”¨é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectAllByMapUnderscoreToCamelCase();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllByMapUnderscoreToCamelCase&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectAllByMapUnderscoreToCamelCase(){
</span></span><span style="display:flex;"><span>    CarMapper carMapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = carMapper.<span style="color:#007f7f">selectAllByMapUnderscoreToCamelCase</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœæ­£å¸¸ã€‚</p>
<h2 id="117-è¿”å›æ€»è®°å½•æ¡æ•°">11.7 è¿”å›æ€»è®°å½•æ¡æ•°<a hidden class="anchor" aria-hidden="true" href="#117-è¿”å›æ€»è®°å½•æ¡æ•°">#</a></h2>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢æ€»è®°å½•æ¡æ•°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–æ€»è®°å½•æ¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>Long selectTotal();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--longæ˜¯åˆ«åï¼Œå¯å‚è€ƒmybatiså¼€å‘æ‰‹å†Œã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectTotal&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;long&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select count(*) from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectTotal(){
</span></span><span style="display:flex;"><span>    CarMapper carMapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Long total = carMapper.<span style="color:#007f7f">selectTotal</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(total);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/73e1bc1db5f72773d26332457b49cc77_MD5.png"></p>
<h1 id="åäºŒåŠ¨æ€sql">åäºŒã€åŠ¨æ€SQL<a hidden class="anchor" aria-hidden="true" href="#åäºŒåŠ¨æ€sql">#</a></h1>
<p>æœ‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¹Ÿéœ€è¦SQLè¯­å¥è¿›è¡ŒåŠ¨æ€æ‹¼æ¥ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ‰¹é‡åˆ é™¤</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/34164d1101583ec04af27583e72c9e83_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">from</span> t_car <span style="color:#fff;font-weight:bold">where</span> id <span style="color:#fff;font-weight:bold">in</span>(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">3</span>,<span style="color:#ff0;font-weight:bold">4</span>,<span style="color:#ff0;font-weight:bold">5</span>,<span style="color:#ff0;font-weight:bold">6</span>,......<span style="color:#f00">è¿™é‡Œçš„å€¼æ˜¯åŠ¨æ€çš„ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„</span>idä¸åŒ<span style="color:#f00">ï¼Œå€¼æ˜¯ä¸åŒçš„</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¤šæ¡ä»¶æŸ¥è¯¢</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/14f6f7c5e4dbf51b5fd31383f2c79c52_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> * <span style="color:#fff;font-weight:bold">from</span> t_car <span style="color:#fff;font-weight:bold">where</span> brand <span style="color:#fff;font-weight:bold">like</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸°ç”°%&#39;</span> <span style="color:#fff;font-weight:bold">and</span> guide_price &gt; <span style="color:#ff0;font-weight:bold">30</span> <span style="color:#fff;font-weight:bold">and</span> .....;
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºæ¨¡å—ï¼šmybatis-008-dynamic-sql</p>
<p>æ‰“åŒ…æ–¹å¼ï¼šjar</p>
<p>å¼•å…¥ä¾èµ–ï¼šmysqlé©±åŠ¨ä¾èµ–ã€mybatisä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ–</p>
<p>pojoï¼šcom.powernode.mybatis.pojo.Car</p>
<p>mapperæ¥å£ï¼šcom.powernode.mybatis.mapper.CarMapper</p>
<p>å¼•å…¥é…ç½®æ–‡ä»¶ï¼šmybatis-config.xmlã€jdbc.propertiesã€logback.xml</p>
<p>mapperé…ç½®æ–‡ä»¶ï¼šcom/powernode/mybatis/mapper/CarMapper.xml</p>
<p>ç¼–å†™æµ‹è¯•ç±»ï¼šcom.powernode.mybatis.test.CarMapperTest</p>
<p>æ‹·è´å·¥å…·ç±»ï¼šSqlSessionUtil</p>
<h2 id="121-ifæ ‡ç­¾">12.1 ifæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#121-ifæ ‡ç­¾">#</a></h2>
<p>éœ€æ±‚ï¼šå¤šæ¡ä»¶æŸ¥è¯¢ã€‚</p>
<p>å¯èƒ½çš„æ¡ä»¶åŒ…æ‹¬ï¼šå“ç‰Œï¼ˆbrandï¼‰ã€æŒ‡å¯¼ä»·æ ¼ï¼ˆguide_priceï¼‰ã€æ±½è½¦ç±»å‹ï¼ˆcar_typeï¼‰</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.annotations.Param;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param brand
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param guidePrice
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param carType
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; selectByMultiCondition(@Param(<span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>) String brand, @Param(<span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>) Double guidePrice, @Param(<span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span>) String carType);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByMultiCondition&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_car where
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            brand like #{brand}&#34;%&#34;
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            and guide_price &gt;= #{guidePrice}
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            and car_type = #{carType}
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByMultiCondition(){
</span></span><span style="display:flex;"><span>        CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiCondition</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/161d79c3c365a42c27e127c26e7cab99_MD5.png"></p>
<p>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºç©ºï¼Œå‰©ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¸ä¸ºç©ºï¼Œä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiCondition</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/523c708aa58348fe1eb612136bc584a3_MD5.png"></p>
<p>æŠ¥é”™äº†ï¼ŒSQLè¯­æ³•æœ‰é—®é¢˜ï¼Œwhereåé¢å‡ºç°äº†andã€‚è¿™è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<ul>
<li>å¯ä»¥whereåé¢æ·»åŠ ä¸€ä¸ªæ’æˆç«‹çš„æ¡ä»¶ã€‚</li>
</ul>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4f358963317a6418cf53baf078ab5ca2_MD5.png"></p>
<p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/a1d01d55daa285ff1fc13f2811b08390_MD5.png"></p>
<p>å¦‚æœä¸‰ä¸ªæ¡ä»¶éƒ½æ˜¯ç©ºï¼Œæœ‰å½±å“å—ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiCondition</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/1bb5732f915afa042c24f53bfc9f9a34_MD5.png"></p>
<p>ä¸‰ä¸ªæ¡ä»¶éƒ½ä¸ä¸ºç©ºå‘¢ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiCondition</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/675ce60afabebe5597d9cbb2014c93a2_MD5.png"></p>
<h2 id="122-whereæ ‡ç­¾">12.2 whereæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#122-whereæ ‡ç­¾">#</a></h2>
<p>whereæ ‡ç­¾çš„ä½œç”¨ï¼šè®©whereå­å¥æ›´åŠ åŠ¨æ€æ™ºèƒ½ã€‚</p>
<ul>
<li>æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºç©ºæ—¶ï¼Œwhereæ ‡ç­¾ä¿è¯ä¸ä¼šç”Ÿæˆwhereå­å¥ã€‚</li>
<li>è‡ªåŠ¨å»é™¤æŸäº›æ¡ä»¶**<font style="color:#E8323C;">å‰é¢</font>**å¤šä½™çš„andæˆ–orã€‚</li>
</ul>
<p>ç»§ç»­ä½¿ç”¨ifæ ‡ç­¾ä¸­çš„éœ€æ±‚ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Carï¼Œä½¿ç”¨whereæ ‡ç­¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param brand
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param guidePrice
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param carType
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectByMultiConditionWithWhere(@Param(<span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>) String brand, @Param(<span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>) Double guidePrice, @Param(<span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span>) String carType);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByMultiConditionWithWhere&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      and brand like #{brand}&#34;%&#34;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      and guide_price &gt;= #{guidePrice}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      and car_type = #{carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByMultiConditionWithWhere(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiConditionWithWhere</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/371598b4545495168fdcb5d21d298cf2_MD5.png"></p>
<p>å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½æ˜¯ç©ºå‘¢ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiConditionWithWhere</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/fa29d4bcb34b3d58e173d845d31957de_MD5.png"></p>
<p>å®ƒå¯ä»¥è‡ªåŠ¨å»æ‰å‰é¢å¤šä½™çš„andï¼Œé‚£å¯ä»¥è‡ªåŠ¨å»æ‰å‰é¢å¤šä½™çš„orå—ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiConditionWithWhere</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByMultiConditionWithWhere&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      or brand like #{brand}&#34;%&#34;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      and guide_price &gt;= #{guidePrice}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      and car_type = #{carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/3c759e287fc779619ff1481d2b974b37_MD5.png"></p>
<p>å®ƒå¯ä»¥è‡ªåŠ¨å»æ‰å‰é¢å¤šä½™çš„andï¼Œé‚£å¯ä»¥è‡ªåŠ¨å»æ‰åé¢å¤šä½™çš„andå—ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByMultiConditionWithWhere&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      brand like #{brand}&#34;%&#34; and
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      guide_price &gt;= #{guidePrice} and
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      car_type = #{carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>// è®©æœ€åä¸€ä¸ªæ¡ä»¶ä¸ºç©º
</span></span><span style="display:flex;"><span>List<span style="font-weight:bold">&lt;Car&gt;</span> cars = mapper.selectByMultiConditionWithWhere(&#34;ä¸°ç”°&#34;, 20.0, &#34;&#34;);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/7878176057580a915ff1e8641dea9a1f_MD5.png"></p>
<p>å¾ˆæ˜¾ç„¶ï¼Œåé¢å¤šä½™çš„andæ˜¯ä¸ä¼šè¢«å»é™¤çš„ã€‚</p>
<h2 id="123-trimæ ‡ç­¾">12.3 trimæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#123-trimæ ‡ç­¾">#</a></h2>
<p>trimæ ‡ç­¾çš„å±æ€§ï¼š</p>
<ul>
<li>prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥å‰**<font style="color:#E8323C;">æ·»åŠ </font>**å†…å®¹</li>
<li>suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥å**<font style="color:#E8323C;">æ·»åŠ </font>**å†…å®¹</li>
<li>prefixOverridesï¼šå‰ç¼€**<font style="color:#E8323C;">è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰</font>**</li>
<li>suffixOverridesï¼šåç¼€**<font style="color:#E8323C;">è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰</font>**</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Carï¼Œä½¿ç”¨trimæ ‡ç­¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param brand
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param guidePrice
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param carType
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectByMultiConditionWithTrim(@Param(<span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>) String brand, @Param(<span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>) Double guidePrice, @Param(<span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span>) String carType);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByMultiConditionWithTrim&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;trim</span> <span style="color:#007f7f">prefix=</span><span style="color:#0ff;font-weight:bold">&#34;where&#34;</span> <span style="color:#007f7f">suffixOverrides=</span><span style="color:#0ff;font-weight:bold">&#34;and|or&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      brand like #{brand}&#34;%&#34; and
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      guide_price &gt;= #{guidePrice} and
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      car_type = #{carType}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/trim&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectByMultiConditionWithTrim(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiConditionWithTrim</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°&#34;</span>, 20.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/01e8e9b824e0db4e23f8ac8c3b756bfc_MD5.png"></p>
<p>å¦‚æœæ‰€æœ‰æ¡ä»¶ä¸ºç©ºï¼Œwhereä¼šè¢«åŠ ä¸Šå—ï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByMultiConditionWithTrim</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e3bbc79f4f41d4d17955e54e62c82047_MD5.png"></p>
<h2 id="124-setæ ‡ç­¾">12.4 setæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#124-setæ ‡ç­¾">#</a></h2>
<p>ä¸»è¦ä½¿ç”¨åœ¨updateè¯­å¥å½“ä¸­ï¼Œç”¨æ¥ç”Ÿæˆsetå…³é”®å­—ï¼ŒåŒæ—¶å»æ‰æœ€åå¤šä½™çš„â€œ,â€</p>
<p>æ¯”å¦‚æˆ‘ä»¬åªæ›´æ–°æäº¤çš„ä¸ä¸ºç©ºçš„å­—æ®µï¼Œå¦‚æœæäº¤çš„æ•°æ®æ˜¯ç©ºæˆ–è€…&quot;&quot;ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µæˆ‘ä»¬å°†ä¸æ›´æ–°ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ›´æ–°ä¿¡æ¯ï¼Œä½¿ç”¨setæ ‡ç­¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param car
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> updateWithSet(Car car);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;update</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;updateWithSet&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  update t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;set&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carNum != null and carNum != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>car_num = #{carNum},<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>brand = #{brand},<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>guide_price = #{guidePrice},<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;produceTime != null and produceTime != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>produce_time = #{produceTime},<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;carType != null and carType != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>car_type = #{carType},<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/set&gt;</span>
</span></span><span style="display:flex;"><span>  where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testUpdateWithSet(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car(38L,<span style="color:#0ff;font-weight:bold">&#34;1001&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°éœ¸é“2&#34;</span>,10.<span style="color:#007f7f">0</span>,<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,<span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">updateWithSet</span>(car);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(count);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4616924ebd8bbf97a16854bed7920482_MD5.png"></p>
<h2 id="125-choose-when-otherwise">12.5 choose when otherwise<a hidden class="anchor" aria-hidden="true" href="#125-choose-when-otherwise">#</a></h2>
<p>è¿™ä¸‰ä¸ªæ ‡ç­¾æ˜¯åœ¨ä¸€èµ·ä½¿ç”¨çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;choose&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;when&gt;&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;when&gt;&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;when&gt;&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;otherwise&gt;&lt;/otherwise&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/choose&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç­‰åŒäºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span>(){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}<span style="color:#fff;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åªæœ‰ä¸€ä¸ªåˆ†æ”¯ä¼šè¢«é€‰æ‹©ï¼ï¼ï¼ï¼</p>
<p>éœ€æ±‚ï¼šå…ˆæ ¹æ®å“ç‰ŒæŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›å“ç‰Œï¼Œå†æ ¹æ®æŒ‡å¯¼ä»·æ ¼æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›æŒ‡å¯¼ä»·æ ¼ï¼Œå°±æ ¹æ®ç”Ÿäº§æ—¥æœŸæŸ¥è¯¢ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* ä½¿ç”¨choose when otherwiseæ ‡ç­¾æŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param brand
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param guidePrice
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param produceTime
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Car&gt; selectWithChoose(@Param(<span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>) String brand, @Param(<span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>) Double guidePrice, @Param(<span style="color:#0ff;font-weight:bold">&#34;produceTime&#34;</span>) String produceTime);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectWithChoose&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;choose&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;brand != null and brand != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        brand like #{brand}&#34;%&#34;
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;guidePrice != null and guidePrice != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        guide_price &gt;= #{guidePrice}
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;otherwise&gt;</span>
</span></span><span style="display:flex;"><span>        produce_time &gt;= #{produceTime}
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/otherwise&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/choose&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectWithChoose(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//List&lt;Car&gt; cars = mapper.selectWithChoose(&#34;ä¸°ç”°éœ¸é“&#34;, 20.0, &#34;2000-10-10&#34;);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//List&lt;Car&gt; cars = mapper.selectWithChoose(&#34;&#34;, 20.0, &#34;2000-10-10&#34;);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//List&lt;Car&gt; cars = mapper.selectWithChoose(&#34;&#34;, null, &#34;2000-10-10&#34;);</span>
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectWithChoose</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cars);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/21ea394a8b77f3b9a21fb0f1fd208158_MD5.png"></p>
<h2 id="126-foreachæ ‡ç­¾">12.6 foreachæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#126-foreachæ ‡ç­¾">#</a></h2>
<p>å¾ªç¯æ•°ç»„æˆ–é›†åˆï¼ŒåŠ¨æ€ç”Ÿæˆsqlï¼Œæ¯”å¦‚è¿™æ ·çš„SQLï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">from</span> t_car <span style="color:#fff;font-weight:bold">where</span> id <span style="color:#fff;font-weight:bold">in</span>(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">3</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">from</span> t_car <span style="color:#fff;font-weight:bold">where</span> id = <span style="color:#ff0;font-weight:bold">1</span> <span style="color:#fff;font-weight:bold">or</span> id = <span style="color:#ff0;font-weight:bold">2</span> <span style="color:#fff;font-weight:bold">or</span> id = <span style="color:#ff0;font-weight:bold">3</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_car <span style="color:#fff;font-weight:bold">values</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#fff;font-weight:bold">null</span>,<span style="color:#0ff;font-weight:bold">&#39;1001&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;å‡¯ç¾ç‘&#39;</span>,<span style="color:#ff0;font-weight:bold">35</span>.<span style="color:#ff0;font-weight:bold">0</span>,<span style="color:#0ff;font-weight:bold">&#39;2010-10-11&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;ç‡ƒæ²¹è½¦&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#fff;font-weight:bold">null</span>,<span style="color:#0ff;font-weight:bold">&#39;1002&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;æ¯”äºšè¿ªå”&#39;</span>,<span style="color:#ff0;font-weight:bold">31</span>.<span style="color:#ff0;font-weight:bold">0</span>,<span style="color:#0ff;font-weight:bold">&#39;2020-11-11&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;æ–°èƒ½æº&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#fff;font-weight:bold">null</span>,<span style="color:#0ff;font-weight:bold">&#39;1003&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;æ¯”äºšè¿ªå®‹&#39;</span>,<span style="color:#ff0;font-weight:bold">32</span>.<span style="color:#ff0;font-weight:bold">0</span>,<span style="color:#0ff;font-weight:bold">&#39;2020-10-11&#39;</span>,<span style="color:#0ff;font-weight:bold">&#39;æ–°èƒ½æº&#39;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ‰¹é‡åˆ é™¤-1">æ‰¹é‡åˆ é™¤<a hidden class="anchor" aria-hidden="true" href="#æ‰¹é‡åˆ é™¤-1">#</a></h3>
<ul>
<li>ç”¨inæ¥åˆ é™¤</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param ids
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> deleteBatchByForeach(@Param(<span style="color:#0ff;font-weight:bold">&#34;ids&#34;</span>) Long[] ids);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">collectionï¼šé›†åˆæˆ–æ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">itemï¼šé›†åˆæˆ–æ•°ç»„ä¸­çš„å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">separatorï¼šåˆ†éš”ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">openï¼šforeachæ ‡ç­¾ä¸­æ‰€æœ‰å†…å®¹çš„å¼€å§‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">closeï¼šforeachæ ‡ç­¾ä¸­æ‰€æœ‰å†…å®¹çš„ç»“æŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteBatchByForeach&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  delete from t_car where id in
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;foreach</span> <span style="color:#007f7f">collection=</span><span style="color:#0ff;font-weight:bold">&#34;ids&#34;</span> <span style="color:#007f7f">item=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span> <span style="color:#007f7f">separator=</span><span style="color:#0ff;font-weight:bold">&#34;,&#34;</span> <span style="color:#007f7f">open=</span><span style="color:#0ff;font-weight:bold">&#34;(&#34;</span> <span style="color:#007f7f">close=</span><span style="color:#0ff;font-weight:bold">&#34;)&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    #{id}
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDeleteBatchByForeach(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">deleteBatchByForeach</span>(<span style="color:#fff;font-weight:bold">new</span> Long[]{40L, 41L, 42L});
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8a041a5a7aeabd893f42dafb8e7cd2ce_MD5.png"></p>
<ul>
<li>ç”¨oræ¥åˆ é™¤</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param ids
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> deleteBatchByForeach2(@Param(<span style="color:#0ff;font-weight:bold">&#34;ids&#34;</span>) Long[] ids);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteBatchByForeach2&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  delete from t_car where
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;foreach</span> <span style="color:#007f7f">collection=</span><span style="color:#0ff;font-weight:bold">&#34;ids&#34;</span> <span style="color:#007f7f">item=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span> <span style="color:#007f7f">separator=</span><span style="color:#0ff;font-weight:bold">&#34;or&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    id = #{id}
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDeleteBatchByForeach2(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">deleteBatchByForeach2</span>(<span style="color:#fff;font-weight:bold">new</span> Long[]{40L, 41L, 42L});
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/c557f2f207f80b5c40e2930412ad900a_MD5.png"></p>
<h3 id="æ‰¹é‡æ·»åŠ ">æ‰¹é‡æ·»åŠ <a hidden class="anchor" aria-hidden="true" href="#æ‰¹é‡æ·»åŠ ">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ‰¹é‡æ·»åŠ ï¼Œä½¿ç”¨foreachæ ‡ç­¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param cars
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> insertBatchByForeach(@Param(<span style="color:#0ff;font-weight:bold">&#34;cars&#34;</span>) List&lt;Car&gt; cars);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertBatchByForeach&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_car values 
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;foreach</span> <span style="color:#007f7f">collection=</span><span style="color:#0ff;font-weight:bold">&#34;cars&#34;</span> <span style="color:#007f7f">item=</span><span style="color:#0ff;font-weight:bold">&#34;car&#34;</span> <span style="color:#007f7f">separator=</span><span style="color:#0ff;font-weight:bold">&#34;,&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    (null,#{car.carNum},#{car.brand},#{car.guidePrice},#{car.produceTime},#{car.carType})
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertBatchByForeach(){
</span></span><span style="display:flex;"><span>    CarMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car1 = <span style="color:#fff;font-weight:bold">new</span> Car(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;2001&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å…°åšåŸºå°¼&#34;</span>, 100.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;1998-10-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    Car car2 = <span style="color:#fff;font-weight:bold">new</span> Car(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;2001&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å…°åšåŸºå°¼&#34;</span>, 100.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;1998-10-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    Car car3 = <span style="color:#fff;font-weight:bold">new</span> Car(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;2001&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å…°åšåŸºå°¼&#34;</span>, 100.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;1998-10-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = Arrays.<span style="color:#007f7f">asList</span>(car1, car2, car3);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">insertBatchByForeach</span>(cars);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•&#34;</span> + count);
</span></span><span style="display:flex;"><span>    SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/01cde3b9cf464debc2c6a0ea86b70cd8_MD5.png"></p>
<h2 id="127-sqlæ ‡ç­¾ä¸includeæ ‡ç­¾">12.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾<a hidden class="anchor" aria-hidden="true" href="#127-sqlæ ‡ç­¾ä¸includeæ ‡ç­¾">#</a></h2>
<p>sqlæ ‡ç­¾ç”¨æ¥å£°æ˜sqlç‰‡æ®µ</p>
<p>includeæ ‡ç­¾ç”¨æ¥å°†å£°æ˜çš„sqlç‰‡æ®µåŒ…å«åˆ°æŸä¸ªsqlè¯­å¥å½“ä¸­</p>
<p>ä½œç”¨ï¼šä»£ç å¤ç”¨ã€‚æ˜“ç»´æŠ¤ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;sql</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;carCols&#34;</span><span style="font-weight:bold">&gt;</span>id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType<span style="font-weight:bold">&lt;/sql&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllRetMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">refid=</span><span style="color:#0ff;font-weight:bold">&#34;carCols&#34;</span><span style="font-weight:bold">/&gt;</span> from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllRetListMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">refid=</span><span style="color:#0ff;font-weight:bold">&#34;carCols&#34;</span><span style="font-weight:bold">/&gt;</span> carType from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByIdRetMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">refid=</span><span style="color:#0ff;font-weight:bold">&#34;carCols&#34;</span><span style="font-weight:bold">/&gt;</span> from t_car where id = #{id}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="åä¸‰mybatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½">åä¸‰ã€MyBatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½<a hidden class="anchor" aria-hidden="true" href="#åä¸‰mybatisçš„é«˜çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½">#</a></h1>
<p>æ¨¡å—åï¼šmybatis-009-advanced-mapping</p>
<p>æ‰“åŒ…æ–¹å¼ï¼šjar</p>
<p>ä¾èµ–ï¼šmybatisä¾èµ–ã€mysqlé©±åŠ¨ä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ–</p>
<p>é…ç½®æ–‡ä»¶ï¼šmybatis-config.xmlã€logback.xmlã€jdbc.properties</p>
<p>æ‹·è´å·¥å…·ç±»ï¼šSqlSessionUtil</p>
<p>å‡†å¤‡æ•°æ®åº“è¡¨ï¼šä¸€ä¸ªç­çº§å¯¹åº”å¤šä¸ªå­¦ç”Ÿã€‚ç­çº§è¡¨ï¼št_clazzã€‚å­¦ç”Ÿè¡¨ï¼št_student</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5f6316d151fae22854889d17ab930caf_MD5.png"></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/83ffc9729acff476fc959956c23ec165_MD5.png"></p>
<p>åˆ›å»ºpojoï¼šStudentã€Clazz</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * å­¦ç”Ÿç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Student {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer sid;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sname;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//......</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * ç­çº§ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Clazz {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer cid;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String cname;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//......</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºmapperæ¥å£ï¼šStudentMapperã€ClazzMapper</p>
<p>åˆ›å»ºmapperæ˜ å°„æ–‡ä»¶ï¼šStudentMapper.xmlã€ClazzMapper.xml</p>
<h2 id="131-å¤šå¯¹ä¸€">13.1 å¤šå¯¹ä¸€<a hidden class="anchor" aria-hidden="true" href="#131-å¤šå¯¹ä¸€">#</a></h2>
<p>å¤šç§æ–¹å¼ï¼Œå¸¸è§çš„åŒ…æ‹¬ä¸‰ç§ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼šä¸€æ¡SQLè¯­å¥ï¼Œçº§è”å±æ€§æ˜ å°„ã€‚</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼šä¸€æ¡SQLè¯­å¥ï¼Œassociationã€‚</li>
<li>ç¬¬ä¸‰ç§æ–¹å¼ï¼šä¸¤æ¡SQLè¯­å¥ï¼Œåˆ†æ­¥æŸ¥è¯¢ã€‚ï¼ˆè¿™ç§æ–¹å¼å¸¸ç”¨ï¼šä¼˜ç‚¹ä¸€æ˜¯å¯å¤ç”¨ã€‚ä¼˜ç‚¹äºŒæ˜¯æ”¯æŒæ‡’åŠ è½½ã€‚ï¼‰</li>
</ul>
<h3 id="ç¬¬ä¸€ç§æ–¹å¼çº§è”å±æ€§æ˜ å°„">ç¬¬ä¸€ç§æ–¹å¼ï¼šçº§è”å±æ€§æ˜ å°„<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€ç§æ–¹å¼çº§è”å±æ€§æ˜ å°„">#</a></h3>
<p>pojoç±»Studentä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ï¼šClazz clazz; è¡¨ç¤ºå­¦ç”Ÿå…³è”çš„ç­çº§å¯¹è±¡ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.pojo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * å­¦ç”Ÿç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Student {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer sid;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String sname;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Clazz clazz;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Clazz getClazz() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> clazz;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setClazz(Clazz clazz) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">clazz</span> = clazz;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;Student{&#34;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;sid=&#34;</span> + sid +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, sname=&#39;&#34;</span> + sname + <span style="color:#0ff;font-weight:bold">&#39;\&#39;&#39;</span> +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;, clazz=&#34;</span> + clazz +
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#39;}&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Student() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Student(Integer sid, String sname) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sid</span> = sid;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sname</span> = sname;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Integer getSid() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSid(Integer sid) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sid</span> = sid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getSname() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> sname;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSname(String sname) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sname</span> = sname;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.StudentMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz.cid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz.cname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectBySid&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select s.*, c.* from t_student s join t_clazz c on s.cid = c.cid where sid = #{sid}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.StudentMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Student;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StudentMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectBySid(){
</span></span><span style="display:flex;"><span>        StudentMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(StudentMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Student student = mapper.<span style="color:#007f7f">selectBySid</span>(1);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(student);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/555c4846ea1fab8b18deb3247e45d1f1_MD5.png"></p>
<h3 id="ç¬¬äºŒç§æ–¹å¼association">ç¬¬äºŒç§æ–¹å¼ï¼šassociation<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒç§æ–¹å¼association">#</a></h3>
<p>å…¶ä»–ä½ç½®éƒ½ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹resultMapä¸­çš„é…ç½®ï¼šassociationå³å¯ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz&#34;</span> <span style="color:#007f7f">javaType=</span><span style="color:#0ff;font-weight:bold">&#34;Clazz&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/association&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>associationç¿»è¯‘ä¸ºï¼šå…³è”ã€‚</p>
<p>å­¦ç”Ÿå¯¹è±¡å…³è”ä¸€ä¸ªç­çº§å¯¹è±¡ã€‚</p>
<h3 id="ç¬¬ä¸‰ç§æ–¹å¼åˆ†æ­¥æŸ¥è¯¢">ç¬¬ä¸‰ç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰ç§æ–¹å¼åˆ†æ­¥æŸ¥è¯¢">#</a></h3>
<p>å…¶ä»–ä½ç½®ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹ä»¥åŠæ·»åŠ ä»¥ä¸‹ä¸‰å¤„ï¼š</p>
<p>ç¬¬ä¸€å¤„ï¼šassociationä¸­selectä½ç½®å¡«å†™sqlIdã€‚sqlId=namespace+idã€‚å…¶ä¸­columnå±æ€§ä½œä¸ºè¿™æ¡å­sqlè¯­å¥çš„æ¡ä»¶ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectBySid&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select s.* from t_student s where sid = #{sid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒå¤„ï¼šåœ¨ClazzMapperæ¥å£ä¸­æ·»åŠ æ–¹æ³•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Clazz;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * Clazzæ˜ å°„å™¨æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> ClazzMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®cidè·å–Clazzä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param cid
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Clazz selectByCid(Integer cid);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰å¤„ï¼šåœ¨ClazzMapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.ClazzMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCid&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Clazz&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_clazz where cid = #{cid}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°å…ˆåæœ‰ä¸¤æ¡sqlè¯­å¥æ‰§è¡Œï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/40ff5669c4f075ebc14001cbc8b492e2_MD5.png"></p>
<p>åˆ†æ­¥ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªä¼˜ç‚¹ï¼šä»£ç å¤ç”¨æ€§å¢å¼ºã€‚</li>
<li>ç¬¬äºŒä¸ªä¼˜ç‚¹ï¼šæ”¯æŒå»¶è¿ŸåŠ è½½ã€‚ã€æš‚æ—¶è®¿é—®ä¸åˆ°çš„æ•°æ®å¯ä»¥å…ˆä¸æŸ¥è¯¢ã€‚æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ã€‘</li>
</ul>
<h2 id="132-å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½">13.2 å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½<a hidden class="anchor" aria-hidden="true" href="#132-å¤šå¯¹ä¸€å»¶è¿ŸåŠ è½½">#</a></h2>
<p>è¦æƒ³æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨associationæ ‡ç­¾ä¸­æ·»åŠ fetchType=&ldquo;lazy&quot;å³å¯ã€‚</p>
<p>ä¿®æ”¹StudentMapper.xmlæ–‡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">fetchType=</span><span style="color:#0ff;font-weight:bold">&#34;lazy&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ç°åœ¨åªæŸ¥è¯¢å­¦ç”Ÿåå­—ï¼Œä¿®æ”¹æµ‹è¯•ç¨‹åºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StudentMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectBySid(){
</span></span><span style="display:flex;"><span>        StudentMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(StudentMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Student student = mapper.<span style="color:#007f7f">selectBySid</span>(1);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//System.out.println(student);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åªè·å–å­¦ç”Ÿå§“å</span>
</span></span><span style="display:flex;"><span>        String sname = student.<span style="color:#007f7f">getSname</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å­¦ç”Ÿå§“åï¼š&#34;</span> + sname);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/5d8975ee2f84f624bea04b43018b9f8a_MD5.png"></p>
<p>å¦‚æœåç»­éœ€è¦ä½¿ç”¨åˆ°å­¦ç”Ÿæ‰€åœ¨ç­çº§çš„åç§°ï¼Œè¿™ä¸ªæ—¶å€™æ‰ä¼šæ‰§è¡Œå…³è”çš„sqlè¯­å¥ï¼Œä¿®æ”¹æµ‹è¯•ç¨‹åºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StudentMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectBySid(){
</span></span><span style="display:flex;"><span>        StudentMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(StudentMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Student student = mapper.<span style="color:#007f7f">selectBySid</span>(1);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//System.out.println(student);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åªè·å–å­¦ç”Ÿå§“å</span>
</span></span><span style="display:flex;"><span>        String sname = student.<span style="color:#007f7f">getSname</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å­¦ç”Ÿå§“åï¼š&#34;</span> + sname);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ°è¿™é‡Œä¹‹åï¼Œæƒ³è·å–ç­çº§åå­—äº†</span>
</span></span><span style="display:flex;"><span>        String cname = student.<span style="color:#007f7f">getClazz</span>().<span style="color:#007f7f">getCname</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å­¦ç”Ÿçš„ç­çº§åç§°ï¼š&#34;</span> + cname);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/0e0c2f77ed97c75e22ae4c0a4e010664_MD5.png"></p>
<p>é€šè¿‡ä»¥ä¸Šçš„æ‰§è¡Œç»“æœå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å½“ä½¿ç”¨åˆ°ç­çº§åç§°ä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œå…³è”çš„sqlè¯­å¥ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚</p>
<p>åœ¨mybatisä¸­å¦‚ä½•å¼€å¯å…¨å±€çš„å»¶è¿ŸåŠ è½½å‘¢ï¼Ÿéœ€è¦settingé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/effc4b2d6460d321a18ce648e3a1281d_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;lazyLoadingEnabled&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong><font style="color:#E8323C;">æŠŠfetchType=&ldquo;lazy&quot;å»æ‰ã€‚</font></strong></p>
<p>æ‰§è¡Œä»¥ä¸‹ç¨‹åºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> StudentMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectBySid(){
</span></span><span style="display:flex;"><span>        StudentMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(StudentMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Student student = mapper.<span style="color:#007f7f">selectBySid</span>(1);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//System.out.println(student);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åªè·å–å­¦ç”Ÿå§“å</span>
</span></span><span style="display:flex;"><span>        String sname = student.<span style="color:#007f7f">getSname</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å­¦ç”Ÿå§“åï¼š&#34;</span> + sname);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ°è¿™é‡Œä¹‹åï¼Œæƒ³è·å–ç­çº§åå­—äº†</span>
</span></span><span style="display:flex;"><span>        String cname = student.<span style="color:#007f7f">getClazz</span>().<span style="color:#007f7f">getCname</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;å­¦ç”Ÿçš„ç­çº§åç§°ï¼š&#34;</span> + cname);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/0e0c2f77ed97c75e22ae4c0a4e010664_MD5.png"></p>
<p>é€šè¿‡ä»¥ä¸Šçš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¼€å¯äº†å…¨å±€å»¶è¿ŸåŠ è½½ç­–ç•¥ã€‚</p>
<p>å¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ä¹‹åï¼Œæ‰€æœ‰çš„sqléƒ½ä¼šæ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œå¦‚æœæŸä¸ªsqlä½ ä¸å¸Œæœ›å®ƒæ”¯æŒå»¶è¿ŸåŠ è½½æ€ä¹ˆåŠå‘¢ï¼Ÿå°†fetchTypeè®¾ç½®ä¸ºeagerï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;studentResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;clazz&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span>
</span></span><span style="display:flex;"><span>               <span style="color:#007f7f">fetchType=</span><span style="color:#0ff;font-weight:bold">&#34;eager&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/af066af37b66547b7bd00198714586cc_MD5.png"></p>
<p>è¿™æ ·çš„è¯ï¼Œé’ˆå¯¹æŸä¸ªç‰¹å®šçš„sqlï¼Œä½ å°±å…³é—­äº†å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚</p>
<p>åæœŸæˆ‘ä»¬è¦ä¸è¦å¼€å¯å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Œä¸»è¦çœ‹å®é™…çš„ä¸šåŠ¡éœ€æ±‚æ˜¯æ€æ ·çš„ã€‚</p>
<h2 id="133-ä¸€å¯¹å¤š">13.3 ä¸€å¯¹å¤š<a hidden class="anchor" aria-hidden="true" href="#133-ä¸€å¯¹å¤š">#</a></h2>
<p>ä¸€å¯¹å¤šçš„å®ç°ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€çš„ä¸€æ–¹ä¸­æœ‰Listé›†åˆå±æ€§ã€‚</p>
<p>åœ¨Clazzç±»ä¸­æ·»åŠ <code>List&lt;Student&gt; stus; </code>å±æ€§ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Clazz {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer cid;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String cname;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> List&lt;Student&gt; stus;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// set getæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ„é€ æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// toStringæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸€å¯¹å¤šçš„å®ç°é€šå¸¸åŒ…æ‹¬ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</li>
</ul>
<h3 id="ç¬¬ä¸€ç§æ–¹å¼collection">ç¬¬ä¸€ç§æ–¹å¼ï¼šcollection<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€ç§æ–¹å¼collection">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Clazz;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * Clazzæ˜ å°„å™¨æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @author è€æœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @version 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @since 1.0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> ClazzMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®cidè·å–Clazzä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param cid
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Clazz selectByCid(Integer cid);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®ç­çº§ç¼–å·æŸ¥è¯¢ç­çº§ä¿¡æ¯ã€‚åŒæ—¶ç­çº§ä¸­æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ä¹Ÿè¦æŸ¥è¯¢ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param cid
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Clazz selectClazzAndStusByCid(Integer cid);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;clazzResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Clazz&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;collection</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;stus&#34;</span> <span style="color:#007f7f">ofType=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/collection&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectClazzAndStusByCid&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;clazzResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_clazz c join t_student s on c.cid = s.cid where c.cid = #{cid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„æ˜¯ofTypeï¼Œè¡¨ç¤ºâ€œé›†åˆä¸­çš„ç±»å‹â€ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.ClazzMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Clazz;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ClazzMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectClazzAndStusByCid() {
</span></span><span style="display:flex;"><span>        ClazzMapper mapper = SqlSessionUtil.<span style="color:#007f7f">openSession</span>().<span style="color:#007f7f">getMapper</span>(ClazzMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Clazz clazz = mapper.<span style="color:#007f7f">selectClazzAndStusByCid</span>(1001);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(clazz);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/1bbd29868cdc60400c7de505f0ef6a9b_MD5.png"></p>
<h3 id="ç¬¬äºŒç§æ–¹å¼åˆ†æ­¥æŸ¥è¯¢">ç¬¬äºŒç§æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒç§æ–¹å¼åˆ†æ­¥æŸ¥è¯¢">#</a></h3>
<p>ä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªä½ç½®å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;clazzResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Clazz&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cname&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--ä¸»è¦çœ‹è¿™é‡Œ--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;collection</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;stus&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.StudentMapper.selectByCid&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;cid&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--sqlè¯­å¥ä¹Ÿå˜åŒ–äº†--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectClazzAndStusByCid&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;clazzResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_clazz c where c.cid = #{cid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* æ ¹æ®ç­çº§ç¼–å·è·å–æ‰€æœ‰çš„å­¦ç”Ÿã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @param cid
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span>List&lt;Student&gt; selectByCid(Integer cid);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectByCid&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_student where cid = #{cid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/e51a2e43832afa4af0a76fadc6ee72f2_MD5.png"></p>
<h2 id="134-ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½">13.4 ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½<a hidden class="anchor" aria-hidden="true" href="#134-ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½">#</a></h2>
<p>ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½æœºåˆ¶å’Œå¤šå¯¹ä¸€æ˜¯ä¸€æ ·çš„ã€‚åŒæ ·æ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼šfetchType=&ldquo;lazy&rdquo;</li>
<li>ç¬¬äºŒç§ï¼šä¿®æ”¹å…¨å±€çš„é…ç½®settingï¼Œ**<font style="color:#E8323C;">lazyLoadingEnabled=trueï¼Œ</font>**å¦‚æœå¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ï¼Œæƒ³è®©æŸä¸ªsqlä¸ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼šfetchType=&ldquo;eager&rdquo;</li>
</ul>
<h1 id="åå››mybatisçš„ç¼“å­˜">åå››ã€MyBatisçš„ç¼“å­˜<a hidden class="anchor" aria-hidden="true" href="#åå››mybatisçš„ç¼“å­˜">#</a></h1>
<p>ç¼“å­˜ï¼šcache</p>
<p>ç¼“å­˜çš„ä½œç”¨ï¼šé€šè¿‡å‡å°‘IOçš„æ–¹å¼ï¼Œæ¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>mybatisçš„ç¼“å­˜ï¼šå°†selectè¯­å¥çš„æŸ¥è¯¢ç»“æœæ”¾åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰å½“ä¸­ï¼Œä¸‹ä¸€æ¬¡è¿˜æ˜¯è¿™æ¡selectè¯­å¥çš„è¯ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œä¸å†æŸ¥æ•°æ®åº“ã€‚ä¸€æ–¹é¢æ˜¯å‡å°‘äº†IOã€‚å¦ä¸€æ–¹é¢ä¸å†æ‰§è¡Œç¹ççš„æŸ¥æ‰¾ç®—æ³•ã€‚æ•ˆç‡å¤§å¤§æå‡ã€‚</p>
<p>mybatisç¼“å­˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸€çº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionä¸­ã€‚</li>
<li>äºŒçº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionFactoryä¸­ã€‚</li>
<li>æˆ–è€…é›†æˆå…¶å®ƒç¬¬ä¸‰æ–¹çš„ç¼“å­˜ï¼šæ¯”å¦‚EhCacheã€Javaè¯­è¨€å¼€å‘çš„ã€‘ã€Memcacheã€Cè¯­è¨€å¼€å‘çš„ã€‘ç­‰ã€‚</li>
</ul>
<p><strong><font style="color:#F5222D;">ç¼“å­˜åªé’ˆå¯¹äºDQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å­˜æœºåˆ¶åªå¯¹åº”selectè¯­å¥ã€‚</font></strong></p>
<h2 id="141-ä¸€çº§ç¼“å­˜">14.1 ä¸€çº§ç¼“å­˜<a hidden class="anchor" aria-hidden="true" href="#141-ä¸€çº§ç¼“å­˜">#</a></h2>
<p>ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ã€‚ä¸éœ€è¦åšä»»ä½•é…ç½®ã€‚</p>
<p>åŸç†ï¼šåªè¦ä½¿ç”¨åŒä¸€ä¸ªSqlSessionå¯¹è±¡æ‰§è¡ŒåŒä¸€æ¡SQLè¯­å¥ï¼Œå°±ä¼šèµ°ç¼“å­˜ã€‚</p>
<p>æ¨¡å—åï¼šmybatis-010-cache</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ ¹æ®idè·å–Carä¿¡æ¯ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    Car selectById(Long id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    select * from t_car where id = #{id}
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.utils.SqlSessionUtil;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CarMapperTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨æˆ‘ä»¬å°è£…çš„SqlSessionUtilå·¥å…·ç±»ã€‚</span>
</span></span><span style="display:flex;"><span>        SqlSessionFactoryBuilder builder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = builder.<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession1 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        CarMapper mapper1 = sqlSession1.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car1 = mapper1.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car1);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        CarMapper mapper2 = sqlSession1.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car2 = mapper2.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        SqlSession sqlSession2 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        CarMapper mapper3 = sqlSession2.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car3 = mapper3.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car3);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        CarMapper mapper4 = sqlSession2.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car4 = mapper4.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car4);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/ce3b95c96263ee215cae8207e155f127_MD5.png"></p>
<p>ä»€ä¹ˆæƒ…å†µä¸‹ä¸èµ°ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼šä¸åŒçš„SqlSessionå¯¹è±¡ã€‚</li>
<li>ç¬¬äºŒç§ï¼šæŸ¥è¯¢æ¡ä»¶å˜åŒ–äº†ã€‚</li>
</ul>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µåŒ…æ‹¬ä¸¤ç§ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼šç¬¬ä¸€æ¬¡æŸ¥è¯¢å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œæ‰‹åŠ¨æ¸…ç©ºäº†ä¸€çº§ç¼“å­˜ã€‚</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>sqlSession.<span style="color:#007f7f">clearCache</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¬¬äºŒç§ï¼šç¬¬ä¸€æ¬¡æŸ¥è¯¢å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œæ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œã€‚ã€è¿™ä¸ªå¢åˆ æ”¹å’Œå“ªå¼ è¡¨æ²¡æœ‰å…³ç³»ï¼Œåªè¦æœ‰insert delete updateæ“ä½œï¼Œä¸€çº§ç¼“å­˜å°±å¤±æ•ˆã€‚ã€‘</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">* ä¿å­˜è´¦æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> insertAccount();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertAccount&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  insert into t_act values(3, &#39;act003&#39;, 10000)
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/8c6bda4f30f0787b8c5fba8f1afb3a87_MD5.png"></p>
<p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/203366f7bcaabaa4160e2312d603b082_MD5.png"></p>
<h2 id="142-äºŒçº§ç¼“å­˜">14.2 äºŒçº§ç¼“å­˜<a hidden class="anchor" aria-hidden="true" href="#142-äºŒçº§ç¼“å­˜">#</a></h2>
<p>äºŒçº§ç¼“å­˜çš„èŒƒå›´æ˜¯SqlSessionFactoryã€‚</p>
<p>ä½¿ç”¨äºŒçº§ç¼“å­˜éœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;&gt;</code> å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚é»˜è®¤å°±æ˜¯trueï¼Œæ— éœ€è®¾ç½®ã€‚</li>
<li>åœ¨éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„SqlMapper.xmlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š<cache /></li>
<li>ä½¿ç”¨äºŒçº§ç¼“å­˜çš„å®ä½“ç±»å¯¹è±¡å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»å®ç°java.io.Serializableæ¥å£</li>
<li>SqlSessionå¯¹è±¡å…³é—­æˆ–æäº¤ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥åˆ°äºŒçº§ç¼“å­˜å½“ä¸­ã€‚æ­¤æ—¶äºŒçº§ç¼“å­˜æ‰å¯ç”¨ã€‚</li>
</ol>
<p>æµ‹è¯•äºŒçº§ç¼“å­˜ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;cache/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Car <span style="color:#fff;font-weight:bold">implements</span> Serializable {
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//......</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById2() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession1 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper1 = sqlSession1.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car1 = mapper1.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car1);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å…³é”®ä¸€æ­¥</span>
</span></span><span style="display:flex;"><span>    sqlSession1.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    SqlSession sqlSession2 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper2 = sqlSession2.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car2 = mapper2.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car2);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/29a9ba46be9e9d0b91a5cb6ba6ba9ace_MD5.png"></p>
<p><strong><font style="color:#F5222D;">äºŒçº§ç¼“å­˜çš„å¤±æ•ˆï¼šåªè¦ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´å‡ºç°äº†å¢åˆ æ”¹æ“ä½œã€‚äºŒçº§ç¼“å­˜å°±ä¼šå¤±æ•ˆã€‚ã€ä¸€çº§ç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆã€‘</font></strong></p>
<p><strong>äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®ï¼š</strong></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/9b4a3b7553c2d3ecc51a16ffab07dff4_MD5.png"></p>
<ol>
<li>evictionï¼šæŒ‡å®šä»ç¼“å­˜ä¸­ç§»é™¤æŸä¸ªå¯¹è±¡çš„æ·˜æ±°ç®—æ³•ã€‚é»˜è®¤é‡‡ç”¨LRUç­–ç•¥ã€‚
<ol>
<li>LRUï¼šLeast Recently Usedã€‚æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚ä¼˜å…ˆæ·˜æ±°åœ¨é—´éš”æ—¶é—´å†…ä½¿ç”¨é¢‘ç‡æœ€ä½çš„å¯¹è±¡ã€‚(å…¶å®è¿˜æœ‰ä¸€ç§æ·˜æ±°ç®—æ³•LFUï¼Œæœ€ä¸å¸¸ç”¨ã€‚)</li>
<li>FIFOï¼šFirst In First Outã€‚ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç¼“å­˜å™¨ã€‚å…ˆè¿›å…¥äºŒçº§ç¼“å­˜çš„å¯¹è±¡æœ€å…ˆè¢«æ·˜æ±°ã€‚</li>
<li>SOFTï¼šè½¯å¼•ç”¨ã€‚æ·˜æ±°è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚</li>
<li>WEAKï¼šå¼±å¼•ç”¨ã€‚æ·˜æ±°å¼±å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚</li>
</ol>
</li>
<li>flushIntervalï¼š
<ol>
<li>äºŒçº§ç¼“å­˜çš„åˆ·æ–°æ—¶é—´é—´éš”ã€‚å•ä½æ¯«ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ã€‚å°±ä»£è¡¨ä¸åˆ·æ–°ç¼“å­˜ï¼Œåªè¦å†…å­˜è¶³å¤Ÿå¤§ï¼Œä¸€ç›´ä¼šå‘äºŒçº§ç¼“å­˜ä¸­ç¼“å­˜æ•°æ®ã€‚é™¤éæ‰§è¡Œäº†å¢åˆ æ”¹ã€‚</li>
</ol>
</li>
<li>readOnlyï¼š
<ol>
<li>trueï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§è¡Œä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å…±äº«çš„åŒä¸€ä¸ªã€‚æ€§èƒ½å¥½ã€‚ä½†æ˜¯å¤šçº¿ç¨‹å¹¶å‘å¯èƒ½ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚</li>
<li>falseï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§è¡Œä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å‰¯æœ¬ï¼Œè°ƒç”¨äº†cloneæ–¹æ³•ã€‚æ€§èƒ½ä¸€èˆ¬ã€‚ä½†å®‰å…¨ã€‚</li>
</ol>
</li>
<li>sizeï¼š
<ol>
<li>è®¾ç½®äºŒçº§ç¼“å­˜ä¸­æœ€å¤šå¯å­˜å‚¨çš„javaå¯¹è±¡æ•°é‡ã€‚é»˜è®¤å€¼1024ã€‚</li>
</ol>
</li>
</ol>
<h2 id="143-mybatisé›†æˆehcache">14.3 MyBatisé›†æˆEhCache<a hidden class="anchor" aria-hidden="true" href="#143-mybatisé›†æˆehcache">#</a></h2>
<p>é›†æˆEhCacheæ˜¯ä¸ºäº†ä»£æ›¿mybatisè‡ªå¸¦çš„äºŒçº§ç¼“å­˜ã€‚ä¸€çº§ç¼“å­˜æ˜¯æ— æ³•æ›¿ä»£çš„ã€‚</p>
<p>mybatiså¯¹å¤–æä¾›äº†æ¥å£ï¼Œä¹Ÿå¯ä»¥é›†æˆç¬¬ä¸‰æ–¹çš„ç¼“å­˜ç»„ä»¶ã€‚æ¯”å¦‚EhCacheã€Memcacheç­‰ã€‚éƒ½å¯ä»¥ã€‚</p>
<p>EhCacheæ˜¯Javaå†™çš„ã€‚Memcacheæ˜¯Cè¯­è¨€å†™çš„ã€‚æ‰€ä»¥mybatisé›†æˆEhCacheè¾ƒä¸ºå¸¸è§ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼Œå°±å¯ä»¥å®Œæˆé›†æˆï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥mybatisæ•´åˆehcacheçš„ä¾èµ–ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--mybatisé›†æˆehcacheçš„ç»„ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis.caches<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-ehcache<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>1.2.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ­¥ï¼šåœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹æ–°å»ºechcache.xmlæ–‡ä»¶ï¼Œå¹¶æä¾›ä»¥ä¸‹é…ç½®ä¿¡æ¯ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;ehcache</span> <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">xsi:noNamespaceSchemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://ehcache.org/ehcache.xsd&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">updateCheck=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--ç£ç›˜å­˜å‚¨:å°†ç¼“å­˜ä¸­æš‚æ—¶ä¸ä½¿ç”¨çš„å¯¹è±¡,è½¬ç§»åˆ°ç¡¬ç›˜,ç±»ä¼¼äºWindowsç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;diskStore</span> <span style="color:#007f7f">path=</span><span style="color:#0ff;font-weight:bold">&#34;e:/ehcache&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--defaultCacheï¼šé»˜è®¤çš„ç®¡ç†ç­–ç•¥--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--eternalï¼šè®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œå¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsï¼ŒtimeToLiveSecondsåˆ¤æ–­--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--maxElementsInMemoryï¼šåœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--overflowToDiskï¼šå¦‚æœå†…å­˜ä¸­æ•°æ®è¶…è¿‡å†…å­˜é™åˆ¶ï¼Œæ˜¯å¦è¦ç¼“å­˜åˆ°ç£ç›˜ä¸Š--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--diskPersistentï¼šæ˜¯å¦åœ¨ç£ç›˜ä¸ŠæŒä¹…åŒ–ã€‚æŒ‡é‡å¯jvmåï¼Œæ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚é»˜è®¤ä¸ºfalse--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--timeToIdleSecondsï¼šå¯¹è±¡ç©ºé—²æ—¶é—´(å•ä½ï¼šç§’)ï¼ŒæŒ‡å¯¹è±¡åœ¨å¤šé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®å°±ä¼šå¤±æ•ˆã€‚åªå¯¹eternalä¸ºfalseçš„æœ‰æ•ˆã€‚é»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸€ç›´å¯ä»¥è®¿é—®--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--timeToLiveSecondsï¼šå¯¹è±¡å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’)ï¼ŒæŒ‡å¯¹è±¡ä»åˆ›å»ºåˆ°å¤±æ•ˆæ‰€éœ€è¦çš„æ—¶é—´ã€‚åªå¯¹eternalä¸ºfalseçš„æœ‰æ•ˆã€‚é»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸€ç›´å¯ä»¥è®¿é—®--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--memoryStoreEvictionPolicyï¼šç¼“å­˜çš„3 ç§æ¸…ç©ºç­–ç•¥--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--FIFOï¼šfirst in first out (å…ˆè¿›å…ˆå‡º)--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--LFUï¼šLess Frequently Used (æœ€å°‘ä½¿ç”¨).æ„æ€æ˜¯ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚ç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhit å±æ€§ï¼Œhit å€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--LRUï¼šLeast Recently Used(æœ€è¿‘æœ€å°‘ä½¿ç”¨). (ehcache é»˜è®¤å€¼).ç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;defaultCache</span> <span style="color:#007f7f">eternal=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span> <span style="color:#007f7f">maxElementsInMemory=</span><span style="color:#0ff;font-weight:bold">&#34;1000&#34;</span> <span style="color:#007f7f">overflowToDisk=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span> <span style="color:#007f7f">diskPersistent=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#007f7f">timeToIdleSeconds=</span><span style="color:#0ff;font-weight:bold">&#34;0&#34;</span> <span style="color:#007f7f">timeToLiveSeconds=</span><span style="color:#0ff;font-weight:bold">&#34;600&#34;</span> <span style="color:#007f7f">memoryStoreEvictionPolicy=</span><span style="color:#0ff;font-weight:bold">&#34;LRU&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/ehcache&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹SqlMapper.xmlæ–‡ä»¶ä¸­çš„<cache/>æ ‡ç­¾ï¼Œæ·»åŠ typeå±æ€§ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;cache</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;org.mybatis.caches.ehcache.EhcacheCache&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å››æ­¥ï¼šç¼–å†™æµ‹è¯•ç¨‹åºä½¿ç”¨ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById2() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    SqlSession sqlSession1 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper1 = sqlSession1.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car1 = mapper1.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car1);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    sqlSession1.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    SqlSession sqlSession2 = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper2 = sqlSession2.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car2 = mapper2.<span style="color:#007f7f">selectById</span>(83L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car2);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/d3270003c64841e6431da29f5c87a7bb_MD5.png"></p>
<h1 id="åäº”mybatisçš„é€†å‘å·¥ç¨‹">åäº”ã€MyBatisçš„é€†å‘å·¥ç¨‹<a hidden class="anchor" aria-hidden="true" href="#åäº”mybatisçš„é€†å‘å·¥ç¨‹">#</a></h1>
<p>æ‰€è°“çš„é€†å‘å·¥ç¨‹æ˜¯ï¼šæ ¹æ®æ•°æ®åº“è¡¨é€†å‘ç”ŸæˆJavaçš„pojoç±»ï¼ŒSqlMapper.xmlæ–‡ä»¶ï¼Œä»¥åŠMapperæ¥å£ç±»ç­‰ã€‚</p>
<p>è¦å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œéœ€è¦å€ŸåŠ©åˆ«äººå†™å¥½çš„é€†å‘å·¥ç¨‹æ’ä»¶ã€‚</p>
<p>æ€è€ƒï¼šä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„è¯ï¼Œéœ€è¦ç»™è¿™ä¸ªæ’ä»¶é…ç½®å“ªäº›ä¿¡æ¯ï¼Ÿ</p>
<ul>
<li>pojoç±»åã€åŒ…åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li>
<li>SqlMapper.xmlæ–‡ä»¶åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li>
<li>Mapperæ¥å£åä»¥åŠç”Ÿæˆä½ç½®ã€‚</li>
<li>è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ã€‚</li>
<li>æŒ‡å®šå“ªäº›è¡¨å‚ä¸é€†å‘å·¥ç¨‹ã€‚</li>
<li>&hellip;&hellip;</li>
</ul>
<h2 id="151-é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ">15.1 é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ<a hidden class="anchor" aria-hidden="true" href="#151-é€†å‘å·¥ç¨‹é…ç½®ä¸ç”Ÿæˆ">#</a></h2>
<h3 id="ç¬¬ä¸€æ­¥åŸºç¡€ç¯å¢ƒå‡†å¤‡">ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ­¥åŸºç¡€ç¯å¢ƒå‡†å¤‡">#</a></h3>
<p>æ–°å»ºæ¨¡å—ï¼šmybatis-011-generator</p>
<p>æ‰“åŒ…æ–¹å¼ï¼šjar</p>
<h3 id="ç¬¬äºŒæ­¥åœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶">ç¬¬äºŒæ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ­¥åœ¨pomä¸­æ·»åŠ é€†å‘å·¥ç¨‹æ’ä»¶">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--å®šåˆ¶æ„å»ºè¿‡ç¨‹--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">&lt;!--å¯é…ç½®å¤šä¸ªæ’ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--å…¶ä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼šmybatisé€†å‘å·¥ç¨‹æ’ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!--æ’ä»¶çš„GAVåæ ‡--&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis.generator<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;version&gt;</span>1.4.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!--å…è®¸è¦†ç›–--&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;overwrite&gt;</span>true<span style="font-weight:bold">&lt;/overwrite&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!--æ’ä»¶çš„ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">&lt;version&gt;</span>8.0.30<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/build&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸‰æ­¥é…ç½®generatorconfigxml">ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰æ­¥é…ç½®generatorconfigxml">#</a></h3>
<p>è¯¥æ–‡ä»¶åå¿…é¡»å«åšï¼šgeneratorConfig.xml</p>
<p>è¯¥æ–‡ä»¶å¿…é¡»æ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE generatorConfiguration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;generatorConfiguration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        targetRuntimeæœ‰ä¸¤ä¸ªå€¼ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            MyBatis3Simpleï¼šç”Ÿæˆçš„æ˜¯åŸºç¡€ç‰ˆï¼Œåªæœ‰åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            MyBatis3ï¼šç”Ÿæˆçš„æ˜¯å¢å¼ºç‰ˆï¼Œé™¤äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ä¹‹å¤–è¿˜æœ‰å¤æ‚çš„å¢åˆ æ”¹æŸ¥ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;context</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;DB2Tables&#34;</span> <span style="color:#007f7f">targetRuntime=</span><span style="color:#0ff;font-weight:bold">&#34;MyBatis3&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--é˜²æ­¢ç”Ÿæˆé‡å¤ä»£ç --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;plugin</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;commentGenerator&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ˜¯å¦å»æ‰ç”Ÿæˆæ—¥æœŸ--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;suppressDate&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ˜¯å¦å»é™¤æ³¨é‡Š--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;suppressAllComments&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/commentGenerator&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--è¿æ¥æ•°æ®åº“ä¿¡æ¯--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;jdbcConnection</span> <span style="color:#007f7f">driverClass=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">connectionURL=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/powernode&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">userId=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">password=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/jdbcConnection&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- ç”ŸæˆpojoåŒ…åå’Œä½ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;javaModelGenerator</span> <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.pojo&#34;</span> <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/java&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ˜¯å¦å¼€å¯å­åŒ…--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ˜¯å¦å»é™¤å­—æ®µåçš„å‰åç©ºç™½--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;trimStrings&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/javaModelGenerator&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- ç”ŸæˆSQLæ˜ å°„æ–‡ä»¶çš„åŒ…åå’Œä½ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;sqlMapGenerator</span> <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper&#34;</span> <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/resources&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ˜¯å¦å¼€å¯å­åŒ…--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/sqlMapGenerator&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- ç”ŸæˆMapperæ¥å£çš„åŒ…åå’Œä½ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;javaClientGenerator</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;xmlMapper&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/java&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/javaClientGenerator&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- è¡¨åå’Œå¯¹åº”çš„å®ä½“ç±»å--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;table</span> <span style="color:#007f7f">tableName=</span><span style="color:#0ff;font-weight:bold">&#34;t_car&#34;</span> <span style="color:#007f7f">domainObjectName=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/context&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/generatorConfiguration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬å››æ­¥è¿è¡Œæ’ä»¶">ç¬¬å››æ­¥ï¼šè¿è¡Œæ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å››æ­¥è¿è¡Œæ’ä»¶">#</a></h3>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/11cee7cfab9ec3d8d1df4f14f84b6322_MD5.png"></p>
<h2 id="152-æµ‹è¯•é€†å‘å·¥ç¨‹ç”Ÿæˆçš„æ˜¯å¦å¥½ç”¨">15.2 æµ‹è¯•é€†å‘å·¥ç¨‹ç”Ÿæˆçš„æ˜¯å¦å¥½ç”¨<a hidden class="anchor" aria-hidden="true" href="#152-æµ‹è¯•é€†å‘å·¥ç¨‹ç”Ÿæˆçš„æ˜¯å¦å¥½ç”¨">#</a></h2>
<h3 id="ç¬¬ä¸€æ­¥ç¯å¢ƒå‡†å¤‡">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ­¥ç¯å¢ƒå‡†å¤‡">#</a></h3>
<ul>
<li>ä¾èµ–ï¼šmybatisä¾èµ–ã€mysqlé©±åŠ¨ä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ–</li>
<li>jdbc.properties</li>
<li>mybatis-config.xml</li>
<li>logback.xml</li>
</ul>
<h3 id="ç¬¬äºŒæ­¥ç¼–å†™æµ‹è¯•ç¨‹åº">ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•ç¨‹åº<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ­¥ç¼–å†™æµ‹è¯•ç¨‹åº">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.CarExample;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.math.BigDecimal;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> GeneratorTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testGenerator() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¢</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">/*Car car = new Car();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setCarNum(&#34;1111&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setBrand(&#34;æ¯”äºšè¿ªå”&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setGuidePrice(new BigDecimal(30.0));
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setProduceTime(&#34;2010-10-12&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setCarType(&#34;ç‡ƒæ²¹è½¦&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        int count = mapper.insert(car);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        System.out.println(&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34; + count);*/</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ </span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">/*int count = mapper.deleteByPrimaryKey(83L);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        System.out.println(&#34;åˆ é™¤äº†å‡ æ¡è®°å½•ï¼š&#34; + count);*/</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ”¹</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ ¹æ®ä¸»é”®ä¿®æ”¹</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">/*Car car = new Car();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setId(89L);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setGuidePrice(new BigDecimal(20.0));
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setCarType(&#34;æ–°èƒ½æº&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        int count = mapper.updateByPrimaryKey(car);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        System.out.println(&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34; + count);*/</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ ¹æ®ä¸»é”®é€‰æ‹©æ€§ä¿®æ”¹</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">/*car = new Car();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setId(89L);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setCarNum(&#34;3333&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setBrand(&#34;å®é©¬520Li&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        car.setProduceTime(&#34;1999-01-10&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        count = mapper.updateByPrimaryKeySelective(car);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        System.out.println(&#34;æ›´æ–°äº†å‡ æ¡è®°å½•ï¼š&#34; + count);*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŸ¥ä¸€ä¸ª</span>
</span></span><span style="display:flex;"><span>        Car car = mapper.<span style="color:#007f7f">selectByPrimaryKey</span>(89L);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŸ¥æ‰€æœ‰</span>
</span></span><span style="display:flex;"><span>        List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectByExample</span>(<span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>        cars.<span style="color:#007f7f">forEach</span>(c -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(c));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¤šæ¡ä»¶æŸ¥è¯¢</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// QBC é£æ ¼ï¼šQuery By Criteria ä¸€ç§æŸ¥è¯¢æ–¹å¼ï¼Œæ¯”è¾ƒé¢å‘å¯¹è±¡ï¼Œçœ‹ä¸åˆ°sqlè¯­å¥ã€‚</span>
</span></span><span style="display:flex;"><span>        CarExample carExample = <span style="color:#fff;font-weight:bold">new</span> CarExample();
</span></span><span style="display:flex;"><span>        carExample.<span style="color:#007f7f">createCriteria</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">andBrandEqualTo</span>(<span style="color:#0ff;font-weight:bold">&#34;ä¸°ç”°éœ¸é“&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">andGuidePriceGreaterThan</span>(<span style="color:#fff;font-weight:bold">new</span> BigDecimal(60.<span style="color:#007f7f">0</span>));
</span></span><span style="display:flex;"><span>        carExample.<span style="color:#007f7f">or</span>().<span style="color:#007f7f">andProduceTimeBetween</span>(<span style="color:#0ff;font-weight:bold">&#34;2000-10-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;2022-10-11&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mapper.<span style="color:#007f7f">selectByExample</span>(carExample);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="åå…­mybatisä½¿ç”¨pagehelper">åå…­ã€MyBatisä½¿ç”¨PageHelper<a hidden class="anchor" aria-hidden="true" href="#åå…­mybatisä½¿ç”¨pagehelper">#</a></h1>
<h2 id="161-limitåˆ†é¡µ">16.1 limitåˆ†é¡µ<a hidden class="anchor" aria-hidden="true" href="#161-limitåˆ†é¡µ">#</a></h2>
<p>mysqlçš„limitåé¢ä¸¤ä¸ªæ•°å­—ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ•°å­—ï¼šstartIndexï¼ˆèµ·å§‹ä¸‹æ ‡ã€‚ä¸‹æ ‡ä»0å¼€å§‹ã€‚ï¼‰</li>
<li>ç¬¬äºŒä¸ªæ•°å­—ï¼špageSizeï¼ˆæ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ¡æ•°ï¼‰</li>
</ul>
<p>å‡è®¾å·²çŸ¥é¡µç pageNumï¼Œè¿˜æœ‰æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ¡æ•°pageSizeï¼Œç¬¬ä¸€ä¸ªæ•°å­—å¯ä»¥åŠ¨æ€çš„è·å–å—ï¼Ÿ</p>
<ul>
<li>startIndex = (pageNum - 1) * pageSize</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ ‡å‡†é€šç”¨çš„mysqlåˆ†é¡µSQLï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> 
</span></span><span style="display:flex;"><span>  * 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>  tableName ...... 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">limit</span> 
</span></span><span style="display:flex;"><span>  (pageNum - <span style="color:#ff0;font-weight:bold">1</span>) * pageSize, pageSize
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨mybatisåº”è¯¥æ€ä¹ˆåšï¼Ÿ</p>
<p>æ¨¡å—åï¼šmybatis-012-page</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.annotations.Param;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    * é€šè¿‡åˆ†é¡µçš„æ–¹å¼è·å–Caråˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    * @param startIndex é¡µç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    * @param pageSize æ¯é¡µæ˜¾ç¤ºè®°å½•æ¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    */</span>
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; selectAllByPage(@Param(<span style="color:#0ff;font-weight:bold">&#34;startIndex&#34;</span>) Integer startIndex, @Param(<span style="color:#0ff;font-weight:bold">&#34;pageSize&#34;</span>) Integer pageSize);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.powernode.mybatis.mapper.CarMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAllByPage&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_car limit #{startIndex},#{pageSize}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> PageTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testPage()<span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// é¡µç </span>
</span></span><span style="display:flex;"><span>        Integer pageNum = 2;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ¯é¡µæ˜¾ç¤ºè®°å½•æ¡æ•°</span>
</span></span><span style="display:flex;"><span>        Integer pageSize = 3;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// èµ·å§‹ä¸‹æ ‡</span>
</span></span><span style="display:flex;"><span>        Integer startIndex = (pageNum - 1) * pageSize;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectAllByPage</span>(startIndex, pageSize);
</span></span><span style="display:flex;"><span>        cars.<span style="color:#007f7f">forEach</span>(car -&gt; System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/4f6be4d3bb65143b71ad22e69e446bca_MD5.png"></p>
<p>è·å–æ•°æ®ä¸éš¾ï¼Œéš¾çš„æ˜¯è·å–åˆ†é¡µç›¸å…³çš„æ•°æ®æ¯”è¾ƒéš¾ã€‚å¯ä»¥å€ŸåŠ©mybatisçš„PageHelperæ’ä»¶ã€‚</p>
<h2 id="163-pagehelperæ’ä»¶">16.3 PageHelperæ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#163-pagehelperæ’ä»¶">#</a></h2>
<p>ä½¿ç”¨PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µï¼Œæ›´åŠ çš„ä¾¿æ·ã€‚</p>
<h3 id="ç¬¬ä¸€æ­¥å¼•å…¥ä¾èµ–">ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€æ­¥å¼•å…¥ä¾èµ–">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;groupId&gt;</span>com.github.pagehelper<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;artifactId&gt;</span>pagehelper<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;version&gt;</span>5.3.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬äºŒæ­¥åœ¨mybatis-configxmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶">ç¬¬äºŒæ­¥ï¼šåœ¨mybatis-config.xmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒæ­¥åœ¨mybatis-configxmlæ–‡ä»¶ä¸­é…ç½®æ’ä»¶">#</a></h3>
<p>typeAliasesæ ‡ç­¾ä¸‹é¢è¿›è¡Œé…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;plugin</span> <span style="color:#007f7f">interceptor=</span><span style="color:#0ff;font-weight:bold">&#34;com.github.pagehelper.PageInterceptor&#34;</span><span style="font-weight:bold">&gt;&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸‰æ­¥ç¼–å†™javaä»£ç ">ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç <a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰æ­¥ç¼–å†™javaä»£ç ">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Car&gt; selectAll();
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;selectAll&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Car&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  select * from t_car
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹å‰å¼€å¯åˆ†é¡µåŠŸèƒ½ã€‚</li>
<li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹åå°è£…PageInfoå¯¹è±¡ã€‚ï¼ˆPageInfoå¯¹è±¡å°†æ¥ä¼šå­˜å‚¨åˆ°requeståŸŸå½“ä¸­ã€‚åœ¨é¡µé¢ä¸Šå±•ç¤ºã€‚ï¼‰</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testPageHelper() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å¼€å¯åˆ†é¡µ</span>
</span></span><span style="display:flex;"><span>    PageHelper.<span style="color:#007f7f">startPage</span>(2, 2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</span>
</span></span><span style="display:flex;"><span>    List&lt;Car&gt; cars = mapper.<span style="color:#007f7f">selectAll</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–åˆ†é¡µä¿¡æ¯å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>    PageInfo&lt;Car&gt; pageInfo = <span style="color:#fff;font-weight:bold">new</span> PageInfo&lt;&gt;(cars, 5);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(pageInfo);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p>PageInfo{pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3, list=Page{count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=6, pages=3, reasonable=false, pageSizeZero=false}[Car{id=86, carNum=&lsquo;1234&rsquo;, brand=&lsquo;ä¸°ç”°éœ¸é“&rsquo;, guidePrice=50.5, produceTime=&lsquo;2020-10-11&rsquo;, carType=&lsquo;ç‡ƒæ²¹è½¦&rsquo;}, Car{id=87, carNum=&lsquo;1234&rsquo;, brand=&lsquo;ä¸°ç”°éœ¸é“&rsquo;, guidePrice=50.5, produceTime=&lsquo;2020-10-11&rsquo;, carType=&lsquo;ç‡ƒæ²¹è½¦&rsquo;}], prePage=1, nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPage=true, hasNextPage=true, navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNums=[1, 2, 3]}</p>
<p>å¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>PageInfo{
</span></span><span style="display:flex;"><span>  pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3, 
</span></span><span style="display:flex;"><span>  list=Page{count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=6, pages=3, reasonable=false, pageSizeZero=false}
</span></span><span style="display:flex;"><span>  [Car{id=86, carNum=&#39;1234&#39;, brand=&#39;ä¸°ç”°éœ¸é“&#39;, guidePrice=50.5, produceTime=&#39;2020-10-11&#39;, carType=&#39;ç‡ƒæ²¹è½¦&#39;}, 
</span></span><span style="display:flex;"><span>  Car{id=87, carNum=&#39;1234&#39;, brand=&#39;ä¸°ç”°éœ¸é“&#39;, guidePrice=50.5, produceTime=&#39;2020-10-11&#39;, carType=&#39;ç‡ƒæ²¹è½¦&#39;}], 
</span></span><span style="display:flex;"><span>  prePage=1, nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPage=true, hasNextPage=true, 
</span></span><span style="display:flex;"><span>  navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNums=[1, 2, 3]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="åä¸ƒmybatisçš„æ³¨è§£å¼å¼€å‘">åä¸ƒã€MyBatisçš„æ³¨è§£å¼å¼€å‘<a hidden class="anchor" aria-hidden="true" href="#åä¸ƒmybatisçš„æ³¨è§£å¼å¼€å‘">#</a></h1>
<p>mybatisä¸­ä¹Ÿæä¾›äº†æ³¨è§£å¼å¼€å‘æ–¹å¼ï¼Œé‡‡ç”¨æ³¨è§£å¯ä»¥å‡å°‘Sqlæ˜ å°„æ–‡ä»¶çš„é…ç½®ã€‚</p>
<p>å½“ç„¶ï¼Œä½¿ç”¨æ³¨è§£å¼å¼€å‘çš„è¯ï¼Œsqlè¯­å¥æ˜¯å†™åœ¨javaç¨‹åºä¸­çš„ï¼Œè¿™ç§æ–¹å¼ä¹Ÿä¼šç»™sqlè¯­å¥çš„ç»´æŠ¤å¸¦æ¥æˆæœ¬ã€‚</p>
<p>å®˜æ–¹æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>
<blockquote>
<p><font style="color:rgb(51, 51, 51);">ä½¿ç”¨æ³¨è§£æ¥æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©ä½ æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚ å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥ã€‚</font></p>
</blockquote>
<p><font style="color:rgb(51, 51, 51);">ä½¿ç”¨æ³¨è§£ç¼–å†™å¤æ‚çš„SQLæ˜¯è¿™æ ·çš„ï¼š</font></p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/01e2bde569e422d41754dba938916cd5_MD5.png"></p>
<p>åŸåˆ™ï¼šç®€å•sqlå¯ä»¥æ³¨è§£ã€‚å¤æ‚sqlä½¿ç”¨xmlã€‚</p>
<p>æ¨¡å—åï¼šmybatis-013-annotation</p>
<p>æ‰“åŒ…æ–¹å¼ï¼šjar</p>
<p>ä¾èµ–ï¼šmybatisï¼Œmysqlé©±åŠ¨ï¼Œjunitï¼Œlogback</p>
<p>é…ç½®æ–‡ä»¶ï¼šjdbc.propertiesã€mybatis-config.xmlã€logback.xml</p>
<p>pojoï¼šcom.powernode.mybatis.pojo.Car</p>
<p>mapperæ¥å£ï¼šcom.powernode.mybatis.mapper.CarMapper</p>
<h2 id="171-insert">17.1 @Insert<a hidden class="anchor" aria-hidden="true" href="#171-insert">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.mapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.annotations.Insert;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> CarMapper {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Insert(value=<span style="color:#0ff;font-weight:bold">&#34;insert into t_car values(null,#{carNum},#{brand},#{guidePrice},#{produceTime},#{carType})&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> insert(Car car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.powernode.mybatis.test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.mapper.CarMapper;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.powernode.mybatis.pojo.Car;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.io.Resources;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.junit.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AnnotationTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsert() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>        SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>        CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        Car car = <span style="color:#fff;font-weight:bold">new</span> Car(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;1112&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å¡ç½—æ‹‰&#34;</span>, 30.<span style="color:#007f7f">0</span>, <span style="color:#0ff;font-weight:bold">&#34;2000-10-10&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;ç‡ƒæ²¹è½¦&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> count = mapper.<span style="color:#007f7f">insert</span>(car);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ’å…¥äº†å‡ æ¡è®°å½•ï¼š&#34;</span> + count);
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>        sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="172-delete">17.2 @Delete<a hidden class="anchor" aria-hidden="true" href="#172-delete">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Delete(<span style="color:#0ff;font-weight:bold">&#34;delete from t_car where id = #{id}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> deleteById(Long id);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testDelete() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    mapper.<span style="color:#007f7f">deleteById</span>(89L);
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="173-update">17.3 @Update<a hidden class="anchor" aria-hidden="true" href="#173-update">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Update(<span style="color:#0ff;font-weight:bold">&#34;update t_car set car_num=#{carNum},brand=#{brand},guide_price=#{guidePrice},produce_time=#{produceTime},car_type=#{carType} where id=#{id}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> update(Car car);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testUpdate() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car = <span style="color:#fff;font-weight:bold">new</span> Car(88L,<span style="color:#0ff;font-weight:bold">&#34;1001&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;å‡¯ç¾ç‘&#34;</span>, 30.<span style="color:#007f7f">0</span>,<span style="color:#0ff;font-weight:bold">&#34;2000-11-11&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;æ–°èƒ½æº&#34;</span>);
</span></span><span style="display:flex;"><span>    mapper.<span style="color:#007f7f">update</span>(car);
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">commit</span>();
</span></span><span style="display:flex;"><span>    sqlSession.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="174-select">17.4 @Select<a hidden class="anchor" aria-hidden="true" href="#174-select">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Select(<span style="color:#0ff;font-weight:bold">&#34;select * from t_car where id = #{id}&#34;</span>)
</span></span><span style="display:flex;"><span>@Results({
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>, id = <span style="color:#fff;font-weight:bold">true</span>),
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;car_num&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;carNum&#34;</span>),
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;brand&#34;</span>),
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;guide_price&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;guidePrice&#34;</span>),
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;produce_time&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;produceTime&#34;</span>),
</span></span><span style="display:flex;"><span>    @Result(column = <span style="color:#0ff;font-weight:bold">&#34;car_type&#34;</span>, property = <span style="color:#0ff;font-weight:bold">&#34;carType&#34;</span>)
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>Car selectById(Long id);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testSelectById() <span style="color:#fff;font-weight:bold">throws</span> Exception{
</span></span><span style="display:flex;"><span>    SqlSessionFactory sqlSessionFactory = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder().<span style="color:#007f7f">build</span>(Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>));
</span></span><span style="display:flex;"><span>    SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>();
</span></span><span style="display:flex;"><span>    CarMapper carMapper = sqlSession.<span style="color:#007f7f">getMapper</span>(CarMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>    Car car = carMapper.<span style="color:#007f7f">selectById</span>(88L);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(car);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<p><img loading="lazy" src="/posts/java%E5%9F%BA%E7%A1%80/23_mybatis/1334f277fbcfbc4cacece7cfa0853416_MD5.png"></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/java%E5%9F%BA%E7%A1%80/">JavaåŸºç¡€</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
