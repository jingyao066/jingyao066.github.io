<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>å¸ƒéš†è¿‡æ»¤å™¨ | Wjy&#39;s Blog</title>
<meta name="keywords" content="æ•°æ®ç»“æ„">
<meta name="description" content="æ¦‚è¿° åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="å¸ƒéš†è¿‡æ»¤å™¨" />
<meta property="og:description" content="æ¦‚è¿° åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-29T10:57:33+00:00" />
<meta property="article:modified_time" content="2024-03-29T10:57:33+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¸ƒéš†è¿‡æ»¤å™¨"/>
<meta name="twitter:description" content="æ¦‚è¿° åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "å¸ƒéš†è¿‡æ»¤å™¨",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "å¸ƒéš†è¿‡æ»¤å™¨",
  "name": "å¸ƒéš†è¿‡æ»¤å™¨",
  "description": "æ¦‚è¿° åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™",
  "keywords": [
    "æ•°æ®ç»“æ„"
  ],
  "articleBody": "æ¦‚è¿° åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ä¸€ä¸ªå®¹å™¨æ¥å­˜å‚¨å·²è®¿é—®è¿‡çš„ç½‘å€ã€‚å¦‚æœå°†è¿™äº›æ•°æ®ç›´æ¥å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œæ¯æ¬¡åˆ¤æ–­éƒ½è¦è¿›è¡Œç£ç›˜æŸ¥è¯¢ï¼Œè¿™å°†å¯¼è‡´å¤§é‡çš„IOæ“ä½œï¼Œæ•ˆç‡è¾ƒä½ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å°†è¿™äº›æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚åœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Redisæ¥å­˜å‚¨è¿™äº›æ•°æ®ã€‚ä½†æ˜¯ï¼Œå½“æ•°æ®é‡è¶…è¿‡ä¸Šåƒä¸‡æ—¶ï¼Œå°†ä¼šæ¶ˆè€—å‡ GBç”šè‡³å‡ åGBçš„å†…å­˜ç©ºé—´ã€‚ç„¶è€Œï¼Œå¯¹äºä»…éœ€è¦è®°å½•æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µè€Œè¨€ï¼Œè¿™æ ·ä½¿ç”¨å¤§é‡å†…å­˜æ˜¾ç„¶æ˜¯æµªè´¹çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)ã€‚å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§å ç”¨ç©ºé—´å°‘ä¸”æ—¶é—´æ•ˆç‡é«˜çš„å·¥å…·ã€‚\nå‚è€ƒï¼šhttps://mp.weixin.qq.com/s/dULRkxnN3nYrICiKZ1-sZw\nå¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹ å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æ˜¯1970å¹´ç”±å¸ƒéš†æå‡ºçš„ï¼Œå®ƒå®è´¨ä¸Šæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•° (Hashå‡½æ•°)ã€‚\nä½œç”¨ï¼šå®ƒæ˜¯ä¸€ä¸ªç©ºé—´æ•ˆç‡é«˜çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼Œç”¨æ¥å‘Šè¯‰ä½ :ä¸€ä¸ªå…ƒç´ ä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜åœ¨ã€‚\nä¼˜ç‚¹ ç›¸æ¯”äºå…¶å®ƒçš„æ•°æ®ç»“æ„ï¼Œå¸ƒéš†è¿‡æ»¤å™¨åœ¨ç©ºé—´å’Œæ—¶é—´æ–¹é¢éƒ½æœ‰å·¨å¤§çš„ä¼˜åŠ¿ã€‚å¸ƒéš†è¿‡æ»¤å™¨å­˜å‚¨ç©ºé—´å’Œæ’å…¥/æŸ¥è¯¢æ—¶é—´éƒ½æ˜¯å¸¸æ•°ï¼ˆå³hashå‡½æ•°çš„ä¸ªæ•°ï¼‰ã€‚ Hash å‡½æ•°ç›¸äº’ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œæ–¹ä¾¿ç”±ç¡¬ä»¶å¹¶è¡Œå®ç°ã€‚ å¸ƒéš†è¿‡æ»¤å™¨ä¸éœ€è¦å­˜å‚¨å…ƒç´ æœ¬èº«ï¼Œåœ¨æŸäº›å¯¹ä¿å¯†è¦æ±‚éå¸¸ä¸¥æ ¼çš„åœºåˆæœ‰ä¼˜åŠ¿ã€‚ å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥è¡¨ç¤ºå…¨é›†ï¼Œå…¶å®ƒä»»ä½•æ•°æ®ç»“æ„éƒ½ä¸èƒ½ã€‚ ç¼ºç‚¹ æœ‰è¯¯åˆ¤ç‡å­˜åœ¨ã€‚ ä¸æ”¯æŒåˆ é™¤ã€‚ é€‚ç”¨åœºæ™¯ é¢„é˜²ç¼“å­˜ç©¿é€ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œé¿å…é€šè¿‡æŸ¥è¯¢æ•°æ®åº“æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚ ç½‘ç»œçˆ¬è™«ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨æ¥å»é‡å·²ç»çˆ¬å–è¿‡çš„URLã€‚ é‚®ç®±çš„åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€‚ é»‘ç™½åå•ã€‚ å¸ƒéš†è¿‡æ»¤å™¨åŸç† ç»“æ„ å¸ƒéš†è¿‡æ»¤å™¨å®ç°åŸç†å°±æ˜¯ä¸€ä¸ªè¶…å¤§ä½æ•°çš„æ•°ç»„å’Œå¤šä¸ªä¸åŒHashç®—æ³•å‡½æ•°ã€‚å‡è®¾ä½æ•°ç»„çš„é•¿åº¦ä¸º mï¼Œå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ä¸º kã€‚å¦‚ä¸‹å›¾ï¼Œä¸€ä¸ªé•¿åº¦16ä½çš„æ•°ç»„ï¼Œ3ä¸ªä¸åŒHashç®—æ³•å‡½æ•°ï¼Œæ•°ç»„é‡Œé¢å­˜å‚¨çš„æ˜¯ bit ä½ï¼Œåªæ”¾ 0 å’Œ 1ï¼Œåˆå§‹ä¸º 0ã€‚\nä¸åŒHashç®—æ³•å‡½æ•°\næŒ‡å®šé•¿åº¦æ•°ç»„ï¼š\næ·»åŠ å…ƒç´  å°†è¦æ·»åŠ çš„å…ƒç´ åˆ†åˆ«é€šè¿‡kä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°kä¸ªå“ˆå¸Œå€¼ï¼Œè¿™kä¸ªhashå€¼å¯¹åº”ä½æ•°ç»„ä¸Šçš„kä¸ªä½ç½®ï¼Œç„¶åå°†è¿™kä¸ªä½ç½®è®¾ç½®ä¸º1ã€‚\næˆ‘ä»¬æ·»åŠ ä¸€ä¸ªdata1å’Œdata2ä¸¤ä¸ªå…ƒç´ ï¼Œä¸¤ä¸ªå…ƒç´ æ ¹æ®ä¸‰ä¸ªhashç®—æ³•å‡½æ•°è®¡ç®—å‡ºçš„å€¼ï¼Œæ³¨æ„ï¼Œä¸‰ä¸ªå€¼å¯èƒ½ä¼šå­˜åœ¨ç›¸åŒçš„å€¼ã€‚\nå…¶ä¸­data1è®¡ç®—å‡º1ã€8ã€13ä¸‰å€¼ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ä¸­å¯¹åº”çš„ä½ç½®è®¾ç½®ä¸º1ã€‚\n1 2 3 Hash1(data1)=1 Hash2(data1)=8 Hash3(data1)=13 data2è®¡ç®—å‡º2ã€5ã€13ä¸‰å€¼ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ä¸­å¯¹åº”çš„ä½ç½®è®¾ç½®ä¸º1\n1 2 3 Hash1(data2)=2 Hash2(data2)=5 Hash3(data2)=13 æˆ‘ä»¬å‘ç°data1å’Œdata2ç»è¿‡hashå‡½æ•°åï¼Œå‡ºç°äº†ä¸€ä¸ªç›¸åŒå€¼ï¼Œè¿™ç§æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ç§æƒ…å†µçš„å­˜åœ¨ï¼Œéœ€è¦å¤šä¸ªå‡½æ•°æ¥ä¿è¯æ¯ä¸ªå…ƒç´ å°½å¯èƒ½å¯¹åº”æ•°ç»„ä½ç½®çš„å”¯ä¸€æ€§ï¼Œå¯ä»¥çœ‹ä¸‹ä¸¤ä¸ªå…ƒç´ åœ¨ä¸€èµ·çš„æ•ˆæœã€‚\nå½“ä¸åŒå…ƒç´ åœ¨ä¸åŒæˆ–è€…ç›¸åŒçš„hashå‡½æ•°è®¡ç®—åï¼Œå¾—åˆ°åŒä¸€ä¸ªå€¼ï¼Œä¾æ—§åªéœ€è¦è¿™ä¸ªä½ç½®ä¿æŒ1å³å¯ã€‚\næŸ¥è¯¢å…ƒç´  å°†è¦æŸ¥è¯¢çš„å…ƒç´ åˆ†åˆ«é€šè¿‡kä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°kä¸ªå“ˆå¸Œå€¼ï¼Œè¿™kä¸ªhashå€¼å¯¹åº”ä½æ•°ç»„ä¸Šçš„kä¸ªä½ç½®ã€‚å¦‚æœè¿™kä¸ªä½ç½®ä¸­æœ‰ä¸€ä¸ªä½ç½®ä¸º0ï¼Œåˆ™æ­¤å…ƒç´ ä¸€å®šä¸å­˜åœ¨é›†åˆä¸­ã€‚å¦‚æœè¿™kä¸ªä½ç½®å…¨éƒ¨ä¸º1ï¼Œåˆ™è¿™ä¸ªå…ƒç´ å¯èƒ½å­˜åœ¨ã€‚\næˆ‘ä»¬åœ¨åˆšæ‰æ·»åŠ è¿‡data1å’Œdata2ä¸¤ä¸ªå…ƒç´ çš„å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢ä»¥ä¸‹ä¸‰ç§å…ƒç´ ï¼Œdata1å·²æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å…ƒç´ ï¼Œdata3å’Œdata4éƒ½æ˜¯æœªæ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å…ƒç´ ã€‚\næŸ¥è¯¢data1å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯1ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚\n1 2 3 Hash1(data1)=1 Hash2(data1)=8 Hash3(data1)=13 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°ç»„ä¸­1ã€8ã€13è¿™ä¸‰ä¸ªä½ç½®éƒ½æ˜¯1ï¼Œdata1å¯èƒ½å­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨ã€‚æˆ‘ä»¬ä»æ·»åŠ çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“data1æ˜¯ä¸€å®šå­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æ˜¯è¯´å¯èƒ½å‘¢ï¼Œæ˜¯å› ä¸ºæŸ¥è¯¢å‡ºæ¥ä¸‰ä¸ªä½ç½®éƒ½ä¸º1ä¸èƒ½ä»£è¡¨è¿™ä¸ªä¸‰ä¸ª1éƒ½æ˜¯åŒä¸€ä¸ªå…ƒç´ æ·»åŠ çš„ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹å…ƒç´ data3çš„æŸ¥è¯¢ã€‚\næŸ¥è¯¢data3å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯2ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚\n1 2 3 Hash1(data3)=2 Hash2(data3)=8 Hash3(data3)=13 æˆ‘ä»¬å·²çŸ¥çš„è¯¥å¸ƒéš†è¿‡æ»¤å™¨æˆ‘ä»¬æ²¡æœ‰æ·»åŠ ç»™data3ï¼Œä¸ºä»€ä¹ˆdata3æŸ¥è¯¢å‡ºæ¥ä¸‰ä¸ªä½ç½®çš„å€¼éƒ½ä¸º1å‘¢ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°data3æ‰€å‘½ä¸­çš„ä½ç½®åˆ†åˆ«æ˜¯data2æ·»åŠ æ—¶æŠŠä½ç½®2èµ‹å€¼çš„1ï¼Œå’Œdata1æ·»åŠ æ—¶æŠŠä½ç½®8å’Œä½ç½®13èµ‹å€¼çš„1ï¼Œéƒ½æ˜¯ç”±å…¶ä»–å…ƒç´ æ”¹å˜çš„ä½ç½®å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥å‘½ä¸­ä½ç½®å…¨éƒ¨ä¸º1ã€‚è¿™ä¸ªå…ƒç´ å¯èƒ½å­˜åœ¨ã€‚\næˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹data4ï¼Œçœ‹ä¸‹å‘½ä¸­ä½ç½®ä¸å…¨ä¸º0çš„æ•°æ®ã€‚æŸ¥è¯¢data4å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯2ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚\n1 2 3 Hash1(data4)=1 Hash2(data4)=8 Hash3(data4)=12 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°data4å…ƒç´ çš„hashå‡½æ•°3è®¡ç®—ä¹‹åçš„å€¼æ˜¯12ï¼Œæ•°ç»„ä½ç½®12çš„å€¼æ˜¯0ï¼Œæ²¡æœ‰å…ƒç´ åœ¨ä½ç½®12èµ‹å€¼è¿‡1ã€‚å¦‚æœdata4å­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåˆ™ä¸€å®šåœ¨æ·»åŠ data4æ—¶ä¼šæŠŠä½ç½®12èµ‹å€¼1ï¼Œæ­¤æ—¶ä½ç½®12è¿˜æ˜¯0ï¼Œåˆ™è¯´æ˜è¯¥å¸ƒéš†è¿‡æ»¤å™¨æœªæ·»åŠ è¿‡data4å…ƒç´ ï¼Œæ‰€ä»¥ä½ç½®ä¸­æœ‰ä¸€ä¸ªä½ç½®ä¸º0ã€‚åˆ™æ­¤å…ƒç´ ä¸€å®šä¸å­˜åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚\nå¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡ åˆšæ‰æŸ¥è¯¢æ—¶æˆ‘ä»¬å‘ç°data3æ²¡æœ‰æ·»åŠ è¿‡åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå´åœ¨å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢åˆ°äº†ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤äº†ã€‚é‚£å¯ä»¥ä¸å­˜åœ¨è¯¯åˆ¤æˆ–è€…å‡å°‘è¯¯åˆ¤å—ï¼Ÿäº‹å®ä¸Šè¯¯åˆ¤æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°½å¯èƒ½å‡å°è¯¯åˆ¤ã€‚ä¸‹é¢è¯´ä¸‹å¦‚ä½•å¾—åˆ°è¯¯åˆ¤ç‡ã€‚\nå‚æ•° mï¼šå¸ƒéš†è¿‡æ»¤å™¨çš„bité•¿åº¦ã€‚ nï¼šæ’å…¥è¿‡æ»¤å™¨çš„å…ƒç´ ä¸ªæ•°ã€‚ kï¼šå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ã€‚\næ¨å¯¼è¿‡ç¨‹ è¯¯åˆ¤ç‡å…¬å¼ å®ç°æ–¹æ¡ˆ Guavaå®ç° guavaæ˜¯è°·æ­Œå¼€æºå·¥å…·ç±»ï¼Œå…¶ä¸­å°±æœ‰èƒ½ç›´æ¥å®ç°å¸ƒéš†è¿‡æ»¤å™¨çš„æ–¹æ³•ï¼Œä¸éœ€è¦é‡å¤é€ è½®å­ã€‚\næ–¹æ³•å åŠŸèƒ½ å‚æ•° è¿”å›å€¼ put æ·»åŠ å…ƒç´  put(T object) boolean mightContain æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ mightContain(T object) boolean copy æ ¹æ®æ­¤å®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„BloomFilte copy() BloomFilter approximateElementCount å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡ approximateElementCount() long expectedFpp è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ expectedFpp() double isCompatible ç¡®å®šç»™å®šçš„Bloomç­›é€‰å™¨æ˜¯å¦ä¸æ­¤Bloomç­›é€‰å™¨å…¼å®¹ isCompatible(BloomFilterthat) boolean putAll é€šè¿‡æ‰§è¡Œçš„é€ä½ORå°†æ­¤Bloomè¿‡æ»¤å™¨ä¸å¦ä¸€ä¸ªBloomè¿‡æ»¤å™¨ç»„åˆ putAll(BloomFilterthat) void å¼•å…¥ä¾èµ–\n1 2 3 4 5 com.google.guava guava 23.0 æµ‹è¯•ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 private static void GuavaBloomFilter() { // åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¯¹è±¡ BloomFilter bloomFilter = BloomFilter.create(Funnels.stringFunnel(Charset.defaultCharset()),EXPECTED_INSERTIONS,FALSE_PROBABILITY); // å‘è¿‡æ»¤å™¨ä¸­æ·»åŠ å…ƒç´  bloomFilter.put(\"element001\"); bloomFilter.put(\"element003\"); // åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ System.out.println(bloomFilter.mightContain(\"element001\"));//true System.out.println(bloomFilter.mightContain(\"element002\"));//false // å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡ System.out.println(bloomFilter.approximateElementCount());// 2 // è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ System.out.println(bloomFilter.expectedFpp()); } Rediså®ç° å¼€æºRedissonæ–¹å¼ Redissonæ–¹æ³•\næ–¹æ³•å åŠŸèƒ½ å‚æ•° è¿”å›å€¼ add æ·»åŠ å…ƒç´  add(T object) boolean contains æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ contains(T object) boolean count å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡ count() long getExpectedInsertions è¿”å›çš„é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•° getExpectedInsertions() long getFalseProbability è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ getFalseProbability() double getHashIterations è¿”å›æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•° getHashIterations() int getSize è¿”å›æ­¤å®ä¾‹æ‰€éœ€Rediså†…å­˜çš„ä½æ•° getSize() long tryInit åˆå§‹åŒ–Bloomç­›é€‰å™¨å‚æ•° tryInit(long expectedInsertions, double falseProbability) boolean delete åˆ é™¤å¯¹è±¡ delete() boolean å¼•å…¥ä¾èµ–\n1 2 3 4 5 org.redisson redisson 3.22.1 æµ‹è¯•ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 private static void RedissonBloomFilter() { Config config = new Config(); config.useSingleServer().setAddress(\"redis://\" + REDIS_IP + \":\" + REDIS_PORT); config.useSingleServer().setPassword(REDIS_PASSWORD); // è·å–å®¢æˆ·ç«¯ RedissonClient redissonClient = Redisson.create(config); RBloomFilter bloomFilter = redissonClient.getBloomFilter(BLOOM_FILTER_NAME); // åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼šé¢„æœŸæ’å…¥é‡ä¸º100000000L,é¢„æœŸé”™è¯¯æ¦‚ç‡ä¸º1% bloomFilter.tryInit(EXPECTED_INSERTIONS, FALSE_PROBABILITY); // æ’å…¥æ•°æ® bloomFilter.add(\"element001\"); bloomFilter.add(\"element003\"); // åˆ¤æ–­ä¸‹é¢å…ƒç´ æ˜¯å¦åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ System.out.println(bloomFilter.contains(\"element002\"));//false System.out.println(bloomFilter.contains(\"element001\"));//true // å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡ System.out.println(bloomFilter.count());//2 // é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•° System.out.println(bloomFilter.getExpectedInsertions());//1000000 // å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ System.out.println(bloomFilter.getFalseProbability());//0.01 // æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•° System.out.println(bloomFilter.getHashIterations()); // å®ä¾‹æ‰€éœ€Rediså†…å­˜çš„ä½æ•° System.out.println(bloomFilter.getSize()); } Redis 4.0 å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶ åŸºç¡€å‘½ä»¤\nå‘½ä»¤ åŠŸèƒ½ å‚æ•° BF.RESERVE åˆ›å»ºä¸€ä¸ªå¤§å°ä¸ºcapacityï¼Œé”™è¯¯ç‡ä¸ºerror_rateçš„ç©ºçš„Bloom BF.RESERVE {key} {error_rate} {capacity} [EXPANSION {expansion}] [NONSCALING] BF.ADD å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ itom BF.ADD {key} {item} BF.MADD å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ å¤šä¸ªå…ƒæ¡ˆ BF.MADD {key} {item â€¦} BF.INSERT å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæ·»åŠ æ—¶å¯ä»¥æŒ‡å®šå¤§å°å’Œé”™è¯¯ç‡ï¼Œä¸”å¯ä»¥æ§åˆ¶åœ¨Bloomä¸å­˜åœ¨çš„æ—¶å€™æ˜¯å¦è‡ªåŠ¨åˆ›å»º BF.INSERT {key} [CAPACITY {cap}] [ERROR {error}] [EXPANSION {expansion}] [NOCREATE] [NONSCALING] ITEMS {item â€¦} BF.EXISTS æ£€æŸ¥ä¸€ä¸ªå…ƒç§¦æ˜¯å¦å¯èƒ½å­˜åœ¨äºkeyæŒ‡å®šçš„Bloomä¸­ BF.EXISTS {key} {item} BF.MEXISTS åŒæ—¶æ£€æŸ¥å¤šä¸ªå…ƒç´ æ˜¯å¦å¯èƒ½å­˜åœ¨äºkeyæŒ‡å®šçš„Bloomä¸­ BF.MEXISTS {key} {item â€¦} BF.SCANDUMP å¯¹Bloomè¿›è¡Œå¢é‡æŒä¹…åŒ–æ“ä½œ BF.SCANDUMP {key} {iter} BF.LOADCHUNK åŠ è½½SCANDUMPæŒä¹…åŒ–çš„Bloomæ•°æ® BF.LOADCHUNK {key} {iter} {data} BF.INFO æŸ¥è¯¢keyæŒ‡å®šçš„Bloomçš„ä¿¡æ¯ BF.INFO {key} BF.DEBUG æŸ¥çœ‹BloomFilterçš„å†…éƒ¨è¯¦ç»†ä¿¡æ¯(å¦‚æ¯å±‚çš„å…ƒç´ ä¸ªæ•°ï¼Œé”™è¯¯ç‡ç­‰) BF.DEBUG (key} å¼•å…¥ä¾èµ–\n1 2 3 4 5 redis.clients jedis 4.2.0 æµ‹è¯•ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 private static void RedisBloomFilter() { // å»ºç«‹è¿æ¥ BloomFilterCommands bloomFilterCommands = new JedisPooled(REDIS_IP, REDIS_PORT, \"\", REDIS_PASSWORD); // æ„å»ºå¸ƒéš†è¿‡æ»¤å™¨å‚æ•° BFReserveParams bfReserveParams = new BFReserveParams(); bfReserveParams.expansion(2); // åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ String test = bloomFilterCommands.bfReserve(BLOOM_FILTER_NAME, FALSE_PROBABILITY, EXPECTED_INSERTIONS, bfReserveParams); // å‘è¿‡æ»¤å™¨ä¸­æ·»åŠ å…ƒç´  bloomFilterCommands.bfAdd(BLOOM_FILTER_NAME, \"element001\"); bloomFilterCommands.bfAdd(BLOOM_FILTER_NAME, \"element003\"); // åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ System.out.println(bloomFilterCommands.bfExists(BLOOM_FILTER_NAME, \"element001\"));//true System.out.println(bloomFilterCommands.bfExists(BLOOM_FILTER_NAME, \"element002\"));//false } é€šè¿‡Redisæä¾›çš„bitMapè‡ªå·±å®ç° è‡ªå®šä¹‰æ–¹æ³•\næ–¹æ³•å åŠŸèƒ½ å‚æ•° è¿”å›å€¼ add æ·»åŠ å…ƒç´  add(String key, String element, int expireSec) boolean contains æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ contains(String key, String element) boolean getExpectedInsertions è¿”å›çš„é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•° getExpectedInsertions() long getFalseProbability è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ getFalseProbability() double getNumHashFunctions è¿”å›æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•° getNumHashFunctions() int getBitmapLength è¿”å›Bitmapé•¿åº¦ getBitmapLength() long BloomFilterUtils åˆ›å»ºBloomå¯¹è±¡ BloomFilterUtils(long expectedInsertions, double falseProbability) BloomFilterUtils æµ‹è¯•ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 public class BloomFilterUtils { private static final String BF_KEY_PREFIX = \"bf_\"; private long numApproxElements; private double falseProbability; // hashä¸ªæ•° private int numHashFunctions; // æ•°ç»„é•¿åº¦ private int bitmapLength; private JedisResourcePool jedisResourcePool; /** * æ„é€ å¸ƒéš†è¿‡æ»¤å™¨ã€‚æ³¨æ„ï¼šåœ¨åŒä¸€ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¸‰ä¸ªå‚æ•°åŠ¡å¿…ç›¸åŒ * * @param numApproxElements é¢„ä¼°å…ƒç´ æ•°é‡ * @param fpp å¯æ¥å—çš„æœ€å¤§è¯¯å·® * @param jedisResourcePool Codisä¸“ç”¨çš„Jedisè¿æ¥æ±  */ public BloomFilterUtils(Long numApproxElements, double fpp, JedisResourcePool jedisResourcePool) { this.numApproxElements = numApproxElements; this.falseProbability = fpp; this.jedisResourcePool = jedisResourcePool; // æ•°ç»„é•¿åº¦ m = (n * lnp)/ln2^2 bitmapLength = (int) (-numApproxElements * Math.log(fpp) / (Math.log(2) * Math.log(2))); // hashä¸ªæ•° k = (n / m ) * ln2 numHashFunctions = Math.max(1, (int) Math.round((double) bitmapLength / numApproxElements * Math.log(2))); } /** * å–å¾—é¢„ä¼°å…ƒç´ æ•°é‡ */ public long getExpectedInsertions() { return numApproxElements; } /** * è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡ */ public double getFalseProbability() { return falseProbability; } /** * å–å¾—è‡ªåŠ¨è®¡ç®—çš„æœ€ä¼˜å“ˆå¸Œå‡½æ•°ä¸ªæ•° */ public int getNumHashFunctions() { return numHashFunctions; } /** * å–å¾—è‡ªåŠ¨è®¡ç®—çš„æœ€ä¼˜Bitmapé•¿åº¦ */ public int getBitmapLength() { return bitmapLength; } /** * è®¡ç®—ä¸€ä¸ªå…ƒç´ å€¼å“ˆå¸Œåæ˜ å°„åˆ°Bitmapçš„å“ªäº›bitä¸Š * * @param element å…ƒç´ å€¼ * @return bitä¸‹æ ‡çš„æ•°ç»„ */ private long[] getBitIndices(String element) { long[] indices = new long[numHashFunctions]; // å…ƒç´  ä½¿ç”¨MurMurHash3 128ä½Hashç®—æ³•è½¬æ¢å€¼ byte[] bytes = Hashing.murmur3_128() .hashObject(element, Funnels.stringFunnel(Charset.forName(\"UTF-8\"))) .asBytes(); // ä½8ä½è½¬Longå€¼ long hash1 = Longs.fromBytes( bytes[7], bytes[6], bytes[5], bytes[4], bytes[3], bytes[2], bytes[1], bytes[0] ); // é«˜8ä½è½¬Longå€¼ long hash2 = Longs.fromBytes( bytes[15], bytes[14], bytes[13], bytes[12], bytes[11], bytes[10], bytes[9], bytes[8] ); long combinedHash = hash1; // åŒé‡å“ˆå¸Œè¿›è¡Œæ•£åˆ— for (int i = 0; i \u0026lt; numHashFunctions; i++) { indices[i] = (combinedHash \u0026 Long.MAX_VALUE) % bitmapLength; combinedHash += hash2; } return indices; } /** * æ’å…¥å…ƒç´  * * @param key åŸå§‹Redisé”®ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Š'bf_'å‰ç¼€ * @param element å…ƒç´ å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹ * @param expireSec è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ */ public void add(String key, String element, int expireSec) { if (key == null || element == null) { throw new RuntimeException(\"é”®å€¼å‡ä¸èƒ½ä¸ºç©º\"); } String actualKey = BF_KEY_PREFIX.concat(key); try (Jedis jedis = jedisResourcePool.getResource()) { try (Pipeline pipeline = jedis.pipelined()) { // éå†å…ƒç´ æ‰€æœ‰hashç»“æœçš„bitä½ç½® for (long index : getBitIndices(element)) { pipeline.setbit(actualKey, index, true); } pipeline.syncAndReturnAll(); } jedis.expire(actualKey, expireSec); } } /** * æ£€æŸ¥å…ƒç´ åœ¨é›†åˆä¸­æ˜¯å¦ï¼ˆå¯èƒ½ï¼‰å­˜åœ¨ * * @param key åŸå§‹Redisé”®ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Š'bf_'å‰ç¼€ * @param element å…ƒç´ å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹ */ public boolean contains(String key, String element) { if (key == null || element == null) { throw new RuntimeException(\"é”®å€¼å‡ä¸èƒ½ä¸ºç©º\"); } String actualKey = BF_KEY_PREFIX.concat(key); boolean result = false; try (Jedis jedis = jedisResourcePool.getResource()) { // éå†å…ƒç´ æ‰€æœ‰hashç»“æœçš„bitä½ç½® try (Pipeline pipeline = jedis.pipelined()) { for (long index : getBitIndices(element)) { pipeline.getbit(actualKey, index); } result = !pipeline.syncAndReturnAll().contains(false); } } return result; } public static void main(String[] args) { String path = Path.getCurrentPath() + \"/config/zzjodis.properties\"; ConfigReadUtil configReadUtil = new ConfigReadUtil(path); try { JedisResourcePool jedisResourcePool = RoundRobinJedisPool. create() .curatorClient(configReadUtil.getString(\"jodisZkStr\"), 5000) .zkProxyDir(configReadUtil.getString(\"zkProxyDir\")) .team(configReadUtil.getString(\"team\")) .connectionTimeoutMs(configReadUtil.getInt(\"connectionTimeoutMs\")) .soTimeoutMs(configReadUtil.getInt(\"soTimeoutMs\")) .appKey(configReadUtil.getString(\"appKey\")) .password(\"\".equals(configReadUtil.getString(\"password\")) ? null : configReadUtil.getString(\"password\")) .build(); BloomFilterUtils bloomFilterUtils = new BloomFilterUtils(10000, 0.01, jedisResourcePool); bloomFilterUtils.add(\"filter01\", \"element001\", 30 * 60); System.out.println(bloomFilterUtils.contains(\"filter01\", \"element001\")); // true System.out.println(bloomFilterUtils.contains(\"filter01\", \"element002\")); // false } catch (Exception e) { e.printStackTrace(); } } } å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨ ä¸šåŠ¡åœºæ™¯ åœ¨C1çœ‹è§†é¢‘å¾—æ›å…‰æ´»åŠ¨é¡¹ç›®ä¸­ï¼Œä¸ºäº†åœ¨ä¸ªäººä¸­å¿ƒé¡µä¸ºæ‹¥æœ‰åœ¨æ¶å•†å“çš„ç”¨æˆ·å±•ç¤ºæ´»åŠ¨å…¥å£ï¼Œéœ€è¦é«˜æ•ˆåœ°åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰åœ¨æ¶å•†å“ã€‚ç›®å‰å­˜åœ¨ä¸Šäº¿å­˜é‡ç”¨æˆ·å’Œä¸Šç™¾ä¸‡çš„åœ¨æ¶å•†å“ç”¨æˆ·ã€‚æ¯æ¬¡ç”¨æˆ·è¿›å…¥ä¸ªäººä¸­å¿ƒé¡µæ—¶ï¼Œéœ€è¦æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦æœ‰åœ¨æ¶å•†å“ï¼Œä»¥ç¡®å®šæ˜¯å¦å±•ç¤ºæ´»åŠ¨å…¥å£ã€‚\nç„¶è€Œï¼Œç›´æ¥æŸ¥è¯¢å•†å“æœåŠ¡ä¼šå¯¼è‡´å¤§é‡çš„é‡å¤æŸ¥è¯¢å’Œå¢åŠ æœåŠ¡è€—æ—¶ã€‚å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥ä¼˜åŒ–æ­¤è¿‡ç¨‹ï¼Œå®ƒåªéœ€è¦å‡ åMBå†…å­˜ï¼Œç›¸æ¯”äºä½¿ç”¨Rediså­˜å‚¨æ¯æ—¥åœ¨æ¶å•†å“ç”¨æˆ·éœ€è¦å‡ GBå†…å­˜ï¼Œæ›´åŠ é«˜æ•ˆèŠ‚çœå†…å­˜æ¶ˆè€—ã€‚\nå¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹© å®ç°æ–¹å¼ å‚¨å­˜ä½ç½® é€‚ç”¨åœºæ™¯ å¤‡æ³¨ Guava æœºå™¨ å•æœº åªéœ€è¦æœºå™¨å†…å­˜ä¸éœ€è¦å…¶ä»–èµ„æº Redisson redis åˆ†å¸ƒå¼ è¿æ¥Rediså³å¯ä½¿ç”¨ Redisæ’ä»¶ redis åˆ†å¸ƒå¼ éœ€è¦å¯¹redisé›†ç¾¤è¿›è¡Œè®¾ç½®æ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶ Redisçš„bitMap redis åˆ†å¸ƒå¼ éœ€è¦è‡ªå·±å®ç°æ·»åŠ å’ŒæŸ¥è¯¢ å¯¹äºåˆ†å¸ƒå¼æœåŠ¡ç¯å¢ƒï¼ŒGuavaæ–¹å¼ä¸é€‚åˆä½¿ç”¨ï¼Œè€ŒRedisæ’ä»¶éœ€è¦å¤æ‚çš„é…ç½®å’Œé«˜æˆæœ¬æ”¯æŒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRedissonè¿æ¥Rediså¹¶è¿›è¡Œæ’å…¥å’ŒæŸ¥è¯¢çš„æ–¹å¼æ›´é€‚åˆå½“å‰åœºæ™¯ï¼Œå› æ­¤æœ€ç»ˆé€‰æ‹©äº†Redissonæ–¹å¼ã€‚\nä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ å†…å­˜å ç”¨æƒ…å†µ ä¸Šçº¿åˆæœŸï¼Œæˆ‘ä»¬å°†ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·å­˜å…¥Codisç¼“å­˜ä¸­ã€‚è¿™ä½¿å¾—å†…å­˜ä»1.98GBå¢é•¿åˆ°9.52GBï¼Œæ­¤æ¬¡æ•°æ®é‡å ç”¨äº†7.54GBçš„å†…å­˜ã€‚ éšåï¼Œä¸ºè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬æˆåŠŸå°†ç”¨æˆ·é‡ç¼©å°äº†25å€ã€‚è¿™ä½¿å¾—å†…å­˜å ç”¨é™è‡³308.8MBã€‚ æœ€ç»ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°äº†Redissonæ–¹å¼ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚è¿™æ¬¡Rediså†…å­˜ä»2.7172GBå¢é•¿åˆ°2.7566GBï¼Œè€Œæ•°æ®é‡ä»…å ç”¨39.4MBçš„å†…å­˜ã€‚ ä½¿ç”¨Codiså†…å­˜å ç”¨æƒ…å†µ\næ’å…¥æ•°æ®å‰ï¼š1.9G\næ’å…¥æ•°æ®åï¼š9.5G\nä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å†…å­˜å ç”¨æƒ…å†µï¼š\næ’å…¥æ•°æ®å‰ï¼š2.71G\næ’å…¥æ•°æ®åï¼š2.75G\næ€§èƒ½æå‡ é€šè¿‡ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å‡å°‘å¯¹å•†å“æœåŠ¡çš„æŸ¥è¯¢ï¼Œä»è€Œæå‡æœåŠ¡æ€§èƒ½ã€‚ä¹‹å‰éœ€è¦æŸ¥è¯¢å•†å“æœåŠ¡æ¥åˆ¤æ–­ç”¨æˆ·å•†å“çŠ¶æ€ï¼Œä½†ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨åï¼Œå‡å°‘äº†è¿™éƒ¨åˆ†æœåŠ¡é—´çš„è°ƒç”¨è€—æ—¶ï¼Œæ•´ä½“æµç¨‹çš„è€—æ—¶å‡å°‘äº†å¤§çº¦5msã€‚\n",
  "wordCount" : "5340",
  "inLanguage": "en",
  "datePublished": "2024-03-29T10:57:33Z",
  "dateModified": "2024-03-29T10:57:33Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath:  [['\\(', '\\)'], ['$', '$']],  
    }
  };
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      å¸ƒéš†è¿‡æ»¤å™¨
    </h1>
    <div class="post-meta"><span title='2024-03-29 10:57:33 +0000 UTC'>2024-03-29</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a><ul>
                        
                <li>
                    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e7%ae%80%e4%bb%8b" aria-label="å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹">å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹</a><ul>
                        
                <li>
                    <a href="#%e4%bc%98%e7%82%b9" aria-label="ä¼˜ç‚¹">ä¼˜ç‚¹</a></li>
                <li>
                    <a href="#%e7%bc%ba%e7%82%b9" aria-label="ç¼ºç‚¹">ç¼ºç‚¹</a></li>
                <li>
                    <a href="#%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="é€‚ç”¨åœºæ™¯">é€‚ç”¨åœºæ™¯</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e5%8e%9f%e7%90%86" aria-label="å¸ƒéš†è¿‡æ»¤å™¨åŸç†">å¸ƒéš†è¿‡æ»¤å™¨åŸç†</a><ul>
                        
                <li>
                    <a href="#%e7%bb%93%e6%9e%84" aria-label="ç»“æ„">ç»“æ„</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0" aria-label="æ·»åŠ å…ƒç´ ">æ·»åŠ å…ƒç´ </a></li>
                <li>
                    <a href="#%e6%9f%a5%e8%af%a2%e5%85%83%e7%b4%a0" aria-label="æŸ¥è¯¢å…ƒç´ ">æŸ¥è¯¢å…ƒç´ </a></li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e8%af%af%e5%88%a4%e7%8e%87" aria-label="å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡">å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡</a><ul>
                        
                <li>
                    <a href="#%e5%8f%82%e6%95%b0" aria-label="å‚æ•°">å‚æ•°</a></li>
                <li>
                    <a href="#%e6%8e%a8%e5%af%bc%e8%bf%87%e7%a8%8b" aria-label="æ¨å¯¼è¿‡ç¨‹">æ¨å¯¼è¿‡ç¨‹</a></li>
                <li>
                    <a href="#%e8%af%af%e5%88%a4%e7%8e%87%e5%85%ac%e5%bc%8f" aria-label="è¯¯åˆ¤ç‡å…¬å¼">è¯¯åˆ¤ç‡å…¬å¼</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%a1%88" aria-label="å®ç°æ–¹æ¡ˆ">å®ç°æ–¹æ¡ˆ</a><ul>
                        
                <li>
                    <a href="#guava%e5%ae%9e%e7%8e%b0" aria-label="Guavaå®ç°">Guavaå®ç°</a></li>
                <li>
                    <a href="#redis%e5%ae%9e%e7%8e%b0" aria-label="Rediså®ç°">Rediså®ç°</a><ul>
                        
                <li>
                    <a href="#%e5%bc%80%e6%ba%90redisson%e6%96%b9%e5%bc%8f" aria-label="å¼€æºRedissonæ–¹å¼">å¼€æºRedissonæ–¹å¼</a></li>
                <li>
                    <a href="#redis-40-%e5%ae%98%e6%96%b9%e6%8f%90%e4%be%9b%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e6%8f%92%e4%bb%b6" aria-label="Redis 4.0 å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶">Redis 4.0 å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶</a></li>
                <li>
                    <a href="#%e9%80%9a%e8%bf%87redis%e6%8f%90%e4%be%9b%e7%9a%84bitmap%e8%87%aa%e5%b7%b1%e5%ae%9e%e7%8e%b0" aria-label="é€šè¿‡Redisæä¾›çš„bitMapè‡ªå·±å®ç°">é€šè¿‡Redisæä¾›çš„bitMapè‡ªå·±å®ç°</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e5%95%86%e4%b8%9a%e8%bf%90%e7%94%a8" aria-label="å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨">å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨</a><ul>
                        
                <li>
                    <a href="#%e4%b8%9a%e5%8a%a1%e5%9c%ba%e6%99%af" aria-label="ä¸šåŠ¡åœºæ™¯">ä¸šåŠ¡åœºæ™¯</a></li>
                <li>
                    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e9%80%89%e6%8b%a9" aria-label="å¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹©">å¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹©</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e6%95%88%e6%9e%9c" aria-label="ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ">ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ</a><ul>
                        
                <li>
                    <a href="#%e5%86%85%e5%ad%98%e5%8d%a0%e7%94%a8%e6%83%85%e5%86%b5" aria-label="å†…å­˜å ç”¨æƒ…å†µ">å†…å­˜å ç”¨æƒ…å†µ</a></li>
                <li>
                    <a href="#%e6%80%a7%e8%83%bd%e6%8f%90%e5%8d%87" aria-label="æ€§èƒ½æå‡">æ€§èƒ½æå‡</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p>åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦åœ¨å¤§é‡æ•°æ®ä¸­åˆ¤æ–­ç›®æ ‡æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªç½‘å€æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ã€‚ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ä¸€ä¸ªå®¹å™¨æ¥å­˜å‚¨å·²è®¿é—®è¿‡çš„ç½‘å€ã€‚å¦‚æœå°†è¿™äº›æ•°æ®ç›´æ¥å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œæ¯æ¬¡åˆ¤æ–­éƒ½è¦è¿›è¡Œç£ç›˜æŸ¥è¯¢ï¼Œè¿™å°†å¯¼è‡´å¤§é‡çš„IOæ“ä½œï¼Œæ•ˆç‡è¾ƒä½ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å°†è¿™äº›æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚åœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Redisæ¥å­˜å‚¨è¿™äº›æ•°æ®ã€‚ä½†æ˜¯ï¼Œå½“æ•°æ®é‡è¶…è¿‡ä¸Šåƒä¸‡æ—¶ï¼Œå°†ä¼šæ¶ˆè€—å‡ GBç”šè‡³å‡ åGBçš„å†…å­˜ç©ºé—´ã€‚ç„¶è€Œï¼Œå¯¹äºä»…éœ€è¦è®°å½•æ•°æ®æ˜¯å¦å­˜åœ¨çš„æƒ…å†µè€Œè¨€ï¼Œè¿™æ ·ä½¿ç”¨å¤§é‡å†…å­˜æ˜¾ç„¶æ˜¯æµªè´¹çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)ã€‚å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§å ç”¨ç©ºé—´å°‘ä¸”æ—¶é—´æ•ˆç‡é«˜çš„å·¥å…·ã€‚</p>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/dULRkxnN3nYrICiKZ1-sZw</p>
<h2 id="å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹">å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹<a hidden class="anchor" aria-hidden="true" href="#å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹">#</a></h2>
<p>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æ˜¯1970å¹´ç”±å¸ƒéš†æå‡ºçš„ï¼Œå®ƒå®è´¨ä¸Šæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•° (Hashå‡½æ•°)ã€‚</p>
<p>ä½œç”¨ï¼šå®ƒæ˜¯ä¸€ä¸ªç©ºé—´æ•ˆç‡é«˜çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼Œç”¨æ¥å‘Šè¯‰ä½ :<strong>ä¸€ä¸ªå…ƒç´ ä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜åœ¨</strong>ã€‚</p>
<h3 id="ä¼˜ç‚¹"><strong>ä¼˜ç‚¹</strong><a hidden class="anchor" aria-hidden="true" href="#ä¼˜ç‚¹">#</a></h3>
<ul>
<li>ç›¸æ¯”äºå…¶å®ƒçš„æ•°æ®ç»“æ„ï¼Œå¸ƒéš†è¿‡æ»¤å™¨åœ¨ç©ºé—´å’Œæ—¶é—´æ–¹é¢éƒ½æœ‰å·¨å¤§çš„ä¼˜åŠ¿ã€‚å¸ƒéš†è¿‡æ»¤å™¨å­˜å‚¨ç©ºé—´å’Œæ’å…¥/æŸ¥è¯¢æ—¶é—´éƒ½æ˜¯å¸¸æ•°ï¼ˆå³hashå‡½æ•°çš„ä¸ªæ•°ï¼‰ã€‚</li>
<li>Hash å‡½æ•°ç›¸äº’ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œæ–¹ä¾¿ç”±ç¡¬ä»¶å¹¶è¡Œå®ç°ã€‚</li>
<li>å¸ƒéš†è¿‡æ»¤å™¨ä¸éœ€è¦å­˜å‚¨å…ƒç´ æœ¬èº«ï¼Œåœ¨æŸäº›å¯¹ä¿å¯†è¦æ±‚éå¸¸ä¸¥æ ¼çš„åœºåˆæœ‰ä¼˜åŠ¿ã€‚</li>
<li>å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥è¡¨ç¤ºå…¨é›†ï¼Œå…¶å®ƒä»»ä½•æ•°æ®ç»“æ„éƒ½ä¸èƒ½ã€‚</li>
</ul>
<h3 id="ç¼ºç‚¹"><strong>ç¼ºç‚¹</strong><a hidden class="anchor" aria-hidden="true" href="#ç¼ºç‚¹">#</a></h3>
<ul>
<li>æœ‰è¯¯åˆ¤ç‡å­˜åœ¨ã€‚</li>
<li>ä¸æ”¯æŒåˆ é™¤ã€‚</li>
</ul>
<h3 id="é€‚ç”¨åœºæ™¯"><strong>é€‚ç”¨åœºæ™¯</strong><a hidden class="anchor" aria-hidden="true" href="#é€‚ç”¨åœºæ™¯">#</a></h3>
<ul>
<li>é¢„é˜²ç¼“å­˜ç©¿é€ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œé¿å…é€šè¿‡æŸ¥è¯¢æ•°æ®åº“æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚</li>
<li>ç½‘ç»œçˆ¬è™«ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨æ¥å»é‡å·²ç»çˆ¬å–è¿‡çš„URLã€‚</li>
<li>é‚®ç®±çš„åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€‚</li>
<li>é»‘ç™½åå•ã€‚</li>
</ul>
<h1 id="å¸ƒéš†è¿‡æ»¤å™¨åŸç†">å¸ƒéš†è¿‡æ»¤å™¨åŸç†<a hidden class="anchor" aria-hidden="true" href="#å¸ƒéš†è¿‡æ»¤å™¨åŸç†">#</a></h1>
<h2 id="ç»“æ„">ç»“æ„<a hidden class="anchor" aria-hidden="true" href="#ç»“æ„">#</a></h2>
<p>å¸ƒéš†è¿‡æ»¤å™¨å®ç°åŸç†å°±æ˜¯<strong>ä¸€ä¸ªè¶…å¤§ä½æ•°çš„æ•°ç»„å’Œå¤šä¸ªä¸åŒHashç®—æ³•å‡½æ•°</strong>ã€‚å‡è®¾ä½æ•°ç»„çš„é•¿åº¦ä¸º mï¼Œå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ä¸º kã€‚å¦‚ä¸‹å›¾ï¼Œä¸€ä¸ªé•¿åº¦16ä½çš„æ•°ç»„ï¼Œ3ä¸ªä¸åŒHashç®—æ³•å‡½æ•°ï¼Œæ•°ç»„é‡Œé¢å­˜å‚¨çš„æ˜¯ bit ä½ï¼Œåªæ”¾ 0 å’Œ 1ï¼Œåˆå§‹ä¸º 0ã€‚</p>
<p>ä¸åŒHashç®—æ³•å‡½æ•°</p>
<p><img loading="lazy" src="1.png" alt=""  />
</p>
<p>æŒ‡å®šé•¿åº¦æ•°ç»„ï¼š</p>
<p><img loading="lazy" src="2.png" alt=""  />
</p>
<h2 id="æ·»åŠ å…ƒç´ ">æ·»åŠ å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#æ·»åŠ å…ƒç´ ">#</a></h2>
<p>å°†è¦æ·»åŠ çš„å…ƒç´ åˆ†åˆ«é€šè¿‡kä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°kä¸ªå“ˆå¸Œå€¼ï¼Œè¿™kä¸ªhashå€¼å¯¹åº”ä½æ•°ç»„ä¸Šçš„kä¸ªä½ç½®ï¼Œç„¶åå°†è¿™kä¸ªä½ç½®è®¾ç½®ä¸º1ã€‚</p>
<p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªdata1å’Œdata2ä¸¤ä¸ªå…ƒç´ ï¼Œä¸¤ä¸ªå…ƒç´ æ ¹æ®ä¸‰ä¸ªhashç®—æ³•å‡½æ•°è®¡ç®—å‡ºçš„å€¼ï¼Œæ³¨æ„ï¼Œä¸‰ä¸ªå€¼å¯èƒ½ä¼šå­˜åœ¨ç›¸åŒçš„å€¼ã€‚</p>
<p>å…¶ä¸­data1è®¡ç®—å‡º1ã€8ã€13ä¸‰å€¼ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ä¸­å¯¹åº”çš„ä½ç½®è®¾ç½®ä¸º1ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hash1(data1)=1
</span></span><span style="display:flex;"><span>Hash2(data1)=8
</span></span><span style="display:flex;"><span>Hash3(data1)=13
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="3.png" alt=""  />
</p>
<p>data2è®¡ç®—å‡º2ã€5ã€13ä¸‰å€¼ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ä¸­å¯¹åº”çš„ä½ç½®è®¾ç½®ä¸º1</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hash1(data2)=2
</span></span><span style="display:flex;"><span>Hash2(data2)=5
</span></span><span style="display:flex;"><span>Hash3(data2)=13
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="4.png" alt=""  />
</p>
<p>æˆ‘ä»¬å‘ç°data1å’Œdata2ç»è¿‡hashå‡½æ•°åï¼Œå‡ºç°äº†ä¸€ä¸ªç›¸åŒå€¼ï¼Œè¿™ç§æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ç§æƒ…å†µçš„å­˜åœ¨ï¼Œéœ€è¦å¤šä¸ªå‡½æ•°æ¥ä¿è¯æ¯ä¸ªå…ƒç´ å°½å¯èƒ½å¯¹åº”æ•°ç»„ä½ç½®çš„å”¯ä¸€æ€§ï¼Œå¯ä»¥çœ‹ä¸‹ä¸¤ä¸ªå…ƒç´ åœ¨ä¸€èµ·çš„æ•ˆæœã€‚</p>
<p><img loading="lazy" src="5.png" alt=""  />
</p>
<p>å½“ä¸åŒå…ƒç´ åœ¨ä¸åŒæˆ–è€…ç›¸åŒçš„hashå‡½æ•°è®¡ç®—åï¼Œå¾—åˆ°åŒä¸€ä¸ªå€¼ï¼Œä¾æ—§åªéœ€è¦è¿™ä¸ªä½ç½®ä¿æŒ1å³å¯ã€‚</p>
<h2 id="æŸ¥è¯¢å…ƒç´ ">æŸ¥è¯¢å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#æŸ¥è¯¢å…ƒç´ ">#</a></h2>
<p>å°†è¦æŸ¥è¯¢çš„å…ƒç´ åˆ†åˆ«é€šè¿‡kä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°kä¸ªå“ˆå¸Œå€¼ï¼Œè¿™kä¸ªhashå€¼å¯¹åº”ä½æ•°ç»„ä¸Šçš„kä¸ªä½ç½®ã€‚å¦‚æœè¿™kä¸ªä½ç½®ä¸­æœ‰ä¸€ä¸ªä½ç½®ä¸º0ï¼Œåˆ™æ­¤å…ƒç´ ä¸€å®šä¸å­˜åœ¨é›†åˆä¸­ã€‚å¦‚æœè¿™kä¸ªä½ç½®å…¨éƒ¨ä¸º1ï¼Œåˆ™è¿™ä¸ªå…ƒç´ å¯èƒ½å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬åœ¨åˆšæ‰æ·»åŠ è¿‡data1å’Œdata2ä¸¤ä¸ªå…ƒç´ çš„å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢ä»¥ä¸‹ä¸‰ç§å…ƒç´ ï¼Œdata1å·²æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å…ƒç´ ï¼Œdata3å’Œdata4éƒ½æ˜¯æœªæ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å…ƒç´ ã€‚</p>
<p>æŸ¥è¯¢data1å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯1ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hash1(data1)=1
</span></span><span style="display:flex;"><span>Hash2(data1)=8
</span></span><span style="display:flex;"><span>Hash3(data1)=13
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="6.png" alt=""  />
</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°ç»„ä¸­1ã€8ã€13è¿™ä¸‰ä¸ªä½ç½®éƒ½æ˜¯1ï¼Œdata1å¯èƒ½å­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨ã€‚æˆ‘ä»¬ä»æ·»åŠ çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“data1æ˜¯ä¸€å®šå­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æ˜¯è¯´å¯èƒ½å‘¢ï¼Œæ˜¯å› ä¸ºæŸ¥è¯¢å‡ºæ¥ä¸‰ä¸ªä½ç½®éƒ½ä¸º1ä¸èƒ½ä»£è¡¨è¿™ä¸ªä¸‰ä¸ª1éƒ½æ˜¯åŒä¸€ä¸ªå…ƒç´ æ·»åŠ çš„ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹å…ƒç´ data3çš„æŸ¥è¯¢ã€‚</p>
<p>æŸ¥è¯¢data3å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯2ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hash1(data3)=2
</span></span><span style="display:flex;"><span>Hash2(data3)=8
</span></span><span style="display:flex;"><span>Hash3(data3)=13
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="7.png" alt=""  />
</p>
<p>æˆ‘ä»¬å·²çŸ¥çš„è¯¥å¸ƒéš†è¿‡æ»¤å™¨æˆ‘ä»¬æ²¡æœ‰æ·»åŠ ç»™data3ï¼Œä¸ºä»€ä¹ˆdata3æŸ¥è¯¢å‡ºæ¥ä¸‰ä¸ªä½ç½®çš„å€¼éƒ½ä¸º1å‘¢ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°data3æ‰€å‘½ä¸­çš„ä½ç½®åˆ†åˆ«æ˜¯data2æ·»åŠ æ—¶æŠŠä½ç½®2èµ‹å€¼çš„1ï¼Œå’Œdata1æ·»åŠ æ—¶æŠŠä½ç½®8å’Œä½ç½®13èµ‹å€¼çš„1ï¼Œéƒ½æ˜¯ç”±å…¶ä»–å…ƒç´ æ”¹å˜çš„ä½ç½®å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥å‘½ä¸­ä½ç½®å…¨éƒ¨ä¸º1ã€‚è¿™ä¸ªå…ƒç´ å¯èƒ½å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹data4ï¼Œçœ‹ä¸‹å‘½ä¸­ä½ç½®ä¸å…¨ä¸º0çš„æ•°æ®ã€‚æŸ¥è¯¢data4å…ˆæ ¹æ®æ·»åŠ æ—¶çš„ä¸‰ä¸ªhashå‡½æ•°è®¡ç®—åˆ†åˆ«å¯¹åº”å€¼ï¼Œå€¼åˆ†åˆ«æ˜¯2ã€8ã€13ï¼Œç„¶åæŸ¥è¯¢æ•°ç»„ä¸­è¿™ä¸‰ä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸º1ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hash1(data4)=1
</span></span><span style="display:flex;"><span>Hash2(data4)=8
</span></span><span style="display:flex;"><span>Hash3(data4)=12
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="8.png" alt=""  />
</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°data4å…ƒç´ çš„hashå‡½æ•°3è®¡ç®—ä¹‹åçš„å€¼æ˜¯12ï¼Œæ•°ç»„ä½ç½®12çš„å€¼æ˜¯0ï¼Œæ²¡æœ‰å…ƒç´ åœ¨ä½ç½®12èµ‹å€¼è¿‡1ã€‚å¦‚æœdata4å­˜åœ¨äºè¯¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåˆ™ä¸€å®šåœ¨æ·»åŠ data4æ—¶ä¼šæŠŠä½ç½®12èµ‹å€¼1ï¼Œæ­¤æ—¶ä½ç½®12è¿˜æ˜¯0ï¼Œåˆ™è¯´æ˜è¯¥å¸ƒéš†è¿‡æ»¤å™¨æœªæ·»åŠ è¿‡data4å…ƒç´ ï¼Œæ‰€ä»¥ä½ç½®ä¸­æœ‰ä¸€ä¸ªä½ç½®ä¸º0ã€‚åˆ™æ­¤å…ƒç´ ä¸€å®šä¸å­˜åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚</p>
<h1 id="å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡">å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡<a hidden class="anchor" aria-hidden="true" href="#å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤ç‡">#</a></h1>
<p>åˆšæ‰æŸ¥è¯¢æ—¶æˆ‘ä»¬å‘ç°data3æ²¡æœ‰æ·»åŠ è¿‡åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå´åœ¨å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢åˆ°äº†ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯å¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤äº†ã€‚é‚£å¯ä»¥ä¸å­˜åœ¨è¯¯åˆ¤æˆ–è€…å‡å°‘è¯¯åˆ¤å—ï¼Ÿäº‹å®ä¸Šè¯¯åˆ¤æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å°½å¯èƒ½å‡å°è¯¯åˆ¤</strong>ã€‚ä¸‹é¢è¯´ä¸‹å¦‚ä½•å¾—åˆ°è¯¯åˆ¤ç‡ã€‚</p>
<h2 id="å‚æ•°">å‚æ•°<a hidden class="anchor" aria-hidden="true" href="#å‚æ•°">#</a></h2>
<p>mï¼šå¸ƒéš†è¿‡æ»¤å™¨çš„bité•¿åº¦ã€‚
nï¼šæ’å…¥è¿‡æ»¤å™¨çš„å…ƒç´ ä¸ªæ•°ã€‚
kï¼šå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ã€‚</p>
<h2 id="æ¨å¯¼è¿‡ç¨‹">æ¨å¯¼è¿‡ç¨‹<a hidden class="anchor" aria-hidden="true" href="#æ¨å¯¼è¿‡ç¨‹">#</a></h2>
<p><img loading="lazy" src="9.png" alt=""  />
</p>
<h2 id="è¯¯åˆ¤ç‡å…¬å¼">è¯¯åˆ¤ç‡å…¬å¼<a hidden class="anchor" aria-hidden="true" href="#è¯¯åˆ¤ç‡å…¬å¼">#</a></h2>
<p><img loading="lazy" src="10.png" alt=""  />
</p>
<h1 id="å®ç°æ–¹æ¡ˆ">å®ç°æ–¹æ¡ˆ<a hidden class="anchor" aria-hidden="true" href="#å®ç°æ–¹æ¡ˆ">#</a></h1>
<h2 id="guavaå®ç°">Guavaå®ç°<a hidden class="anchor" aria-hidden="true" href="#guavaå®ç°">#</a></h2>
<p>guavaæ˜¯è°·æ­Œå¼€æºå·¥å…·ç±»ï¼Œå…¶ä¸­å°±æœ‰èƒ½ç›´æ¥å®ç°å¸ƒéš†è¿‡æ»¤å™¨çš„æ–¹æ³•ï¼Œä¸éœ€è¦é‡å¤é€ è½®å­ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">æ–¹æ³•å</th>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">put</td>
<td style="text-align:left">æ·»åŠ å…ƒç´ </td>
<td style="text-align:left">put(T object)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">mightContain</td>
<td style="text-align:left">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</td>
<td style="text-align:left">mightContain(T object)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">copy</td>
<td style="text-align:left">æ ¹æ®æ­¤å®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„BloomFilte</td>
<td style="text-align:left">copy()</td>
<td style="text-align:left">BloomFilter</td>
</tr>
<tr>
<td style="text-align:left">approximateElementCount</td>
<td style="text-align:left">å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡</td>
<td style="text-align:left">approximateElementCount()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">expectedFpp</td>
<td style="text-align:left">è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡</td>
<td style="text-align:left">expectedFpp()</td>
<td style="text-align:left">double</td>
</tr>
<tr>
<td style="text-align:left">isCompatible</td>
<td style="text-align:left">ç¡®å®šç»™å®šçš„Bloomç­›é€‰å™¨æ˜¯å¦ä¸æ­¤Bloomç­›é€‰å™¨å…¼å®¹</td>
<td style="text-align:left">isCompatible(BloomFilterthat)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">putAll</td>
<td style="text-align:left">é€šè¿‡æ‰§è¡Œçš„é€ä½ORå°†æ­¤Bloomè¿‡æ»¤å™¨ä¸å¦ä¸€ä¸ªBloomè¿‡æ»¤å™¨ç»„åˆ</td>
<td style="text-align:left">putAll(BloomFilterthat)</td>
<td style="text-align:left">void</td>
</tr>
</tbody>
</table>
<p>å¼•å…¥ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>com.google.guava<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>guava<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>23.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ä»£ç </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> GuavaBloomFilter() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BloomFilter bloomFilter = BloomFilter.<span style="color:#007f7f">create</span>(Funnels.<span style="color:#007f7f">stringFunnel</span>(Charset.<span style="color:#007f7f">defaultCharset</span>()),EXPECTED_INSERTIONS,FALSE_PROBABILITY);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å‘è¿‡æ»¤å™¨ä¸­æ·»åŠ å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    bloomFilter.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>);
</span></span><span style="display:flex;"><span>    bloomFilter.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;element003&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">mightContain</span>(<span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>));<span style="color:#007f7f">//true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">mightContain</span>(<span style="color:#0ff;font-weight:bold">&#34;element002&#34;</span>));<span style="color:#007f7f">//false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">approximateElementCount</span>());<span style="color:#007f7f">// 2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">expectedFpp</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="rediså®ç°">Rediså®ç°<a hidden class="anchor" aria-hidden="true" href="#rediså®ç°">#</a></h2>
<h3 id="å¼€æºredissonæ–¹å¼">å¼€æºRedissonæ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#å¼€æºredissonæ–¹å¼">#</a></h3>
<p>Redissonæ–¹æ³•</p>
<table>
<thead>
<tr>
<th style="text-align:left">æ–¹æ³•å</th>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">add</td>
<td style="text-align:left">æ·»åŠ å…ƒç´ </td>
<td style="text-align:left">add(T object)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">contains</td>
<td style="text-align:left">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</td>
<td style="text-align:left">contains(T object)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">count</td>
<td style="text-align:left">å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡</td>
<td style="text-align:left">count()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">getExpectedInsertions</td>
<td style="text-align:left">è¿”å›çš„é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•°</td>
<td style="text-align:left">getExpectedInsertions()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">getFalseProbability</td>
<td style="text-align:left">è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡</td>
<td style="text-align:left">getFalseProbability()</td>
<td style="text-align:left">double</td>
</tr>
<tr>
<td style="text-align:left">getHashIterations</td>
<td style="text-align:left">è¿”å›æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•°</td>
<td style="text-align:left">getHashIterations()</td>
<td style="text-align:left">int</td>
</tr>
<tr>
<td style="text-align:left">getSize</td>
<td style="text-align:left">è¿”å›æ­¤å®ä¾‹æ‰€éœ€Rediså†…å­˜çš„ä½æ•°</td>
<td style="text-align:left">getSize()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">tryInit</td>
<td style="text-align:left">åˆå§‹åŒ–Bloomç­›é€‰å™¨å‚æ•°</td>
<td style="text-align:left">tryInit(long expectedInsertions, double falseProbability)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">delete</td>
<td style="text-align:left">åˆ é™¤å¯¹è±¡</td>
<td style="text-align:left">delete()</td>
<td style="text-align:left">boolean</td>
</tr>
</tbody>
</table>
<p>å¼•å…¥ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>org.redisson<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>redisson<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>3.22.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ä»£ç </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> RedissonBloomFilter() {
</span></span><span style="display:flex;"><span>    Config config = <span style="color:#fff;font-weight:bold">new</span> Config();
</span></span><span style="display:flex;"><span>    config.<span style="color:#007f7f">useSingleServer</span>().<span style="color:#007f7f">setAddress</span>(<span style="color:#0ff;font-weight:bold">&#34;redis://&#34;</span> + REDIS_IP + <span style="color:#0ff;font-weight:bold">&#34;:&#34;</span> + REDIS_PORT);
</span></span><span style="display:flex;"><span>    config.<span style="color:#007f7f">useSingleServer</span>().<span style="color:#007f7f">setPassword</span>(REDIS_PASSWORD);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–å®¢æˆ·ç«¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    RedissonClient redissonClient = Redisson.<span style="color:#007f7f">create</span>(config);
</span></span><span style="display:flex;"><span>    RBloomFilter&lt;String&gt; bloomFilter = redissonClient.<span style="color:#007f7f">getBloomFilter</span>(BLOOM_FILTER_NAME);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼šé¢„æœŸæ’å…¥é‡ä¸º100000000L,é¢„æœŸé”™è¯¯æ¦‚ç‡ä¸º1%
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    bloomFilter.<span style="color:#007f7f">tryInit</span>(EXPECTED_INSERTIONS, FALSE_PROBABILITY);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ’å…¥æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    bloomFilter.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>);
</span></span><span style="display:flex;"><span>    bloomFilter.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;element003&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ¤æ–­ä¸‹é¢å…ƒç´ æ˜¯å¦åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;element002&#34;</span>));<span style="color:#007f7f">//false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>));<span style="color:#007f7f">//true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å·²æ·»åŠ åˆ°Bloomè¿‡æ»¤å™¨çš„å…ƒç´ çš„æ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">count</span>());<span style="color:#007f7f">//2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">getExpectedInsertions</span>());<span style="color:#007f7f">//1000000
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">getFalseProbability</span>());<span style="color:#007f7f">//0.01
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">getHashIterations</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å®ä¾‹æ‰€éœ€Rediså†…å­˜çš„ä½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilter.<span style="color:#007f7f">getSize</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="redis-40-å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶">Redis 4.0 å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#redis-40-å®˜æ–¹æä¾›å¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶">#</a></h3>
<p>åŸºç¡€å‘½ä»¤</p>
<table>
<thead>
<tr>
<th style="text-align:left">å‘½ä»¤</th>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">å‚æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">BF.RESERVE</td>
<td style="text-align:left">åˆ›å»ºä¸€ä¸ªå¤§å°ä¸ºcapacityï¼Œé”™è¯¯ç‡ä¸ºerror_rateçš„ç©ºçš„Bloom</td>
<td style="text-align:left">BF.RESERVE {key} {error_rate} {capacity} [EXPANSION {expansion}] [NONSCALING]</td>
</tr>
<tr>
<td style="text-align:left">BF.ADD</td>
<td style="text-align:left">å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ itom</td>
<td style="text-align:left">BF.ADD {key} {item}</td>
</tr>
<tr>
<td style="text-align:left">BF.MADD</td>
<td style="text-align:left">å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ å¤šä¸ªå…ƒæ¡ˆ</td>
<td style="text-align:left">BF.MADD {key} {item &hellip;}</td>
</tr>
<tr>
<td style="text-align:left">BF.INSERT</td>
<td style="text-align:left">å‘keyæŒ‡å®šçš„Bloomä¸­æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæ·»åŠ æ—¶å¯ä»¥æŒ‡å®šå¤§å°å’Œé”™è¯¯ç‡ï¼Œä¸”å¯ä»¥æ§åˆ¶åœ¨Bloomä¸å­˜åœ¨çš„æ—¶å€™æ˜¯å¦è‡ªåŠ¨åˆ›å»º</td>
<td style="text-align:left">BF.INSERT {key} [CAPACITY {cap}] [ERROR {error}] [EXPANSION {expansion}] [NOCREATE] [NONSCALING] ITEMS {item &hellip;}</td>
</tr>
<tr>
<td style="text-align:left">BF.EXISTS</td>
<td style="text-align:left">æ£€æŸ¥ä¸€ä¸ªå…ƒç§¦æ˜¯å¦å¯èƒ½å­˜åœ¨äºkeyæŒ‡å®šçš„Bloomä¸­</td>
<td style="text-align:left">BF.EXISTS {key} {item}</td>
</tr>
<tr>
<td style="text-align:left">BF.MEXISTS</td>
<td style="text-align:left">åŒæ—¶æ£€æŸ¥å¤šä¸ªå…ƒç´ æ˜¯å¦å¯èƒ½å­˜åœ¨äºkeyæŒ‡å®šçš„Bloomä¸­</td>
<td style="text-align:left">BF.MEXISTS {key} {item &hellip;}</td>
</tr>
<tr>
<td style="text-align:left">BF.SCANDUMP</td>
<td style="text-align:left">å¯¹Bloomè¿›è¡Œå¢é‡æŒä¹…åŒ–æ“ä½œ</td>
<td style="text-align:left">BF.SCANDUMP {key} {iter}</td>
</tr>
<tr>
<td style="text-align:left">BF.LOADCHUNK</td>
<td style="text-align:left">åŠ è½½SCANDUMPæŒä¹…åŒ–çš„Bloomæ•°æ®</td>
<td style="text-align:left">BF.LOADCHUNK {key} {iter} {data}</td>
</tr>
<tr>
<td style="text-align:left">BF.INFO</td>
<td style="text-align:left">æŸ¥è¯¢keyæŒ‡å®šçš„Bloomçš„ä¿¡æ¯</td>
<td style="text-align:left">BF.INFO {key}</td>
</tr>
<tr>
<td style="text-align:left">BF.DEBUG</td>
<td style="text-align:left">æŸ¥çœ‹BloomFilterçš„å†…éƒ¨è¯¦ç»†ä¿¡æ¯(å¦‚æ¯å±‚çš„å…ƒç´ ä¸ªæ•°ï¼Œé”™è¯¯ç‡ç­‰)</td>
<td style="text-align:left">BF.DEBUG (key}</td>
</tr>
</tbody>
</table>
<p>å¼•å…¥ä¾èµ–</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>redis.clients<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>jedis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>4.2.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ä»£ç </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> RedisBloomFilter() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å»ºç«‹è¿æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BloomFilterCommands bloomFilterCommands = <span style="color:#fff;font-weight:bold">new</span> JedisPooled(REDIS_IP, REDIS_PORT, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, REDIS_PASSWORD);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ„å»ºå¸ƒéš†è¿‡æ»¤å™¨å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BFReserveParams bfReserveParams = <span style="color:#fff;font-weight:bold">new</span> BFReserveParams();
</span></span><span style="display:flex;"><span>    bfReserveParams.<span style="color:#007f7f">expansion</span>(<span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String test = bloomFilterCommands.<span style="color:#007f7f">bfReserve</span>(BLOOM_FILTER_NAME, FALSE_PROBABILITY, EXPECTED_INSERTIONS, bfReserveParams);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å‘è¿‡æ»¤å™¨ä¸­æ·»åŠ å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    bloomFilterCommands.<span style="color:#007f7f">bfAdd</span>(BLOOM_FILTER_NAME, <span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>);
</span></span><span style="display:flex;"><span>    bloomFilterCommands.<span style="color:#007f7f">bfAdd</span>(BLOOM_FILTER_NAME, <span style="color:#0ff;font-weight:bold">&#34;element003&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilterCommands.<span style="color:#007f7f">bfExists</span>(BLOOM_FILTER_NAME, <span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>));<span style="color:#007f7f">//true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilterCommands.<span style="color:#007f7f">bfExists</span>(BLOOM_FILTER_NAME, <span style="color:#0ff;font-weight:bold">&#34;element002&#34;</span>));<span style="color:#007f7f">//false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é€šè¿‡redisæä¾›çš„bitmapè‡ªå·±å®ç°">é€šè¿‡Redisæä¾›çš„bitMapè‡ªå·±å®ç°<a hidden class="anchor" aria-hidden="true" href="#é€šè¿‡redisæä¾›çš„bitmapè‡ªå·±å®ç°">#</a></h3>
<p>è‡ªå®šä¹‰æ–¹æ³•</p>
<table>
<thead>
<tr>
<th style="text-align:left">æ–¹æ³•å</th>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">add</td>
<td style="text-align:left">æ·»åŠ å…ƒç´ </td>
<td style="text-align:left">add(String key, String element, int expireSec)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">contains</td>
<td style="text-align:left">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</td>
<td style="text-align:left">contains(String key, String element)</td>
<td style="text-align:left">boolean</td>
</tr>
<tr>
<td style="text-align:left">getExpectedInsertions</td>
<td style="text-align:left">è¿”å›çš„é¢„æœŸæ’å…¥å…ƒç´ çš„ä¸ªæ•°</td>
<td style="text-align:left">getExpectedInsertions()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">getFalseProbability</td>
<td style="text-align:left">è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡</td>
<td style="text-align:left">getFalseProbability()</td>
<td style="text-align:left">double</td>
</tr>
<tr>
<td style="text-align:left">getNumHashFunctions</td>
<td style="text-align:left">è¿”å›æ¯ä¸ªå…ƒç´ ä½¿ç”¨çš„å“ˆå¸Œè¿­ä»£æ¬¡æ•°</td>
<td style="text-align:left">getNumHashFunctions()</td>
<td style="text-align:left">int</td>
</tr>
<tr>
<td style="text-align:left">getBitmapLength</td>
<td style="text-align:left">è¿”å›Bitmapé•¿åº¦</td>
<td style="text-align:left">getBitmapLength()</td>
<td style="text-align:left">long</td>
</tr>
<tr>
<td style="text-align:left">BloomFilterUtils</td>
<td style="text-align:left">åˆ›å»ºBloomå¯¹è±¡</td>
<td style="text-align:left">BloomFilterUtils(long expectedInsertions, double falseProbability)</td>
<td style="text-align:left">BloomFilterUtils</td>
</tr>
</tbody>
</table>
<p>æµ‹è¯•ä»£ç </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> BloomFilterUtils {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> String BF_KEY_PREFIX = <span style="color:#0ff;font-weight:bold">&#34;bf_&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">long</span> numApproxElements;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">double</span> falseProbability;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// hashä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> numHashFunctions;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æ•°ç»„é•¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> bitmapLength;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> JedisResourcePool jedisResourcePool;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ„é€ å¸ƒéš†è¿‡æ»¤å™¨ã€‚æ³¨æ„ï¼šåœ¨åŒä¸€ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¸‰ä¸ªå‚æ•°åŠ¡å¿…ç›¸åŒ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param numApproxElements é¢„ä¼°å…ƒç´ æ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param fpp               å¯æ¥å—çš„æœ€å¤§è¯¯å·®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param jedisResourcePool Codisä¸“ç”¨çš„Jedisè¿æ¥æ± 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BloomFilterUtils(Long numApproxElements, <span style="color:#fff;font-weight:bold">double</span> fpp, JedisResourcePool jedisResourcePool) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">numApproxElements</span> = numApproxElements;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">falseProbability</span> = fpp;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">jedisResourcePool</span> = jedisResourcePool;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ•°ç»„é•¿åº¦ m = (n * lnp)/ln2^2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        bitmapLength = (<span style="color:#fff;font-weight:bold">int</span>) (-numApproxElements * Math.<span style="color:#007f7f">log</span>(fpp) / (Math.<span style="color:#007f7f">log</span>(<span style="color:#ff0;font-weight:bold">2</span>) * Math.<span style="color:#007f7f">log</span>(<span style="color:#ff0;font-weight:bold">2</span>)));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// hashä¸ªæ•° k = (n / m ) * ln2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        numHashFunctions = Math.<span style="color:#007f7f">max</span>(<span style="color:#ff0;font-weight:bold">1</span>, (<span style="color:#fff;font-weight:bold">int</span>) Math.<span style="color:#007f7f">round</span>((<span style="color:#fff;font-weight:bold">double</span>) bitmapLength / numApproxElements * Math.<span style="color:#007f7f">log</span>(<span style="color:#ff0;font-weight:bold">2</span>)));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å–å¾—é¢„ä¼°å…ƒç´ æ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> getExpectedInsertions() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> numApproxElements;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è¿”å›å…ƒç´ å­˜åœ¨çš„é”™è¯¯æ¦‚ç‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> getFalseProbability() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> falseProbability;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å–å¾—è‡ªåŠ¨è®¡ç®—çš„æœ€ä¼˜å“ˆå¸Œå‡½æ•°ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> getNumHashFunctions() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> numHashFunctions;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å–å¾—è‡ªåŠ¨è®¡ç®—çš„æœ€ä¼˜Bitmapé•¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> getBitmapLength() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> bitmapLength;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è®¡ç®—ä¸€ä¸ªå…ƒç´ å€¼å“ˆå¸Œåæ˜ å°„åˆ°Bitmapçš„å“ªäº›bitä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param element å…ƒç´ å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @return bitä¸‹æ ‡çš„æ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">long</span>[] getBitIndices(String element) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span>[] indices = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">long</span>[numHashFunctions];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å…ƒç´   ä½¿ç”¨MurMurHash3 128ä½Hashç®—æ³•è½¬æ¢å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">byte</span>[] bytes = Hashing.<span style="color:#007f7f">murmur3_128</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">hashObject</span>(element, Funnels.<span style="color:#007f7f">stringFunnel</span>(Charset.<span style="color:#007f7f">forName</span>(<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>)))
</span></span><span style="display:flex;"><span>            .<span style="color:#007f7f">asBytes</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä½8ä½è½¬Longå€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">long</span> hash1 = Longs.<span style="color:#007f7f">fromBytes</span>(
</span></span><span style="display:flex;"><span>            bytes[<span style="color:#ff0;font-weight:bold">7</span>], bytes[<span style="color:#ff0;font-weight:bold">6</span>], bytes[<span style="color:#ff0;font-weight:bold">5</span>], bytes[<span style="color:#ff0;font-weight:bold">4</span>], bytes[<span style="color:#ff0;font-weight:bold">3</span>], bytes[<span style="color:#ff0;font-weight:bold">2</span>], bytes[<span style="color:#ff0;font-weight:bold">1</span>], bytes[<span style="color:#ff0;font-weight:bold">0</span>]
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// é«˜8ä½è½¬Longå€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">long</span> hash2 = Longs.<span style="color:#007f7f">fromBytes</span>(
</span></span><span style="display:flex;"><span>            bytes[<span style="color:#ff0;font-weight:bold">15</span>], bytes[<span style="color:#ff0;font-weight:bold">14</span>], bytes[<span style="color:#ff0;font-weight:bold">13</span>], bytes[<span style="color:#ff0;font-weight:bold">12</span>], bytes[<span style="color:#ff0;font-weight:bold">11</span>], bytes[<span style="color:#ff0;font-weight:bold">10</span>], bytes[<span style="color:#ff0;font-weight:bold">9</span>], bytes[<span style="color:#ff0;font-weight:bold">8</span>]
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">long</span> combinedHash = hash1;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åŒé‡å“ˆå¸Œè¿›è¡Œæ•£åˆ—
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i  &amp;lt; numHashFunctions; i++) {
</span></span><span style="display:flex;"><span>            indices[i] = (combinedHash &amp; Long.<span style="color:#007f7f">MAX_VALUE</span>) % bitmapLength;
</span></span><span style="display:flex;"><span>            combinedHash += hash2;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> indices;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ’å…¥å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key       åŸå§‹Redisé”®ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Š&#39;bf_&#39;å‰ç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param element   å…ƒç´ å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param expireSec è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> add(String key, String element, <span style="color:#fff;font-weight:bold">int</span> expireSec) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (key == <span style="color:#fff;font-weight:bold">null</span> || element == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(<span style="color:#0ff;font-weight:bold">&#34;é”®å€¼å‡ä¸èƒ½ä¸ºç©º&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        String actualKey = BF_KEY_PREFIX.<span style="color:#007f7f">concat</span>(key);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> (Jedis jedis = jedisResourcePool.<span style="color:#007f7f">getResource</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> (Pipeline pipeline = jedis.<span style="color:#007f7f">pipelined</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// éå†å…ƒç´ æ‰€æœ‰hashç»“æœçš„bitä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">long</span> index : getBitIndices(element)) {
</span></span><span style="display:flex;"><span>                    pipeline.<span style="color:#007f7f">setbit</span>(actualKey, index, <span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                pipeline.<span style="color:#007f7f">syncAndReturnAll</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            jedis.<span style="color:#007f7f">expire</span>(actualKey, expireSec);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æ£€æŸ¥å…ƒç´ åœ¨é›†åˆä¸­æ˜¯å¦ï¼ˆå¯èƒ½ï¼‰å­˜åœ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param key     åŸå§‹Redisé”®ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Š&#39;bf_&#39;å‰ç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param element å…ƒç´ å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> contains(String key, String element) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (key == <span style="color:#fff;font-weight:bold">null</span> || element == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> RuntimeException(<span style="color:#0ff;font-weight:bold">&#34;é”®å€¼å‡ä¸èƒ½ä¸ºç©º&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        String actualKey = BF_KEY_PREFIX.<span style="color:#007f7f">concat</span>(key);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">boolean</span> result = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> (Jedis jedis = jedisResourcePool.<span style="color:#007f7f">getResource</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// éå†å…ƒç´ æ‰€æœ‰hashç»“æœçš„bitä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">try</span> (Pipeline pipeline = jedis.<span style="color:#007f7f">pipelined</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">long</span> index : getBitIndices(element)) {
</span></span><span style="display:flex;"><span>                    pipeline.<span style="color:#007f7f">getbit</span>(actualKey, index);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                result = !pipeline.<span style="color:#007f7f">syncAndReturnAll</span>().<span style="color:#007f7f">contains</span>(<span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        String path = Path.<span style="color:#007f7f">getCurrentPath</span>() + <span style="color:#0ff;font-weight:bold">&#34;/config/zzjodis.properties&#34;</span>;
</span></span><span style="display:flex;"><span>        ConfigReadUtil configReadUtil = <span style="color:#fff;font-weight:bold">new</span> ConfigReadUtil(path);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            JedisResourcePool jedisResourcePool = RoundRobinJedisPool.
</span></span><span style="display:flex;"><span>                create()
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">curatorClient</span>(configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;jodisZkStr&#34;</span>), <span style="color:#ff0;font-weight:bold">5000</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">zkProxyDir</span>(configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;zkProxyDir&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">team</span>(configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;team&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">connectionTimeoutMs</span>(configReadUtil.<span style="color:#007f7f">getInt</span>(<span style="color:#0ff;font-weight:bold">&#34;connectionTimeoutMs&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">soTimeoutMs</span>(configReadUtil.<span style="color:#007f7f">getInt</span>(<span style="color:#0ff;font-weight:bold">&#34;soTimeoutMs&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">appKey</span>(configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;appKey&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">password</span>(<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>.<span style="color:#007f7f">equals</span>(configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>)) ? <span style="color:#fff;font-weight:bold">null</span> : configReadUtil.<span style="color:#007f7f">getString</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#007f7f">build</span>();
</span></span><span style="display:flex;"><span>            BloomFilterUtils bloomFilterUtils = <span style="color:#fff;font-weight:bold">new</span> BloomFilterUtils(<span style="color:#ff0;font-weight:bold">10000</span>, <span style="color:#ff0;font-weight:bold">0.01</span>, jedisResourcePool);
</span></span><span style="display:flex;"><span>            bloomFilterUtils.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;filter01&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>, <span style="color:#ff0;font-weight:bold">30</span> * <span style="color:#ff0;font-weight:bold">60</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilterUtils.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;filter01&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;element001&#34;</span>));  <span style="color:#007f7f">// true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(bloomFilterUtils.<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;filter01&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;element002&#34;</span>));  <span style="color:#007f7f">// false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#007f7f">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨">å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#å¸ƒéš†è¿‡æ»¤å™¨å•†ä¸šè¿ç”¨">#</a></h1>
<h2 id="ä¸šåŠ¡åœºæ™¯">ä¸šåŠ¡åœºæ™¯<a hidden class="anchor" aria-hidden="true" href="#ä¸šåŠ¡åœºæ™¯">#</a></h2>
<p>åœ¨C1çœ‹è§†é¢‘å¾—æ›å…‰æ´»åŠ¨é¡¹ç›®ä¸­ï¼Œä¸ºäº†åœ¨ä¸ªäººä¸­å¿ƒé¡µä¸ºæ‹¥æœ‰åœ¨æ¶å•†å“çš„ç”¨æˆ·å±•ç¤ºæ´»åŠ¨å…¥å£ï¼Œéœ€è¦é«˜æ•ˆåœ°åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰åœ¨æ¶å•†å“ã€‚ç›®å‰å­˜åœ¨ä¸Šäº¿å­˜é‡ç”¨æˆ·å’Œä¸Šç™¾ä¸‡çš„åœ¨æ¶å•†å“ç”¨æˆ·ã€‚æ¯æ¬¡ç”¨æˆ·è¿›å…¥ä¸ªäººä¸­å¿ƒé¡µæ—¶ï¼Œéœ€è¦æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦æœ‰åœ¨æ¶å•†å“ï¼Œä»¥ç¡®å®šæ˜¯å¦å±•ç¤ºæ´»åŠ¨å…¥å£ã€‚</p>
<p>ç„¶è€Œï¼Œç›´æ¥æŸ¥è¯¢å•†å“æœåŠ¡ä¼šå¯¼è‡´å¤§é‡çš„é‡å¤æŸ¥è¯¢å’Œå¢åŠ æœåŠ¡è€—æ—¶ã€‚å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥ä¼˜åŒ–æ­¤è¿‡ç¨‹ï¼Œå®ƒåªéœ€è¦å‡ åMBå†…å­˜ï¼Œç›¸æ¯”äºä½¿ç”¨Rediså­˜å‚¨æ¯æ—¥åœ¨æ¶å•†å“ç”¨æˆ·éœ€è¦å‡ GBå†…å­˜ï¼Œæ›´åŠ é«˜æ•ˆèŠ‚çœå†…å­˜æ¶ˆè€—ã€‚</p>
<h2 id="å¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹©">å¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹©<a hidden class="anchor" aria-hidden="true" href="#å¸ƒéš†è¿‡æ»¤å™¨é€‰æ‹©">#</a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">å®ç°æ–¹å¼</th>
<th style="text-align:left">å‚¨å­˜ä½ç½®</th>
<th style="text-align:left">é€‚ç”¨åœºæ™¯</th>
<th style="text-align:left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Guava</td>
<td style="text-align:left">æœºå™¨</td>
<td style="text-align:left">å•æœº</td>
<td style="text-align:left">åªéœ€è¦æœºå™¨å†…å­˜ä¸éœ€è¦å…¶ä»–èµ„æº</td>
</tr>
<tr>
<td style="text-align:left">Redisson</td>
<td style="text-align:left">redis</td>
<td style="text-align:left">åˆ†å¸ƒå¼</td>
<td style="text-align:left">è¿æ¥Rediså³å¯ä½¿ç”¨</td>
</tr>
<tr>
<td style="text-align:left">Redisæ’ä»¶</td>
<td style="text-align:left">redis</td>
<td style="text-align:left">åˆ†å¸ƒå¼</td>
<td style="text-align:left">éœ€è¦å¯¹redisé›†ç¾¤è¿›è¡Œè®¾ç½®æ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨æ’ä»¶</td>
</tr>
<tr>
<td style="text-align:left">Redisçš„bitMap</td>
<td style="text-align:left">redis</td>
<td style="text-align:left">åˆ†å¸ƒå¼</td>
<td style="text-align:left">éœ€è¦è‡ªå·±å®ç°æ·»åŠ å’ŒæŸ¥è¯¢</td>
</tr>
</tbody>
</table>
<p>å¯¹äºåˆ†å¸ƒå¼æœåŠ¡ç¯å¢ƒï¼ŒGuavaæ–¹å¼ä¸é€‚åˆä½¿ç”¨ï¼Œè€ŒRedisæ’ä»¶éœ€è¦å¤æ‚çš„é…ç½®å’Œé«˜æˆæœ¬æ”¯æŒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRedissonè¿æ¥Rediså¹¶è¿›è¡Œæ’å…¥å’ŒæŸ¥è¯¢çš„æ–¹å¼æ›´é€‚åˆå½“å‰åœºæ™¯ï¼Œå› æ­¤æœ€ç»ˆé€‰æ‹©äº†Redissonæ–¹å¼ã€‚</p>
<h2 id="ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ">ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ•ˆæœ">#</a></h2>
<h3 id="å†…å­˜å ç”¨æƒ…å†µ">å†…å­˜å ç”¨æƒ…å†µ<a hidden class="anchor" aria-hidden="true" href="#å†…å­˜å ç”¨æƒ…å†µ">#</a></h3>
<ol>
<li>ä¸Šçº¿åˆæœŸï¼Œæˆ‘ä»¬å°†ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·å­˜å…¥Codisç¼“å­˜ä¸­ã€‚è¿™ä½¿å¾—å†…å­˜ä»1.98GBå¢é•¿åˆ°9.52GBï¼Œæ­¤æ¬¡æ•°æ®é‡å ç”¨äº†7.54GBçš„å†…å­˜ã€‚</li>
<li>éšåï¼Œä¸ºè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬æˆåŠŸå°†ç”¨æˆ·é‡ç¼©å°äº†25å€ã€‚è¿™ä½¿å¾—å†…å­˜å ç”¨é™è‡³308.8MBã€‚</li>
<li>æœ€ç»ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°äº†Redissonæ–¹å¼ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚è¿™æ¬¡Rediså†…å­˜ä»2.7172GBå¢é•¿åˆ°2.7566GBï¼Œè€Œæ•°æ®é‡ä»…å ç”¨39.4MBçš„å†…å­˜ã€‚</li>
</ol>
<p>ä½¿ç”¨Codiså†…å­˜å ç”¨æƒ…å†µ</p>
<p>æ’å…¥æ•°æ®å‰ï¼š1.9G</p>
<p>æ’å…¥æ•°æ®åï¼š9.5G</p>
<p>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å†…å­˜å ç”¨æƒ…å†µï¼š</p>
<p>æ’å…¥æ•°æ®å‰ï¼š2.71G</p>
<p>æ’å…¥æ•°æ®åï¼š2.75G</p>
<h3 id="æ€§èƒ½æå‡">æ€§èƒ½æå‡<a hidden class="anchor" aria-hidden="true" href="#æ€§èƒ½æå‡">#</a></h3>
<p>é€šè¿‡ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å‡å°‘å¯¹å•†å“æœåŠ¡çš„æŸ¥è¯¢ï¼Œä»è€Œæå‡æœåŠ¡æ€§èƒ½ã€‚ä¹‹å‰éœ€è¦æŸ¥è¯¢å•†å“æœåŠ¡æ¥åˆ¤æ–­ç”¨æˆ·å•†å“çŠ¶æ€ï¼Œä½†ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨åï¼Œå‡å°‘äº†è¿™éƒ¨åˆ†æœåŠ¡é—´çš„è°ƒç”¨è€—æ—¶ï¼Œæ•´ä½“æµç¨‹çš„è€—æ—¶å‡å°‘äº†å¤§çº¦5msã€‚</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">æ•°æ®ç»“æ„</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>