<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;Â»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      log
    </h1>
    <div class="post-meta"><span title='2018-04-07 15:02:26 +0000 UTC'>2018-04-07</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a></li>
                <li>
                    <a href="#logback-%e4%b8%8e-log4j" aria-label="Logback ä¸ Log4J">Logback ä¸ Log4J</a></li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b" aria-label="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a></li>
                <li>
                    <a href="#loggerappenders-%e4%b8%8e-layouts" aria-label="Loggerï¼ŒAppenders ä¸ Layouts">Loggerï¼ŒAppenders ä¸ Layouts</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e5%b1%82%e5%91%bd%e5%90%8d%e8%a7%84%e5%88%99" aria-label="åˆ†å±‚å‘½åè§„åˆ™">åˆ†å±‚å‘½åè§„åˆ™</a></li>
                <li>
                    <a href="#%e6%97%a5%e5%bf%97%e6%89%93%e5%8d%b0%e7%ba%a7%e5%88%ab" aria-label="æ—¥å¿—æ‰“å°çº§åˆ«">æ—¥å¿—æ‰“å°çº§åˆ«</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96-logger" aria-label="è·å– logger">è·å– logger</a></li>
                <li>
                    <a href="#appender-%e5%92%8c-layout" aria-label="Appender å’Œ Layout">Appender å’Œ Layout</a></li>
                <li>
                    <a href="#%e5%8f%82%e6%95%b0%e5%8c%96%e6%89%93%e5%8d%b0%e6%97%a5%e5%bf%97" aria-label="å‚æ•°åŒ–æ‰“å°æ—¥å¿—">å‚æ•°åŒ–æ‰“å°æ—¥å¿—</a></li>
                <li>
                    <a href="#logback-%e5%86%85%e9%83%a8%e8%bf%90%e8%a1%8c%e6%b5%81%e7%a8%8b" aria-label="logback å†…éƒ¨è¿è¡Œæµç¨‹">logback å†…éƒ¨è¿è¡Œæµç¨‹</a></li>
                <li>
                    <a href="#%e6%9c%89%e5%85%b3%e6%80%a7%e8%83%bd%e9%97%ae%e9%a2%98" aria-label="æœ‰å…³æ€§èƒ½é—®é¢˜">æœ‰å…³æ€§èƒ½é—®é¢˜</a></li></ul>
                </li>
                <li>
                    <a href="#logback-%e9%85%8d%e7%bd%ae%e9%a1%bb%e7%9f%a5" aria-label="logback é…ç½®é¡»çŸ¥">logback é…ç½®é¡»çŸ¥</a><ul>
                        
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%96%b9%e5%bc%8f" aria-label="é…ç½®æ–¹å¼">é…ç½®æ–¹å¼</a></li>
                <li>
                    <a href="#%e9%bb%98%e8%ae%a4%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="é»˜è®¤çš„é…ç½®">é»˜è®¤çš„é…ç½®</a></li>
                <li>
                    <a href="#%e5%90%af%e5%8a%a8%e6%97%b6%e6%89%93%e5%8d%b0%e7%8a%b6%e6%80%81%e4%bf%a1%e6%81%af" aria-label="å¯åŠ¨æ—¶æ‰“å°çŠ¶æ€ä¿¡æ¯">å¯åŠ¨æ—¶æ‰“å°çŠ¶æ€ä¿¡æ¯</a></li>
                <li>
                    <a href="#%e9%87%8d%e7%bd%ae%e9%bb%98%e8%ae%a4%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bd%8d%e7%bd%ae" aria-label="é‡ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®">é‡ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%87%aa%e5%8a%a8%e7%83%ad%e5%8a%a0%e8%bd%bd" aria-label="é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½">é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½</a></li>
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e5%bc%82%e5%b8%b8%e6%a0%88%e6%97%b6%e4%b9%9f%e6%89%93%e5%8d%b0%e5%87%ba-jar-%e5%8c%85%e7%9a%84%e4%bf%a1%e6%81%af" aria-label="è¾“å‡ºå¼‚å¸¸æ ˆæ—¶ä¹Ÿæ‰“å°å‡º jar åŒ…çš„ä¿¡æ¯">è¾“å‡ºå¼‚å¸¸æ ˆæ—¶ä¹Ÿæ‰“å°å‡º jar åŒ…çš„ä¿¡æ¯</a></li>
                <li>
                    <a href="#%e7%9b%b4%e6%8e%a5%e8%b0%83%e7%94%a8-joranconfigurator" aria-label="ç›´æ¥è°ƒç”¨ JoranConfigurator">ç›´æ¥è°ƒç”¨ JoranConfigurator</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</a><ul>
                        
                <li>
                    <a href="#%e6%a0%b9%e8%8a%82%e7%82%b9configuration" aria-label="æ ¹èŠ‚ç‚¹&lt;configuration&gt;">æ ¹èŠ‚ç‚¹&lt;configuration&gt;</a></li>
                <li>
                    <a href="#logger-%e8%8a%82%e7%82%b9" aria-label="logger èŠ‚ç‚¹">logger èŠ‚ç‚¹</a></li>
                <li>
                    <a href="#root-%e8%8a%82%e7%82%b9" aria-label="root èŠ‚ç‚¹">root èŠ‚ç‚¹</a></li>
                <li>
                    <a href="#appender-%e8%8a%82%e7%82%b9" aria-label="appender èŠ‚ç‚¹">appender èŠ‚ç‚¹</a><ul>
                        
                <li>
                    <a href="#consoleappender" aria-label="ConsoleAppender">ConsoleAppender</a></li>
                <li>
                    <a href="#fileappender" aria-label="FileAppender">FileAppender</a></li>
                <li>
                    <a href="#rollingfileappender" aria-label="RollingFileAppender">RollingFileAppender</a><ul>
                        
                <li>
                    <a href="#timebasedrollingpolicy" aria-label="TimeBasedRollingPolicy">TimeBasedRollingPolicy</a></li>
                <li>
                    <a href="#sizebasedtriggeringpolicy" aria-label="SizeBasedTriggeringPolicy">SizeBasedTriggeringPolicy</a></li>
                <li>
                    <a href="#fixedwindowrollingpolicy" aria-label="FixedWindowRollingPolicy">FixedWindowRollingPolicy</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#context-name-%e8%8a%82%e7%82%b9" aria-label="Context Name èŠ‚ç‚¹">Context Name èŠ‚ç‚¹</a></li>
                <li>
                    <a href="#property%e4%bd%bf%e7%94%a8%e5%8f%98%e9%87%8f" aria-label="&lt;property&gt;ä½¿ç”¨å˜é‡">&lt;property&gt;ä½¿ç”¨å˜é‡</a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e4%b9%89%e5%8f%98%e9%87%8f" aria-label="å®šä¹‰å˜é‡">å®šä¹‰å˜é‡</a></li>
                <li>
                    <a href="#%e5%8f%98%e9%87%8f%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="å˜é‡çš„ä½œç”¨åŸŸ">å˜é‡çš„ä½œç”¨åŸŸ</a></li>
                <li>
                    <a href="#%e5%8f%98%e9%87%8f%e7%9a%84%e9%bb%98%e8%ae%a4%e5%80%bc" aria-label="å˜é‡çš„é»˜è®¤å€¼">å˜é‡çš„é»˜è®¤å€¼</a></li>
                <li>
                    <a href="#%e8%bf%90%e8%a1%8c%e6%97%b6%e5%ae%9a%e4%b9%89%e5%8f%98%e9%87%8f" aria-label="è¿è¡Œæ—¶å®šä¹‰å˜é‡">è¿è¡Œæ—¶å®šä¹‰å˜é‡</a></li>
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6%e5%8c%96%e5%a4%84%e7%90%86%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="æ¡ä»¶åŒ–å¤„ç†é…ç½®æ–‡ä»¶">æ¡ä»¶åŒ–å¤„ç†é…ç½®æ–‡ä»¶</a></li>
                <li>
                    <a href="#%e4%bb%8ejndi-%e8%8e%b7%e5%8f%96%e5%8f%98%e9%87%8f" aria-label="ä»JNDI è·å–å˜é‡">ä»JNDI è·å–å˜é‡</a></li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab" aria-label="æ–‡ä»¶åŒ…å«">æ–‡ä»¶åŒ…å«</a></li></ul>
                </li>
                <li>
                    <a href="#context-listener" aria-label="Context Listener">Context Listener</a></li></ul>
                </li>
                <li>
                    <a href="#appender" aria-label="Appender">Appender</a><ul>
                        
                <li>
                    <a href="#appender-%e6%a6%82%e5%bf%b5" aria-label="Appender æ¦‚å¿µ">Appender æ¦‚å¿µ</a></li>
                <li>
                    <a href="#appenderbase-%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" aria-label="AppenderBase æºç åˆ†æ">AppenderBase æºç åˆ†æ</a></li>
                <li>
                    <a href="#logback-core-%e6%a8%a1%e5%9d%97" aria-label="logback-core æ¨¡å—">logback-core æ¨¡å—</a><ul>
                        
                <li>
                    <a href="#outputstreamappender" aria-label="OutputStreamAppender">OutputStreamAppender</a></li>
                <li>
                    <a href="#consoleappender-1" aria-label="ConsoleAppender">ConsoleAppender</a></li>
                <li>
                    <a href="#fileappender-1" aria-label="FileAppender">FileAppender</a></li>
                <li>
                    <a href="#rollingfileappender-1" aria-label="RollingFileAppender">RollingFileAppender</a><ul>
                        
                <li>
                    <a href="#%e6%bb%9a%e5%8a%a8%e7%ad%96%e7%95%a5" aria-label="æ»šåŠ¨ç­–ç•¥">æ»šåŠ¨ç­–ç•¥</a></li>
                <li>
                    <a href="#timebasedrollingpolicy-1" aria-label="TimeBasedRollingPolicy">TimeBasedRollingPolicy</a></li>
                <li>
                    <a href="#sizeandtimebasedrollingpolicy" aria-label="SizeAndTimeBasedRollingPolicy">SizeAndTimeBasedRollingPolicy</a></li>
                <li>
                    <a href="#fixedwindowrollingpolicy-1" aria-label="FixedWindowRollingPolicy">FixedWindowRollingPolicy</a></li>
                <li>
                    <a href="#sizebasedtriggeringpolicy-1" aria-label="SizeBasedTriggeringPolicy">SizeBasedTriggeringPolicy</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e9%85%8d%e7%bd%ae%e7%a4%ba%e4%be%8b" aria-label="å¸¸ç”¨é…ç½®ç¤ºä¾‹">å¸¸ç”¨é…ç½®ç¤ºä¾‹</a><ul>
                        
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e4%b8%80" aria-label="é…ç½®ä¸€">é…ç½®ä¸€</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e4%ba%8c" aria-label="é…ç½®äºŒ">é…ç½®äºŒ</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e4%b8%89" aria-label="é…ç½®ä¸‰">é…ç½®ä¸‰</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e6%89%93%e5%a5%bd%e6%97%a5%e5%bf%97" aria-label="å¦‚ä½•æ‰“å¥½æ—¥å¿—">å¦‚ä½•æ‰“å¥½æ—¥å¿—</a><ul>
                        
                <li>
                    <a href="#%e5%bc%ba%e5%88%b6" aria-label="å¼ºåˆ¶">å¼ºåˆ¶</a><ul>
                        
                <li>
                    <a href="#%e6%ad%a3%e7%a1%ae%e5%a3%b0%e6%98%8e%e6%97%a5%e5%bf%97%e5%af%b9%e8%b1%a1logger" aria-label="æ­£ç¡®å£°æ˜æ—¥å¿—å¯¹è±¡logger">æ­£ç¡®å£°æ˜æ—¥å¿—å¯¹è±¡logger</a></li>
                <li>
                    <a href="#%e4%bb%a3%e7%a0%81%e4%b8%ad%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab%e4%bd%bf%e7%94%a8" aria-label="ä»£ç ä¸­æ—¥å¿—çº§åˆ«ä½¿ç”¨">ä»£ç ä¸­æ—¥å¿—çº§åˆ«ä½¿ç”¨</a></li>
                <li>
                    <a href="#%e6%ad%a3%e7%a1%ae%e7%9a%84%e6%89%93%e5%8d%b0%e5%8f%98%e9%87%8f" aria-label="æ­£ç¡®çš„æ‰“å°å˜é‡">æ­£ç¡®çš„æ‰“å°å˜é‡</a></li>
                <li>
                    <a href="#%e6%ad%a3%e7%a1%ae%e7%9a%84%e6%89%93%e5%8d%b0%e5%bc%82%e5%b8%b8" aria-label="æ­£ç¡®çš„æ‰“å°å¼‚å¸¸">æ­£ç¡®çš„æ‰“å°å¼‚å¸¸</a></li>
                <li>
                    <a href="#%e5%af%b9%e4%ba%8e-tracedebuginfo-%e7%ba%a7%e5%88%ab%e7%9a%84%e6%97%a5%e5%bf%97%e8%be%93%e5%87%ba%e5%bf%85%e9%a1%bb%e8%bf%9b%e8%a1%8c%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab%e7%9a%84%e5%bc%80%e5%85%b3%e5%88%a4%e6%96%ad" aria-label="å¯¹äº trace/debug/info çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­">å¯¹äº trace/debug/info çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%a6%81%e6%ad%a2" aria-label="ç¦æ­¢">ç¦æ­¢</a><ul>
                        
                <li>
                    <a href="#%e7%a6%81%e6%ad%a2%e6%8b%bc%e6%8e%a5%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%89%93%e5%8d%b0%e6%97%a5%e5%bf%97" aria-label="ç¦æ­¢æ‹¼æ¥å­—ç¬¦ä¸²æ‰“å°æ—¥å¿—">ç¦æ­¢æ‹¼æ¥å­—ç¬¦ä¸²æ‰“å°æ—¥å¿—</a></li>
                <li>
                    <a href="#%e7%a6%81%e6%ad%a2eprintstacktrace" aria-label="ç¦æ­¢e.printStackTrace()">ç¦æ­¢e.printStackTrace()</a></li>
                <li>
                    <a href="#%e7%a6%81%e6%ad%a2%e4%bd%bf%e7%94%a8system-printsystemoutprintlnsystemerrorprintln" aria-label="ç¦æ­¢ä½¿ç”¨System printã€System.out.printlnã€System.error.println">ç¦æ­¢ä½¿ç”¨System printã€System.out.printlnã€System.error.println</a></li>
                <li>
                    <a href="#%e7%a6%81%e6%ad%a2%e8%ae%b0%e5%bd%95%e6%97%a5%e5%bf%97%e5%90%8e%e5%8f%88%e6%8a%9b%e5%87%ba%e5%bc%82%e5%b8%b8" aria-label="ç¦æ­¢è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸">ç¦æ­¢è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#spring-boot%e6%97%a5%e5%bf%97" aria-label="spring bootæ—¥å¿—">spring bootæ—¥å¿—</a><ul>
                        
                <li>
                    <a href="#spring-boot%e9%bb%98%e8%ae%a4%e6%97%a5%e5%bf%97%e7%b3%bb%e7%bb%9f" aria-label="Spring Booté»˜è®¤æ—¥å¿—ç³»ç»Ÿ">Spring Booté»˜è®¤æ—¥å¿—ç³»ç»Ÿ</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%9c%a8%e9%a1%b9%e7%9b%ae%e4%b8%ad%e6%89%93%e5%8d%b0%e6%97%a5%e5%bf%97" aria-label="å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—">å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%b0%86%e6%97%a5%e5%bf%97%e4%bf%a1%e6%81%af%e5%ad%98%e5%82%a8%e5%88%b0%e6%96%87%e4%bb%b6" aria-label="å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯å­˜å‚¨åˆ°æ–‡ä»¶">å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯å­˜å‚¨åˆ°æ–‡ä»¶</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e8%ae%be%e7%bd%ae%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab" aria-label="å¦‚ä½•è®¾ç½®æ—¥å¿—çº§åˆ«">å¦‚ä½•è®¾ç½®æ—¥å¿—çº§åˆ«</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%ae%9a%e5%88%b6%e8%87%aa%e5%b7%b1%e7%9a%84%e6%97%a5%e5%bf%97%e6%a0%bc%e5%bc%8f" aria-label="å¦‚ä½•å®šåˆ¶è‡ªå·±çš„æ—¥å¿—æ ¼å¼">å¦‚ä½•å®šåˆ¶è‡ªå·±çš„æ—¥å¿—æ ¼å¼</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p>é—¨é¢æ¥å£ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>commons-loggingï¼š
</span></span><span style="display:flex;"><span>apacheæœ€æ—©æä¾›çš„æ—¥å¿—é—¨é¢æ¥å£ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±å–œæ¬¢é€‰æ‹©ä¸åŒæ—¥å¿—å®ç°æ¡†æ¶ï¼Œè€Œä¸å¿…æ”¹åŠ¨æ—¥å¿—å®šä¹‰ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>slf4jï¼š
</span></span><span style="display:flex;"><span>simple logging facade for java,ä¹Ÿæ˜¯æ—¥å¿—é—¨é¢æ¥å£æ¡†æ¶ï¼Œå’Œ Apache çš„ commons-logging æ˜¯ä¸€æ ·çš„æ¦‚å¿µï¼Œå®ƒä»¬éƒ½ä¸æ˜¯å…·ä½“çš„æ—¥å¿—æ¡†æ¶ï¼Œ
</span></span><span style="display:flex;"><span>ä½ å¯ä»¥æŒ‡å®šå…¶ä»–ä¸»æµçš„æ—¥å¿—å®ç°æ¡†æ¶ã€‚ä½¿ç”¨ Slf4j å¯ä»¥å¾ˆçµæ´»çš„ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå‚æ•°å ä½ï¼Œç®€åŒ–ä»£ç ï¼Œæ‹¥æœ‰æ›´å¥½çš„å¯è¯»æ€§ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ—¥å¿—å®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Loggingï¼š
</span></span><span style="display:flex;"><span>jdk1.5è‡ªå¸¦æ—¥å¿—å·¥å…·ç±»ï¼Œä½äºjava.util.logging;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Log4jï¼š
</span></span><span style="display:flex;"><span>å¸‚åœºå æœ‰ç‡æœ€é«˜çš„ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œæ³¨æ„2015/08/05è¿™ä¸€å¤©ï¼ŒApacheå®£å¸ƒåœæ­¢ç»´æŠ¤äº†ï¼Œç”¨æˆ·éœ€è¦åˆ‡åˆ°Log4j 2(åŒ…æ‹¬log4j-api å’Œlog4j-coreç»„æˆ)ä¸Šé¢å»ï¼›
</span></span><span style="display:flex;"><span>2021-12-10å·ï¼Œçˆ†å‘äº†log4jæ¼æ´ï¼Œjndi-rmi.å±é™©ç­‰çº§å¾ˆé«˜
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Logbackï¼š
</span></span><span style="display:flex;"><span>æ˜¯ Slf4j çš„åŸç”Ÿå®ç°æ¡†æ¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯å‡ºè‡ª Log4j ä¸€ä¸ªäººä¹‹æ‰‹ï¼Œä½†æ‹¥æœ‰æ¯” log4j æ›´å¤šçš„ä¼˜ç‚¹ã€ç‰¹æ€§å’Œæ›´åšå¼ºçš„æ€§èƒ½ï¼Œç°åœ¨åŸºæœ¬éƒ½ç”¨æ¥ä»£æ›¿ log4j æˆä¸ºä¸»æµã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç®€å•åœ°è¯´ï¼ŒLogback æ˜¯ä¸€ä¸ª Java é¢†åŸŸçš„æ—¥å¿—æ¡†æ¶ã€‚
Logback ä¸»è¦ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼š</p>
<ul>
<li>logback-coreï¼šæ ¸å¿ƒä»£ç </li>
<li>logback-classicï¼šlog4jçš„ä¸€ä¸ªæ”¹è‰¯ç‰ˆæœ¬ï¼ŒåŒæ—¶å®ç°äº†<code>slf4j</code>çš„æ¥å£</li>
<li>logback-accessï¼šè®¿é—®æ¨¡å—ä¸Servletå®¹å™¨é›†æˆæä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—çš„åŠŸèƒ½</li>
</ul>
<h1 id="logback-ä¸-log4j">Logback ä¸ Log4J<a hidden class="anchor" aria-hidden="true" href="#logback-ä¸-log4j">#</a></h1>
<p>å®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªæ—¥å¿—æ¡†æ¶éƒ½å‡ºè‡ªåŒä¸€ä¸ªå¼€å‘è€…ä¹‹æ‰‹ï¼ŒLogback ç›¸å¯¹äº Log4J æœ‰æ›´å¤šçš„ä¼˜ç‚¹</p>
<ul>
<li>åŒæ ·çš„ä»£ç è·¯å¾„ï¼ŒLogback æ‰§è¡Œæ›´å¿«</li>
<li>æ›´å……åˆ†çš„æµ‹è¯•</li>
<li>åŸç”Ÿå®ç°äº† SLF4J APIï¼ˆLog4J è¿˜éœ€è¦æœ‰ä¸€ä¸ªä¸­é—´è½¬æ¢å±‚ï¼‰</li>
<li>å†…å®¹æ›´ä¸°å¯Œçš„æ–‡æ¡£</li>
<li>æ”¯æŒ XML æˆ–è€… Groovy æ–¹å¼é…ç½®</li>
<li>é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½</li>
<li>ä» IO é”™è¯¯ä¸­ä¼˜é›…æ¢å¤</li>
<li>è‡ªåŠ¨åˆ é™¤æ—¥å¿—å½’æ¡£</li>
<li>è‡ªåŠ¨å‹ç¼©æ—¥å¿—æˆä¸ºå½’æ¡£æ–‡ä»¶</li>
<li>æ”¯æŒ Prudent æ¨¡å¼ï¼Œä½¿å¤šä¸ª JVM è¿›ç¨‹èƒ½è®°å½•åŒä¸€ä¸ªæ—¥å¿—æ–‡ä»¶</li>
<li>æ”¯æŒé…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ¡ä»¶åˆ¤æ–­æ¥é€‚åº”ä¸åŒçš„ç¯å¢ƒ</li>
<li>æ›´å¼ºå¤§çš„è¿‡æ»¤å™¨</li>
<li>æ”¯æŒ SiftingAppenderï¼ˆå¯ç­›é€‰ Appenderï¼‰</li>
<li>å¼‚å¸¸æ ˆä¿¡æ¯å¸¦æœ‰åŒ…ä¿¡æ¯</li>
</ul>
<h1 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹<a hidden class="anchor" aria-hidden="true" href="#å¿«é€Ÿå¼€å§‹">#</a></h1>
<p>æƒ³åœ¨ Java ç¨‹åºä¸­ä½¿ç”¨ Logbackï¼Œéœ€è¦ä¾èµ–ä¸‰ä¸ª jar åŒ…ï¼Œåˆ†åˆ«æ˜¯ slf4j-apiï¼Œlogback-coreï¼Œlogback-classicã€‚å…¶ä¸­ slf4j-api å¹¶ä¸æ˜¯ Logback çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¦å¤–ä¸€ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®å°† slf4j ä¸ Logback ç»“åˆä½¿ç”¨ã€‚è¦å¼•ç”¨è¿™äº› jar åŒ…ï¼Œåœ¨ maven é¡¹ç›®ä¸­å¼•å…¥ä»¥ä¸‹3ä¸ª dependencies</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>org.slf4j<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>slf4j-api<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.7.5<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>logback-core<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0.11<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.0.11<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SimpleDemo {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Logger logger = LoggerFactory.<span style="color:#007f7f">getLogger</span>(SimpleDemo.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello, this is a line of log message logged by Logback&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šä»£ç çš„è¿è¡Œç»“æœæ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>23:19:41.131 [main] INFO  i.b.l.demo.universal.SimpleDemo - Hello, this is a line of log message logged by Logback
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„åˆ°è¿™é‡Œï¼Œä»£ç é‡Œå¹¶æ²¡æœ‰å¼•ç”¨ä»»ä½•ä¸€ä¸ªè·Ÿ Logback ç›¸å…³çš„ç±»ï¼Œè€Œæ˜¯å¼•ç”¨äº† SLF4J ç›¸å…³çš„ç±»ï¼Œè¿™è¾¹æ˜¯ä½¿ç”¨ SLF4J çš„å¥½å¤„ï¼Œåœ¨éœ€è¦å°†æ—¥å¿—æ¡†æ¶åˆ‡æ¢ä¸ºå…¶å®ƒæ—¥å¿—æ¡†æ¶æ—¶ï¼Œæ— éœ€æ”¹åŠ¨å·²æœ‰çš„ä»£ç ã€‚</p>
<p><code>LoggerFactory</code> çš„ <code>getLogger()</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä»¥è¿™ä¸ªå‚æ•°å†³å®š logger çš„åå­—ï¼Œè¿™é‡Œä¼ å…¥äº† <code>SimpleDemo</code> è¿™ä¸ªç±»çš„ Class å®ä¾‹ï¼Œé‚£ä¹ˆ logger çš„åå­—ä¾¿æ˜¯ <code>SimpleDemo</code> è¿™ä¸ªç±»çš„å…¨é™å®šç±»åï¼š<code>io.beansoft.logback.demo.universal.SimpleDemo</code></p>
<h1 id="loggerappenders-ä¸-layouts">Loggerï¼ŒAppenders ä¸ Layouts<a hidden class="anchor" aria-hidden="true" href="#loggerappenders-ä¸-layouts">#</a></h1>
<p>åœ¨ logback é‡Œï¼Œæœ€é‡è¦çš„ä¸‰ä¸ªç±»åˆ†åˆ«æ˜¯</p>
<ul>
<li>Logger</li>
<li>Appender</li>
<li>Layout</li>
</ul>
<p>Logger ç±»ä½äº logback-classic æ¨¡å—ä¸­ï¼Œ è€Œ Appender å’Œ Layout ä½äº logback-core ä¸­ï¼Œè¿™æ„å‘³ç€ï¼Œ Appender å’Œ Layout å¹¶ä¸å…³å¿ƒ Logger çš„å­˜åœ¨ï¼Œä¸ä¾èµ–äº Loggerï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹å‡ºï¼Œ Logger ä¼šä¾èµ–äº Appender å’Œ Layout çš„ååŠ©ï¼Œæ—¥å¿—ä¿¡æ¯æ‰èƒ½è¢«æ­£å¸¸æ‰“å°å‡ºæ¥ã€‚</p>
<h2 id="åˆ†å±‚å‘½åè§„åˆ™">åˆ†å±‚å‘½åè§„åˆ™<a hidden class="anchor" aria-hidden="true" href="#åˆ†å±‚å‘½åè§„åˆ™">#</a></h2>
<p>ä¸ºäº†å¯ä»¥æ§åˆ¶å“ªäº›ä¿¡æ¯éœ€è¦è¾“å‡ºï¼Œå“ªäº›ä¿¡æ¯ä¸éœ€è¦è¾“å‡ºï¼Œlogback ä¸­å¼•è¿›äº†ä¸€ä¸ªæ¦‚å¿µï¼šåˆ†å±‚ã€‚æ¯ä¸ª logger éƒ½æœ‰ä¸€ä¸ª nameï¼Œè¿™ä¸ª name çš„æ ¼å¼ä¸ Java è¯­è¨€ä¸­çš„åŒ…åæ ¼å¼ç›¸åŒã€‚è¿™ä¹Ÿæ˜¯å‰é¢çš„ä¾‹å­ä¸­ç›´æ¥æŠŠä¸€ä¸ª class å¯¹è±¡ä¼ è¿›<code>LoggerFactory.getLogger()</code>æ–¹æ³•ä½œä¸ºå‚æ•°çš„åŸå› ã€‚</p>
<p>logger çš„ name æ ¼å¼å†³å®šäº†å¤šä¸ª logger èƒ½å¤Ÿç»„æˆä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œä¸ºäº†ç»´æŠ¤è¿™ä¸ªåˆ†å±‚çš„æ ‘çŠ¶ç»“æ„ï¼Œæ¯ä¸ª logger éƒ½è¢«ç»‘å®šåˆ°ä¸€ä¸ª logger ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡è´Ÿè´£ç†æ¸…å„ä¸ª logger ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ å‘½åä¸º <code>io.beansoft</code> çš„ loggerï¼Œæ˜¯å‘½åä¸º <code>io.beansoft.logback</code> çš„ logger çš„çˆ¶äº²ï¼Œæ˜¯å‘½åä¸º <code>io.beansoft.logback.demo</code> çš„ logger çš„ç¥–å…ˆã€‚</p>
<p>åœ¨ logger ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ‰ä¸€ä¸ª root loggerï¼Œä½œä¸ºæ‰€æœ‰ logger çš„ç¥–å…ˆï¼Œè¿™æ˜¯ logback å†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ª loggerï¼Œå¹¶éå¼€å‘è€…è‡ªå®šä¹‰çš„ loggerã€‚</p>
<p>å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å¾—è¿™ä¸ª loggerï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Logger rootLogger = LoggerFactory.getLogger(org.slf4j.Logger.ROOT_LOGGER_NAME);
</span></span></code></pre></td></tr></table>
</div>
</div><p>åŒæ ·ï¼Œé€šè¿‡ logger çš„ nameï¼Œå°±èƒ½è·å¾—å¯¹åº”çš„å…¶å®ƒ logger å®ä¾‹ã€‚</p>
<p><code>Logger</code> è¿™ä¸ªæ¥å£ä¸»è¦å®šä¹‰çš„æ–¹æ³•æœ‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.slf4j; 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Logger {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">// Printing methods: </span>
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> trace(String message);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> debug(String message);
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> info(String message); 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> warn(String message); 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> error(String message); 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ—¥å¿—æ‰“å°çº§åˆ«">æ—¥å¿—æ‰“å°çº§åˆ«<a hidden class="anchor" aria-hidden="true" href="#æ—¥å¿—æ‰“å°çº§åˆ«">#</a></h2>
<p>logger æœ‰æ—¥å¿—æ‰“å°çº§åˆ«ï¼Œå¦‚æœä¸ä¸ºä¸€ä¸ª logger æŒ‡å®šæ‰“å°çº§åˆ«ï¼Œé‚£ä¹ˆå®ƒå°†ç»§æ‰¿ç¦»ä»–æœ€è¿‘çš„ä¸€ä¸ªæœ‰æŒ‡å®šæ‰“å°çº§åˆ«çš„ç¥–å…ˆçš„æ‰“å°çº§åˆ«ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå®¹æ˜“æ··æ·†æƒ³ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œå¦‚æœ logger å…ˆæ‰¾å®ƒçš„çˆ¶äº²ï¼Œè€Œå®ƒçš„çˆ¶äº²æ²¡æœ‰æŒ‡å®šæ‰“å°çº§åˆ«ï¼Œé‚£ä¹ˆå®ƒä¼šç«‹å³å¿½ç•¥å®ƒçš„çˆ¶äº²ï¼Œå¾€ä¸Šç»§ç»­å¯»æ‰¾å®ƒçˆ·çˆ·ï¼Œç›´åˆ°å®ƒæ‰¾åˆ° root loggerã€‚å› æ­¤ï¼Œä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œè¦ä½¿ç”¨ logbackï¼Œ å¿…é¡»ä¸º root logger æŒ‡å®šæ—¥å¿—æ‰“å°çº§åˆ«ã€‚</p>
<p>æ—¥å¿—æ‰“å°çº§åˆ«ä»ä½çº§åˆ°é«˜çº§æ’åºçš„é¡ºåºæ˜¯ï¼š
<code>TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.classic.Level;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LogLevelDemo {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è¿™é‡Œå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ä¸ºäº†èƒ½è®¾ç½® logger çš„ Level</span>
</span></span><span style="display:flex;"><span>        ch.<span style="color:#007f7f">qos</span>.<span style="color:#007f7f">logback</span>.<span style="color:#007f7f">classic</span>.<span style="color:#007f7f">Logger</span> logger = 
</span></span><span style="display:flex;"><span>                (ch.<span style="color:#007f7f">qos</span>.<span style="color:#007f7f">logback</span>.<span style="color:#007f7f">classic</span>.<span style="color:#007f7f">Logger</span>) LoggerFactory.<span style="color:#007f7f">getLogger</span>(<span style="color:#0ff;font-weight:bold">&#34;com.foo&#34;</span>);
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">setLevel</span>(Level.<span style="color:#007f7f">INFO</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        Logger barlogger = LoggerFactory.<span style="color:#007f7f">getLogger</span>(<span style="color:#0ff;font-weight:bold">&#34;com.foo.Bar&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿™ä¸ªè¯­å¥èƒ½æ‰“å°ï¼Œå› ä¸º WARN &gt; INFO</span>
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">warn</span>(<span style="color:#0ff;font-weight:bold">&#34;can be printed because WARN &gt; INFO&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿™ä¸ªè¯­å¥ä¸èƒ½æ‰“å°ï¼Œå› ä¸º DEBUG &lt; INFO.</span>
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;can not be printed because DEBUG &lt; INFO&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// barlogger æ˜¯ logger çš„ä¸€ä¸ªå­ logger</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å®ƒç»§æ‰¿äº† logger çš„çº§åˆ« INFO</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»¥ä¸‹è¯­å¥èƒ½æ‰“å°ï¼Œå› ä¸º INFO &gt;= INFO</span>
</span></span><span style="display:flex;"><span>        barlogger.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;can be printed because INFO &gt;= INFO&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»¥ä¸‹è¯­å¥ä¸èƒ½æ‰“å°ï¼Œå› ä¸º DEBUG &lt; INFO</span>
</span></span><span style="display:flex;"><span>        barlogger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;can not be printed because DEBUG &lt; INFO&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰“å°ç»“æœæ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>00:27:19.251 [main] WARN  com.foo - can be printed because WARN &gt; INFO
</span></span><span style="display:flex;"><span>00:27:19.255 [main] INFO  com.foo.Bar - can be printed because INFO &gt;= INFO
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è·å–-logger">è·å– logger<a hidden class="anchor" aria-hidden="true" href="#è·å–-logger">#</a></h2>
<p>åœ¨ logback ä¸­ï¼Œæ¯ä¸ª logger éƒ½æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œè°ƒç”¨ <code>LoggerFactory.getLogger</code> æ–¹æ³•æ—¶ï¼Œå¦‚æœä¼ å…¥çš„ logger name ç›¸åŒï¼Œè·å–åˆ°çš„ logger éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>åœ¨ä¸º logger å‘½åæ—¶ï¼Œç”¨ç±»çš„å…¨é™å®šç±»åä½œä¸º logger name æ˜¯æœ€å¥½çš„ç­–ç•¥ï¼Œè¿™æ ·èƒ½å¤Ÿè¿½è¸ªåˆ°æ¯ä¸€æ¡æ—¥å¿—æ¶ˆæ¯çš„æ¥æºã€‚</p>
<h2 id="appender-å’Œ-layout">Appender å’Œ Layout<a hidden class="anchor" aria-hidden="true" href="#appender-å’Œ-layout">#</a></h2>
<p>åœ¨ logback çš„ä¸–ç•Œä¸­ï¼Œæ—¥å¿—ä¿¡æ¯ä¸ä»…ä»…å¯ä»¥æ‰“å°è‡³ consoleï¼Œä¹Ÿå¯ä»¥æ‰“å°è‡³æ–‡ä»¶ï¼Œç”šè‡³è¾“å‡ºåˆ°ç½‘ç»œæµä¸­ï¼Œæ—¥å¿—æ‰“å°çš„ç›®çš„åœ°ç”± Appender æ¥å†³å®šï¼Œä¸åŒçš„ Appender èƒ½å°†æ—¥å¿—ä¿¡æ¯æ‰“å°åˆ°ä¸åŒçš„ç›®çš„åœ°å»ã€‚</p>
<p>Appender æ˜¯ç»‘å®šåœ¨ logger ä¸Šçš„ï¼ŒåŒæ—¶ï¼Œä¸€ä¸ª logger å¯ä»¥ç»‘å®šå¤šä¸ª Appenderï¼Œæ„å‘³ç€ä¸€æ¡ä¿¡æ¯å¯ä»¥åŒæ—¶æ‰“å°åˆ°ä¸åŒçš„ç›®çš„åœ°å»ã€‚ä¾‹å¦‚ï¼Œå¸¸è§çš„åšæ³•æ˜¯ï¼Œæ—¥å¿—ä¿¡æ¯æ—¢è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ŒåŒæ—¶ä¹Ÿè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œè¿™å°±éœ€è¦ä¸º logger ç»‘å®šä¸¤ä¸ªä¸åŒçš„ loggerã€‚</p>
<p>Appender æ˜¯ç»‘å®šåœ¨ logger ä¸Šçš„ï¼Œè€Œ logger åˆæœ‰ç»§æ‰¿å…³ç³»ï¼Œå› æ­¤ä¸€ä¸ª logger æ‰“å°ä¿¡æ¯æ—¶çš„ç›®çš„åœ° Appender éœ€è¦å‚è€ƒå®ƒçš„çˆ¶äº²å’Œç¥–å…ˆã€‚åœ¨ logback ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ª logger æ‰“å°ä¸€æ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™æ¡ä¿¡æ¯é¦–å…ˆä¼šæ‰“å°è‡³å®ƒè‡ªå·±çš„ Appenderï¼Œç„¶åæ‰“å°è‡³å®ƒçš„çˆ¶äº²å’Œçˆ¶äº²ä»¥ä¸Šçš„ç¥–å…ˆçš„ Appenderï¼Œä½†å¦‚æœå®ƒçš„çˆ¶äº²è®¾ç½®äº† <code>additivity = false</code>ï¼Œé‚£ä¹ˆè¿™ä¸ª logger é™¤äº†æ‰“å°è‡³å®ƒè‡ªå·±çš„ Appender å¤–ï¼Œåªä¼šæ‰“å°è‡³å…¶çˆ¶äº²çš„ Appenderï¼Œå› ä¸ºå®ƒçš„çˆ¶äº²çš„ <code>additivity</code> å±æ€§ç½®ä¸ºäº† falseï¼Œå¼€å§‹å˜å¾—å¿˜ç¥–å¿˜å®—äº†ï¼Œæ‰€ä»¥è¿™ä¸ª logger åªè®¤å®ƒçˆ¶äº²çš„ Appenderï¼›æ­¤å¤–ï¼Œå¯¹äºè¿™ä¸ª logger çš„çˆ¶äº²æ¥è¯´ï¼Œå¦‚æœçˆ¶äº²çš„ logger æ‰“å°ä¸€æ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒåªä¼šæ‰“å°è‡³è‡ªå·±çš„ Appenderä¸­ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œå› ä¸ºçˆ¶äº²å·²ç»å¿˜è®°äº†çˆ·çˆ·åŠçˆ·çˆ·ä»¥ä¸Šçš„é‚£äº›çˆ¶è¾ˆäº†ã€‚</p>
<p>æ‰“å°çš„æ—¥å¿—é™¤äº†æœ‰æ‰“å°çš„ç›®çš„åœ°å¤–ï¼Œè¿˜æœ‰æ—¥å¿—ä¿¡æ¯çš„å±•ç¤ºæ ¼å¼ã€‚åœ¨ logback ä¸­ï¼Œç”¨ Layout æ¥ä»£è¡¨æ—¥å¿—æ‰“å°æ ¼å¼ã€‚æ¯”å¦‚è¯´ï¼ŒPatternLayout èƒ½å¤Ÿè¯†åˆ«ä»¥ä¸‹è¿™æ¡æ ¼å¼ï¼š
<code>%-4relative [%thread] %-5level %logger{32} - %msg%n</code>
ç„¶åæ‰“å°å‡ºæ¥çš„æ ¼å¼æ•ˆæœæ˜¯ï¼š
<code>176 [main] DEBUG manual.architecture.HelloWorld2 - Hello world.</code></p>
<p>ä¸Šé¢è¿™ä¸ªæ ¼å¼çš„ç¬¬ä¸€ä¸ªå­—æ®µä»£è¡¨ä»ç¨‹åºå¯åŠ¨å¼€å§‹åç»è¿‡çš„æ¯«ç§’æ•°ï¼Œç¬¬äºŒä¸ªå­—æ®µä»£è¡¨æ‰“å°å‡ºè¿™æ¡æ—¥å¿—çš„çº¿ç¨‹åå­—ï¼Œç¬¬ä¸‰ä¸ªå­—æ®µä»£è¡¨æ—¥å¿—ä¿¡æ¯çš„æ—¥å¿—æ‰“å°çº§åˆ«ï¼Œç¬¬å››ä¸ªå­—æ®µä»£è¡¨ logger nameï¼Œç¬¬äº”ä¸ªå­—æ®µæ˜¯æ—¥å¿—ä¿¡æ¯ï¼Œç¬¬å…­ä¸ªå­—æ®µä»…ä»…æ˜¯ä»£è¡¨ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p>
<h2 id="å‚æ•°åŒ–æ‰“å°æ—¥å¿—">å‚æ•°åŒ–æ‰“å°æ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#å‚æ•°åŒ–æ‰“å°æ—¥å¿—">#</a></h2>
<p>ç»å¸¸èƒ½çœ‹åˆ°æ‰“å°æ—¥å¿—çš„æ—¶å€™ï¼Œä½¿ç”¨ä»¥ä¸‹è¿™ç§æ–¹å¼æ‰“å°æ—¥å¿—ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;the message is &#34;</span> + msg + <span style="color:#0ff;font-weight:bold">&#34; from &#34;</span> + somebody);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ‰“å°æ—¥å¿—çš„æ–¹å¼æœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æ— è®ºæ—¥å¿—çº§åˆ«æ˜¯ä»€ä¹ˆï¼Œç¨‹åºæ€»è¦å…ˆæ‰§è¡Œ <code>&quot;the message is &quot; + msg + &quot; from &quot; + somebody</code> è¿™æ®µå­—ç¬¦ä¸²çš„æ‹¼æ¥æ“ä½œã€‚å½“ logger è®¾ç½®çš„æ—¥å¿—çº§åˆ«ä¸ºæ¯” DEBUG çº§åˆ«æ›´é«˜çº§åˆ«æ—¶ï¼ŒDEBUG çº§åˆ«çš„ä¿¡æ¯ä¸å›è¢«æ‰“å°å‡ºæ¥çš„ï¼Œæ˜¾ç„¶ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œæ˜¯ä¸å¿…è¦çš„ï¼Œå½“è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²å¾ˆå¤§æ—¶ï¼Œè¿™æ— ç–‘ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½ç™½ç™½æŸè€—ã€‚</p>
<p>äºæ˜¯ï¼Œä¸€ç§æ”¹è¿›çš„æ‰“å°æ—¥å¿—æ–¹å¼è¢«äººä»¬å‘ç°äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span>(logger.<span style="color:#007f7f">isDebugEnabled</span>()) { 
</span></span><span style="display:flex;"><span>    logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;the message is &#34;</span> + msg + <span style="color:#0ff;font-weight:bold">&#34; from &#34;</span> + somebody);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·çš„æ–¹å¼ç¡®å®èƒ½é¿å…å­—ç¬¦ä¸²æ‹¼æ¥çš„ä¸å¿…è¦æŸè€—ï¼Œä½†è¿™ä¹Ÿä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œå½“æ—¥å¿—çº§åˆ«ä¸º DEBUG æ—¶ï¼Œé‚£ä¹ˆæ‰“å°è¿™è¡Œæ¶ˆæ¯ï¼Œéœ€è¦åˆ¤æ–­ä¸¤æ¬¡æ—¥å¿—çº§åˆ«ã€‚ä¸€æ¬¡æ˜¯<code>logger.isDebugEnabled()</code>ï¼Œå¦ä¸€æ¬¡æ˜¯ <code>logger.debug()</code> æ–¹æ³•å†…éƒ¨ä¹Ÿä¼šåšçš„åˆ¤æ–­ã€‚è¿™æ ·ä¹Ÿä¼šå¸¦æ¥ä¸€ç‚¹ç‚¹æ•ˆç‡é—®é¢˜ï¼Œå¦‚æœèƒ½æ‰¾åˆ°æ›´å¥½çš„æ–¹æ³•ï¼Œè°æ„¿æ„æ— è§†ç™½ç™½æ¶ˆè€—çš„æ•ˆç‡ã€‚</p>
<p>æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯æä¾›å ä½ç¬¦çš„æ–¹å¼ï¼Œä»¥å‚æ•°åŒ–çš„æ–¹å¼æ‰“å°æ—¥å¿—ï¼Œä¾‹å¦‚ä¸Šè¿°çš„è¯­å¥ï¼Œå¯ä»¥æ˜¯è¿™æ ·çš„å†™æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;the message {} is from {}&#34;</span>, msg, somebody);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·çš„æ–¹å¼ï¼Œé¿å…äº†å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¹Ÿé¿å…äº†å¤šä¸€æ¬¡æ—¥å¿—çº§åˆ«çš„åˆ¤æ–­ã€‚</p>
<h2 id="logback-å†…éƒ¨è¿è¡Œæµç¨‹">logback å†…éƒ¨è¿è¡Œæµç¨‹<a hidden class="anchor" aria-hidden="true" href="#logback-å†…éƒ¨è¿è¡Œæµç¨‹">#</a></h2>
<p>å½“åº”ç”¨ç¨‹åºå‘èµ·ä¸€ä¸ªè®°å½•æ—¥å¿—çš„è¯·æ±‚ï¼Œä¾‹å¦‚ info() æ—¶ï¼Œlogback çš„å†…éƒ¨è¿è¡Œæµç¨‹å¦‚ä¸‹æ‰€ç¤º</p>
<ol>
<li>è·å¾—è¿‡æ»¤å™¨é“¾æ¡</li>
<li>æ£€æŸ¥æ—¥å¿—çº§åˆ«ä»¥å†³å®šæ˜¯å¦ç»§ç»­æ‰“å°</li>
<li>åˆ›å»ºä¸€ä¸ª <code>LoggingEvent</code> å¯¹è±¡</li>
<li>è°ƒç”¨ Appenders</li>
<li>è¿›è¡Œæ—¥å¿—ä¿¡æ¯æ ¼å¼åŒ–</li>
<li>å‘é€ <code>LoggingEvent</code> åˆ°å¯¹åº”çš„ç›®çš„åœ°</li>
</ol>
<h2 id="æœ‰å…³æ€§èƒ½é—®é¢˜">æœ‰å…³æ€§èƒ½é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#æœ‰å…³æ€§èƒ½é—®é¢˜">#</a></h2>
<p>å…³äºæ—¥å¿—ç³»ç»Ÿï¼Œäººä»¬è®¨è®ºå¾—æœ€å¤šçš„æ˜¯æ€§èƒ½é—®é¢˜ï¼Œå³ä½¿æ˜¯å°å‹çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿæœ‰å¯èƒ½è¾“å‡ºå¤§é‡çš„æ—¥å¿—ã€‚æ‰“å°æ—¥å¿—ä¸­çš„ä¸å½“å¤„ç†ï¼Œä¼šå¼•å‘å„ç§æ€§èƒ½é—®é¢˜ï¼Œä¾‹å¦‚å¤ªå¤šçš„æ—¥å¿—è®°å½•è¯·æ±‚å¯èƒ½ä½¿ç£ç›˜ IO æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œä»è€Œå½±å“åˆ°åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚åœ¨åˆé€‚çš„æ—¶å€™è®°å½•æ—¥å¿—ã€ä»¥æ›´å¥½çš„æ–¹å¼å‘èµ·æ—¥å¿—è¯·æ±‚ã€ä»¥åŠåˆç†è®¾ç½®æ—¥å¿—çº§åˆ«æ–¹é¢ï¼Œéƒ½æœ‰å¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜ã€‚
å…³äºæ€§èƒ½é—®é¢˜ï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹é¢éœ€è¦äº†è§£</p>
<ul>
<li>å»ºè®®ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼å‚æ•°åŒ–è®°å½•æ—¥å¿—</li>
<li>logback å†…éƒ¨æœºåˆ¶ä¿è¯ logger åœ¨è®°å½•æ—¥å¿—æ—¶ï¼Œä¸å¿…æ¯ä¸€æ¬¡éƒ½å»éå†å®ƒçš„çˆ¶è¾ˆä»¥è·å¾—å…³äºæ—¥å¿—çº§åˆ«ã€Appender çš„ä¿¡æ¯</li>
<li>åœ¨ logback ä¸­ï¼Œå°†æ—¥å¿—ä¿¡æ¯æ ¼å¼åŒ–ï¼Œä»¥åŠè¾“å‡ºåˆ°ç›®çš„åœ°ï¼Œæ˜¯æœ€æŸè€—æ€§èƒ½çš„æ“ä½œ</li>
</ul>
<h1 id="logback-é…ç½®é¡»çŸ¥">logback é…ç½®é¡»çŸ¥<a hidden class="anchor" aria-hidden="true" href="#logback-é…ç½®é¡»çŸ¥">#</a></h1>
<h2 id="é…ç½®æ–¹å¼">é…ç½®æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#é…ç½®æ–¹å¼">#</a></h2>
<p>logback æä¾›çš„é…ç½®æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>ç¼–ç¨‹å¼é…ç½®</li>
<li>xml æ ¼å¼</li>
<li>groovy æ ¼å¼</li>
</ul>
<p>logback åœ¨å¯åŠ¨æ—¶ï¼Œæ ¹æ®ä»¥ä¸‹æ­¥éª¤å¯»æ‰¾é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li>åœ¨ classpath ä¸­å¯»æ‰¾ logback-test.xmlæ–‡ä»¶</li>
<li>å¦‚æœæ‰¾ä¸åˆ° logback-test.xmlï¼Œåˆ™åœ¨ classpath ä¸­å¯»æ‰¾ logback.groovy æ–‡ä»¶</li>
<li>å¦‚æœæ‰¾ä¸åˆ° logback.groovyï¼Œåˆ™åœ¨ classpath ä¸­å¯»æ‰¾ logback.xmlæ–‡ä»¶</li>
<li>å¦‚æœä¸Šè¿°çš„æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ logback ä¼šä½¿ç”¨ JDK çš„ SPI æœºåˆ¶æŸ¥æ‰¾ META-INF/services/ch.qos.logback.classic.spi.Configurator ä¸­çš„ logback é…ç½®å®ç°ç±»ï¼Œè¿™ä¸ªå®ç°ç±»å¿…é¡»å®ç° <code>Configuration</code> æ¥å£ï¼Œä½¿ç”¨å®ƒçš„å®ç°æ¥è¿›è¡Œé…ç½®</li>
<li>å¦‚æœä¸Šè¿°æ“ä½œéƒ½ä¸æˆåŠŸï¼Œlogback å°±ä¼šä½¿ç”¨å®ƒè‡ªå¸¦çš„ <code>BasicConfigurator</code> æ¥é…ç½®ï¼Œå¹¶å°†æ—¥å¿—è¾“å‡ºåˆ° console</li>
</ol>
<p>logback-test.xml ä¸€èˆ¬ç”¨æ¥åœ¨æµ‹è¯•ä»£ç ä¸­æ‰“æ—¥å¿—ï¼Œå¦‚æœæ˜¯ maven é¡¹ç›®ï¼Œä¸€èˆ¬æŠŠ logback-test.xml æ”¾åœ¨ src/test/resources ç›®å½•ä¸‹ã€‚maven æ‰“åŒ…çš„æ—¶å€™ä¹Ÿä¸ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶æ‰“è¿› jar åŒ…é‡Œã€‚
logback å¯åŠ¨çš„æ—¶å€™è§£æé…ç½®æ–‡ä»¶å¤§æ¦‚éœ€è¦ 100 æ¯«ç§’çš„æ—¶é—´ï¼Œå¦‚æœå¸Œæœ›æ›´å¿«å¯åŠ¨ï¼Œå¯ä»¥é‡‡ç”¨ SPI çš„æ–¹å¼ã€‚</p>
<h2 id="é»˜è®¤çš„é…ç½®">é»˜è®¤çš„é…ç½®<a hidden class="anchor" aria-hidden="true" href="#é»˜è®¤çš„é…ç½®">#</a></h2>
<p>å‰é¢æœ‰æåˆ°é»˜è®¤çš„é…ç½®ï¼Œç”± <code>BasicConfiguator</code> ç±»é…ç½®è€Œæˆï¼Œè¿™ä¸ªç±»çš„é…ç½®å¯ä»¥ç”¨å¦‚ä¸‹çš„é…ç½®æ–‡ä»¶æ¥è¡¨ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- encoders are assigned the type
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å¯åŠ¨æ—¶æ‰“å°çŠ¶æ€ä¿¡æ¯">å¯åŠ¨æ—¶æ‰“å°çŠ¶æ€ä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#å¯åŠ¨æ—¶æ‰“å°çŠ¶æ€ä¿¡æ¯">#</a></h2>
<p>å¦‚æœ logback åœ¨å¯åŠ¨æ—¶ï¼Œè§£æé…ç½®æ–‡ä»¶æ—¶ï¼Œå‡ºç°äº†éœ€è¦è­¦å‘Šçš„ä¿¡æ¯æˆ–è€…é”™è¯¯ä¿¡æ¯ï¼Œé‚£ logback ä¼šè‡ªåŠ¨å…ˆæ‰“å°å‡ºè‡ªèº«çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>å¦‚æœå¸Œæœ›æ­£å¸¸æƒ…å†µä¸‹ä¹Ÿæ‰“å°å‡ºçŠ¶æ€ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¹‹å‰æåˆ°çš„æ–¹å¼ï¼Œåœ¨ä»£ç é‡Œæ˜¾å¼åœ°è°ƒç”¨ä½¿å…¶è¾“å‡ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// assume SLF4J is bound to logback in the current environment</span>
</span></span><span style="display:flex;"><span>    LoggerContext lc = (LoggerContext) LoggerFactory.<span style="color:#007f7f">getILoggerFactory</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// print logback&#39;s internal status</span>
</span></span><span style="display:flex;"><span>    StatusPrinter.<span style="color:#007f7f">print</span>(lc);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®š configuration çš„ debug å±æ€§ä¸º true</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">   by default --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ª Listenerï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;statusListener</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.status.OnConsoleStatusListener&#34;</span> <span style="font-weight:bold">/&gt;</span>  
</span></span><span style="display:flex;"><span>  ... the rest of the configuration file
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é‡ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®">é‡ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®<a hidden class="anchor" aria-hidden="true" href="#é‡ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®">#</a></h2>
<p>è®¾ç½® <strong>logback.configurationFile</strong> ç³»ç»Ÿå˜é‡ï¼Œå¯ä»¥é€šè¿‡ -D å‚æ•°è®¾ç½®ï¼Œæ‰€æŒ‡å®šçš„æ–‡ä»¶åå¿…é¡»ä»¥ .xml æˆ–è€… .groovy ä½œä¸ºæ–‡ä»¶åç¼€ï¼Œå¦åˆ™ logback ä¼šå¿½ç•¥è¿™äº›æ–‡ä»¶ã€‚</p>
<h2 id="é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½">é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½<a hidden class="anchor" aria-hidden="true" href="#é…ç½®æ–‡ä»¶è‡ªåŠ¨çƒ­åŠ è½½">#</a></h2>
<p>è¦ä½¿é…ç½®æ–‡ä»¶è‡ªåŠ¨é‡è½½ï¼Œéœ€è¦æŠŠ scan å±æ€§è®¾ç½®ä¸º trueï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯åˆ†é’Ÿæ‰ä¼šæ‰«æä¸€æ¬¡ï¼Œå¯ä»¥æŒ‡å®šæ‰«æé—´éš”ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">scan=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">scanPeriod=</span><span style="color:#0ff;font-weight:bold">&#34;30 seconds&#34;</span> <span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„æ‰«æé—´éš”è¦åŠ ä¸Šå•ä½ï¼Œå¯ç”¨çš„å•ä½æ˜¯ millisecondsï¼Œsecondsï¼Œminutes å’Œ hoursã€‚å¦‚æœåªæŒ‡å®šäº†æ•°å­—ï¼Œä½†æ²¡æœ‰æŒ‡å®šå•ä½ï¼Œè¿™é»˜è®¤å•ä½ä¸º millisecondsã€‚</p>
<p>åœ¨ logback å†…éƒ¨ï¼Œå½“è®¾ç½® scan å±æ€§ä¸º true åï¼Œä¸€ä¸ªå«åš <code>ReconfigureOnChangeFilter</code> çš„è¿‡æ»¤å™¨å°±ä¼šè¢«ç‰µæ‰¯è¿›æ¥ï¼Œå®ƒè´Ÿè´£åˆ¤æ–­æ˜¯å¦åˆ°äº†è¯¥æ‰«æçš„æ—¶å€™ï¼Œä»¥åŠæ˜¯å¦è¯¥é‡æ–°åŠ è½½é…ç½®ã€‚Logger çš„ä»»ä½•ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªè¿‡æ»¤å™¨ï¼Œæ‰€ä»¥å…³äºè¿™ä¸ªè¿‡æ»¤å™¨çš„è‡ªèº«çš„æ€§èƒ½é—®é¢˜ï¼Œå˜å¾—ååˆ†é‡è¦ã€‚logback ç›®å‰é‡‡ç”¨è¿™æ ·ä¸€ç§æœºåˆ¶ï¼Œå½“ logger çš„è°ƒç”¨æ¬¡æ•°åˆ°è¾¾ä¸€å®šæ¬¡æ•°åï¼Œæ‰çœŸæ­£è®©è¿‡æ»¤å™¨å»åšå®ƒè¦åšçš„äº‹æƒ…ï¼Œè¿™ä¸ªæ¬¡æ•°é»˜è®¤æ˜¯ 16ï¼Œè€Œ logback ä¼šåœ¨è¿è¡Œæ—¶æ ¹æ®è°ƒç”¨çš„é¢‘ç¹åº¦æ¥åŠ¨æ€è°ƒæ•´è¿™ä¸ªæ•°ç›®ã€‚</p>
<h2 id="è¾“å‡ºå¼‚å¸¸æ ˆæ—¶ä¹Ÿæ‰“å°å‡º-jar-åŒ…çš„ä¿¡æ¯">è¾“å‡ºå¼‚å¸¸æ ˆæ—¶ä¹Ÿæ‰“å°å‡º jar åŒ…çš„ä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºå¼‚å¸¸æ ˆæ—¶ä¹Ÿæ‰“å°å‡º-jar-åŒ…çš„ä¿¡æ¯">#</a></h2>
<p>è¿™ä¸ªå±æ€§é»˜è®¤æ˜¯å…³é—­ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">packagingData=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥é€šè¿‡ LoggerContext çš„ setPackagingDataEnabled(boolean) æ–¹æ³•æ¥å¼€å¯</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>LoggerContext lc = (LoggerContext) LoggerFactory.<span style="color:#007f7f">getILoggerFactory</span>();
</span></span><span style="display:flex;"><span>lc.<span style="color:#007f7f">setPackagingDataEnabled</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç›´æ¥è°ƒç”¨-joranconfigurator">ç›´æ¥è°ƒç”¨ JoranConfigurator<a hidden class="anchor" aria-hidden="true" href="#ç›´æ¥è°ƒç”¨-joranconfigurator">#</a></h2>
<p><strong>Joran</strong> æ˜¯ logback ä½¿ç”¨çš„ä¸€ä¸ªé…ç½®åŠ è½½åº“ï¼Œå¦‚æœæƒ³è¦é‡æ–°å®ç° logback çš„é…ç½®æœºåˆ¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªç±» <code>JoranConfigurator</code> æ¥å®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> chapters.configuration;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.classic.LoggerContext;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.classic.joran.JoranConfigurator;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.joran.spi.JoranException;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.util.StatusPrinter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MyApp3 {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">static</span> Logger logger = LoggerFactory.<span style="color:#007f7f">getLogger</span>(MyApp3.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// assume SLF4J is bound to logback in the current environment</span>
</span></span><span style="display:flex;"><span>        LoggerContext context = (LoggerContext) LoggerFactory.<span style="color:#007f7f">getILoggerFactory</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            JoranConfigurator configurator = <span style="color:#fff;font-weight:bold">new</span> JoranConfigurator();
</span></span><span style="display:flex;"><span>            configurator.<span style="color:#007f7f">setContext</span>(context);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Call context.reset() to clear any previous configuration, e.g. default </span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// configuration. For multi-step configuration, omit calling context.reset().</span>
</span></span><span style="display:flex;"><span>            context.<span style="color:#007f7f">reset</span>(); 
</span></span><span style="display:flex;"><span>            configurator.<span style="color:#007f7f">doConfigure</span>(args[0]);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">catch</span> (JoranException je) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// StatusPrinter will handle this</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        StatusPrinter.<span style="color:#007f7f">printInCaseOfErrorsOrWarnings</span>(context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;Entering application.&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Foo foo = <span style="color:#fff;font-weight:bold">new</span> Foo();
</span></span><span style="display:flex;"><span>        foo.<span style="color:#007f7f">doIt</span>();
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;Exiting application.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#é…ç½®æ–‡ä»¶">#</a></h1>
<p>æ ¹èŠ‚ç‚¹æ˜¯ configuration</p>
<ul>
<li><code>&lt;appender&gt;</code> å¯åŒ…å«å¤šä¸ª</li>
<li><code>&lt;logger&gt;</code>å¯åŒ…å«å¤šä¸ª</li>
<li><code>&lt;root&gt;</code>å¯åŒ…å«ä¸€ä¸ª</li>
</ul>
<h2 id="æ ¹èŠ‚ç‚¹configuration">æ ¹èŠ‚ç‚¹<code>&lt;configuration&gt;</code><a hidden class="anchor" aria-hidden="true" href="#æ ¹èŠ‚ç‚¹configuration">#</a></h2>
<p>scanï¼šå½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚
scanPeriodï¼šè®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚
debugï¼šå½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">scan=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">scanPeriod=</span><span style="color:#0ff;font-weight:bold">&#34;60 seconds&#34;</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--å…¶ä»–é…ç½®çœç•¥--&gt;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="logger-èŠ‚ç‚¹">logger èŠ‚ç‚¹<a hidden class="anchor" aria-hidden="true" href="#logger-èŠ‚ç‚¹">#</a></h2>
<p>ç”¨æ¥è®¾ç½®æŸä¸€ä¸ªåŒ…æˆ–å…·ä½“çš„æŸä¸€ä¸ªç±»çš„æ—¥å¿—æ‰“å°çº§åˆ«ï¼Œä»¥åŠæŒ‡å®š<code>&lt;appender&gt;</code>ã€‚
<code>&lt;logger&gt;</code>ä»…æœ‰ä¸€ä¸ªnameå±æ€§ï¼Œä¸€ä¸ªå¯é€‰çš„levelå’Œä¸€ä¸ªå¯é€‰çš„addtivityå±æ€§ã€‚
å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª<code>&lt;appender-ref&gt;</code>å…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªappenderå°†ä¼šæ·»åŠ åˆ°è¿™ä¸ªloggerã€‚</p>
<p>nameï¼šç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»ã€‚
levelï¼šç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼šTRACEã€DEBUGã€INFOã€WARNã€ERRORã€ALLå’ŒOFFï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šå€¼INHERITEDæˆ–è€…åŒä¹‰è¯NULLï¼Œä»£è¡¨å¼ºåˆ¶æ‰§è¡Œä¸Šçº§çš„çº§åˆ«ã€‚ å¦‚æœæœªè®¾ç½®æ­¤å±æ€§ï¼Œé‚£ä¹ˆå½“å‰loggerå°†ä¼šç»§æ‰¿ä¸Šçº§çš„çº§åˆ«ã€‚
addtivityï¼šæ˜¯å¦å‘ä¸Šçº§loggerä¼ é€’æ‰“å°ä¿¡æ¯ã€‚é»˜è®¤æ˜¯trueã€‚å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª<code>&lt;appender-ref&gt;</code>å…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªappenderå°†ä¼šæ·»åŠ åˆ°è¿™ä¸ªloggerã€‚</p>
<p>ç¤ºä¾‹ï¼šmyibatis æ—¥å¿—é…ç½®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.apache.ibatis&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;TRACE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.Connection&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.Statement&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;java.sql.PreparedStatement&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="root-èŠ‚ç‚¹">root èŠ‚ç‚¹<a hidden class="anchor" aria-hidden="true" href="#root-èŠ‚ç‚¹">#</a></h2>
<p>æ˜¯æ‰€æœ‰<code>&lt;logger&gt;</code>çš„ä¸Šçº§ã€‚åªæœ‰ä¸€ä¸ªlevelå±æ€§ï¼Œå› ä¸ºnameå·²ç»è¢«å‘½åä¸º rootï¼Œä¸”å·²ç»æ˜¯æœ€ä¸Šçº§äº†ã€‚åŒ<code>&lt;logger&gt;</code>ä¸€æ ·ï¼Œå¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª<code>&lt;appender-ref&gt;</code>å…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªappenderå°†ä¼šæ·»åŠ åˆ°è¿™ä¸ªloggerã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/root&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="appender-èŠ‚ç‚¹">appender èŠ‚ç‚¹<a hidden class="anchor" aria-hidden="true" href="#appender-èŠ‚ç‚¹">#</a></h2>
<p><code>&lt;appender&gt;</code>è´Ÿè´£å†™æ—¥å¿—çš„ç»„ä»¶ï¼Œå®ƒæœ‰ä¸¤ä¸ªå¿…è¦å±æ€§nameå’Œclassã€‚nameæŒ‡å®šappenderåç§°ï¼ŒclassæŒ‡å®šappenderçš„å…¨é™å®šåï¼Œå³å…·ä½“çš„å®ç°ç±»ã€‚
å¦‚æœæƒ³è¦å¾€ä¸€ä¸ª logger ä¸Šç»‘å®š appenderï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;HELLO&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/logger&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="consoleappender">ConsoleAppender<a hidden class="anchor" aria-hidden="true" href="#consoleappender">#</a></h3>
<p>æŠŠæ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæœ‰ä»¥ä¸‹å­èŠ‚ç‚¹ï¼š
<code>&lt;encoder&gt;</code>ï¼šå¯¹æ—¥å¿—è¿›è¡Œæ ¼å¼åŒ–ã€‚
<code>&lt;target&gt;</code>ï¼šå­—ç¬¦ä¸²System.out(é»˜è®¤)æˆ–è€…System.err
ç¤ºä¾‹ï¼šæŠŠ&gt;=DEBUGçº§åˆ«çš„æ—¥å¿—éƒ½è¾“å‡ºåˆ°æ§åˆ¶å°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€<span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€ã€€ã€€ <span style="font-weight:bold">&lt;encoder&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg %n<span style="font-weight:bold">&lt;/pattern&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€ã€€ã€€ <span style="font-weight:bold">&lt;/encoder&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€<span style="font-weight:bold">&lt;/appender&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€<span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€ã€€ã€€ã€€<span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>ã€€ã€€ã€€<span style="font-weight:bold">&lt;/root&gt;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="fileappender">FileAppender<a hidden class="anchor" aria-hidden="true" href="#fileappender">#</a></h3>
<p>æŠŠæ—¥å¿—æ·»åŠ åˆ°æ–‡ä»¶ï¼Œæœ‰ä»¥ä¸‹å­èŠ‚ç‚¹
<code>&lt;file&gt;</code>ï¼šè¢«å†™å…¥çš„æ–‡ä»¶åï¼Œå¯ä»¥æ˜¯ç›¸å¯¹ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹ç›®å½•ï¼Œå¦‚æœä¸Šçº§ç›®å½•ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œæ²¡æœ‰é»˜è®¤å€¼ã€‚
<code>&lt;append&gt;</code>ï¼šå¦‚æœæ˜¯ trueï¼Œæ—¥å¿—è¢«è¿½åŠ åˆ°æ–‡ä»¶ç»“å°¾ï¼Œå¦‚æœæ˜¯ falseï¼Œæ¸…ç©ºç°å­˜æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯trueã€‚
<code>&lt;encoder&gt;</code>ï¼šå¯¹è®°å½•äº‹ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€‚ï¼ˆå…·ä½“å‚æ•°ç¨åè®²è§£ ï¼‰
<code>&lt;prudent&gt;</code>ï¼šå¦‚æœæ˜¯ trueï¼Œæ—¥å¿—ä¼šè¢«å®‰å…¨çš„å†™å…¥æ–‡ä»¶ï¼Œå³ä½¿å…¶ä»–çš„FileAppenderä¹Ÿåœ¨å‘æ­¤æ–‡ä»¶åšå†™å…¥æ“ä½œï¼Œæ•ˆç‡ä½ï¼Œé»˜è®¤æ˜¯ falseã€‚
ç¤ºä¾‹ï¼šæŠŠ&gt;=DEBUGçº§åˆ«çš„æ—¥å¿—éƒ½è¾“å‡ºåˆ°testFile.log</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>testFile.log<span style="font-weight:bold">&lt;/file&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;append&gt;</span>true<span style="font-weight:bold">&lt;/append&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="rollingfileappender">RollingFileAppender<a hidden class="anchor" aria-hidden="true" href="#rollingfileappender">#</a></h3>
<p>æ»šåŠ¨è®°å½•æ–‡ä»¶ï¼Œå…ˆå°†æ—¥å¿—è®°å½•åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå½“ç¬¦åˆæŸä¸ªæ¡ä»¶æ—¶ï¼Œå°†æ—¥å¿—è®°å½•åˆ°å…¶ä»–æ–‡ä»¶ã€‚æœ‰ä»¥ä¸‹å­èŠ‚ç‚¹ï¼š
<code>&lt;file&gt;</code>ï¼šè¢«å†™å…¥çš„æ–‡ä»¶åï¼Œå¯ä»¥æ˜¯ç›¸å¯¹ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹ç›®å½•ï¼Œå¦‚æœä¸Šçº§ç›®å½•ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œæ²¡æœ‰é»˜è®¤å€¼ã€‚
<code>&lt;append&gt;</code>ï¼šå¦‚æœæ˜¯ trueï¼Œæ—¥å¿—è¢«è¿½åŠ åˆ°æ–‡ä»¶ç»“å°¾ï¼Œå¦‚æœæ˜¯ falseï¼Œæ¸…ç©ºç°å­˜æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯trueã€‚
<code>&lt;rollingPolicy&gt;</code>ï¼šå½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå†³å®šRollingFileAppenderçš„è¡Œä¸ºï¼Œæ¶‰åŠæ–‡ä»¶ç§»åŠ¨å’Œé‡å‘½åã€‚å±æ€§classå®šä¹‰å…·ä½“çš„æ»šåŠ¨ç­–ç•¥ç±»ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ¯å¤©ç”Ÿæˆä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œä¿å­˜30å¤©çš„æ—¥å¿—æ–‡ä»¶ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>logFile.%d{yyyy-MM-dd}.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>30<span style="font-weight:bold">&lt;/maxHistory&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span> 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="timebasedrollingpolicy">TimeBasedRollingPolicy<a hidden class="anchor" aria-hidden="true" href="#timebasedrollingpolicy">#</a></h4>
<p><code>class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</code>
æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æ¥åˆ¶å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£å‡ºå‘æ»šåŠ¨ã€‚æœ‰ä»¥ä¸‹å­èŠ‚ç‚¹ï¼š</p>
<p><code>&lt;fileNamePattern&gt;</code>ï¼šå¿…è¦èŠ‚ç‚¹ï¼ŒåŒ…å«æ–‡ä»¶ååŠâ€œ%dâ€è½¬æ¢ç¬¦ï¼Œâ€œ%dâ€å¯ä»¥åŒ…å«ä¸€ä¸ªjava.text.SimpleDateFormatæŒ‡å®šçš„æ—¶é—´æ ¼å¼ï¼Œå¦‚ï¼š%d{yyyy-MM}ã€‚
å¦‚æœç›´æ¥ä½¿ç”¨ %dï¼Œé»˜è®¤æ ¼å¼æ˜¯ yyyy-MM-ddã€‚RollingFileAppenderçš„fileå­—èŠ‚ç‚¹å¯æœ‰å¯æ— ï¼Œé€šè¿‡è®¾ç½®fileï¼Œå¯ä»¥ä¸ºæ´»åŠ¨æ–‡ä»¶å’Œå½’æ¡£æ–‡ä»¶æŒ‡å®šä¸åŒä½ç½®ï¼Œå½“å‰æ—¥å¿—æ€»æ˜¯è®°å½•åˆ°fileæŒ‡å®šçš„æ–‡ä»¶ï¼ˆæ´»åŠ¨æ–‡ä»¶ï¼‰ï¼Œæ´»åŠ¨æ–‡ä»¶çš„åå­—ä¸ä¼šæ”¹å˜ï¼›
å¦‚æœæ²¡è®¾ç½®fileï¼Œæ´»åŠ¨æ–‡ä»¶çš„åå­—ä¼šæ ¹æ®fileNamePattern çš„å€¼ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æ”¹å˜ä¸€æ¬¡ã€‚â€œ/â€æˆ–è€…â€œ\â€ä¼šè¢«å½“åšç›®å½•åˆ†éš”ç¬¦ã€‚</p>
<p><code>&lt;maxHistory&gt;</code>ï¼šå¯é€‰èŠ‚ç‚¹ï¼Œæ§åˆ¶ä¿ç•™çš„å½’æ¡£æ–‡ä»¶çš„æœ€å¤§æ•°é‡ï¼Œè¶…å‡ºæ•°é‡å°±åˆ é™¤æ—§æ–‡ä»¶ã€‚å‡è®¾è®¾ç½®æ¯ä¸ªæœˆæ»šåŠ¨ï¼Œä¸”<code>&lt;maxHistory&gt;</code>æ˜¯6ï¼Œåˆ™åªä¿å­˜æœ€è¿‘6ä¸ªæœˆçš„æ–‡ä»¶ï¼Œåˆ é™¤ä¹‹å‰çš„æ—§æ–‡ä»¶ã€‚æ³¨æ„ï¼Œåˆ é™¤æ—§æ–‡ä»¶æ˜¯ï¼Œé‚£äº›ä¸ºäº†å½’æ¡£è€Œåˆ›å»ºçš„ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</p>
<h4 id="sizebasedtriggeringpolicy">SizeBasedTriggeringPolicy<a hidden class="anchor" aria-hidden="true" href="#sizebasedtriggeringpolicy">#</a></h4>
<p><code>class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</code>
æŸ¥çœ‹å½“å‰æ´»åŠ¨æ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡æŒ‡å®šå¤§å°ä¼šå‘ŠçŸ¥RollingFileAppender è§¦å‘å½“å‰æ´»åŠ¨æ–‡ä»¶æ»šåŠ¨ã€‚åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p>
<p><code>&lt;maxFileSize&gt;</code>ï¼šè¿™æ˜¯æ´»åŠ¨æ–‡ä»¶çš„å¤§å°ï¼Œé»˜è®¤å€¼æ˜¯10MBã€‚
<code>&lt;prudent&gt;</code>ï¼šå½“ä¸ºtrueæ—¶ï¼Œä¸æ”¯æŒFixedWindowRollingPolicyã€‚æ”¯æŒTimeBasedRollingPolicyï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªé™åˆ¶ï¼Œ1ä¸æ”¯æŒä¹Ÿä¸å…è®¸æ–‡ä»¶å‹ç¼©ï¼Œ2ä¸èƒ½è®¾ç½®fileå±æ€§ï¼Œå¿…é¡»ç•™ç©ºã€‚
<code>&lt;triggeringPolicy &gt;</code>ï¼šå‘ŠçŸ¥ RollingFileAppender åˆé€‚æ¿€æ´»æ»šåŠ¨ã€‚</p>
<h4 id="fixedwindowrollingpolicy">FixedWindowRollingPolicy<a hidden class="anchor" aria-hidden="true" href="#fixedwindowrollingpolicy">#</a></h4>
<p><code>class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;</code>
æ ¹æ®å›ºå®šçª—å£ç®—æ³•é‡å‘½åæ–‡ä»¶çš„æ»šåŠ¨ç­–ç•¥ã€‚æœ‰ä»¥ä¸‹å­èŠ‚ç‚¹ï¼š
<code>&lt;minIndex&gt;</code>ï¼šçª—å£ç´¢å¼•æœ€å°å€¼
<code>&lt;maxIndex&gt;</code>ï¼šçª—å£ç´¢å¼•æœ€å¤§å€¼ï¼Œå½“ç”¨æˆ·æŒ‡å®šçš„çª—å£è¿‡å¤§æ—¶ï¼Œä¼šè‡ªåŠ¨å°†çª—å£è®¾ç½®ä¸º12ã€‚
<code>&lt;fileNamePattern&gt;</code>ï¼šå¿…é¡»åŒ…å«â€œ%iâ€ä¾‹å¦‚ï¼Œå‡è®¾æœ€å°å€¼å’Œæœ€å¤§å€¼åˆ†åˆ«ä¸º1å’Œ2ï¼Œå‘½åæ¨¡å¼ä¸º mylog%i.log,ä¼šäº§ç”Ÿå½’æ¡£æ–‡ä»¶mylog1.logå’Œmylog2.logã€‚è¿˜å¯ä»¥æŒ‡å®šæ–‡ä»¶å‹ç¼©é€‰é¡¹ï¼Œä¾‹å¦‚ï¼Œmylog%i.log.gz æˆ–è€… æ²¡æœ‰log%i.log.zip</p>
<h2 id="context-name-èŠ‚ç‚¹">Context Name èŠ‚ç‚¹<a hidden class="anchor" aria-hidden="true" href="#context-name-èŠ‚ç‚¹">#</a></h2>
<p>ç”¨æ¥è®¾ç½®ä¸Šä¸‹æ–‡åç§°ï¼Œæ¯ä¸ªloggeréƒ½å…³è”åˆ°loggerä¸Šä¸‹æ–‡ï¼Œé»˜è®¤ä¸Šä¸‹æ–‡åç§°ä¸ºdefaultã€‚ä½†å¯ä»¥ä½¿ç”¨<code>&lt;contextName&gt;</code>è®¾ç½®æˆå…¶ä»–åå­—ï¼Œç”¨äºåŒºåˆ†ä¸åŒåº”ç”¨ç¨‹åºçš„è®°å½•ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;contextName&gt;</span>myAppName<span style="font-weight:bold">&lt;/contextName&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;pattern&gt;</span>%d %contextName [%t] %level %logger{36} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="propertyä½¿ç”¨å˜é‡"><code>&lt;property&gt;</code>ä½¿ç”¨å˜é‡<a hidden class="anchor" aria-hidden="true" href="#propertyä½¿ç”¨å˜é‡">#</a></h2>
<p>ç”¨æ¥å®šä¹‰å˜é‡å€¼ï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§nameå’Œvalueï¼Œé€šè¿‡<code>&lt;property&gt;</code>å®šä¹‰çš„å€¼ä¼šè¢«æ’å…¥åˆ°loggerä¸Šä¸‹æ–‡ä¸­ï¼Œå¯ä»¥ä½¿<code>${}</code>æ¥ä½¿ç”¨å˜é‡ã€‚</p>
<h3 id="å®šä¹‰å˜é‡">å®šä¹‰å˜é‡<a hidden class="anchor" aria-hidden="true" href="#å®šä¹‰å˜é‡">#</a></h3>
<p>å¯ä»¥ç›´æ¥åœ¨ logback.xml ä¸­å®šä¹‰å˜é‡</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;USER_HOME&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;/home/sebastien&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${USER_HOME}/myApp.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥é€šè¿‡å¤§Då‚æ•°æ¥å®šä¹‰</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>java -DUSER_HOME=&#34;/home/sebastien&#34; MyApp2
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥é€šè¿‡å¤–éƒ¨æ–‡ä»¶æ¥å®šä¹‰</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">file=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/java/chapters/configuration/variables1.properties&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${USER_HOME}/myApp.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤–éƒ¨æ–‡ä»¶ä¹Ÿæ”¯æŒ classpath ä¸­çš„æ–‡ä»¶</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;resource1.properties&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${USER_HOME}/myApp.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤–éƒ¨æ–‡ä»¶çš„æ ¼å¼æ˜¯ key-value å‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>USER_HOME=/home/sebastien
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å˜é‡çš„ä½œç”¨åŸŸ">å˜é‡çš„ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#å˜é‡çš„ä½œç”¨åŸŸ">#</a></h3>
<p>å˜é‡æœ‰ä¸‰ä¸ªä½œç”¨åŸŸ</p>
<ul>
<li>local</li>
<li>context</li>
<li>system</li>
</ul>
<p>local ä½œç”¨åŸŸåœ¨é…ç½®æ–‡ä»¶å†…æœ‰æ•ˆï¼Œcontext ä½œç”¨åŸŸçš„æœ‰æ•ˆèŒƒå›´å»¶ä¼¸è‡³ logger contextï¼Œsystem ä½œç”¨åŸŸçš„èŒƒå›´æœ€å¹¿ï¼Œæ•´ä¸ª JVM å†…éƒ½æœ‰æ•ˆã€‚</p>
<p>logback åœ¨æ›¿æ¢å˜é‡æ—¶ï¼Œé¦–å…ˆæœç´¢ local å˜é‡ï¼Œç„¶åæœç´¢ contextï¼Œç„¶åæœç´¢ systemã€‚</p>
<p>é€šè¿‡ scope å±æ€§æ¥æŒ‡å®šä½œç”¨åŸŸã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;nodeId&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;firstNode&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>/opt/${nodeId}/myApp.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å˜é‡çš„é»˜è®¤å€¼">å˜é‡çš„é»˜è®¤å€¼<a hidden class="anchor" aria-hidden="true" href="#å˜é‡çš„é»˜è®¤å€¼">#</a></h3>
<p>åœ¨å¼•ç”¨ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æœè¯¥å˜é‡æœªå®šä¹‰ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ºå…¶æŒ‡å®šé»˜è®¤å€¼ï¼Œåšæ³•æ˜¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>${aName:-golden}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿è¡Œæ—¶å®šä¹‰å˜é‡">è¿è¡Œæ—¶å®šä¹‰å˜é‡<a hidden class="anchor" aria-hidden="true" href="#è¿è¡Œæ—¶å®šä¹‰å˜é‡">#</a></h3>
<p>éœ€è¦ä½¿ç”¨<code>&lt;define&gt;</code>æ ‡ç­¾ï¼ŒæŒ‡å®šæ¥å£ <code>PropertyDfiner</code> ä¸ºå¯¹åº”çš„å®ç°ç±»ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;define</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;rootLevel&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;a.class.implementing.PropertyDefiner&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;shape&gt;</span>round<span style="font-weight:bold">&lt;/shape&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;color&gt;</span>brown<span style="font-weight:bold">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;size&gt;</span>24<span style="font-weight:bold">&lt;/size&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/define&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;${rootLevel}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¡ä»¶åŒ–å¤„ç†é…ç½®æ–‡ä»¶">æ¡ä»¶åŒ–å¤„ç†é…ç½®æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#æ¡ä»¶åŒ–å¤„ç†é…ç½®æ–‡ä»¶">#</a></h3>
<p>logback å…è®¸åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰æ¡ä»¶è¯­å¥ï¼Œä»¥å†³å®šé…ç½®çš„ä¸åŒè¡Œä¸ºï¼Œå…·ä½“è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- if-then form --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">condition=</span><span style="color:#0ff;font-weight:bold">&#34;some conditional expression&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;then&gt;</span>
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/then&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- if-then-else form --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">condition=</span><span style="color:#0ff;font-weight:bold">&#34;some conditional expression&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;then&gt;</span>
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/then&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;else&gt;</span>
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/else&gt;</span>    
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/if&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">condition=</span><span style="color:#0ff;font-weight:bold">&#39;property(&#34;HOSTNAME&#34;).contains(&#34;torino&#34;)&#39;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;then&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CON&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;pattern&gt;</span>%d %-5level %logger{35} - %msg %n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;root&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CON&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/then&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${randomOutputDir}/conditional.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d %-5level %logger{35} - %msg %n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;ERROR&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»jndi-è·å–å˜é‡">ä»JNDI è·å–å˜é‡<a hidden class="anchor" aria-hidden="true" href="#ä»jndi-è·å–å˜é‡">#</a></h3>
<p>ä½¿ç”¨<code>&lt;insertFromJNDI&gt;</code>å¯ä»¥ä» JNDI åŠ è½½å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insertFromJNDI</span> <span style="color:#007f7f">env-entry-name=</span><span style="color:#0ff;font-weight:bold">&#34;java:comp/env/appName&#34;</span> <span style="color:#007f7f">as=</span><span style="color:#0ff;font-weight:bold">&#34;appName&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;contextName&gt;</span>${appName}<span style="font-weight:bold">&lt;/contextName&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d ${CONTEXT_NAME} %level %msg %logger{50}%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–‡ä»¶åŒ…å«">æ–‡ä»¶åŒ…å«<a hidden class="anchor" aria-hidden="true" href="#æ–‡ä»¶åŒ…å«">#</a></h3>
<p>å¯ä»¥ä½¿ç”¨<code>&lt;include&gt;</code>æ ‡ç­¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">file=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/java/chapters/configuration/includedConfig.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;includedConsole&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¢«åŒ…å«çš„æ–‡ä»¶å¿…é¡»æœ‰ä»¥ä¸‹æ ¼å¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;included&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;includedConsole&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>&#34;%d - %m%n&#34;<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/included&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¯æŒä»å¤šç§æºå¤´åŒ…å«ï¼Œä»æ–‡ä»¶ä¸­åŒ…å«</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">file=</span><span style="color:#0ff;font-weight:bold">&#34;src/main/java/chapters/configuration/includedConfig.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä» classpath ä¸­åŒ…å«</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;includedConfig.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä» URL ä¸­åŒ…å«</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">url=</span><span style="color:#0ff;font-weight:bold">&#34;http://some.host.com/includedConfig.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœåŒ…å«ä¸æˆåŠŸï¼Œé‚£ä¹ˆ logback ä¼šæ‰“å°å‡ºä¸€æ¡è­¦å‘Šä¿¡æ¯ï¼Œå¦‚æœä¸å¸Œæœ› logback è­¦å‘Šï¼Œåªéœ€è¿™æ ·åšï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">optional=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#f00">....</span><span style="font-weight:bold">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="context-listener">Context Listener<a hidden class="anchor" aria-hidden="true" href="#context-listener">#</a></h2>
<p><code>LoggerContextListener</code> æ¥å£çš„å®ä¾‹èƒ½ç›‘å¬ logger context ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œæ¯”å¦‚è¯´æ—¥å¿—çº§åˆ«çš„å˜åŒ–ï¼Œæ·»åŠ çš„æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;contextListener</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.jul.LevelChangePropagator&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  .... 
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="appender">Appender<a hidden class="anchor" aria-hidden="true" href="#appender">#</a></h1>
<h2 id="appender-æ¦‚å¿µ">Appender æ¦‚å¿µ<a hidden class="anchor" aria-hidden="true" href="#appender-æ¦‚å¿µ">#</a></h2>
<p>å½“ä¸€ä¸ªè®°å½•æ—¥å¿—çš„äº‹ä»¶è¢«å‘èµ·æ—¶ï¼Œlogback ä¼šå°†è¿™ä¸ªäº‹ä»¶å‘é€ç»™ appenderã€‚appender å¿…é¡»å®ç° <code>ch.qos.logback.core.Appender</code> æ¥å£ã€‚è¿™ä¸ªæ¥å£çš„æœ€é‡è¦çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> ch.qos.logback.core;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.spi.ContextAware;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.spi.FilterAttachable;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.spi.LifeCycle;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Appender&lt;E&gt; <span style="color:#fff;font-weight:bold">extends</span> LifeCycle, ContextAware, FilterAttachable {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getName();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setName(String name);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">void</span> doAppend(E event);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ¥å£çš„å¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯ setter å’Œ getterï¼ŒdoAppend æ–¹å¼æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªã€‚è¿™ä¸ªç±»æ¥æ”¶äº†ä¸€ä¸ªæ³›å‹ç±»å‹ Eï¼Œåœ¨ logback-classic æ¨¡å—é‡Œï¼Œ E çš„ç±»å‹æ˜¯ ILoggingEventï¼Œåœ¨ logback-access æ¨¡å—é‡Œï¼ŒE çš„ç±»å‹æ˜¯ AccessEventã€‚è¿™ä¸ªæ¥å£ä¹Ÿç»§æ‰¿äº† FilterAttachable æ¥å£ï¼Œæ„å‘³ç€å¯ä»¥ä¸ºè¿™ä¸ª appender å…³è”ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿‡æ»¤å™¨ã€‚appender æœ€ç»ˆä¼šæ ¹æ® layout æˆ–è€… encoder å°†æ—¥å¿—ä¿¡æ¯æ ¼å¼åŒ–ï¼Œå¹¶ä¸”åªèƒ½å…³è”ä¸€ä¸ª layout æˆ–è€… encoderï¼Œä¸è¿‡æœ‰ä¸€äº› appender å·²ç»æœ‰äº†å†…åµŒçš„ layout æˆ–è€… encoderï¼Œæ¯”å¦‚è¯´ SocketAppenderã€‚</p>
<h2 id="appenderbase-æºç åˆ†æ">AppenderBase æºç åˆ†æ<a hidden class="anchor" aria-hidden="true" href="#appenderbase-æºç åˆ†æ">#</a></h2>
<p><code>ch.qos.logback.core.AppenderBase</code> è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯å…¶å®ƒå…·ä½“ appender çš„çˆ¶ç±»ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> doAppend(E eventObject) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// prevent re-entry.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (guard) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        guard = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">started</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (statusRepeatCount++ &lt; ALLOWED_REPEATS) {
</span></span><span style="display:flex;"><span>                addStatus(<span style="color:#fff;font-weight:bold">new</span> WarnStatus(
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;Attempted to append to non started appender [&#34;</span> + name + <span style="color:#0ff;font-weight:bold">&#34;].&#34;</span>,<span style="color:#fff;font-weight:bold">this</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (getFilterChainDecision(eventObject) == FilterReply.<span style="color:#007f7f">DENY</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ok, we now invoke the derived class&#39;s implementation of append</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">append</span>(eventObject);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        guard = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¦–å…ˆ doAppend æ–¹æ³•æ˜¯ synchronizedï¼Œä¿è¯äº†å¤šçº¿ç¨‹è®¿é—®è¿™ä¸ª appender æ—¶èƒ½èµ·åˆ°äº’æ–¥çš„ä½œç”¨ï¼Œlogback ä¹Ÿæœ‰éäº’æ–¥çš„å®ç°ï¼Œ<code> ch.qos.logback.core.UnsynchronizedAppenderBase</code>ã€‚
guard å˜é‡çš„ä½œç”¨æ˜¯é˜²æ­¢åŒä¸€ä¸ªçº¿ç¨‹å†…é€’å½’è°ƒç”¨ doAppend æ–¹æ³•ï¼Œé€ æˆæ­»å¾ªç¯ä»è€Œå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
<h2 id="logback-core-æ¨¡å—">logback-core æ¨¡å—<a hidden class="anchor" aria-hidden="true" href="#logback-core-æ¨¡å—">#</a></h2>
<p>logback-core æ¨¡å—æ˜¯å…¶å®ƒæ¨¡å—çš„åŸºç¡€è®¾æ–½ï¼Œä»¥ä¸‹å°†è®¨è®ºå‡ ä¸ª logback è‡ªå¸¦çš„ appenderã€‚</p>
<h3 id="outputstreamappender">OutputStreamAppender<a hidden class="anchor" aria-hidden="true" href="#outputstreamappender">#</a></h3>
<p><code>OutputStreamAppender</code> å°†æ—¥å¿—è®°å½•åˆ°ä¸€ä¸ª <code>java.io.OutputStream</code> é‡Œï¼Œè¿™ä¸ª appender æ˜¯å…¶å®ƒ appender çš„åŸºç¡€ï¼Œä¸èƒ½ç›´æ¥åœ¨ logback é…ç½®æ–‡ä»¶é‡Œé¢æŠŠå®ƒè¿›è¡Œé…ç½®ç„¶åæ‹‰å‡ºæ¥ç”¨ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ²¡æœ‰å¯é…ç½®çš„å±æ€§ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>encoder</td>
<td>Encoder</td>
<td>æ—¥å¿—æ ¼å¼</td>
</tr>
<tr>
<td>immediateFlush</td>
<td>boolean</td>
<td>é»˜è®¤å€¼æ˜¯ trueï¼Œæ„å‘³ç€æ—¥å¿—ä¿¡æ¯ç›´æ¥åˆ·åˆ°ç›®çš„åœ°ï¼Œä¸ä¼šåšç¼“å­˜ã€‚å¦‚æœè¯¥å€¼è®¾ç½®ä¸º falseï¼Œå¹¶ä¸”æ²¡æœ‰å…³é—­ appenderï¼Œé‚£ä¹ˆä¸€éƒ¨åˆ†æ—¥å¿—ä¿¡æ¯å°†ä¼šä¸¢å¤±</td>
</tr>
</tbody>
</table>
<p><code>OutputStreamAppender</code> çš„ç±»ç»§æ‰¿ä½“ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<h3 id="consoleappender-1">ConsoleAppender<a hidden class="anchor" aria-hidden="true" href="#consoleappender-1">#</a></h3>
<p><code>ConsoleAppender</code> å°†æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæ—¢å¯ä»¥æ˜¯ System.outï¼Œä¹Ÿå¯ä»¥æ˜¯ System.errã€‚é»˜è®¤æ˜¯å‰è€…ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>encoder</td>
<td>Encoder</td>
<td>æ—¥å¿—æ ¼å¼</td>
</tr>
<tr>
<td>target</td>
<td>String</td>
<td>è¦ä¹ˆå¡«System.outï¼Œè¦ä¹ˆå¡«System.errï¼Œé»˜è®¤æ˜¯å‰è€…ã€‚</td>
</tr>
<tr>
<td>withJansi</td>
<td>boolean</td>
<td>é»˜è®¤å€¼æ˜¯ falseï¼Œä¸»è¦ä½œç”¨æ˜¯ä¸ºä»£ç ç€è‰²ï¼Œå¦‚æœæ˜¯ windows å¹³å°ï¼Œè®¾ç½®ä¸º true çš„åŒæ—¶è¿˜è¦åœ¨ classpath ä¸­åŠ å…¥ â€œorg.fusesource.jansi:jansi:1.9â€ï¼ŒUnix ç±»ç³»ç»Ÿæœ¬èº«æ”¯æŒå› æ­¤ä¸ç”¨ã€‚å¦‚æœæƒ³åœ¨ Eclipse é‡Œé¢ç”¨ï¼Œè¿˜è¦ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼šANSI in Eclipse Console</td>
</tr>
</tbody>
</table>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- encoders are assigned the type
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg %n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;STDOUT&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="fileappender-1">FileAppender<a hidden class="anchor" aria-hidden="true" href="#fileappender-1">#</a></h3>
<p>æŠŠæ—¥å¿—ä¿¡æ¯è®°å½•åˆ°æ–‡ä»¶é‡Œã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>append</td>
<td>boolean</td>
<td>å¦‚æœç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œè¦ä¹ˆè¿½åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œè¦ä¹ˆç›´æ¥æ¸…ç©ºæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ true</td>
</tr>
<tr>
<td>encoder</td>
<td>Encoder</td>
<td>æ—¥å¿—æ ¼å¼</td>
</tr>
<tr>
<td>file</td>
<td>String</td>
<td>æ–‡ä»¶åï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™é‡æ–°åˆ›å»ºï¼Œå¦‚æœçˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œä¹Ÿä¼šé‡æ–°åˆ›å»ºï¼Œæ³¨æ„åœ¨ windows ä¸‹ï¼Œè¿™ç§å†™æ³• c:\temp\test.log ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸º \t ä¼šè¢«è½¬ä¹‰ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ï¼šc:/temp/test.log æˆ–è€… c:\temp\test.log</td>
</tr>
<tr>
<td>prudent</td>
<td>boolean</td>
<td>å…è®¸å¤šä¸ªè¿›ç¨‹å‘åŒä¸€ä¸ªæ—¥å¿—æ–‡ä»¶é‡Œå†™æ—¥å¿—ï¼Œä½†ç”±äºé”ç«äº‰ï¼Œæ€§èƒ½æ¶ˆè€—å¤§æ¦‚æ˜¯æ™®é€šæ—¥å¿—è®°å½•çš„ä¸‰å€å·¦å³</td>
</tr>
</tbody>
</table>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>Immediate Flush</strong> ä¸ºtrueï¼Œä¸ºäº†ä¸ä¸¢å¤±æ—¥å¿—ã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥å°†å…¶è®¾ç½®ä¸º falseã€‚
é…ç½®ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>testFile.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;append&gt;</span>true<span style="font-weight:bold">&lt;/append&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- set immediateFlush to false for much higher logging throughput --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;immediateFlush&gt;</span>true<span style="font-weight:bold">&lt;/immediateFlush&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- encoders are assigned the type
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœå¸Œæœ›ä¸ºæ—¥å¿—åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥é…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Insert the current time formatted as &#34;yyyyMMdd&#39;T&#39;HHmmss&#34; under
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">       the key &#34;bySecond&#34; into the logger context. This value will be
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">       available to all subsequent configuration elements. --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;timestamp</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;bySecond&#34;</span> <span style="color:#007f7f">datePattern=</span><span style="color:#0ff;font-weight:bold">&#34;yyyyMMdd&#39;T&#39;HHmmss&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.FileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- use the previously created timestamp to create a uniquely
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">         named log file --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>log-${bySecond}.txt<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ‡ç­¾æœ‰ä¸¤ä¸ªå¿…è¦çš„å±æ€§ï¼Œåˆ†åˆ«æ˜¯ name å’Œ datePatternï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„å±æ€§ timeReferenceï¼Œname æ‰€æŒ‡å®šçš„å¯ä»¥ç”¨æ¥ä½œä¸ºå˜é‡ä½¿ç”¨ï¼ŒdataPattern çš„æ ¼å¼ä¸ SimpleDateFormat çš„æ ¼å¼ä¸€æ ·ï¼Œè€Œ timeReference é»˜è®¤æ˜¯é…ç½®æ–‡ä»¶è¢«è§£æçš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šä¸º contextBirthï¼Œè¿™æ ·æ—¶é—´å°±æ˜¯ä¸Šä¸‹æ–‡è¢«åˆ›å»ºçš„æ—¶é—´ã€‚
å¦‚ä¸‹ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;timestamp</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;bySecond&#34;</span> <span style="color:#007f7f">datePattern=</span><span style="color:#0ff;font-weight:bold">&#34;yyyyMMdd&#39;T&#39;HHmmss&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#007f7f">timeReference=</span><span style="color:#0ff;font-weight:bold">&#34;contextBirth&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="rollingfileappender-1">RollingFileAppender<a hidden class="anchor" aria-hidden="true" href="#rollingfileappender-1">#</a></h3>
<p><code>RollingFileAppender</code> æ—¢å¯ä»¥è®°å½•æ—¥å¿—åˆ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨æŸä¸ªæ¡ä»¶åˆ°è¾¾åï¼Œè½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚æœ‰ä¸¤ä¸ªå­ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ RollingPolicy å’Œ TriggeringPolicyï¼Œåˆ†åˆ«æè¿°äº†å¦‚ä½•æ»šåŠ¨ï¼Œä»¥åŠä½•æ—¶æ»šåŠ¨ã€‚
å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>file</td>
<td>String</td>
<td>è§ FileAppender</td>
</tr>
<tr>
<td>append</td>
<td>boolean</td>
<td>è§ FileAppender</td>
</tr>
<tr>
<td>encoder</td>
<td>Encoder</td>
<td>æ—¥å¿—æ ¼å¼</td>
</tr>
<tr>
<td>rollingPolicy</td>
<td>RollingPolicy</td>
<td>å¦‚ä½•æ»šåŠ¨</td>
</tr>
<tr>
<td>triggeringPolicy</td>
<td>TriggeringPolicy</td>
<td>ä½•æ—¶æ»šåŠ¨</td>
</tr>
<tr>
<td>prudent</td>
<td>boolean</td>
<td>FixedWindowRollingPolicy ä¸æ”¯æŒ prudent æ¨¡å¼ã€‚TimeBasedRollingPolicy æ”¯æŒ prudent æ¨¡å¼ï¼Œä¸è¿‡æœ‰ä¸¤ä¸ªé™åˆ¶ã€‚åœ¨ prudent æ¨¡å¼ä¸‹ï¼Œæ— æ³•è¿›è¡Œæ–‡ä»¶å‹ç¼©ï¼Œfile å±æ€§å¿…é¡»ç•™ç™½ï¼Œä¸èƒ½å¡«å†™ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="æ»šåŠ¨ç­–ç•¥">æ»šåŠ¨ç­–ç•¥<a hidden class="anchor" aria-hidden="true" href="#æ»šåŠ¨ç­–ç•¥">#</a></h4>
<p>RollingPolicy ä¸»è¦è´Ÿè´£æ–‡ä»¶çš„ç§»åŠ¨å’Œé‡å‘½å</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> ch.qos.logback.core.rolling;  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.FileAppender;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> ch.qos.logback.core.spi.LifeCycle;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> RollingPolicy <span style="color:#fff;font-weight:bold">extends</span> LifeCycle {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> rollover() <span style="color:#fff;font-weight:bold">throws</span> RolloverFailure;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getActiveFileName();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> CompressionMode getCompressionMode();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setParent(FileAppender appender);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="timebasedrollingpolicy-1">TimeBasedRollingPolicy<a hidden class="anchor" aria-hidden="true" href="#timebasedrollingpolicy-1">#</a></h4>
<p>è¿™ä¸ªç­–ç•¥åŸºäºæ—¶é—´ï¼Œæ¯”å¦‚è¯´åŸºäº day æˆ–è€… month çš„æ»šåŠ¨ï¼Œ<strong>åŒæ—¶å®ç°äº† RollingPolicy æ¥å£å’Œ TriggeringPolicy æ¥å£</strong>ï¼Œæ—¢å®šä¹‰äº†å¦‚ä½•æ»šåŠ¨ï¼Œä¹Ÿå®šä¹‰äº†ä½•æ—¶æ»šåŠ¨ã€‚
<code>TimeBasedRollingPolicy</code> åªæœ‰ä¸€ä¸ªå¿…é¡»çš„å±æ€§ fileNamePattern å’Œå‡ ä¸ªå¯é€‰çš„å±æ€§ã€‚</p>
<p>fileNamePattern åŒ…å«å®é™…çš„æ–‡ä»¶åï¼Œä»¥åŠä¸€ä¸ª %d æ ‡è¯†ï¼Œè¿™ä¸ªæ ‡è¯†çš„ç”¨æ³•æ˜¯ %d{}ï¼Œå…¶ä¸­å¤§æ‹¬å·é‡Œé¢æ˜¯éµå¾ª <code>java.text.SimpleDataFormat</code> æ ¼å¼çš„æ—¥æœŸæ¨¡å¼ï¼Œlogback ä¼šæ ¹æ®è¿™ä¸ªæ—¥æœŸæ¨¡å¼çš„æœ€å°å•ä½æ¥æ¨æ–­å‡ºæ˜¯æ ¹æ®å¤©ã€æœˆã€å¹´è¿˜æ˜¯åˆ†é’Ÿã€å°æ—¶æ¥è¿›è¡Œæ»šåŠ¨çš„ã€‚
RollingFileAppender æœ‰ä¸€ä¸ª file å±æ€§ï¼Œåœ¨é…åˆ TimeBasedRollingPolicy ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ª file çš„å±æ€§æ˜¯å¦è¢«è®¾ç½®ï¼Œæœ‰ç€ä¸åŒçš„åŒºåˆ«ã€‚å¦‚æœ file å±æ€§è®¾ç½®äº†ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°è®°å½•çš„æ—¥å¿—å°†ä¼šè®°å½•åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå½“æ»šåŠ¨æ—¶éœ€è¦é‡å‘½åçš„æ—¶å€™ï¼Œåˆ™å°†è¿™ä¸ªæ–‡ä»¶åä»¥ fileNamePattern æŒ‡å®šçš„æ¨¡å¼è¿›è¡Œé‡å‘½åå’Œå½’æ¡£ã€‚å¦‚æœ file å±æ€§æ²¡æœ‰è¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°çºªå½•çš„æ—¥å¿—ä¼šè®°å½•åˆ°æ ¹æ® fileNamePattern æŒ‡å®šçš„å½“å‰æ—¥å¿—æ–‡ä»¶é‡Œã€‚
å¦‚æœæœ‰å¤šä¸ª %d æ ‡è¯†ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰ä¸€ä¸ªæ˜¯ primary çš„ï¼Œå…¶å®ƒçš„ä¸º auxiliary çš„ã€‚ä¾‹å¦‚ <code>/var/log/%d{yyyy/MM, aux}/myapplication.%d{yyyy-MM-dd}.log</code> ã€‚åŒæ—¶ï¼ŒfileNamePattern æ”¯æŒå¡«å†™ Time Zoneï¼Œä¾‹å¦‚ <code>aFolder/test.%d{yyyy-MM-dd-HH, UTC}.log</code>ã€‚</p>
<p>maxHistory å±æ€§æŒ‡å®šè¦ä¿ç•™å¤šé•¿æ—¶é—´çš„æ—¥å¿—ï¼Œä¾æ®ä» fileNamePattern ä¸­æ¨æ–­å‡ºæ¥çš„å•ä½ã€‚
totalSizeGap å±æ€§é™åˆ¶äº†æ—¥å¿—æ–‡ä»¶çš„å¤§å°æ€»å…±ä¸èƒ½è¶…è¿‡çš„å¤§å°ã€‚
cleanHistoryOnStart æŒ‡å®šäº†æ˜¯å¦é‡å¯åº”ç”¨çš„æ—¶å€™åˆ é™¤ä¹‹å‰çš„å½’æ¡£æ—¥å¿—ã€‚</p>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>logFile.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- daily rollover --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>logFile.%d{yyyy-MM-dd}.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- keep 30 days&#39; worth of history capped at 3GB total size --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>30<span style="font-weight:bold">&lt;/maxHistory&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;totalSizeCap&gt;</span>3GB<span style="font-weight:bold">&lt;/totalSizeCap&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="sizeandtimebasedrollingpolicy">SizeAndTimeBasedRollingPolicy<a hidden class="anchor" aria-hidden="true" href="#sizeandtimebasedrollingpolicy">#</a></h4>
<p>è¿™ä¸ªç­–ç•¥é™¤äº†å…·æœ‰ TimeBasedRollingPolicy çš„åŠŸèƒ½å¤–ï¼Œè¿˜èƒ½é™åˆ¶å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼Œå½“å•ä¸ªæ—¥å¿—åˆ°è¾¾æŒ‡å®šçš„å¤§å°æ—¶ï¼Œè§¦å‘æ—¥å¿—æ»šåŠ¨ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;ROLLING&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>mylog.txt<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- rollover daily --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>mylog-%d{yyyy-MM-dd}.%i.txt<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- each file should be at most 100MB, keep 60 days worth of history, but at most 20GB --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>    
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>60<span style="font-weight:bold">&lt;/maxHistory&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;totalSizeCap&gt;</span>20GB<span style="font-weight:bold">&lt;/totalSizeCap&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;ROLLING&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ maxFileSize æ¥è®¾ç½®å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°é™åˆ¶ã€‚æ³¨æ„åˆ°è¿™é‡Œï¼Œæœ‰ä¸€ä¸ªæ–°çš„æ ‡è¯†å‡ºç° %iï¼Œè¿™æ˜¯å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå¯ä»¥ä¸ºåŒä¸€å¤©çš„æ—¥å¿—åŠ ä¸Šä¸åŒçš„åç¼€ indexã€‚</p>
<h4 id="fixedwindowrollingpolicy-1">FixedWindowRollingPolicy<a hidden class="anchor" aria-hidden="true" href="#fixedwindowrollingpolicy-1">#</a></h4>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;file&gt;</span>test.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>foo%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;minIndex&gt;</span>1<span style="font-weight:bold">&lt;/minIndex&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;maxIndex&gt;</span>3<span style="font-weight:bold">&lt;/maxIndex&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;triggeringPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;maxFileSize&gt;</span>5MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/triggeringPolicy&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="sizebasedtriggeringpolicy-1">SizeBasedTriggeringPolicy<a hidden class="anchor" aria-hidden="true" href="#sizebasedtriggeringpolicy-1">#</a></h4>
<p>é…ç½®ç¤ºä¾‹ï¼Œä¸€èˆ¬é…åˆ FixedWindowRollingPolicyï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>test.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>test.%i.log.zip<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;minIndex&gt;</span>1<span style="font-weight:bold">&lt;/minIndex&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxIndex&gt;</span>3<span style="font-weight:bold">&lt;/maxIndex&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;triggeringPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>5MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/triggeringPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%-4relative [%thread] %-5level %logger{35} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="å¸¸ç”¨é…ç½®ç¤ºä¾‹">å¸¸ç”¨é…ç½®ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#å¸¸ç”¨é…ç½®ç¤ºä¾‹">#</a></h1>
<h2 id="é…ç½®ä¸€">é…ç½®ä¸€<a hidden class="anchor" aria-hidden="true" href="#é…ç½®ä¸€">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--debug:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">scan=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">scanPeriod=</span><span style="color:#0ff;font-weight:bold">&#34;60 seconds&#34;</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- å…¨å±€å˜é‡ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿å­˜è·¯å¾„--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProperty</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;logPath&#34;</span> <span style="color:#007f7f">source=</span><span style="color:#0ff;font-weight:bold">&#34;logging.file.path&#34;</span> <span style="color:#007f7f">defaultValue=</span><span style="color:#0ff;font-weight:bold">&#34;logs&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--åº”ç”¨åç§°--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProperty</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;appName&#34;</span> <span style="color:#007f7f">source=</span><span style="color:#0ff;font-weight:bold">&#34;spring.application.name&#34;</span> <span style="color:#007f7f">defaultValue=</span><span style="color:#0ff;font-weight:bold">&#34;springBoot&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- é€šç”¨æ—¥å¿—æ–‡ä»¶è¾“å‡ºappender --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;COMMON_FILE_LOG&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æ—¥å¿—åç§°ï¼Œå¦‚æœæ²¡æœ‰File å±æ€§ï¼Œé‚£ä¹ˆåªä¼šä½¿ç”¨FileNamePatternçš„æ–‡ä»¶è·¯å¾„è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            å¦‚æœåŒæ—¶æœ‰&lt;File&gt;å’Œ&lt;FileNamePattern&gt;ï¼Œé‚£ä¹ˆå½“å¤©æ—¥å¿—æ˜¯&lt;File&gt;ï¼Œæ˜å¤©ä¼šè‡ªåŠ¨æŠŠä»Šå¤©
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            çš„æ—¥å¿—æ”¹åä¸ºä»Šå¤©çš„æ—¥æœŸã€‚å³ï¼Œ&lt;File&gt; çš„æ—¥å¿—éƒ½æ˜¯å½“å¤©çš„ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;File&gt;</span>${logPath}/${appName}.log<span style="font-weight:bold">&lt;/File&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰ç…§æ—¶é—´æ»šåŠ¨ TimeBasedRollingPolicy--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ–‡ä»¶è·¯å¾„,å®šä¹‰äº†æ—¥å¿—çš„åˆ‡åˆ†æ–¹å¼â€”â€”æŠŠæ¯ä¸€å¤©çš„æ—¥å¿—å½’æ¡£åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­,ä»¥é˜²æ­¢æ—¥å¿—å¡«æ»¡æ•´ä¸ªç£ç›˜ç©ºé—´--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;FileNamePattern&gt;</span>${logPath}/${appName}.%d{yyyy-MM-dd}.log<span style="font-weight:bold">&lt;/FileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--åªä¿ç•™æœ€è¿‘30å¤©çš„æ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>30<span style="font-weight:bold">&lt;/maxHistory&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--ç”¨æ¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„ä¸Šé™å¤§å°ï¼Œé‚£ä¹ˆåˆ°äº†è¿™ä¸ªå€¼ï¼Œå°±ä¼šåˆ é™¤æ—§çš„æ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;totalSizeCap&gt;</span>1GB<span style="font-weight:bold">&lt;/totalSizeCap&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æ—¥å¿—è¾“å‡ºç¼–ç æ ¼å¼åŒ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--&lt;pattern&gt;%d{HH:mm:ss.SSS} %contextName [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d [%thread] %-5level %logger{36} %line - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- å¼€å‘ç¯å¢ƒ,å¤šä¸ªä½¿ç”¨é€—å·éš”å¼€,æœ¬åœ°å¼€å‘ç¯å¢ƒåªè¾“å‡ºæ§åˆ¶å°æ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- æœ¬åœ°å¼€å‘æ§åˆ¶æ å½©è‰²æ—¥å¿— --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å½©è‰²æ—¥å¿—ä¾èµ–çš„æ¸²æŸ“ç±» --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;clr&#34;</span> <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.ColorConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;wex&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;wEx&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å½©è‰²æ—¥å¿—æ ¼å¼ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE_LOG_PATTERN&#34;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- Console è¾“å‡ºè®¾ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;layout&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;pattern&gt;</span>${CONSOLE_LOG_PATTERN}<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/layout&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- æ§åˆ¶å°ä¸æ‰“å°tomcatå¯åŠ¨è¿‡ç¨‹ä¸­çš„JARåŒ…æ‰«æè­¦å‘Š --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;o.a.tomcat.util.scan.StandardJarScanner&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;ERROR&#34;</span> <span style="color:#007f7f">additivity=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æŒ‡å®šæœ€åŸºç¡€çš„æ—¥å¿—è¾“å‡ºçº§åˆ«--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æµ‹è¯•ç¯å¢ƒ,å¤šä¸ªä½¿ç”¨é€—å·éš”å¼€,æµ‹è¯•ç¯å¢ƒè¾“å‡ºINFOçº§åˆ«æ—¥å¿—,åªä»¥æ–‡ä»¶å½¢å¼è¾“å‡º--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;test&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.xf&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span> <span style="color:#007f7f">additivity=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;COMMON_FILE_LOG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;COMMON_FILE_LOG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- ç”Ÿäº§ç¯å¢ƒ,å¤šä¸ªä½¿ç”¨é€—å·éš”å¼€,ç”Ÿäº§ç¯å¢ƒè¾“å‡ºERRORçº§åˆ«æ—¥å¿—,åªä»¥æ–‡ä»¶å½¢å¼è¾“å‡º--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;prod&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;ERROR&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;COMMON_FILE_LOG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®äºŒ">é…ç½®äºŒ<a hidden class="anchor" aria-hidden="true" href="#é…ç½®äºŒ">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--debug:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration</span> <span style="color:#007f7f">debug=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span> <span style="color:#007f7f">scan=</span><span style="color:#0ff;font-weight:bold">&#34;false&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProperty</span> <span style="color:#007f7f">scop=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;spring.application.name&#34;</span> <span style="color:#007f7f">source=</span><span style="color:#0ff;font-weight:bold">&#34;spring.application.name&#34;</span> <span style="color:#007f7f">defaultValue=</span><span style="color:#0ff;font-weight:bold">&#34;springboot&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_HOME&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;logs/${spring.application.name}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æ—¥å¿—æ ¼å¼å’Œé¢œè‰²æ¸²æŸ“ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- å½©è‰²æ—¥å¿—ä¾èµ–çš„æ¸²æŸ“ç±» --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;clr&#34;</span> <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.ColorConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;wex&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;conversionRule</span> <span style="color:#007f7f">conversionWord=</span><span style="color:#0ff;font-weight:bold">&#34;wEx&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">converterClass=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- å½©è‰²æ—¥å¿—æ ¼å¼ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE_LOG_PATTERN&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- æŠŠæ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;console&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€åº•çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>debug<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>${CONSOLE_LOG_PATTERN}<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æŠŠdebugæ—¥å¿—è¾“å‡º--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${LOG_HOME}/debug.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>DEBUG<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>${LOG_HOME}/debug-%d{yyyy-MM-dd}.%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- æ—¥å¿—æ–‡ä»¶æœ€å¤§å°ºå¯¸ --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;MaxHistory&gt;</span>30<span style="font-weight:bold">&lt;/MaxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- è®°å½•é”™è¯¯æ—¥å¿—åˆ°å•ç‹¬æ–‡ä»¶ error.log --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;error&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${LOG_HOME}/error.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>ERROR<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>${LOG_HOME}/error-%d{yyyy-MM-dd}.%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- æ—¥å¿—æ–‡ä»¶æœ€å¤§å°ºå¯¸ --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;MaxHistory&gt;</span>30<span style="font-weight:bold">&lt;/MaxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- è®°å½•é”™è¯¯æ—¥å¿—åˆ°å•ç‹¬æ–‡ä»¶ info.log --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;info&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;file&gt;</span>${LOG_HOME}/info.log<span style="font-weight:bold">&lt;/file&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>INFO<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>${LOG_HOME}/info-%d{yyyy-MM-dd}.%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- æ—¥å¿—æ–‡ä»¶æœ€å¤§å°ºå¯¸ --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;MaxHistory&gt;</span>30<span style="font-weight:bold">&lt;/MaxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- ä¸‹é¢é…ç½®ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…çš„æ—¥å¿—è¿‡æ»¤çº§åˆ«ï¼Œç”¨äºé¿å…åˆ·å± --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.web&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Logæ—¥å¿—çº§åˆ«ä»é«˜åˆ°ä½æ’åº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    ERRORï¼šç”¨æˆ·ç¨‹åºæŠ¥é”™ï¼Œå¿…é¡»è§£å†³çš„æ—¶å€™ä½¿ç”¨æ­¤çº§åˆ«æ‰“å°æ—¥å¿—
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    WARNï¼šè­¦å‘Šï¼Œä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    INFOï¼šä¸€èˆ¬å¤„ç†ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ä½¿ç”¨ï¼Œå°±è·Ÿ system.erræ‰“å°ä¸€æ ·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    DEBUGï¼šä¸€èˆ¬æ”¾äºç¨‹åºçš„æŸä¸ªå…³é”®ç‚¹çš„åœ°æ–¹ï¼Œç”¨äºæ‰“å°ä¸€ä¸ªå˜é‡å€¼æˆ–è€…ä¸€ä¸ªæ–¹æ³•è¿”å›çš„ä¿¡æ¯ä¹‹ç±»çš„ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    TRACEï¼šä¸€èˆ¬ä¸ä¼šä½¿ç”¨ï¼Œåœ¨æ—¥å¿—é‡Œè¾¹ä¹Ÿä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œå¥½åƒæ˜¯å¾ˆä½çš„ä¸€ä¸ªæ—¥å¿—çº§åˆ«ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--  å®šä¹‰æœ¬åœ°ç¯å¢ƒæ—¥å¿—çº§åˆ«  --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;local&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.xf&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span><span style="color:#007f7f">&lt;!-- å®šä¹‰å°†com.xfåŒ…ä¸‹çš„æœ€ä½çº§åˆ«æ—¥å¿—ä¿¡æ¯ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span><span style="color:#007f7f">&lt;!-- ç³»ç»Ÿå…¨å±€æ—¥å¿—è¾“å‡ºæœ€ä½çº§åˆ«ï¼Œä½†ä¸åŒ…æ‹¬com.xfåŒ… --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;console&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--  å®šä¹‰æµ‹è¯•ç¯å¢ƒæ—¥å¿—çº§åˆ«  --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;dev&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.xf&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;console&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;debug&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--  å®šä¹‰çº¿ä¸Šç¯å¢ƒæ—¥å¿—çº§åˆ«  --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProfile</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;online&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;root</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;error&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/springProfile&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®ä¸‰">é…ç½®ä¸‰<a hidden class="anchor" aria-hidden="true" href="#é…ç½®ä¸‰">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">195
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--å¼•ç”¨é»˜è®¤æ—¥å¿—é…ç½®--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;org/springframework/boot/logging/logback/defaults.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--ä½¿ç”¨é»˜è®¤çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡ºå®ç°--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;org/springframework/boot/logging/logback/console-appender.xml&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--åº”ç”¨åç§°--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProperty</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;APP_NAME&#34;</span> <span style="color:#007f7f">source=</span><span style="color:#0ff;font-weight:bold">&#34;spring.application.name&#34;</span> <span style="color:#007f7f">defaultValue=</span><span style="color:#0ff;font-weight:bold">&#34;springBoot&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿å­˜è·¯å¾„--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_FILE_PATH&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/logs}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--LogStashè®¿é—®host--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;springProperty</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_HOST&#34;</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;context&#34;</span> <span style="color:#007f7f">source=</span><span style="color:#0ff;font-weight:bold">&#34;logstash.host&#34;</span> <span style="color:#007f7f">defaultValue=</span><span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--DEBUGæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE_DEBUG&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--è¾“å‡ºDEBUGä»¥ä¸Šçº§åˆ«æ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>DEBUG<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®ä¸ºé»˜è®¤çš„æ–‡ä»¶æ—¥å¿—æ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>${FILE_LOG_PATTERN}<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®æ–‡ä»¶å‘½åæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>${LOG_FILE_PATH}/debug/${APP_NAME}-%d{yyyy-MM-dd}-%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡å°±é‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œé»˜è®¤10M--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>${LOG_FILE_MAX_SIZE:-10MB}<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°ï¼Œé»˜è®¤30å¤©--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>${LOG_FILE_MAX_HISTORY:-30}<span style="font-weight:bold">&lt;/maxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--ERRORæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;FILE_ERROR&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--åªè¾“å‡ºERRORçº§åˆ«çš„æ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.LevelFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>ERROR<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;onMatch&gt;</span>ACCEPT<span style="font-weight:bold">&lt;/onMatch&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;onMismatch&gt;</span>DENY<span style="font-weight:bold">&lt;/onMismatch&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®ä¸ºé»˜è®¤çš„æ–‡ä»¶æ—¥å¿—æ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;pattern&gt;</span>${FILE_LOG_PATTERN}<span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="font-weight:bold">&lt;/charset&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;rollingPolicy</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®æ–‡ä»¶å‘½åæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;fileNamePattern&gt;</span>${LOG_FILE_PATH}/error/${APP_NAME}-%d{yyyy-MM-dd}-%i.log<span style="font-weight:bold">&lt;/fileNamePattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡å°±é‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œé»˜è®¤10M--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxFileSize&gt;</span>${LOG_FILE_MAX_SIZE:-10MB}<span style="font-weight:bold">&lt;/maxFileSize&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°ï¼Œé»˜è®¤30å¤©--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;maxHistory&gt;</span>${LOG_FILE_MAX_HISTORY:-30}<span style="font-weight:bold">&lt;/maxHistory&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/rollingPolicy&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--DEBUGæ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_DEBUG&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.appender.LogstashTcpSocketAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>DEBUG<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;destination&gt;</span>${LOG_STASH_HOST}:4560<span style="font-weight:bold">&lt;/destination&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">charset=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;providers&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;timeZone&gt;</span>Asia/Shanghai<span style="font-weight:bold">&lt;/timeZone&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                        &#34;project&#34;: &#34;mall&#34;,
</span></span><span style="display:flex;"><span>                        &#34;level&#34;: &#34;%level&#34;,
</span></span><span style="display:flex;"><span>                        &#34;service&#34;: &#34;${APP_NAME:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;pid&#34;: &#34;${PID:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;thread&#34;: &#34;%thread&#34;,
</span></span><span style="display:flex;"><span>                        &#34;class&#34;: &#34;%logger&#34;,
</span></span><span style="display:flex;"><span>                        &#34;message&#34;: &#34;%message&#34;,
</span></span><span style="display:flex;"><span>                        &#34;stack_trace&#34;: &#34;%exception{20}&#34;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/providers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--ERRORæ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_ERROR&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.appender.LogstashTcpSocketAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;filter</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;ch.qos.logback.classic.filter.LevelFilter&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;level&gt;</span>ERROR<span style="font-weight:bold">&lt;/level&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;onMatch&gt;</span>ACCEPT<span style="font-weight:bold">&lt;/onMatch&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;onMismatch&gt;</span>DENY<span style="font-weight:bold">&lt;/onMismatch&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;destination&gt;</span>${LOG_STASH_HOST}:4561<span style="font-weight:bold">&lt;/destination&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">charset=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;providers&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;timeZone&gt;</span>Asia/Shanghai<span style="font-weight:bold">&lt;/timeZone&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                        &#34;project&#34;: &#34;mall&#34;,
</span></span><span style="display:flex;"><span>                        &#34;level&#34;: &#34;%level&#34;,
</span></span><span style="display:flex;"><span>                        &#34;service&#34;: &#34;${APP_NAME:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;pid&#34;: &#34;${PID:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;thread&#34;: &#34;%thread&#34;,
</span></span><span style="display:flex;"><span>                        &#34;class&#34;: &#34;%logger&#34;,
</span></span><span style="display:flex;"><span>                        &#34;message&#34;: &#34;%message&#34;,
</span></span><span style="display:flex;"><span>                        &#34;stack_trace&#34;: &#34;%exception{20}&#34;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/providers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--ä¸šåŠ¡æ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_BUSINESS&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.appender.LogstashTcpSocketAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;destination&gt;</span>${LOG_STASH_HOST}:4562<span style="font-weight:bold">&lt;/destination&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">charset=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;providers&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;timeZone&gt;</span>Asia/Shanghai<span style="font-weight:bold">&lt;/timeZone&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                        &#34;project&#34;: &#34;xxx&#34;,
</span></span><span style="display:flex;"><span>                        &#34;level&#34;: &#34;%level&#34;,
</span></span><span style="display:flex;"><span>                        &#34;service&#34;: &#34;${APP_NAME:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;pid&#34;: &#34;${PID:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;thread&#34;: &#34;%thread&#34;,
</span></span><span style="display:flex;"><span>                        &#34;class&#34;: &#34;%logger&#34;,
</span></span><span style="display:flex;"><span>                        &#34;message&#34;: &#34;%message&#34;,
</span></span><span style="display:flex;"><span>                        &#34;stack_trace&#34;: &#34;%exception{20}&#34;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/providers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ¥å£è®¿é—®è®°å½•æ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;appender</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_RECORD&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.appender.LogstashTcpSocketAppender&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;destination&gt;</span>${LOG_STASH_HOST}:4563<span style="font-weight:bold">&lt;/destination&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;encoder</span> <span style="color:#007f7f">charset=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;providers&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;timeZone&gt;</span>Asia/Shanghai<span style="font-weight:bold">&lt;/timeZone&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/timestamp&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;pattern&gt;</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                        &#34;project&#34;: &#34;xxx&#34;,
</span></span><span style="display:flex;"><span>                        &#34;level&#34;: &#34;%level&#34;,
</span></span><span style="display:flex;"><span>                        &#34;service&#34;: &#34;${APP_NAME:-}&#34;,
</span></span><span style="display:flex;"><span>                        &#34;class&#34;: &#34;%logger&#34;,
</span></span><span style="display:flex;"><span>                        &#34;message&#34;: &#34;%message&#34;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/pattern&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/providers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/encoder&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ§åˆ¶æ¡†æ¶è¾“å‡ºæ—¥å¿—--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;org.slf4j&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;springfox&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;io.swagger&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;org.hibernate.validator&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;INFO&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.xf.common.log.WebLogAspect&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_RECORD&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;logger</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.xf&#34;</span> <span style="color:#007f7f">level=</span><span style="color:#0ff;font-weight:bold">&#34;DEBUG&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_BUSINESS&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;root&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;CONSOLE&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE_DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;FILE_ERROR&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_DEBUG&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;appender-ref</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;LOG_STASH_ERROR&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/root&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="å¦‚ä½•æ‰“å¥½æ—¥å¿—">å¦‚ä½•æ‰“å¥½æ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•æ‰“å¥½æ—¥å¿—">#</a></h1>
<p><a href="https://www.slf4j.org/faq.html#logging_performance">æœ€ä½³å®è·µ</a></p>
<h2 id="å¼ºåˆ¶">å¼ºåˆ¶<a hidden class="anchor" aria-hidden="true" href="#å¼ºåˆ¶">#</a></h2>
<h3 id="æ­£ç¡®å£°æ˜æ—¥å¿—å¯¹è±¡logger">æ­£ç¡®å£°æ˜æ—¥å¿—å¯¹è±¡logger<a hidden class="anchor" aria-hidden="true" href="#æ­£ç¡®å£°æ˜æ—¥å¿—å¯¹è±¡logger">#</a></h3>
<ul>
<li>å˜é‡ç±»å‹Logæ˜¯é—¨é¢æ¥å£æ¡†æ¶ä¸­çš„ç±»ï¼Œå®ç°ç±»å¯ä»¥æ˜¯Log4jã€Logbackï¼Œä¸è¦æŠŠå®ç°ç±»å®šä¹‰ä¸ºå˜é‡ç±»å‹ï¼Œå¦åˆ™æ—¥å¿—åˆ‡æ¢ä¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç¬¦åˆæŠ½è±¡ç¼–ç¨‹æ€æƒ³ã€‚</li>
<li>å»ºè®®æ—¥å¿—å¯¹è±¡loggerå£°æ˜ä¸º<code>private static final</code>ï¼Œå£°æ˜ä¸ºprivateå¯é˜²æ­¢loggerå¯¹è±¡è¢«å…¶ä»–ç±»éæ³•ä½¿ç”¨ã€‚å£°æ˜ä¸ºstaticå¯é˜²æ­¢é‡å¤newå‡ºloggerå¯¹è±¡ï¼Œé€ æˆèµ„æºæµªè´¹ï¼›è¿˜å¯ä»¥é˜²æ­¢loggerè¢«åºåˆ—åŒ–ï¼Œé€ æˆå®‰å…¨é£é™©ã€‚å£°æ˜ä¸ºfinalæ˜¯å› ä¸ºåœ¨ç±»çš„ç”Ÿå‘½å‘¨æœŸå†…æ— éœ€å˜æ›´loggerã€‚</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Logger LOG = LoggerFactory.<span style="color:#007f7f">getLogger</span>(ClassName.<span style="color:#007f7f">getClass</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»£ç ä¸­æ—¥å¿—çº§åˆ«ä½¿ç”¨">ä»£ç ä¸­æ—¥å¿—çº§åˆ«ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#ä»£ç ä¸­æ—¥å¿—çº§åˆ«ä½¿ç”¨">#</a></h3>
<p>é¡¹ç›®ä¸­å¸¸ç”¨æ—¥å¿—çº§åˆ«<code>ERRORã€WARNã€INFOã€DEBUG</code>å››ç§ã€‚
ERRORï¼Œæ•è·å¼‚å¸¸çš„æ—¶å€™ä½¿ç”¨ï¼ˆcatchæ—¶ä½¿ç”¨ï¼‰ï¼Œè¿™ä¸ªæ²¡æœ‰å¼‚è®®
WARNï¼Œä¸€èˆ¬ç”¨æ¥è®°å½•ä¸€äº›ç”¨æˆ·è¾“å…¥é”™è¯¯ã€‚
INFOï¼Œç”¨æ¥è®°å½•ç¨‹åºçš„ä¸€äº›æœ‰ç”¨ä¿¡æ¯ï¼Œè¾“å…¥è¾“å‡ºå‚æ•°ã€è€—æ—¶ã€å¼€å§‹ç»“æŸç­‰ã€‚
DEBUGï¼Œç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸­é—´å‚æ•°ï¼Œåªå¸Œæœ›å¼€å‘ç¯å¢ƒå‡ºç°ï¼Œçº¿ä¸Šä¸éœ€è¦çš„ä¿¡æ¯ã€‚</p>
<h3 id="æ­£ç¡®çš„æ‰“å°å˜é‡">æ­£ç¡®çš„æ‰“å°å˜é‡<a hidden class="anchor" aria-hidden="true" href="#æ­£ç¡®çš„æ‰“å°å˜é‡">#</a></h3>
<p>ä½¿ç”¨slf4jæ—¥å¿—ç»„ä»¶æ‰“å°å˜é‡æ—¶ï¼Œå»ºè®®ä½¿ç”¨<code>{}</code>å ä½ç¬¦é£æ ¼ï¼Œè€Œä¸æ˜¯<code>+</code>æ‹¼æ¥ç¬¦ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Country: {}, Province: {}, City: {}&#34;</span>, ctry, prov, city); <span style="color:#007f7f">//å ä½ç¬¦</span>
</span></span><span style="display:flex;"><span> logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Country: &#34;</span>+ctry+<span style="color:#0ff;font-weight:bold">&#34;, Province:&#34;</span> +prov +<span style="color:#0ff;font-weight:bold">&#34;, City: &#34;</span>+city);   <span style="color:#007f7f">//æ‹¼æ¥ç¬¦</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ˜¾ç„¶ï¼Œå ä½ç¬¦é£æ ¼æ›´ç›´è§‚ï¼Œè€Œä¸”ä¸å®¹æ˜“å‡ºç°ç¬”è¯¯â€”â€”ä¸Šé¢çš„æ‹¼æ¥ç¬¦è¯­å¥æœ‰é—®é¢˜ï¼Œè°èƒ½å‘ç°ï¼Ÿ</p>
<p>ä½†æœ€å¸¸è§çš„å˜é‡æ‰“å°é—®é¢˜ï¼Œæ˜¯æ‰“å°æ—¶æœªä½¿ç”¨å ä½ç¬¦æˆ–æ‹¼æ¥ç¬¦ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;print cannotBePrinted: &#34;</span>, cannotBePrinted);  <span style="color:#007f7f">//Wrong</span>
</span></span><span style="display:flex;"><span> logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;print canBePrinted: &#34;</span> + canBePrinted);  <span style="color:#007f7f">//Good</span>
</span></span><span style="display:flex;"><span> logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;print canBePrinted: {}&#34;</span>, canBePrinted); <span style="color:#007f7f">//Better</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼ŒcannotBePrintedæˆ–canBePrintedä¸ºéThrowableçš„å˜é‡ã€‚äº¦å³ï¼Œå¼‚å¸¸å˜é‡eä¸é€‚ç”¨ä¸Šè¿°è§„åˆ™ï¼Œä½†e.getMessage()é€‚ç”¨ã€‚</p>
<p>å¯ä½¿ç”¨å¦‚ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ’æŸ¥Javaä»£ç é‡Œä¸è§„èŒƒçš„å˜é‡æ‰“å°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>^<span style="color:#f00">\</span>s*[Ll][Oo][Gg](ger|GER)*<span style="color:#f00">\</span>.[a-zA-Z]{4,5}<span style="color:#f00">\</span>(<span style="color:#0ff;font-weight:bold">&#34;([^({})]+?)&#34;</span><span style="color:#f00">\</span>s*<span style="color:#f00">\</span>,<span style="color:#f00">\</span>s*([^e<span style="color:#f00">\</span>s]|<span style="color:#f00">\</span>w{2,})<span style="color:#f00">\</span>s*<span style="color:#f00">\</span>);.*
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€ƒè™‘åˆ°å®é™…ä»£ç ä¹¦å†™é£æ ¼çš„å·®å¼‚ï¼Œè¯¥æ­£åˆ™è¡¨è¾¾å¼ä¼šå­˜åœ¨æ¼åˆ¤å’Œè¯¯åˆ¤ã€‚ä¾‹å¦‚ï¼Œ&ldquo;logger.error(&ldquo;Best print: &ldquo;, ex);&ldquo;ä¼šè¢«è¯¯åˆ¤ã€‚</p>
<h3 id="æ­£ç¡®çš„æ‰“å°å¼‚å¸¸">æ­£ç¡®çš„æ‰“å°å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#æ­£ç¡®çš„æ‰“å°å¼‚å¸¸">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> a = 1 / 0;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ­£ç¡®ï¼Œå¦‚æœåªæ‰“å°eï¼Œä¸éœ€è¦å ä½ç¬¦{}</span>
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>, e);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ­£ç¡®ï¼Œæ³¨æ„logger.error()æ—¶ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªå ä½ç¬¦{}ï¼Œæœ€åçš„å‚æ•°eï¼ˆThrowableç±»å‹ï¼‰ä¸éœ€è¦å ä½ç¬¦</span>
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;inputParams:{} and errorMessage:{}&#34;</span>, å„ç±»å‚æ•°æˆ–è€…å¯¹è±¡ toString(), e.<span style="color:#007f7f">getMessage</span>(), e);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é”™è¯¯ï¼Œä¼šä¸¢å¤±å †æ ˆä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>, e.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é”™è¯¯ï¼Œä¸åº”è¯¥ç”¨+æ‹¼æ¥</span>
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span> + e);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä½¿ç”¨å¦‚ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ’æŸ¥Javaä»£ç é‡Œä¸è§„èŒƒçš„å¼‚å¸¸æ‰“å°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>^<span style="color:#f00">\</span>s*[Ll][Oo][Gg](ger|GER)*<span style="color:#f00">\</span>.(error|warn)<span style="color:#f00">\</span>(<span style="color:#0ff;font-weight:bold">&#34;(.+?)&#34;</span><span style="color:#f00">\</span>s*<span style="color:#f00">\</span>+<span style="color:#f00">\</span>s*(e|ex|e.<span style="color:#007f7f">getMessage</span><span style="color:#f00">\</span>(<span style="color:#f00">\</span>))<span style="color:#f00">\</span>s*<span style="color:#f00">\</span>);.*
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¯¹äº-tracedebuginfo-çº§åˆ«çš„æ—¥å¿—è¾“å‡ºå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­">å¯¹äº <code>trace/debug/info</code> çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­<a hidden class="anchor" aria-hidden="true" href="#å¯¹äº-tracedebuginfo-çº§åˆ«çš„æ—¥å¿—è¾“å‡ºå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­">#</a></h3>
<p>è¯´æ˜ï¼šè™½ç„¶åœ¨ debug(å‚æ•°)çš„æ–¹æ³•ä½“å†…ç¬¬ä¸€è¡Œä»£ç  <code>isDisabled(Level.DEBUG_INT)</code>ä¸ºçœŸæ—¶ï¼ˆSlf4j çš„å¸¸è§å®ç°Log4j å’Œ Logbackï¼‰ï¼Œå°±ç›´æ¥ returnï¼Œä½†æ˜¯å‚æ•°å¯èƒ½ä¼šè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥è¿ç®—ã€‚æ­¤å¤–ï¼Œå¦‚æœ <code>debug(getName())</code>è¿™ç§å‚æ•°å†…æœ‰ getName()æ–¹æ³•è°ƒç”¨ï¼Œæ— è°“æµªè´¹æ–¹æ³•è°ƒç”¨çš„å¼€é”€ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// æ­£ä¾‹ï¼šå¦‚æœåˆ¤æ–­ä¸ºçœŸï¼Œé‚£ä¹ˆå¯ä»¥è¾“å‡º trace å’Œ debug çº§åˆ«çš„æ—¥å¿—</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span>(logger.<span style="color:#007f7f">isDebugEnabled</span>()){
</span></span><span style="display:flex;"><span>    logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;handleChanges end:{}:{}(ms) &#34;</span>, <span style="color:#fff;font-weight:bold">new</span> Object[] {changes, useTime});
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¦æ­¢">ç¦æ­¢<a hidden class="anchor" aria-hidden="true" href="#ç¦æ­¢">#</a></h2>
<h3 id="ç¦æ­¢æ‹¼æ¥å­—ç¬¦ä¸²æ‰“å°æ—¥å¿—">ç¦æ­¢æ‹¼æ¥å­—ç¬¦ä¸²æ‰“å°æ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#ç¦æ­¢æ‹¼æ¥å­—ç¬¦ä¸²æ‰“å°æ—¥å¿—">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;The new entry is &#34;</span> + entry + <span style="color:#0ff;font-weight:bold">&#34;.&#34;</span>); <span style="color:#007f7f">// é”™è¯¯</span>
</span></span><span style="display:flex;"><span>logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;The new entry is {}.&#34;</span>, entry); <span style="color:#007f7f">// æ­£ç¡®</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¦æ­¢eprintstacktrace">ç¦æ­¢<code>e.printStackTrace()</code><a hidden class="anchor" aria-hidden="true" href="#ç¦æ­¢eprintstacktrace">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> a = 1/0;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        e.<span style="color:#007f7f">printStackTrace</span>(); <span style="color:#007f7f">// é”™è¯¯</span>
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>,e); <span style="color:#007f7f">//æ­£ç¡®</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>e.printStackTrace()</code>è¯¥æ–¹æ³•æœ¬è´¨æ˜¯è°ƒç”¨System.errè¾“å‡ºåˆ°tomcatçš„æ§åˆ¶å°ï¼Œä¸ä¼šè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p>
<h3 id="ç¦æ­¢ä½¿ç”¨system-printsystemoutprintlnsystemerrorprintln">ç¦æ­¢ä½¿ç”¨<code>System printã€System.out.printlnã€System.error.println</code><a hidden class="anchor" aria-hidden="true" href="#ç¦æ­¢ä½¿ç”¨system-printsystemoutprintlnsystemerrorprintln">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> a = 1/0;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(e); <span style="color:#007f7f">// é”™è¯¯</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">err</span>.<span style="color:#007f7f">println</span>(e); <span style="color:#007f7f">// é”™è¯¯</span>
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>,e); <span style="color:#007f7f">//æ­£ç¡®</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¦æ­¢è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸">ç¦æ­¢è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#ç¦æ­¢è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> a = 1 / 0;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>        log.<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>, e); <span style="color:#007f7f">//æ­£ç¡®</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BizException(<span style="color:#0ff;font-weight:bold">&#34;ç¨‹åºé”™è¯¯&#34;</span>,e); <span style="color:#007f7f">// é”™è¯¯</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºè¿™æ ·ä¼šå¤šæ¬¡è®°å½•æ—¥å¿—ã€‚</p>
<h1 id="spring-bootæ—¥å¿—">spring bootæ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#spring-bootæ—¥å¿—">#</a></h1>
<p><a href="https://www.cnblogs.com/bigdataZJ/p/springboot-log.html">å‚è€ƒ</a>
<a href="https://blog.csdn.net/mu_wind/article/details/99830829">å‚è€ƒ</a>
æ—¥å¿—ï¼Œé€šå¸¸ä¸ä¼šåœ¨éœ€æ±‚é˜¶æ®µä½œä¸ºä¸€ä¸ªåŠŸèƒ½å•ç‹¬æå‡ºæ¥ï¼Œä¹Ÿä¸ä¼šåœ¨äº§å“æ–¹æ¡ˆä¸­çœ‹åˆ°å®ƒçš„ç»†èŠ‚ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æ¯«ä¸å½±å“å®ƒåœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿä¸­çš„é‡è¦çš„åœ°ä½ã€‚
ä¸ºäº†ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ï¼Œå‘ç°é—®é¢˜ä¸€å®šè¦åŠæ—¶ï¼Œè§£å†³é—®é¢˜ä¸€å®šè¦è¿…é€Ÿï¼Œæ‰€ä»¥ç”Ÿäº§ç¯å¢ƒä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œé¢„è­¦ç³»ç»Ÿå°±ä¼šé€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ç”šè‡³ç”µè¯çš„æ–¹å¼å®æ–½å¤šç»´è½°ç‚¸æ¨¡å¼ï¼Œç¡®ä¿ç›¸å…³è´Ÿè´£äººä¸é”™è¿‡æ¯ä¸€ä¸ªå¯èƒ½çš„bugã€‚
é¢„è­¦ç³»ç»Ÿåˆ¤æ–­ç–‘ä¼¼bugå¤§éƒ¨åˆ†æºäºæ—¥å¿—ã€‚æ¯”å¦‚æŸä¸ªå¾®æœåŠ¡æ¥å£ç”±äºå„ç§åŸå› å¯¼è‡´é¢‘ç¹è°ƒç”¨å‡ºé”™ï¼Œæ­¤æ—¶è°ƒç”¨ç«¯ä¼šæ•è·è¿™æ ·çš„å¼‚å¸¸å¹¶æ‰“å°ERRORçº§åˆ«çš„æ—¥å¿—ï¼Œå½“è¯¥é”™è¯¯æ—¥å¿—è¾¾åˆ°ä¸€å®šæ¬¡æ•°å‡ºç°çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘æŠ¥è­¦ã€‚</p>
<h2 id="spring-booté»˜è®¤æ—¥å¿—ç³»ç»Ÿ">Spring Booté»˜è®¤æ—¥å¿—ç³»ç»Ÿ<a hidden class="anchor" aria-hidden="true" href="#spring-booté»˜è®¤æ—¥å¿—ç³»ç»Ÿ">#</a></h2>
<p>Spring Booté»˜è®¤ä½¿ç”¨LogBackæ—¥å¿—ç³»ç»Ÿï¼Œå¦‚æœä¸éœ€è¦æ›´æ”¹ä¸ºå…¶ä»–æ—¥å¿—ç³»ç»Ÿå¦‚Log4j2ç­‰ï¼Œåˆ™æ— éœ€å¤šä½™çš„é…ç½®ï¼ŒLogBacké»˜è®¤å°†æ—¥å¿—æ‰“å°åˆ°æ§åˆ¶å°ä¸Šã€‚
å¦‚æœè¦ä½¿ç”¨LogBackï¼ŒåŸåˆ™ä¸Šæ˜¯éœ€è¦æ·»åŠ dependencyä¾èµ–çš„</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;&lt;/pre&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯å› ä¸ºæ–°å»ºçš„Spring Booté¡¹ç›®ä¸€èˆ¬éƒ½ä¼šå¼•ç”¨spring-boot-starteræˆ–è€…spring-boot-starter-webï¼Œè€Œè¿™ä¸¤ä¸ªèµ·æ­¥ä¾èµ–ä¸­éƒ½å·²ç»åŒ…å«äº†å¯¹äºspring-boot-starter-loggingçš„ä¾èµ–ï¼Œæ‰€ä»¥ï¼Œæ— éœ€é¢å¤–æ·»åŠ ä¾èµ–ã€‚
æˆ‘ä»¬åŸºäºã€Šæ²¡åšè¿‡å¤§é¡¹ç›®ï¼Œä½†æˆ‘ä¼šå»ºå¤§é¡¹ç›®ã€‹ä¸­åˆ›å»ºçš„é¡¹ç›®ï¼Œå¯åŠ¨springboot-demoé¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°çš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ã€‚
<img loading="lazy" src="/posts/java/log/1.gif"></p>
<p>ä»¥ä¸Šè‡³é»˜è®¤é…ç½®å¯åŠ¨ä¸‹çš„æ—¥å¿—æ˜¾ç¤ºæƒ…å†µï¼Œå¦‚æœéœ€è¦åšä¸€äº›å®šåˆ¶çš„æ—¥å¿—é…ç½®æ¯”å¦‚å°†æ—¥å¿—å­˜å‚¨åˆ°æ–‡ä»¶ç­‰åº”è¯¥å¦‚ä½•é…ç½®ï¼Œä¸‹é¢å°±é€šè¿‡å‡ ä¸ªå°é—®é¢˜æ¥çœ‹çœ‹Spring Bootä¸‹æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p>
<h2 id="å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—">å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•åœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—">#</a></h2>
<p>æ–°å»ºä¸€ä¸ªé…ç½®ç±» LogConfigï¼Œæ³¨å…¥ä¸€ä¸ªBeanï¼Œå¹¶åœ¨æ–¹æ³•ä¸­æ‰“å°æ—¥å¿—</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.jackie.springbootdemo.config;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> com.jackie.springbootdemo.model.Person;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.context.annotation.Bean;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.context.annotation.Configuration;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> LogConfig {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Logger LOG = LoggerFactory.<span style="color:#007f7f">getLogger</span>(LogConfig.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Bean
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Person logMethod() {
</span></span><span style="display:flex;"><span>        LOG.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;==========print log==========&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Person();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡ŒSpringBootDemoApplicationï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°çš„æ—¥å¿—
<img loading="lazy" src="/posts/java/log/2.png">
Spring Booté»˜è®¤çš„æ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œè¿™é‡Œæ‰“å°çš„æ˜¯INFOçº§åˆ«çš„æ—¥å¿—æ‰€ä»¥å¯ä»¥æ˜¾ç¤ºã€‚
å¾ˆå¤šå¼€å‘è€…åœ¨æ—¥å¸¸å†™
<code>private static final Logger LOG = LoggerFactory.getLogger(LogConfig.class);</code>
æ€»è§‰å¾—åé¢çš„<code>LogConfig.class</code>å¯æœ‰å¯æ— ï¼Œå› ä¸ºéšä¾¿å†™ä¸ªå…¶ä»–ç±»ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å‡†ç¡®ç¼–å†™classä¿¡æ¯èƒ½å¤Ÿæä¾›å¿«é€Ÿå®šä½æ—¥å¿—çš„æ•ˆç‡ã€‚æˆ‘ä»¬çœ‹åˆ°æ‰“å°çš„æ—¥å¿—å†…å®¹å·¦ä¾§å°±æ˜¯å¯¹åº”çš„ç±»åç§°ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡
<code>private static final Logger LOG = LoggerFactory.getLogger(LogConfig.class);</code>å®ç°çš„ã€‚
å¦‚æœå°†LogConfig.classæ¢æˆxxx.classï¼Œè¾“å‡ºæ—¥å¿—å°±ä¼šæ˜¾ç¤ºå¯¹åº”çš„xxxç±»åã€‚è¿™æ ·å£°æ˜çš„å¥½å¤„å°±æ˜¯æ–¹ä¾¿å®šä½æ—¥å¿—ã€‚</p>
<h2 id="å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯å­˜å‚¨åˆ°æ–‡ä»¶">å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯å­˜å‚¨åˆ°æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯å­˜å‚¨åˆ°æ–‡ä»¶">#</a></h2>
<p>åœ¨æœ¬æœºç¯å¢ƒï¼Œæˆ‘ä»¬ä¹ æƒ¯åœ¨æ§åˆ¶å°çœ‹æ—¥å¿—ï¼Œä½†æ˜¯çº¿ä¸Šæˆ‘ä»¬è¿˜æ˜¯è¦é€šè¿‡å°†æ—¥å¿—ä¿¡æ¯ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼ŒæŸ¥è¯¢æ—¥å¿—æ–‡ä»¶å³å¯ã€‚
é‚£ä¹ˆåº”è¯¥å¦‚ä½•é…ç½®æ‰èƒ½å°†æ—¥å¿—ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶å‘¢ï¼Ÿ
åœ¨æˆ‘ä»¬åˆ›å»ºçš„springboot-demoé¡¹ç›®ä¸­ï¼Œresourcesç›®å½•ä¸‹æœ‰ä¸ªapplication.propertiesæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>logging.file.path=/Users/jackie/workspace/rome/
</span></span><span style="display:flex;"><span>logging.file.name=springbootdemo.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>logging.pathï¼šè¯¥å±æ€§ç”¨æ¥é…ç½®æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„
logging.fileï¼šè¯¥å±æ€§ç”¨æ¥é…ç½®æ—¥å¿—æ–‡ä»¶åï¼Œå¦‚æœè¯¥å±æ€§ä¸é…ç½®ï¼Œé»˜è®¤æ–‡ä»¶åä¸ºspring.log
è¿è¡ŒSpringBootDemoApplication
<img loading="lazy" src="/posts/java/log/3.gif">
å¯ä»¥çœ‹åˆ°åœ¨æŒ‡å®šè·¯å¾„ä¸‹ç”Ÿæˆäº†springbootdemo.logæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†…å®¹å’Œæ§åˆ¶å°æ‰“å°å†…å®¹ä¸€è‡´ã€‚
å¦‚æœæ³¨é‡Šlogging.file=springbootdemo.logåˆ™ç”Ÿæˆé»˜è®¤æ–‡ä»¶åspring.log
<img loading="lazy" src="/posts/java/log/4.gif"></p>
<h2 id="å¦‚ä½•è®¾ç½®æ—¥å¿—çº§åˆ«">å¦‚ä½•è®¾ç½®æ—¥å¿—çº§åˆ«<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•è®¾ç½®æ—¥å¿—çº§åˆ«">#</a></h2>
<p>æ—¥å¿—çº§åˆ«æ€»å…±æœ‰TARCE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL ï¼Œä¸”çº§åˆ«æ˜¯é€æ¸æä¾›ï¼Œå¦‚æœæ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºINFOï¼Œåˆ™æ„å‘³TRACEå’ŒDEBUGçº§åˆ«çš„æ—¥å¿—éƒ½çœ‹ä¸åˆ°ã€‚
ä¸Šä¾‹ä¸­æˆ‘ä»¬æ‰“å°äº†ä¸€ä¸ªINFOçº§åˆ«çš„æ—¥å¿—ï¼Œå› ä¸ºSpring Booté»˜è®¤çº§åˆ«å°±æ˜¯INFOï¼Œå¦‚æœæˆ‘ä»¬æ”¹ä¸ºWARNï¼Œæ˜¯å¦è¿˜èƒ½çœ‹åˆ°è¿™è¡Œæ—¥å¿—ä¿¡æ¯ã€‚</p>
<p><strong>logging.level</strong>
è¯¥å±æ€§ç”¨äºé…ç½®æ—¥å¿—çº§åˆ«ã€‚åœ¨applicaition.propertiesä¸­æ·»åŠ 
<code>logging.level.root=warn</code>
è¿™é‡Œæ˜¯ç”¨çš„rootçº§åˆ«ï¼Œå³é¡¹ç›®çš„æ‰€æœ‰æ—¥å¿—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨packageçº§åˆ«ï¼Œå³æŒ‡å®šåŒ…ä¸‹ä½¿ç”¨ç›¸åº”çš„æ—¥å¿—çº§åˆ«ï¼Œä¸‹é¢å†çœ‹ã€‚
å¯åŠ¨SpringBootDemoApplication
<img loading="lazy" src="/posts/java/log/5.png">
ä½ æ²¡çœ‹é”™ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯æˆåŠŸå¯åŠ¨äº†ï¼Œä½†æ˜¯å‡ ä¹æ²¡æœ‰å†…å®¹ï¼Œè¿™æ˜¯å› ä¸ºä¹‹å‰æ‰“å°çš„æ—¥å¿—çº§åˆ«éƒ½æ˜¯INFOï¼Œè¿™é‡Œè®¾ç½®ä¸ºWARNï¼Œæ‰€ä»¥INFOçº§åˆ«çš„æ—¥å¿—éƒ½ä¸æ˜¾ç¤ºã€‚
è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ”¹åŠ¨rootè¿˜æ˜¯INFOçº§åˆ«ï¼Œå°†æŒ‡å®šåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºWARN</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>logging.level.root=INFO
</span></span><span style="display:flex;"><span>logging.level.com.jackie.springbootdemo.config=WARN
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨SpringBootDemoApplication
<img loading="lazy" src="/posts/java/log/6.png">
å¯ä»¥çœ‹åˆ°é™¤äº†LogConfigç±»ä¸­çš„INFOçº§åˆ«çš„æ—¥å¿—æ²¡æœ‰æ‰“å°å‡ºæ¥ï¼Œå…¶ä»–çš„INFOçº§åˆ«çš„æ—¥å¿—éƒ½æ­£å¸¸è¾“å‡ºäº†ã€‚</p>
<h2 id="å¦‚ä½•å®šåˆ¶è‡ªå·±çš„æ—¥å¿—æ ¼å¼">å¦‚ä½•å®šåˆ¶è‡ªå·±çš„æ—¥å¿—æ ¼å¼<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•å®šåˆ¶è‡ªå·±çš„æ—¥å¿—æ ¼å¼">#</a></h2>
<p>åœ¨application.propertiesä¸­æ·»åŠ </p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>logging.pattern.console=%d{yyyy/MM/dd-HH:mm:ss} [%thread] %-5level %logger- %msg%n 
</span></span><span style="display:flex;"><span>logging.pattern.file=%d{yyyy/MM/dd-HH:mm} [%thread] %-5level %logger- %msg%n
</span></span></code></pre></td></tr></table>
</div>
</div><p>logging.pattern.consoleï¼šè¯¥å±æ€§ç”¨äºå®šåˆ¶æ—¥å¿—è¾“å‡ºæ ¼å¼ã€‚
ä¸Šè¿°é…ç½®çš„ç¼–ç ä¸­ï¼Œå¯¹åº”ç¬¦å·çš„å«ä¹‰å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>%d{HH:mm:ss.SSS}â€”â€”æ—¥å¿—è¾“å‡ºæ—¶é—´
</span></span><span style="display:flex;"><span>%threadâ€”â€”è¾“å‡ºæ—¥å¿—çš„è¿›ç¨‹åå­—ï¼Œè¿™åœ¨Webåº”ç”¨ä»¥åŠå¼‚æ­¥ä»»åŠ¡å¤„ç†ä¸­å¾ˆæœ‰ç”¨
</span></span><span style="display:flex;"><span>%-5levelâ€”â€”æ—¥å¿—çº§åˆ«ï¼Œå¹¶ä¸”ä½¿ç”¨5ä¸ªå­—ç¬¦é å·¦å¯¹é½
</span></span><span style="display:flex;"><span>%logger- â€”â€”æ—¥å¿—è¾“å‡ºè€…çš„åå­—
</span></span><span style="display:flex;"><span>%msgâ€”â€”æ—¥å¿—æ¶ˆæ¯
</span></span><span style="display:flex;"><span>%nâ€”â€”å¹³å°çš„æ¢è¡Œç¬¦
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨SpringBootDemoApplication
<img loading="lazy" src="/posts/java/log/7.png"></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/java/">Java</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>