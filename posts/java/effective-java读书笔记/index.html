<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®° | Wjy&#39;s Blog</title>
<meta name="keywords" content="java">
<meta name="description" content="chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡
Creating and Destroying Objects
æœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/java/effective-java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°" />
<meta property="og:description" content="chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡
Creating and Destroying Objects
æœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/java/effective-java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-09T15:50:13+00:00" />
<meta property="article:modified_time" content="2021-02-09T15:50:13+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°"/>
<meta name="twitter:description" content="chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡
Creating and Destroying Objects
æœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/java/effective-java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°",
  "name": "ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°",
  "description": "chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ Creating and Destroying Objects\næœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚\n",
  "keywords": [
    "java"
  ],
  "articleBody": "chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ Creating and Destroying Objects\næœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚\nä¸€äº›å‚è€ƒï¼ŒåŸæ–‡è¯»èµ·æ¥æœ‰äº›è´¹åŠ² github github\nItem-1ï¼šç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•° åœ¨ Java ä¸­ï¼Œè·å¾—ä¸€ä¸ªç±»å®ä¾‹æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ new å…³é”®å­—ï¼Œå³é€šè¿‡æ„é€ å‡½æ•°æ¥å®ç°å¯¹è±¡çš„åˆ›å»ºã€‚å°±åƒè¿™æ ·ï¼š\n1 2 Fragment fragment = new MyFragment(); Date date = new Date(); ä¸è¿‡åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜ä¼šè§åˆ°å¦å¤–ä¸€ç§è·å–ç±»å®ä¾‹çš„æ–¹æ³•ï¼š\n1 2 3 Fragment fragment = MyFragment.newIntance(); Calendar calendar = Calendar.getInstance(); Integer number = Integer.valueOf(\"3\"); åƒè¿™æ ·çš„ï¼šä¸é€šè¿‡ newï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªé™æ€æ–¹æ³•æ¥å¯¹å¤–æä¾›è‡ªèº«å®ä¾‹çš„æ–¹æ³•ï¼Œå³ä¸ºæˆ‘ä»¬æ‰€è¯´çš„é™æ€å·¥å‚æ–¹æ³•ã€‚è¦æ³¨æ„çš„æ˜¯é™æ€å·¥å‚æ–¹æ³•ä¸è®¾è®¡æ¨¡å¼ä¸­çš„å·¥å‚æ–¹æ³•æ¨¡å¼ä¸åŒã€‚é™æ€å·¥å‚æ–¹æ³•ä¸æ„é€ å‡½æ•°ç›¸æ¯”çš„ä¼˜ç‚¹å¦‚ä¸‹ã€‚\né™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­— ç”±äºè¯­è¨€çš„ç‰¹æ€§ï¼ŒJava çš„æ„é€ å‡½æ•°éƒ½æ˜¯è·Ÿç±»åä¸€æ ·çš„ã€‚è¿™å¯¼è‡´çš„ä¸€ä¸ªé—®é¢˜æ˜¯æ„é€ å‡½æ•°çš„åç§°ä¸å¤Ÿçµæ´»ï¼Œç»å¸¸ä¸èƒ½å‡†ç¡®åœ°æè¿°è¿”å›å€¼ï¼Œåœ¨æœ‰å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°æ—¶å°¤ç”šï¼Œå¦‚æœå‚æ•°ç±»å‹ã€æ•°ç›®åˆæ¯”è¾ƒç›¸ä¼¼çš„è¯ï¼Œé‚£æ›´æ˜¯å¾ˆå®¹æ˜“å‡ºé”™ã€‚\n1 2 3 4 5 6 Date date0 = new Date(); Date date1 = new Date(0L); Date date2 = new Date(\"0\"); Date date3 = new Date(1,2,1); Date date4 = new Date(1,2,1,1,1); Date date5 = new Date(1,2,1,1,1,1); Date ç±»æœ‰å¾ˆå¤šé‡è½½å‡½æ•°ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå‡å¦‚ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰çš„è¯ï¼Œææ€•æ˜¯éœ€è¦çŠ¹è±«ä¸€ä¸‹ï¼Œæ‰èƒ½æ‰¾åˆ°åˆé€‚çš„æ„é€ å‡½æ•°çš„ã€‚è€Œå¯¹äºå…¶ä»–çš„ä»£ç é˜…è¯»è€…æ¥è¯´ï¼Œä¼°è®¡æ›´æ˜¯éœ€è¦æŸ¥çœ‹æ–‡æ¡£ï¼Œæ‰èƒ½æ˜ç™½æ¯ä¸ªå‚æ•°çš„å«ä¹‰äº†ã€‚ Date ç±»åœ¨ç›®å‰çš„ Java ç‰ˆæœ¬ä¸­ï¼Œåªä¿ç•™äº†ä¸€ä¸ªæ— å‚å’Œä¸€ä¸ªæœ‰å‚çš„æ„é€ å‡½æ•°ï¼Œå…¶ä»–çš„éƒ½å·²ç»æ ‡è®°ä¸º @Deprecated äº†ã€‚ è€Œå¦‚æœä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ï¼Œå°±å¯ä»¥ç»™æ–¹æ³•èµ·æ›´å¤šæœ‰æ„ä¹‰çš„åå­—ï¼Œæ¯”å¦‚å‰é¢çš„ valueOfã€newInstanceã€getInstance ç­‰ï¼Œå¯¹äºä»£ç çš„ç¼–å†™å’Œé˜…è¯»éƒ½èƒ½å¤Ÿæ›´æ¸…æ™°ã€‚\né™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡ã€‚ è¿™å…è®¸ä¸å¯å˜ç±»ä½¿ç”¨é¢„å…ˆæ„é€ çš„å®ä¾‹ï¼Œæˆ–åœ¨æ„é€ å®ä¾‹æ—¶ç¼“å­˜å®ä¾‹ï¼Œå¹¶é‡å¤åˆ†é…å®ƒä»¬ä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„é‡å¤å¯¹è±¡ã€‚Boolean.valueOf(boolean) æ–¹æ³•è¯´æ˜äº†è¿™ç§æŠ€æœ¯ï¼šå®ƒä»ä¸åˆ›å»ºå¯¹è±¡ã€‚è¿™ç§æŠ€æœ¯ç±»ä¼¼äºäº«å…ƒæ¨¡å¼ã€‚å¦‚æœç»å¸¸è¯·æ±‚ç›¸åŒçš„å¯¹è±¡ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ›å»ºå¯¹è±¡çš„ä»£ä»·å¾ˆé«˜æ—¶ï¼Œå®ƒå¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½ã€‚ æœ‰æ—¶å€™å¤–éƒ¨è°ƒç”¨è€…åªéœ€è¦æ‹¿åˆ°ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸å…³å¿ƒæ˜¯å¦æ˜¯æ–°çš„å®ä¾‹ï¼›åˆæˆ–è€…æˆ‘ä»¬æƒ³å¯¹å¤–æä¾›ä¸€ä¸ªå•ä¾‹æ—¶ï¼Œå¦‚æœä½¿ç”¨å·¥å‚æ–¹æ³•ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å†…éƒ¨æ§åˆ¶ï¼Œé˜²æ­¢åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œå‡å°‘å¼€é”€ã€‚åœ¨å®é™…çš„åœºæ™¯ä¸­ï¼Œå•ä¾‹çš„å†™æ³•ä¹Ÿå¤§éƒ½æ˜¯ç”¨é™æ€å·¥å‚æ–¹æ³•æ¥å®ç°çš„ã€‚\nå¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡ã€‚ è¿™æ¡ä¸ç”¨å¤šè¯´ï¼Œè®¾è®¡æ¨¡å¼ä¸­çš„åŸºæœ¬çš„åŸåˆ™ä¹‹ä¸€ï¼šã€é‡Œæ°æ›¿æ¢ã€åŸåˆ™ï¼Œå°±æ˜¯è¯´å­ç±»åº”è¯¥èƒ½æ›¿æ¢çˆ¶ç±»ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•åªèƒ½è¿”å›ç¡®åˆ‡çš„è‡ªèº«ç±»å‹ï¼Œè€Œé™æ€å·¥å‚æ–¹æ³•åˆ™èƒ½å¤Ÿæ›´åŠ çµæ´»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ–¹ä¾¿åœ°è¿”å›ä»»ä½•å®ƒçš„å­ç±»å‹çš„å®ä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 Class Person { public static Person getInstance(){ return new Person(); // è¿™é‡Œå¯ä»¥æ”¹ä¸º return new Player() / Cooker() } } Class Player extends Person{ } Class Cooker extends Person{ } æ¯”å¦‚ä¸Šé¢è¿™æ®µä»£ç ï¼ŒPerson ç±»çš„é™æ€å·¥å‚æ–¹æ³•å¯ä»¥è¿”å› Person çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è¿”å›å®ƒçš„å­ç±»Player æˆ–è€… Cookerã€‚ï¼ˆå½“ç„¶ï¼Œè¿™åªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªç±»æ˜¯ä¸åº”è¯¥ä¾èµ–äºå®ƒçš„å­ç±»çš„ã€‚ä½†å¦‚æœè¿™é‡Œçš„ getInstance () æ–¹æ³•ä½äºå…¶ä»–çš„ç±»ä¸­ï¼Œå°±æ›´å…·æœ‰çš„å®é™…æ“ä½œæ„ä¹‰äº†ï¼‰\nå¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³• æ„é€ å‡½æ•°è™½ç„¶ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªï¼Œä½†æ˜¯ç”±äºå‡½æ•°åå·²ç»è¢«å›ºå®šï¼Œæ‰€ä»¥å°±è¦æ±‚å‚æ•°å¿…é¡»æœ‰å·®å¼‚æ—¶ï¼ˆç±»å‹ã€æ•°é‡æˆ–è€…é¡ºåºï¼‰æ‰èƒ½å¤Ÿé‡è½½äº†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š\n1 2 3 4 5 6 7 8 9 10 11 class Child{ int age = 10; int weight = 30; public Child(int age, int weight) { this.age = age; this.weight = weight; } public Child(int age) { this.age = age; } } Child ç±»æœ‰ age å’Œ weight ä¸¤ä¸ªå±æ€§ï¼Œå¦‚ä»£ç æ‰€ç¤ºï¼Œå®ƒå·²ç»æœ‰äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼šChild(int age, int weight) å’Œ Child(int age)ï¼Œè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬æƒ³å†æ·»åŠ ä¸€ä¸ªæŒ‡å®š wegiht ä½†ä¸å…³å¿ƒ age çš„æ„é€ å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯è¿™æ ·ï¼š\n1 2 3 public Child(int weight) { this.weight = weight; } ä½†è¦æŠŠè¿™ä¸ªæ„é€ å‡½æ•°æ·»åŠ åˆ° Child ç±»ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º java çš„å‡½æ•°ç­¾åæ˜¯å¿½ç•¥å‚æ•°åç§°çš„ï¼Œæ‰€ä»¥ Child(int age) è·Ÿ Child(int weight) ä¼šå†²çªã€‚è¿™æ—¶å€™ï¼Œé™æ€å·¥å‚æ–¹æ³•å°±å¯ä»¥ç™»åœºäº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class Child{ int age = 10; int weight = 30; public static Child newChild(int age, int weight) { Child child = new Child(); child.weight = weight; child.age = age; return child; } public static Child newChildWithWeight(int weight) { Child child = new Child(); child.weight = weight; return child; } public static Child newChildWithAge(int age) { Child child = new Child(); child.age = age; return child; } } å…¶ä¸­çš„ newChildWithWeight å’Œ newChildWithAgeï¼Œå°±æ˜¯ä¸¤ä¸ªå‚æ•°ç±»å‹ç›¸åŒçš„çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½œç”¨ä¸åŒï¼Œå¦‚æ­¤ï¼Œå°±èƒ½å¤Ÿæ»¡è¶³ä¸Šé¢æ‰€è¯´çš„ç±»ä¼¼Child(int age) å’Œ Child(int weight)åŒæ—¶å­˜åœ¨çš„éœ€æ±‚ã€‚ï¼ˆå¦å¤–ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åå­—ä¹Ÿæ˜¯è‡ªæè¿°çš„ï¼Œç›¸å¯¹äºä¸€æˆä¸å˜çš„æ„é€ å‡½æ•°æ›´èƒ½è¡¨è¾¾è‡ªèº«çš„å«ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢æ‰€è¯´çš„ç¬¬ä¸€æ¡ä¼˜åŠ¿ â€”â€”ã€å®ƒä»¬æœ‰åå­—ã€ï¼‰\nå¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§ è½¯ä»¶å¼€å‘ä¸­æœ‰ä¸€æ¡å¾ˆé‡è¦çš„ç»éªŒï¼šå¯¹å¤–æš´éœ²çš„å±æ€§è¶Šå¤šï¼Œè°ƒç”¨è€…å°±è¶Šå®¹æ˜“å‡ºé”™ã€‚æ‰€ä»¥å¯¹äºç±»çš„æä¾›è€…ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥åŠªåŠ›å‡å°‘å¯¹å¤–æš´éœ²å±æ€§ï¼Œä»è€Œé™ä½è°ƒç”¨è€…å‡ºé”™çš„æœºä¼šã€‚è€ƒè™‘ä¸€ä¸‹æœ‰å¦‚ä¸‹ä¸€ä¸ª Player ç±»ï¼š\n1 2 3 4 5 6 7 8 9 10 // Player : Version 1 class Player { public static final int TYPE_RUNNER = 1; public static final int TYPE_SWIMMER = 2; public static final int TYPE_RACER = 3; protected int type; public Player(int type) { this.type = type; } } Player å¯¹å¤–æä¾›äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œè®©ä½¿ç”¨è€…ä¼ å…¥ä¸€ä¸ª type æ¥è¡¨ç¤ºç±»å‹ã€‚é‚£ä¹ˆè¿™ä¸ªç±»æœŸæœ›çš„è°ƒç”¨æ–¹å¼å°±æ˜¯è¿™æ ·çš„ï¼š\n1 2 Player player1 = new Player(Player.TYPE_RUNNER); Player player2 = new Player(Player.TYPE_SWEIMMER); ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæä¾›è€…æ˜¯æ— æ³•æ§åˆ¶è°ƒç”¨æ–¹çš„è¡Œä¸ºçš„ï¼Œå®é™…ä¸­è°ƒç”¨æ–¹å¼å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š\n1 2 3 Player player3 = new Player(0); Player player4 = new Player(-1); Player player5 = new Player(10086); æä¾›è€…æœŸæœ›çš„æ„é€ å‡½æ•°ä¼ å…¥çš„å€¼æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„å‡ ä¸ªå¸¸é‡ä¹‹ä¸€ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œå°±å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºé”™è¯¯ã€‚è¦é¿å…è¿™ç§é”™è¯¯ï¼Œä½¿ç”¨æšä¸¾æ¥ä»£æ›¿å¸¸é‡å€¼æ˜¯å¸¸è§çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå½“ç„¶å¦‚æœä¸æƒ³ç”¨æšä¸¾çš„è¯ï¼Œä½¿ç”¨æˆ‘ä»¬ä»Šå¤©æ‰€è¯´çš„ä¸»è§’é™æ€å·¥å‚æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠæ³•ã€‚å¦‚æœæŠŠä»¥ä¸Šéœ€æ±‚ç”¨é™æ€å·¥å‚æ–¹æ³•æ¥å®ç°ï¼Œä»£ç å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // Player : Version 2 class Player { public static final int TYPE_RUNNER = 1; public static final int TYPE_SWIMMER = 2; public static final int TYPE_RACER = 3; int type; private Player(int type) { this.type = type; } public static Player newRunner() { return new Player(TYPE_RUNNER); } public static Player newSwimmer() { return new Player(TYPE_SWIMMER); } public static Player newRacer() { return new Player(TYPE_RACER); } } æ³¨æ„å…¶ä¸­çš„æ„é€ æ–¹æ³•è¢«å£°æ˜ä¸ºäº† privateï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å®ƒè¢«å¤–éƒ¨è°ƒç”¨ï¼Œäºæ˜¯è°ƒç”¨æ–¹åœ¨ä½¿ç”¨ Player å®ä¾‹çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šå°±å¿…é¡»é€šè¿‡ newRunnerã€newSwimmerã€newRacer è¿™å‡ ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºï¼Œè°ƒç”¨æ–¹æ— é¡»çŸ¥é“ä¹Ÿæ— é¡»æŒ‡å®š type å€¼ï¼Œè¿™æ ·å°±èƒ½æŠŠ type çš„èµ‹å€¼çš„èŒƒå›´æ§åˆ¶ä½ï¼Œé˜²æ­¢å‰é¢æ‰€è¯´çš„å¼‚å¸¸å€¼çš„æƒ…å†µã€‚\nå¤šäº†ä¸€å±‚æ§åˆ¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹ æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€å®šé‡åˆ°è¿‡å¾ˆå¤šæ¬¡è¿™æ ·çš„åœºæ™¯ï¼šåœ¨å†™ä¸€ä¸ªç•Œé¢æ—¶ï¼ŒæœåŠ¡ç«¯çš„æ•°æ®è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç»å¸¸å°±éœ€è¦è‡ªå·±åœ¨å®¢æˆ·ç«¯ç¼–å†™ä¸€ä¸ªæµ‹è¯•çš„æ•°æ®ï¼Œæ¥è¿›è¡Œç•Œé¢çš„æµ‹è¯•ï¼Œåƒè¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 // åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ® User tester = new User(); tester.setName(\"å°æ˜\"); tester.setAge(16); tester.setDescription(\"æµ‹è¯•æ•°æ®\"); // use tester bindUI(tester); //ã€ã€ è¦å†™ä¸€è¿ä¸²çš„æµ‹è¯•ä»£ç ï¼Œå¦‚æœéœ€è¦æµ‹è¯•çš„ç•Œé¢æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆè¿™ä¸€è¿ä¸²çš„ä»£ç å¯èƒ½è¿˜ä¼šè¢«å¤åˆ¶å¤šæ¬¡åˆ°é¡¹ç›®çš„å¤šä¸ªä½ç½®ã€‚è¿™ç§å†™æ³•çš„ç¼ºç‚¹å‘¢ï¼Œé¦–å…ˆæ˜¯ä»£ç è‡ƒè‚¿ã€æ··ä¹±ï¼›å…¶æ¬¡æ˜¯ä¸‡ä¸€ä¸Šçº¿çš„æ—¶å€™æ¼æ‰äº†æŸä¸€å¤„ï¼Œå¿˜è®°ä¿®æ”¹ï¼Œé‚£å°±å¯ä»¥è¯´æ˜¯ç¾éš¾äº†ã€‚ä½†æ˜¯å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œä¹ æƒ¯äº†ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨çš„è¯ï¼Œåˆ™ä¼šå¾ˆè‡ªç„¶åœ°è¿™ä¹ˆå†™ï¼Œå…ˆåœ¨User ä¸­å®šä¹‰ä¸€ä¸ª newTestInstance æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 static class User{ String name ; int age ; String description; public static User newTestInstance() { User tester = new User(); tester.setName(\"éš”å£è€å¼ \"); tester.setAge(16); tester.setDescription(\"æˆ‘ä½éš”å£æˆ‘å§“å¼ ï¼\"); return tester; } } ç„¶åè°ƒç”¨çš„åœ°æ–¹å°±å¯ä»¥è¿™æ ·å†™äº†ï¼š\n1 2 3 4 // åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ® User tester = User.newTestInstance(); // use tester bindUI(tester); æ˜¯ä¸æ˜¯ç¬é—´å°±è§‰å¾—ä¼˜é›…äº†å¾ˆå¤šï¼Ÿï¼è€Œä¸”ä¸åªæ˜¯ä»£ç ç®€æ´ä¼˜é›…ï¼Œç”±äºæ‰€æœ‰æµ‹è¯•å®ä¾‹çš„åˆ›å»ºéƒ½æ˜¯åœ¨è¿™ä¸€ä¸ªåœ°æ–¹ï¼Œæ‰€ä»¥åœ¨éœ€è¦æ­£å¼æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿåªéœ€æŠŠè¿™ä¸ªæ–¹æ³•éšæ„åˆ é™¤æˆ–è€…ä¿®æ”¹ä¸€ä¸‹ï¼Œæ‰€æœ‰è°ƒç”¨è€…éƒ½ä¼šç¼–è¯‘ä¸é€šè¿‡ï¼Œå½»åº•æœç»äº†ç”±äºç–å¿½å¯¼è‡´çº¿ä¸Šè¿˜æœ‰æµ‹è¯•ä»£ç çš„æƒ…å†µã€‚\né™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»ï¼Œå¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–ï¼ˆå› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒï¼‰ åªè¦æ˜¯å·²å£°æ˜çš„è¿”å›ç±»å‹çš„å­ç±»ï¼Œéƒ½æ˜¯å¯ä»¥è¿”å›çš„ã€‚è¿”å›å¯¹è±¡çš„ç±»ä¹Ÿå¯èƒ½å› ç‰ˆæœ¬è€Œå¼‚ã€‚ ä¾‹å¦‚ï¼ŒEnumSetç±»æ˜¯æ²¡æœ‰å…¬å…±æ„é€ å‡½æ•°çš„ï¼Œåªæœ‰é™æ€å·¥å‚æ–¹æ³•ã€‚åœ¨ OpenJDK å®ç°ä¸­ï¼Œå› åº•å±‚ enum ç±»å‹çš„å¤§å°ä¸åŒï¼Œè¿™ä¸ªé™æ€å·¥å‚æ–¹æ³•ä¼šè¿”å›ä¸¤ä¸ªå­ç±»ä¸­çš„ä¸€ä¸ªå®ä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 public static ",
  "wordCount" : "41928",
  "inLanguage": "en",
  "datePublished": "2021-02-09T15:50:13Z",
  "dateModified": "2021-02-09T15:50:13Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/java/effective-java%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath:  [['\\(', '\\)'], ['$', '$']],  
    }
  };
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      ã€Šeffective javaã€‹è¯»ä¹¦ç¬”è®°
    </h1>
    <div class="post-meta"><span title='2021-02-09 15:50:13 +0000 UTC'>2021-02-09</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#chapter_02-%e5%88%9b%e5%bb%ba%e5%92%8c%e9%94%80%e6%af%81%e5%af%b9%e8%b1%a1" aria-label="chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡">chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</a><ul>
                        
                <li>
                    <a href="#item-1%e7%94%a8%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e4%bb%a3%e6%9b%bf%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" aria-label="Item-1ï¼šç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°">Item-1ï¼šç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°</a><ul>
                        
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e6%9c%89%e5%85%b7%e4%bd%93%e5%90%8d%e5%ad%97" aria-label="é™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­—">é™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­—</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e4%b8%8d%e9%9c%80%e8%a6%81%e5%9c%a8%e6%af%8f%e6%ac%a1%e8%b0%83%e7%94%a8%e6%97%b6%e5%88%9b%e5%bb%ba%e6%96%b0%e5%af%b9%e8%b1%a1" aria-label="é™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡ã€‚">é™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡ã€‚</a></li>
                <li>
                    <a href="#%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e8%8e%b7%e5%8f%96%e8%bf%94%e5%9b%9e%e7%b1%bb%e5%9e%8b%e7%9a%84%e4%bb%bb%e4%bd%95%e5%ad%90%e7%b1%bb%e7%9a%84%e5%af%b9%e8%b1%a1" aria-label="å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡ã€‚">å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡ã€‚</a></li>
                <li>
                    <a href="#%e5%8f%af%e4%bb%a5%e6%9c%89%e5%a4%9a%e4%b8%aa%e5%8f%82%e6%95%b0%e7%9b%b8%e5%90%8c%e4%bd%86%e5%90%8d%e7%a7%b0%e4%b8%8d%e5%90%8c%e7%9a%84%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95" aria-label="å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³•">å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³•</a></li>
                <li>
                    <a href="#%e5%8f%af%e4%bb%a5%e5%87%8f%e5%b0%91%e5%af%b9%e5%a4%96%e6%9a%b4%e9%9c%b2%e7%9a%84%e5%b1%9e%e6%80%a7" aria-label="å¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§">å¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§</a></li>
                <li>
                    <a href="#%e5%a4%9a%e4%ba%86%e4%b8%80%e5%b1%82%e6%8e%a7%e5%88%b6%e6%96%b9%e4%be%bf%e7%bb%9f%e4%b8%80%e4%bf%ae%e6%94%b9" aria-label="å¤šäº†ä¸€å±‚æ§åˆ¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹">å¤šäº†ä¸€å±‚æ§åˆ¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e8%bf%94%e5%9b%9e%e5%af%b9%e8%b1%a1%e7%9a%84%e7%b1%bb%e5%8f%af%e4%bb%a5%e9%9a%8f%e6%af%8f%e6%ac%a1%e8%b0%83%e7%94%a8%e8%80%8c%e5%8f%98%e5%8c%96%e5%9b%a0%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e7%9a%84%e5%8f%82%e6%95%b0%e5%80%bc%e4%b8%8d%e5%90%8c" aria-label="é™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»ï¼Œå¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–ï¼ˆå› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒï¼‰">é™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»ï¼Œå¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–ï¼ˆå› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒï¼‰</a></li>
                <li>
                    <a href="#%e5%bd%93%e7%bc%96%e5%86%99%e5%8c%85%e5%90%ab%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e7%9a%84%e7%b1%bb%e6%97%b6%e8%bf%94%e5%9b%9e%e5%af%b9%e8%b1%a1%e7%9a%84%e7%b1%bb%e4%b8%8d%e9%9c%80%e8%a6%81%e5%ad%98%e5%9c%a8" aria-label="å½“ç¼–å†™åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»æ—¶ï¼Œè¿”å›å¯¹è±¡çš„ç±»ä¸éœ€è¦å­˜åœ¨ã€‚">å½“ç¼–å†™åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»æ—¶ï¼Œè¿”å›å¯¹è±¡çš„ç±»ä¸éœ€è¦å­˜åœ¨ã€‚</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e7%9a%84%e7%bc%ba%e7%82%b9%e4%b8%80" aria-label="é™æ€å·¥å‚çš„ç¼ºç‚¹ä¸€">é™æ€å·¥å‚çš„ç¼ºç‚¹ä¸€</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e7%9a%84%e7%bc%ba%e7%82%b9%e4%ba%8c" aria-label="é™æ€å·¥å‚çš„ç¼ºç‚¹äºŒ">é™æ€å·¥å‚çš„ç¼ºç‚¹äºŒ</a></li></ul>
                </li>
                <li>
                    <a href="#item-2%e5%bd%93%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e6%9c%89%e5%a4%9a%e4%b8%aa%e5%8f%82%e6%95%b0%e6%97%b6%e8%80%83%e8%99%91%e6%94%b9%e7%94%a8%e6%9e%84%e5%bb%ba%e5%99%a8" aria-label="Item-2ï¼šå½“æ„é€ å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè€ƒè™‘æ”¹ç”¨æ„å»ºå™¨">Item-2ï¼šå½“æ„é€ å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè€ƒè™‘æ”¹ç”¨æ„å»ºå™¨</a></li>
                <li>
                    <a href="#item-3%e4%bd%bf%e7%94%a8%e7%a7%81%e6%9c%89%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e6%88%96%e6%9e%9a%e4%b8%be%e5%88%9b%e5%bb%ba%e5%8d%95%e4%be%8b" aria-label="Item-3ï¼šä½¿ç”¨ï¼ˆç§æœ‰æ„é€ å‡½æ•°ï¼‰æˆ–ï¼ˆæšä¸¾ï¼‰åˆ›å»ºå•ä¾‹">Item-3ï¼šä½¿ç”¨ï¼ˆç§æœ‰æ„é€ å‡½æ•°ï¼‰æˆ–ï¼ˆæšä¸¾ï¼‰åˆ›å»ºå•ä¾‹</a></li>
                <li>
                    <a href="#item-4%e7%94%a8%e7%a7%81%e6%9c%89%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e8%ae%a9%e7%b1%bb%e4%b8%8d%e5%8f%af%e5%ae%9e%e4%be%8b%e5%8c%96" aria-label="Item-4ï¼šç”¨ç§æœ‰æ„é€ å‡½æ•°è®©ç±»ä¸å¯å®ä¾‹åŒ–">Item-4ï¼šç”¨ç§æœ‰æ„é€ å‡½æ•°è®©ç±»ä¸å¯å®ä¾‹åŒ–</a></li>
                <li>
                    <a href="#item-5%e4%bc%98%e5%85%88%e8%80%83%e8%99%91%e4%be%9d%e8%b5%96%e6%b3%a8%e4%ba%ba%e6%9d%a5%e5%bc%95%e7%94%a8%e8%b5%84%e6%ba%90" aria-label="Item-5ï¼šä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨äººæ¥å¼•ç”¨èµ„æº">Item-5ï¼šä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨äººæ¥å¼•ç”¨èµ„æº</a></li>
                <li>
                    <a href="#item-6%e9%81%bf%e5%85%8d%e5%88%9b%e5%bb%ba%e4%b8%8d%e5%bf%85%e8%a6%81%e7%9a%84%e5%af%b9%e8%b1%a1" aria-label="Item-6ï¼šé¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡">Item-6ï¼šé¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡</a></li>
                <li>
                    <a href="#item-7%e6%8e%92%e9%99%a4%e8%bf%87%e6%97%b6%e7%9a%84%e5%af%b9%e8%b1%a1%e5%bc%95%e7%94%a8" aria-label="Item-7ï¼šæ’é™¤è¿‡æ—¶çš„å¯¹è±¡å¼•ç”¨">Item-7ï¼šæ’é™¤è¿‡æ—¶çš„å¯¹è±¡å¼•ç”¨</a></li>
                <li>
                    <a href="#item-8%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8%e7%bb%88%e7%bb%93%e5%99%a8%e5%92%8c%e6%b8%85%e9%99%a4%e5%99%a8" aria-label="Item-8ï¼šé¿å…ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨">Item-8ï¼šé¿å…ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨</a></li>
                <li>
                    <a href="#item-9%e4%bd%bf%e7%94%a8-try-with-resources-%e4%bc%98%e4%ba%8e-try-finally" aria-label="Item-9ï¼šä½¿ç”¨ try-with-resources ä¼˜äº try-finally">Item-9ï¼šä½¿ç”¨ try-with-resources ä¼˜äº try-finally</a></li></ul>
                </li>
                <li>
                    <a href="#chapter_03-%e5%af%b9%e8%b1%a1%e7%9a%84%e9%80%9a%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="chapter_03 å¯¹è±¡çš„é€šç”¨æ–¹æ³•">chapter_03 å¯¹è±¡çš„é€šç”¨æ–¹æ³•</a><ul>
                        
                <li>
                    <a href="#item-10%e8%a6%86%e7%9b%96-equals-%e6%96%b9%e6%b3%95%e6%97%b6%e5%ba%94%e9%81%b5%e5%ae%88%e9%80%9a%e7%94%a8%e7%ba%a6%e5%ae%9a" aria-label="Item-10ï¼šè¦†ç›– equals æ–¹æ³•æ—¶åº”éµå®ˆé€šç”¨çº¦å®š">Item-10ï¼šè¦†ç›– equals æ–¹æ³•æ—¶åº”éµå®ˆé€šç”¨çº¦å®š</a><ul>
                        
                <li>
                    <a href="#%e8%87%aa%e5%8f%8d%e6%80%a7" aria-label="è‡ªåæ€§">è‡ªåæ€§</a></li>
                <li>
                    <a href="#%e5%af%b9%e7%a7%b0%e6%80%a7" aria-label="å¯¹ç§°æ€§">å¯¹ç§°æ€§</a></li>
                <li>
                    <a href="#%e4%bc%a0%e9%80%92%e6%80%a7" aria-label="ä¼ é€’æ€§">ä¼ é€’æ€§</a></li>
                <li>
                    <a href="#%e4%b8%80%e8%87%b4%e6%80%a7" aria-label="ä¸€è‡´æ€§">ä¸€è‡´æ€§</a></li>
                <li>
                    <a href="#%e9%9d%9e%e7%a9%ba%e6%80%a7" aria-label="éç©ºæ€§">éç©ºæ€§</a></li>
                <li>
                    <a href="#%e7%bb%bc%e4%b8%8a%e6%89%80%e8%bf%b0%e6%9e%84%e5%bb%ba%e9%ab%98%e8%b4%a8%e9%87%8f-equals-%e6%96%b9%e6%b3%95%e7%9a%84%e7%a7%98%e8%af%80" aria-label="ç»¼ä¸Šæ‰€è¿°ï¼Œæ„å»ºé«˜è´¨é‡ equals æ–¹æ³•çš„ç§˜è¯€ï¼š">ç»¼ä¸Šæ‰€è¿°ï¼Œæ„å»ºé«˜è´¨é‡ equals æ–¹æ³•çš„ç§˜è¯€ï¼š</a></li></ul>
                </li>
                <li>
                    <a href="#item-11%e5%a6%82%e6%9e%9c%e8%a6%86%e7%9b%96%e4%ba%86-equals-%e6%96%b9%e6%b3%95%e9%82%a3%e4%b9%88%e5%bf%85%e9%a1%bb%e5%90%8c%e6%97%b6%e8%a6%86%e7%9b%96-hashcode-%e6%96%b9%e6%b3%95" aria-label="Item-11ï¼šå¦‚æœè¦†ç›–äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›– hashCode æ–¹æ³•">Item-11ï¼šå¦‚æœè¦†ç›–äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›– hashCode æ–¹æ³•</a></li>
                <li>
                    <a href="#item-12%e5%a7%8b%e7%bb%88%e8%a6%86%e7%9b%96-tostring-%e6%96%b9%e6%b3%95" aria-label="Item-12ï¼šå§‹ç»ˆè¦†ç›– toString æ–¹æ³•">Item-12ï¼šå§‹ç»ˆè¦†ç›– toString æ–¹æ³•</a></li>
                <li>
                    <a href="#item-13%e8%b0%a8%e6%85%8e%e7%9a%84%e8%a6%86%e7%9b%96clone" aria-label="Item-13ï¼šè°¨æ…çš„è¦†ç›–clone">Item-13ï¼šè°¨æ…çš„è¦†ç›–clone</a></li>
                <li>
                    <a href="#item-14%e8%80%83%e8%99%91%e5%ae%9e%e7%8e%b0-comparable-%e6%8e%a5%e5%8f%a3" aria-label="Item-14ï¼šè€ƒè™‘å®ç° Comparable æ¥å£">Item-14ï¼šè€ƒè™‘å®ç° Comparable æ¥å£</a></li></ul>
                </li>
                <li>
                    <a href="#chapter_04-%e7%b1%bb%e5%92%8c%e6%8e%a5%e5%8f%a3classes-and-interfaces" aria-label="chapter_04 ç±»å’Œæ¥å£ï¼ˆClasses and Interfacesï¼‰">chapter_04 ç±»å’Œæ¥å£ï¼ˆClasses and Interfacesï¼‰</a><ul>
                        
                <li>
                    <a href="#item-15%e4%bd%bf%e7%b1%bb%e5%92%8c%e6%88%90%e5%91%98%e7%9a%84%e5%8f%af%e8%ae%bf%e9%97%ae%e6%80%a7%e6%9c%80%e5%b0%8f%e5%8c%96" aria-label="Item-15ï¼šä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–">Item-15ï¼šä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–</a></li>
                <li>
                    <a href="#item-16%e8%a6%81%e5%9c%a8%e5%85%ac%e6%9c%89%e7%b1%bb%e8%80%8c%e9%9d%9e%e5%85%ac%e6%9c%89%e5%9f%9f%e4%b8%ad%e4%bd%bf%e7%94%a8%e8%ae%bf%e9%97%ae%e6%96%b9%e6%b3%95" aria-label="Item-16ï¼šè¦åœ¨å…¬æœ‰ç±»è€Œéå…¬æœ‰åŸŸä¸­ä½¿ç”¨è®¿é—®æ–¹æ³•">Item-16ï¼šè¦åœ¨å…¬æœ‰ç±»è€Œéå…¬æœ‰åŸŸä¸­ä½¿ç”¨è®¿é—®æ–¹æ³•</a></li>
                <li>
                    <a href="#item-17%e5%87%8f%e5%b0%91%e5%8f%af%e5%8f%98%e6%80%a7minimize-mutability" aria-label="Item-17ï¼šå‡å°‘å¯å˜æ€§ï¼ˆMinimize mutabilityï¼‰">Item-17ï¼šå‡å°‘å¯å˜æ€§ï¼ˆMinimize mutabilityï¼‰</a></li>
                <li>
                    <a href="#item-18%e5%a4%8d%e5%90%88%e4%bc%98%e5%85%88%e4%ba%8e%e7%bb%a7%e6%89%bffavor-composition-over-inheritance" aria-label="Item-18ï¼šå¤åˆä¼˜å…ˆäºç»§æ‰¿ï¼ˆFavor composition over inheritanceï¼‰">Item-18ï¼šå¤åˆä¼˜å…ˆäºç»§æ‰¿ï¼ˆFavor composition over inheritanceï¼‰</a></li>
                <li>
                    <a href="#item-19%e8%a6%81%e4%b9%88%e8%ae%be%e8%ae%a1%e7%bb%a7%e6%89%bf%e5%b9%b6%e6%8f%90%e4%be%9b%e6%96%87%e6%a1%a3%e8%af%b4%e6%98%8e%e8%a6%81%e4%b9%88%e7%a6%81%e6%ad%a2%e7%bb%a7%e6%89%bf" aria-label="Item-19ï¼šè¦ä¹ˆè®¾è®¡ç»§æ‰¿å¹¶æä¾›æ–‡æ¡£è¯´æ˜ï¼Œè¦ä¹ˆç¦æ­¢ç»§æ‰¿">Item-19ï¼šè¦ä¹ˆè®¾è®¡ç»§æ‰¿å¹¶æä¾›æ–‡æ¡£è¯´æ˜ï¼Œè¦ä¹ˆç¦æ­¢ç»§æ‰¿</a></li>
                <li>
                    <a href="#item-20%e6%8e%a5%e5%8f%a3%e4%bc%98%e4%ba%8e%e6%8a%bd%e8%b1%a1%e7%b1%bbprefer-interfaces-to-abstract-classes" aria-label="Item-20ï¼šæ¥å£ä¼˜äºæŠ½è±¡ç±»ï¼ˆPrefer interfaces to abstract classesï¼‰">Item-20ï¼šæ¥å£ä¼˜äºæŠ½è±¡ç±»ï¼ˆPrefer interfaces to abstract classesï¼‰</a></li>
                <li>
                    <a href="#item-21%e4%b8%ba%e5%90%8e%e4%bb%a3%e8%ae%be%e8%ae%a1%e6%8e%a5%e5%8f%a3design-interfaces-for-posterity" aria-label="Item-21ï¼šä¸ºåä»£è®¾è®¡æ¥å£ï¼ˆDesign interfaces for posterityï¼‰">Item-21ï¼šä¸ºåä»£è®¾è®¡æ¥å£ï¼ˆDesign interfaces for posterityï¼‰</a></li>
                <li>
                    <a href="#item-22%e6%8e%a5%e5%8f%a3%e5%8f%aa%e7%94%a8%e4%ba%8e%e5%ae%9a%e4%b9%89%e7%b1%bb%e5%9e%8buse-interfaces-only-to-define-types" aria-label="Item-22ï¼šæ¥å£åªç”¨äºå®šä¹‰ç±»å‹ï¼ˆUse interfaces only to define typesï¼‰">Item-22ï¼šæ¥å£åªç”¨äºå®šä¹‰ç±»å‹ï¼ˆUse interfaces only to define typesï¼‰</a></li>
                <li>
                    <a href="#item-23%e7%b1%bb%e5%b1%82%e6%ac%a1%e4%bc%98%e4%ba%8e%e6%a0%87%e7%ad%be%e7%b1%bbprefer-class-hierarchies-to-tagged-classes" aria-label="Item-23ï¼šç±»å±‚æ¬¡ä¼˜äºæ ‡ç­¾ç±»ï¼ˆPrefer class hierarchies to tagged classesï¼‰">Item-23ï¼šç±»å±‚æ¬¡ä¼˜äºæ ‡ç­¾ç±»ï¼ˆPrefer class hierarchies to tagged classesï¼‰</a></li>
                <li>
                    <a href="#item-24%e9%9d%99%e6%80%81%e6%88%90%e5%91%98%e7%b1%bb%e4%bc%98%e4%ba%8e%e9%9d%9e%e9%9d%99%e6%80%81%e6%88%90%e5%91%98%e7%b1%bbfavor-static-member-classes-over-nonstatic" aria-label="Item-24ï¼šé™æ€æˆå‘˜ç±»ä¼˜äºéé™æ€æˆå‘˜ç±»ï¼ˆFavor static member classes over nonstaticï¼‰">Item-24ï¼šé™æ€æˆå‘˜ç±»ä¼˜äºéé™æ€æˆå‘˜ç±»ï¼ˆFavor static member classes over nonstaticï¼‰</a></li>
                <li>
                    <a href="#item-25%e6%ba%90%e6%96%87%e4%bb%b6%e4%bb%85%e9%99%90%e6%9c%89%e5%8d%95%e4%b8%aa%e9%a1%b6%e5%b1%82%e7%b1%bblimit-source-files-to-a-single-top-level-class" aria-label="Item-25ï¼šæºæ–‡ä»¶ä»…é™æœ‰å•ä¸ªé¡¶å±‚ç±»ï¼ˆLimit source files to a single top-level classï¼‰">Item-25ï¼šæºæ–‡ä»¶ä»…é™æœ‰å•ä¸ªé¡¶å±‚ç±»ï¼ˆLimit source files to a single top-level classï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter05-%e6%b3%9b%e5%9e%8bgenerics" aria-label="chapter05 æ³›å‹ï¼ˆGenericsï¼‰">chapter05 æ³›å‹ï¼ˆGenericsï¼‰</a><ul>
                        
                <li>
                    <a href="#item-26%e4%b8%8d%e8%a6%81%e4%bd%bf%e7%94%a8%e5%8e%9f%e5%a7%8b%e7%b1%bb%e5%9e%8bdont-use-raw-types" aria-label="Item-26ï¼šä¸è¦ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆDonâ€™t use raw typesï¼‰">Item-26ï¼šä¸è¦ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆDonâ€™t use raw typesï¼‰</a></li>
                <li>
                    <a href="#item-27%e6%b6%88%e9%99%a4-unchecked-%e8%ad%a6%e5%91%8aeliminate-unchecked-warnings" aria-label="Item-27ï¼šæ¶ˆé™¤ unchecked è­¦å‘Šï¼ˆEliminate unchecked warningsï¼‰">Item-27ï¼šæ¶ˆé™¤ unchecked è­¦å‘Šï¼ˆEliminate unchecked warningsï¼‰</a></li>
                <li>
                    <a href="#item-28list-%e4%bc%98%e4%ba%8e%e6%95%b0%e7%bb%84prefer-lists-to-arrays" aria-label="Item-28ï¼šlist ä¼˜äºæ•°ç»„ï¼ˆPrefer lists to arraysï¼‰">Item-28ï¼šlist ä¼˜äºæ•°ç»„ï¼ˆPrefer lists to arraysï¼‰</a></li>
                <li>
                    <a href="#item-29%e4%bc%98%e5%85%88%e8%80%83%e8%99%91%e6%b3%9b%e5%9e%8bfavor-generic-types" aria-label="Item-29ï¼šä¼˜å…ˆè€ƒè™‘æ³›å‹ï¼ˆFavor generic typesï¼‰">Item-29ï¼šä¼˜å…ˆè€ƒè™‘æ³›å‹ï¼ˆFavor generic typesï¼‰</a></li>
                <li>
                    <a href="#item-30%e4%bc%98%e5%85%88%e4%bd%bf%e7%94%a8%e6%b3%9b%e5%9e%8b%e6%96%b9%e6%b3%95favor-generic-methods" aria-label="Item-30ï¼šä¼˜å…ˆä½¿ç”¨æ³›å‹æ–¹æ³•ï¼ˆFavor generic methodsï¼‰">Item-30ï¼šä¼˜å…ˆä½¿ç”¨æ³›å‹æ–¹æ³•ï¼ˆFavor generic methodsï¼‰</a></li>
                <li>
                    <a href="#item-31%e4%bd%bf%e7%94%a8%e6%9c%89%e7%95%8c%e9%80%9a%e9%85%8d%e7%ac%a6%e5%a2%9e%e5%8a%a0-api-%e7%9a%84%e7%81%b5%e6%b4%bb%e6%80%a7use-bounded-wildcards-to-increase-api-flexibility" aria-label="Item-31ï¼šä½¿ç”¨æœ‰ç•Œé€šé…ç¬¦å¢åŠ  API çš„çµæ´»æ€§ï¼ˆUse bounded wildcards to increase API flexibilityï¼‰">Item-31ï¼šä½¿ç”¨æœ‰ç•Œé€šé…ç¬¦å¢åŠ  API çš„çµæ´»æ€§ï¼ˆUse bounded wildcards to increase API flexibilityï¼‰</a></li>
                <li>
                    <a href="#item-32%e5%90%8c%e6%97%b6%e4%bd%bf%e7%94%a8%e5%8f%af%e5%8f%98%e5%8f%82%e6%95%b0%e5%92%8c%e6%b3%9b%e5%9e%8b%e8%a6%81%e8%b0%a8%e6%85%8ecombine-generics-and-varargs-judiciously" aria-label="Item-32ï¼šåŒæ—¶ä½¿ç”¨å¯å˜å‚æ•°å’Œæ³›å‹è¦è°¨æ…ï¼ˆCombine generics and varargs judiciouslyï¼‰">Item-32ï¼šåŒæ—¶ä½¿ç”¨å¯å˜å‚æ•°å’Œæ³›å‹è¦è°¨æ…ï¼ˆCombine generics and varargs judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-33%e8%80%83%e8%99%91%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%e7%9a%84%e5%bc%82%e6%9e%84%e5%ae%b9%e5%99%a8consider-typesafe-heterogeneous-containers" aria-label="Item-33ï¼šè€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨ï¼ˆConsider typesafe heterogeneous containersï¼‰">Item-33ï¼šè€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨ï¼ˆConsider typesafe heterogeneous containersï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter06-%e6%9e%9a%e4%b8%be%e5%92%8c%e6%b3%a8%e8%a7%a3enums-and-annotations" aria-label="chapter06 æšä¸¾å’Œæ³¨è§£ï¼ˆEnums and Annotationsï¼‰">chapter06 æšä¸¾å’Œæ³¨è§£ï¼ˆEnums and Annotationsï¼‰</a><ul>
                        
                <li>
                    <a href="#item-34%e7%94%a8%e6%9e%9a%e4%b8%be%e7%b1%bb%e5%9e%8b%e4%bb%a3%e6%9b%bf-int-%e5%b8%b8%e9%87%8fuse-enums-instead-of-int-constants" aria-label="Item-34ï¼šç”¨æšä¸¾ç±»å‹ä»£æ›¿ int å¸¸é‡ï¼ˆUse enums instead of int constantsï¼‰">Item-34ï¼šç”¨æšä¸¾ç±»å‹ä»£æ›¿ int å¸¸é‡ï¼ˆUse enums instead of int constantsï¼‰</a></li>
                <li>
                    <a href="#item-35%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8b%e5%ad%97%e6%ae%b5%e6%9b%bf%e4%bb%a3%e5%ba%8f%e6%95%b0use-instance-fields-instead-of-ordinals" aria-label="Item-35ï¼šä½¿ç”¨å®ä¾‹å­—æ®µæ›¿ä»£åºæ•°ï¼ˆUse instance fields instead of ordinalsï¼‰">Item-35ï¼šä½¿ç”¨å®ä¾‹å­—æ®µæ›¿ä»£åºæ•°ï¼ˆUse instance fields instead of ordinalsï¼‰</a></li>
                <li>
                    <a href="#item-36%e7%94%a8-enumset-%e6%9b%bf%e4%bb%a3%e4%bd%8d%e5%ad%97%e6%ae%b5use-enumset-instead-of-bit-fields" aria-label="Item-36ï¼šç”¨ EnumSet æ›¿ä»£ä½å­—æ®µï¼ˆUse EnumSet instead of bit fieldsï¼‰">Item-36ï¼šç”¨ EnumSet æ›¿ä»£ä½å­—æ®µï¼ˆUse EnumSet instead of bit fieldsï¼‰</a></li>
                <li>
                    <a href="#item-37%e4%bd%bf%e7%94%a8-enummap-%e6%9b%bf%e6%8d%a2%e5%ba%8f%e6%95%b0%e7%b4%a2%e5%bc%95use-enummap-instead-of-ordinal-indexing" aria-label="Item-37ï¼šä½¿ç”¨ EnumMap æ›¿æ¢åºæ•°ç´¢å¼•ï¼ˆUse EnumMap instead of ordinal indexingï¼‰">Item-37ï¼šä½¿ç”¨ EnumMap æ›¿æ¢åºæ•°ç´¢å¼•ï¼ˆUse EnumMap instead of ordinal indexingï¼‰</a></li>
                <li>
                    <a href="#item-38%e4%bd%bf%e7%94%a8%e6%8e%a5%e5%8f%a3%e6%a8%a1%e6%8b%9f%e5%8f%af%e6%89%a9%e5%b1%95%e6%9e%9a%e4%b8%beemulate-extensible-enums-with-interfaces" aria-label="Item-38ï¼šä½¿ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•æšä¸¾ï¼ˆEmulate extensible enums with interfacesï¼‰">Item-38ï¼šä½¿ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•æšä¸¾ï¼ˆEmulate extensible enums with interfacesï¼‰</a></li>
                <li>
                    <a href="#item-39%e6%b3%a8%e8%a7%a3%e4%bc%98%e4%ba%8e%e5%91%bd%e5%90%8d%e6%a8%a1%e5%bc%8fprefer-annotations-to-naming-patterns" aria-label="Item-39ï¼šæ³¨è§£ä¼˜äºå‘½åæ¨¡å¼ï¼ˆPrefer annotations to naming patternsï¼‰">Item-39ï¼šæ³¨è§£ä¼˜äºå‘½åæ¨¡å¼ï¼ˆPrefer annotations to naming patternsï¼‰</a></li>
                <li>
                    <a href="#item-40%e5%9d%9a%e6%8c%81%e4%bd%bf%e7%94%a8-override-%e6%b3%a8%e8%a7%a3consistently-use-the-override-annotation" aria-label="Item-40ï¼šåšæŒä½¿ç”¨ @Override æ³¨è§£ï¼ˆConsistently use the Override annotationï¼‰">Item-40ï¼šåšæŒä½¿ç”¨ @Override æ³¨è§£ï¼ˆConsistently use the Override annotationï¼‰</a></li>
                <li>
                    <a href="#item-41%e4%bd%bf%e7%94%a8%e6%a0%87%e8%ae%b0%e6%8e%a5%e5%8f%a3%e5%ae%9a%e4%b9%89%e7%b1%bb%e5%9e%8buse-marker-interfaces-to-define-types" aria-label="Item-41ï¼šä½¿ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹ï¼ˆUse marker interfaces to define typesï¼‰">Item-41ï¼šä½¿ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹ï¼ˆUse marker interfaces to define typesï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter07-lambda-%e5%92%8c-stream" aria-label="chapter07 Lambda å’Œ Stream">chapter07 Lambda å’Œ Stream</a><ul>
                        
                <li>
                    <a href="#item-42lambda%e4%bc%98%e5%85%88%e4%ba%8e%e5%8c%bf%e5%90%8d%e7%b1%bbprefer-lambdas-to-anonymous-classes" aria-label="Item-42ï¼šlambdaä¼˜å…ˆäºåŒ¿åç±»ï¼ˆPrefer lambdas to anonymous classesï¼‰">Item-42ï¼šlambdaä¼˜å…ˆäºåŒ¿åç±»ï¼ˆPrefer lambdas to anonymous classesï¼‰</a></li>
                <li>
                    <a href="#item-43%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8%e4%bc%98%e5%85%88%e4%ba%8elambdaprefer-method-references-to-lambdas" aria-label="Item-43ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäºlambdaï¼ˆPrefer method references to lambdasï¼‰">Item-43ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäºlambdaï¼ˆPrefer method references to lambdasï¼‰</a></li>
                <li>
                    <a href="#item-44%e4%bc%98%e5%85%88%e4%bd%bf%e7%94%a8%e6%a0%87%e5%87%86%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3favor-the-use-of-standard-functional-interfaces" aria-label="Item-44ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†å‡½æ•°å¼æ¥å£ï¼ˆFavor the use of standard functional interfacesï¼‰">Item-44ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†å‡½æ•°å¼æ¥å£ï¼ˆFavor the use of standard functional interfacesï¼‰</a></li>
                <li>
                    <a href="#item-45%e8%b0%a8%e6%85%8e%e4%bd%bf%e7%94%a8streamuse-streams-judiciously" aria-label="Item-45ï¼šè°¨æ…ä½¿ç”¨streamï¼ˆUse streams judiciouslyï¼‰">Item-45ï¼šè°¨æ…ä½¿ç”¨streamï¼ˆUse streams judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-46%e4%bc%98%e5%85%88%e4%bd%bf%e7%94%a8stream%e4%b8%ad%e6%97%a0%e5%89%af%e4%bd%9c%e7%94%a8%e7%9a%84%e5%87%bd%e6%95%b0prefer-side-effect-free-functions-in-streams" aria-label="Item-46ï¼šä¼˜å…ˆä½¿ç”¨Streamä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼ˆPrefer side-effect-free functions in streamsï¼‰">Item-46ï¼šä¼˜å…ˆä½¿ç”¨Streamä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼ˆPrefer side-effect-free functions in streamsï¼‰</a></li>
                <li>
                    <a href="#item-47%e4%bc%98%e5%85%88%e9%80%89%e6%8b%a9-collection-%e8%80%8c%e4%b8%8d%e6%98%af%e6%b5%81%e4%bd%9c%e4%b8%ba%e8%bf%94%e5%9b%9e%e7%b1%bb%e5%9e%8bprefer-collection-to-stream-as-a-return-type" aria-label="Item-47ï¼šä¼˜å…ˆé€‰æ‹© Collection è€Œä¸æ˜¯æµä½œä¸ºè¿”å›ç±»å‹ï¼ˆPrefer Collection to Stream as a return typeï¼‰">Item-47ï¼šä¼˜å…ˆé€‰æ‹© Collection è€Œä¸æ˜¯æµä½œä¸ºè¿”å›ç±»å‹ï¼ˆPrefer Collection to Stream as a return typeï¼‰</a></li>
                <li>
                    <a href="#item-48%e8%b0%a8%e6%85%8e%e4%bd%bf%e7%94%a8stream%e5%b9%b6%e8%a1%8cuse-caution-when-making-streams-parallel" aria-label="Item-48ï¼šè°¨æ…ä½¿ç”¨streamå¹¶è¡Œï¼ˆUse caution when making streams parallelï¼‰">Item-48ï¼šè°¨æ…ä½¿ç”¨streamå¹¶è¡Œï¼ˆUse caution when making streams parallelï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter08-%e6%96%b9%e6%b3%95" aria-label="chapter08 æ–¹æ³•">chapter08 æ–¹æ³•</a><ul>
                        
                <li>
                    <a href="#item-49%e6%a3%80%e6%9f%a5%e5%8f%82%e6%95%b0%e7%9a%84%e6%9c%89%e6%95%88%e6%80%a7check-parameters-for-validity" aria-label="Item-49ï¼šæ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§ï¼ˆCheck parameters for validityï¼‰">Item-49ï¼šæ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§ï¼ˆCheck parameters for validityï¼‰</a></li>
                <li>
                    <a href="#item-50%e5%bf%85%e8%a6%81%e6%97%b6%e8%bf%9b%e8%a1%8c%e4%bf%9d%e6%8a%a4%e6%80%a7%e6%8b%b7%e8%b4%9dmake-defensive-copies-when-needed" aria-label="Item-50ï¼šå¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼ˆMake defensive copies when neededï¼‰">Item-50ï¼šå¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼ˆMake defensive copies when neededï¼‰</a></li>
                <li>
                    <a href="#item-51%e8%b0%a8%e6%85%8e%e8%ae%be%e8%ae%a1%e6%96%b9%e6%b3%95%e7%ad%be%e5%90%8ddesign-method-signatures-carefully" aria-label="Item-51ï¼šè°¨æ…è®¾è®¡æ–¹æ³•ç­¾åï¼ˆDesign method signatures carefullyï¼‰">Item-51ï¼šè°¨æ…è®¾è®¡æ–¹æ³•ç­¾åï¼ˆDesign method signatures carefullyï¼‰</a></li>
                <li>
                    <a href="#item-52%e6%85%8e%e7%94%a8%e9%87%8d%e8%bd%bduse-overloading-judiciously" aria-label="Item-52ï¼šæ…ç”¨é‡è½½ï¼ˆUse overloading judiciouslyï¼‰">Item-52ï¼šæ…ç”¨é‡è½½ï¼ˆUse overloading judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-53%e6%85%8e%e7%94%a8%e5%8f%af%e5%8f%98%e5%8f%82%e6%95%b0use-varargs-judiciously" aria-label="Item-53ï¼šæ…ç”¨å¯å˜å‚æ•°ï¼ˆUse varargs judiciouslyï¼‰">Item-53ï¼šæ…ç”¨å¯å˜å‚æ•°ï¼ˆUse varargs judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-54%e8%bf%94%e5%9b%9e%e7%a9%ba%e9%9b%86%e5%90%88%e6%88%96%e6%95%b0%e7%bb%84%e8%80%8c%e4%b8%8d%e6%98%af-nullreturn-empty-collections-or-arrays-not-nulls" aria-label="Item-54ï¼šè¿”å›ç©ºé›†åˆæˆ–æ•°ç»„ï¼Œè€Œä¸æ˜¯ nullï¼ˆReturn empty collections or arrays, not nullsï¼‰">Item-54ï¼šè¿”å›ç©ºé›†åˆæˆ–æ•°ç»„ï¼Œè€Œä¸æ˜¯ nullï¼ˆReturn empty collections or arrays, not nullsï¼‰</a></li>
                <li>
                    <a href="#item-55%e8%b0%a8%e6%85%8e%e8%bf%94%e5%9b%9eoptinalreturn-optionals-judiciously" aria-label="Item-55ï¼šè°¨æ…è¿”å›optinalï¼ˆReturn optionals judiciouslyï¼‰">Item-55ï¼šè°¨æ…è¿”å›optinalï¼ˆReturn optionals judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-56%e4%b8%ba%e6%89%80%e6%9c%89%e5%85%ac%e5%bc%80%e7%9a%84-api-%e5%85%83%e7%b4%a0%e7%bc%96%e5%86%99%e6%96%87%e6%a1%a3%e6%b3%a8%e9%87%8awrite-doc-comments-for-all-exposed-api-elements" aria-label="Item-56ï¼šä¸ºæ‰€æœ‰å…¬å¼€çš„ API å…ƒç´ ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼ˆWrite doc comments for all exposed API elementsï¼‰">Item-56ï¼šä¸ºæ‰€æœ‰å…¬å¼€çš„ API å…ƒç´ ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼ˆWrite doc comments for all exposed API elementsï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter09-%e9%80%9a%e7%94%a8%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1general-programming" aria-label="chapter09 é€šç”¨ç¨‹åºè®¾è®¡ï¼ˆGeneral Programmingï¼‰">chapter09 é€šç”¨ç¨‹åºè®¾è®¡ï¼ˆGeneral Programmingï¼‰</a><ul>
                        
                <li>
                    <a href="#item-57%e5%b0%86%e5%b1%80%e9%83%a8%e5%8f%98%e9%87%8f%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f%e6%9c%80%e5%b0%8f%e5%8c%96minimize-the-scope-of-local-variables" aria-label="Item-57ï¼šå°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–ï¼ˆMinimize the scope of local variablesï¼‰">Item-57ï¼šå°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–ï¼ˆMinimize the scope of local variablesï¼‰</a></li>
                <li>
                    <a href="#item-58for-each-%e5%be%aa%e7%8e%af%e4%bc%98%e4%ba%8e%e4%bc%a0%e7%bb%9f%e7%9a%84-for-%e5%be%aa%e7%8e%afprefer-for-each-loops-to-traditional-for-loops" aria-label="Item-58ï¼šfor-each å¾ªç¯ä¼˜äºä¼ ç»Ÿçš„ for å¾ªç¯ï¼ˆPrefer for-each loops to traditional for loopsï¼‰">Item-58ï¼šfor-each å¾ªç¯ä¼˜äºä¼ ç»Ÿçš„ for å¾ªç¯ï¼ˆPrefer for-each loops to traditional for loopsï¼‰</a></li>
                <li>
                    <a href="#item-59%e4%ba%86%e8%a7%a3%e5%92%8c%e4%bd%bf%e7%94%a8%e7%b1%bb%e5%ba%93know-and-use-the-libraries" aria-label="Item-59ï¼šäº†è§£å’Œä½¿ç”¨ç±»åº“ï¼ˆKnow and use the librariesï¼‰">Item-59ï¼šäº†è§£å’Œä½¿ç”¨ç±»åº“ï¼ˆKnow and use the librariesï¼‰</a></li>
                <li>
                    <a href="#item-60%e8%8b%a5%e9%9c%80%e8%a6%81%e7%b2%be%e7%a1%ae%e7%ad%94%e6%a1%88%e5%b0%b1%e5%ba%94%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8-float-%e5%92%8c-double-%e7%b1%bb%e5%9e%8bavoid-float-and-double-if-exact-answers-are-required" aria-label="Item-60ï¼šè‹¥éœ€è¦ç²¾ç¡®ç­”æ¡ˆå°±åº”é¿å…ä½¿ç”¨ float å’Œ double ç±»å‹ï¼ˆAvoid float and double if exact answers are requiredï¼‰">Item-60ï¼šè‹¥éœ€è¦ç²¾ç¡®ç­”æ¡ˆå°±åº”é¿å…ä½¿ç”¨ float å’Œ double ç±»å‹ï¼ˆAvoid float and double if exact answers are requiredï¼‰</a></li>
                <li>
                    <a href="#item-61%e5%9f%ba%e6%9c%ac%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e4%bc%98%e4%ba%8e%e5%8c%85%e8%a3%85%e7%b1%bbprefer-primitive-types-to-boxed-primitives" aria-label="Item-61ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä¼˜äºåŒ…è£…ç±»ï¼ˆPrefer primitive types to boxed primitivesï¼‰">Item-61ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä¼˜äºåŒ…è£…ç±»ï¼ˆPrefer primitive types to boxed primitivesï¼‰</a></li>
                <li>
                    <a href="#item-62%e5%85%b6%e4%bb%96%e7%b1%bb%e5%9e%8b%e6%9b%b4%e5%90%88%e9%80%82%e6%97%b6%e5%ba%94%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8%e5%ad%97%e7%ac%a6%e4%b8%b2avoid-strings-where-other-types-are-more-appropriate" aria-label="Item-62ï¼šå…¶ä»–ç±»å‹æ›´åˆé€‚æ—¶åº”é¿å…ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆAvoid strings where other types are more appropriateï¼‰">Item-62ï¼šå…¶ä»–ç±»å‹æ›´åˆé€‚æ—¶åº”é¿å…ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆAvoid strings where other types are more appropriateï¼‰</a></li>
                <li>
                    <a href="#item-63%e5%bd%93%e5%bf%83%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bf%9e%e6%8e%a5%e5%bc%95%e8%b5%b7%e7%9a%84%e6%80%a7%e8%83%bd%e9%97%ae%e9%a2%98beware-the-performance-of-string-concatenation" aria-label="Item-63ï¼šå½“å¿ƒå­—ç¬¦ä¸²è¿æ¥å¼•èµ·çš„æ€§èƒ½é—®é¢˜ï¼ˆBeware the performance of string concatenationï¼‰">Item-63ï¼šå½“å¿ƒå­—ç¬¦ä¸²è¿æ¥å¼•èµ·çš„æ€§èƒ½é—®é¢˜ï¼ˆBeware the performance of string concatenationï¼‰</a></li>
                <li>
                    <a href="#item-64%e9%80%9a%e8%bf%87%e6%8e%a5%e5%8f%a3%e5%bc%95%e7%94%a8%e5%af%b9%e8%b1%a1refer-to-objects-by-their-interfaces" aria-label="Item-64ï¼šé€šè¿‡æ¥å£å¼•ç”¨å¯¹è±¡ï¼ˆRefer to objects by their interfacesï¼‰">Item-64ï¼šé€šè¿‡æ¥å£å¼•ç”¨å¯¹è±¡ï¼ˆRefer to objects by their interfacesï¼‰</a></li>
                <li>
                    <a href="#item-65%e6%8e%a5%e5%8f%a3%e4%bc%98%e4%ba%8e%e5%8f%8d%e5%b0%84prefer-interfaces-to-reflection" aria-label="Item-65ï¼šæ¥å£ä¼˜äºåå°„ï¼ˆPrefer interfaces to reflectionï¼‰">Item-65ï¼šæ¥å£ä¼˜äºåå°„ï¼ˆPrefer interfaces to reflectionï¼‰</a></li>
                <li>
                    <a href="#item-66%e8%b0%a8%e6%85%8e%e7%9a%84%e4%bd%bf%e7%94%a8%e6%9c%ac%e5%9c%b0%e6%96%b9%e6%b3%95use-native-methods-judiciously" aria-label="Item-66ï¼šè°¨æ…çš„ä½¿ç”¨æœ¬åœ°æ–¹æ³•ï¼ˆUse native methods judiciouslyï¼‰">Item-66ï¼šè°¨æ…çš„ä½¿ç”¨æœ¬åœ°æ–¹æ³•ï¼ˆUse native methods judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-67%e8%b0%a8%e6%85%8e%e7%9a%84%e8%bf%9b%e8%a1%8c%e4%bc%98%e5%8c%96optimize-judiciously" aria-label="Item-67ï¼šè°¨æ…çš„è¿›è¡Œä¼˜åŒ–ï¼ˆOptimize judiciouslyï¼‰">Item-67ï¼šè°¨æ…çš„è¿›è¡Œä¼˜åŒ–ï¼ˆOptimize judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-68%e9%81%b5%e5%ae%88%e8%a2%ab%e5%b9%bf%e6%b3%9b%e8%ae%a4%e5%8f%af%e7%9a%84%e5%91%bd%e5%90%8d%e7%ba%a6%e5%ae%9aadhere-to-generally-accepted-naming-conventions" aria-label="Item-68ï¼šéµå®ˆè¢«å¹¿æ³›è®¤å¯çš„å‘½åçº¦å®šï¼ˆAdhere to generally accepted naming conventionsï¼‰">Item-68ï¼šéµå®ˆè¢«å¹¿æ³›è®¤å¯çš„å‘½åçº¦å®šï¼ˆAdhere to generally accepted naming conventionsï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter-10-%e5%bc%82%e5%b8%b8" aria-label="chapter-10 å¼‚å¸¸">chapter-10 å¼‚å¸¸</a><ul>
                        
                <li>
                    <a href="#item-69%e5%8f%aa%e5%9c%a8%e7%a1%ae%e8%ae%a4%e6%9c%89%e5%bc%82%e5%b8%b8%e7%9a%84%e6%83%85%e5%86%b5%e4%b8%8b%e6%89%8d%e4%bd%bf%e7%94%a8%e5%bc%82%e5%b8%b8use-exceptions-only-for-exceptional-conditions" aria-label="Item-69ï¼šåªåœ¨ç¡®è®¤æœ‰å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å¼‚å¸¸ï¼ˆUse exceptions only for exceptional conditionsï¼‰">Item-69ï¼šåªåœ¨ç¡®è®¤æœ‰å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å¼‚å¸¸ï¼ˆUse exceptions only for exceptional conditionsï¼‰</a></li>
                <li>
                    <a href="#item-70%e5%af%b9%e5%8f%af%e6%81%a2%e5%a4%8d%e6%83%85%e5%86%b5%e4%bd%bf%e7%94%a8-checked-%e5%bc%82%e5%b8%b8%e5%af%b9%e7%bc%96%e7%a8%8b%e9%94%99%e8%af%af%e4%bd%bf%e7%94%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e5%bc%82%e5%b8%b8use-checked-exceptions-for-recoverable-conditions-and-runtime-exceptions-for-programming-errors" aria-label="Item-70ï¼šå¯¹å¯æ¢å¤æƒ…å†µä½¿ç”¨ checked å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUse checked exceptions for recoverable conditions and runtime exceptions for programming errorsï¼‰">Item-70ï¼šå¯¹å¯æ¢å¤æƒ…å†µä½¿ç”¨ checked å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUse checked exceptions for recoverable conditions and runtime exceptions for programming errorsï¼‰</a></li>
                <li>
                    <a href="#item-71%e9%81%bf%e5%85%8d%e4%b8%8d%e5%bf%85%e8%a6%81%e5%9c%b0%e4%bd%bf%e7%94%a8-checked-%e5%bc%82%e5%b8%b8avoid-unnecessary-use-of-checked-exceptions" aria-label="Item-71ï¼šé¿å…ä¸å¿…è¦åœ°ä½¿ç”¨ checked å¼‚å¸¸ï¼ˆAvoid unnecessary use of checked exceptionsï¼‰">Item-71ï¼šé¿å…ä¸å¿…è¦åœ°ä½¿ç”¨ checked å¼‚å¸¸ï¼ˆAvoid unnecessary use of checked exceptionsï¼‰</a></li>
                <li>
                    <a href="#item-72%e4%bc%98%e5%85%88%e4%bd%bf%e7%94%a8%e6%a0%87%e5%87%86%e7%9a%84%e5%bc%82%e5%b8%b8favor-the-use-of-standard-exceptions" aria-label="Item-72ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸ï¼ˆFavor the use of standard exceptionsï¼‰">Item-72ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸ï¼ˆFavor the use of standard exceptionsï¼‰</a></li>
                <li>
                    <a href="#item-73%e6%8a%9b%e5%87%ba%e8%83%bd%e7%94%a8%e6%8a%bd%e8%b1%a1%e8%a7%a3%e9%87%8a%e7%9a%84%e5%bc%82%e5%b8%b8throw-exceptions-appropriate-to-the-abstraction" aria-label="Item-73ï¼šæŠ›å‡ºèƒ½ç”¨æŠ½è±¡è§£é‡Šçš„å¼‚å¸¸ï¼ˆThrow exceptions appropriate to the abstractionï¼‰">Item-73ï¼šæŠ›å‡ºèƒ½ç”¨æŠ½è±¡è§£é‡Šçš„å¼‚å¸¸ï¼ˆThrow exceptions appropriate to the abstractionï¼‰</a></li>
                <li>
                    <a href="#item-74%e6%af%8f%e4%b8%aa%e6%96%b9%e6%b3%95%e6%8a%9b%e5%87%ba%e7%9a%84%e5%bc%82%e5%b8%b8%e9%83%bd%e8%a6%81%e5%bb%ba%e7%ab%8b%e6%96%87%e6%a1%a3document-all-exceptions-thrown-by-each-method" aria-label="Item-74ï¼šæ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦å»ºç«‹æ–‡æ¡£ï¼ˆDocument all exceptions thrown by each methodï¼‰">Item-74ï¼šæ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦å»ºç«‹æ–‡æ¡£ï¼ˆDocument all exceptions thrown by each methodï¼‰</a></li>
                <li>
                    <a href="#item-75%e5%bc%82%e5%b8%b8%e8%af%a6%e7%bb%86%e6%b6%88%e6%81%af%e4%b8%ad%e5%ba%94%e5%8c%85%e5%90%ab%e6%8d%95%e8%8e%b7%e5%a4%b1%e8%b4%a5%e7%9a%84%e4%bf%a1%e6%81%afinclude-failure-capture-information-in-detail-messages" aria-label="Item-75ï¼šå¼‚å¸¸è¯¦ç»†æ¶ˆæ¯ä¸­åº”åŒ…å«æ•è·å¤±è´¥çš„ä¿¡æ¯ï¼ˆInclude failure capture information in detail messagesï¼‰">Item-75ï¼šå¼‚å¸¸è¯¦ç»†æ¶ˆæ¯ä¸­åº”åŒ…å«æ•è·å¤±è´¥çš„ä¿¡æ¯ï¼ˆInclude failure capture information in detail messagesï¼‰</a></li>
                <li>
                    <a href="#item-76%e8%ae%a9%e5%a4%b1%e8%b4%a5%e4%bf%9d%e6%8c%81%e5%8e%9f%e5%ad%90%e6%80%a7strive-for-failure-atomicity" aria-label="Item-76ï¼šè®©å¤±è´¥ä¿æŒåŸå­æ€§ï¼ˆStrive for failure atomicityï¼‰">Item-76ï¼šè®©å¤±è´¥ä¿æŒåŸå­æ€§ï¼ˆStrive for failure atomicityï¼‰</a></li>
                <li>
                    <a href="#item-77%e4%b8%8d%e8%a6%81%e5%bf%bd%e7%95%a5%e5%bc%82%e5%b8%b8dont-ignore-exceptions" aria-label="Item-77ï¼šä¸è¦å¿½ç•¥å¼‚å¸¸ï¼ˆDonâ€™t ignore exceptionsï¼‰">Item-77ï¼šä¸è¦å¿½ç•¥å¼‚å¸¸ï¼ˆDonâ€™t ignore exceptionsï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#chapter-11-%e5%b9%b6%e5%8f%91concurrency" aria-label="chapter-11 å¹¶å‘ï¼ˆConcurrencyï¼‰">chapter-11 å¹¶å‘ï¼ˆConcurrencyï¼‰</a><ul>
                        
                <li>
                    <a href="#item-78%e5%90%8c%e6%ad%a5%e8%ae%bf%e9%97%ae%e5%85%b1%e4%ba%ab%e7%9a%84%e5%8f%af%e5%8f%98%e6%95%b0%e6%8d%aesynchronize-access-to-shared-mutable-data" aria-label="Item-78ï¼šåŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®ï¼ˆSynchronize access to shared mutable dataï¼‰">Item-78ï¼šåŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®ï¼ˆSynchronize access to shared mutable dataï¼‰</a></li>
                <li>
                    <a href="#item-79%e9%81%bf%e5%85%8d%e8%bf%87%e5%ba%a6%e5%90%8c%e6%ad%a5avoid-excessive-synchronization" aria-label="Item-79ï¼šé¿å…è¿‡åº¦åŒæ­¥ï¼ˆAvoid excessive synchronizationï¼‰">Item-79ï¼šé¿å…è¿‡åº¦åŒæ­¥ï¼ˆAvoid excessive synchronizationï¼‰</a></li>
                <li>
                    <a href="#item-80executortaskstreams%e4%bc%98%e4%ba%8e%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%e7%ba%bf%e7%a8%8bprefer-executors-tasks-and-streams-to-threads" aria-label="Item-80ï¼šExecutorã€taskã€streamsä¼˜äºç›´æ¥ä½¿ç”¨çº¿ç¨‹ï¼ˆPrefer executors, tasks, and streams to threadsï¼‰">Item-80ï¼šExecutorã€taskã€streamsä¼˜äºç›´æ¥ä½¿ç”¨çº¿ç¨‹ï¼ˆPrefer executors, tasks, and streams to threadsï¼‰</a></li>
                <li>
                    <a href="#item-81%e5%b9%b6%e5%8f%91%e5%ae%9e%e7%94%a8%e5%b7%a5%e5%85%b7%e4%bc%98%e4%ba%8e-wait-%e5%92%8c-notifyprefer-concurrency-utilities-to-wait-and-notify" aria-label="Item-81ï¼šå¹¶å‘å®ç”¨å·¥å…·ä¼˜äº wait å’Œ notifyï¼ˆPrefer concurrency utilities to wait and notifyï¼‰">Item-81ï¼šå¹¶å‘å®ç”¨å·¥å…·ä¼˜äº wait å’Œ notifyï¼ˆPrefer concurrency utilities to wait and notifyï¼‰</a></li>
                <li>
                    <a href="#item-82%e6%96%87%e6%a1%a3%e5%ba%94%e5%8c%85%e5%90%ab%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8%e5%86%85%e5%ae%b9document-thread-safety" aria-label="Item-82ï¼šæ–‡æ¡£åº”åŒ…å«çº¿ç¨‹å®‰å…¨å†…å®¹ï¼ˆDocument thread safetyï¼‰">Item-82ï¼šæ–‡æ¡£åº”åŒ…å«çº¿ç¨‹å®‰å…¨å†…å®¹ï¼ˆDocument thread safetyï¼‰</a></li>
                <li>
                    <a href="#item-83%e8%b0%a8%e6%85%8e%e5%9c%b0%e4%bd%bf%e7%94%a8%e5%bb%b6%e8%bf%9f%e5%88%9d%e5%a7%8b%e5%8c%96use-lazy-initialization-judiciously" aria-label="Item-83ï¼šè°¨æ…åœ°ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆUse lazy initialization judiciouslyï¼‰">Item-83ï¼šè°¨æ…åœ°ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆUse lazy initialization judiciouslyï¼‰</a></li>
                <li>
                    <a href="#item-84%e4%b8%8d%e8%a6%81%e4%be%9d%e8%b5%96%e7%ba%bf%e7%a8%8b%e8%b0%83%e5%ba%a6%e5%99%a8dont-depend-on-the-thread-scheduler" aria-label="Item-84ï¼šä¸è¦ä¾èµ–çº¿ç¨‹è°ƒåº¦å™¨ï¼ˆDonâ€™t depend on the thread schedulerï¼‰">Item-84ï¼šä¸è¦ä¾èµ–çº¿ç¨‹è°ƒåº¦å™¨ï¼ˆDonâ€™t depend on the thread schedulerï¼‰</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ba%8f%e5%88%97%e5%8c%96serialization" aria-label="åºåˆ—åŒ–ï¼ˆSerializationï¼‰">åºåˆ—åŒ–ï¼ˆSerializationï¼‰</a><ul>
                        
                <li>
                    <a href="#item-85java-%e5%ba%8f%e5%88%97%e5%8c%96%e7%9a%84%e6%9b%bf%e4%bb%a3%e6%96%b9%e6%a1%88prefer-alternatives-to-java-serialization" aria-label="Item-85ï¼šJava åºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆPrefer alternatives to Java serializationï¼‰">Item-85ï¼šJava åºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆPrefer alternatives to Java serializationï¼‰</a></li>
                <li>
                    <a href="#item-86%e8%b0%a8%e6%85%8e%e5%9c%b0%e5%ae%9e%e7%8e%b0-serializable%e6%8e%a5%e5%8f%a3implement-serializable-with-great-caution" aria-label="Item-86ï¼šè°¨æ…åœ°å®ç° Serializableæ¥å£ï¼ˆImplement Serializable with great cautionï¼‰">Item-86ï¼šè°¨æ…åœ°å®ç° Serializableæ¥å£ï¼ˆImplement Serializable with great cautionï¼‰</a></li>
                <li>
                    <a href="#item-87%e8%80%83%e8%99%91%e4%bd%bf%e7%94%a8%e8%87%aa%e5%ae%9a%e4%b9%89%e5%ba%8f%e5%88%97%e5%8c%96%e5%bd%a2%e5%bc%8fconsider-using-a-custom-serialized-form" aria-label="Item-87ï¼šè€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å½¢å¼ï¼ˆConsider using a custom serialized formï¼‰">Item-87ï¼šè€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å½¢å¼ï¼ˆConsider using a custom serialized formï¼‰</a></li>
                <li>
                    <a href="#item-88%e9%98%b2%e5%be%a1%e6%80%a7%e5%9c%b0%e7%bc%96%e5%86%99-readobject-%e6%96%b9%e6%b3%95write-readobject-methods-defensively" aria-label="Item-88ï¼šé˜²å¾¡æ€§åœ°ç¼–å†™ readObject æ–¹æ³•ï¼ˆWrite readObject methods defensivelyï¼‰">Item-88ï¼šé˜²å¾¡æ€§åœ°ç¼–å†™ readObject æ–¹æ³•ï¼ˆWrite readObject methods defensivelyï¼‰</a></li>
                <li>
                    <a href="#item-89%e5%af%b9%e4%ba%8e%e5%ae%9e%e4%be%8b%e6%8e%a7%e5%88%b6%e6%9e%9a%e4%b8%be%e7%b1%bb%e5%9e%8b%e4%bc%98%e4%ba%8e-readresolvefor-instance-control-prefer-enum-types-to-readresolve" aria-label="Item-89ï¼šå¯¹äºå®ä¾‹æ§åˆ¶ï¼Œæšä¸¾ç±»å‹ä¼˜äº readResolveï¼ˆFor instance control, prefer enum types to readResolveï¼‰">Item-89ï¼šå¯¹äºå®ä¾‹æ§åˆ¶ï¼Œæšä¸¾ç±»å‹ä¼˜äº readResolveï¼ˆFor instance control, prefer enum types to readResolveï¼‰</a></li>
                <li>
                    <a href="#item-90%e8%80%83%e8%99%91%e4%bb%a5%e5%ba%8f%e5%88%97%e5%8c%96%e4%bb%a3%e7%90%86%e4%bb%a3%e6%9b%bf%e5%ba%8f%e5%88%97%e5%8c%96%e5%ae%9e%e4%be%8bconsider-serialization-proxies-instead-of-serialized-instances" aria-label="Item-90ï¼šè€ƒè™‘ä»¥åºåˆ—åŒ–ä»£ç†ä»£æ›¿åºåˆ—åŒ–å®ä¾‹ï¼ˆConsider serialization proxies instead of serialized instancesï¼‰">Item-90ï¼šè€ƒè™‘ä»¥åºåˆ—åŒ–ä»£ç†ä»£æ›¿åºåˆ—åŒ–å®ä¾‹ï¼ˆConsider serialization proxies instead of serialized instancesï¼‰</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="chapter_02-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡">chapter_02 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#chapter_02-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡">#</a></h1>
<p><strong>Creating and Destroying Objects</strong></p>
<p>æœ¬ç« æ¶‰åŠåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼šä½•æ—¶ä»¥åŠå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä½•æ—¶ä»¥åŠå¦‚ä½•é¿å…åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä½•ç¡®ä¿å®ƒä»¬è¢«åŠæ—¶é”€æ¯ï¼Œä»¥åŠå¦‚ä½•ç®¡ç†åœ¨é”€æ¯ä¹‹å‰å¿…é¡»æ‰§è¡Œçš„æ¸…ç†æ“ä½œã€‚</p>
<p>ä¸€äº›å‚è€ƒï¼ŒåŸæ–‡è¯»èµ·æ¥æœ‰äº›è´¹åŠ²
<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/tree/master">github</a>
<a href="https://github.com/mengdd/Effective-Java-Reading-Notes">github</a></p>
<h2 id="item-1ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°">Item-1ï¼šç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#item-1ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°">#</a></h2>
<p>åœ¨ Java ä¸­ï¼Œè·å¾—ä¸€ä¸ªç±»å®ä¾‹æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ new å…³é”®å­—ï¼Œå³é€šè¿‡æ„é€ å‡½æ•°æ¥å®ç°å¯¹è±¡çš„åˆ›å»ºã€‚å°±åƒè¿™æ ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Fragment fragment = <span style="color:#fff;font-weight:bold">new</span> MyFragment();
</span></span><span style="display:flex;"><span>Date date = <span style="color:#fff;font-weight:bold">new</span> Date();
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸è¿‡åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜ä¼šè§åˆ°å¦å¤–ä¸€ç§è·å–ç±»å®ä¾‹çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Fragment fragment = MyFragment.<span style="color:#007f7f">newIntance</span>();
</span></span><span style="display:flex;"><span>Calendar calendar = Calendar.<span style="color:#007f7f">getInstance</span>();
</span></span><span style="display:flex;"><span>Integer number = Integer.<span style="color:#007f7f">valueOf</span>(<span style="color:#0ff;font-weight:bold">&#34;3&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>åƒè¿™æ ·çš„ï¼šä¸é€šè¿‡ newï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªé™æ€æ–¹æ³•æ¥å¯¹å¤–æä¾›è‡ªèº«å®ä¾‹çš„æ–¹æ³•ï¼Œå³ä¸ºæˆ‘ä»¬æ‰€è¯´çš„é™æ€å·¥å‚æ–¹æ³•ã€‚è¦æ³¨æ„çš„æ˜¯é™æ€å·¥å‚æ–¹æ³•ä¸è®¾è®¡æ¨¡å¼ä¸­çš„å·¥å‚æ–¹æ³•æ¨¡å¼ä¸åŒã€‚é™æ€å·¥å‚æ–¹æ³•ä¸æ„é€ å‡½æ•°ç›¸æ¯”çš„ä¼˜ç‚¹å¦‚ä¸‹ã€‚</p>
<h3 id="é™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­—">é™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­—<a hidden class="anchor" aria-hidden="true" href="#é™æ€å·¥å‚æ–¹æ³•æœ‰å…·ä½“åå­—">#</a></h3>
<p>ç”±äºè¯­è¨€çš„ç‰¹æ€§ï¼ŒJava çš„æ„é€ å‡½æ•°éƒ½æ˜¯è·Ÿç±»åä¸€æ ·çš„ã€‚è¿™å¯¼è‡´çš„ä¸€ä¸ªé—®é¢˜æ˜¯æ„é€ å‡½æ•°çš„åç§°ä¸å¤Ÿçµæ´»ï¼Œç»å¸¸ä¸èƒ½å‡†ç¡®åœ°æè¿°è¿”å›å€¼ï¼Œåœ¨æœ‰å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°æ—¶å°¤ç”šï¼Œå¦‚æœå‚æ•°ç±»å‹ã€æ•°ç›®åˆæ¯”è¾ƒç›¸ä¼¼çš„è¯ï¼Œé‚£æ›´æ˜¯å¾ˆå®¹æ˜“å‡ºé”™ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Date date0 = <span style="color:#fff;font-weight:bold">new</span> Date();
</span></span><span style="display:flex;"><span>Date date1 = <span style="color:#fff;font-weight:bold">new</span> Date(<span style="color:#ff0;font-weight:bold">0</span>L);
</span></span><span style="display:flex;"><span>Date date2 = <span style="color:#fff;font-weight:bold">new</span> Date(<span style="color:#0ff;font-weight:bold">&#34;0&#34;</span>);
</span></span><span style="display:flex;"><span>Date date3 = <span style="color:#fff;font-weight:bold">new</span> Date(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>Date date4 = <span style="color:#fff;font-weight:bold">new</span> Date(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>Date date5 = <span style="color:#fff;font-weight:bold">new</span> Date(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#ff0;font-weight:bold">1</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>Date ç±»æœ‰å¾ˆå¤šé‡è½½å‡½æ•°ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå‡å¦‚ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰çš„è¯ï¼Œææ€•æ˜¯éœ€è¦çŠ¹è±«ä¸€ä¸‹ï¼Œæ‰èƒ½æ‰¾åˆ°åˆé€‚çš„æ„é€ å‡½æ•°çš„ã€‚è€Œå¯¹äºå…¶ä»–çš„ä»£ç é˜…è¯»è€…æ¥è¯´ï¼Œä¼°è®¡æ›´æ˜¯éœ€è¦æŸ¥çœ‹æ–‡æ¡£ï¼Œæ‰èƒ½æ˜ç™½æ¯ä¸ªå‚æ•°çš„å«ä¹‰äº†ã€‚
Date ç±»åœ¨ç›®å‰çš„ Java ç‰ˆæœ¬ä¸­ï¼Œåªä¿ç•™äº†ä¸€ä¸ªæ— å‚å’Œä¸€ä¸ªæœ‰å‚çš„æ„é€ å‡½æ•°ï¼Œå…¶ä»–çš„éƒ½å·²ç»æ ‡è®°ä¸º @Deprecated äº†ã€‚
è€Œå¦‚æœä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ï¼Œå°±å¯ä»¥ç»™æ–¹æ³•èµ·æ›´å¤šæœ‰æ„ä¹‰çš„åå­—ï¼Œæ¯”å¦‚å‰é¢çš„ <code>valueOfã€newInstanceã€getInstance</code> ç­‰ï¼Œå¯¹äºä»£ç çš„ç¼–å†™å’Œé˜…è¯»éƒ½èƒ½å¤Ÿæ›´æ¸…æ™°ã€‚</p>
<h3 id="é™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡">é™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡ã€‚<a hidden class="anchor" aria-hidden="true" href="#é™æ€å·¥å‚æ–¹æ³•ä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºæ–°å¯¹è±¡">#</a></h3>
<p>è¿™å…è®¸ä¸å¯å˜ç±»ä½¿ç”¨é¢„å…ˆæ„é€ çš„å®ä¾‹ï¼Œæˆ–åœ¨æ„é€ å®ä¾‹æ—¶ç¼“å­˜å®ä¾‹ï¼Œå¹¶é‡å¤åˆ†é…å®ƒä»¬ä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„é‡å¤å¯¹è±¡ã€‚<code>Boolean.valueOf(boolean)</code> æ–¹æ³•è¯´æ˜äº†è¿™ç§æŠ€æœ¯ï¼šå®ƒä»ä¸åˆ›å»ºå¯¹è±¡ã€‚è¿™ç§æŠ€æœ¯ç±»ä¼¼äºäº«å…ƒæ¨¡å¼ã€‚å¦‚æœç»å¸¸è¯·æ±‚ç›¸åŒçš„å¯¹è±¡ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ›å»ºå¯¹è±¡çš„ä»£ä»·å¾ˆé«˜æ—¶ï¼Œå®ƒå¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½ã€‚
æœ‰æ—¶å€™å¤–éƒ¨è°ƒç”¨è€…åªéœ€è¦æ‹¿åˆ°ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸å…³å¿ƒæ˜¯å¦æ˜¯æ–°çš„å®ä¾‹ï¼›åˆæˆ–è€…æˆ‘ä»¬æƒ³å¯¹å¤–æä¾›ä¸€ä¸ªå•ä¾‹æ—¶ï¼Œå¦‚æœä½¿ç”¨å·¥å‚æ–¹æ³•ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å†…éƒ¨æ§åˆ¶ï¼Œé˜²æ­¢åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œå‡å°‘å¼€é”€ã€‚åœ¨å®é™…çš„åœºæ™¯ä¸­ï¼Œå•ä¾‹çš„å†™æ³•ä¹Ÿå¤§éƒ½æ˜¯ç”¨é™æ€å·¥å‚æ–¹æ³•æ¥å®ç°çš„ã€‚</p>
<h3 id="å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡">å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡ã€‚<a hidden class="anchor" aria-hidden="true" href="#å¯ä»¥é€šè¿‡é™æ€å·¥å‚æ–¹æ³•è·å–è¿”å›ç±»å‹çš„ä»»ä½•å­ç±»çš„å¯¹è±¡">#</a></h3>
<p>è¿™æ¡ä¸ç”¨å¤šè¯´ï¼Œè®¾è®¡æ¨¡å¼ä¸­çš„åŸºæœ¬çš„åŸåˆ™ä¹‹ä¸€ï¼šã€é‡Œæ°æ›¿æ¢ã€åŸåˆ™ï¼Œå°±æ˜¯è¯´å­ç±»åº”è¯¥èƒ½æ›¿æ¢çˆ¶ç±»ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•åªèƒ½è¿”å›ç¡®åˆ‡çš„è‡ªèº«ç±»å‹ï¼Œè€Œé™æ€å·¥å‚æ–¹æ³•åˆ™èƒ½å¤Ÿæ›´åŠ çµæ´»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ–¹ä¾¿åœ°è¿”å›ä»»ä½•å®ƒçš„å­ç±»å‹çš„å®ä¾‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Class Person {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Person getInstance(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Person();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿™é‡Œå¯ä»¥æ”¹ä¸º return new Player() / Cooker()
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>Class Player <span style="color:#fff;font-weight:bold">extends</span> Person{
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>Class Cooker <span style="color:#fff;font-weight:bold">extends</span> Person{
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯”å¦‚ä¸Šé¢è¿™æ®µä»£ç ï¼ŒPerson ç±»çš„é™æ€å·¥å‚æ–¹æ³•å¯ä»¥è¿”å› Person çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è¿”å›å®ƒçš„å­ç±»Player æˆ–è€… Cookerã€‚ï¼ˆå½“ç„¶ï¼Œè¿™åªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªç±»æ˜¯ä¸åº”è¯¥ä¾èµ–äºå®ƒçš„å­ç±»çš„ã€‚ä½†å¦‚æœè¿™é‡Œçš„ <code>getInstance () </code>æ–¹æ³•ä½äºå…¶ä»–çš„ç±»ä¸­ï¼Œå°±æ›´å…·æœ‰çš„å®é™…æ“ä½œæ„ä¹‰äº†ï¼‰</p>
<h3 id="å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³•">å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ç›¸åŒä½†åç§°ä¸åŒçš„å·¥å‚æ–¹æ³•">#</a></h3>
<p>æ„é€ å‡½æ•°è™½ç„¶ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªï¼Œä½†æ˜¯ç”±äºå‡½æ•°åå·²ç»è¢«å›ºå®šï¼Œæ‰€ä»¥å°±è¦æ±‚å‚æ•°å¿…é¡»æœ‰å·®å¼‚æ—¶ï¼ˆç±»å‹ã€æ•°é‡æˆ–è€…é¡ºåºï¼‰æ‰èƒ½å¤Ÿé‡è½½äº†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Child{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> age = <span style="color:#ff0;font-weight:bold">10</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> weight = <span style="color:#ff0;font-weight:bold">30</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Child(<span style="color:#fff;font-weight:bold">int</span> age, <span style="color:#fff;font-weight:bold">int</span> weight) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Child(<span style="color:#fff;font-weight:bold">int</span> age) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Child ç±»æœ‰ age å’Œ weight ä¸¤ä¸ªå±æ€§ï¼Œå¦‚ä»£ç æ‰€ç¤ºï¼Œå®ƒå·²ç»æœ‰äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼š<code>Child(int age, int weight) å’Œ Child(int age)</code>ï¼Œè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬æƒ³å†æ·»åŠ ä¸€ä¸ªæŒ‡å®š wegiht ä½†ä¸å…³å¿ƒ age çš„æ„é€ å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯è¿™æ ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Child(<span style="color:#fff;font-weight:bold">int</span> weight) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†è¦æŠŠè¿™ä¸ªæ„é€ å‡½æ•°æ·»åŠ åˆ° Child ç±»ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º java çš„å‡½æ•°ç­¾åæ˜¯å¿½ç•¥å‚æ•°åç§°çš„ï¼Œæ‰€ä»¥ Child(int age) è·Ÿ Child(int weight) ä¼šå†²çªã€‚è¿™æ—¶å€™ï¼Œé™æ€å·¥å‚æ–¹æ³•å°±å¯ä»¥ç™»åœºäº†ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Child{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> age = <span style="color:#ff0;font-weight:bold">10</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> weight = <span style="color:#ff0;font-weight:bold">30</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Child newChild(<span style="color:#fff;font-weight:bold">int</span> age, <span style="color:#fff;font-weight:bold">int</span> weight) {
</span></span><span style="display:flex;"><span>        Child child = <span style="color:#fff;font-weight:bold">new</span> Child();
</span></span><span style="display:flex;"><span>        child.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>        child.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> child;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Child newChildWithWeight(<span style="color:#fff;font-weight:bold">int</span> weight) {
</span></span><span style="display:flex;"><span>        Child child = <span style="color:#fff;font-weight:bold">new</span> Child();
</span></span><span style="display:flex;"><span>        child.<span style="color:#007f7f">weight</span> = weight;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> child;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Child newChildWithAge(<span style="color:#fff;font-weight:bold">int</span> age) {
</span></span><span style="display:flex;"><span>        Child child = <span style="color:#fff;font-weight:bold">new</span> Child();
</span></span><span style="display:flex;"><span>        child.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> child;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­çš„ <code>newChildWithWeight å’Œ newChildWithAge</code>ï¼Œå°±æ˜¯ä¸¤ä¸ªå‚æ•°ç±»å‹ç›¸åŒçš„çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½œç”¨ä¸åŒï¼Œå¦‚æ­¤ï¼Œå°±èƒ½å¤Ÿæ»¡è¶³ä¸Šé¢æ‰€è¯´çš„ç±»ä¼¼<code>Child(int age) å’Œ Child(int weight)</code>åŒæ—¶å­˜åœ¨çš„éœ€æ±‚ã€‚ï¼ˆå¦å¤–ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°åå­—ä¹Ÿæ˜¯è‡ªæè¿°çš„ï¼Œç›¸å¯¹äºä¸€æˆä¸å˜çš„æ„é€ å‡½æ•°æ›´èƒ½è¡¨è¾¾è‡ªèº«çš„å«ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢æ‰€è¯´çš„ç¬¬ä¸€æ¡ä¼˜åŠ¿ â€”â€”ã€å®ƒä»¬æœ‰åå­—ã€ï¼‰</p>
<h3 id="å¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§">å¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§<a hidden class="anchor" aria-hidden="true" href="#å¯ä»¥å‡å°‘å¯¹å¤–æš´éœ²çš„å±æ€§">#</a></h3>
<p>è½¯ä»¶å¼€å‘ä¸­æœ‰ä¸€æ¡å¾ˆé‡è¦çš„ç»éªŒï¼šå¯¹å¤–æš´éœ²çš„å±æ€§è¶Šå¤šï¼Œè°ƒç”¨è€…å°±è¶Šå®¹æ˜“å‡ºé”™ã€‚æ‰€ä»¥å¯¹äºç±»çš„æä¾›è€…ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥åŠªåŠ›å‡å°‘å¯¹å¤–æš´éœ²å±æ€§ï¼Œä»è€Œé™ä½è°ƒç”¨è€…å‡ºé”™çš„æœºä¼šã€‚è€ƒè™‘ä¸€ä¸‹æœ‰å¦‚ä¸‹ä¸€ä¸ª Player ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Player : Version 1
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">class</span> Player {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_RUNNER = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_SWIMMER = <span style="color:#ff0;font-weight:bold">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_RACER = <span style="color:#ff0;font-weight:bold">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">int</span> type;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Player(<span style="color:#fff;font-weight:bold">int</span> type) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">type</span> = type;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Player å¯¹å¤–æä¾›äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œè®©ä½¿ç”¨è€…ä¼ å…¥ä¸€ä¸ª type æ¥è¡¨ç¤ºç±»å‹ã€‚é‚£ä¹ˆè¿™ä¸ªç±»æœŸæœ›çš„è°ƒç”¨æ–¹å¼å°±æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Player player1 = <span style="color:#fff;font-weight:bold">new</span> Player(Player.<span style="color:#007f7f">TYPE_RUNNER</span>);
</span></span><span style="display:flex;"><span>Player player2 = <span style="color:#fff;font-weight:bold">new</span> Player(Player.<span style="color:#007f7f">TYPE_SWEIMMER</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæä¾›è€…æ˜¯æ— æ³•æ§åˆ¶è°ƒç”¨æ–¹çš„è¡Œä¸ºçš„ï¼Œå®é™…ä¸­è°ƒç”¨æ–¹å¼å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Player player3 = <span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>Player player4 = <span style="color:#fff;font-weight:bold">new</span> Player(-<span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>Player player5 = <span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#ff0;font-weight:bold">10086</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æä¾›è€…æœŸæœ›çš„æ„é€ å‡½æ•°ä¼ å…¥çš„å€¼æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„å‡ ä¸ªå¸¸é‡ä¹‹ä¸€ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œå°±å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºé”™è¯¯ã€‚è¦é¿å…è¿™ç§é”™è¯¯ï¼Œä½¿ç”¨æšä¸¾æ¥ä»£æ›¿å¸¸é‡å€¼æ˜¯å¸¸è§çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå½“ç„¶å¦‚æœä¸æƒ³ç”¨æšä¸¾çš„è¯ï¼Œä½¿ç”¨æˆ‘ä»¬ä»Šå¤©æ‰€è¯´çš„ä¸»è§’é™æ€å·¥å‚æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠæ³•ã€‚å¦‚æœæŠŠä»¥ä¸Šéœ€æ±‚ç”¨é™æ€å·¥å‚æ–¹æ³•æ¥å®ç°ï¼Œä»£ç å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Player : Version 2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">class</span> Player {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_RUNNER = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_SWIMMER = <span style="color:#ff0;font-weight:bold">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> TYPE_RACER = <span style="color:#ff0;font-weight:bold">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> type;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Player(<span style="color:#fff;font-weight:bold">int</span> type) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">type</span> = type;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Player newRunner() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Player(TYPE_RUNNER);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Player newSwimmer() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Player(TYPE_SWIMMER);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Player newRacer() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Player(TYPE_RACER);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„å…¶ä¸­çš„æ„é€ æ–¹æ³•è¢«å£°æ˜ä¸ºäº† privateï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å®ƒè¢«å¤–éƒ¨è°ƒç”¨ï¼Œäºæ˜¯è°ƒç”¨æ–¹åœ¨ä½¿ç”¨ Player å®ä¾‹çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šå°±å¿…é¡»é€šè¿‡ <code>newRunnerã€newSwimmerã€newRacer</code> è¿™å‡ ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºï¼Œè°ƒç”¨æ–¹æ— é¡»çŸ¥é“ä¹Ÿæ— é¡»æŒ‡å®š type å€¼ï¼Œè¿™æ ·å°±èƒ½æŠŠ type çš„èµ‹å€¼çš„èŒƒå›´æ§åˆ¶ä½ï¼Œé˜²æ­¢å‰é¢æ‰€è¯´çš„å¼‚å¸¸å€¼çš„æƒ…å†µã€‚</p>
<h3 id="å¤šäº†ä¸€å±‚æ§åˆ¶æ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹">å¤šäº†ä¸€å±‚æ§åˆ¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹<a hidden class="anchor" aria-hidden="true" href="#å¤šäº†ä¸€å±‚æ§åˆ¶æ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹">#</a></h3>
<p>æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€å®šé‡åˆ°è¿‡å¾ˆå¤šæ¬¡è¿™æ ·çš„åœºæ™¯ï¼šåœ¨å†™ä¸€ä¸ªç•Œé¢æ—¶ï¼ŒæœåŠ¡ç«¯çš„æ•°æ®è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç»å¸¸å°±éœ€è¦è‡ªå·±åœ¨å®¢æˆ·ç«¯ç¼–å†™ä¸€ä¸ªæµ‹è¯•çš„æ•°æ®ï¼Œæ¥è¿›è¡Œç•Œé¢çš„æµ‹è¯•ï¼Œåƒè¿™æ ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>User tester = <span style="color:#fff;font-weight:bold">new</span> User();
</span></span><span style="display:flex;"><span>tester.<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;å°æ˜&#34;</span>);
</span></span><span style="display:flex;"><span>tester.<span style="color:#007f7f">setAge</span>(<span style="color:#ff0;font-weight:bold">16</span>);
</span></span><span style="display:flex;"><span>tester.<span style="color:#007f7f">setDescription</span>(<span style="color:#0ff;font-weight:bold">&#34;æµ‹è¯•æ•°æ®&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// use tester
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>bindUI(tester);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ã€ã€
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¦å†™ä¸€è¿ä¸²çš„æµ‹è¯•ä»£ç ï¼Œå¦‚æœéœ€è¦æµ‹è¯•çš„ç•Œé¢æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆè¿™ä¸€è¿ä¸²çš„ä»£ç å¯èƒ½è¿˜ä¼šè¢«å¤åˆ¶å¤šæ¬¡åˆ°é¡¹ç›®çš„å¤šä¸ªä½ç½®ã€‚è¿™ç§å†™æ³•çš„ç¼ºç‚¹å‘¢ï¼Œé¦–å…ˆæ˜¯ä»£ç è‡ƒè‚¿ã€æ··ä¹±ï¼›å…¶æ¬¡æ˜¯ä¸‡ä¸€ä¸Šçº¿çš„æ—¶å€™æ¼æ‰äº†æŸä¸€å¤„ï¼Œå¿˜è®°ä¿®æ”¹ï¼Œé‚£å°±å¯ä»¥è¯´æ˜¯ç¾éš¾äº†ã€‚ä½†æ˜¯å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œä¹ æƒ¯äº†ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨çš„è¯ï¼Œåˆ™ä¼šå¾ˆè‡ªç„¶åœ°è¿™ä¹ˆå†™ï¼Œå…ˆåœ¨User ä¸­å®šä¹‰ä¸€ä¸ª newTestInstance æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> User{
</span></span><span style="display:flex;"><span>    String name ;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> age ;
</span></span><span style="display:flex;"><span>    String description;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> User newTestInstance() {
</span></span><span style="display:flex;"><span>        User tester = <span style="color:#fff;font-weight:bold">new</span> User();
</span></span><span style="display:flex;"><span>        tester.<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;éš”å£è€å¼ &#34;</span>);
</span></span><span style="display:flex;"><span>        tester.<span style="color:#007f7f">setAge</span>(<span style="color:#ff0;font-weight:bold">16</span>);
</span></span><span style="display:flex;"><span>        tester.<span style="color:#007f7f">setDescription</span>(<span style="color:#0ff;font-weight:bold">&#34;æˆ‘ä½éš”å£æˆ‘å§“å¼ ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> tester;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åè°ƒç”¨çš„åœ°æ–¹å°±å¯ä»¥è¿™æ ·å†™äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>User tester = User.<span style="color:#007f7f">newTestInstance</span>();
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// use tester
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>bindUI(tester);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ˜¯ä¸æ˜¯ç¬é—´å°±è§‰å¾—ä¼˜é›…äº†å¾ˆå¤šï¼Ÿï¼è€Œä¸”ä¸åªæ˜¯ä»£ç ç®€æ´ä¼˜é›…ï¼Œç”±äºæ‰€æœ‰æµ‹è¯•å®ä¾‹çš„åˆ›å»ºéƒ½æ˜¯åœ¨è¿™ä¸€ä¸ªåœ°æ–¹ï¼Œæ‰€ä»¥åœ¨éœ€è¦æ­£å¼æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿåªéœ€æŠŠè¿™ä¸ªæ–¹æ³•éšæ„åˆ é™¤æˆ–è€…ä¿®æ”¹ä¸€ä¸‹ï¼Œæ‰€æœ‰è°ƒç”¨è€…éƒ½ä¼šç¼–è¯‘ä¸é€šè¿‡ï¼Œå½»åº•æœç»äº†ç”±äºç–å¿½å¯¼è‡´çº¿ä¸Šè¿˜æœ‰æµ‹è¯•ä»£ç çš„æƒ…å†µã€‚</p>
<h3 id="é™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»å¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–å› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒ">é™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»ï¼Œå¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–ï¼ˆå› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒï¼‰<a hidden class="anchor" aria-hidden="true" href="#é™æ€å·¥å‚è¿”å›å¯¹è±¡çš„ç±»å¯ä»¥éšæ¯æ¬¡è°ƒç”¨è€Œå˜åŒ–å› é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°å€¼ä¸åŒ">#</a></h3>
<p>åªè¦æ˜¯å·²å£°æ˜çš„è¿”å›ç±»å‹çš„å­ç±»ï¼Œéƒ½æ˜¯å¯ä»¥è¿”å›çš„ã€‚è¿”å›å¯¹è±¡çš„ç±»ä¹Ÿå¯èƒ½å› ç‰ˆæœ¬è€Œå¼‚ã€‚
ä¾‹å¦‚ï¼ŒEnumSetç±»æ˜¯æ²¡æœ‰å…¬å…±æ„é€ å‡½æ•°çš„ï¼Œåªæœ‰é™æ€å·¥å‚æ–¹æ³•ã€‚åœ¨ OpenJDK å®ç°ä¸­ï¼Œå› åº•å±‚ enum ç±»å‹çš„å¤§å°ä¸åŒï¼Œè¿™ä¸ªé™æ€å·¥å‚æ–¹æ³•ä¼šè¿”å›ä¸¤ä¸ªå­ç±»ä¸­çš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> &lt;E <span style="color:#fff;font-weight:bold">extends</span> Enum&lt;E&gt;&gt; EnumSet&lt;E&gt; noneOf(Class&lt;E&gt; elementType) {
</span></span><span style="display:flex;"><span>    Enum&lt;?&gt;[] universe = getUniverse(elementType);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (universe == <span style="color:#fff;font-weight:bold">null</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> ClassCastException(elementType + <span style="color:#0ff;font-weight:bold">&#34; not an enum&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå°‘äº64ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (universe.<span style="color:#007f7f">length</span> &lt;= <span style="color:#ff0;font-weight:bold">64</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> RegularEnumSet&lt;&gt;(elementType, universe);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¤§äº64ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> JumboEnumSet&lt;&gt;(elementType, universe);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®¢æˆ·ç«¯çœ‹ä¸åˆ°è¿™ä¸¤ä¸ªå®ç°ç±»çš„å­˜åœ¨ã€‚å¦‚æœ RegularEnumSet ä¸å†ä¸ºå°å‹ enum ç±»å‹æä¾›æ€§èƒ½ä¼˜åŠ¿ï¼Œå®ƒå¯èƒ½ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¢«æ¶ˆé™¤ï¼Œè€Œä¸ä¼šäº§ç”Ÿä¸è‰¯å½±å“ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœäº‹å®è¯æ˜ EnumSet æœ‰ç›Šäºæ€§èƒ½ï¼Œæœªæ¥çš„ç‰ˆæœ¬å¯ä»¥æ·»åŠ ç¬¬ä¸‰æˆ–ç¬¬å››ä¸ª EnumSet å®ç°ã€‚å®¢æˆ·ç«¯æ—¢ä¸çŸ¥é“ä¹Ÿä¸å…³å¿ƒä»å·¥å‚è¿”å›çš„å¯¹è±¡çš„ç±»ï¼›å®ƒä»¬åªå…³å¿ƒå®ƒæ˜¯EnumSet çš„æŸä¸ªå­ç±»ã€‚</p>
<h3 id="å½“ç¼–å†™åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»æ—¶è¿”å›å¯¹è±¡çš„ç±»ä¸éœ€è¦å­˜åœ¨">å½“ç¼–å†™åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»æ—¶ï¼Œè¿”å›å¯¹è±¡çš„ç±»ä¸éœ€è¦å­˜åœ¨ã€‚<a hidden class="anchor" aria-hidden="true" href="#å½“ç¼–å†™åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»æ—¶è¿”å›å¯¹è±¡çš„ç±»ä¸éœ€è¦å­˜åœ¨">#</a></h3>
<p>è¿™ç§çµæ´»çš„é™æ€å·¥å‚æ–¹æ³•æ„æˆäº†æœåŠ¡æä¾›è€…æ¡†æ¶çš„åŸºç¡€ï¼Œæ¯”å¦‚ Java æ•°æ®åº“è¿æ¥ APIï¼ˆJDBCï¼‰ã€‚
PSï¼šè¿™éƒ¨åˆ†ä¸»è¦è¯´äº†æœåŠ¡æä¾›è€…æ¡†æ¶ï¼ŒåŸæ–‡è¯´çš„ç‰¹åˆ«æ™¦æ¶©éš¾æ‡‚ï¼Œç›´æ¥å‚è€ƒå¦‚ä¸‹ã€‚
<a href="https://www.jianshu.com/p/72d1b41f7cde">å‚è€ƒè¿™é‡Œï¼Œè¯´æ˜äº†æœåŠ¡æä¾›è€…æ¡†æ¶</a></p>
<h3 id="é™æ€å·¥å‚çš„ç¼ºç‚¹ä¸€">é™æ€å·¥å‚çš„ç¼ºç‚¹ä¸€<a hidden class="anchor" aria-hidden="true" href="#é™æ€å·¥å‚çš„ç¼ºç‚¹ä¸€">#</a></h3>
<p>å¦‚æœç±»ä¸­æ²¡æœ‰å…¬æœ‰æ„é€ å™¨æˆ–å—ä¿æŠ¤çš„æ„é€ å™¨ï¼Œå°±ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ã€‚
è¿™å¯èƒ½æ˜¯ä¸€ç§å› ç¥¸å¾—ç¦çš„åšæ³•ï¼Œå› ä¸ºå®ƒé¼“åŠ±ç¨‹åºå‘˜ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚</p>
<h3 id="é™æ€å·¥å‚çš„ç¼ºç‚¹äºŒ">é™æ€å·¥å‚çš„ç¼ºç‚¹äºŒ<a hidden class="anchor" aria-hidden="true" href="#é™æ€å·¥å‚çš„ç¼ºç‚¹äºŒ">#</a></h3>
<p>ç¨‹åºå‘˜å¾ˆéš¾æ‰¾åˆ°é™æ€å·¥å‚æ–¹æ³•ã€‚ å®ƒä»¬åœ¨ API æ–‡æ¡£ä¸­ä¸åƒæ„é€ å‡½æ•°é‚£æ ·å¼•äººæ³¨ç›®ï¼Œå› æ­¤å¾ˆéš¾å¼„æ¸…æ¥šå¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªåªæä¾›é™æ€å·¥å‚æ–¹æ³•è€Œæ²¡æœ‰æ„é€ å‡½æ•°çš„ç±»ã€‚Javadoc å·¥å…·æ€»æœ‰ä¸€å¤©ä¼šå…³æ³¨åˆ°é™æ€å·¥å‚æ–¹æ³•ã€‚ä¸æ­¤åŒæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ç±»æˆ–æ¥å£æ–‡æ¡£ä¸­å¯¹é™æ€å·¥å‚æ–¹æ³•å¤šåŠ ç•™æ„ï¼Œä»¥åŠéµå®ˆé€šç”¨å‘½åçº¦å®šçš„æ–¹å¼æ¥å‡å°‘è¿™ä¸ªå›°æ‰°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›é™æ€å·¥å‚æ–¹æ³•çš„å¸¸ç”¨åç§°ã€‚</p>
<ul>
<li>
<p>fromï¼Œä¸€ç§å‹è½¬æ¢æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—å•ä¸ªå‚æ•°å¹¶è¿”å›è¯¥ç±»å‹çš„ç›¸åº”å®ä¾‹ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Date d = Date.<span style="color:#007f7f">from</span>(instant);
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ofï¼Œä¸€ä¸ªèšåˆæ–¹æ³•ï¼Œå®ƒæ¥å—å¤šä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¿™äº›å‚æ•°çš„å®ä¾‹ï¼Œä¾‹å¦‚ï¼š</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Set&lt;Rank&gt; faceCards = EnumSet.<span style="color:#007f7f">of</span>(JACK, QUEEN, KING);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>valueOfï¼Œä¸€ç§æ›¿ä»£ from å’Œ of ä½†æ›´å†—é•¿çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>BigInteger prime = BigInteger.<span style="color:#007f7f">valueOf</span>(Integer.<span style="color:#007f7f">MAX_VALUE</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>instanceæˆ–getInstanceï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹ç”±å…¶å‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æè¿°ï¼Œä½†ä¸å…·æœ‰ç›¸åŒçš„å€¼ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>StackWalker luke = StackWalker.<span style="color:#007f7f">getInstance</span>(options);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>create æˆ– newInstanceï¼Œä¸ instance æˆ– getInstance ç±»ä¼¼ï¼Œåªæ˜¯è¯¥æ–¹æ³•ä¿è¯æ¯ä¸ªè°ƒç”¨éƒ½è¿”å›ä¸€ä¸ªæ–°å®ä¾‹ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Object newArray = Array.<span style="color:#007f7f">newInstance</span>(classObject, arrayLen);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>getTypeï¼Œç±»ä¼¼äº getInstanceï¼Œä½†å¦‚æœå·¥å‚æ–¹æ³•ä½äºä¸åŒçš„ç±»ä¸­ï¼Œåˆ™ä½¿ç”¨æ­¤æ–¹æ³•ã€‚å…¶ç±»å‹æ˜¯å·¥å‚æ–¹æ³•è¿”å›
çš„å¯¹è±¡ç±»å‹ï¼Œä¾‹å¦‚ï¼š<code>FileStore fs = Files.getFileStore(path);</code></p>
</li>
<li>
<p>newTypeï¼Œä¸ newInstance ç±»ä¼¼ï¼Œä½†æ˜¯å¦‚æœå·¥å‚æ–¹æ³•åœ¨ä¸åŒçš„ç±»ä¸­ä½¿ç”¨ã€‚ç±»å‹æ˜¯å·¥å‚æ–¹æ³•è¿”å›çš„å¯¹è±¡ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>BufferedReader br = Files.<span style="color:#007f7f">newBufferedReader</span>(path);
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>typeï¼Œä¸€ä¸ªç”¨æ¥æ›¿ä»£ getType å’Œ newType çš„æ¯”è¾ƒç®€å•çš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List&lt;Complaint&gt; litany = Collections.<span style="color:#007f7f">list</span>(legacyLitany);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ä¹‹ï¼Œã€è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨ã€ï¼Œé™¤äº†ä¸Šé¢è¯´çš„ä¼˜åŠ¿ï¼Œæ›´å¤šçš„æ˜¯åœ¨å·¥ç¨‹å­¦ä¸Šçš„æ„ä¹‰ï¼š
<code>èƒ½å¤Ÿå¢å¤§ç±»çš„æä¾›è€…å¯¹è‡ªå·±æ‰€æä¾›çš„ç±»çš„æ§åˆ¶åŠ›ã€‚</code></p>
<h2 id="item-2å½“æ„é€ å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶è€ƒè™‘æ”¹ç”¨æ„å»ºå™¨">Item-2ï¼šå½“æ„é€ å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè€ƒè™‘æ”¹ç”¨æ„å»ºå™¨<a hidden class="anchor" aria-hidden="true" href="#item-2å½“æ„é€ å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶è€ƒè™‘æ”¹ç”¨æ„å»ºå™¨">#</a></h2>
<p>ï¼ˆConsider a builder when faced with many constructor parametersï¼‰</p>
<p>é™æ€å·¥å‚å’Œæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå±€é™ï¼šå®ƒä»¬ä¸èƒ½å¯¹å¤§é‡å¯é€‰å‚æ•°åšå¾ˆå¥½çš„æ‰©å±•ã€‚ä»¥ä¸€ä¸ªç±»ä¸ºä¾‹ï¼Œå®ƒè¡¨ç¤ºåŒ…è£…é£Ÿå“ä¸Šçš„è¥å…»æ ‡ç­¾ã€‚è¿™äº›æ ‡ç­¾ä¸Šæœ‰ä¸€äº›å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œå¦‚ï¼šå‡€å«é‡ã€æ¯›é‡å’Œæ¯å•ä½ä»½é‡çš„å¡è·¯é‡Œï¼Œå¦æœ‰è¶…è¿‡ 20ä¸ªå¯é€‰çš„å­—æ®µï¼Œå¦‚ï¼šæ€»è„‚è‚ªã€é¥±å’Œè„‚è‚ªã€åå¼è„‚è‚ªã€èƒ†å›ºé†‡ã€é’ ç­‰ç­‰ã€‚
å¤§å¤šæ•°äº§å“åªéœ€è¦è¿™äº›å¯é€‰å­—æ®µä¸­çš„å‡ ä¸ªï¼Œä¸”å…·æœ‰éé›¶å€¼ã€‚æ€ä¹ˆç»™è¿™æ ·çš„ç±»ç¼–å†™æ„é€ å‡½æ•°æˆ–é™æ€å·¥å‚å‘¢ï¼Ÿä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä½¿ç”¨å¯ä¼¸ç¼©æ„é€ å‡½æ•°ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œåªå‘æ„é€ å‡½æ•°æä¾›å¿…éœ€çš„å‚æ•°ã€‚å³ï¼Œå‘ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°æä¾›å•ä¸ªå¯é€‰å‚æ•°ï¼Œå‘ç¬¬äºŒä¸ªæ„é€ å‡½æ•°æä¾›ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åä¸€ä¸ªæ„é€ å‡½æ•°æ˜¯å…·æœ‰æ‰€æœ‰å¯é€‰å‚æ•°çš„ã€‚è¿™æ˜¯å®ƒåœ¨å®é™…åº”ç”¨ä¸­çš„æ ·å­ã€‚ä¸ºäº†ç®€æ´èµ·è§ï¼Œåªå±•ç¤ºå…·å¤‡å››ä¸ªå¯é€‰å­—æ®µçš„æƒ…å†µï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Telescoping constructor pattern - does not scale well!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NutritionFacts {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servingSize; <span style="color:#007f7f">// (mL) required
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servings; <span style="color:#007f7f">// (per container) required
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> calories; <span style="color:#007f7f">// (per serving) optional
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> fat; <span style="color:#007f7f">// (g/serving) optional
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> sodium; <span style="color:#007f7f">// (mg/serving) optional
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> carbohydrate; <span style="color:#007f7f">// (g/serving) optional
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">// æ„é€ æ–¹æ³•1
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>(servingSize, servings, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">// æ„é€ æ–¹æ³•2
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings, <span style="color:#fff;font-weight:bold">int</span> calories) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>(servingSize, servings, calories, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">// æ„é€ æ–¹æ³•3
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings, <span style="color:#fff;font-weight:bold">int</span> calories, <span style="color:#fff;font-weight:bold">int</span> fat) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>(servingSize, servings, calories, fat, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">// æ„é€ æ–¹æ³•4
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings, <span style="color:#fff;font-weight:bold">int</span> calories, <span style="color:#fff;font-weight:bold">int</span> fat, <span style="color:#fff;font-weight:bold">int</span> sodium) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>(servingSize, servings, calories, fat, sodium, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">// æ„é€ æ–¹æ³•5
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings, <span style="color:#fff;font-weight:bold">int</span> calories, <span style="color:#fff;font-weight:bold">int</span> fat, <span style="color:#fff;font-weight:bold">int</span> sodium, <span style="color:#fff;font-weight:bold">int</span> carbohydrate) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">servingSize</span> = servingSize;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">servings</span> = servings;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">calories</span> = calories;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">fat</span> = fat;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sodium</span> = sodium;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">carbohydrate</span> = carbohydrate;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªå®ä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŒ…å«æ‰€éœ€çš„å‚æ•°çš„æœ€çŸ­å‚æ•°åˆ—è¡¨çš„æ„é€ å‡½æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>NutritionFacts cocaCola = <span style="color:#fff;font-weight:bold">new</span> NutritionFacts(<span style="color:#ff0;font-weight:bold">240</span>, <span style="color:#ff0;font-weight:bold">8</span>, <span style="color:#ff0;font-weight:bold">100</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">35</span>, <span style="color:#ff0;font-weight:bold">27</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ„é€ å‡½æ•°åŒ…å«ä¸€äº›ä½ æœ¬ä¸æƒ³è®¾ç½®çš„å‚æ•°ï¼Œä½†æ˜¯ä½ å¿…é¡»ä¸ºå®ƒä»¬ä¼ é€’ä¸€ä¸ªå€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸º fat ä¼ é€’äº†ä¸€ä¸ª0ã€‚åªæœ‰å…­ä¸ªå‚æ•°æ—¶ï¼Œçœ‹èµ·æ¥å¯èƒ½æ²¡å•¥ï¼Œä½†éšç€å‚æ•°çš„å¢åŠ ï¼Œå®ƒå¾ˆå¿«å°±ä¼šå¤±æ§ã€‚</p>
<p>ç®€å•åœ°è¯´ï¼Œå¯ä¼¸ç¼©æ„é€ å‡½æ•°æ¨¡å¼æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å½“æœ‰å¾ˆå¤šå‚æ•°æ—¶ï¼Œå®¢æˆ·ç«¯ä»£ç ä¼šå¾ˆéš¾ç¼–å†™ï¼Œè€Œä¸”è¯»èµ·æ¥æ›´å›°éš¾ã€‚è¯»è€…æƒ³çŸ¥é“æ‰€æœ‰è¿™äº›å€¼æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¿…é¡»ä»”ç»†æ¸…ç‚¹å‚æ•°ã€‚ç›¸åŒç±»å‹å‚æ•°çš„é•¿åºåˆ—ä¼šå¯¼è‡´ç»†å¾®çš„é”™è¯¯ã€‚å¦‚æœå®¢æˆ·ç«¯ä¸å°å¿ƒé¢ å€’äº†å…¶ä¸­ä¸¤ä¸ªå‚æ•°çš„é¡ºåºï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç¨‹åºä¼šåœ¨è¿è¡Œæ—¶å‡ºé”™ã€‚</p>
<p>å½“ä½ åœ¨æ„é€ å‡½æ•°ä¸­é‡åˆ°è®¸å¤šå¯é€‰å‚æ•°æ—¶ï¼Œå¦ä¸€ç§é€‰æ‹©æ˜¯ JavaBean æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œå…ˆè°ƒç”¨ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œç„¶åè°ƒç”¨ setter æ–¹æ³•æ¥è®¾ç½®æ¯ä¸ªæ‰€éœ€çš„å‚æ•°å’Œæ¯ä¸ªæ„Ÿå…´è¶£çš„å¯é€‰å‚æ•°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// JavaBeans Pattern - allows inconsistency, mandates mutability
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NutritionFacts {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Parameters initialized to default values (if any)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> servingSize = -<span style="color:#ff0;font-weight:bold">1</span>; <span style="color:#007f7f">// Required; no default value
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> servings = -<span style="color:#ff0;font-weight:bold">1</span>; <span style="color:#007f7f">// Required; no default value
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> calories = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> fat = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> sodium = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> carbohydrate = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> NutritionFacts() { }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Setters
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setServingSize(<span style="color:#fff;font-weight:bold">int</span> val) { servingSize = val; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setServings(<span style="color:#fff;font-weight:bold">int</span> val) { servings = val; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setCalories(<span style="color:#fff;font-weight:bold">int</span> val) { calories = val; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setFat(<span style="color:#fff;font-weight:bold">int</span> val) { fat = val; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSodium(<span style="color:#fff;font-weight:bold">int</span> val) { sodium = val; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setCarbohydrate(<span style="color:#fff;font-weight:bold">int</span> val) { carbohydrate = val; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ¨¡å¼å¼¥è¡¥äº†å¯ä¼¸ç¼©æ„é€ å‡½æ•°æ¨¡å¼çš„ä¸è¶³ã€‚åˆ›å»ºå®ä¾‹å¾ˆå®¹æ˜“ï¼Œè™½ç„¶æœ‰ç‚¹å†—é•¿ï¼Œä½†å¾ˆå®¹æ˜“é˜…è¯»ç”Ÿæˆçš„ä»£ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>NutritionFacts cocaCola = <span style="color:#fff;font-weight:bold">new</span> NutritionFacts();
</span></span><span style="display:flex;"><span>cocaCola.<span style="color:#007f7f">setServingSize</span>(<span style="color:#ff0;font-weight:bold">240</span>);
</span></span><span style="display:flex;"><span>cocaCola.<span style="color:#007f7f">setServings</span>(<span style="color:#ff0;font-weight:bold">8</span>);
</span></span><span style="display:flex;"><span>cocaCola.<span style="color:#007f7f">setCalories</span>(<span style="color:#ff0;font-weight:bold">100</span>);
</span></span><span style="display:flex;"><span>cocaCola.<span style="color:#007f7f">setSodium</span>(<span style="color:#ff0;font-weight:bold">35</span>);
</span></span><span style="display:flex;"><span>cocaCola.<span style="color:#007f7f">setCarbohydrate</span>(<span style="color:#ff0;font-weight:bold">27</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ï¼ŒJavaBean æ¨¡å¼æœ¬èº«æœ‰ä¸¥é‡çš„ç¼ºç‚¹ã€‚å› ä¸ºæ„å»ºæ˜¯åœ¨å¤šä¸ªè°ƒç”¨ä¹‹é—´è¿›è¡Œçš„ï¼Œæ‰€ä»¥ JavaBean å¯èƒ½åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚è¯¥ç±»ä¸èƒ½ä»…é€šè¿‡æ£€æŸ¥æ„é€ å‡½æ•°å‚æ•°çš„æœ‰æ•ˆæ€§æ¥å¼ºåˆ¶ä¸€è‡´æ€§ã€‚åœ¨ä¸ä¸€è‡´çš„çŠ¶æ€ä¸‹å°è¯•ä½¿ç”¨å¯¹è±¡å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„å‘ç”Ÿï¼Œè€ŒåŒ…å«è¿™äº›é”™è¯¯çš„ä»£ç å¾ˆéš¾è°ƒè¯•ã€‚å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒJavaBean æ¨¡å¼å¾ˆéš¾è®©ç±»ä¸å¯å˜ï¼Œå¹¶ä¸”éœ€è¦ç¨‹åºå‘˜é¢å¤–çš„åŠªåŠ›æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</p>
<p>é€šè¿‡åœ¨å¯¹è±¡æ„å»ºå®Œæˆæ—¶æ‰‹åŠ¨ã€Œå†»ç»“ã€å¯¹è±¡ï¼Œå¹¶åœ¨å†»ç»“ä¹‹å‰ä¸å…è®¸ä½¿ç”¨å¯¹è±¡ï¼Œå¯ä»¥å‡å°‘è¿™äº›ç¼ºé™·ï¼Œä½†æ˜¯è¿™ç§å˜é€šæ–¹å¼å¾ˆç¬¨æ‹™ï¼Œåœ¨å®è·µä¸­å¾ˆå°‘ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œå®ƒå¯èƒ½åœ¨è¿è¡Œæ—¶å¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸èƒ½ç¡®ä¿ç¨‹åºå‘˜åœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰è°ƒç”¨å®ƒçš„ freeze æ–¹æ³•ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§é€‰æ‹©ï¼Œå®ƒç»“åˆäº†å¯ä¼¸ç¼©æ„é€ å‡½æ•°æ¨¡å¼çš„å®‰å…¨æ€§å’Œ JavaBean æ¨¡å¼çš„å¯è¯»æ€§ã€‚å®ƒæ˜¯å»ºé€ è€…æ¨¡å¼çš„ä¸€ç§å½¢å¼ã€‚å®¢æˆ·ç«¯ä¸ç›´æ¥ç”Ÿæˆæ‰€éœ€çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä½¿ç”¨æ‰€æœ‰å¿…éœ€çš„å‚æ•°è°ƒç”¨æ„é€ å‡½æ•°ï¼ˆæˆ–é™æ€å·¥å‚ï¼‰ï¼Œå¹¶è·å¾—ä¸€ä¸ª builder å¯¹è±¡ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯åœ¨æ„å»ºå™¨å¯¹è±¡ä¸Šè°ƒç”¨åƒ setter è¿™æ ·çš„æ–¹æ³•æ¥è®¾ç½®æ¯ä¸ªéœ€è¦çš„å¯é€‰å‚æ•°ã€‚
æœ€åï¼Œå®¢æˆ·ç«¯è°ƒç”¨ä¸€ä¸ªæ— å‚æ•°çš„æ„å»ºæ–¹æ³•æ¥ç”Ÿæˆå¯¹è±¡ï¼Œè¿™é€šå¸¸æ˜¯ä¸å¯å˜çš„ã€‚æ„å»ºå™¨é€šå¸¸æ˜¯å®ƒæ„å»ºçš„ç±»çš„é™æ€æˆå‘˜ç±»ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Builder Pattern
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NutritionFacts {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servingSize;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servings;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> calories;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> fat;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> sodium;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> carbohydrate;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Builder {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Required parameters
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servingSize;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servings;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Optional parameters - initialized to default values
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> calories = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> fat = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> sodium = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> carbohydrate = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder(<span style="color:#fff;font-weight:bold">int</span> servingSize, <span style="color:#fff;font-weight:bold">int</span> servings) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">servingSize</span> = servingSize;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">servings</span> = servings;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder calories(<span style="color:#fff;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>            calories = val;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder fat(<span style="color:#fff;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>            fat = val;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder sodium(<span style="color:#fff;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>            sodium = val;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder carbohydrate(<span style="color:#fff;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>            carbohydrate = val;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> NutritionFacts build() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> NutritionFacts(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> NutritionFacts(Builder builder) {
</span></span><span style="display:flex;"><span>        servingSize = builder.<span style="color:#007f7f">servingSize</span>;
</span></span><span style="display:flex;"><span>        servings = builder.<span style="color:#007f7f">servings</span>;
</span></span><span style="display:flex;"><span>        calories = builder.<span style="color:#007f7f">calories</span>;
</span></span><span style="display:flex;"><span>        fat = builder.<span style="color:#007f7f">fat</span>;
</span></span><span style="display:flex;"><span>        sodium = builder.<span style="color:#007f7f">sodium</span>;
</span></span><span style="display:flex;"><span>        carbohydrate = builder.<span style="color:#007f7f">carbohydrate</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>NutritionFacts ç±»æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€æœ‰å‚æ•°é»˜è®¤å€¼éƒ½åœ¨ä¸€ä¸ªä½ç½®ã€‚builderçš„setteræ–¹æ³•è¿”å›builderæœ¬èº«ï¼Œè¿™æ ·å°±å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæµå¼çš„ APIã€‚ä¸‹é¢æ˜¯å®¢æˆ·ç«¯ä»£ç çš„æ ·å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>NutritionFacts cocaCola = <span style="color:#fff;font-weight:bold">new</span> NutritionFacts.<span style="color:#007f7f">Builder</span>(<span style="color:#ff0;font-weight:bold">240</span>, <span style="color:#ff0;font-weight:bold">8</span>)
</span></span><span style="display:flex;"><span>.<span style="color:#007f7f">calories</span>(<span style="color:#ff0;font-weight:bold">100</span>).<span style="color:#007f7f">sodium</span>(<span style="color:#ff0;font-weight:bold">35</span>).<span style="color:#007f7f">carbohydrate</span>(<span style="color:#ff0;font-weight:bold">27</span>).<span style="color:#007f7f">build</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥å®¢æˆ·ç«¯ä»£ç æ˜“äºç¼–å†™ï¼Œæ›´é‡è¦çš„æ˜¯æ˜“äºé˜…è¯»ã€‚
PSï¼šè‹¥å®ä½“ç±»æ•°é‡è¾ƒå¤šæ—¶ï¼Œå†…åµŒé™æ€ç±»çš„æ–¹å¼è¿˜æ˜¯æ¯”è¾ƒå†—é•¿ã€‚æˆ–å¯å°†ã€Œæ„å»ºå™¨ã€ç‹¬ç«‹å‡ºæ¥ï¼Œå¹¿æ³›é€‚åº”å¤šä¸ªå®ä½“ç±»ã€‚ä»¥ä¸‹æ¡ˆä¾‹ä»…ä¾›å‚è€ƒï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> EntityCreator&lt;T&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Field[] fieldArray;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Class&lt;T&gt; className;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> T entityObj;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> EntityCreator(Class&lt;T&gt; className) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">fieldArray</span> = className.<span style="color:#007f7f">getDeclaredFields</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">className</span> = className;
</span></span><span style="display:flex;"><span>        Constructor&lt;T&gt; constructor = className.<span style="color:#007f7f">getDeclaredConstructor</span>();
</span></span><span style="display:flex;"><span>        constructor.<span style="color:#007f7f">setAccessible</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">entityObj</span> = constructor.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> EntityCreator&lt;T&gt; setValue(String paramName, Object paramValue) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (Field field : fieldArray) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (field.<span style="color:#007f7f">getName</span>().<span style="color:#007f7f">equals</span>(paramName)) {
</span></span><span style="display:flex;"><span>                PropertyDescriptor descriptor = <span style="color:#fff;font-weight:bold">new</span> PropertyDescriptor(field.<span style="color:#007f7f">getName</span>(), className);
</span></span><span style="display:flex;"><span>                Method method = descriptor.<span style="color:#007f7f">getWriteMethod</span>();
</span></span><span style="display:flex;"><span>                method.<span style="color:#007f7f">invoke</span>(entityObj, paramValue);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> T build() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> entityObj;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æ­¤ï¼Œå¯ç§»é™¤æ•´ä¸ª Builder ç±»ï¼ŒNutritionFacts ç±»ä¿ç•™æ— å‚æ— æ–¹æ³•ä½“çš„ç§æœ‰æ„é€ ï¼›ç±»æˆå‘˜å¿…é¡»å®ç° setterå’Œ getterï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.Getter;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> lombok.Setter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Setter
</span></span><span style="display:flex;"><span>@Getter
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NutritionFacts {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servingSize;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> servings;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> calories;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> fat;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> sodium;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> carbohydrate;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> NutritionFacts() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨æ¡ˆä¾‹æ”¹ä¸ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>NutritionFacts cocaCola = <span style="color:#fff;font-weight:bold">new</span> EntityCreator&lt;&gt;(NutritionFacts.<span style="color:#007f7f">class</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">setValue</span>(<span style="color:#0ff;font-weight:bold">&#34;servingSize&#34;</span>,<span style="color:#ff0;font-weight:bold">240</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">setValue</span>(<span style="color:#0ff;font-weight:bold">&#34;servings&#34;</span>,<span style="color:#ff0;font-weight:bold">8</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">setValue</span>(<span style="color:#0ff;font-weight:bold">&#34;calories&#34;</span>,<span style="color:#ff0;font-weight:bold">100</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">setValue</span>(<span style="color:#0ff;font-weight:bold">&#34;sodium&#34;</span>,<span style="color:#ff0;font-weight:bold">35</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#007f7f">setValue</span>(<span style="color:#0ff;font-weight:bold">&#34;carbohydrate&#34;</span>,<span style="color:#ff0;font-weight:bold">27</span>).<span style="color:#007f7f">build</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºäº†ç®€æ´èµ·è§ï¼Œç¤ºä¾‹çœç•¥äº†æœ‰æ•ˆæ€§æ£€æŸ¥ã€‚æƒ³è¦æ£€æµ‹å‡ºæ— æ•ˆçš„å‚æ•°ï¼Œå¯ä»¥æ£€æŸ¥æ„å»ºå™¨çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ä¸­çš„å‚æ•°æœ‰æ•ˆæ€§ã€‚buildæ–¹æ³•è°ƒç”¨çš„æ„é€ å™¨ä¸­çš„å¤šä¸ªå‚æ•°åŒ…å«ä¸å¯å˜é‡ï¼Œä¸ºäº†ç¡®ä¿è¿™äº›ä¸å¯å˜é‡å…å—æ”»å‡»ï¼Œbuilderå¤åˆ¶å®Œå‚æ•°åï¼Œè¦æ£€æŸ¥å¯¹è±¡çš„å­—æ®µï¼Œå¦‚æœæ£€æŸ¥å¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª IllegalArgumentExceptionï¼Œå®ƒçš„è¯¦ç»†æ¶ˆæ¯æŒ‡ç¤ºå“ªäº›å‚æ•°æ— æ•ˆã€‚</p>
<p>å»ºé€ è€…æ¨¡å¼éå¸¸é€‚åˆäºç±»å±‚æ¬¡ç»“æ„ã€‚ä½¿ç”¨æ„å»ºå™¨çš„å¹¶è¡Œå±‚æ¬¡ç»“æ„ï¼Œæ¯ä¸ªæ„å»ºå™¨éƒ½åµŒå¥—åœ¨ç›¸åº”çš„ç±»ä¸­ã€‚æŠ½è±¡ç±»æœ‰æŠ½è±¡ç±»æ„å»ºå™¨ï¼›å…·ä½“ç±»æœ‰å…·ä½“ç±»æ„å»ºå™¨ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªåœ¨å±‚æ¬¡ç»“æ„å¤„äºæœ€ä½ç«¯çš„æŠ½è±¡ç±»ï¼Œå®ƒä»£è¡¨å„ç§æ¯”è¨é¥¼ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.EnumSet;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Objects;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Set;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Builder pattern for class hierarchies
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> Pizza {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">enum</span> Topping {HAM, MUSHROOM, ONION, PEPPER, SAUSAGE}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> Set&lt;Topping&gt; toppings;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Builder&lt;T <span style="color:#fff;font-weight:bold">extends</span> Builder&lt;T&gt;&gt; {
</span></span><span style="display:flex;"><span>        EnumSet&lt;Topping&gt; toppings = EnumSet.<span style="color:#007f7f">noneOf</span>(Topping.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> T addTopping(Topping topping) {
</span></span><span style="display:flex;"><span>            toppings.<span style="color:#007f7f">add</span>(Objects.<span style="color:#007f7f">requireNonNull</span>(topping));
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> self();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">abstract</span> Pizza build();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Subclasses must override this method to return &#34;this&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">abstract</span> T self();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Pizza(Builder&lt;?&gt; builder) {
</span></span><span style="display:flex;"><span>        toppings = builder.<span style="color:#007f7f">toppings</span>.<span style="color:#007f7f">clone</span>(); <span style="color:#007f7f">// See Item 50
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ï¼ŒPizza.Builder æ˜¯å…·æœ‰é€’å½’ç±»å‹å‚æ•°çš„æ³›å‹ç±»å‹ã€‚è¿™ä¸æŠ½è±¡ self æ–¹æ³•ä¸€èµ·ï¼Œå…è®¸æ–¹æ³•é“¾æ¥åœ¨å­ç±»ä¸­æ­£å¸¸å·¥ä½œï¼Œè€Œä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ã€‚å¯¹äº Java ç¼ºå°‘è‡ªç±»å‹è¿™ä¸€äº‹å®ï¼Œè¿™ç§å˜é€šæ–¹æ³•ç§°ä¸ºæ¨¡æ‹Ÿè‡ªç±»å‹ä¹ æƒ¯ç”¨æ³•ã€‚
è¿™é‡Œæœ‰ä¸¤ä¸ªå…·ä½“çš„æ¯”è¨å­ç±»ï¼Œä¸€ä¸ªæ˜¯æ ‡å‡†çš„çº½çº¦é£æ ¼çš„æ¯”è¨ï¼Œå¦ä¸€ä¸ªæ˜¯ calzoneã€‚å‰è€…æœ‰ä¸€ä¸ªæ‰€éœ€çš„å¤§å°å‚æ•°ï¼Œè€Œåè€…è®©ä½ æŒ‡å®šé…±æ–™åº”è¯¥æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Objects;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NyPizza <span style="color:#fff;font-weight:bold">extends</span> Pizza {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">enum</span> Size {SMALL, MEDIUM, LARGE}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Size size;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Builder <span style="color:#fff;font-weight:bold">extends</span> Pizza.<span style="color:#007f7f">Builder</span>&lt;Builder&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Size size;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder(Size size) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">size</span> = Objects.<span style="color:#007f7f">requireNonNull</span>(size);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> NyPizza build() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> NyPizza(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">protected</span> Builder self() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> NyPizza(Builder builder) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(builder);
</span></span><span style="display:flex;"><span>        size = builder.<span style="color:#007f7f">size</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Calzone <span style="color:#fff;font-weight:bold">extends</span> Pizza {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">boolean</span> sauceInside;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Builder <span style="color:#fff;font-weight:bold">extends</span> Pizza.<span style="color:#007f7f">Builder</span>&lt;Builder&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">boolean</span> sauceInside = <span style="color:#fff;font-weight:bold">false</span>; <span style="color:#007f7f">// Default
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Builder sauceInside() {
</span></span><span style="display:flex;"><span>            sauceInside = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> Calzone build() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Calzone(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">protected</span> Builder self() {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Calzone(Builder builder) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(builder);
</span></span><span style="display:flex;"><span>        sauceInside = builder.<span style="color:#007f7f">sauceInside</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼Œæ¯ä¸ªå­ç±»çš„æ„å»ºå™¨ä¸­çš„æ„å»ºæ–¹æ³•å£°æ˜ä¸ºè¿”å›æ­£ç¡®çš„å­ç±»ï¼šæ„å»ºçš„æ–¹æ³• NyPizza.Builder è¿”å› NyPizzaï¼Œè€Œåœ¨ Calzone.Builder åˆ™è¿”å› Calzoneã€‚è¿™ç§æŠ€æœ¯ç§°ä¸ºåå˜è¿”å›ç±»å‹ï¼Œå…¶ä¸­ä¸€ä¸ªå­ç±»æ–¹æ³•å£°æ˜ä¸ºè¿”å›è¶…ç±»ä¸­å£°æ˜çš„è¿”å›ç±»å‹çš„å­ç±»å‹ã€‚å®ƒå…è®¸å®¢æˆ·ä½¿ç”¨è¿™äº›æ„å»ºå™¨ï¼Œè€Œä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ã€‚è¿™äº›ã€Œå±‚æ¬¡æ„å»ºå™¨ã€çš„å®¢æˆ·ç«¯ä»£ç ä¸ç®€å•çš„ NutritionFacts æ„å»ºå™¨çš„ä»£ç åŸºæœ¬ç›¸åŒã€‚ä¸ºç®€æ´èµ·è§ï¼Œä¸‹é¢æ˜¾ç¤ºçš„ç¤ºä¾‹å®¢æˆ·ç«¯ä»£ç å‡å®šæšä¸¾å¸¸é‡ä¸Šçš„é™æ€å¯¼å…¥ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>NyPizza pizza = <span style="color:#fff;font-weight:bold">new</span> NyPizza.<span style="color:#007f7f">Builder</span>(SMALL)
</span></span><span style="display:flex;"><span>.<span style="color:#007f7f">addTopping</span>(SAUSAGE).<span style="color:#007f7f">addTopping</span>(ONION).<span style="color:#007f7f">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Calzone calzone = <span style="color:#fff;font-weight:bold">new</span> Calzone.<span style="color:#007f7f">Builder</span>()
</span></span><span style="display:flex;"><span>.<span style="color:#007f7f">addTopping</span>(HAM).<span style="color:#007f7f">sauceInside</span>().<span style="color:#007f7f">build</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><p>å»ºé€ è€…æ¨¡å¼éå¸¸çµæ´»ã€‚ä¸€ä¸ªæ„å»ºå™¨å¯ä»¥å¤šæ¬¡ç”¨äºæ„å»ºå¤šä¸ªå¯¹è±¡ã€‚æ„å»ºå™¨çš„å‚æ•°å¯ä»¥åœ¨æ„å»ºæ–¹æ³•çš„è°ƒç”¨ä¹‹é—´è¿›è¡Œè°ƒæ•´ï¼Œä»¥æ”¹å˜åˆ›å»ºçš„å¯¹è±¡ã€‚æ„å»ºå™¨å¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨å¡«å……æŸäº›å­—æ®µï¼Œä¾‹å¦‚åœ¨æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶å¢åŠ çš„åºåˆ—å·ã€‚</p>
<p>å»ºé€ è€…æ¨¡å¼ä¹Ÿæœ‰ç¼ºç‚¹ã€‚ä¸ºäº†åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä½ å¿…é¡»é¦–å…ˆåˆ›å»ºå®ƒçš„æ„å»ºå™¨ã€‚è™½ç„¶åœ¨å®é™…åº”ç”¨ä¸­åˆ›å»ºè¿™ä¸ªæ„å»ºå™¨çš„æˆæœ¬å¯èƒ½å¹¶ä¸æ˜¾è‘—ï¼Œä½†åœ¨ä»¥æ€§èƒ½ä¸ºå…³é”®çš„åœºæ™¯ä¸‹ï¼Œè¿™å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚è€Œä¸”ï¼Œå»ºé€ è€…æ¨¡å¼æ¯”å¯ä¼¸ç¼©æ„é€ å‡½æ•°æ¨¡å¼æ›´å†—é•¿ï¼Œå› æ­¤åªæœ‰åœ¨æœ‰è¶³å¤Ÿå¤šçš„å‚æ•°æ—¶æ‰å€¼å¾—ä½¿ç”¨ï¼Œæ¯”å¦‚æœ‰ 4 ä¸ªæˆ–æ›´å¤šå‚æ•°æ—¶ï¼Œæ‰åº”è¯¥ä½¿ç”¨å®ƒã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å°†æ¥æ·»åŠ æ›´å¤šçš„å‚æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä»¥æ„é€ å‡½æ•°æˆ–é™æ€å·¥å‚å¼€å§‹ï¼Œç›´è‡³ç±»æ‰©å±•åˆ°å‚æ•°æ•°é‡æ— æ³•æ§åˆ¶çš„ç¨‹åº¦æ—¶ï¼Œä¹Ÿä¼šåˆ‡æ¢åˆ°æ„å»ºå™¨ï¼Œä½†æ˜¯è¿‡æ—¶çš„æ„é€ å‡½æ•°æˆ–é™æ€å·¥å‚å°†å¾ˆéš¾å¤„ç†ã€‚å› æ­¤ï¼Œæœ€å¥½ä¸€å¼€å§‹å°±ä»æ„å»ºå™¨å¼€å§‹ã€‚</p>
<p>æ€»ä¹‹ï¼Œåœ¨è®¾è®¡æ„é€ å‡½æ•°æˆ–é™æ€å·¥å‚çš„ç±»æ—¶ï¼Œå»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯å½“è®¸å¤šå‚æ•°æ˜¯å¯é€‰çš„æˆ–å…·æœ‰ç›¸åŒç±»å‹æ—¶ã€‚ä¸å¯ä¼¸ç¼©æ„é€ å‡½æ•°ç›¸æ¯”ï¼Œä½¿ç”¨æ„å»ºå™¨å®¢æˆ·ç«¯ä»£ç æ›´å®¹æ˜“è¯»å†™ï¼Œè€Œä¸”æ„å»ºå™¨æ¯” JavaBean æ›´å®‰å…¨ã€‚</p>
<h2 id="item-3ä½¿ç”¨ç§æœ‰æ„é€ å‡½æ•°æˆ–æšä¸¾åˆ›å»ºå•ä¾‹">Item-3ï¼šä½¿ç”¨ï¼ˆç§æœ‰æ„é€ å‡½æ•°ï¼‰æˆ–ï¼ˆæšä¸¾ï¼‰åˆ›å»ºå•ä¾‹<a hidden class="anchor" aria-hidden="true" href="#item-3ä½¿ç”¨ç§æœ‰æ„é€ å‡½æ•°æˆ–æšä¸¾åˆ›å»ºå•ä¾‹">#</a></h2>
<p>ï¼ˆEnforce the singleton property with a private constructor or an enum typeï¼‰</p>
<p>å•ä¾‹æ˜¯ä¸€ä¸ªåªå®ä¾‹åŒ–ä¸€æ¬¡çš„ç±»ã€‚å•ä¾‹é€šå¸¸è¡¨ç¤ºæ— çŠ¶æ€å¯¹è±¡ï¼Œæ¯”å¦‚å‡½æ•°æˆ–ç³»ç»Ÿç»„ä»¶ï¼Œå®ƒä»¬åœ¨æœ¬è´¨ä¸Šæ˜¯å”¯ä¸€çš„ã€‚å°†ä¸€ä¸ªç±»è®¾è®¡ä¸ºå•ä¾‹ä¼šä½¿å®ƒçš„å®¢æˆ·ç«¯æµ‹è¯•æ—¶å˜å¾—å›°éš¾ï¼Œ é™¤éå®ƒå®ç°äº†ä½œä¸ºå…¶ç±»å‹çš„æ¥å£ï¼Œå¦åˆ™æ— æ³•ç”¨æ¨¡æ‹Ÿå®ç°æ¥ä»£æ›¿å•ä¾‹ã€‚</p>
<p>å®ç°å•ä¾‹æœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•ã€‚ä¸¤è€…éƒ½åŸºäºï¼šæ„é€ å‡½æ•°ç§æœ‰ã€å’Œå¯¼å‡ºå…¬å…±é™æ€æˆå‘˜ï¼Œä»¥æä¾›å¯¹å”¯ä¸€å®ä¾‹çš„è®¿é—®ã€‚åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œæˆå‘˜æ˜¯ä¸€ä¸ª final å­—æ®µï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Singleton with public final field
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Elvis {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Elvis INSTANCE = <span style="color:#fff;font-weight:bold">new</span> Elvis();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Elvis() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> leaveTheBuilding() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç§æœ‰æ„é€ å‡½æ•°åªè°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºåˆå§‹åŒ– public static final ä¿®é¥°çš„ Elvis ç±»å‹å­—æ®µ INSTANCEã€‚ç”±äºæ²¡æœ‰ publicæˆ– protected çš„æ„é€ å‡½æ•°ï¼Œä¿è¯äº†Elvisçš„å…¨å±€å”¯ä¸€æ€§ï¼šä¸€æ—¦åˆå§‹åŒ–äº† Elvis ç±»ï¼Œå°±åªä¼šå­˜åœ¨ä¸€ä¸ª Elvis å®ä¾‹ã€‚
ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæ‹¥æœ‰ç‰¹æ®Šæƒé™çš„å®¢æˆ·ç«¯å¯ä»¥å€ŸåŠ©<code>AccessibleObject.setAccessible</code>æ–¹æ³•åˆ©ç”¨åå°„è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ã€‚å¦‚æœéœ€è¦é˜²èŒƒè¿™ç§æ”»å‡»ï¼Œè¯·ä¿®æ”¹æ„é€ å‡½æ•°ï¼Œä½¿å…¶åœ¨è¯·æ±‚åˆ›å»ºç¬¬äºŒä¸ªå®ä¾‹æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä½¿ç”¨<code>AccessibleObject.setAccessible</code>æ–¹æ³•è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Constructor&lt;?&gt;[] constructors = Elvis.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">getDeclaredConstructors</span>();
</span></span><span style="display:flex;"><span>AccessibleObject.<span style="color:#007f7f">setAccessible</span>(constructors, <span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#007f7f">stream</span>(constructors).<span style="color:#007f7f">forEach</span>(name -&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (name.<span style="color:#007f7f">toString</span>().<span style="color:#007f7f">contains</span>(<span style="color:#0ff;font-weight:bold">&#34;Elvis&#34;</span>)) {
</span></span><span style="display:flex;"><span>        Elvis instance = (Elvis) name.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>        instance.<span style="color:#007f7f">leaveTheBuilding</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å®ç°å•ä¾‹çš„ç¬¬äºŒç§æ–¹æ³•ä¸­ï¼Œå…¬å…±æˆå‘˜æ˜¯ä¸€ç§é™æ€å·¥å‚æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Singleton with static factory
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Elvis {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Elvis INSTANCE = <span style="color:#fff;font-weight:bold">new</span> Elvis();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Elvis() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Elvis getInstance() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> INSTANCE; 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> leaveTheBuilding() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€æœ‰å¯¹ getInstance() æ–¹æ³•çš„è°ƒç”¨éƒ½è¿”å›ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šåˆ›å»ºå…¶ä»– Elvis å®ä¾‹ã€‚</p>
<p>å…¬å…±å­—æ®µæ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯ API æ˜ç¡®äº†ç±»æ˜¯å•ä¾‹çš„ï¼špublic static ä¿®é¥°çš„å­—æ®µæ˜¯ final çš„ï¼Œå› æ­¤å®ƒæ€»æ˜¯åŒ…å«ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ã€‚ç¬¬äºŒä¸ªä¼˜ç‚¹æ˜¯æ›´ç®€å•ã€‚</p>
<p>é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>
<p>å¯ä»¥åœ¨ä¸æ›´æ”¹ API çš„æƒ…å†µä¸‹å†³å®šç±»æ˜¯å¦æ˜¯å•ä¾‹ã€‚å·¥å‚æ–¹æ³•è¿”å›å”¯ä¸€çš„å®ä¾‹ï¼Œä½†æ˜¯å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä¸ºè°ƒç”¨å®ƒçš„æ¯ä¸ªçº¿ç¨‹è¿”å›ä¸€ä¸ªå•ç‹¬çš„å®ä¾‹ã€‚</p>
</li>
<li>
<p>å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦çš„è¯ï¼Œå¯ä»¥ç¼–å†™æ³›å‹çš„å•ä¾‹å·¥å‚ã€‚</p>
</li>
<li>
<p>æ–¹æ³•å¼•ç”¨èƒ½å¤Ÿä½œä¸ºä¸€ä¸ªæä¾›è€…ï¼Œä¾‹å¦‚<code>Elvis::getInstance æ˜¯ Supplier&lt;Elvis&gt;çš„æä¾›è€…ã€‚</code>
æ–¹æ³•å¼•ç”¨ä½œä¸ºæä¾›è€…çš„ä¾‹å­ï¼š</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Supplier&lt;Elvis&gt; sup = Elvis::getInstance;
</span></span><span style="display:flex;"><span>Elvis obj = sup.<span style="color:#007f7f">get</span>();
</span></span><span style="display:flex;"><span>obj.<span style="color:#007f7f">leaveTheBuilding</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™¤éèƒ½å¤Ÿæ»¡è¶³ä»¥ä¸Šä»»æ„ä¸€ç§ä¼˜åŠ¿ï¼Œå¦åˆ™è¿˜æ˜¯ä¼˜å…ˆè€ƒè™‘publicå­—æ®µçš„æ–¹æ³•ã€‚</p>
<p>è¦æƒ³å°†ä¸Šè¿°å•ä¾‹å˜æˆå¯åºåˆ—åŒ–çš„ï¼Œä»…ä»…åœ¨å£°æ˜ä¸­åŠ ä¸Š implements Serializable æ˜¯ä¸å¤Ÿçš„ã€‚ä¸ºäº†ç»´æŠ¤å•ä¾‹ï¼Œå¿…é¡»å£°æ˜æ‰€æœ‰ç¤ºä¾‹åŸŸéƒ½æ˜¯ç¬æ—¶ï¼ˆ transient ï¼‰çš„ï¼Œå¹¶æä¾›ä¸€ä¸ªreadResolveæ–¹æ³•ã€‚å¦åˆ™ï¼Œæ¯æ¬¡ååºåˆ—åŒ–ä¸€ä¸ªåºåˆ—åŒ–çš„å®ä¾‹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œæ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¼šå¯¼è‡´â€œå‡å†’çš„ Elvisâ€œ ã€‚ä¸ºäº†é˜²æ­¢å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå°†è¿™ä¸ª readResolve æ–¹æ³•æ·»åŠ åˆ° Elvis ç±»ä¸­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// readResolve method to preserve singleton property
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Object readResolve() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Return the one true Elvis and let the garbage collector
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">// take care of the Elvis impersonator.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> INSTANCE;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°å•ä¾‹çš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯å£°æ˜ä¸€ä¸ªåŒ…å«å•ä¸ªå…ƒç´ çš„æšä¸¾ç±»å‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">enum</span> Elvis {
</span></span><span style="display:flex;"><span>    INSTANCE;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> leaveTheBuilding() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ–¹æ³•ç±»ä¼¼äº public å­—æ®µæ–¹æ³•ï¼Œä½†æ˜¯å®ƒæ›´ç®€æ´ï¼Œé»˜è®¤æä¾›äº†åºåˆ—åŒ–æœºåˆ¶ï¼Œæä¾›äº†å¯¹å¤šä¸ªå®ä¾‹åŒ–çš„ä¸¥æ ¼ä¿è¯ï¼Œå³ä½¿é¢å¯¹å¤æ‚çš„åºåˆ—åŒ–æˆ–åå°„æ”»å‡»ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<h2 id="item-4ç”¨ç§æœ‰æ„é€ å‡½æ•°è®©ç±»ä¸å¯å®ä¾‹åŒ–">Item-4ï¼šç”¨<code>ç§æœ‰æ„é€ å‡½æ•°</code>è®©ç±»ä¸å¯å®ä¾‹åŒ–<a hidden class="anchor" aria-hidden="true" href="#item-4ç”¨ç§æœ‰æ„é€ å‡½æ•°è®©ç±»ä¸å¯å®ä¾‹åŒ–">#</a></h2>
<p>ï¼ˆEnforce noninstantiability with a private constructorï¼‰</p>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åªåŒ…å«é™æ€æ–¹æ³•å’Œé™æ€å­—æ®µçš„ç±»ï¼Œè¿™æ ·çš„ç±»å®ä¾‹åŒ–æ¯«æ— æ„ä¹‰ï¼Œç„¶è€Œï¼Œåœ¨æ²¡æœ‰æ˜¾å¼æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æä¾›äº†ä¸€ä¸ªå…¬å…±çš„ã€æ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°ä¸å…¶ä»–æ„é€ å‡½æ•°æ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>å°†ç±»åšæˆæŠ½è±¡ç±»æ¥å¼ºåˆ¶è¯¥ç±»ä¸å¯è¢«å®ä¾‹åŒ–æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºå¯ä»¥å¯¹ç±»è¿›è¡Œå­ç±»åŒ–ï¼Œå¹¶å®ä¾‹åŒ–å­ç±»ã€‚æ­¤å¤–ï¼Œå®ƒè¯¯å¯¼ç”¨æˆ·è®¤ä¸ºç±»æ˜¯ä¸ºç»§æ‰¿è€Œè®¾è®¡çš„ã€‚</p>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œå°†æ„é€ å‡½æ•°ç§æœ‰ï¼ˆprivateï¼‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Noninstantiable utility class
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> UtilityClass {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Suppress default constructor for noninstantiability
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> UtilityClass() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> AssertionError();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºæ˜¾å¼æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥åœ¨ç±»ä¹‹å¤–æ˜¯ä¸å¯è®¿é—®çš„ã€‚
ä¸æ˜¯å¿…é¡»æŠ›å‡º<code>AssertionError()</code>å¼‚å¸¸ï¼Œä½†æ˜¯æŠ›å¼‚å¸¸å¯ä»¥é˜²æ­¢æ„é€ å‡½æ•°è¢«æ„å¤–è°ƒç”¨ã€‚
å®ƒä¿è¯ç±»åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šè¢«å®ä¾‹åŒ–ã€‚è¿™ä¸ªä¹ æƒ¯ç”¨æ³•æœ‰ç‚¹è¿åå¸¸è§„ï¼Œå› ä¸ºæ„é€ å‡½æ•°æ˜¯æ˜ç¡®æä¾›çš„ï¼Œä½†ä¸èƒ½è°ƒç”¨å®ƒã€‚å› æ­¤ï¼Œå¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼ŒåŒ…å«æ³¨é‡Šæ˜¯æ˜æ™ºçš„åšæ³•ã€‚</p>
<p>è¿™ç§åšæ³•ä¹Ÿæœ‰å‰¯ä½œç”¨ï¼Œå®ƒä½¿å¾—ä¸€ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚å› ä¸ºæ‰€æœ‰å­ç±»æ„é€ å‡½æ•°éƒ½å¿…é¡»è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼Œæ— è®ºæ˜¯æ˜¾å¼çš„è¿˜æ˜¯éšå¼çš„ï¼Œä½†è¿™ç§æƒ…å†µä¸‹å­ç±»éƒ½æ²¡æœ‰å¯è®¿é—®çš„è¶…ç±»æ„é€ å‡½æ•°å¯è°ƒç”¨ã€‚</p>
<h2 id="item-5ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨äººæ¥å¼•ç”¨èµ„æº">Item-5ï¼šä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨äººæ¥å¼•ç”¨èµ„æº<a hidden class="anchor" aria-hidden="true" href="#item-5ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨äººæ¥å¼•ç”¨èµ„æº">#</a></h2>
<p>ï¼ˆPrefer dependency injection to hardwiring resourcesï¼‰</p>
<p>è®¸å¤šç±»ä¾èµ–äºä¸€ä¸ªæˆ–å¤šä¸ªåº•å±‚èµ„æºã€‚ä¾‹å¦‚ï¼Œæ‹¼å†™æ£€æŸ¥ç¨‹åºä¾èµ–äºå­—å…¸ã€‚å¸¸è§åšæ³•æ˜¯ï¼Œå°†è¿™ç§ç±»å®ç°ä¸ºé™æ€å·¥å…·ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Inappropriate use of static utility - inflexible &amp; untestable!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Lexicon dictionary = ...;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker() {} <span style="color:#007f7f">// Noninstantiable
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">boolean</span> isValid(String word) { ... }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> List&lt;String&gt; suggestions(String typo) { ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»ä¼¼åœ°ï¼Œä¹Ÿå¸¸çœ‹åˆ°å®ƒä»¬çš„å•ä¾‹å®ç°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Inappropriate use of singleton - inflexible &amp; untestable!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Lexicon dictionary = ...;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker(...) {}
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> INSTANCE = <span style="color:#fff;font-weight:bold">new</span> SpellChecker(...);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isValid(String word) { ... }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> List&lt;String&gt; suggestions(String typo) { ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸¤ç§æ–¹æ³•éƒ½ä¸å¥½ï¼Œè¿™é‡Œåªä½¿ç”¨ä¸€ä¸ªå­—å…¸ï¼Œå®é™…ä¸Šæ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„å­—å…¸ã€‚
é™æ€å·¥å…·ç±»å’Œå•ä¾‹ä¸é€‚ç”¨äºéœ€è¦å¼•ç”¨åº•å±‚èµ„æºçš„ç±»ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦SpellChecker æ”¯æŒå¤šä¸ªdictionaryå®ä¾‹ã€‚æ‰€ä»¥å¯ä»¥åœ¨åˆ›å»ºæ–°å®ä¾‹æ—¶å°†èµ„æºä¼ é€’ç»™æ„é€ å‡½æ•°ã€‚
è¿™å°±æ˜¯ä¾èµ–æ³¨å…¥çš„ä¸€ç§å½¢å¼ï¼šå­—å…¸æ˜¯æ‹¼å†™æ£€æŸ¥å™¨çš„ä¾èµ–é¡¹ï¼Œåœ¨åˆ›å»ºå®ƒæ—¶è¢«æ³¨å…¥åˆ°æ‹¼å†™æ£€æŸ¥å™¨ä¸­ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#007f7f">// Dependency injection provides flexibility and testability
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Lexicon dictionary;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker(Lexicon dictionary) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dictionary</span> = Objects.<span style="color:#007f7f">requireNonNull</span>(dictionary);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isValid(String word) { ... }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> List&lt;String&gt; suggestions(String typo) { ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¾èµ–æ³¨å…¥æ¨¡å¼éå¸¸ç®€å•ï¼Œè®¸å¤šç¨‹åºå‘˜åœ¨ä¸çŸ¥é“å…¶åç§°çš„æƒ…å†µä¸‹ä½¿ç”¨äº†å¤šå¹´ã€‚è™½ç„¶æ‹¼å†™æ£€æŸ¥å™¨ç¤ºä¾‹åªæœ‰ä¸€ä¸ªèµ„æºï¼ˆå­—å…¸ï¼‰ï¼Œä½†æ˜¯ä¾èµ–æ³¨å…¥å¯ä»¥å¤„ç†ä»»æ„æ•°é‡çš„èµ„æºå’Œä»»æ„ä¾èµ–è·¯å¾„ã€‚å®ƒä¿æŒäº†ä¸å¯å˜æ€§ï¼Œå› æ­¤å¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥å…±äº«ä¾èµ–å¯¹è±¡ï¼ˆå‡è®¾å®¢æˆ·ç«¯éœ€è¦ç›¸åŒçš„åº•å±‚èµ„æºï¼‰ã€‚ä¾èµ–æ³¨å…¥åŒæ ·é€‚ç”¨äºæ„é€ å‡½æ•°ã€é™æ€å·¥å‚å’Œæ„å»ºå™¨ã€‚</p>
<p>è¿™ç§æ¨¡å¼çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ï¼Œæ˜¯å°†èµ„æºå·¥å‚ä¼ é€’ç»™æ„é€ å‡½æ•°ã€‚å·¥å‚æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥åå¤è°ƒç”¨å®ƒæ¥åˆ›å»ºç±»çš„å®ä¾‹ã€‚è¿™å°±æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚Java 8 ä¸­å¼•å…¥çš„<code>Supplier&lt;T&gt;</code>éå¸¸é€‚åˆè¡¨ç¤ºå·¥å‚ã€‚
å¸¦æœ‰<code>Supplier&lt;T&gt;</code>çš„æ–¹æ³•ï¼Œåº”è¯¥é™åˆ¶è¾“å…¥å·¥å‚çš„ç±»å‹å‚æ•°ä½¿ç”¨æœ‰é™åˆ¶çš„é€šé…ç¬¦ç±»å‹ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯èƒ½å¤Ÿä¼ å…¥ä¸€ä¸ªå·¥å‚ï¼Œæ¥åˆ›å»ºæŒ‡å®šç±»å‹çš„ä»»æ„å­ç±»å‹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç”Ÿäº§ç“·ç –æ–¹æ³•ï¼Œæ¯å—ç“·ç –éƒ½ä½¿ç”¨å®¢æˆ·æä¾›çš„å·¥å‚æ¥åˆ¶ä½œç“·ç –ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Mosaic create(Supplier&lt;? <span style="color:#fff;font-weight:bold">extends</span> Tile&gt; tileFactory) { ... }
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°½ç®¡ä¾èµ–æ³¨å…¥æå¤§åœ°æé«˜äº†çµæ´»æ€§å’Œå¯æµ‹è¯•æ€§ï¼Œä½†å®ƒå¯èƒ½ä¼šä½¿å¤§å‹é¡¹ç›®å˜å¾—æ··ä¹±ï¼Œè¿™äº›é¡¹ç›®é€šå¸¸åŒ…å«æ•°åƒä¸ªä¾èµ–é¡¹ã€‚ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼ˆå¦‚ Daggerã€Guice æˆ– Springï¼‰ï¼Œå¯ä»¥æ¶ˆé™¤è¿™ç§æ··ä¹±ã€‚</p>
<p>æ€»ä¹‹ï¼Œä¸è¦ä½¿ç”¨å•ä¾‹æˆ–é™æ€å·¥å…·ç±»æ¥å®ç°ä¾èµ–äºä¸€ä¸ªæˆ–å¤šä¸ªåº•å±‚èµ„æºçš„ç±»ï¼Œè¿™äº›èµ„æºçš„è¡Œä¸ºä¼šå½±å“ç±»çš„è¡Œä¸ºï¼Œä¹Ÿä¸è¦è®©ç±»ç›´æ¥åˆ›å»ºè¿™äº›èµ„æºã€‚ç›¸åï¼Œå°†åˆ›å»ºå®ƒä»¬çš„èµ„æºæˆ–å·¥å‚ä¼ é€’ç»™æ„é€ å‡½æ•°ï¼ˆæˆ–é™æ€å·¥å‚æˆ–æ„å»ºå™¨ï¼‰ã€‚è¿™ç§æ“ä½œç§°ä¸ºä¾èµ–æ³¨å…¥ï¼Œå®ƒå°†å¤§å¤§å¢å¼ºç±»çš„çµæ´»æ€§ã€å¯å¤ç”¨æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p>
<h2 id="item-6é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡">Item-6ï¼šé¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#item-6é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡">#</a></h2>
<p>ï¼ˆAvoid creating unnecessary objectsï¼‰</p>
<p>å°½é‡é‡ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œä¸è¦æ¯æ¬¡éœ€è¦çš„æ—¶å€™å°±åˆ›å»ºä¸€ä¸ªç›¸åŒåŠŸèƒ½çš„å¯¹è±¡ã€‚å¤ç”¨å¯¹è±¡çš„æ•ˆç‡æ›´é«˜ï¼Œå¦‚æœå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå®ƒæ€»æ˜¯å¯ä»¥è¢«å¤ç”¨çš„ã€‚çœ‹ä¸‹é¢çš„åé¢ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String s = <span style="color:#fff;font-weight:bold">new</span> String(<span style="color:#0ff;font-weight:bold">&#34;wjy&#34;</span>); 
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥è¯­å¥æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ String å®ä¾‹ï¼Œè€Œè¿™äº›å¯¹è±¡åˆ›å»ºéƒ½ä¸æ˜¯å¿…éœ€çš„ã€‚String æ„é€ å‡½æ•°çš„å‚æ•°(&ldquo;wjy&rdquo;) æœ¬èº«å°±æ˜¯ä¸€ä¸ª String å®ä¾‹ï¼Œåœ¨åŠŸèƒ½ä¸Šä¸æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ç›¸åŒã€‚å¦‚æœè¿™ç§ç”¨æ³•å‘ç”Ÿåœ¨å¾ªç¯æˆ–é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•ä¸­ï¼Œä¼šåˆ›å»ºå¤§é‡ä¸å¿…è¦çš„String å®ä¾‹ã€‚æ”¹è¿›åçš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String s = <span style="color:#0ff;font-weight:bold">&#34;wjy&#34;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ˜¯å•ä¸ª String å®ä¾‹ï¼Œè€Œä¸æ˜¯æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚åªè¦å­—ç¬¦ä¸²å­—é¢é‡ç›¸åŒï¼ŒåŒä¸€è™šæ‹Ÿæœºä¸­è¿è¡Œçš„å…¶ä»–ä»£ç éƒ½å¯ä»¥å¤ç”¨è¯¥å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬åº”è¯¥ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å‡½æ•°ï¼Œä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ã€‚
é™æ€å·¥å‚æ–¹æ³•<code>Boolean.valueOf(String)</code>ï¼Œæ¯”æ„é€ å‡½æ•°<code>Boolean(String)</code>å¥½å¾ˆå¤šã€‚
æ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œé™æ€å·¥å‚æ–¹æ³•åªä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>é™¤äº†å¤ç”¨ä¸å¯å˜å¯¹è±¡ä¹‹å¤–ï¼Œå¦‚æœçŸ¥é“å¯å˜å¯¹è±¡ä¸ä¼šè¢«ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥å¤ç”¨å®ƒä»¬ã€‚æœ‰äº›å¯¹è±¡çš„åˆ›å»ºçš„ä»£ä»·ç›¸æ¯”è€Œè¨€è¦æ˜‚è´µå¾—å¤šã€‚å¦‚æœä½ éœ€è¦é‡å¤åœ°ä½¿ç”¨è¿™æ ·ä¸€ä¸ªã€Œæ˜‚è´µçš„å¯¹è±¡ã€ï¼Œé‚£ä¹ˆæœ€å¥½å°†å…¶ç¼“å­˜ä»¥ä¾›å¤ç”¨ã€‚å‡è®¾ä½ è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•æ¥ç¡®å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç½—é©¬æ•°å­—ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ€ç®€å•çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">boolean</span> isRomanNumeral(String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">matches</span>(<span style="color:#0ff;font-weight:bold">&#34;^(?=.)M*(C[MD]|D?C{0,3})&#34;</span> + <span style="color:#0ff;font-weight:bold">&#34;(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ–¹æ³•ä¾èµ–<code>String.matches</code>æ–¹æ³•ï¼Œè™½ç„¶<code>String.matches</code>æ–¹æ³•æ˜¯æ£€æŸ¥å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…çš„æœ€ç®€å•æ–¹æ³•ï¼Œä½†æ˜¯ä¸é€‚åˆåœ¨æ³¨é‡æ€§èƒ½çš„æƒ…æ™¯é‡å¤ä½¿ç”¨ã€‚å› ä¸º<code>String.matches</code>æ–¹æ³•åœ¨å†…éƒ¨ä¸ºæ­£åˆ™è¡¨è¾¾å¼åˆ›å»ºäº†ä¸€ä¸ª Pattern å®ä¾‹ï¼Œå¹¶ä¸”åªä½¿ç”¨ä¸€æ¬¡ï¼Œä¹‹åå°±è¿›è¡Œåƒåœ¾æ”¶é›†äº†ã€‚åˆ›å»ºä¸€ä¸ª Pattern å®ä¾‹æ˜¯å¾ˆæ˜‚è´µçš„ï¼Œå› ä¸ºå®ƒéœ€è¦å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆæœ‰é™çŠ¶æ€æœºã€‚
ä¸ºäº†æå‡æ€§èƒ½ï¼Œåº”è¯¥æ˜¾ç¤ºçš„å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆä¸€ä¸ªPatternå®ä¾‹ï¼ˆå®ƒæ˜¯ä¸å¯å˜çš„ï¼‰ï¼Œè®©å®ƒæˆä¸ºç±»åˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶å°†å®ƒç¼“å­˜èµ·æ¥ï¼Œå¹¶åœ¨æ¯æ¬¡è°ƒç”¨ <code>isRomanNumeral</code> æ–¹æ³•æ—¶å¤ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Reusing expensive object for improved performance
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> RomanNumerals {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Pattern ROMAN = Pattern.<span style="color:#007f7f">compile</span>(<span style="color:#0ff;font-weight:bold">&#34;^(?=.)M*(C[MD]|D?C{0,3})&#34;</span> + <span style="color:#0ff;font-weight:bold">&#34;(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">boolean</span> isRomanNumeral(String s) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> ROMAN.<span style="color:#007f7f">matcher</span>(s).<span style="color:#007f7f">matches</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœé¢‘ç¹è°ƒç”¨ isRomanNumeralï¼Œæ”¹è¿›ç‰ˆæœ¬å°†æä¾›æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œåˆå§‹ç‰ˆæœ¬è¾“å…¥ 8 å­—ç¬¦çš„å­—ç¬¦ä¸²èŠ±è´¹ 1.1Î¼sï¼ˆå¾®ç§’ï¼‰ï¼Œè€Œæ”¹è¿›çš„ç‰ˆæœ¬éœ€è¦ 0.17Î¼sï¼Œå¿«äº†6.5 å€ã€‚ä¸ä»…æ€§èƒ½å¾—åˆ°äº†æ”¹å–„ï¼Œä»£ç ä¹Ÿæ›´æ¸…æ™°ã€‚
å°†ä¸å¯è§çš„Patternå®ä¾‹åšæˆfinalé™æ€åŸŸï¼Œåˆç†çš„å‘½åï¼Œè¿™æ ·æ¯”æ­£åˆ™è¡¨è¾¾å¼å¯è¯»æ€§æ›´å¥½ã€‚</p>
<p>å¦‚æœåŠ è½½åŒ…å«æ”¹è¿›ç‰ˆ isRomanNumeral æ–¹æ³•çš„ç±»æ—¶ï¼Œè¯¥æ–¹æ³•ä»æœªè¢«è°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆåˆå§‹åŒ–å­—æ®µ ROMAN æ˜¯ä¸å¿…è¦çš„ã€‚å› æ­¤ï¼Œå¯ä»¥ç”¨å»¶è¿Ÿåˆå§‹åŒ–å­—æ®µçš„æ–¹å¼åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ isRomanNumeral æ–¹æ³•æ—¶æ‰åˆå§‹åŒ–å­—æ®µï¼Œè€Œä¸æ˜¯åœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå»¶è¿Ÿåˆå§‹åŒ–ä¼šä½¿å®ç°å¤æ‚åŒ–ï¼Œè€Œæ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½æ”¹å–„ã€‚
æ³¨ï¼šç±»åŠ è½½é€šå¸¸æŒ‡çš„æ˜¯ç±»çš„ç”Ÿå‘½å‘¨æœŸä¸­åŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–ä¸‰ä¸ªé˜¶æ®µã€‚å½“æ–¹æ³•æ²¡æœ‰åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­è¢«ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä¸åˆå§‹åŒ–ä¸ä¹‹ç›¸å…³çš„å­—æ®µã€‚</p>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«å®‰å…¨çš„é‡ç”¨ã€‚ä½†æœ‰æ—¶å¹¶ä¸æ˜¯è¿™æ ·ï¼Œé€‚é…å™¨å°±æ˜¯è¿™æ ·ï¼Œæœ‰æ—¶å€™ä¹Ÿå«è§†å›¾ã€‚
é€‚é…å™¨æŒ‡çš„æ˜¯ï¼šå®ƒæŠŠåŠŸèƒ½å§”æ‰˜ç»™ä¸€ä¸ªåå¤‡å¯¹è±¡ï¼Œå¹¶ä¸ºåå¤‡å¯¹è±¡æä¾›ä¸€ä¸ªå¯æ›¿ä»£çš„æ¥å£ã€‚ç”±äºé€‚é…å™¨é™¤äº†åå¤‡å¯¹è±¡ä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–çŠ¶æ€ä¿¡æ¯ï¼Œæ‰€ä»¥é’ˆå¯¹æŸä¸ªç»™å®šå¯¹è±¡çš„ç‰¹å®šé€‚é…å™¨è€Œè¨€ï¼Œå®ƒä¸éœ€è¦åˆ›å»ºå¤šä¸ªé€‚é…å™¨å®ä¾‹ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒMap æ¥å£çš„ keySet æ–¹æ³•è¿”å› Map å¯¹è±¡çš„ Set è§†å›¾ï¼Œå…¶ä¸­åŒ…å« Map ä¸­çš„æ‰€æœ‰é”®ã€‚
ä½ å¯èƒ½ä»¥ä¸ºï¼Œå¯¹ keySet çš„æ¯æ¬¡è°ƒç”¨éƒ½å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„ Set å®ä¾‹ï¼Œä½†æ˜¯å¯¹ç»™å®š Map å¯¹è±¡ä¸Šçš„ keySet çš„æ¯æ¬¡è°ƒç”¨éƒ½å¯èƒ½è¿”å›ç›¸åŒçš„ Set å®ä¾‹ã€‚è™½ç„¶è¿”å›çš„ Set å®ä¾‹é€šå¸¸æ˜¯å¯å˜çš„ï¼Œä½†æ‰€æœ‰è¿”å›çš„å¯¹è±¡åœ¨åŠŸèƒ½ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼šå½“è¿”å›çš„å¯¹è±¡ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œæ‰€æœ‰å…¶ä»–å¯¹è±¡ä¹Ÿä¼šå‘ç”Ÿæ›´æ”¹ï¼Œå› ä¸ºå®ƒä»¬éƒ½ç”±ç›¸åŒçš„ Map å®ä¾‹æ”¯æŒã€‚
è™½ç„¶åˆ›å»º keySet è§†å›¾å¯¹è±¡çš„å¤šä¸ªå®ä¾‹åŸºæœ¬ä¸Šæ˜¯æ— å®³çš„ï¼Œä½†è¿™æ˜¯ä¸å¿…è¦çš„ï¼Œä¹Ÿæ²¡æœ‰å¥½å¤„ã€‚</p>
<p>è‡ªåŠ¨è£…ç®±å…è®¸ç¨‹åºå‘˜æ··åˆåŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹ï¼Œæ ¹æ®éœ€è¦è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œä½†æ˜¯è‡ªåŠ¨è£…ç®±ä¼šåˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ã€‚
è‡ªåŠ¨è£…ç®±æ¨¡ç³Šäº†åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹ä¹‹é—´çš„åŒºåˆ«ï¼Œ ä¸¤è€…æœ‰ç»†å¾®çš„è¯­ä¹‰å·®åˆ«å’Œä¸æ˜æ˜¾çš„æ€§èƒ½å·®åˆ«ã€‚
ä¸‹é¢çš„æ–¹æ³•è®¡ç®—æ‰€æœ‰æ­£æ•´æ•°çš„å’Œã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œç¨‹åºå¿…é¡»ä½¿ç”¨ longï¼Œå› ä¸º int å€¼ä¸å¤Ÿå¤§ï¼Œä¸è¶³ä»¥å®¹çº³æ‰€æœ‰æ­£æ•´æ•°å€¼çš„å’Œï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Hideously slow
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">long</span> sum() {
</span></span><span style="display:flex;"><span>    Long sum = <span style="color:#ff0;font-weight:bold">0</span>L;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">long</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt;= Integer.<span style="color:#007f7f">MAX_VALUE</span>; i++){
</span></span><span style="display:flex;"><span>        sum += i;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> sum;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶è¿™æ®µç¨‹åºçš„ç»“æœæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å› ä¸ºå˜é‡sumæ˜¯Longè€Œä¸æ˜¯longï¼Œç¨‹åºåˆ›å»ºäº†2çš„31æ¬¡æ–¹ä¸ªå¤šä½™çš„Longå®ä¾‹ï¼Œæ¯æ¬¡å‘sumä¸­æ·»åŠ longç±»å‹çš„iï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªLongå¯¹è±¡ã€‚å°† sum çš„å£°æ˜ä» Long æ›´æ”¹ä¸º longï¼Œæœºå™¨ä¸Šçš„è¿è¡Œæ—¶é—´å°†ä» 6.3 ç§’å‡å°‘åˆ° 0.59 ç§’ã€‚ç»“è®ºæ˜æ˜¾ï¼šåŸºæœ¬ç±»å‹ä¼˜äºåŒ…è£…ç±»ï¼Œè¿˜åº”æé˜²æ„å¤–çš„è‡ªåŠ¨è£…ç®±ã€‚</p>
<p>åœ¨ç°ä»£ JVM å®ç°ä¸Šï¼Œåˆ›å»ºå’Œå›æ”¶è¿™äº›å°å¯¹è±¡çš„æ„é€ å‡½æ•°æˆæœ¬æ˜¯å¾ˆä½å»‰çš„ã€‚åˆ›å»ºé¢å¤–çš„å¯¹è±¡æ¥å¢å¼ºç¨‹åºçš„å¯è¯»æ€§æ˜¯ä»¶å¥½äº‹ã€‚</p>
<p>å»ºç«‹æ•°æ®åº“é“¾æ¥çš„æˆæœ¬æ˜¯éå¸¸é«˜çš„ï¼Œå› æ­¤å¤ç”¨è¿™äº›å¯¹è±¡æ˜¯æœ‰æ„ä¹‰çš„ã€‚ç„¶è€Œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç»´æŠ¤è‡ªå·±çš„å¯¹è±¡æ± ä¼šä½¿ä»£ç æ··ä¹±ï¼Œå¢åŠ å†…å­˜å ç”¨ï¼Œå¹¶æŸå®³æ€§èƒ½ã€‚ç°ä»£ JVM å®ç°å…·æœ‰é«˜åº¦ä¼˜åŒ–çš„åƒåœ¾æ”¶é›†å™¨ï¼Œåœ¨è½»é‡çº§å¯¹è±¡ä¸Šå¾ˆå®¹æ˜“èƒœè¿‡è¿™æ ·çš„å¯¹è±¡æ± ã€‚</p>
<h2 id="item-7æ’é™¤è¿‡æ—¶çš„å¯¹è±¡å¼•ç”¨">Item-7ï¼šæ’é™¤è¿‡æ—¶çš„å¯¹è±¡å¼•ç”¨<a hidden class="anchor" aria-hidden="true" href="#item-7æ’é™¤è¿‡æ—¶çš„å¯¹è±¡å¼•ç”¨">#</a></h2>
<p>ï¼ˆEliminate obsolete object referencesï¼‰</p>
<p>Cå’ŒC++æ˜¯éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„ï¼Œè€ŒJavaæ˜¯æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ï¼Œå³å½“ä½ ç”¨å®Œå¯¹è±¡ä¹‹åï¼Œå®ƒä»¬ä¼šè¢«åƒåœ¾æ”¶é›†å™¨è‡ªåŠ¨å›æ”¶ã€‚ä½†æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿè¦è€ƒè™‘å†…å­˜ç®¡ç†çš„äº‹æƒ…ã€‚è€ƒè™‘ä»¥ä¸‹ç®€å•çš„å †æ ˆå®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.Arrays;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> java.util.EmptyStackException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// Can you spot the &#34;memory leak&#34;?
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Stack {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Object[] elements;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> size = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> DEFAULT_INITIAL_CAPACITY = <span style="color:#ff0;font-weight:bold">16</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Stack() {
</span></span><span style="display:flex;"><span>        elements = <span style="color:#fff;font-weight:bold">new</span> Object[DEFAULT_INITIAL_CAPACITY];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> push(Object e) {
</span></span><span style="display:flex;"><span>        ensureCapacity();
</span></span><span style="display:flex;"><span>        elements[size++] = e;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Object pop() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (size == <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> EmptyStackException();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> elements[--size];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * Ensure space for at least one more element, roughly
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * doubling the capacity each time the array needs to grow.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">void</span> ensureCapacity() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (elements.<span style="color:#007f7f">length</span> == size)
</span></span><span style="display:flex;"><span>            elements = Arrays.<span style="color:#007f7f">copyOf</span>(elements, <span style="color:#ff0;font-weight:bold">2</span> * size + <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªç¨‹åºæ²¡æœ‰æ˜æ˜¾çš„é”™è¯¯ã€‚ä½ å¯ä»¥å¯¹å®ƒè¿›è¡Œè¯¦å°½çš„æµ‹è¯•ï¼Œå®ƒä¼šä»¥ä¼˜å¼‚çš„æˆç»©é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚ç®€å•åœ°è¯´ï¼Œè¯¥ç¨‹åºæœ‰ä¸€ä¸ªã€Œå†…å­˜æ³„æ¼ã€é—®é¢˜ï¼Œç”±äºåƒåœ¾æ”¶é›†å™¨æ´»åŠ¨çš„å¢åŠ æˆ–å†…å­˜å ç”¨çš„å¢åŠ ï¼Œå®ƒå¯ä»¥æ‚„æ— å£°æ¯åœ°è¡¨ç°ä¸ºæ€§èƒ½çš„é™ä½ã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œè¿™ç§å†…å­˜æ³„æ¼å¯èƒ½å¯¼è‡´ç£ç›˜åˆ†é¡µï¼Œç”šè‡³å‡ºç°OutOfMemoryError ç¨‹åºæ•…éšœï¼Œä½†è¿™ç§æ•…éšœç›¸å¯¹å°‘è§ã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ ˆå…ˆå¢é•¿ï¼Œç„¶åæ”¶ç¼©ï¼Œé‚£ä¹ˆä»æ ˆä¸­å¼¹å‡ºæ¥çš„å¯¹è±¡å°†ä¸ä¼šè¢«å½“ä½œåƒåœ¾å›æ”¶ï¼Œå³ä½¿ä½¿ç”¨æ ˆçš„ç¨‹åºä¸å†å¼•ç”¨è¿™äº›å¯¹è±¡ã€‚è¿™æ˜¯å› ä¸ºæ ˆå†…éƒ¨ç»´æŠ¤ç€å¯¹è¿™äº›å¯¹è±¡çš„è¿‡æœŸå¼•ç”¨ï¼ˆæŒ‡æ°¸è¿œä¸ä¼šè§£é™¤çš„å¼•ç”¨ï¼‰ã€‚æœ¬ä¾‹ä¸­ï¼Œå‡¡æ˜¯åœ¨elementsæ•°ç»„çš„æ´»åŠ¨éƒ¨åˆ†ä¹‹å¤–çš„å¼•ç”¨éƒ½æ˜¯è¿‡æœŸçš„ï¼Œæ´»åŠ¨éƒ¨åˆ†æŒ‡elementsä¸­ä¸‹æ ‡å°äºsizeçš„é‚£äº›å…ƒç´ ã€‚</p>
<p>åœ¨æ”¯æŒåƒåœ¾å›æ”¶çš„è¯­è¨€ä¸­ï¼Œå†…å­˜æ³„éœ²æ˜¯å¾ˆéšè”½çš„ï¼Œç§°è¿™ç±»å†…å­˜æ³„éœ²ä¸º<code>æ— æ„è¯†çš„å¯¹è±¡ä¿æŒ</code>æ›´ä¸ºæ°å½“ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å¼•ç”¨è¢«æ— æ„è¯†çš„ä¿ç•™èµ·æ¥äº†ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¸ä»…ä¸ä¼šå¤„ç†è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šå¤„ç†è¢«è¿™ä¸ªå¯¹è±¡æ‰€å¼•ç”¨çš„æ‰€æœ‰å…¶ä»–å¯¹è±¡ã€‚å³ä½¿åªæœ‰å°‘é‡çš„å‡ ä¸ªå¯¹è±¡å¼•ç”¨è¢«æ— æ„è¯†çš„ä¿ç•™ä¸‹æ¥ï¼Œä¹Ÿä¼šæœ‰è®¸å¤šçš„å¯¹è±¡è¢«æ’é™¤åœ¨åƒåœ¾å›æ”¶æœºåˆ¶ä¹‹å¤–ï¼Œä»è€Œå¯¹æ€§èƒ½é€ æˆæ½œåœ¨çš„é‡å¤§å½±å“ã€‚</p>
<p>è§£å†³è¿™ç±»é—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼šä¸€æ—¦å¯¹è±¡çš„å¼•ç”¨è¿‡æœŸï¼Œå°±æ¸…ç©ºè¿™äº›å¼•ç”¨å³å¯ã€‚å¯¹äºä¸Šè¿°ä¾‹å­çš„Stackç±»è€Œè¨€ï¼Œåªè¦ä¸€ä¸ªå•å…ƒè¢«å¼¹å‡ºæ ˆï¼ŒæŒ‡å‘å®ƒçš„å¼•ç”¨å°±è¿‡æœŸäº†ï¼Œpopæ–¹æ³•ä¿®æ”¹åå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> Object pop() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (size == <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> EmptyStackException();
</span></span><span style="display:flex;"><span>    Object result = elements[--size];
</span></span><span style="display:flex;"><span>    elements[size] = <span style="color:#fff;font-weight:bold">null</span>; <span style="color:#007f7f">// Eliminate obsolete reference
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨ null å¤„ç†è¿‡æ—¶å¼•ç”¨çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¦‚æœå®ƒä»¬éšåè¢«é”™è¯¯åœ°å…³è”å¼•ç”¨ï¼Œç¨‹åºå°†ç«‹å³å¤±è´¥ï¼ŒæŠ›å‡º
NullPointerExceptionå¼‚å¸¸ï¼Œè€Œä¸æ˜¯æ‚„æ‚„çš„é”™è¯¯è¿è¡Œä¸‹å»ï¼Œå°½æ—©çš„æ£€æµ‹å‡ºç¨‹åºä¸­çš„é”™è¯¯æ€»æ˜¯æœ‰ç›Šçš„ã€‚</p>
<p>å¯¹äºæ¯ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œä¸€æ—¦ç¨‹åºä¸å†ç”¨åˆ°å®ƒï¼Œå°±æŠŠå®ƒæ¸…ç©ºã€‚å…¶å®å®Œå…¨æ²¡å¿…è¦è¿™æ ·ï¼Œå› ä¸ºè¿™æ ·ä¼šæŠŠä»£ç å¼„çš„å¾ˆä¹±ã€‚æ¸…ç©ºå¯¹è±¡å¼•ç”¨åº”è¯¥æ˜¯ä¸€ç§ä¾‹å¤–ï¼Œè€Œä¸æ˜¯ä¸€ç§è§„èŒƒè¡Œä¸ºã€‚æ¶ˆé™¤è¿‡æœŸå¼•ç”¨æœ€å¥½çš„æ–¹æ³•æ˜¯ï¼Œè®©åŒ…å«è¯¥å¼•ç”¨çš„å˜é‡ç»“æŸå…¶ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä½ åœ¨æœ€ç‹­çª„çš„èŒƒå›´å†…å®šä¹‰æ¯ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µè‡ªç„¶è€Œç„¶ä¼šå‘ç”Ÿã€‚</p>
<p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥å–æ¶ˆå¼•ç”¨å‘¢ï¼ŸStack ç±»çš„å“ªäº›æ–¹é¢å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ï¼Ÿé—®é¢˜åœ¨äºï¼Œstackç±»è‡ªå·±ç®¡ç†å†…å­˜ã€‚å­˜å‚¨æ± åŒ…å«äº†elementsæ•°ç»„ï¼ˆå¯¹è±¡å¼•ç”¨å•å…ƒï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼‰çš„å…ƒç´ ã€‚æ•°ç»„æ´»åŠ¨åŒºåŸŸï¼ˆåŒå‰é¢çš„å®šä¹‰ï¼‰ä¸­çš„å…ƒç´ æ˜¯å·²åˆ†é…çš„ï¼ˆallocatedï¼‰ï¼Œè€Œæ•°ç»„å…¶ä½™å…ƒç´ åˆ™æ˜¯ç©ºé—²çš„ã€‚ä½†åƒåœ¾å›æ”¶å™¨å¹¶ä¸çŸ¥é“è¿™ä¸€ç‚¹ï¼Œå¯¹åƒåœ¾å›æ”¶å™¨è€Œè¨€ï¼Œelementsæ•°ç»„ä¸­çš„æ‰€æœ‰å¯¹è±¡å¼•ç”¨éƒ½åŒæ ·æœ‰æ•ˆã€‚åªæœ‰ç¨‹åºå‘˜çŸ¥é“æ•°ç»„çš„éæ´»åŠ¨éƒ¨åˆ†ä¸é‡è¦ã€‚åªè¦æ•°ç»„å…ƒç´ æˆä¸ºéæ´»åŠ¨éƒ¨åˆ†çš„ä¸€éƒ¨åˆ†ï¼Œç¨‹åºå‘˜å°±å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ¸…ç©ºæ•°ç»„å…ƒç´ ï¼Œæœ‰æ•ˆåœ°å°†è¿™ä¸ªæƒ…å†µä¼ é€’ç»™åƒåœ¾æ”¶é›†å™¨ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªç±»ç®¡ç†å®ƒè‡ªå·±çš„å†…å­˜æ—¶ï¼Œç¨‹åºå‘˜åº”è¯¥è­¦æƒ•å†…å­˜æ³„æ¼ã€‚å½“é‡Šæ”¾ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¯¥å…ƒç´ ä¸­åŒ…å«çš„ä»»ä½•å¯¹è±¡å¼•ç”¨éƒ½åº”è¯¥è¢«ç½®ä¸º nullã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§çš„å†…å­˜æ³„æ¼æ¥æºæ˜¯ç¼“å­˜ã€‚ä¸€æ—¦å°†å¯¹è±¡å¼•ç”¨æ”¾å…¥ç¼“å­˜ä¸­ï¼Œå°±å¾ˆå®¹æ˜“å¿˜è®°å®ƒã€‚å¹¶ä¸”åœ¨å®ƒå˜å¾—æ— å…³ç´§è¦ä¹‹åå¾ˆä¹…ä»å°†å®ƒç•™åœ¨ç¼“å­˜ä¸­ã€‚æœ‰å‡ ä¸ªè§£å†³åŠæ³•ã€‚å¦‚æœä½ è¦å®ç°è¿™æ ·çš„ç¼“å­˜ï¼šåªè¦ç¼“å­˜ä¹‹å¤–å­˜åœ¨æŸä¸ªé¡¹çš„é”®çš„å¼•ç”¨ï¼Œè¯¥é¡¹å°±æœ‰æ„ä¹‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨WeakHashMapä»£è¡¨ç¼“å­˜ï¼Œå½“æ¡ç›®è¿‡æ—¶åï¼Œæ¡ç›®å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚
è®°ä½ï¼ŒWeakHashMap åªæœ‰åœ¨ç¼“å­˜æ¡ç›®çš„é¢„æœŸç”Ÿå­˜æœŸç”±é”®çš„å¤–éƒ¨å¼•ç”¨ï¼ˆè€Œä¸æ˜¯å€¼ï¼‰å†³å®šæ—¶æ‰æœ‰ç”¨ã€‚</p>
<p>ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸä¸æ˜¯å¾ˆå®¹æ˜“ç¡®å®šï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¸€äº›ç¼“å­˜å˜çš„æ— ç”¨ã€‚æ‰€ä»¥åº”è¯¥å®šæ—¶æ¸…ç©ºæ— ç”¨çš„ç¼“å­˜ã€‚è¿™äº›æ¸…é™¤å·¥ä½œå¯ä»¥ç”±ä¸€ä¸ªåå°çº¿ç¨‹ï¼ˆå¯èƒ½æ˜¯ScheduledThreadPoolExecutorï¼‰æ¥å®Œæˆï¼Œæˆ–è€…å‘ç¼“å­˜æ·»åŠ æ–°æ¡ç›®æ—¶é¡ºä¾¿è¿›è¡Œæ¸…ç†ã€‚LinkedHashMap ç±»é€šè¿‡å…¶ removeEldestEntry æ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°åä¸€ç§æ–¹æ¡ˆã€‚å¯¹äºæ›´å¤æ‚çš„ç¼“å­˜ï¼Œä½ å¯èƒ½éœ€è¦ç›´æ¥ä½¿ç”¨ java.lang.refã€‚</p>
<p>å†…å­˜æ³„éœ²çš„ç¬¬ä¸‰ä¸ªæ¥æºæ˜¯ç›‘å¬å™¨æˆ–å…¶ä»–å›è°ƒã€‚å¦‚æœä½ å®ç°äº†ä¸€ä¸ªapiï¼Œå®¢æˆ·ç«¯åœ¨è¿™ä¸ªapiä¸­æ³¨å†Œå›è°ƒï¼Œå´æ²¡æœ‰æ˜¾å¼çš„å–æ¶ˆæ³¨å†Œï¼Œé™¤éä½ é‡‡å–æŸäº›åŠ¨ä½œï¼Œå¦åˆ™å®ƒä»¬å°±ä¼šä¸æ–­çš„å †ç§¯èµ·æ¥ã€‚ç¡®ä¿å›è°ƒè¢«åŠæ—¶åœ°åƒåœ¾æ”¶é›†çš„ä¸€ç§æ–¹æ³•æ˜¯ä»…å­˜å‚¨å¯¹å®ƒä»¬çš„å¼±å¼•ç”¨ï¼Œä¾‹å¦‚ï¼Œå°†å®ƒä»¬ä½œä¸ºé”®å­˜å‚¨åœ¨ WeakHashMap ä¸­ã€‚</p>
<p>ç”±äºå†…å­˜æ³„éœ²ä¸ä¼šè¡¨ç°ä¸ºæ˜æ˜¾çš„æ•…éšœï¼Œå®ƒä»¬å¯èƒ½ä¼šåœ¨ç³»ç»Ÿä¸­å­˜åœ¨å¤šå¹´ã€‚å¾€å¾€åªæœ‰é€šè¿‡ä»”ç»†æ£€æŸ¥ä»£ç ï¼Œæˆ–è€…å€ŸåŠ©Heap åˆ¨æå·¥å…·ï¼ˆHeap Profilerï¼‰ï¼Œæ‰èƒ½å‘ç°å†…å­˜æ³„éœ²é—®é¢˜ã€‚å› æ­¤ï¼Œå¦‚æœèƒ½å¤Ÿåœ¨å†…å­˜æ³„éœ²å‘ç”Ÿä¹‹å‰å°±çŸ¥é“å¦‚ä½•é¢„æµ‹æ­¤ç±»é—®é¢˜ï¼Œå¹¶é˜»æ­¢å®ƒä»¬å‘ç”Ÿï¼Œé‚£æœ€å¥½ä¸è¿‡äº†ã€‚</p>
<h2 id="item-8é¿å…ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨">Item-8ï¼šé¿å…ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨<a hidden class="anchor" aria-hidden="true" href="#item-8é¿å…ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨">#</a></h2>
<p>ï¼ˆAvoid finalizers and cleanersï¼‰</p>
<p>ç»ˆç»“æ–¹æ³•ï¼ˆfinalizerï¼‰ä¼šå¯¼è‡´ä¸ç¨³å®šï¼Œæ€§èƒ½é™ä½ï¼Œä»¥åŠå¯ç§»æ¤æ€§é—®é¢˜ï¼Œåº”é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•ã€‚åœ¨java9ä¸­ç”¨æ¸…é™¤æ–¹æ³•ï¼ˆcleanerï¼‰ä»£æ›¿äº†ç»ˆç»“æ–¹æ³•ï¼Œä½†æ˜¯æ¸…é™¤æ–¹æ³•ä¹Ÿä¼šå¯¼è‡´è¿è¡Œç¼“æ…¢ï¼Œä¹Ÿä¸è¦ç”¨ã€‚</p>
<p>c++ä¸­ï¼Œææ„å‡½æ•°æ˜¯å›æ”¶ä¸å¯¹è±¡ç›¸å…³è”çš„èµ„æºçš„å¸¸ç”¨æ–¹æ³•ï¼Œå’Œæ„é€ å‡½æ•°ç›¸å¯¹åº”ã€‚åœ¨ Java ä¸­ï¼Œå½“å¯¹è±¡å˜å¾—ä¸å¯è®¿é—®æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å°†å›æ”¶ä¸ä¹‹å…³è”çš„å­˜å‚¨ï¼Œæ— éœ€ç¨‹åºå‘˜è¿›è¡Œä»»ä½•ç‰¹æ®Šå·¥ä½œã€‚c++ ææ„å‡½æ•°è¿˜ç”¨äºå›æ”¶å…¶ä»–éå†…å­˜èµ„æºã€‚åœ¨ Java ä¸­ï¼Œä½¿ç”¨å¸¦æœ‰èµ„æºçš„ try-with-resources æˆ– try-finally å—ç”¨äºæ­¤ç›®çš„ã€‚</p>
<p>ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ä¸èƒ½ä¿è¯å®ƒä»¬ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚å½“å¯¹è±¡å˜å¾—ä¸å¯è®¿é—®ï¼Œç»ˆç»“å™¨æˆ–æ¸…é™¤å™¨å¯¹å®ƒè¿›è¡Œæ“ä½œçš„æ—¶é—´æ˜¯ä¸ç¡®å®šçš„ã€‚è¿™æ„å‘³ç€æ°¸è¿œä¸åº”è¯¥åœ¨ç»ˆç»“å™¨æˆ–æ¸…é™¤å™¨ä¸­æ‰§è¡Œä»»ä½•å¯¹æ—¶é—´è¦æ±‚å¾ˆä¸¥æ ¼çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä¾èµ–ç»ˆç»“å™¨æˆ–æ¸…é™¤å™¨å…³é—­æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªä¸¥é‡é”™è¯¯ï¼Œå› ä¸ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯æœ‰é™çš„èµ„æºã€‚å¦‚æœç”±äºç³»ç»Ÿåœ¨è¿è¡Œç»ˆç»“å™¨æˆ–æ¸…é™¤å™¨çš„å»¶è¿Ÿå¯¼è‡´è®¸å¤šæ–‡ä»¶å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œç¨‹åºå¯èƒ½ä¼šè¿è¡Œå¤±è´¥ï¼Œå› ä¸ºå®ƒä¸èƒ½å†æ‰“å¼€å…¶ä»–æ–‡ä»¶ã€‚</p>
<p>ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨æ‰§è¡Œçš„å¿«é€Ÿæ€§ä¸»è¦æ˜¯åƒåœ¾æ”¶é›†ç®—æ³•çš„åŠŸèƒ½ï¼Œåœ¨ä¸åŒçš„å®ç°ä¸­å­˜åœ¨å¾ˆå¤§å·®å¼‚ã€‚ä¾èµ–äºç»ˆç»“å™¨çš„åŠæ—¶æ€§æˆ–æ›´æ¸…æ™°çš„æ‰§è¡Œçš„ç¨‹åºçš„è¡Œä¸ºå¯èƒ½ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™æ ·çš„ç¨‹åºå®Œå…¨æœ‰å¯èƒ½åœ¨æµ‹è¯•å®ƒçš„ JVM ä¸Šå®Œç¾åœ°è¿è¡Œï¼Œç„¶ååœ¨æœ€é‡è¦çš„å®¢æˆ·å–œæ¬¢çš„ JVM ä¸Šæ‚²æƒ¨åœ°å¤±è´¥ã€‚</p>
<p>ä¸ºç±»æä¾›ç»ˆç»“å™¨å¯èƒ½ä¼šå»¶è¿Ÿå…¶å®ä¾‹çš„å›æ”¶ã€‚ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ç¨‹åºå‡ºç°äº†OOMï¼Œç¨‹åºæ­»æ‰çš„æ—¶å€™ï¼Œç»ˆç»“æ–¹æ³•é˜Ÿåˆ—ä¸­æœ‰æ•°åƒä¸ªå›¾å½¢å¯¹è±¡æ­£åœ¨ç­‰å¾…è¢«ç»ˆç»“å’Œå›æ”¶ï¼Œä½†æ˜¯ï¼Œç»ˆç»“æ–¹æ³•çš„çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œæ¯”è¯¥åº”ç”¨çš„å…¶ä»–çº¿ç¨‹ä¼˜å…ˆçº§è¦ä½çš„å¤šï¼Œæ‰€ä»¥å›¾å½¢å¯¹è±¡çš„ç»ˆç»“é€Ÿåº¦èµ¶ä¸ä¸Šè¿›å…¥é˜Ÿåˆ—çš„é€Ÿåº¦ã€‚</p>
<p>javaè¯­è¨€è§„èŒƒä¸ä»…ä¸ä¿è¯ç»ˆç»“æ–¹æ³•æˆ–æ¸…é™¤æ–¹æ³•ä¼šåŠæ—¶æ‰§è¡Œï¼Œè€Œä¸”å°±ä¸ä¿è¯å®ƒä»¬ä¼šè¢«æ‰§è¡Œã€‚å½“ä¸€ä¸ªç¨‹åºç»ˆæ­¢çš„æ—¶å€™ï¼ŒæŸäº›å·²ç»æ— æ³•è®¿é—®çš„å¯¹è±¡ä¸Šçš„ç»ˆç»“æ–¹æ³•å´æ ¹æœ¬æ²¡æœ‰è¢«æ‰§è¡Œï¼Œè¿™æ˜¯å®Œå…¨æœ‰å¯èƒ½çš„ã€‚ç»“è®ºæ˜¯ï¼šæ°¸è¿œä¸åº”è¯¥ä¾èµ–ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•æ¥æ›´æ–°é‡è¦çš„æŒä¹…çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä¾èµ–ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•æ¥é‡Šæ”¾å…±äº«èµ„æº(æ¯”å¦‚æ•°æ®åº“)ä¸Šçš„æ°¸ä¹…é”ï¼Œè¿™å¾ˆå®¹æ˜“è®©æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå®æ‰ã€‚</p>
<p>ä¸è¦è¢«<code>System.gc()</code>å’Œ<code>System.runFinalization();</code>è¿™ä¸¤ä¸ªæ–¹æ³•æ‰€è¯±æƒ‘ã€‚å®ƒä»¬ç¡®å®å¢åŠ äº†ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•è¢«æ‰§è¡Œçš„æœºä¼šï¼Œä½†æ˜¯å®ƒä»¬å¹¶ä¸ä¿è¯ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•ä¸€å®šä¼šè¢«æ‰§è¡Œã€‚å”¯ä¸€å£°ç§°ä¿è¯å®ƒä»¬ä¼šè¢«æ‰§è¡Œçš„ä¸¤ä¸ªæ–¹æ³•æ˜¯<code>System.runFinalizersOnExit();</code>åŠå…¶è‡­åæ˜­è‘—çš„å­ªç”Ÿå…„å¼Ÿ<code>Runtime.runFinalizersOnExit();</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æœ‰è‡´å‘½çš„ç¼ºé™·ï¼Œå¹¶ä¸”å·²ç»è¢«åºŸå¼ƒå¾ˆä¹…äº†ã€‚</p>
<p>ç»ˆç»“å™¨çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œåœ¨ç»ˆç»“æœŸé—´æŠ›å‡ºçš„æœªæ•è·å¼‚å¸¸è¢«å¿½ç•¥ï¼Œè¯¥å¯¹è±¡çš„ç»ˆç»“è¿‡ç¨‹ä¹Ÿä¼šç»ˆæ­¢ã€‚æœªæ•è·çš„å¼‚å¸¸ä¼šä½¿å¯¹è±¡å¤„äºæŸåçŠ¶æ€ï¼Œå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹è¯•å›¾ä½¿ç”¨è¿™æ ·ä¸€ä¸ªæŸåçš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»»æ„çš„ä¸ç¡®å®šæ€§è¡Œä¸ºã€‚
æ­£å¸¸æƒ…å†µä¸‹ï¼Œæœªæ•è·çš„å¼‚å¸¸å°†ç»ˆæ­¢çº¿ç¨‹å¹¶æ‰“å°å †æ ˆè·Ÿè¸ªï¼ˆStack Traceï¼‰ï¼Œä½†å¦‚æœåœ¨ç»ˆç»“å™¨ä¸­å‡ºç°ï¼Œåˆ™ä¸ä¼šæ‰“å°è­¦å‘Šã€‚æ¸…é™¤å™¨æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä½¿ç”¨æ¸…é™¤å™¨çš„åº“å¯ä»¥æ§åˆ¶å®ƒçš„çº¿ç¨‹ã€‚</p>
<p>ä½¿ç”¨ç»ˆç»“å™¨å’Œæ¸…é™¤å™¨ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ AutoCloseable å¯¹è±¡ï¼Œä½¿ç”¨
try-with-resources å…³é—­å®ƒä»¥åŠè®©åƒåœ¾æ”¶é›†å™¨å›æ”¶å®ƒçš„æ—¶é—´å¤§çº¦æ˜¯ 12nsã€‚ç›¸åï¼Œä½¿ç”¨ç»ˆç»“å™¨å°†æ—¶é—´å¢åŠ åˆ°550nsã€‚æ¢å¥è¯è¯´ï¼Œä½¿ç”¨ç»ˆç»“å™¨åˆ›å»ºå’Œé”€æ¯å¯¹è±¡å¤§çº¦è¦æ…¢ 50 å€ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºç»ˆç»“å™¨æŠ‘åˆ¶äº†æœ‰æ•ˆçš„åƒåœ¾æ”¶é›†ã€‚</p>
<p>ç»ˆç»“å™¨æœ‰ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼šå®ƒä»¬ä¼šè®©ä½ çš„ç±»å—åˆ°ç»ˆç»“å™¨æ”»å‡»ã€‚ç»ˆç»“å™¨æ”»å‡»èƒŒåçš„æ€æƒ³å¾ˆç®€å•ï¼šå¦‚æœä»æ„é€ å‡½æ•°æˆ–å®ƒçš„åºåˆ—åŒ–ç­‰ä»·ç‰©ï¼ˆreadObject å’Œ readResolve æ–¹æ³•ï¼ˆItem-12ï¼‰ï¼‰æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œæ¶æ„å­ç±»çš„ç»ˆç»“å™¨å°±å¯ä»¥è¿è¡Œåœ¨éƒ¨åˆ†æ„é€ çš„å¯¹è±¡ä¸Šï¼Œè€Œè¿™ä¸ªå¯¹è±¡æœ¬æ¥åº”è¯¥åŠé€”å¤­æŠ˜ã€‚è¿™ä¸ªç»ˆç»“å™¨å¯ä»¥åœ¨é™æ€å­—æ®µä¸­è®°å½•å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œé˜²æ­¢å®ƒè¢«åƒåœ¾æ”¶é›†ã€‚ä¸€æ—¦è®°å½•åˆ°å¼‚å¸¸å¯¹è±¡ï¼Œå°±å¾ˆå®¹æ˜“åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨æœ¬æ¥å°±ä¸åº”è¯¥å­˜åœ¨çš„ä»»æ„æ–¹æ³•ã€‚
ä»æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸åº”è¯¥è¶³ä»¥é˜²æ­¢å¯¹è±¡çš„å‡ºç°ï¼›åœ¨æœ‰ç»ˆç»“å™¨çš„æƒ…å†µä¸‹ï¼Œå°±ä¸æ˜¯è¿™æ ·äº†ã€‚finalç±»ä¸ä¼šå—åˆ°ç»ˆç»“æ–¹æ³•æ”»å‡»ï¼Œå› ä¸ºæ²¡æœ‰äººèƒ½å¤Ÿç¼–å†™å‡ºfinalç±»çš„æ¶æ„å­ç±»ã€‚ä¸ºäº†é˜²æ­¢éfinalç±»å—åˆ°ç»ˆç»“æ–¹æ³•æ”»å‡»ï¼Œè¦ç¼–å†™ä¸€ä¸ªç©ºçš„finalçš„finalizeæ–¹æ³•ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚æœç±»çš„å¯¹è±¡ä¸­å°è£…çš„èµ„æºï¼ˆä¾‹å¦‚æ–‡ä»¶æˆ–è€…çº¿ç¨‹ï¼‰ç¡®å®éœ€è¦ç»ˆæ­¢ï¼Œåº”è¯¥æ€ä¹ˆåšæ‰èƒ½ä¸ç”¨ç¼–å†™ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•å‘¢ï¼Ÿåªéœ€è®©ç±»å®ç°AutoCloseableï¼Œå¹¶è¦æ±‚å…¶å®¢æˆ·ç«¯åœ¨æ¯ä¸ªå®ä¾‹ä¸å†éœ€è¦çš„æ—¶å€™è°ƒç”¨closeæ–¹æ³•ï¼Œä¸€èˆ¬æ˜¯åˆ©ç”¨<code>try-with-resources</code>ç¡®ä¿ç»ˆæ­¢ï¼Œå³ä½¿é‡åˆ°å¼‚å¸¸ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆè¯¦è§ç¬¬9æ¡ï¼‰ã€‚å€¼å¾—æåŠçš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œè¯¥å®ä¾‹å¿…é¡»è®°å½•ä¸‹è‡ªå·±æ˜¯å¦å·²ç»è¢«å…³é—­äº†ï¼šcloseæ–¹æ³•å¿…é¡»åœ¨ä¸€ä¸ªç§æœ‰åŸŸä¸­è®°å½•ä¸‹â€œè¯¥å¯¹è±¡å·²ç»ä¸å†æœ‰æ•ˆâ€ã€‚å¦‚æœè¿™äº›æ–¹æ³•æ˜¯åœ¨å¯¹è±¡å·²ç»ç»ˆæ­¢ä¹‹åè¢«è°ƒç”¨ï¼Œå…¶ä»–çš„æ–¹æ³•å°±å¿…é¡»æ£€æŸ¥è¿™ä¸ªåŸŸï¼Œå¹¶æŠ›å‡º<code>IllegalstateException</code>å¼‚å¸¸ã€‚</p>
<p>é‚£ä¹ˆç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå®ƒä»¬æœ‰ä¸¤ç§åˆæ³•ç”¨é€”ã€‚ç¬¬ä¸€ç§ç”¨é€”æ˜¯ï¼Œå½“èµ„æºçš„æ‰€æœ‰è€…å¿˜è®°è°ƒç”¨å®ƒçš„closeæ–¹æ³•æ—¶ï¼Œç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•å¯ä»¥å……å½“â€œå®‰å…¨ç½‘â€ã€‚è™½ç„¶è¿™æ ·åšå¹¶ä¸èƒ½ä¿è¯ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•ä¼šè¢«åŠæ—¶åœ°è¿è¡Œï¼Œä½†æ˜¯åœ¨å®¢æˆ·ç«¯æ— æ³•æ­£å¸¸ç»“æŸæ“ä½œçš„æƒ…å†µä¸‹ï¼Œè¿Ÿä¸€ç‚¹é‡Šæ”¾èµ„æºæ€»æ¯”æ°¸è¿œä¸é‡Šæ”¾è¦å¥½ã€‚å¦‚æœè€ƒè™‘ç¼–å†™è¿™æ ·çš„å®‰å…¨ç½‘ç»ˆç»“æ–¹æ³•ï¼Œå°±è¦è®¤çœŸè€ƒè™‘æ¸…æ¥šï¼Œè¿™ç§ä¿æŠ¤æ˜¯å¦å€¼å¾—ä»˜å‡ºè¿™æ ·çš„ä»£ä»·ã€‚
ä¸€äº› Java åº“ç±»ï¼Œå¦‚<code>FileInputStreamã€FileOutputStreamã€ThreadPoolExecutor å’Œ java.sql.Connection</code>ï¼Œéƒ½æœ‰ç»ˆç»“å™¨ä½œä¸ºå®‰å…¨ç½‘ã€‚</p>
<p>æ¸…é™¤æ–¹æ³•çš„ç¬¬äºŒç§åˆç†ç”¨é€”ä¸å¯¹è±¡çš„æœ¬åœ°å¯¹ç­‰ä½“ï¼ˆnative peer)æœ‰å…³ã€‚æœ¬åœ°å¯¹ç­‰ä½“æ˜¯ä¸€ä¸ªæœ¬åœ°ï¼ˆéJavaçš„ï¼‰å¯¹è±¡ï¼ˆnative object)ï¼Œæ™®é€šå¯¹è±¡é€šè¿‡æœ¬åœ°æ–¹æ³•ï¼ˆnative method)å§”æ‰˜ç»™ä¸€ä¸ªæœ¬åœ°å¯¹è±¡ã€‚å› ä¸ºæœ¬åœ°å¯¹ç­‰ä½“ä¸æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å™¨ä¸ä¼šçŸ¥é“å®ƒï¼Œå½“å®ƒçš„Javaå¯¹ç­‰ä½“è¢«å›æ”¶çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šè¢«å›æ”¶ã€‚å¦‚æœæœ¬åœ°å¯¹ç­‰ä½“æ²¡æœ‰å…³é”®èµ„æºï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿå¯ä»¥æ¥å—çš„è¯ï¼Œé‚£ä¹ˆæ¸…é™¤æ–¹æ³•æˆ–è€…ç»ˆç»“æ–¹æ³•æ­£æ˜¯æ‰§è¡Œè¿™é¡¹ä»»åŠ¡æœ€åˆé€‚çš„å·¥å…·ã€‚å¦‚æœæœ¬åœ°å¯¹ç­‰ä½“æ‹¥æœ‰å¿…é¡»è¢«åŠæ—¶ç»ˆæ­¢çš„èµ„æºï¼Œæˆ–è€…æ€§èƒ½æ— æ³•æ¥å—ï¼Œé‚£ä¹ˆè¯¥ç±»å°±åº”è¯¥å…·æœ‰ä¸€ä¸ªcloseæ–¹æ³•ï¼Œå¦‚å‰æ‰€è¿°ã€‚</p>
<p>æ¸…é™¤æ–¹æ³•çš„ä½¿ç”¨æœ‰ä¸€å®šçš„æŠ€å·§ã€‚ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„Roomç±»ä¸ºä¾‹ã€‚å‡è®¾æˆ¿é—´åœ¨æ”¶å›ä¹‹å‰å¿…é¡»è¿›è¡Œæ¸…é™¤ã€‚Roomç±»å®ç°äº†<code>AutoCloseable</code>ï¼Œå®ƒåˆ©ç”¨æ¸…é™¤æ–¹æ³•è‡ªåŠ¨æ¸…é™¤å®‰å…¨ç½‘çš„è¿‡ç¨‹åªä¸è¿‡æ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚ã€‚ä¸ç»ˆç»“æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œæ¸…é™¤æ–¹æ³•ä¸ä¼šæ±¡æŸ“ç±»çš„å…¬æœ‰APIï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> sun.misc.Cleaner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// An autocloseable class using a cleaner as a safety net
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Room <span style="color:#fff;font-weight:bold">implements</span> AutoCloseable {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Cleaner cleaner = Cleaner.<span style="color:#007f7f">create</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Resource that requires cleaning. Must not refer to Room!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> State <span style="color:#fff;font-weight:bold">implements</span> Runnable {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> numJunkPiles; <span style="color:#007f7f">// Number of junk piles in this room
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        State(<span style="color:#fff;font-weight:bold">int</span> numJunkPiles) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">numJunkPiles</span> = numJunkPiles;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Invoked by close method or cleaner
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        @Override
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> run() {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Cleaning room&#34;</span>);
</span></span><span style="display:flex;"><span>            numJunkPiles = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// The state of this room, shared with our cleanable
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> State state;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Our cleanable. Cleans the room when itâ€™s eligible for gc
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Cleaner.<span style="color:#007f7f">Cleanable</span> cleanable;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Room(<span style="color:#fff;font-weight:bold">int</span> numJunkPiles) {
</span></span><span style="display:flex;"><span>        state = <span style="color:#fff;font-weight:bold">new</span> State(numJunkPiles);
</span></span><span style="display:flex;"><span>        cleanable = cleaner.<span style="color:#007f7f">register</span>(<span style="color:#fff;font-weight:bold">this</span>, state);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> close() {
</span></span><span style="display:flex;"><span>        cleanable.<span style="color:#007f7f">clean</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†…åµŒçš„é™æ€ç±»stateä¿å­˜æ¸…é™¤æ–¹æ³•æ¸…é™¤æˆ¿é—´æ‰€éœ€çš„èµ„æºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯num-JunkPilesåŸŸï¼Œè¡¨ç¤ºæˆ¿é—´çš„æ‚ä¹±åº¦ã€‚æ›´ç°å®åœ°è¯´ï¼Œå®ƒå¯ä»¥æ˜¯finalçš„long,åŒ…å«ä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹ç­‰ä½“çš„æŒ‡é’ˆã€‚Stateå®ç°äº†Runnableæ¥å£ï¼Œå®ƒçš„runæ–¹æ³•æœ€å¤šè¢«Cleanableè°ƒç”¨ä¸€æ¬¡ï¼Œåè€…æ˜¯æˆ‘ä»¬åœ¨Roomæ„é€ å™¨ä¸­ç”¨æ¸…é™¤å™¨æ³¨å†ŒStateå®ä¾‹æ—¶è·å¾—çš„ã€‚ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€ä¼šè§¦å‘runæ–¹æ³•çš„è°ƒç”¨ï¼šé€šå¸¸æ˜¯é€šè¿‡è°ƒç”¨Roomçš„closeæ–¹æ³•è§¦å‘çš„ï¼Œåè€…åˆè°ƒç”¨äº†cleanableçš„æ¸…é™¤æ–¹æ³•ã€‚å¦‚æœåˆ°äº†Roomå®ä¾‹åº”è¯¥è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œå®¢æˆ·ç«¯è¿˜æ²¡æœ‰è°ƒç”¨closeæ–¹æ³•ï¼Œæ¸…é™¤æ–¹æ³•å°±ä¼šï¼ˆå¸Œæœ›å¦‚æ­¤ï¼‰è°ƒç”¨stateçš„runæ–¹æ³•ã€‚</p>
<p>å…³é”®æ˜¯Stateå®ä¾‹æ²¡æœ‰å¼•ç”¨å®ƒçš„Roomå®ä¾‹ã€‚å¦‚æœå®ƒå¼•ç”¨äº†ï¼Œä¼šé€ æˆå¾ªç¯ï¼Œé˜»æ­¢Roomå®ä¾‹è¢«åƒåœ¾å›æ”¶ï¼ˆä»¥åŠé˜²æ­¢è¢«è‡ªåŠ¨æ¸…é™¤ï¼‰ã€‚å› æ­¤Stateå¿…é¡»æ˜¯ä¸€ä¸ªé™æ€çš„åµŒå¥—ç±»ï¼Œå› ä¸ºéé™æ€çš„åµŒå¥—ç±»åŒ…å«äº†å¯¹å…¶å¤–å›´å®ä¾‹çš„å¼•ç”¨ï¼ˆè¯¦è§ç¬¬24æ¡ï¼‰ã€‚åŒæ ·åœ°ï¼Œä¹Ÿä¸å»ºè®®ä½¿ç”¨lambdaï¼Œå› ä¸ºå®ƒä»¬å¾ˆå®¹æ˜“æ•æ‰åˆ°å¯¹å¤–å›´å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<p>å°±åƒæˆ‘ä»¬ä¹‹å‰è¯´çš„ï¼ŒRoom ç±»çš„æ¸…é™¤å™¨åªæ˜¯ç”¨ä½œå®‰å…¨ç½‘ã€‚å¦‚æœå®¢æˆ·ç«¯å°†æ‰€æœ‰ Room å®ä¾‹åŒ…å›´åœ¨å¸¦æœ‰èµ„æºçš„ tryå—ä¸­ï¼Œåˆ™æ°¸è¿œä¸éœ€è¦è‡ªåŠ¨æ¸…ç†ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Adult {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> (Room myRoom = <span style="color:#fff;font-weight:bold">new</span> Room(<span style="color:#ff0;font-weight:bold">7</span>)) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Goodbye&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­£å¦‚æ‰€æœŸå¾…çš„ä¸€æ ·ï¼Œè¿è¡ŒAdultç¨‹åºä¼šæ‰“å°å‡ºGoodbye,æ¥ç€æ˜¯Cleaning roomã€‚ä½†è¿™ä¸ªä»ä¸æ‰“æ‰«æˆ¿é—´çš„ä¸å®ˆè§„çŸ©çš„ç¨‹åºæ€ä¹ˆåŠï¼Ÿ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Teenager {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Room(<span style="color:#ff0;font-weight:bold">99</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Peace out&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯èƒ½æœŸæœ›æ‰“å°å‡ºPeace outï¼Œç„¶åæ˜¯Cleaning roomï¼Œä½†æ˜¯åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œå®ƒæ²¡æœ‰æ‰“å°å‡ºCleaning roomï¼Œå°±é€€å‡ºç¨‹åºäº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ä¸å¯é¢„è§æ€§ã€‚Cleanerè§„èŒƒæŒ‡å‡ºï¼šâ€œæ¸…é™¤æ–¹æ³•åœ¨<code>System.exit</code>æœŸé—´çš„è¡Œä¸ºæ˜¯ä¸å®ç°ç›¸å…³çš„ã€‚ä¸ç¡®ä¿æ¸…é™¤åŠ¨ä½œæ˜¯å¦ä¼šè¢«è°ƒç”¨ã€‚â€è™½ç„¶è§„èŒƒæ²¡æœ‰æŒ‡æ˜ï¼Œå…¶å®å¯¹äºæ­£å¸¸çš„ç¨‹åºé€€å‡ºä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œåªè¦åœ¨Teenagerçš„mainæ–¹æ³•ä¸Šæ·»åŠ ä»£ç è¡Œ<code>System.gc()</code>ï¼Œå°±è¶³ä»¥è®©å®ƒåœ¨é€€å‡ºä¹‹å‰æ‰“å°å‡ºcleaning roomï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯åœ¨ä½ çš„æœºå™¨ä¸Šä¹Ÿèƒ½çœ‹åˆ°ç›¸åŒçš„è¡Œä¸ºã€‚
æ€»è€Œè¨€ä¹‹ï¼Œé™¤éæ˜¯ä½œä¸ºå®‰å…¨ç½‘ï¼Œæˆ–è€…æ˜¯ä¸ºäº†ç»ˆæ­¢éå…³é”®çš„æœ¬åœ°èµ„æºï¼Œå¦åˆ™è¯·ä¸è¦ä½¿ç”¨æ¸…é™¤æ–¹æ³•ï¼Œå¯¹äºåœ¨Java9ä¹‹å‰çš„å‘è¡Œç‰ˆæœ¬ï¼Œåˆ™å°½é‡ä¸è¦ä½¿ç”¨ç»ˆç»“æ–¹æ³•ã€‚è‹¥ä½¿ç”¨äº†ç»ˆç»“æ–¹æ³•æˆ–è€…æ¸…é™¤æ–¹æ³•ï¼Œåˆ™è¦æ³¨æ„å®ƒçš„ä¸ç¡®å®šæ€§å’Œæ€§èƒ½åæœã€‚</p>
<h2 id="item-9ä½¿ç”¨-try-with-resources-ä¼˜äº-try-finally">Item-9ï¼šä½¿ç”¨ try-with-resources ä¼˜äº try-finally<a hidden class="anchor" aria-hidden="true" href="#item-9ä½¿ç”¨-try-with-resources-ä¼˜äº-try-finally">#</a></h2>
<p>Javaç±»åº“ä¸­åŒ…æ‹¬è®¸å¤šå¿…é¡»é€šè¿‡è°ƒç”¨closeæ–¹æ³•æ¥æ‰‹å·¥å…³é—­çš„èµ„æºã€‚
ä¾‹å¦‚<code>Inputstreamã€Outputstreamå’Œjava.sql.Connection</code>ã€‚å®¢æˆ·ç«¯ç»å¸¸ä¼šå¿½ç•¥èµ„æºçš„å…³é—­ï¼Œè¿™ä¼šé€ æˆä¸¥é‡çš„æ€§èƒ½åæœã€‚è™½ç„¶è¿™å…¶ä¸­çš„è®¸å¤šèµ„æºéƒ½æ˜¯ç”¨ç»ˆç»“æ–¹æ³•ä½œä¸ºå®‰å…¨ç½‘ï¼Œä½†æ˜¯æ•ˆæœå¹¶ä¸ç†æƒ³ã€‚</p>
<p>æ ¹æ®ç»éªŒï¼Œtry-finally è¯­å¥æ˜¯ç¡®ä¿æ­£ç¡®å…³é—­èµ„æºçš„æœ€ä½³æ–¹æ³•ï¼Œå³ä½¿åœ¨å‡ºç°å¼‚å¸¸æˆ–è¿”å›æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// try-finally - No longer the best way to close resources!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">static</span> String firstLineOfFile(String path) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    BufferedReader br = <span style="color:#fff;font-weight:bold">new</span> BufferedReader(<span style="color:#fff;font-weight:bold">new</span> FileReader(path));
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> br.<span style="color:#007f7f">readLine</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        br.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™å¯èƒ½çœ‹èµ·æ¥ä¸åï¼Œä½†æ·»åŠ ç¬¬äºŒä¸ªèµ„æºæ—¶ï¼Œæƒ…å†µä¼šå˜å¾—æ›´ç³Ÿï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// try-finally is ugly when used with more than one resource!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> copy(String src, String dst) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    InputStream in = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(src);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        OutputStream out = <span style="color:#fff;font-weight:bold">new</span> FileOutputStream(dst);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">byte</span>[] buf = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[BUFFER_SIZE];
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">while</span> ((n = in.<span style="color:#007f7f">read</span>(buf)) &gt;= <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>                out.<span style="color:#007f7f">write</span>(buf, <span style="color:#ff0;font-weight:bold">0</span>, n);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        in.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ try-finally è¯­å¥å…³é—­èµ„æºçš„æ­£ç¡®ä»£ç ï¼ˆå¦‚å‰ä¸¤ä¸ªä»£ç ç¤ºä¾‹æ‰€ç¤ºï¼‰ä¹Ÿæœ‰ä¸€ä¸ªç»†å¾®çš„ç¼ºé™·ã€‚try å—å’Œ finallyå—ä¸­çš„ä»£ç éƒ½èƒ½å¤ŸæŠ›å‡ºå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œåœ¨ firstLineOfFile æ–¹æ³•ä¸­ï¼Œç”±äºåº•å±‚ç‰©ç†è®¾å¤‡å‘ç”Ÿæ•…éšœï¼Œå¯¹ readLine çš„è°ƒç”¨å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå…³é—­çš„è°ƒç”¨ä¹Ÿå¯èƒ½å‡ºäºåŒæ ·çš„åŸå› è€Œå¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªå¼‚å¸¸å°†å®Œå…¨è¦†ç›–ç¬¬ä¸€ä¸ªå¼‚å¸¸ã€‚å¼‚å¸¸å †æ ˆè·Ÿè¸ªä¸­æ²¡æœ‰ç¬¬ä¸€ä¸ªå¼‚å¸¸çš„è®°å½•ï¼Œè¿™å¯èƒ½ä¼šä½¿å®é™…ç³»ç»Ÿä¸­çš„è°ƒè¯•å˜å¾—éå¸¸å¤æ‚ï¼ˆè€Œè¿™å¯èƒ½æ˜¯å¸Œæœ›å‡ºç°çš„ç¬¬ä¸€ä¸ªå¼‚å¸¸ï¼Œä»¥ä¾¿è¯Šæ–­é—®é¢˜ï¼‰ã€‚è™½ç„¶å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç æ¥æŠ‘åˆ¶ç¬¬äºŒä¸ªå¼‚å¸¸è€Œæ”¯æŒç¬¬ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰äººè¿™æ ·åšï¼Œå› ä¸ºå®ƒå¤ªè¿‡å†—é•¿ã€‚</p>
<p>å½“ Java 7 å¼•å…¥<code>try-with-resources</code>è¯­å¥æ—¶ï¼Œæ‰€æœ‰è¿™äº›é—®é¢˜éƒ½ä¸€æ¬¡æ€§è§£å†³äº†ã€‚è¦ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œèµ„æºå¿…é¡»å®ç°AutoCloseable æ¥å£ï¼Œå®ƒç”±ä¸€ä¸ªå•ç‹¬çš„ void-return close æ–¹æ³•ç»„æˆã€‚Java åº“å’Œç¬¬ä¸‰æ–¹åº“ä¸­çš„è®¸å¤šç±»å’Œæ¥å£ç°åœ¨éƒ½å®ç°æˆ–æ‰©å±•äº† AutoCloseableã€‚å¦‚æœä½ ç¼–å†™çš„ç±»å­˜åœ¨å¿…é¡»å…³é—­çš„èµ„æºï¼Œé‚£ä¹ˆä¹Ÿåº”è¯¥å®ç° AutoCloseableã€‚</p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨ try-with-resources çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// try-with-resources - the the best way to close resources!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">static</span> String firstLineOfFile(String path) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> (BufferedReader br = <span style="color:#fff;font-weight:bold">new</span> BufferedReader(<span style="color:#fff;font-weight:bold">new</span> FileReader(path))) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> br.<span style="color:#007f7f">readLine</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹äºŒï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// try-with-resources on multiple resources - short and sweet
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> copy(String src, String dst) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> (InputStream in = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(src);OutputStream out = <span style="color:#fff;font-weight:bold">new</span> FileOutputStream(dst)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">byte</span>[] buf = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[BUFFER_SIZE];
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">while</span> ((n = in.<span style="color:#007f7f">read</span>(buf)) &gt;= <span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>            out.<span style="color:#007f7f">write</span>(buf, <span style="color:#ff0;font-weight:bold">0</span>, n);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ <code>try-with-resources</code> ä¸ä»…ä½¿ä»£ç å˜å¾—æ›´ç®€æ´æ˜“æ‡‚ï¼Œä¹Ÿæ›´å®¹æ˜“è¿›è¡Œè¯Šæ–­ã€‚ä»¥ <code>firstLineOfFile()</code> æ–¹æ³•ä¸ºä¾‹ï¼Œå¦‚æœè°ƒç”¨ readlineå’Œ(ä¸å¯è§çš„) closeæ–¹æ³•éƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œåä¸€ä¸ªå¼‚å¸¸å°±ä¼šè¢«ç¦æ­¢ï¼Œä»¥ä¿ç•™ç¬¬ä¸€ä¸ªå¼‚å¸¸ã€‚äº‹å®ä¸Šï¼Œä¸ºäº†ä¿ç•™ä½ æƒ³è¦çœ‹åˆ°çš„é‚£ä¸ªå¼‚å¸¸ï¼Œå³ä¾¿å¤šä¸ªå¼‚å¸¸éƒ½å¯ä»¥è¢«ç¦æ­¢ã€‚è¿™äº›è¢«ç¦æ­¢çš„å¼‚å¸¸å¹¶ä¸æ˜¯ç®€å•åœ°è¢«æŠ›å¼ƒäº†ï¼Œè€Œæ˜¯ä¼šè¢«æ‰“å°åœ¨å †æ ˆè½¨è¿¹ä¸­ï¼Œå¹¶æ³¨æ˜å®ƒä»¬æ˜¯è¢«ç¦æ­¢çš„å¼‚å¸¸ã€‚é€šè¿‡ç¼–ç¨‹è°ƒç”¨ <code>get Suppressed</code> æ–¹æ³•è¿˜å¯ä»¥è®¿é—®åˆ°å®ƒä»¬ï¼Œ<code>getsuppressed</code>æ–¹æ³•ä¹Ÿå·²ç»æ·»åŠ åœ¨Java7çš„ Throwableä¸­äº†ã€‚
åœ¨ <code>try-with- resources</code> è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨ catchå­å¥ï¼Œå°±åƒåœ¨å¹³æ—¶çš„<code>try-finally</code>è¯­å¥ä¸­ä¸€æ ·ã€‚è¿™æ ·æ—¢å¯ä»¥å¤„ç†å¼‚å¸¸ï¼Œåˆä¸éœ€è¦å†å¥—ç”¨ä¸€å±‚ä»£ç ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªç¨è´¹äº†ç‚¹å¿ƒæ€çš„èŒƒä¾‹ã€‚è¿™ä¸ª<code>firstLineOfFile()</code>æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯å¦‚æœå®ƒæ— æ³•æ‰“å¼€æ–‡ä»¶ï¼Œæˆ–è€…æ— æ³•ä»ä¸­è¯»å–ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// try-with-resources with a catch clause
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">static</span> String firstLineOfFile(String path, String defaultVal) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> (BufferedReader br = <span style="color:#fff;font-weight:bold">new</span> BufferedReader(<span style="color:#fff;font-weight:bold">new</span> FileReader(path))) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> br.<span style="color:#007f7f">readLine</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> defaultVal;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“è®ºæ˜æ˜¾ï¼šåœ¨å¤„ç†å¿…é¡»å…³é—­çš„èµ„æºæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ try-with-resourcesï¼Œè€Œä¸æ˜¯try-finallyã€‚</p>
<h1 id="chapter_03-å¯¹è±¡çš„é€šç”¨æ–¹æ³•">chapter_03 å¯¹è±¡çš„é€šç”¨æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#chapter_03-å¯¹è±¡çš„é€šç”¨æ–¹æ³•">#</a></h1>
<p>è™½ç„¶ Object æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»ï¼Œä½†å®ƒä¸»è¦æ˜¯ä¸ºæ‰©å±•è€Œè®¾è®¡çš„ã€‚å®ƒçš„æ‰€æœ‰é final æ–¹æ³•ï¼ˆequalsã€hashCodeã€toStringã€clone å’Œ finalizeï¼‰éƒ½æœ‰æ˜¾å¼çš„é€šç”¨çº¦å®šï¼Œå› ä¸ºå®ƒä»¬çš„è®¾è®¡ç›®çš„æ˜¯è¢«è¦†ç›–ã€‚ä»»ä½•ä¸€ä¸ªç±»åœ¨è¦†ç›–è¿™äº›æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½æœ‰è´£ä»»éµå®ˆè¿™äº›çº¦å®šã€‚å¦‚æœåšä¸åˆ°è¿™ä¸€ç‚¹ï¼Œå…¶ä»–ä¾èµ–äºè¿™äº›çº¦å®šçš„ç±»ï¼ˆå¦‚ HashMap å’ŒHashSetï¼‰å°±æ— æ³•ç»“åˆè¯¥ç±»ä¸€èµ·æ­£å¸¸å·¥ä½œã€‚</p>
<h2 id="item-10è¦†ç›–-equals-æ–¹æ³•æ—¶åº”éµå®ˆé€šç”¨çº¦å®š">Item-10ï¼šè¦†ç›– equals æ–¹æ³•æ—¶åº”éµå®ˆé€šç”¨çº¦å®š<a hidden class="anchor" aria-hidden="true" href="#item-10è¦†ç›–-equals-æ–¹æ³•æ—¶åº”éµå®ˆé€šç”¨çº¦å®š">#</a></h2>
<p>ï¼ˆObey the general contract when overriding equalsï¼‰</p>
<p>è¦†ç›– equals æ–¹æ³•å¾ˆç®€å•ï¼Œä½†æœ‰äº›æ—¶å€™ä¸åº”è¯¥è¦†ç›–equals()ï¼š</p>
<ul>
<li>
<p>ç±»çš„æ¯ä¸ªå®ä¾‹æœ¬è´¨ä¸Šéƒ½æ˜¯å”¯ä¸€çš„ã€‚
å¯¹äºåƒ Thread è¿™æ ·è¡¨ç¤ºæ´»åŠ¨å®ä½“ç±»è€Œä¸æ˜¯å€¼ç±»æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚Object æä¾›çš„ equals å®ç°å¯¹äºè¿™äº›ç±»å…·æœ‰å®Œå…¨æ­£ç¡®çš„è¡Œä¸ºã€‚</p>
</li>
<li>
<p>è¯¥ç±»ä¸éœ€è¦æä¾›ã€Œé€»è¾‘ç›¸ç­‰ã€æµ‹è¯•ã€‚
ä¾‹å¦‚ï¼Œ<code>java.util.regex.Pattern</code> å¯ä»¥è¦†ç›– equals æ¥æ£€æŸ¥ä¸¤ä¸ª Patternå®ä¾‹æ˜¯å¦è¡¨ç¤ºå®Œå…¨ç›¸åŒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†è®¾è®¡äººå‘˜è®¤ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦æˆ–ä¸éœ€è¦è¿™ä¸ªåŠŸèƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»Object ç»§æ‰¿çš„ equals å®Œå…¨è¶³å¤Ÿã€‚</p>
</li>
<li>
<p>è¶…ç±»å·²ç»è¦†ç›–äº† equalsï¼Œè¶…ç±»è¡Œä¸ºé€‚åˆäºè¿™ä¸ªç±»ã€‚
ä¾‹å¦‚ï¼Œå¤§å¤šæ•° Set çš„å®ç°ä» AbstractSet ç»§æ‰¿å…¶å¯¹ç­‰å®ç°ï¼ŒList ä» AbstractList ç»§æ‰¿å®ç°ï¼ŒMap ä» AbstractMap ç»§æ‰¿å®ç°ã€‚</p>
</li>
<li>
<p>ç±»æ˜¯ç§æœ‰çš„æˆ–åŒ…ç§æœ‰çš„ï¼Œå¹¶ä¸”ä½ ç¡®ä¿¡å®ƒçš„ equals æ–¹æ³•æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚
å¦‚æœä½ æƒ³è¦è§„é¿é£é™©ï¼Œä½ å¯ä»¥è¦†ç›–equals æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šæ„å¤–è°ƒç”¨ï¼š</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> AssertionError(); <span style="color:#007f7f">// Method is never called
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥è¦†ç›–squalsæ–¹æ³•å‘¢ï¼Ÿå¦‚æœç±»å…·æœ‰è‡ªå·±ç‰¹æœ‰çš„&quot;é€»è¾‘ç›¸ç­‰&quot;æ¦‚å¿µï¼ˆä¸åŒäºå¯¹è±¡ç›¸ç­‰ï¼‰ï¼Œè€Œä¸”è¶…ç±»è¿˜æ²¡æœ‰è¦†ç›–squalsã€‚è¿™å±äº<code>å€¼ç±»</code>çš„æƒ…å†µï¼Œå€¼ç±»åªæ˜¯è¡¨ç¤ºå€¼çš„ç±»ï¼Œä¾‹å¦‚ Integer æˆ– Stringã€‚ç¨‹åºå‘˜åœ¨åˆ©ç”¨equalsæ–¹æ³•æ¥æ¯”è¾ƒå€¼å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œå¸Œæœ›çŸ¥é“å®ƒä»¬åœ¨é€»è¾‘ä¸Šæ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯æƒ³çŸ¥é“å®ƒä»¬æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚è¦†ç›– equals æ–¹æ³•ä¸ä»…æ˜¯ä¸ºäº†æ»¡è¶³ç¨‹åºå‘˜çš„æœŸæœ›ï¼Œå®ƒè¿˜ä½¿å®ä¾‹èƒ½å¤Ÿä½œä¸º Map çš„é”®æˆ– Set å…ƒç´ æ—¶ï¼Œå…·æœ‰å¯é¢„æµ‹çš„ã€ç†æƒ³çš„è¡Œä¸ºã€‚</p>
<p>æœ‰ä¸€ä¸ªè¡¨ç¤ºçŠ¶æ€çš„å†…éƒ¨ç±»ã€‚æ²¡æœ‰è¦†ç›– equals æ–¹æ³•æ—¶ï¼Œequals çš„ç»“æœä¸ s1==s2 ç›¸åŒï¼Œä¸º falseï¼Œå³ä¸¤è€…å¹¶ä¸æ˜¯ç›¸åŒå¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Status {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String status;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Status s1 = <span style="color:#fff;font-weight:bold">new</span> Status();
</span></span><span style="display:flex;"><span>Status s2 = <span style="color:#fff;font-weight:bold">new</span> Status();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s1 == s2); <span style="color:#007f7f">// false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s1.<span style="color:#007f7f">equals</span>(s2)); <span style="color:#007f7f">// false
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¦†ç›– equals æ–¹æ³•åï¼Œä»¥ä¸šåŠ¡é€»è¾‘æ¥åˆ¤æ–­æ˜¯å¦ç›¸åŒï¼Œå…·å¤‡ç›¸åŒ status å­—æ®µå³ä¸ºç›¸åŒã€‚åœ¨ä½¿ç”¨å»é‡åŠŸèƒ½æ—¶ï¼Œä¹Ÿä»¥æ­¤ä½œä¸ºåˆ¤æ–­ä¾æ®ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Status {
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> String status;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> Objects.<span style="color:#007f7f">equals</span>(status, ((Status) o).<span style="color:#007f7f">status</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Status s1 = <span style="color:#fff;font-weight:bold">new</span> Status();
</span></span><span style="display:flex;"><span>Status s2 = <span style="color:#fff;font-weight:bold">new</span> Status();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s1 == s2); <span style="color:#007f7f">// false
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s1.<span style="color:#007f7f">equals</span>(s2)); <span style="color:#007f7f">// true
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æšä¸¾ç±»ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•ï¼Œåœ¨æšä¸¾ç±»ä¸­ï¼Œæ¯ä¸ªå€¼è‡³å¤šåªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ã€‚å¯¹æšä¸¾ç±»è€Œè¨€ï¼Œé€»è¾‘ç›¸åŒå’Œå¯¹è±¡ç›¸åŒæ˜¯ä¸€å›äº‹ï¼Œå› æ­¤å¯¹è±¡çš„equals æ–¹æ³•å‡½æ•°ä¸é€»è¾‘ equals æ–¹æ³•ç›¸åŒã€‚</p>
<p>å½“ä½ è¦†ç›– equals æ–¹æ³•æ—¶ï¼Œä½ å¿…é¡»éµå®ˆå®ƒçš„é€šç”¨çº¦å®šã€‚ä»¥ä¸‹æ˜¯å…·ä½“å†…å®¹ï¼Œæ¥è‡ª Object è§„èŒƒï¼š
equals æ–¹æ³•å®ç°äº†ç­‰ä»·å…³ç³»ï¼Œå…¶å±æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‡ªåæ€§ï¼ˆreflexive)ï¼šå¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xï¼Œx.equals(x)å¿…é¡»è¿”å›trueã€‚</li>
<li>å¯¹ç§°æ€§ï¼ˆsymmetric)ï¼šå¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xå’Œyï¼Œå½“ä¸”ä»…å½“y.equals(x)è¿”å›trueæ—¶ï¼Œx.equals(y)å¿…é¡»è¿”å›trueã€‚</li>
<li>ä¼ é€’æ€§ï¼ˆtransitive)ï¼šå¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xã€yå’Œzï¼Œå¦‚æœx.equals(y)è¿”å›trueï¼Œå¹¶ä¸”y.equals(z)ä¹Ÿè¿”å›trueï¼Œé‚£ä¹ˆx.equals(z)ä¹Ÿå¿…é¡»è¿”å›trueã€‚</li>
<li>ä¸€è‡´æ€§ï¼ˆconsistent)ï¼šå¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xå’Œyï¼Œåªè¦equalsçš„æ¯”è¾ƒæ“ä½œåœ¨å¯¹è±¡ä¸­æ‰€ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¤šæ¬¡è°ƒç”¨x.equals(y)å°±ä¼šä¸€è‡´åœ°è¿”å›true,æˆ–è€…ä¸€è‡´åœ°è¿”å›falseã€‚</li>
<li>å¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xï¼Œx.equals(null)å¿…é¡»è¿”å›falseã€‚</li>
</ul>
<p>ä¸‹é¢é€ä¸€è§£é‡Šã€‚</p>
<h3 id="è‡ªåæ€§">è‡ªåæ€§<a hidden class="anchor" aria-hidden="true" href="#è‡ªåæ€§">#</a></h3>
<p>å¯¹è±¡å¿…é¡»ç­‰äºå…¶è‡ªèº«ã€‚</p>
<h3 id="å¯¹ç§°æ€§">å¯¹ç§°æ€§<a hidden class="anchor" aria-hidden="true" href="#å¯¹ç§°æ€§">#</a></h3>
<p>å¦‚æœaç­‰äºbï¼Œé‚£ä¹ˆbä¹Ÿè¦ç­‰äºaã€‚ä¸¾ä¾‹è¯´æ˜</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> CaseInsensitiveString {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> String s;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> CaseInsensitiveString(String s) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">s</span> = Objects.<span style="color:#007f7f">requireNonNull</span>(s);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (o <span style="color:#fff;font-weight:bold">instanceof</span> CaseInsensitiveString)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">equalsIgnoreCase</span>(((CaseInsensitiveString) o).<span style="color:#007f7f">s</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (o <span style="color:#fff;font-weight:bold">instanceof</span> String) <span style="color:#007f7f">// One-way interoperability!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span> s.<span style="color:#007f7f">equalsIgnoreCase</span>((String) o);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªç±»ä¸­çš„ equals æ–¹æ³•å°è¯•ä¸æ™®é€šå­—ç¬¦ä¸²è¿›è¡Œäº’æ“ä½œã€‚å‡è®¾æœ‰ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>CaseInsensitiveString cis = <span style="color:#fff;font-weight:bold">new</span> CaseInsensitiveString(<span style="color:#0ff;font-weight:bold">&#34;Polish&#34;</span>);
</span></span><span style="display:flex;"><span>String s = <span style="color:#0ff;font-weight:bold">&#34;polish&#34;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œcis.equals(s) è¿”å› trueã€‚é—®é¢˜æ˜¯ï¼Œè™½ç„¶ CaseInsensitiveString ä¸­çš„ equals æ–¹æ³•çŸ¥é“æ™®é€šå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ String ä¸­çš„ equals æ–¹æ³•å¯¹ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²ä¸çŸ¥æƒ…ã€‚å› æ­¤ï¼Œs.equals(cis) è¿”å› falseï¼Œè¿™æ˜æ˜¾è¿åäº†å¯¹ç§°æ€§ã€‚
ä¸ºäº†æ¶ˆé™¤è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€ä» equals æ–¹æ³•ä¸­åˆ é™¤ä¸ String äº’æ“ä½œçš„é”™è¯¯å°è¯•ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> o <span style="color:#fff;font-weight:bold">instanceof</span> CaseInsensitiveString &amp;&amp; ((CaseInsensitiveString) o).<span style="color:#007f7f">s</span>.<span style="color:#007f7f">equalsIgnoreCase</span>(s);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä¼ é€’æ€§">ä¼ é€’æ€§<a hidden class="anchor" aria-hidden="true" href="#ä¼ é€’æ€§">#</a></h3>
<p>å¦‚æœaç­‰äºbï¼Œä¸”bç­‰äºcï¼Œé‚£ä¹ˆaä¹Ÿè¦ç­‰äºcã€‚ç¤ºä¾‹å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Point {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Point(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">x</span> = x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">y</span> = y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> Point))
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        Point p = (Point)o;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> p.<span style="color:#007f7f">x</span> == x &amp;&amp; p.<span style="color:#007f7f">y</span> == y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»§æ‰¿ä¸Šè¾¹çš„ç±»ï¼Œæ·»åŠ é¢œè‰²å±æ€§ï¼Œå®ç°equals</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ColorPoint <span style="color:#fff;font-weight:bold">extends</span> Point {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> java.<span style="color:#007f7f">awt</span>.<span style="color:#007f7f">Color</span> color;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ColorPoint(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y, java.<span style="color:#007f7f">awt</span>.<span style="color:#007f7f">Color</span> color) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(x, y);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">color</span> = color;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> ColorPoint))
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">super</span>.<span style="color:#007f7f">equals</span>(o) &amp;&amp; ((ColorPoint) o).<span style="color:#007f7f">color</span> == color;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºå¹¶æ¯”è¾ƒ</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Point p = <span style="color:#fff;font-weight:bold">new</span> Point(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>ColorPoint cp = <span style="color:#fff;font-weight:bold">new</span> ColorPoint(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>, java.<span style="color:#007f7f">awt</span>.<span style="color:#007f7f">Color</span>.<span style="color:#007f7f">RED</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(p.<span style="color:#007f7f">equals</span>(cp));<span style="color:#007f7f">//true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(cp.<span style="color:#007f7f">equals</span>(p));<span style="color:#007f7f">//false
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä¸‹é¢å¯¹ColorPointçš„equalsåšæ”¹åŠ¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> Point))
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// If o is a normal Point, do a color-blind comparison
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> ColorPoint))
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> o.<span style="color:#007f7f">equals</span>(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// o is a ColorPoint; do a full comparison
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">super</span>.<span style="color:#007f7f">equals</span>(o) &amp;&amp; ((ColorPoint) o).<span style="color:#007f7f">color</span> == color;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ–¹æ³•ç¡®å®æä¾›äº†å¯¹ç§°æ€§ï¼Œä½†ç‰ºç‰²äº†ä¼ é€’æ€§ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ColorPoint p1 = <span style="color:#fff;font-weight:bold">new</span> ColorPoint(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>, Color.<span style="color:#007f7f">RED</span>);
</span></span><span style="display:flex;"><span>Point p2 = <span style="color:#fff;font-weight:bold">new</span> Point(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>ColorPoint p3 = <span style="color:#fff;font-weight:bold">new</span> ColorPoint(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>, Color.<span style="color:#007f7f">BLUE</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(p1.<span style="color:#007f7f">equals</span>(p2));
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(p2.<span style="color:#007f7f">equals</span>(p3));
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(p1.<span style="color:#007f7f">equals</span>(p3));
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨ï¼Œp1.equals(p2) å’Œ p2.equals(p3) è¿”	å› trueï¼Œè€Œ p1.equals(p3) è¿”å› falseï¼Œè¿™æ˜æ˜¾è¿åäº†ä¼ é€’æ€§ã€‚å‰ä¸¤ä¸ªæ¯”è¾ƒå¿½ç•¥é¢œè‰²ä¿¡æ¯ï¼Œè€Œç¬¬ä¸‰ä¸ªæ¯”è¾ƒè€ƒè™‘äº†é¢œè‰²ä¿¡æ¯ã€‚</p>
<p>åŒæ ·ï¼Œè¿™ç§æ–¹æ³•ä¼šå¯¼è‡´æ— é™çš„é€’å½’ï¼šå‡è®¾æœ‰ä¸¤ä¸ªç‚¹çš„å­ç±»ï¼Œæ¯”å¦‚ ColorPoint å’Œ SmellPointï¼Œæ¯ä¸ªéƒ½ä½¿ç”¨è¿™ç§equals æ–¹æ³•ã€‚ç„¶åè°ƒç”¨ myColorPoint.equals(mySmellPoint) ä¼šæŠ›å‡º StackOverflowErrorã€‚</p>
<p>é‚£è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ä¸­å…³äºç­‰ä»·å…³ç³»çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜ã€‚æˆ‘ä»¬æ— æ³•åœ¨æ‰©å±•å¯å®ä¾‹åŒ–çš„ç±»çš„åŒæ—¶ï¼Œæ—¢å¢åŠ æ–°çš„å€¼ç»„ä»¶ï¼ŒåŒæ—¶åˆä¿ç•™equalsçº¦å®šï¼Œé™¤éæ„¿æ„æ”¾å¼ƒé¢å‘å¯¹è±¡çš„æŠ½è±¡æ‰€å¸¦æ¥çš„ä¼˜åŠ¿ã€‚</p>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™æŒ‡å‡ºï¼šä»»ä½•çˆ¶ç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSP æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰çˆ¶ç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼Œçˆ¶ç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨çˆ¶ç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚</p>
<h3 id="ä¸€è‡´æ€§">ä¸€è‡´æ€§<a hidden class="anchor" aria-hidden="true" href="#ä¸€è‡´æ€§">#</a></h3>
<p>å¦‚æœaå’Œbç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬è¦å§‹ç»ˆä¿æŒç›¸ç­‰ï¼Œé™¤éå®ƒä»¬è¢«ä¿®æ”¹äº†ã€‚æ¢å¥è¯è¯´ï¼Œå¯å˜å¯¹è±¡å¯ä»¥ç­‰äºä¸åŒæ—¶é—´çš„ä¸åŒå¯¹è±¡ï¼Œè€Œä¸å¯å˜å¯¹è±¡ä¸èƒ½ã€‚å½“ä½ åœ¨ç¼–å†™ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œåº”è¯¥ä»”ç»†è€ƒè™‘å®ƒæ˜¯å¦åº”è¯¥æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœè®¤ä¸ºå®ƒæ˜¯ä¸å¯å˜çš„ï¼Œé‚£å¿…é¡»ä¿è¯equalsæ–¹æ³•æ»¡è¶³è¿™æ ·çš„é™åˆ¶æ¡ä»¶ï¼šç›¸ç­‰çš„å¯¹è±¡å§‹ç»ˆæ˜¯ç›¸ç­‰ï¼Œè€Œä¸ç­‰çš„å¯¹è±¡å§‹ç»ˆæ˜¯ä¸ç­‰ã€‚</p>
<h3 id="éç©ºæ€§">éç©ºæ€§<a hidden class="anchor" aria-hidden="true" href="#éç©ºæ€§">#</a></h3>
<p>å¾ˆéš¾æƒ³è±¡o.equals(null)åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿”å›trueã€‚è®¸å¤šç±»çš„equalsæ–¹æ³•éƒ½é€šè¿‡ä¸€ä¸ªæ˜¾ç¤ºçš„éç©ºåˆ¤æ–­é˜²æ­¢è¿™ç§æƒ…å†µï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (o == <span style="color:#fff;font-weight:bold">null</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é¡¹éç©ºåˆ¤æ–­æ˜¯ä¸å¿…è¦çš„ã€‚ä¸ºäº†æµ‹è¯•å…¶å‚æ•°çš„ç­‰åŒæ€§ï¼Œequalsæ–¹æ³•å¿…é¡»å…ˆæŠŠå‚æ•°è½¬æ¢æˆé€‚å½“çš„ç±»å‹ï¼Œä»¥ä¾¿å¯ä»¥è°ƒç”¨å®ƒçš„è®¿é—®æ–¹æ³•ï¼Œæˆ–è€…è®¿é—®å®ƒçš„åŸŸã€‚åœ¨è¿›è¡Œè½¬æ¢ä¹‹å‰ï¼Œequalsæ–¹æ³•å¿…é¡»ä½¿ç”¨instanceofæ“ä½œç¬¦ï¼Œæ£€æŸ¥å…¶å‚æ•°çš„ç±»å‹æ˜¯å¦æ­£ç¡®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> MyType))
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    MyType mt = (MyType) o;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ¼æ‰äº†è¿™ä¸€æ­¥çš„ç±»å‹æ£€æŸ¥ï¼Œå¹¶ä¸”ä¼ é€’ç»™equalsæ–¹æ³•çš„å‚æ•°åˆæ˜¯é”™è¯¯çš„ç±»å‹ï¼Œé‚£ä¹ˆequalsæ–¹æ³•å°†ä¼šæŠ›å‡ºClassCastExceptionå¼‚å¸¸ï¼Œè¿™å°±è¿åäº†equalsçº¦å®šã€‚ä½†æ˜¯ï¼Œå¦‚æœinstanceofçš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸ºnullï¼Œé‚£ä¹ˆï¼Œä¸ç®¡ç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯å“ªç§ç±»å‹ï¼Œinstanceofæ“ä½œç¬¦éƒ½æŒ‡å®šåº”è¯¥è¿”å›falseã€‚å› æ­¤ï¼Œå¦‚æœæŠŠnullä¼ ç»™equalsæ–¹æ³•ï¼Œç±»å‹æ£€æŸ¥å°±ä¼šè¿”å›falseï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼çš„nullæ£€æŸ¥ã€‚</p>
<h3 id="ç»¼ä¸Šæ‰€è¿°æ„å»ºé«˜è´¨é‡-equals-æ–¹æ³•çš„ç§˜è¯€">ç»¼ä¸Šæ‰€è¿°ï¼Œæ„å»ºé«˜è´¨é‡ equals æ–¹æ³•çš„ç§˜è¯€ï¼š<a hidden class="anchor" aria-hidden="true" href="#ç»¼ä¸Šæ‰€è¿°æ„å»ºé«˜è´¨é‡-equals-æ–¹æ³•çš„ç§˜è¯€">#</a></h3>
<ul>
<li>
<p>ä½¿ç”¨ == è¿ç®—ç¬¦æ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚
å¦‚æœæ˜¯ï¼Œè¿”å› trueã€‚è¿™åªæ˜¯ä¸€ç§æ€§èƒ½ä¼˜åŒ–ï¼Œä½†å¦‚æœæ¯”è¾ƒçš„ä»£ä»·å¯èƒ½å¾ˆé«˜ï¼Œé‚£ä¹ˆè¿™ç§ä¼˜åŒ–æ˜¯å€¼å¾—çš„ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ instanceof è¿ç®—ç¬¦æ£€æŸ¥å‚æ•°æ˜¯å¦å…·æœ‰æ­£ç¡®çš„ç±»å‹ã€‚ å¦‚æœä¸æ˜¯ï¼Œè¿”å› falseã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€è°“æ­£ç¡®çš„ç±»å‹ï¼Œæ˜¯æŒ‡equalsæ–¹æ³•æ‰€åœ¨çš„é‚£ä¸ªç±»ã€‚æœ‰æ—¶å€™ï¼Œå®ƒæ˜¯ç”±è¿™ä¸ªç±»å®ç°çš„æŸä¸ªæ¥å£ã€‚å¦‚æœç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£å¯¹ equals çº¦å®šè¿›è¡Œäº†æ”¹è¿›ï¼Œä»¥å…è®¸åœ¨å®ç°äº†è¯¥æ¥å£çš„ç±»ä¹‹é—´è¿›è¡Œæ¯”è¾ƒï¼Œåˆ™ä½¿ç”¨æ¥å£ã€‚é›†åˆæ¥å£ï¼Œå¦‚ Setã€Listã€Map å’Œ Map.Entry å…·æœ‰è¿™æ ·çš„ç‰¹æ€§ã€‚</p>
</li>
<li>
<p>å°†å‚æ•°è½¬æ¢ä¸ºæ­£ç¡®çš„ç±»å‹ã€‚
å› ä¸ºåœ¨è¿™ä¸ªå¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹å‰æœ‰ä¸€ä¸ªinstanceofæµ‹è¯•ï¼Œæ‰€ä»¥è½¬æ¢è‚¯å®šä¼šæˆåŠŸã€‚</p>
</li>
<li>
<p>å¯¹äºç±»ä¸­çš„æ¯ä¸ªã€Œé‡è¦ã€å­—æ®µï¼Œæ£€æŸ¥å‚æ•°çš„å­—æ®µæ˜¯å¦ä¸è¯¥å¯¹è±¡çš„ç›¸åº”å­—æ®µåŒ¹é…ã€‚
å¦‚æœæ‰€æœ‰è¿™äº›æµ‹è¯•éƒ½æˆåŠŸï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚å¦‚æœç¬¬ 2 æ­¥ä¸­çš„ç±»å‹æ˜¯æ¥å£ï¼Œåˆ™å¿…é¡»é€šè¿‡æ¥å£æ–¹æ³•è®¿é—®å‚æ•°çš„å­—æ®µï¼›å¦‚æœæ˜¯ç±»ï¼Œä½ å¯ä»¥æ ¹æ®å­—æ®µçš„å¯è®¿é—®æ€§ç›´æ¥è®¿é—®å®ƒä»¬ã€‚</p>
</li>
</ul>
<p>å¯¹äºæ—¢ä¸æ˜¯floatä¹Ÿä¸æ˜¯doubleç±»å‹çš„åŸºæœ¬ç±»å‹åŸŸï¼Œå¯ä»¥ä½¿ç”¨ == æ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒï¼›
å¯¹äºå¯¹è±¡å¼•ç”¨åŸŸï¼Œå¯ä»¥é€’å½’åœ°è°ƒç”¨equalsæ–¹æ³•ï¼›
å¯¹äºfloatåŸŸï¼Œå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•<code>Float.compare(float,float)</code>ï¼›
å¯¹äºdoubleåŸŸï¼Œåˆ™ä½¿ç”¨<code>Double.compare(double,double)</code>ã€‚</p>
<p>å¯¹floatå’ŒdoubleåŸŸè¿›è¡Œç‰¹æ®Šçš„å¤„ç†æ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå­˜åœ¨ç€Float.NaNã€-0.0fä»¥åŠç±»ä¼¼çš„doubleå¸¸é‡ï¼›è™½ç„¶å¯ä»¥ç”¨é™æ€æ–¹æ³•<code>Float.equals</code>å’Œ<code>Double.equals</code>å¯¹floatå’ŒdoubleåŸŸè¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯æ¯æ¬¡æ¯”è¾ƒéƒ½è¦è¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œè¿™ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚
å¯¹äºæ•°ç»„åŸŸï¼Œåˆ™è¦æŠŠä»¥ä¸Šè¿™äº›æŒ‡å¯¼åŸåˆ™åº”ç”¨åˆ°æ¯ä¸€ä¸ªå…ƒç´ ä¸Šã€‚
å¦‚æœæ•°ç»„åŸŸä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¾ˆé‡è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªArrays.equalsæ–¹æ³•ã€‚</p>
<p>æœ‰äº›å¯¹è±¡å¼•ç”¨åŸŸåŒ…å«nullå¯èƒ½æ˜¯åˆæ³•çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¯èƒ½å¯¼è‡´NullPointerExceptionå¼‚å¸¸ï¼Œåˆ™ä½¿ç”¨é™æ€æ–¹æ³•Objects.equals(Object,Object)æ¥æ£€æŸ¥è¿™ç±»åŸŸçš„ç­‰åŒæ€§ã€‚</p>
<p>å¯¹äºæœ‰äº›ç±»ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„ CaseInsensitivestringç±»ï¼ŒåŸŸçš„æ¯”è¾ƒè¦æ¯”ç®€å•çš„ç­‰åŒæ€§æµ‹è¯•å¤æ‚å¾—å¤šã€‚
å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œå¯èƒ½å¸Œæœ›ä¿å­˜è¯¥åŸŸçš„ä¸€ä¸ªâ€œèŒƒå¼â€ï¼Œè¿™æ · equalsæ–¹æ³•å°±å¯ä»¥æ ¹æ®è¿™äº›èŒƒå¼è¿›è¡Œä½å¼€é”€çš„ç²¾ç¡®æ¯”è¾ƒï¼Œè€Œä¸æ˜¯é«˜å¼€é”€çš„éç²¾ç¡®æ¯”è¾ƒã€‚è¿™ç§æ–¹æ³•å¯¹äºä¸å¯å˜ç±»æ˜¯æœ€ä¸ºåˆé€‚çš„ï¼›å¦‚æœå¯¹è±¡å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå°±å¿…é¡»ä½¿å…¶èŒƒå¼ä¿æŒæœ€æ–°ã€‚</p>
<p>å­—æ®µçš„æ¯”è¾ƒé¡ºåºå¯èƒ½ä¼šå½±å“ equals æ–¹æ³•çš„æ€§èƒ½ã€‚
ä¸ºäº†è·å¾—æœ€ä½³çš„æ€§èƒ½ï¼Œåº”è¯¥æœ€å…ˆæ¯”è¾ƒæœ€æœ‰å¯èƒ½ä¸ä¸€è‡´çš„å­—æ®µï¼Œæˆ–è€…æ˜¯å¼€é”€æœ€ä½çš„å­—æ®µï¼Œæœ€ç†æƒ³çš„æƒ…å†µæ˜¯ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³çš„å­—æ®µã€‚
ä¸åº”è¯¥æ¯”è¾ƒé‚£äº›ä¸å±äºå¯¹è±¡é€»è¾‘çŠ¶æ€çš„å­—æ®µï¼Œä¾‹å¦‚ç”¨äºåŒæ­¥æ“ä½œçš„Lockå­—æ®µã€‚
ä¹Ÿä¸éœ€è¦æ¯”è¾ƒè¡ç”Ÿå­—æ®µï¼Œå› ä¸ºè¿™äº›åŸŸå¯ä»¥ç”±â€œå…³é”®å­—æ®µâ€è®¡ç®—è·å¾—ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰å¯èƒ½æé«˜ equalsæ–¹æ³•çš„æ€§èƒ½ã€‚
å¦‚æœè¡ç”Ÿå­—æ®µä»£è¡¨äº†æ•´ä¸ªå¯¹è±¡çš„ç»¼åˆæè¿°ï¼Œæ¯”è¾ƒè¿™ä¸ªå­—æ®µå¯ä»¥èŠ‚çœåœ¨æ¯”è¾ƒå¤±è´¥æ—¶å»æ¯”è¾ƒå®é™…æ•°æ®æ‰€éœ€è¦çš„å¼€é”€ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå¤šè¾¹å½¢ç±»ï¼Œå¹¶ç¼“å­˜äº†è¯¥å¤šè¾¹å½¢çš„é¢ç§¯ã€‚å¦‚æœä¸¤ä¸ªå¤šè¾¹å½¢æœ‰ç€ä¸åŒçš„é¢ç§¯ï¼Œå°±æ²¡æœ‰å¿…è¦å»æ¯”è¾ƒå®ƒä»¬çš„è¾¹å’Œé¡¶ç‚¹ã€‚</p>
<p>å†™å®Œ equals æ–¹æ³•åï¼Œé—®è‡ªå·±ä¸‰ä¸ªé—®é¢˜ï¼šå®ƒå…·å¤‡å¯¹ç§°æ€§å—ï¼Ÿå…·å¤‡ä¼ é€’æ€§å—ï¼Ÿå…·å¤‡ä¸€è‡´æ€§å—ï¼Ÿ ä¸è¦åªé—®è‡ªå·±ï¼Œè¦ç¼–å†™å•å…ƒæµ‹è¯•æ¥æ£€æŸ¥ï¼Œé™¤éä½¿ç”¨ AutoValueæ¥ç”Ÿæˆ equals æ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å®‰å…¨åœ°çœç•¥æµ‹è¯•ã€‚å¦‚æœå±æ€§ä¸èƒ½ä¿æŒï¼Œè¯·æ‰¾å‡ºåŸå› ï¼Œå¹¶ç›¸åº”åœ°ä¿®æ”¹ equals æ–¹æ³•ã€‚å½“ç„¶ï¼Œequals æ–¹æ³•è¿˜å¿…é¡»æ»¡è¶³å…¶ä»–ä¸¤ä¸ªå±æ€§ï¼ˆåèº«æ€§å’Œéæ— æ•ˆæ€§ï¼‰ï¼Œä½†è¿™ä¸¤ä¸ªé€šå¸¸ä¼šè‡ªå·±å¤„ç†ã€‚</p>
<p>åœ¨è¿™ä¸ªç®€å•çš„ PhoneNumber ç±»ä¸­ï¼Œæ ¹æ®å‰é¢çš„æ–¹æ³•æ„é€ äº†ä¸€ä¸ª equals æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> PhoneNumber {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">short</span> areaCode, prefix, lineNum;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> PhoneNumber(<span style="color:#fff;font-weight:bold">int</span> areaCode, <span style="color:#fff;font-weight:bold">int</span> prefix, <span style="color:#fff;font-weight:bold">int</span> lineNum) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">areaCode</span> = rangeCheck(areaCode, <span style="color:#ff0;font-weight:bold">999</span>, <span style="color:#0ff;font-weight:bold">&#34;area code&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">prefix</span> = rangeCheck(prefix, <span style="color:#ff0;font-weight:bold">999</span>, <span style="color:#0ff;font-weight:bold">&#34;prefix&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">lineNum</span> = rangeCheck(lineNum, <span style="color:#ff0;font-weight:bold">9999</span>, <span style="color:#0ff;font-weight:bold">&#34;line num&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">short</span> rangeCheck(<span style="color:#fff;font-weight:bold">int</span> val, <span style="color:#fff;font-weight:bold">int</span> max, String arg) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (val &lt; <span style="color:#ff0;font-weight:bold">0</span> || val &gt; max)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException(arg + <span style="color:#0ff;font-weight:bold">&#34;: &#34;</span> + val);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> (<span style="color:#fff;font-weight:bold">short</span>) val;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (o == <span style="color:#fff;font-weight:bold">this</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> PhoneNumber))
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        PhoneNumber pn = (PhoneNumber)o;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> pn.<span style="color:#007f7f">lineNum</span> == lineNum &amp;&amp; pn.<span style="color:#007f7f">prefix</span> == prefix &amp;&amp; pn.<span style="color:#007f7f">areaCode</span> == areaCode;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ç»“ï¼š</p>
<ul>
<li>
<p>å½“ä½ è¦†ç›– equals æ—¶ï¼Œä¹Ÿè¦†ç›– hashCodeã€‚</p>
</li>
<li>
<p>ä¸è¦ä¼å›¾è®© equals() æ–¹æ³•è¿‡äºæ™ºèƒ½ã€‚å¦‚æœåªæ˜¯ç®€å•åœ°æµ‹è¯•åŸŸä¸­çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œåˆ™ä¸éš¾åšåˆ°éµå®ˆ equalsçº¦å®šã€‚
å¦‚æœæƒ³è¿‡åº¦åœ°å»å¯»æ±‚å„ç§ç­‰ä»·å…³ç³»ï¼Œåˆ™å¾ˆå®¹æ˜“é™·äººéº»çƒ¦ä¹‹ä¸­ã€‚</p>
</li>
<li>
<p>ä¸è¦å°† equalså£°æ˜ä¸­çš„ Object å¯¹è±¡æ›¿æ¢ä¸ºå…¶ä»–çš„ç±»å‹ã€‚ç¨‹åºå‘˜ç¼–å†™å‡ºä¸‹é¢è¿™æ ·çš„equalsæ–¹æ³•å¹¶ä¸å°‘è§ï¼Œè¿™ä¼šä½¿ç¨‹åºå‘˜èŠ±ä¸Šå‡ ä¸ªå°æ—¶éƒ½æä¸æ¸…ä¸ºä»€ä¹ˆå®ƒä¸èƒ½æ­£å¸¸å·¥ä½œ</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Broken - parameter type must be Object!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(MyClass o) {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é—®é¢˜åœ¨äºï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¦†ç›–objectç±»çš„equalsæ–¹æ³•ï¼Œå› ä¸ºobjectç±»çš„ equals çš„å‚æ•°åº”è¯¥æ˜¯Objectç±»å‹ï¼Œè¿™é‡Œå…¶å®æ˜¯é‡è½½äº†objectç±»çš„ equalsæ–¹æ³•ï¼Œè¿™ä¼šå¯¼è‡´å­ç±»é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸çŸ¥é“é‡å†™å“ªä¸ªequalsæ–¹æ³•ã€‚è§„èŒƒçš„ä½¿ç”¨@Overrideæ³¨è§£ï¼Œå¯ä»¥é˜²æ­¢è¿™ç§é”™è¯¯ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä¼šç›´æ¥æŠ¥é”™ï¼Œç¼–è¯‘å™¨ä¼šå‘Šè¯‰ä½ é”™è¯¯åœ¨å“ªã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(MyClass o) {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¼–å†™å’Œæµ‹è¯• equals å’Œ hashCode æ–¹æ³•å¾ˆä¹å‘³ï¼Œç”Ÿæˆçš„ä»£ç ä¹Ÿå¾ˆå•è°ƒã€‚è°·æ­Œçš„å¼€æº AutoValue æ¡†æ¶ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆequals å’Œ hashCodeæ–¹æ³•ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒAutoValue ç”Ÿæˆçš„æ–¹æ³•ä¸ä½ è‡ªå·±ç¼–å†™çš„æ–¹æ³•åŸºæœ¬ç›¸åŒã€‚</p>
<p>IDE ä¹Ÿæœ‰ç”Ÿæˆ equals å’Œ hashCode æ–¹æ³•çš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”Ÿæˆçš„æºä»£ç æ¯”ä½¿ç”¨ AutoValue çš„ä»£ç æ›´å†—é•¿ï¼Œå¯è¯»æ€§æ›´å·®ï¼Œä¸ä¼šè‡ªåŠ¨è·Ÿè¸ªç±»ä¸­çš„å˜åŒ–ï¼ˆæ¯”å¦‚åŠ å‡å­—æ®µï¼‰ï¼Œå› æ­¤éœ€è¦è¿›è¡Œæµ‹è¯•ã€‚å³ä¾¿è¿™æ ·ï¼Œä¹Ÿæ¯”æ‰‹åŠ¨å®ç° equalså’Œ hashCodeæ–¹æ³•æ›´å¯å–ï¼Œå› ä¸º IDE ä¸ä¼šå‡ºé”™ï¼Œè€Œäººä¼šã€‚</p>
<p>æ€»ä¹‹ï¼Œé™¤éå¿…é¡»ï¼Œå¦åˆ™ä¸è¦è¦†ç›– equals æ–¹æ³•ï¼šåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä» Object ç»§æ‰¿è€Œæ¥çš„å®ç°ç¬¦åˆæˆ‘ä»¬çš„éœ€è¦ã€‚å¦‚æœä½ ç¡®å®è¦†ç›–äº† equalsï¼Œé‚£ä¹ˆä¸€å®šè¦æ¯”è¾ƒç±»çš„æ‰€æœ‰é‡è¦å­—æ®µï¼Œå¹¶ä¸”éµå®ˆä¸Šè¾¹çš„5æ¡çº¦å®šã€‚</p>
<h2 id="item-11å¦‚æœè¦†ç›–äº†-equals-æ–¹æ³•é‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›–-hashcode-æ–¹æ³•">Item-11ï¼šå¦‚æœè¦†ç›–äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›– hashCode æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#item-11å¦‚æœè¦†ç›–äº†-equals-æ–¹æ³•é‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›–-hashcode-æ–¹æ³•">#</a></h2>
<p>ï¼ˆAlways override hashCode when you override equalsï¼‰</p>
<p>å¦‚æœè¦†ç›–äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»åŒæ—¶è¦†ç›– hashCode æ–¹æ³•ã€‚ å¦‚æœä½ æ²¡æœ‰è¿™æ ·åšï¼Œè¯¥ç±»å°†è¿å hashCode æ–¹æ³•çš„çº¦å®šï¼Œè¿™å°†é˜»æ­¢è¯¥ç±»åœ¨ HashMap å’Œ HashSet ç­‰é›†åˆä¸­æ­£å¸¸è¿è¡Œã€‚çº¦å®šå†…å®¹å¦‚ä¸‹ï¼Œæ‘˜è‡ªObjectè§„èŒƒï¼š</p>
<ul>
<li>
<p>åœ¨åº”ç”¨ç¨‹åºçš„æ‰§è¡ŒæœŸé—´ï¼Œåªè¦å¯¹è±¡çš„equalsæ–¹æ³•çš„æ¯”è¾ƒæ“ä½œæ‰€ç”¨åˆ°çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¤šæ¬¡è°ƒç”¨ï¼ŒhashCodeæ–¹æ³•éƒ½å¿…é¡»å§‹ç»ˆè¿”å›åŒä¸€ä¸ªå€¼ã€‚åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸å¦ä¸€ä¸ªç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰§è¡ŒhashCodeæ–¹æ³•æ‰€è¿”å›çš„å€¼å¯ä»¥ä¸ä¸€è‡´ã€‚</p>
</li>
<li>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ®equals(Object)æ–¹æ³•æ¯”è¾ƒæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆè°ƒç”¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¸­çš„hashCodeæ–¹æ³•éƒ½å¿…é¡»äº§ç”ŸåŒæ ·çš„æ•´æ•°ç»“æœã€‚</p>
</li>
<li>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ®equals()æ–¹æ³•æ¯”è¾ƒæ˜¯ä¸ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆè°ƒç”¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¸­çš„hashCodeæ–¹æ³•ï¼Œåˆ™ä¸ä¸€å®šè¦æ±‚hashCodeæ–¹æ³•å¿…é¡»äº§ç”Ÿä¸åŒçš„ç»“æœã€‚ä½†æ˜¯ç¨‹åºå‘˜åº”è¯¥çŸ¥é“ï¼Œç»™ä¸ç›¸ç­‰çš„å¯¹è±¡äº§ç”Ÿæˆªç„¶ä¸åŒçš„æ•´æ•°ç»“æœï¼Œæœ‰å¯èƒ½æé«˜æ•£åˆ—è¡¨ï¼ˆhashtable)çš„æ€§èƒ½ã€‚</p>
</li>
</ul>
<p>å½“ä½ æ— æ³•è¦†ç›– hashCode æ–¹æ³•æ—¶ï¼Œå°†è¿åç¬¬äºŒä¸ªå…³é”®æ¡æ¬¾ï¼šç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„æ•£åˆ—ç ï¼ˆhash codeï¼‰ã€‚æ ¹æ®ç±»çš„ equals æ–¹æ³•ï¼Œä¸¤ä¸ªä¸åŒçš„å®ä¾‹åœ¨é€»è¾‘ä¸Šå¯èƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯å¯¹äºå¯¹è±¡çš„ hashCode æ–¹æ³•æ¥è¯´ï¼Œå®ƒä»¬åªæ˜¯ä¸¤ä¸ªæ²¡æœ‰å…±åŒç‚¹çš„å¯¹è±¡ã€‚å› æ­¤ï¼ŒObject çš„ hashCode æ–¹æ³•è¿”å›ä¸¤ä¸ªçœ‹ä¼¼éšæœºçš„æ•°å­—ï¼Œè€Œä¸æ˜¯çº¦å®šè¦æ±‚çš„ä¸¤ä¸ªç›¸ç­‰çš„æ•°å­—ã€‚æŸ¥çœ‹å¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Map&lt;PhoneNumber, String&gt; m = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>m.<span style="color:#007f7f">put</span>(<span style="color:#fff;font-weight:bold">new</span> PhoneNumber(<span style="color:#ff0;font-weight:bold">707</span>, <span style="color:#ff0;font-weight:bold">867</span>, <span style="color:#ff0;font-weight:bold">5309</span>), <span style="color:#0ff;font-weight:bold">&#34;Jenny&#34;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶ï¼Œä½ å¯èƒ½æœŸæœ›<code>m.get(new PhoneNumber(707,867,5309))</code>ä¼šè¿”å›&quot;Jenny&quot;ï¼Œä½†å®ƒå®é™…ä¸Šè¿”å›çš„æ˜¯nullã€‚
æ³¨æ„ï¼Œè¿™é‡Œæ¶‰åŠä¸¤ä¸ªPhoneNumberå®ä¾‹ï¼šç¬¬ä¸€ä¸ªè¢«æ’å…¥HashMapä¸­ï¼Œç¬¬äºŒä¸ªå®ä¾‹ä¸ç¬¬ä¸€ä¸ªç›¸ç­‰ï¼Œç”¨äºä»Mapä¸­æ ¹æ®PhoneNumberå»è·å–ç”¨æˆ·åå­—ã€‚</p>
<p>ç”±äºPhoneNumberç±»æ²¡æœ‰è¦†ç›–hashCodeæ–¹æ³•ï¼Œä»è€Œå¯¼è‡´ä¸¤ä¸ªç›¸ç­‰çš„å®ä¾‹å…·æœ‰ä¸ç›¸ç­‰çš„æ•£åˆ—ç ï¼Œè¿åäº†hashCodeçš„çº¦å®šã€‚putæ–¹æ³•æŠŠç”µè¯å·ç å¯¹è±¡å­˜æ”¾åœ¨ä¸€ä¸ªæ•£åˆ—æ¡¶ï¼ˆhashbucket)ä¸­ï¼Œgetæ–¹æ³•å´åœ¨å¦ä¸€ä¸ªæ•£åˆ—æ¡¶ä¸­æŸ¥æ‰¾è¿™ä¸ªç”µè¯å·ç ã€‚</p>
<p>å³ä½¿è¿™ä¸¤ä¸ªå®ä¾‹æ­£å¥½è¢«æ”¾åˆ°åŒä¸€ä¸ªæ•£åˆ—æ¡¶ä¸­ï¼Œgetæ–¹æ³•ä¹Ÿå¿…å®šä¼šè¿”å›nullï¼Œå› ä¸ºHashMapæœ‰ä¸€é¡¹ä¼˜åŒ–ï¼Œå¯ä»¥å°†ä¸æ¯ä¸ªé¡¹ç›¸å…³è”çš„æ•£åˆ—ç ç¼“å­˜èµ·æ¥ï¼Œå¦‚æœæ•£åˆ—ç ä¸åŒ¹é…ï¼Œä¹Ÿå°±ä¸å†å»æ£€éªŒå¯¹è±¡çš„ç­‰åŒæ€§ã€‚</p>
<p>ä¿®æ­£è¿™ä¸ªé—®é¢˜éå¸¸ç®€å•ï¼Œåªéœ€ä¸ºPhoneNumberç±»æä¾›ä¸€ä¸ªé€‚å½“çš„hashCodeæ–¹æ³•å³å¯ã€‚é‚£ä¹ˆï¼ŒhashCodeæ–¹æ³•åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿä¸‹é¢çš„æ–¹æ³•è™½ç„¶åˆæ³•ï¼Œä½†ä¸åˆç†</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> hashCode() {
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">42</span>; 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¹ˆå†™æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†ç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„æ•£åˆ—ç ã€‚åŒæ—¶å®ƒä¹Ÿå¾ˆç³Ÿç³•ï¼Œå› ä¸ºå®ƒä½¿æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„æ•£åˆ—ç ã€‚å› æ­¤ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½åˆ†é…åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œæ•£åˆ—è¡¨é€€åŒ–ä¸ºé“¾è¡¨ã€‚è¿™æ ·ï¼ŒåŸæœ¬åº”è¯¥åœ¨çº¿æ€§é˜¶ O(n) è¿è¡Œçš„ç¨‹åºå°†åœ¨å¹³æ–¹é˜¶ O(n^2) è¿è¡Œã€‚å¯¹äºå¤§å‹æ•£åˆ—è¡¨ï¼Œè¿™ä¼šå…³ç³»åˆ°èƒ½å¦æ­£å¸¸å·¥ä½œã€‚</p>
<p>ä¸€ä¸ªå¥½çš„æ•£åˆ—å‡½æ•°é€šå¸¸å€¾å‘äºâ€œä¸ºä¸ç›¸ç­‰çš„å¯¹è±¡äº§ç”Ÿä¸ç›¸ç­‰çš„æ•£åˆ—ç â€ã€‚è¿™æ­£æ˜¯hashcodeçº¦å®šä¸­ç¬¬ä¸‰æ¡çš„å«ä¹‰ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ•£åˆ—å‡½æ•°åº”è¯¥æŠŠé›†åˆä¸­ä¸ç›¸ç­‰çš„å®ä¾‹å‡åŒ€åœ°åˆ†å¸ƒåˆ°æ‰€æœ‰å¯èƒ½çš„intå€¼ä¸Šã€‚è¦æƒ³å®Œå…¨è¾¾åˆ°è¿™ç§ç†æƒ³çš„æƒ…å½¢æ˜¯éå¸¸å›°éš¾çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œç›¸å¯¹æ¥è¿‘è¿™ç§ç†æƒ³æƒ…å½¢åˆ™å¹¶ä¸å¤ªå›°éš¾ã€‚ä¸‹é¢ç»™å‡ºä¸€ç§ç®€å•çš„è§£å†³åŠæ³•ï¼š</p>
<ol>
<li>å£°æ˜ä¸€ä¸ªåä¸º result çš„ int å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºå¯¹è±¡ä¸­ç¬¬ä¸€ä¸ªé‡è¦å­—æ®µçš„æ•£åˆ—ç  cã€‚</li>
<li>å¯¹è±¡ä¸­å‰©ä½™çš„é‡è¦å­—æ®µ fï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
<ul>
<li>ä¸ºå­—æ®µè®¡ç®—ä¸€ä¸ªæ•´æ•°æ•£åˆ—ç  cï¼š
<ul>
<li>å¦‚æœå­—æ®µæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè®¡ç®— Type.hashCode(f)ï¼Œå…¶ä¸­ type æ˜¯ä¸ f ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ã€‚</li>
<li>å¦‚æœå­—æ®µæ˜¯å¯¹è±¡å¼•ç”¨ï¼Œå¹¶ä¸”è¯¥ç±»çš„ equals æ–¹æ³•é€šè¿‡é€’å½’è°ƒç”¨ equals æ–¹æ³•æ¥æ¯”è¾ƒå­—æ®µï¼Œåˆ™é€’å½’è°ƒ
ç”¨å­—æ®µä¸Šçš„ hashCode æ–¹æ³•ã€‚å¦‚æœå­—æ®µçš„å€¼ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ 0ï¼ˆæˆ–å…¶ä»–å¸¸æ•°ï¼Œä½† 0 æ˜¯æƒ¯ç”¨çš„ï¼‰ã€‚</li>
<li>å¦‚æœå­—æ®µæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™å°†å…¶æ¯ä¸ªé‡è¦å…ƒç´ éƒ½è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„å­—æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡é€’å½’åœ°åº”ç”¨
è¿™äº›è§„åˆ™è®¡ç®—æ¯ä¸ªé‡è¦å…ƒç´ çš„æ•£åˆ—ç ï¼Œå¹¶å°†æ¯ä¸ªæ­¥éª¤çš„å€¼ç»„åˆèµ·æ¥ã€‚å¦‚æœæ•°ç»„ä¸­æ²¡æœ‰é‡è¦å…ƒç´ ï¼Œåˆ™
ä½¿ç”¨å¸¸é‡ï¼Œæœ€å¥½ä¸æ˜¯ 0ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½å¾ˆé‡è¦ï¼Œé‚£ä¹ˆä½¿ç”¨ Arrays.hashCodeã€‚</li>
</ul>
</li>
<li>å°†æ­¥éª¤ 2.a ä¸­è®¡ç®—çš„æ•£åˆ—ç  c åˆå¹¶åˆ° result å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
<code>result = 31 * result + c;</code></li>
</ul>
</li>
<li>è¿”å› result å˜é‡ã€‚</li>
</ol>
<p>é€‰æ‹© 31 æ˜¯å› ä¸ºå®ƒæ˜¯å¥‡ç´ æ•°ã€‚å¦‚æœæ˜¯å¶æ•°ï¼Œä¹˜æ³•è¿ç®—å°±ä¼šæº¢å‡ºï¼Œä¿¡æ¯å°±ä¼šä¸¢å¤±ï¼Œå› ä¸ºä¹˜æ³•è¿ç®—ç­‰åŒäºç§»ä½ã€‚ä½¿ç”¨ç´ æ•°çš„å¥½å¤„ä¸å¤ªæ˜æ˜¾ï¼Œä½†å®ƒæ˜¯ä¼ ç»Ÿç”¨æ³•ã€‚31 æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨ç§»ä½å’Œå‡æ³•æ¥ä»£æ›¿ä¹˜æ³•ï¼Œä»è€Œåœ¨æŸäº›ä½“ç³»ç»“æ„ä¸Šè·å¾—æ›´å¥½çš„æ€§èƒ½ï¼š<code>31 * i == (i &lt;&lt;5) â€“ i</code>ã€‚ç°ä»£è™šæ‹Ÿæœºè‡ªåŠ¨è¿›è¡Œè¿™ç§ä¼˜åŒ–ã€‚å°†å‰é¢çš„æ–¹æ³•åº”ç”¨åˆ° PhoneNumber ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> hashCode() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> result = Short.<span style="color:#007f7f">hashCode</span>(areaCode);
</span></span><span style="display:flex;"><span>    result = <span style="color:#ff0;font-weight:bold">31</span> * result + Short.<span style="color:#007f7f">hashCode</span>(prefix);
</span></span><span style="display:flex;"><span>    result = <span style="color:#ff0;font-weight:bold">31</span> * result + Short.<span style="color:#007f7f">hashCode</span>(lineNum);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç®€å•çš„ç¡®å®šçš„è®¡ç®—ç»“æœï¼Œå®ƒçš„å”¯ä¸€è¾“å…¥æ˜¯ PhoneNumber å®ä¾‹ä¸­çš„ä¸‰ä¸ªé‡è¦å­—æ®µï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾ï¼Œç›¸ç­‰çš„ PhoneNumber å®ä¾‹å…·æœ‰ç›¸ç­‰çš„æ•£åˆ—ç ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ PhoneNumber çš„ä¸€ä¸ªéå¸¸å¥½çš„ hashCode æ–¹æ³•å®ç°ï¼Œä¸ Java åº“ä¸­çš„ hashCode æ–¹æ³•å®ç°ç›¸å½“ã€‚å®ƒå¾ˆç®€å•ï¼Œé€Ÿåº¦ä¹Ÿç›¸å½“å¿«ï¼Œå¹¶ä¸”åˆç†åœ°å°†ä¸ç›¸ç­‰çš„ç”µè¯å·ç åˆ†æ•£åˆ°ä¸åŒçš„æ•£åˆ—æ¡¶ä¸­ã€‚</p>
<p>Objects ç±»æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå®ƒæ¥å—ä»»æ„æ•°é‡çš„å¯¹è±¡å¹¶è¿”å›å®ƒä»¬çš„æ•£åˆ—ç ã€‚è¿™ä¸ªåä¸º hash çš„æ–¹æ³•å…è®¸ä½ ç¼–å†™åªæœ‰ä¸€è¡Œä»£ç çš„ hashCode æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„è´¨é‡å¯ä»¥ä¸æœ¬æ¡ç›®ä¸­æä¾›çš„ç¼–å†™æ–¹æ³•åª²ç¾ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä»¬è¿è¡Œå¾—æ›´æ…¢ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦åˆ›å»ºæ•°ç»„æ¥ä¼ é€’å¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¦‚æœä»»ä½•å‚æ•°æ˜¯åŸå§‹ç±»å‹çš„ï¼Œåˆ™éœ€è¦è¿›è¡Œè£…ç®±å’Œæ‹†ç®±ã€‚æ¨èåªåœ¨æ€§èƒ½ä¸é‡è¦çš„æƒ…å†µä¸‹ä½¿ç”¨è¿™ç§æ•£åˆ—ç®—æ³•ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ç§æŠ€æœ¯ç¼–å†™çš„ PhoneNumber çš„æ•£åˆ—ç®—æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> hashCode() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> Objects.<span style="color:#007f7f">hash</span>(lineNum, prefix, areaCode);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä¸€ä¸ªç±»æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶ä¸”è®¡ç®—æ•£åˆ—ç çš„å¼€é”€ä¹Ÿæ¯”è¾ƒå¤§ï¼Œå°±åº”è¯¥è€ƒè™‘æŠŠæ•£åˆ—ç ç¼“å­˜åœ¨å¯¹è±¡å†…éƒ¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½é‡æ–°è®¡ç®—æ•£åˆ—ç ã€‚å¦‚æœä½ è§‰å¾—è¿™ç§ç±»å‹çš„å¤§å¤šæ•°å¯¹è±¡ä¼šè¢«ç”¨ä½œæ•£åˆ—é”®ï¼ˆhashkeys)ï¼Œå°±åº”è¯¥åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™è®¡ç®—æ•£åˆ—ç ã€‚
å¦åˆ™ï¼Œå¯ä»¥é€‰æ‹©â€œå»¶è¿Ÿåˆå§‹åŒ–â€æ•£åˆ—ç ï¼Œå³ä¸€ç›´åˆ°hashCodeè¢«ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–ã€‚
è™½ç„¶æˆ‘ä»¬çš„PhoneNumberç±»ä¸å€¼å¾—è¿™æ ·å¤„ç†ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å®ƒæ¥è¯´æ˜è¿™ç§æ–¹æ³•è¯¥å¦‚ä½•å®ç°ã€‚
æ³¨æ„hashCodeåŸŸçš„åˆå§‹å€¼ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯0)ä¸€èˆ¬ä¸èƒ½æˆä¸ºåˆ›å»ºçš„å®ä¾‹çš„æ•£åˆ—ç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> hashCode; <span style="color:#007f7f">// Automatically initialized to 0
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Override
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> hashCode() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> result = hashCode;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (result == <span style="color:#ff0;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>        result = Short.<span style="color:#007f7f">hashCode</span>(areaCode);
</span></span><span style="display:flex;"><span>        result = <span style="color:#ff0;font-weight:bold">31</span> * result + Short.<span style="color:#007f7f">hashCode</span>(prefix);
</span></span><span style="display:flex;"><span>        result = <span style="color:#ff0;font-weight:bold">31</span> * result + Short.<span style="color:#007f7f">hashCode</span>(lineNum);
</span></span><span style="display:flex;"><span>        hashCode = result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸è¦è¯•å›¾ä»æ•£åˆ—ç è®¡ç®—ä¸­æ’é™¤é‡è¦å­—æ®µï¼Œä»¥æé«˜æ€§èƒ½ã€‚ è™½ç„¶å¾—åˆ°çš„æ•£åˆ—ç®—æ³•å¯èƒ½è¿è¡Œå¾—æ›´å¿«ï¼Œä½†å…¶ç³Ÿç³•çš„è´¨é‡å¯èƒ½ä¼šå°†æ•£åˆ—è¡¨çš„æ€§èƒ½é™ä½åˆ°æ— æ³•ä½¿ç”¨çš„ç¨‹åº¦ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ•£åˆ—ç®—æ³•å¯èƒ½ä¼šé‡åˆ°å¤§é‡å®ä¾‹ï¼Œè¿™äº›å®ä¾‹åœ¨ä½ é€‰æ‹©å¿½ç•¥çš„ä¸åŒåŒºåŸŸã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ•£åˆ—ç®—æ³•å°†æŠŠæ‰€æœ‰è¿™äº›å®ä¾‹æ˜ å°„å¾ˆå°‘ä¸€éƒ¨åˆ†æ•£åˆ—ç ï¼Œä½¿å¾—åŸæœ¬åº”è¯¥åœ¨çº¿æ€§é˜¶ O(n) è¿è¡Œçš„ç¨‹åºå°†åœ¨å¹³æ–¹é˜¶ O(n^2) è¿è¡Œã€‚</p>
<p>ä¸è¦ä¸º hashCode è¿”å›çš„å€¼æä¾›è¯¦ç»†çš„è§„èŒƒï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±ä¸èƒ½ç†æ‰€åº”å½“çš„ä¾èµ–å®ƒã€‚è¿™ï¼ˆä¹Ÿï¼‰ç»™äº†ä½ æ›´æ”¹å®ƒçš„ä½™åœ°ã€‚ Java åº“ä¸­çš„è®¸å¤šç±»ï¼Œä¾‹å¦‚ String å’Œ Integerï¼Œéƒ½å°† hashCode æ–¹æ³•è¿”å›çš„ç¡®åˆ‡å€¼æŒ‡å®šä¸ºå®ä¾‹å€¼çš„å‡½æ•°ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè€Œæ˜¯ä¸€ä¸ªæˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é”™è¯¯ï¼šå®ƒé˜»ç¢äº†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æé«˜æ•£åˆ—ç®—æ³•çš„èƒ½åŠ›ã€‚å¦‚æœä½ ä¿ç•™äº†æœªæŒ‡å®šçš„ç»†èŠ‚ï¼Œå¹¶ä¸”åœ¨æ•£åˆ—ç®—æ³•ä¸­å‘ç°äº†ç¼ºé™·ï¼Œæˆ–è€…å‘ç°äº†æ›´å¥½çš„æ•£åˆ—ç®—æ³•ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨åç»­ç‰ˆæœ¬ä¸­æ›´æ”¹å®ƒã€‚</p>
<p>æ€»ä¹‹ï¼Œæ¯æ¬¡è¦†ç›– equals æ–¹æ³•æ—¶éƒ½å¿…é¡»è¦†ç›– hashCode æ–¹æ³•ï¼Œå¦åˆ™ç¨‹åºå°†æ— æ³•æ­£ç¡®è¿è¡Œã€‚ä½ çš„ hashCode æ–¹æ³•å¿…é¡»éµå®ˆ Object ä¸­æŒ‡å®šçš„é€šç”¨çº¦å®šï¼Œå¹¶ä¸”å¿…é¡»åˆç†åœ°å°†ä¸ç›¸ç­‰çš„æ•£åˆ—ç åˆ†é…ç»™ä¸ç›¸ç­‰çš„å®ä¾‹ã€‚AutoValue æ¡†æ¶æä¾›äº†ä¸€ç§èƒ½å¾ˆå¥½çš„æ›¿ä»£æ‰‹åŠ¨ç¼–å†™ equals æ–¹æ³•å’Œ hashCode æ–¹æ³•çš„åŠŸèƒ½ï¼ŒIDE ä¹Ÿæä¾›äº†è¿™ç§åŠŸèƒ½ã€‚</p>
<h2 id="item-12å§‹ç»ˆè¦†ç›–-tostring-æ–¹æ³•">Item-12ï¼šå§‹ç»ˆè¦†ç›– toString æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#item-12å§‹ç»ˆè¦†ç›–-tostring-æ–¹æ³•">#</a></h2>
<p>æä¾›å¥½çš„toStringå®ç°å¯ä»¥è®©ç±»ä½¿ç”¨èµ·æ¥æ›´åŠ èˆ’é€‚ï¼Œä½¿ç”¨è¿™ä¸ªç±»çš„ç³»ç»Ÿä¹Ÿæ›´å®¹æ˜“è°ƒè¯•ã€‚</p>
<p>Objectç±»æä¾›äº†toStringçš„å®ç°ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> getClass().<span style="color:#007f7f">getName</span>() + <span style="color:#0ff;font-weight:bold">&#34;@&#34;</span> + Integer.<span style="color:#007f7f">toHexString</span>(hashCode());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯è¿™æ ·æ˜¾ç¤ºå¹¶ä¸ç†æƒ³ï¼Œæ‰€ä»¥å»ºè®®æ‰€æœ‰å­ç±»éƒ½è¦†ç›–è¿™ä¸ªæ–¹æ³•ã€‚
å½“å¯¹è±¡è¢«ä¼ é€’ç»™printlnã€printfã€+ï¼ˆå­—ç¬¦ä¸²å“é¢‘æ¥ï¼‰ã€assertç­‰æ—¶ï¼ŒtoStringæ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚
toString æ–¹æ³•åº”è¯¥è¿”å›å¯¹è±¡ä¸­åŒ…å«çš„æ‰€æœ‰æœ‰ç”¨ä¿¡æ¯ã€‚å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œéš¾ä»¥ç”¨å­—ç¬¦ä¸²è¡¨è¿°ä¿¡æ¯ï¼Œé‚£ä¹ˆtoStringåº”è¯¥è¿”å›æ‘˜è¦ä¿¡æ¯ã€‚</p>
<p>æ— è®ºæ˜¯å¦æŒ‡å®šæ ¼å¼ï¼Œéƒ½åº”è¯¥åœ¨æ–‡æ¡£ä¸­è¡¨æ˜è¿™ä¸ªtoStringçš„è¿”å›æ„å›¾ã€‚
ç±»åº”è¯¥æä¾›é€”å¾„è·å–toStringè¿”å›å€¼ä¸­åŒ…æ‹¬çš„æ¯ä¸ªä¿¡æ¯ï¼Œä¾‹å¦‚ç»™æ¯ä¸ªä¿¡æ¯ï¼ˆæˆå‘˜å˜é‡ï¼‰éƒ½å¢åŠ ä¸€ä¸ªgetæ–¹æ³•ã€‚</p>
<h2 id="item-13è°¨æ…çš„è¦†ç›–clone">Item-13ï¼šè°¨æ…çš„è¦†ç›–clone<a hidden class="anchor" aria-hidden="true" href="#item-13è°¨æ…çš„è¦†ç›–clone">#</a></h2>
<ul>
<li>äº‹å®ä¸Šï¼Œå®ç°cloneableæ¥å£çš„ç±»æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªåŠŸèƒ½é€‚å½“çš„å…±æœ‰cloneæ–¹æ³•ã€‚</li>
<li>ä¸å¯å˜çš„ç±»æ°¸è¿œéƒ½ä¸åº”è¯¥æä¾›cloneæ–¹æ³•ã€‚</li>
<li>cloneå°±æ˜¯å¦ä¸€ä¸ªæ„é€ å™¨ï¼Œå¿…é¡»ç¡®ä¿ä»–ä¸ä¼šä¼¤å®³åˆ°åŸå§‹çš„å¯¹è±¡ï¼Œå¹¶æ­£ç¡®çš„åˆ›å»ºè¢«å…‹éš†å¯¹è±¡ä¸­çš„çº¦æŸæ¡ä»¶ã€‚</li>
<li>cloneableæ¶æ„ä¸å¼•ç”¨å¯å˜å¯¹è±¡çš„finalåŸŸçš„æ­£å¸¸ç”¨æ³•æ˜¯ç›¸äº’å†²çªçš„ï¼Œé™¤éåŸå¯¹è±¡å’Œå…‹éš†å¯¹è±¡ä¸­æ­¤å˜é‡å¯ä»¥
å…±äº«ï¼Œå¦è´¼ä¸ºäº†ä½¿ç±»å¯ä»¥è¢«å…‹éš†ï¼Œæœ‰å¿…è¦ä»æŸäº›åŸŸä¸­å»æ‰finalä¿®é¥°ç¬¦</li>
<li>å¯¹è±¡æ‹·è´çš„æ›´å¥½æ–¹æ³•æ˜¯é‡‡ç”¨æ‹·è´æ„é€ å™¨æˆ–è€…æ‹·è´å·¥å‚ï¼ˆè¯¦è§ç¬¬ä¸€ç« ç¬¬ä¸€æ¡é™æ€å·¥å‚ï¼‰ï¼Œå› ä¸ºä»–ä»¬ä¸å­˜åœ¨cloneçš„çº¦æŸ</li>
</ul>
<h2 id="item-14è€ƒè™‘å®ç°-comparable-æ¥å£">Item-14ï¼šè€ƒè™‘å®ç° Comparable æ¥å£<a hidden class="anchor" aria-hidden="true" href="#item-14è€ƒè™‘å®ç°-comparable-æ¥å£">#</a></h2>
<p>compareTo æ˜¯ Comparable æ¥å£ä¸­çš„å”¯ä¸€æ–¹æ³•ï¼Œä¸€ä¸ªç±»å®ç°äº† Comparableæ¥å£ï¼Œå°±è¡¨æ˜è¯¥ç±»å…·æœ‰å†…åœ¨çš„æ’åºå…³ç³»ã€‚å¯¹å®ç° Comparable çš„å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºéå¸¸ç®€å•ï¼š
<code>Arrays.sort(a);</code></p>
<p>å¯¹å­˜å‚¨åœ¨é›†åˆä¸­çš„å¯¹è±¡ï¼ˆå®ç°äº†Comparableæ¥å£ï¼‰ï¼Œè¿›è¡Œæœç´¢ã€è®¡ç®—æé™å€¼ä¹Ÿå¾ˆç®€å•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> WordList {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        Set&lt;String&gt; s = <span style="color:#fff;font-weight:bold">new</span> TreeSet&lt;&gt;();
</span></span><span style="display:flex;"><span>        Collections.<span style="color:#007f7f">addAll</span>(s, args);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(s);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå®ƒå°±å¯ä»¥è·Ÿè®¸å¤šæ³›å‹ç®—æ³•ï¼Œä»¥åŠä¾èµ–äºè¯¥æ¥å£çš„é›†åˆå®ç°è¿›è¡Œåä½œã€‚Java ä¸­çš„æ‰€æœ‰å€¼ç±»ä»¥åŠæ‰€æœ‰æšä¸¾ç±»å‹éƒ½å®ç°äº† Comparableæ¥å£ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå€¼ç±»ï¼Œå®ƒå…·æœ‰éå¸¸æ˜æ˜¾çš„å†…åœ¨æ’åºå…³ç³»ï¼Œå¦‚æŒ‰å­—æ¯ã€æ•°å€¼æˆ–è€…å¹´ä»£æ’åºï¼Œé‚£ä¹ˆåº”è¯¥å®ç° Comparableæ¥å£ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Comparable&lt;T&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> compareTo(T t);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>compareToæ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š
å°†è¿™ä¸ªå¯¹è±¡ä¸æŒ‡å®šå¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚</p>
<ul>
<li>å½“è¯¥å¯¹è±¡å°äºæŒ‡å®šå¯¹è±¡ï¼šè¿”å›è´Ÿæ•´æ•°</li>
<li>å½“è¯¥å¯¹è±¡ç­‰äºæŒ‡å®šå¯¹è±¡ï¼šè¿”å›é›¶</li>
<li>å½“è¯¥å¯¹è±¡å¤§äºæŒ‡å®šå¯¹è±¡ï¼šè¿”å›æ­£æ•´æ•°</li>
</ul>
<p>å¦‚æœè¯¥å¯¹è±¡å’ŒæŒ‡å®šå¯¹è±¡ç±»å‹ä¸ä¸€è‡´ï¼Œåˆ™æŠ›å‡ºClassCastExceptionã€‚</p>
<p>jdk7ä¹‹åï¼Œæ‰€æœ‰çš„è£…ç®±åŸºæœ¬ç±»å‹ä¸­éƒ½å¢åŠ äº†compareæ–¹æ³•ï¼Œå› æ­¤åœ¨compareToæ–¹æ³•ä¸­ä¸å»ºè®®ä½¿ç”¨<code>&gt;ï¼Œ&lt;ï¼Œ=</code>
è¿™æ ·çš„æ¯”è¾ƒç¬¦æ˜¯éå¸¸ç¹ççš„ä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">class</span> Dog <span style="color:#fff;font-weight:bold">implements</span> Comparable&lt;Dog&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> age;
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> length;
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">int</span> high;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//jdk8å¼•å…¥äº†æ¯”è¾ƒå™¨æ„é€ æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//ä¾‹å­ï¼šä¸€ä¸ªæ¯”è¾ƒDogçš„æ¯”è¾ƒå™¨ï¼Œå…ˆåæ¯”è¾ƒageï¼Œlengthï¼Œhighå±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Comparator&lt;Dog&gt; comparator = 
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//(Dog x),javaæ²¡æœ‰å¼ºå¤§åˆ°è¶³ä»¥ä¸ºè‡ªå·±æ‰¾å‡ºç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	Comparator.<span style="color:#007f7f">comparingInt</span>((Dog x) -&gt; x.<span style="color:#007f7f">age</span>)
</span></span><span style="display:flex;"><span>			.<span style="color:#007f7f">thenComparingInt</span>(x -&gt; x.<span style="color:#007f7f">length</span>)
</span></span><span style="display:flex;"><span>			.<span style="color:#007f7f">thenComparingInt</span>(x -&gt; x.<span style="color:#007f7f">high</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> compareTo(Dog dog) {
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> comparator.<span style="color:#007f7f">compare</span>(<span style="color:#fff;font-weight:bold">this</span>, dog);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="chapter_04-ç±»å’Œæ¥å£classes-and-interfaces">chapter_04 ç±»å’Œæ¥å£ï¼ˆClasses and Interfacesï¼‰<a hidden class="anchor" aria-hidden="true" href="#chapter_04-ç±»å’Œæ¥å£classes-and-interfaces">#</a></h1>
<p>ç±»å’Œæ¥å£æ˜¯JAVAçš„æ ¸å¿ƒï¼Œæ˜¯æŠ½è±¡çš„åŸºæœ¬å•ä½ã€‚</p>
<h2 id="item-15ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–">Item-15ï¼šä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–<a hidden class="anchor" aria-hidden="true" href="#item-15ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–">#</a></h2>
<p>ï¼ˆMinimize the accessibility of classes and membersï¼‰</p>
<p>ä¸€ä¸ªç³»ç»Ÿé€šå¸¸æ˜¯ç”±å¤šä¸ªæ¨¡å—ç»„æˆçš„ï¼Œæ¨¡å—ä¹‹å‰é€šè¿‡APIè¿›è¡Œé€šä¿¡ï¼Œä¸€ä¸ªæ¨¡å—ä¸éœ€è¦çŸ¥é“å…¶ä»–æ¨¡å—çš„å®ç°ç»†èŠ‚ã€‚è¿™å°±æ˜¯å°è£…ï¼Œæ˜¯è½¯ä»¶è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚å°è£…å¯ä»¥æœ‰æ•ˆçš„è§£é™¤æ¨¡å—ä¹‹å‰çš„è€¦åˆå…³ç³»ï¼Œå³è§£è€¦ã€‚è¿™äº›æ¨¡å—å¯ä»¥ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€ä¼˜åŒ–ã€ä½¿ç”¨ã€ä¿®æ”¹å’Œç†è§£ã€‚è¿™åŠ å¿«äº†ç³»ç»Ÿå¼€å‘è¿›åº¦ï¼Œå› ä¸ºç»„ä»¶å¯ä»¥å¹¶è¡Œå¼€å‘ã€‚ä¹Ÿå‡è½»äº†ç»´æŠ¤çš„è´Ÿæ‹…ï¼Œå› ä¸ºç»„ä»¶å¯ä»¥è¢«æ›´å¿«åœ°ç†è§£ã€è°ƒè¯•æˆ–æ›¿æ¢ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¼šæŸå®³å…¶ä»–ç»„ä»¶ã€‚</p>
<p>Java æœ‰è®¸å¤šå·¥å…·æ¥å¸®åŠ©éšè—ä¿¡æ¯ã€‚è®¿é—®æ§åˆ¶æœºåˆ¶ [JLS, 6.6] æŒ‡å®šäº†ç±»ã€æ¥å£å’Œæˆå‘˜çš„å¯è®¿é—®æ€§ã€‚å®ä½“çš„å¯è®¿é—®æ€§ç”±å…¶å£°æ˜çš„ä½ç½®ä»¥åŠå£°æ˜ä¸­å‡ºç°çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆprivateã€protected å’Œ publicï¼‰å†³å®šã€‚æ­£ç¡®ä½¿ç”¨è¿™äº›ä¿®é¥°ç¬¦æ˜¯ä¿¡æ¯éšè—çš„å…³é”®ã€‚</p>
<p>ç»éªŒæ³•åˆ™å¾ˆç®€å•ï¼šè®©æ¯ä¸ªç±»æˆ–æˆå‘˜å°½å¯èƒ½ä¸å¯è®¿é—®ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä¸å½±å“è½¯ä»¶æ­£å¸¸åŠŸèƒ½æ—¶ï¼Œä½¿ç”¨å°½å¯èƒ½ä½çš„è®¿é—®çº§åˆ«ã€‚</p>
<p>å¯¹äºé¡¶çº§ï¼ˆéåµŒå¥—ï¼‰ç±»å’Œæ¥å£ï¼Œåªæœ‰ä¸¤ä¸ªå¯èƒ½çš„è®¿é—®çº§åˆ«ï¼šåŒ…ç§æœ‰å’Œå…¬å…±ã€‚å¦‚æœç”¨ public ä¿®é¥°ç¬¦å£°æ˜ä¸€ä¸ªé¡¶çº§ç±»æˆ–æ¥å£ï¼Œå®ƒå°†æ˜¯å…¬å…±çš„ï¼›å¦åˆ™ï¼Œå®ƒå°†æ˜¯åŒ…ç§æœ‰çš„ã€‚å¦‚æœé¡¶çº§ç±»æˆ–æ¥å£å¯ä»¥è®¾ç½®ä¸ºåŒ…ç§æœ‰ï¼Œé‚£ä¹ˆå°±åº”è¯¥è¿™ä¹ˆåšã€‚é€šè¿‡å°†å…¶è®¾ç½®ä¸ºåŒ…ç§æœ‰ï¼Œå¯ä»¥ä½¿å…¶æˆä¸ºå®ç°çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å¯¼å‡ºçš„ API çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åç»­ç‰ˆæœ¬ä¸­ä¿®æ”¹ã€æ›¿æ¢æˆ–åˆ é™¤å®ƒï¼Œè€Œä¸å¿…æ‹…å¿ƒæŸå®³ç°æœ‰çš„å®¢æˆ·ç«¯ã€‚å¦‚æœå°†å…¶å…¬å¼€ï¼Œå°±æœ‰ä¹‰åŠ¡æ°¸è¿œæä¾›æ”¯æŒï¼Œä»¥ä¿æŒå…¼å®¹æ€§ã€‚</p>
<p>å¦‚æœåŒ…çº§ç§æœ‰é¡¶çº§ç±»æˆ–æ¥å£åªè¢«ä¸€ä¸ªç±»ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ï¼šåœ¨ä½¿ç”¨å®ƒçš„è¿™ä¸ªç±»ä¸­ï¼Œå°†é¡¶çº§ç±»è®¾ç½®ä¸ºç§æœ‰é™æ€åµŒå¥—ç±»ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-24-Favor-static-member-classes-over-nonstatic.md">Item-24</a>ï¼‰ã€‚å¯¹äºåŒ…ä¸­çš„æ‰€æœ‰ç±»ä»¥åŠä½¿ç”¨å®ƒçš„ç±»æ¥è¯´ï¼Œè¿™é™ä½äº†å®ƒçš„å¯è®¿é—®æ€§ã€‚ä½†æ˜¯ï¼Œé™ä½å…¬å…±ç±»çš„å¯è®¿é—®æ€§æ¯”å‡å°‘åŒ…çº§ç§æœ‰é¡¶çº§ç±»çš„å¯è®¿é—®æ€§é‡è¦å¾—å¤šï¼šå…¬å…±ç±»æ˜¯åŒ… API çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒåŒ…çº§ç§æœ‰é¡¶çº§ç±»å·²ç»æ˜¯å®ç°çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¯¹äºæˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•ã€åµŒå¥—ç±»å’ŒåµŒå¥—æ¥å£ï¼‰ï¼Œæœ‰å››ä¸ªå¯èƒ½çš„è®¿é—®çº§åˆ«ï¼Œè¿™é‡ŒæŒ‰å¯è®¿é—®æ€§ä¾æ¬¡é€’å¢çš„é¡ºåºåˆ—å‡ºï¼š</p>
<ul>
<li><strong>private ç§æœ‰</strong>ï¼Œæˆå‘˜åªèƒ½ä»å£°æ˜å®ƒçš„é¡¶çº§ç±»å†…éƒ¨è®¿é—®ã€‚</li>
<li><strong>package-private åŒ…çº§ç§æœ‰</strong>ï¼Œæˆå‘˜å¯ä»¥ä»åŒ…ä¸­å£°æ˜å®ƒçš„ä»»ä½•ç±»è®¿é—®ã€‚æŠ€æœ¯ä¸Šç§°ä¸ºé»˜è®¤è®¿é—®ï¼Œå³å¦‚æœæ²¡æœ‰æŒ‡å®šè®¿é—®ä¿®é¥°ç¬¦ï¼ˆæ¥å£æˆå‘˜é™¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¥å£æˆå‘˜æ˜¯å…¬å…±çš„ï¼‰ï¼Œå°±ä¼šå¾—åˆ°è¿™ä¸ªè®¿é—®çº§åˆ«ã€‚</li>
<li><strong>protected ä¿æŠ¤</strong>ï¼Œæˆå‘˜å¯ä»¥é€šè¿‡å£°æ˜å®ƒçš„ç±»çš„å­ç±»ï¼ˆä¼šå—ä¸€äº›é™åˆ¶ [JLS, 6.6.2]ï¼‰å’Œå£°æ˜å®ƒçš„åŒ…ä¸­çš„ä»»ä½•ç±»è®¿é—®ã€‚</li>
<li><strong>public å…¬å…±</strong>ï¼Œè¯¥æˆå‘˜å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®ã€‚</li>
</ul>
<p>åœ¨ä»”ç»†è®¾è®¡äº†ç±»çš„å…¬å…± API ä¹‹åï¼Œä½ åº”è¯¥æœ¬èƒ½çš„ä½¿æ‰€æœ‰æˆå‘˜éƒ½æ˜¯ç§æœ‰çš„ã€‚åªæœ‰å½“åŒä¸€åŒ…ä¸­çš„å¦ä¸€ä¸ªç±»ç¡®å®éœ€è¦è®¿é—®ä¸€ä¸ªæˆå‘˜æ—¶ï¼Œä½ æ‰åº”è¯¥åˆ é™¤ private ä¿®é¥°ç¬¦ï¼Œä½¿æˆå‘˜å˜ä¸ºåŒ…çº§ç§æœ‰ã€‚å¦‚æœä½ å‘ç°è‡ªå·±ç»å¸¸è¿™æ ·åšï¼Œé‚£ä¹ˆä½ åº”è¯¥é‡æ–°ç¡®è®¤ç³»ç»Ÿçš„è®¾è®¡ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å…¶ä»–æ–¹å¼èƒ½äº§ç”Ÿæ›´å¥½åœ°ç›¸äº’è§£è€¦çš„ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç§æœ‰æˆå‘˜å’ŒåŒ…çº§ç§æœ‰æˆå‘˜éƒ½æ˜¯ç±»å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸ä¸ä¼šå½±å“å…¶å¯¼å‡ºçš„ APIã€‚ä½†æ˜¯ï¼Œå¦‚æœç±»å®ç°äº† Serializableï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-12/Chapter-12-Item-86-Implement-Serializable-with-great-caution.md">Item-86</a> å’Œ <a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-12/Chapter-12-Item-87-Consider-using-a-custom-serialized-form.md">Item-87</a>ï¼‰ï¼Œè¿™äº›å­—æ®µå¯èƒ½ä¼šã€Œæ³„æ¼ã€åˆ°å¯¼å‡ºçš„ API ä¸­ã€‚</p>
<p>å¯¹äºå…¬å…±ç±»çš„æˆå‘˜æ¥è¯´ï¼Œå½“è®¿é—®çº§åˆ«ä»åŒ…çº§ç§æœ‰å˜ä¸ºä¿æŠ¤æ—¶ï¼Œå¯è®¿é—®æ€§ä¼šæœ‰å¾ˆå¤§çš„æé«˜ã€‚ä¿æŠ¤æˆå‘˜æ˜¯ç±»å¯¼å‡º API çš„ä¸€éƒ¨åˆ†ï¼Œå¿…é¡»æ°¸è¿œæ”¯æŒã€‚æ­¤å¤–ï¼Œå¯¼å‡ºç±»çš„ä¿æŠ¤æˆå‘˜è¡¨ç¤ºå¯¹å®ç°ç»†èŠ‚çš„å…¬å¼€æ‰¿è¯ºï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-19-Design-and-document-for-inheritance-or-else-prohibit-it.md">Item-19</a>ï¼‰ã€‚éœ€è¦ä¿æŠ¤æˆå‘˜çš„åœºæ™¯åº”è¯¥ç›¸å¯¹å°‘è§ã€‚</p>
<p>æœ‰ä¸€ä¸ªå…³é”®è§„åˆ™é™åˆ¶äº†ä½ é™ä½æ–¹æ³•çš„å¯è®¿é—®æ€§ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•è¦†ç›–äº†è¶…ç±»æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒåœ¨å­ç±»ä¸­çš„è®¿é—®çº§åˆ«å°±ä¸èƒ½æ¯”è¶…ç±» [JLS, 8.4.8.3] æ›´ä¸¥æ ¼ã€‚è¿™å¯¹äºç¡®ä¿å­ç±»çš„å®ä¾‹åœ¨è¶…ç±»çš„å®ä¾‹å¯ç”¨çš„ä»»ä½•åœ°æ–¹éƒ½åŒæ ·å¯ç”¨æ˜¯å¿…è¦çš„ï¼ˆLiskov æ›¿æ¢åŸåˆ™ï¼Œè¯·å‚é˜… <a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-15-Minimize-the-accessibility-of-classes-and-members.md">Item-15</a>ï¼‰ã€‚å¦‚æœè¿åæ­¤è§„åˆ™ï¼Œç¼–è¯‘å™¨å°†åœ¨å°è¯•ç¼–è¯‘å­ç±»æ—¶ç”Ÿæˆé”™è¯¯æ¶ˆæ¯ã€‚è¿™ä¸ªè§„åˆ™çš„ä¸€ä¸ªç‰¹ä¾‹æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œé‚£ä¹ˆè¯¥æ¥å£ä¸­çš„æ‰€æœ‰ç±»æ–¹æ³•éƒ½å¿…é¡»åœ¨ç±»ä¸­å£°æ˜ä¸º publicã€‚</p>
<p>ä¸ºäº†ä¾¿äºæµ‹è¯•ä»£ç ï¼Œä½ å¯èƒ½ä¼šè¯•å›¾ä½¿ç±»ã€æ¥å£æˆ–æˆå‘˜æ›´å®¹æ˜“è®¿é—®ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å¥½çš„ã€‚ä¸ºäº†æµ‹è¯•ï¼Œå°†å…¬å…±ç±»æˆå‘˜ç”±ç§æœ‰å˜ä¸ºåŒ…ç§æœ‰æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ˜¯è¿›ä¸€æ­¥æé«˜å¯è®¿é—®æ€§æ˜¯ä¸å¯æ¥å—çš„ã€‚æ¢å¥è¯è¯´ï¼Œå°†ç±»ã€æ¥å£æˆ–æˆå‘˜ä½œä¸ºåŒ…å¯¼å‡º API çš„ä¸€éƒ¨åˆ†ä»¥æ–¹ä¾¿æµ‹è¯•æ˜¯ä¸å¯æ¥å—çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦è¿™æ ·åšï¼Œå› ä¸ºæµ‹è¯•å¯ä»¥ä½œä¸ºåŒ…çš„ä¸€éƒ¨åˆ†è¿è¡Œï¼Œä»è€Œè·å¾—å¯¹åŒ…ç§æœ‰å…ƒç´ çš„è®¿é—®æƒã€‚</p>
<p><strong>å…¬å…±ç±»çš„å®ä¾‹å­—æ®µå¾ˆå°‘é‡‡ç”¨ public ä¿®é¥°</strong>ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-16-In-public-classes-use-accessor-methods-not-public-fields.md">Item-16</a>ï¼‰ã€‚å¦‚æœå®ä¾‹å­—æ®µä¸æ˜¯ final çš„ï¼Œæˆ–è€…æ˜¯å¯¹å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå°†å…¶å…¬å¼€ï¼Œä½ å°±æ”¾å¼ƒäº†é™åˆ¶å­—æ®µä¸­å¯ä»¥å­˜å‚¨çš„å€¼çš„èƒ½åŠ›ã€‚è¿™æ„å‘³ç€ä½ æ”¾å¼ƒäº†å¼ºåˆ¶åŒ…å«å­—æ®µçš„ä¸å¯å˜çš„èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œä½ è¿˜æ”¾å¼ƒäº†åœ¨ä¿®æ”¹å­—æ®µæ—¶é‡‡å–ä»»ä½•æ“ä½œçš„èƒ½åŠ›ï¼Œå› æ­¤ <strong>å¸¦æœ‰å…¬å…±å¯å˜å­—æ®µçš„ç±»é€šå¸¸ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</strong> å³ä½¿ä¸€ä¸ªå­—æ®µæ˜¯ final çš„ï¼Œå¹¶ä¸”å¼•ç”¨äº†ä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ï¼Œé€šè¿‡å°†å…¶å…¬å¼€ï¼Œä½ æ”¾å¼ƒäº†åˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„å†…éƒ¨æ•°æ®è¡¨ç¤ºçš„çµæ´»æ€§ï¼Œè€Œè¯¥å­—æ®µå¹¶ä¸å­˜åœ¨ã€‚</p>
<p>åŒæ ·çš„å»ºè®®ä¹Ÿé€‚ç”¨äºé™æ€å­—æ®µï¼Œåªæœ‰ä¸€ä¸ªä¾‹å¤–ã€‚ä½ å¯ä»¥é€šè¿‡å…¬å…±é™æ€ final å­—æ®µå…¬å¼€å¸¸é‡ï¼Œå‡è®¾è¿™äº›å¸¸é‡æ˜¯ç±»æä¾›çš„æŠ½è±¡çš„ç»„æˆéƒ¨åˆ†ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™äº›å­—æ®µçš„åç§°ç”±å¤§å†™å­—æ¯ç»„æˆï¼Œå•è¯ä»¥ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-9/Chapter-9-Item-68-Adhere-to-generally-accepted-naming-conventions.md">Item-68</a>ï¼‰ã€‚é‡è¦çš„æ˜¯ï¼Œè¿™äº›å­—æ®µè¦ä¹ˆåŒ…å«åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¦ä¹ˆåŒ…å«å¯¹ä¸å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-17-Minimize-mutability.md">Item-17</a>ï¼‰ã€‚åŒ…å«å¯¹å¯å˜å¯¹è±¡çš„å¼•ç”¨çš„å­—æ®µå…·æœ‰é final å­—æ®µçš„æ‰€æœ‰ç¼ºç‚¹ã€‚è™½ç„¶å¼•ç”¨ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½†æ˜¯å¼•ç”¨çš„å¯¹è±¡å¯ä»¥è¢«ä¿®æ”¹ä¼šå¯¼è‡´ç¾éš¾æ€§çš„åæœã€‚</p>
<p>è¯·æ³¨æ„ï¼Œéé›¶é•¿åº¦çš„æ•°ç»„æ€»æ˜¯å¯å˜çš„ï¼Œå› æ­¤å¯¹äºç±»æ¥è¯´ï¼Œæ‹¥æœ‰ä¸€ä¸ªå…¬å…±é™æ€ final æ•°ç»„å­—æ®µæˆ–è¿”å›è¯¥å­—æ®µçš„è®¿é—®å™¨æ˜¯é”™è¯¯çš„ã€‚å¦‚æœä¸€ä¸ªç±»å…·æœ‰è¿™æ ·çš„å­—æ®µæˆ–è®¿é—®å™¨ï¼Œå®¢æˆ·ç«¯å°†èƒ½å¤Ÿä¿®æ”¹æ•°ç»„çš„å†…å®¹ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„å®‰å…¨æ¼æ´æ¥æºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Potential security hole!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Thing[] VALUES = { ... };
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº› IDE ç”Ÿæˆäº†è¿”å›ç§æœ‰æ•°ç»„å­—æ®µå¼•ç”¨çš„è®¿é—®å™¨ï¼Œè¿™æ°æ°ä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½ å¯ä»¥å°†å…¬å…±æ•°ç»„è®¾ç½®ä¸ºç§æœ‰ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªå…¬å…±ä¸å¯å˜ Listï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Thing[] PRIVATE_VALUES = { ... };
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> List&lt;Thing&gt; VALUES = Collections.<span style="color:#007f7f">unmodifiableList</span>(Arrays.<span style="color:#007f7f">asList</span>(PRIVATE_VALUES));
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…ï¼Œä½ å¯ä»¥å°†æ•°ç»„è®¾ç½®ä¸ºç§æœ‰ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªè¿”å›ç§æœ‰æ•°ç»„å‰¯æœ¬çš„å…¬å…±æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Thing[] PRIVATE_VALUES = { ... };
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Thing[] values() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> PRIVATE_VALUES.<span style="color:#007f7f">clone</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä½•åœ¨è¿™äº›å¤‡é€‰æ–¹æ¡ˆä¸­è¿›è¡Œé€‰æ‹©ï¼Œè¯·è€ƒè™‘å®¢æˆ·å¯èƒ½ä¼šå¦‚ä½•å¤„ç†ç»“æœã€‚å“ªç§è¿”å›ç±»å‹æ›´æ–¹ä¾¿ï¼Ÿå“ªç§è¡¨ç°ä¼šæ›´å¥½ï¼Ÿ</p>
<p>å¯¹äº Java 9ï¼Œä½œä¸ºæ¨¡å—ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè¿˜å¼•å…¥äº†å¦å¤–ä¸¤ä¸ªéšå¼è®¿é—®çº§åˆ«ã€‚æ¨¡å—æ˜¯åŒ…çš„åˆ†ç»„å•ä½ï¼Œå°±åƒåŒ…æ˜¯ç±»çš„åˆ†ç»„å•ä½ä¸€æ ·ã€‚æ¨¡å—å¯ä»¥é€šè¿‡æ¨¡å—å£°æ˜ä¸­çš„å¯¼å‡ºå£°æ˜æ˜¾å¼åœ°å¯¼å‡ºå®ƒçš„ä¸€äº›åŒ…ï¼ˆæŒ‰ç…§çº¦å®šåŒ…å«åœ¨åä¸º <code>module-info.java</code> çš„æºæ–‡ä»¶ä¸­ï¼‰ã€‚æ¨¡å—ä¸­æœªå¯¼å‡ºåŒ…çš„å…¬å…±æˆå‘˜å’Œä¿æŠ¤æˆå‘˜åœ¨æ¨¡å—å¤–ä¸å¯è®¿é—®ï¼›åœ¨æ¨¡å—ä¸­ï¼Œå¯è®¿é—®æ€§ä¸å—å¯¼å‡ºå£°æ˜çš„å½±å“ã€‚é€šè¿‡ä½¿ç”¨æ¨¡å—ç³»ç»Ÿï¼Œä½ å¯ä»¥åœ¨æ¨¡å—å†…çš„åŒ…ä¹‹é—´å…±äº«ç±»ï¼Œè€Œä¸ä¼šè®©æ•´ä¸ªä¸–ç•Œçœ‹åˆ°å®ƒä»¬ã€‚æœªå¯¼å‡ºåŒ…ä¸­çš„å…¬å…±ç±»å’Œä¿æŠ¤æˆå‘˜äº§ç”Ÿäº†ä¸¤ä¸ªéšå¼è®¿é—®çº§åˆ«ï¼Œå®ƒä»¬æ˜¯æ­£å¸¸å…¬å…±çº§åˆ«å’Œä¿æŠ¤çº§åˆ«çš„ç±»ä¼¼ç‰©ã€‚è¿™ç§å…±äº«çš„éœ€æ±‚ç›¸å¯¹è¾ƒå°‘ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡é‡æ–°å®‰æ’åŒ…ä¸­çš„ç±»æ¥è§£å†³ã€‚</p>
<p>ä¸å››ä¸ªä¸»è¦çš„è®¿é—®çº§åˆ«ä¸åŒï¼Œè¿™ä¸¤ä¸ªåŸºäºæ¨¡å—çš„çº§åˆ«åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å»ºè®®çº§åˆ«ã€‚å¦‚æœå°†æ¨¡å—çš„ JAR æ–‡ä»¶æ”¾åœ¨åº”ç”¨ç¨‹åºçš„ç±»è·¯å¾„ä¸Šï¼Œè€Œä¸æ˜¯æ¨¡å—è·¯å¾„ä¸Šï¼Œæ¨¡å—ä¸­çš„åŒ…å°†æ¢å¤å®ƒä»¬çš„éæ¨¡å—è¡Œä¸ºï¼šåŒ…çš„å…¬å…±ç±»çš„æ‰€æœ‰å…¬å…±æˆå‘˜å’Œä¿æŠ¤æˆå‘˜éƒ½å…·æœ‰æ­£å¸¸çš„å¯è®¿é—®æ€§ï¼Œè€Œä¸ç®¡æ¨¡å—æ˜¯å¦å¯¼å‡ºåŒ… [Reinhold,1.2]ã€‚ä¸¥æ ¼æ‰§è¡Œæ–°å¼•å…¥çš„è®¿é—®çº§åˆ«çš„ä¸€ä¸ªåœ°æ–¹æ˜¯ JDK æœ¬èº«ï¼šJava åº“ä¸­æœªå¯¼å‡ºçš„åŒ…åœ¨å…¶æ¨¡å—ä¹‹å¤–ç¡®å®ä¸å¯è®¿é—®ã€‚</p>
<p>å¯¹äºå…¸å‹çš„ Java ç¨‹åºå‘˜æ¥è¯´ï¼Œè®¿é—®ä¿æŠ¤ä¸ä»…æ˜¯æœ‰é™å®ç”¨çš„æ¨¡å—æ‰€æä¾›çš„ï¼Œè€Œä¸”æœ¬è´¨ä¸Šæ˜¯å»ºè®®æ€§çš„ï¼›ä¸ºäº†åˆ©ç”¨å®ƒï¼Œä½ å¿…é¡»å°†åŒ…ä»¥æ¨¡å—åˆ†ç»„ï¼Œåœ¨æ¨¡å—å£°æ˜ä¸­æ˜¾å¼åœ°å£°æ˜å®ƒä»¬çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œé‡æ–°å®‰æ’æºä»£ç æ ‘ï¼Œå¹¶é‡‡å–ç‰¹æ®Šæ“ä½œä»¥é€‚åº”ä»æ¨¡å—ä¸­å¯¹éæ¨¡å—åŒ–åŒ…çš„ä»»ä½•è®¿é—® [Reinhold, 3]ã€‚ç°åœ¨è¯´æ¨¡å—èƒ½å¦åœ¨ JDK ä¹‹å¤–å¾—åˆ°å¹¿æ³›ä½¿ç”¨è¿˜ä¸ºæ—¶è¿‡æ—©ã€‚ä¸æ­¤åŒæ—¶ï¼Œé™¤éä½ æœ‰è¿«åˆ‡çš„éœ€æ±‚ï¼Œå¦åˆ™æœ€å¥½è¿˜æ˜¯ä¸ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>æ€»ä¹‹ï¼Œä½ åº”è¯¥å°½å¯èƒ½å‡å°‘ç¨‹åºå…ƒç´ çš„å¯è®¿é—®æ€§ï¼ˆåœ¨åˆç†çš„èŒƒå›´å†…ï¼‰ã€‚åœ¨ä»”ç»†è®¾è®¡äº†ä¸€ä¸ªæœ€å°çš„å…¬å…± API ä¹‹åï¼Œä½ åº”è¯¥é˜²æ­¢ä»»ä½•æ¸¸ç¦»çš„ç±»ã€æ¥å£æˆ–æˆå‘˜æˆä¸º API çš„ä¸€éƒ¨åˆ†ã€‚é™¤äº†ä½œä¸ºå¸¸é‡çš„å…¬å…±é™æ€ final å­—æ®µå¤–ï¼Œpublic ç±»åº”è¯¥æ²¡æœ‰å…¬å…±å­—æ®µã€‚ç¡®ä¿å…¬å…±é™æ€ final å­—æ®µå¼•ç”¨çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚</p>
<h2 id="item-16è¦åœ¨å…¬æœ‰ç±»è€Œéå…¬æœ‰åŸŸä¸­ä½¿ç”¨è®¿é—®æ–¹æ³•">Item-16ï¼šè¦åœ¨å…¬æœ‰ç±»è€Œéå…¬æœ‰åŸŸä¸­ä½¿ç”¨è®¿é—®æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#item-16è¦åœ¨å…¬æœ‰ç±»è€Œéå…¬æœ‰åŸŸä¸­ä½¿ç”¨è®¿é—®æ–¹æ³•">#</a></h2>
<p>ï¼ˆIn public classes, use accessor methods, not public fieldsï¼‰</p>
<p>æœ‰æ—¶ï¼Œä½ å¯èƒ½ä¼šç¼–å†™ä¸€äº›æ²¡ä»€ä¹ˆåŠŸèƒ½çš„ç±»ï¼Œå®ƒæ²¡æœ‰åˆ«çš„ç›®çš„ï¼Œåªæ˜¯ç”¨æ¥å°†ä¸€äº›å®ä¾‹å­—æ®µæ”¾åœ¨ä¸€èµ·è€Œå·²ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Degenerate classes like this should not be public!
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">class</span> Point {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> y;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºè¿™äº›ç±»çš„æ•°æ®å­—æ®µæ˜¯ç›´æ¥è®¿é—®çš„ï¼Œæ‰€ä»¥è¿™äº›ç±»æ²¡æœ‰æä¾›å°è£…çš„å¥½å¤„ã€‚ä¸æ”¹å˜ API å°±ä¸èƒ½æ”¹å˜è¡¨ç°å½¢å¼ï¼Œä¸èƒ½å®ç°ä¸å˜é‡ï¼Œä¹Ÿä¸èƒ½åœ¨è®¿é—®å­—æ®µæ—¶é‡‡å–è¾…åŠ©æ“ä½œã€‚åšæŒé¢å‘å¯¹è±¡æ€ç»´çš„ç¨‹åºå‘˜ä¼šè®¤ä¸ºè¿™æ ·çš„ç±»æ˜¯ä»¤äººåŒæ¶çš„ï¼Œåº”è¯¥è¢«ä½¿ç”¨ç§æœ‰å­—æ®µå’Œå…¬å…±è®¿é—®æ–¹æ³• getter çš„ç±»æ‰€å–ä»£ï¼Œå¯¹äºå¯å˜ç±»ï¼Œåˆ™æ˜¯èµ‹å€¼æ–¹æ³• setterï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Encapsulation of data by accessor methods and mutators
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">class</span> Point {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">double</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">double</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Point(<span style="color:#fff;font-weight:bold">double</span> x, <span style="color:#fff;font-weight:bold">double</span> y) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">x</span> = x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">y</span> = y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> getX() { <span style="color:#fff;font-weight:bold">return</span> x; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> getY() { <span style="color:#fff;font-weight:bold">return</span> y; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setX(<span style="color:#fff;font-weight:bold">double</span> x) { <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">x</span> = x; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setY(<span style="color:#fff;font-weight:bold">double</span> y) { <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">y</span> = y; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ï¼Œå½“æ¶‰åŠåˆ°å…¬å…±ç±»æ—¶ï¼Œå¼ºç¡¬æ´¾æ˜¯æ­£ç¡®çš„ï¼šå¦‚æœç±»å¯ä»¥åœ¨åŒ…ä¹‹å¤–è®¿é—®ï¼Œé‚£ä¹ˆæä¾›è®¿é—®å™¨æ–¹æ³•æ¥ä¿æŒæ›´æ”¹ç±»å†…éƒ¨è¡¨ç¤ºçš„çµæ´»æ€§ã€‚å¦‚æœä¸€ä¸ªå…¬å…±ç±»å…¬å¼€å…¶æ•°æ®å­—æ®µï¼Œé‚£ä¹ˆæ”¹å˜å…¶è¡¨ç¤ºå½¢å¼çš„æ‰€æœ‰å¸Œæœ›éƒ½å°†è½ç©ºï¼Œå› ä¸ºå®¢æˆ·ç«¯ä»£ç å¯ä»¥å¹¿æ³›åˆ†å‘ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç±»æ˜¯åŒ…çº§ç§æœ‰çš„æˆ–è€…æ˜¯ç§æœ‰åµŒå¥—ç±»ï¼Œé‚£ä¹ˆå…¬å¼€å®ƒçš„æ•°æ®å­—æ®µå¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨ä¸Šçš„é”™è¯¯ï¼ˆå‡è®¾å®ƒä»¬èƒ½å¤Ÿå¾ˆå¥½åœ°æè¿°ç±»æä¾›çš„æŠ½è±¡ï¼‰ã€‚æ— è®ºæ˜¯åœ¨ç±»å®šä¹‰è¿˜æ˜¯åœ¨ä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œè¿™ç§æ–¹æ³•äº§ç”Ÿçš„è§†è§‰æ··ä¹±éƒ½æ¯”è®¿é—®æ–¹æ³•å°‘ã€‚è™½ç„¶å®¢æˆ·ç«¯ä»£ç ä¸ç±»çš„å†…éƒ¨è¡¨ç¤ºç»‘å®šåœ¨ä¸€èµ·ï¼Œä½†è¿™æ®µä»£ç ä»…é™äºåŒ…å«è¯¥ç±»çš„åŒ…ã€‚å¦‚æœæƒ³è¦å¯¹è¡¨ç¤ºå½¢å¼è¿›è¡Œæ›´æ”¹ï¼Œä½ å¯ä»¥åœ¨ä¸æ¥è§¦åŒ…å¤–éƒ¨ä»»ä½•ä»£ç çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ”¹ã€‚å¯¹äºç§æœ‰åµŒå¥—ç±»ï¼Œæ›´æ”¹çš„èŒƒå›´è¿›ä¸€æ­¥é™åˆ¶åœ¨å°é—­ç±»ä¸­ã€‚</p>
<p>Java åº“ä¸­çš„å‡ ä¸ªç±»è¿åäº†å…¬å…±ç±»ä¸åº”è¯¥ç›´æ¥å…¬å¼€å­—æ®µçš„å»ºè®®ã€‚çªå‡ºçš„ä¾‹å­åŒ…æ‹¬ <code>java.awt</code> åŒ…ä¸­çš„ Point å’Œ Dimensionã€‚è¿™äº›ç±»ä¸åº”è¢«æ•ˆä»¿ï¼Œè€Œåº”è¢«è§†ä¸ºè­¦ç¤ºã€‚æ­£å¦‚ <a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-9/Chapter-9-Item-67-Optimize-judiciously.md">Item-67</a> æ‰€è¿°ï¼Œå…¬å¼€ Dimension ç±»çš„å†…éƒ¨ç»“æ„å¯¼è‡´äº†ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œè¿™ç§é—®é¢˜è‡³ä»Šä»å­˜åœ¨ã€‚</p>
<p>è™½ç„¶å…¬å…±ç±»ç›´æ¥å…¬å¼€å­—æ®µä»æ¥éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä½†æ˜¯å¦‚æœå­—æ®µæ˜¯ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå±å®³å°±ä¼šå°ä¸€äº›ã€‚ä½ ä¸èƒ½åœ¨ä¸æ›´æ”¹è¯¥ç±»çš„ API çš„æƒ…å†µä¸‹æ›´æ”¹è¯¥ç±»çš„è¡¨ç°å½¢å¼ï¼Œä¹Ÿä¸èƒ½åœ¨è¯»å–å­—æ®µæ—¶é‡‡å–è¾…åŠ©æ“ä½œï¼Œä½†æ˜¯ä½ å¯ä»¥å®æ–½ä¸å˜é‡ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªç±»ä¿è¯æ¯ä¸ªå®ä¾‹ä»£è¡¨ä¸€ä¸ªæœ‰æ•ˆçš„æ—¶é—´ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Public class with exposed immutable fields - questionable
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> Time {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> HOURS_PER_DAY = <span style="color:#ff0;font-weight:bold">24</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> MINUTES_PER_HOUR = <span style="color:#ff0;font-weight:bold">60</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> hour;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">int</span> minute;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Time(<span style="color:#fff;font-weight:bold">int</span> hour, <span style="color:#fff;font-weight:bold">int</span> minute) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (hour &lt; <span style="color:#ff0;font-weight:bold">0</span> || hour &gt;= HOURS_PER_DAY)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException(<span style="color:#0ff;font-weight:bold">&#34;Hour: &#34;</span> + hour);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (minute &lt; <span style="color:#ff0;font-weight:bold">0</span> || minute &gt;= MINUTES_PER_HOUR)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalArgumentException(<span style="color:#0ff;font-weight:bold">&#34;Min: &#34;</span> + minute);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">hour</span> = hour;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">minute</span> = minute;
</span></span><span style="display:flex;"><span>    } ... <span style="color:#007f7f">// Remainder omitted
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ€»ä¹‹ï¼Œå…¬å…±ç±»ä¸åº”è¯¥å…¬å¼€å¯å˜å­—æ®µã€‚å¯¹äºå…¬å…±ç±»æ¥è¯´ï¼Œå…¬å¼€ä¸å¯å˜å­—æ®µçš„å±å®³è¦å°ä¸€äº›ï¼Œä½†ä»ç„¶å­˜åœ¨æ½œåœ¨çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å€™åŒ…çº§ç§æœ‰æˆ–ç§æœ‰åµŒå¥—ç±»éœ€è¦å…¬å¼€å­—æ®µï¼Œæ— è®ºè¿™ä¸ªç±»æ˜¯å¯å˜çš„è¿˜æ˜¯ä¸å¯å˜çš„ã€‚</p>
<h2 id="item-17å‡å°‘å¯å˜æ€§minimize-mutability">Item-17ï¼šå‡å°‘å¯å˜æ€§ï¼ˆMinimize mutabilityï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-17å‡å°‘å¯å˜æ€§minimize-mutability">#</a></h2>
<p>ä¸å¯å˜ç±»æ˜¯å®ä¾‹ä¸èƒ½è¢«ä¿®æ”¹çš„ç±»ã€‚æ¯ä¸ªå®ä¾‹ä¸­åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…éƒ½æ˜¯å›ºå®šçš„ï¼Œå› æ­¤æ°¸è¿œä¸ä¼šè§‚å¯Ÿåˆ°ä»»ä½•æ›´æ”¹ã€‚Java åº“åŒ…å«è®¸å¤šä¸å¯å˜çš„ç±»ï¼ŒåŒ…æ‹¬ Stringã€åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ã€<code>BigInteger å’Œ BigDecimal</code>ã€‚è¿™ä¹ˆåšæœ‰å¾ˆå¥½çš„ç†ç”±ï¼šä¸å¯å˜ç±»æ¯”å¯å˜ç±»æ›´å®¹æ˜“è®¾è®¡ã€å®ç°å’Œä½¿ç”¨ã€‚å®ƒä»¬ä¸å¤ªå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”æ›´å®‰å…¨ã€‚</p>
<p>è¦ä½¿ç±»ä¸å¯å˜ï¼Œè¯·éµå¾ªä»¥ä¸‹ 5 æ¡è§„åˆ™ï¼š</p>
<ul>
<li>ä¸è¦æä¾›ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•</li>
<li><strong>ç¡®ä¿ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚</strong> è¿™å¯ä»¥é˜²æ­¢ç²—å¿ƒæˆ–æ¶æ„çš„é€šè¿‡å­ç±»å®ä¾‹å¯¹è±¡çŠ¶æ€å¯æ”¹å˜çš„æ–¹å¼ï¼ŒæŸå®³çˆ¶ç±»çš„ä¸å¯å˜è¡Œä¸ºã€‚é˜²æ­¢å­ç±»åŒ–é€šå¸¸ç”¨ final ä¿®é¥°çˆ¶ç±»ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºã€‚</li>
<li><strong>æ‰€æœ‰å­—æ®µç”¨ final ä¿®é¥°ã€‚</strong> è¿™æ¸…æ¥šåœ°è¡¨è¾¾äº†æ„å›¾ï¼Œå¹¶ç”±ç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œã€‚åŒæ ·ï¼Œå¦‚æœåœ¨æ²¡æœ‰åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå¼•ç”¨æ–°åˆ›å»ºçš„å®ä¾‹å¹¶ä»ä¸€ä¸ªçº¿ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå°±æœ‰å¿…è¦ç¡®ä¿æ­£ç¡®çš„è¡Œä¸ºï¼Œå°±åƒå†…å­˜æ¨¡å‹ä¸­æè¿°çš„é‚£æ · [JLS, 17.5;Goetz06, 16]ã€‚</li>
<li><strong>æ‰€æœ‰å­—æ®µè®¾ä¸ºç§æœ‰ã€‚</strong> è¿™å°†é˜»æ­¢å®¢æˆ·ç«¯è®¿é—®å­—æ®µå¼•ç”¨çš„å¯å˜å¯¹è±¡å¹¶ç›´æ¥ä¿®æ”¹è¿™äº›å¯¹è±¡ã€‚è™½ç„¶åœ¨æŠ€æœ¯ä¸Šå…è®¸ä¸å¯å˜ç±»æ‹¥æœ‰åŒ…å«åŸºæœ¬ç±»å‹æˆ–å¯¹ä¸å¯å˜å¯¹è±¡çš„å¼•ç”¨çš„å…¬å…± final å­—æ®µï¼Œä½†ä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºåœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­æ— æ³•æ›´æ”¹å†…éƒ¨è¡¨ç¤ºï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-15-Minimize-the-accessibility-of-classes-and-members.md">Item-15</a> å’Œ <a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-16-In-public-classes-use-accessor-methods-not-public-fields.md">Item-16</a>ï¼‰ã€‚</li>
<li><strong>ç¡®ä¿å¯¹ä»»ä½•å¯å˜ç»„ä»¶çš„ç‹¬å è®¿é—®ã€‚</strong> å¦‚æœä½ çš„ç±»æœ‰ä»»ä½•å¼•ç”¨å¯å˜å¯¹è±¡çš„å­—æ®µï¼Œè¯·ç¡®ä¿è¯¥ç±»çš„å®¢æˆ·ç«¯æ— æ³•è·å¾—å¯¹è¿™äº›å¯¹è±¡çš„å¼•ç”¨ã€‚æ°¸è¿œä¸è¦å‘æä¾›å¯¹è±¡å¼•ç”¨çš„å®¢æˆ·ç«¯åˆå§‹åŒ–è¿™æ ·çš„å­—æ®µï¼Œä¹Ÿä¸è¦ä»è®¿é—®å™¨è¿”å›å­—æ®µã€‚åœ¨æ„é€ å‡½æ•°ã€è®¿é—®å™¨å’Œ readObject æ–¹æ³•ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-12/Chapter-12-Item-88-Write-readObject-methods-defensively.md">Item-88</a>ï¼‰ä¸­åˆ›å»ºé˜²å¾¡æ€§å‰¯æœ¬ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-8/Chapter-8-Item-50-Make-defensive-copies-when-needed.md">Item-50</a>ï¼‰ã€‚</li>
</ul>
<p>å‰é¢æ¡ç›®ä¸­çš„è®¸å¤šç¤ºä¾‹ç±»éƒ½æ˜¯ä¸å¯å˜çš„ã€‚å…¶ä¸­ä¸€ä¸ªç±»æ˜¯ <a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-3/Chapter-3-Item-11-Always-override-hashCode-when-you-override-equals.md">Item-11</a> ä¸­çš„ PhoneNumberï¼Œå®ƒçš„æ¯ä¸ªå±æ€§éƒ½æœ‰è®¿é—®å™¨ï¼Œä½†æ²¡æœ‰å¯¹åº”çš„ä¿®æ”¹å™¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Immutable complex number class
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">class</span> Complex {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span> re;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span> im;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Complex(<span style="color:#fff;font-weight:bold">double</span> re, <span style="color:#fff;font-weight:bold">double</span> im) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">re</span> = re;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">im</span> = im;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> realPart() { <span style="color:#fff;font-weight:bold">return</span> re; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">double</span> imaginaryPart() { <span style="color:#fff;font-weight:bold">return</span> im; }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Complex plus(Complex c) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Complex(re + c.<span style="color:#007f7f">re</span>, im + c.<span style="color:#007f7f">im</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Complex minus(Complex c) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Complex(re - c.<span style="color:#007f7f">re</span>, im - c.<span style="color:#007f7f">im</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Complex times(Complex c) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Complex(re * c.<span style="color:#007f7f">re</span> - im * c.<span style="color:#007f7f">im</span>, re * c.<span style="color:#007f7f">im</span> + im * c.<span style="color:#007f7f">re</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Complex dividedBy(Complex c) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">double</span> tmp = c.<span style="color:#007f7f">re</span> * c.<span style="color:#007f7f">re</span> + c.<span style="color:#007f7f">im</span> * c.<span style="color:#007f7f">im</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Complex((re * c.<span style="color:#007f7f">re</span> + im * c.<span style="color:#007f7f">im</span>) / tmp, (im * c.<span style="color:#007f7f">re</span> - re * c.<span style="color:#007f7f">im</span>) / tmp);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> equals(Object o) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (o == <span style="color:#fff;font-weight:bold">this</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!(o <span style="color:#fff;font-weight:bold">instanceof</span> Complex))
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        Complex c = (Complex) o;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// See page 47 to find out why we use compare instead of ==
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> Double.<span style="color:#007f7f">compare</span>(c.<span style="color:#007f7f">re</span>, re) == <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; Double.<span style="color:#007f7f">compare</span>(c.<span style="color:#007f7f">im</span>, im) == <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> hashCode() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">31</span> * Double.<span style="color:#007f7f">hashCode</span>(re) + Double.<span style="color:#007f7f">hashCode</span>(im);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;(&#34;</span> + re + <span style="color:#0ff;font-weight:bold">&#34; + &#34;</span> + im + <span style="color:#0ff;font-weight:bold">&#34;i)&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªç±»è¡¨ç¤ºä¸€ä¸ªå¤æ•°ï¼ˆåŒ…å«å®éƒ¨å’Œè™šéƒ¨çš„æ•°ï¼‰ã€‚é™¤äº†æ ‡å‡†çš„ Object æ–¹æ³•ä¹‹å¤–ï¼Œå®ƒè¿˜ä¸ºå®éƒ¨å’Œè™šéƒ¨æä¾›è®¿é—®å™¨ï¼Œå¹¶æä¾›å››ç§åŸºæœ¬çš„ç®—æœ¯è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç®—æœ¯æ“ä½œåˆ›å»ºå’Œè¿”å›ä¸€ä¸ªæ–°çš„ Complex å®ä¾‹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹è¿™ä¸ªå®ä¾‹ã€‚è¿™ç§æ¨¡å¼ç§°ä¸ºå‡½æ•°å¼æ–¹æ³•ï¼Œå› ä¸ºæ–¹æ³•è¿”å›çš„ç»“æœæ˜¯å°†å‡½æ•°åº”ç”¨åˆ°å…¶æ“ä½œæ•°ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å®ƒã€‚å°†å…¶ä¸è¿‡ç¨‹å¼æˆ–å‘½ä»¤å¼æ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œåœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ–¹æ³•å°†ä¸€ä¸ªè®¡ç®—è¿‡ç¨‹åº”ç”¨äºå®ƒä»¬çš„æ“ä½œæ•°ï¼Œä»è€Œå¯¼è‡´å…¶çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚æ³¨æ„ï¼Œæ–¹æ³•åæ˜¯ä»‹è¯ï¼ˆå¦‚ plus)ï¼Œè€Œä¸æ˜¯åŠ¨è¯ï¼ˆå¦‚ add)ã€‚è¿™å¼ºè°ƒäº†è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³æ–¹æ³•ä¸ä¼šæ”¹å˜å¯¹è±¡çš„å€¼ã€‚BigInteger å’Œ BigDecimal ç±»ä¸éµå®ˆè¿™ç§å‘½åçº¦å®šï¼Œè¿™å¯¼è‡´äº†è®¸å¤šä½¿ç”¨é”™è¯¯ã€‚</p>
<p>å¦‚æœä¸ç†Ÿæ‚‰å‡½æ•°å¼æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½çœ‹èµ·æ¥ä¸è‡ªç„¶ï¼Œä½†å®ƒå®ç°äº†ä¸å˜æ€§ï¼Œè¿™ä¹ˆåšæœ‰å¾ˆå¤šä¼˜åŠ¿ã€‚ <strong>ä¸å¯å˜å¯¹è±¡å¾ˆç®€å•ã€‚</strong> ä¸å¯å˜å¯¹è±¡å¯ä»¥ä¿æŒå®ƒè¢«åˆ›å»ºæ—¶çš„çŠ¶æ€ã€‚å¦‚æœèƒ½å¤Ÿç¡®ä¿æ‰€æœ‰æ„é€ å‡½æ•°éƒ½å»ºç«‹äº†ç±»ä¸å˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯è¿™äº›ä¸å˜é‡å°†ä¸€ç›´ä¿æŒï¼Œè€Œæ— éœ€ä½ æˆ–ä½¿ç”¨ç±»çš„ç¨‹åºå‘˜åšè¿›ä¸€æ­¥çš„å·¥ä½œã€‚å¦ä¸€æ–¹é¢ï¼Œå¯å˜å¯¹è±¡å¯ä»¥å…·æœ‰ä»»æ„å¤æ‚çš„çŠ¶æ€ç©ºé—´ã€‚å¦‚æœæ–‡æ¡£æ²¡æœ‰æä¾›ç”±ä¿®æ”¹å™¨æ–¹æ³•æ‰§è¡Œçš„çŠ¶æ€è½¬æ¢çš„ç²¾ç¡®æè¿°ï¼Œé‚£ä¹ˆå°±å¾ˆéš¾æˆ–ä¸å¯èƒ½å¯é åœ°ä½¿ç”¨å¯å˜ç±»ã€‚</p>
<p><strong>ä¸å¯å˜å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›å®ƒä»¬ä¸éœ€è¦åŒæ­¥ã€‚</strong> å®ƒä»¬ä¸ä¼šå› ä¸ºå¤šçº¿ç¨‹å¹¶å‘è®¿é—®è€ŒæŸåã€‚è¿™æ— ç–‘æ˜¯å®ç°çº¿ç¨‹å®‰å…¨çš„æœ€ç®€å•æ–¹æ³•ã€‚ç”±äºä»»ä½•çº¿ç¨‹éƒ½æ— æ³•è§‚å¯Ÿåˆ°å¦ä¸€ä¸ªçº¿ç¨‹å¯¹ä¸å¯å˜å¯¹è±¡çš„ä»»ä½•å½±å“ï¼Œå› æ­¤ <strong>å¯ä»¥è‡ªç”±å…±äº«ä¸å¯å˜å¯¹è±¡ã€‚</strong> åŒæ—¶ï¼Œä¸å¯å˜ç±»åº”è¯¥é¼“åŠ±å®¢æˆ·ç«¯å°½å¯èƒ½å¤ç”¨ç°æœ‰çš„å®ä¾‹ã€‚ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä¸ºå¸¸ç”¨å€¼æä¾›å…¬å…±é™æ€ final å¸¸é‡ã€‚ä¾‹å¦‚ï¼ŒComplex ç±»å¯èƒ½æä¾›ä»¥ä¸‹å¸¸é‡ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Complex ZERO = <span style="color:#fff;font-weight:bold">new</span> Complex(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Complex ONE = <span style="color:#fff;font-weight:bold">new</span> Complex(<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">final</span> Complex I = <span style="color:#fff;font-weight:bold">new</span> Complex(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">1</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ–¹æ³•å¯ä»¥æ›´è¿›ä¸€æ­¥ã€‚ä¸å¯å˜ç±»å¯ä»¥æä¾›é™æ€å·¥å‚ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-2/Chapter-2-Item-1-Consider-static-factory-methods-instead-of-constructors.md">Item-1</a>ï¼‰ï¼Œè¿™äº›å·¥å‚ç¼“å­˜ç»å¸¸è¯·æ±‚çš„å®ä¾‹ï¼Œä»¥é¿å…åœ¨ç°æœ‰å®ä¾‹å¯ç”¨æ—¶åˆ›å»ºæ–°å®ä¾‹ã€‚æ‰€æœ‰åŒ…è£…ç±»å’Œ BigInteger éƒ½æ˜¯è¿™æ ·åšçš„ã€‚ä½¿ç”¨è¿™ç§é™æ€å·¥å‚ä¼šå¯¼è‡´å®¢æˆ·ç«¯å…±äº«å®ä¾‹è€Œä¸æ˜¯åˆ›å»ºæ–°å®ä¾‹ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å’Œåƒåœ¾æ”¶é›†æˆæœ¬ã€‚åœ¨è®¾è®¡æ–°ç±»æ—¶ï¼Œé€‰æ‹©é™æ€å·¥å‚è€Œä¸æ˜¯å…¬å…±æ„é€ å‡½æ•°ï¼Œè¿™å°†ä½¿ä½ èƒ½å¤Ÿçµæ´»åœ°åœ¨ä»¥åæ·»åŠ ç¼“å­˜ï¼Œè€Œæ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ã€‚</p>
<p>ä¸å¯å˜å¯¹è±¡å¯ä»¥è‡ªç”±å…±äº«è¿™ä¸€äº‹å®çš„ç»“æœä¹‹ä¸€æ˜¯ï¼Œä½ æ°¸è¿œä¸éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œé˜²å¾¡æ€§çš„å¤åˆ¶ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-8/Chapter-8-Item-50-Make-defensive-copies-when-needed.md">Item-50</a>ï¼‰ã€‚äº‹å®ä¸Šï¼Œä½ æ ¹æœ¬ä¸éœ€è¦åšä»»ä½•æ‹·è´ï¼Œå› ä¸ºæ‹·è´å°†æ°¸è¿œç­‰åŒäºåŸä»¶ã€‚å› æ­¤ï¼Œä½ ä¸éœ€è¦ä¹Ÿä¸åº”è¯¥åœ¨ä¸å¯å˜ç±»ä¸Šæä¾›å…‹éš†æ–¹æ³•æˆ–å¤åˆ¶æ„é€ å‡½æ•°ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-3/Chapter-3-Item-13-Override-clone-judiciously.md">Item-13</a>ï¼‰ã€‚è¿™åœ¨ Java å¹³å°çš„æ—©æœŸå¹¶æ²¡æœ‰å¾—åˆ°å¾ˆå¥½çš„ç†è§£ï¼Œå› æ­¤ String ç±»ç¡®å®æœ‰ä¸€ä¸ªå¤åˆ¶æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ï¼Œå³ä½¿æœ‰ï¼Œä¹Ÿåº”è¯¥å°‘ç”¨ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-2/Chapter-2-Item-6-Avoid-creating-unnecessary-objects.md">Item-6</a>ï¼‰ã€‚</p>
<p><strong>ä½ ä¸ä»…å¯ä»¥å…±äº«ä¸å¯å˜å¯¹è±¡ï¼Œè€Œä¸”å¯ä»¥å…±äº«å®ƒä»¬çš„å†…éƒ¨å®ç°ã€‚</strong> ä¾‹å¦‚ï¼ŒBigInteger ç±»åœ¨å†…éƒ¨ä½¿ç”¨ç¬¦å·å¤§å°æ¥è¡¨ç¤ºã€‚ç¬¦å·ç”± int è¡¨ç¤ºï¼Œå¤§å°ç”± int æ•°ç»„è¡¨ç¤ºã€‚negate æ–¹æ³•äº§ç”Ÿä¸€ä¸ªæ–°çš„ BigIntegerï¼Œå¤§å°ç›¸åŒï¼Œç¬¦å·ç›¸åã€‚å³ä½¿æ•°ç»„æ˜¯å¯å˜çš„ï¼Œä¹Ÿä¸éœ€è¦å¤åˆ¶ï¼›æ–°åˆ›å»ºçš„ BigInteger æŒ‡å‘ä¸åŸå§‹æ•°ç»„ç›¸åŒçš„å†…éƒ¨æ•°ç»„ã€‚</p>
<p><strong>ä¸å¯å˜å¯¹è±¡å¯ä»¥å¾ˆå¥½çš„ä½œä¸ºå…¶ä»–å¯¹è±¡çš„æ„å»ºæ¨¡å—ï¼Œ</strong> æ— è®ºæ˜¯å¯å˜çš„è¿˜æ˜¯ä¸å¯å˜çš„ã€‚å¦‚æœçŸ¥é“å¤æ‚å¯¹è±¡çš„ç»„ä»¶å¯¹è±¡ä¸ä¼šåœ¨å…¶å†…éƒ¨å‘ç”Ÿæ›´æ”¹ï¼Œé‚£ä¹ˆç»´æŠ¤å¤æ‚å¯¹è±¡çš„ä¸å˜æ€§å°±ä¼šå®¹æ˜“å¾—å¤šã€‚è¿™ä¸ªåŸåˆ™çš„ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ˜¯ï¼Œä¸å¯å˜å¯¹è±¡å¾ˆåˆé€‚ä½œä¸º Map çš„é”®å’Œ Set çš„å…ƒç´ ï¼šä½ ä¸å¿…æ‹…å¿ƒå®ƒä»¬çš„å€¼åœ¨ Map æˆ– Set ä¸­å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œç ´å Map æˆ– Set çš„ä¸å˜æ€§ã€‚</p>
<p><strong>ä¸å¯å˜å¯¹è±¡è‡ªå¸¦æä¾›æ•…éšœåŸå­æ€§</strong>ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-10/Chapter-10-Item-76-Strive-for-failure-atomicity.md">Item-76</a>ï¼‰ã€‚ä»–ä»¬çš„çŠ¶æ€ä»æœªæ”¹å˜ï¼Œæ‰€ä»¥ä¸å¯èƒ½å‡ºç°æš‚æ—¶çš„ä¸ä¸€è‡´ã€‚</p>
<p><strong>ä¸å¯å˜ç±»çš„ä¸»è¦ç¼ºç‚¹æ˜¯æ¯ä¸ªä¸åŒçš„å€¼éƒ½éœ€è¦ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡ã€‚</strong> åˆ›å»ºè¿™äº›å¯¹è±¡çš„æˆæœ¬å¯èƒ½å¾ˆé«˜ï¼Œå°¤å…¶æ˜¯å¯¹è±¡å¾ˆå¤§çš„æ—¶å€™ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç™¾ä¸‡ä½çš„ BigIntegerï¼Œä½ æƒ³æ”¹å˜å®ƒçš„ä½é˜¶ä½ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>BigInteger moby = ...;
</span></span><span style="display:flex;"><span>moby = moby.<span style="color:#007f7f">flipBit</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>flipBit æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ BigInteger å®ä¾‹ï¼Œä¹Ÿæœ‰ç™¾ä¸‡ä½é•¿ï¼Œåªåœ¨ä¸€ä¸ªæ¯”ç‰¹ä¸Šä¸åŸå§‹çš„ä¸åŒã€‚è¯¥æ“ä½œéœ€è¦ä¸ BigInteger çš„å¤§å°æˆæ¯”ä¾‹çš„æ—¶é—´å’Œç©ºé—´ã€‚ä¸ <code>java.util.BitSet</code> å½¢æˆå¯¹æ¯”ã€‚ä¸ BigInteger ä¸€æ ·ï¼ŒBitSet è¡¨ç¤ºä»»æ„é•¿çš„ä½åºåˆ—ï¼Œä½†ä¸ BigInteger ä¸åŒï¼ŒBitSet æ˜¯å¯å˜çš„ã€‚BitSet ç±»æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ åœ¨å›ºå®šçš„æ—¶é—´å†…æ”¹å˜ç™¾ä¸‡ä½å®ä¾‹çš„å•ä¸ªä½çš„çŠ¶æ€ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>BitSet moby = ...;
</span></span><span style="display:flex;"><span>moby.<span style="color:#007f7f">flip</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ‰§è¡Œå¤šæ­¥æ“ä½œï¼Œåœ¨æ¯ä¸€æ­¥ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæœ€ç»ˆä¸¢å¼ƒé™¤æœ€ç»ˆç»“æœä¹‹å¤–çš„æ‰€æœ‰å¯¹è±¡ï¼Œé‚£ä¹ˆæ€§èƒ½é—®é¢˜å°±ä¼šè¢«æ”¾å¤§ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯çŒœæµ‹é€šå¸¸éœ€è¦å“ªäº›å¤šæ­¥æ“ä½œï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºåŸºæœ¬æ•°æ®ç±»å‹æä¾›ã€‚å¦‚æœå°†å¤šæ­¥æ“ä½œä½œä¸ºåŸºæœ¬æ•°æ®ç±»å‹æä¾›ï¼Œåˆ™ä¸å¯å˜ç±»ä¸å¿…åœ¨æ¯ä¸ªæ­¥éª¤ä¸­åˆ›å»ºå•ç‹¬çš„å¯¹è±¡ã€‚åœ¨å†…éƒ¨ï¼Œä¸å¯å˜ç±»å¯ä»¥ä»»æ„èªæ˜ã€‚ä¾‹å¦‚ï¼ŒBigInteger æœ‰ä¸€ä¸ªåŒ…ç§æœ‰çš„å¯å˜ã€Œä¼´éšç±»ã€ï¼Œå®ƒä½¿ç”¨è¿™ä¸ªç±»æ¥åŠ é€Ÿå¤šæ­¥æ“ä½œï¼Œæ¯”å¦‚æ¨¡å—åŒ–æ±‚å¹‚ã€‚ç”±äºå‰é¢åˆ—å‡ºçš„æ‰€æœ‰åŸå› ï¼Œä½¿ç”¨å¯å˜ä¼´éšç±»è¦æ¯”ä½¿ç”¨ BigInteger éš¾å¾—å¤šã€‚å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…ä½¿ç”¨å®ƒï¼šBigInteger çš„å®ç°è€…ä¸ºä½ åšäº†è‰°è‹¦çš„å·¥ä½œã€‚</p>
<p>å¦‚æœä½ èƒ½å¤Ÿå‡†ç¡®åœ°é¢„æµ‹å®¢æˆ·ç«¯å¸Œæœ›åœ¨ä¸å¯å˜ç±»ä¸Šæ‰§è¡Œå“ªäº›å¤æ‚æ“ä½œï¼Œé‚£ä¹ˆåŒ…ç§æœ‰å¯å˜ä¼´éšç±»æ–¹æ³•å°±å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ æœ€å¥½çš„é€‰æ‹©å°±æ˜¯æä¾›ä¸€ä¸ªå…¬å…±å¯å˜ä¼´éšç±»ã€‚è¿™ç§æ–¹æ³•åœ¨ Java åº“ä¸­çš„ä¸»è¦ç¤ºä¾‹æ˜¯ String ç±»ï¼Œå®ƒçš„å¯å˜ä¼´éšç±»æ˜¯ StringBuilderï¼ˆåŠå…¶è¿‡æ—¶çš„å‰èº« StringBuffer)ã€‚</p>
<p>æ—¢ç„¶ä½ å·²ç»çŸ¥é“äº†å¦‚ä½•åˆ›å»ºä¸å¯å˜ç±»ï¼Œå¹¶ä¸”äº†è§£äº†ä¸å¯å˜æ€§çš„ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬æ¥è®¨è®ºä¸€äº›è®¾è®¡æ–¹æ¡ˆã€‚å›æƒ³ä¸€ä¸‹ï¼Œä¸ºäº†ä¿è¯ä¸å˜æ€§ï¼Œç±»ä¸å…è®¸è‡ªå·±è¢«å­ç±»åŒ–ã€‚å¯ä»¥ç”¨ final ä¿®é¥°ä»¥è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ›´çµæ´»çš„é€‰æ‹©ï¼Œä½ å¯ä»¥å°†å…¶æ‰€æœ‰æ„é€ å‡½æ•°å˜ä¸ºç§æœ‰æˆ–åŒ…ç§æœ‰ï¼Œå¹¶ä½¿ç”¨å…¬å…±é™æ€å·¥å‚æ–¹æ³•æ¥ä»£æ›¿å…¬å…±çš„æ„é€ å‡½æ•°ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-2/Chapter-2-Item-1-Consider-static-factory-methods-instead-of-constructors.md">Item-1</a>ï¼‰ã€‚Complex ç±»é‡‡ç”¨è¿™ç§æ–¹å¼ä¿®æ”¹åå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// Immutable class with static factories instead of constructors
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Complex {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span> re;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">double</span> im;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Complex(<span style="color:#fff;font-weight:bold">double</span> re, <span style="color:#fff;font-weight:bold">double</span> im) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">re</span> = re;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">im</span> = im;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> Complex valueOf(<span style="color:#fff;font-weight:bold">double</span> re, <span style="color:#fff;font-weight:bold">double</span> im) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Complex(re, im);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ... <span style="color:#007f7f">// Remainder unchanged
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ–¹å¼é€šå¸¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å®ƒæ˜¯æœ€çµæ´»çš„ï¼Œå› ä¸ºå®ƒå…è®¸ä½¿ç”¨å¤šä¸ªåŒ…ç§æœ‰å®ç°ç±»ã€‚å¯¹äºé©»ç•™åœ¨åŒ…ä¹‹å¤–çš„å®¢æˆ·ç«¯è€Œè¨€ï¼Œä¸å¯å˜ç±»å®é™…ä¸Šæ˜¯ final ç±»ï¼Œå› ä¸ºä¸å¯èƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªåŒ…çš„ç±»ï¼Œå› ä¸ºå®ƒç¼ºå°‘å…¬å…±æˆ–å—ä¿æŠ¤çš„æ„é€ å‡½æ•°ã€‚é™¤äº†å…è®¸å¤šå®ç°ç±»çš„çµæ´»æ€§ä¹‹å¤–ï¼Œè¿™ç§æ–¹æ³•è¿˜é€šè¿‡æ”¹è¿›é™æ€å·¥å‚çš„å¯¹è±¡ç¼“å­˜åŠŸèƒ½ï¼Œä½¿å¾—åç»­ç‰ˆæœ¬ä¸­è°ƒä¼˜è¯¥ç±»çš„æ€§èƒ½æˆä¸ºå¯èƒ½ã€‚</p>
<p>å½“ç¼–å†™ BigInteger å’Œ BigDecimal æ—¶ï¼Œä¸å¯å˜ç±»å¿…é¡»æ˜¯æœ‰æ•ˆçš„ final è¿™ä¸€ç‚¹æ²¡æœ‰è¢«å¹¿æ³›ç†è§£ï¼Œå› æ­¤å®ƒä»¬çš„æ‰€æœ‰æ–¹æ³•éƒ½å¯èƒ½è¢«é‡å†™ã€‚é—æ†¾çš„æ˜¯ï¼Œåœ¨ä¿ç•™å‘åå…¼å®¹æ€§çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé—®é¢˜æ— æ³•å¾—åˆ°çº æ­£ã€‚å¦‚æœä½ ç¼–å†™çš„ç±»çš„å®‰å…¨æ€§ä¾èµ–äºæ¥è‡ªä¸å—ä¿¡ä»»å®¢æˆ·ç«¯çš„ BigInteger æˆ– BigDecimal å‚æ•°çš„ä¸å¯å˜æ€§ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ£€æŸ¥è¯¥å‚æ•°æ˜¯å¦æ˜¯ã€ŒçœŸæ­£çš„ã€BigInteger æˆ– BigDecimalï¼Œè€Œä¸æ˜¯ä¸å—ä¿¡ä»»çš„å­ç±»å®ä¾‹ã€‚å¦‚æœæ˜¯åè€…ï¼Œä½ å¿…é¡»é˜²å¾¡æ€§çš„å¤åˆ¶å®ƒï¼Œå‡è®¾å®ƒå¯èƒ½æ˜¯å¯å˜çš„ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-8/Chapter-8-Item-50-Make-defensive-copies-when-needed.md">Item-50</a>ï¼‰:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> BigInteger safeInstance(BigInteger val) {
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">return</span> val.<span style="color:#007f7f">getClass</span>() == BigInteger.<span style="color:#007f7f">class</span> ?
</span></span><span style="display:flex;"><span>val : <span style="color:#fff;font-weight:bold">new</span> BigInteger(val.<span style="color:#007f7f">toByteArray</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ¡ç›®å¼€å¤´çš„ä¸å¯å˜ç±»çš„è§„åˆ™åˆ—è¡¨æŒ‡å‡ºï¼Œæ²¡æœ‰æ–¹æ³•å¯ä»¥ä¿®æ”¹å¯¹è±¡ï¼Œå®ƒçš„æ‰€æœ‰å­—æ®µå¿…é¡»æ˜¯ final çš„ã€‚å®é™…ä¸Šï¼Œè¿™äº›è§„åˆ™è¿‡äºä¸¥æ ¼ï¼Œå¯ä»¥é€‚å½“æ”¾æ¾æ¥æé«˜æ€§èƒ½ã€‚å®é™…ä¸Šï¼Œä»»ä½•æ–¹æ³•éƒ½ä¸èƒ½åœ¨å¯¹è±¡çš„çŠ¶æ€ä¸­äº§ç”Ÿå¤–éƒ¨å¯è§çš„æ›´æ”¹ã€‚ç„¶è€Œï¼Œä¸€äº›ä¸å¯å˜ç±»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé final å­—æ®µï¼Œå®ƒä»¬åœ¨ç¬¬ä¸€æ¬¡éœ€è¦è¿™äº›å­—æ®µæ—¶ï¼Œå°±ä¼šåœ¨å…¶ä¸­ç¼“å­˜æ˜‚è´µè®¡ç®—çš„ç»“æœã€‚å¦‚æœå†æ¬¡è¯·æ±‚ç›¸åŒçš„å€¼ï¼Œåˆ™è¿”å›ç¼“å­˜çš„å€¼ï¼Œä»è€ŒèŠ‚çœäº†é‡æ–°è®¡ç®—çš„æˆæœ¬ã€‚è¿™ä¸ªæŠ€å·§ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œè¿™å°±ä¿è¯äº†é‡å¤è®¡ç®—ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœã€‚</p>
<p>ä¾‹å¦‚ï¼ŒPhoneNumber çš„ hashCode æ–¹æ³•(<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-3/Chapter-3-Item-11-Always-override-hashCode-when-you-override-equals.md">Item-11</a>ï¼Œç¬¬ 53 é¡µï¼‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è®¡ç®—å“ˆå¸Œä»£ç ï¼Œå¹¶ç¼“å­˜å®ƒï¼Œä»¥å¤‡å†æ¬¡è°ƒç”¨ã€‚è¿™ä¸ªæŠ€æœ¯æ˜¯ä¸€ä¸ªå»¶è¿Ÿåˆå§‹åŒ–çš„ä¾‹å­ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-11/Chapter-11-Item-83-Use-lazy-initialization-judiciously.md">Item-83</a>ï¼‰ï¼ŒString ä¹Ÿä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ã€‚</p>
<p>å…³äºå¯åºåˆ—åŒ–æ€§ï¼Œåº”è¯¥æå‡ºä¸€ä¸ªè­¦å‘Šã€‚å¦‚æœä½ é€‰æ‹©è®©ä¸å¯å˜ç±»å®ç° Serializableï¼Œå¹¶ä¸”è¯¥ç±»åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¼•ç”¨å¯å˜å¯¹è±¡çš„å­—æ®µï¼Œé‚£ä¹ˆä½ å¿…é¡»æä¾›ä¸€ä¸ªæ˜¾å¼çš„ readObject æˆ– readResolve æ–¹æ³•ï¼Œæˆ–è€…ä½¿ç”¨ ObjectOutputStream.writeUnshared æˆ– ObjectInputStream.readUnshared æ–¹æ³•ï¼Œå³ä½¿é»˜è®¤çš„åºåˆ—åŒ–å½¢å¼æ˜¯å¯ä»¥æ¥å—çš„ã€‚å¦åˆ™æ”»å‡»è€…å¯èƒ½åˆ›å»ºç±»çš„å¯å˜å®ä¾‹ã€‚<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-12/Chapter-12-Item-88-Write-readObject-methods-defensively.md">Item-88</a>è¯¦ç»†è®¨è®ºäº†è¿™ä¸ªä¸»é¢˜ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œä¸è¦æ€¥äºä¸ºæ¯ä¸ª getter éƒ½ç¼–å†™ setterã€‚<strong>ç±»åº”è¯¥æ˜¯ä¸å¯å˜çš„ï¼Œé™¤éæœ‰å¾ˆå¥½çš„ç†ç”±è®©å®ƒä»¬å¯å˜ã€‚</strong> ä¸å¯å˜ç±»æä¾›äº†è®¸å¤šä¼˜ç‚¹ï¼Œå®ƒä»¬å”¯ä¸€çš„ç¼ºç‚¹æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å‡ºç°æ€§èƒ½é—®é¢˜ã€‚ä½ åº”è¯¥å§‹ç»ˆä½¿å°çš„å€¼å¯¹è±¡ï¼ˆå¦‚ PhoneNumber å’Œ Complexï¼‰æˆä¸ºä¸å¯å˜çš„ã€‚ï¼ˆJava åº“ä¸­æœ‰å‡ ä¸ªç±»ï¼Œæ¯”å¦‚ <code>java.util.Date</code> å’Œ <code>java.awt.Point</code>ï¼Œåº”è¯¥æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚ï¼‰ä¹Ÿåº”è¯¥è®¤çœŸè€ƒè™‘å°†è¾ƒå¤§çš„å€¼å¯¹è±¡ï¼ˆå¦‚ String å’Œ BigIntegerï¼‰è®¾ç½®ä¸ºä¸å¯å˜çš„ã€‚åªæœ‰ç¡®è®¤äº†å®ç°ä»¤äººæ»¡æ„çš„æ€§èƒ½æ˜¯å¿…è¦çš„ï¼Œæ‰åº”è¯¥ä¸ºä¸å¯å˜ç±»æä¾›ä¸€ä¸ªå…¬å…±å¯å˜ä¼´éšç±»ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-9/Chapter-9-Item-67-Optimize-judiciously.md">Item-67</a>ï¼‰ã€‚</p>
<p>å¯¹äºæŸäº›ç±»æ¥è¯´ï¼Œä¸å˜æ€§æ˜¯ä¸åˆ‡å®é™…çš„ã€‚<strong>å¦‚æœä¸€ä¸ªç±»ä¸èƒ½æˆä¸ºä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå°±å°½å¯èƒ½åœ°é™åˆ¶å®ƒçš„å¯å˜æ€§ã€‚</strong> å‡å°‘å¯¹è±¡å¯èƒ½å­˜åœ¨çš„çŠ¶æ€æ•°å¯ä»¥æ›´å®¹æ˜“åœ° reason about the object å¹¶å‡å°‘å‡ºé”™çš„å¯èƒ½æ€§ã€‚å› æ­¤ï¼Œé™¤éæœ‰ä»¤äººä¿¡æœçš„ç†ç”±ï¼Œå¦åˆ™æ¯ä¸ªå­—æ®µéƒ½åº”è¯¥ç”¨ final ä¿®é¥°ã€‚å°†æœ¬æ¡ç›®çš„å»ºè®®ä¸ Item-15 çš„å»ºè®®ç»“åˆèµ·æ¥ï¼Œä½ è‡ªç„¶ä¼šå€¾å‘äº <strong>å£°æ˜æ¯ä¸ªå­—æ®µä¸ºç§æœ‰ finalï¼Œé™¤éæœ‰å¾ˆå¥½çš„ç†ç”±ä¸è¿™æ ·åšã€‚</strong></p>
<p><strong>æ„é€ å‡½æ•°åº”è¯¥åˆ›å»ºå®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡ï¼Œå¹¶å»ºç«‹æ‰€æœ‰çš„ä¸å˜é‡ã€‚</strong> é™¤éæœ‰å……åˆ†çš„ç†ç”±ï¼Œå¦åˆ™ä¸è¦æä¾›ä¸æ„é€ å‡½æ•°æˆ–é™æ€å·¥å‚åˆ†ç¦»çš„å…¬å…±åˆå§‹åŒ–æ–¹æ³•ã€‚ç±»ä¼¼åœ°ï¼Œä¸è¦æä¾›ã€Œé‡æ–°åˆå§‹åŒ–ã€çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…è®¸å¤ç”¨å¯¹è±¡ï¼Œå°±å¥½åƒå®ƒæ˜¯ç”¨ä¸åŒçš„åˆå§‹çŠ¶æ€æ„é€ çš„ä¸€æ ·ã€‚è¿™äº›æ–¹æ³•é€šå¸¸åªæä¾›å¾ˆå°‘çš„æ€§èƒ½æ”¶ç›Šï¼Œè€Œä»£ä»·æ˜¯å¢åŠ äº†å¤æ‚æ€§ã€‚</p>
<p>CountDownLatch ç±»ä½“ç°äº†è¿™äº›åŸåˆ™ã€‚å®ƒæ˜¯å¯å˜çš„ï¼Œä½†æ˜¯å®ƒçš„çŠ¶æ€ç©ºé—´æ•…æ„ä¿æŒå¾ˆå°ã€‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨å®ƒä¸€æ¬¡ï¼Œå®ƒå°±å®Œæˆäº†ä½¿å‘½ï¼šä¸€æ—¦å€’è®¡æ—¶é”å­˜å™¨çš„è®¡æ•°è¾¾åˆ°é›¶ï¼Œä½ å¯èƒ½ä¸ä¼šå¤ç”¨å®ƒã€‚</p>
<p>å…³äºæœ¬æ¡ç›®ä¸­ Complex ç±»çš„æœ€åä¸€ç‚¹éœ€è¦è¡¥å……çš„è¯´æ˜ã€‚è¿™ä¸ªä¾‹å­åªæ˜¯ä¸ºäº†è¯´æ˜ä¸å˜æ€§ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªå·¥ä¸šçº§å¼ºåº¦çš„å¤æ•°å®ç°ã€‚å®ƒä½¿ç”¨äº†å¤æ‚ä¹˜æ³•å’Œé™¤æ³•çš„æ ‡å‡†å…¬å¼ï¼Œè¿™äº›å…¬å¼æ²¡æœ‰è¢«æ­£ç¡®åœ°å››èˆäº”å…¥ï¼Œå¹¶ä¸”ä¸ºå¤æ‚çš„ NaNs å’Œ infinities æä¾›äº†ç³Ÿç³•çš„è¯­ä¹‰ [Kahan91, Smith62, Thomas94]ã€‚</p>
<h2 id="item-18å¤åˆä¼˜å…ˆäºç»§æ‰¿favor-composition-over-inheritance">Item-18ï¼šå¤åˆä¼˜å…ˆäºç»§æ‰¿ï¼ˆFavor composition over inheritanceï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-18å¤åˆä¼˜å…ˆäºç»§æ‰¿favor-composition-over-inheritance">#</a></h2>
<p>ç»§æ‰¿æ˜¯å®ç°ä»£ç å¤ç”¨çš„ä¸€ç§å¼ºå¤§æ–¹æ³•ï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯æœ€ä½³çš„å·¥å…·ã€‚ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´è½¯ä»¶å˜å¾—è„†å¼±ã€‚åœ¨åŒä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨ç»§æ‰¿æ˜¯å®‰å…¨çš„ï¼Œå…¶ä¸­å­ç±»å’Œè¶…ç±»å®ç°ç”±ç›¸åŒçš„ç¨‹åºå‘˜æ§åˆ¶ã€‚åœ¨å¯¹ä¸“ä¸ºæ‰©å±•è€Œè®¾è®¡å’Œæ–‡æ¡£åŒ–çš„ç±»æ—¶ä½¿ç”¨ç»§æ‰¿ä¹Ÿæ˜¯å®‰å…¨çš„ï¼ˆ<a href="https://github.com/clxering/Effective-Java-3rd-edition-Chinese-English-bilingual/blob/dev/Chapter-4/Chapter-4-Item-19-Design-and-document-for-inheritance-or-else-prohibit-it.md">Item-19</a>ï¼‰ã€‚ç„¶è€Œï¼Œå¯¹æ™®é€šçš„å…·ä½“ç±»è¿›è¡Œè·¨è¶ŠåŒ…è¾¹ç•Œçš„ç»§æ‰¿æ˜¯å±é™©çš„ã€‚ä½œä¸ºæé†’ï¼Œæœ¬ä¹¦ä½¿ç”¨ã€Œç»§æ‰¿ã€ä¸€è¯æ¥è¡¨ç¤ºå®ç°ç»§æ‰¿ï¼ˆå½“ä¸€ä¸ªç±»æ‰©å±•å¦ä¸€ä¸ªç±»æ—¶ï¼‰ã€‚æœ¬æ¡ç›®ä¸­è®¨è®ºçš„é—®é¢˜ä¸é€‚ç”¨äºæ¥å£ç»§æ‰¿ï¼ˆå½“ç±»å®ç°æ¥å£æˆ–ä¸€ä¸ªæ¥å£æ‰©å±•å¦ä¸€ä¸ªæ¥å£æ—¶ï¼‰ã€‚</p>
<p>// todo</p>
<h2 id="item-19è¦ä¹ˆè®¾è®¡ç»§æ‰¿å¹¶æä¾›æ–‡æ¡£è¯´æ˜è¦ä¹ˆç¦æ­¢ç»§æ‰¿">Item-19ï¼šè¦ä¹ˆè®¾è®¡ç»§æ‰¿å¹¶æä¾›æ–‡æ¡£è¯´æ˜ï¼Œè¦ä¹ˆç¦æ­¢ç»§æ‰¿<a hidden class="anchor" aria-hidden="true" href="#item-19è¦ä¹ˆè®¾è®¡ç»§æ‰¿å¹¶æä¾›æ–‡æ¡£è¯´æ˜è¦ä¹ˆç¦æ­¢ç»§æ‰¿">#</a></h2>
<p>ï¼ˆDesign and document for inheritance or else prohibit itï¼‰</p>
<p>å¯¹äºä¸“é—¨ä¸ºäº†ç»§æ‰¿è€Œè®¾è®¡çš„ç±», éœ€è¦å…·æœ‰è‰¯å¥½çš„æ–‡æ¡£ï¼Œè¯¥ç±»çš„æ–‡æ¡£å¿…é¡»ç²¾ç¡®åœ°æè¿°è¦†ç›–æ¯ä¸ªæ–¹æ³•æ‰€å¸¦æ¥çš„å½±å“ã€‚å¯¹äºé‚£äº›å¹¶éä¸ºäº†å®‰å…¨åœ°è¿›è¡Œå­ç±»åŒ–è€Œè®¾è®¡å’Œç¼–å†™æ–‡æ¡£çš„ç±», è¦ç¦æ­¢å­ç±»åŒ–ã€‚</p>
<ul>
<li>æŠŠç±»å£°æ˜ä¸ºfinal</li>
<li>æŠŠæ‰€æœ‰çš„æ„é€ å™¨éƒ½å˜æˆç§æœ‰çš„ï¼Œæˆ–è€…åŒ…çº§ç§æœ‰çš„ï¼Œå¹¶å¢åŠ ä¸€äº›å…¬æœ‰çš„é™æ€å·¥å‚æ¥æ›¿ä»£æ„é€ å™¨</li>
</ul>
<h2 id="item-20æ¥å£ä¼˜äºæŠ½è±¡ç±»prefer-interfaces-to-abstract-classes">Item-20ï¼šæ¥å£ä¼˜äºæŠ½è±¡ç±»ï¼ˆPrefer interfaces to abstract classesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-20æ¥å£ä¼˜äºæŠ½è±¡ç±»prefer-interfaces-to-abstract-classes">#</a></h2>
<h2 id="item-21ä¸ºåä»£è®¾è®¡æ¥å£design-interfaces-for-posterity">Item-21ï¼šä¸ºåä»£è®¾è®¡æ¥å£ï¼ˆDesign interfaces for posterityï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-21ä¸ºåä»£è®¾è®¡æ¥å£design-interfaces-for-posterity">#</a></h2>
<h2 id="item-22æ¥å£åªç”¨äºå®šä¹‰ç±»å‹use-interfaces-only-to-define-types">Item-22ï¼šæ¥å£åªç”¨äºå®šä¹‰ç±»å‹ï¼ˆUse interfaces only to define typesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-22æ¥å£åªç”¨äºå®šä¹‰ç±»å‹use-interfaces-only-to-define-types">#</a></h2>
<h2 id="item-23ç±»å±‚æ¬¡ä¼˜äºæ ‡ç­¾ç±»prefer-class-hierarchies-to-tagged-classes">Item-23ï¼šç±»å±‚æ¬¡ä¼˜äºæ ‡ç­¾ç±»ï¼ˆPrefer class hierarchies to tagged classesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-23ç±»å±‚æ¬¡ä¼˜äºæ ‡ç­¾ç±»prefer-class-hierarchies-to-tagged-classes">#</a></h2>
<h2 id="item-24é™æ€æˆå‘˜ç±»ä¼˜äºéé™æ€æˆå‘˜ç±»favor-static-member-classes-over-nonstatic">Item-24ï¼šé™æ€æˆå‘˜ç±»ä¼˜äºéé™æ€æˆå‘˜ç±»ï¼ˆFavor static member classes over nonstaticï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-24é™æ€æˆå‘˜ç±»ä¼˜äºéé™æ€æˆå‘˜ç±»favor-static-member-classes-over-nonstatic">#</a></h2>
<h2 id="item-25æºæ–‡ä»¶ä»…é™æœ‰å•ä¸ªé¡¶å±‚ç±»limit-source-files-to-a-single-top-level-class">Item-25ï¼šæºæ–‡ä»¶ä»…é™æœ‰å•ä¸ªé¡¶å±‚ç±»ï¼ˆLimit source files to a single top-level classï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-25æºæ–‡ä»¶ä»…é™æœ‰å•ä¸ªé¡¶å±‚ç±»limit-source-files-to-a-single-top-level-class">#</a></h2>
<h1 id="chapter05-æ³›å‹generics">chapter05 æ³›å‹ï¼ˆGenericsï¼‰<a hidden class="anchor" aria-hidden="true" href="#chapter05-æ³›å‹generics">#</a></h1>
<p>æ³›å‹æ˜¯JAVA 5çš„æ–°ç‰¹æ€§ï¼Œåœ¨æ³›å‹å‡ºç°ä¹‹å‰ï¼Œä»é›†åˆä¸­è¯»å–çš„æ¯ä¸ªå¯¹è±¡éƒ½å¿…é¡»è¿›è¡Œå¼ºåˆ¶è½¬æ¢ï¼Œå¦‚æœæœ‰äººä¸å°å¿ƒæ’å…¥äº†é”™è¯¯ç±»å‹çš„å¯¹è±¡ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢å¯èƒ½åœ¨è¿è¡Œæ—¶å¤±è´¥ã€‚æ³›å‹å‡ºç°ä¹‹åï¼Œä½ å¯ä»¥å‘ŠçŸ¥ç¼–è¯‘å™¨åœ¨æ¯ä¸ªé›†åˆä¸­å…è®¸å“ªäº›ç±»å‹çš„å¯¹è±¡ã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ è¿›è¡Œå¼ºåˆ¶è½¬æ¢ä¸æ’å…¥çš„æ“ä½œï¼Œå¦‚æœä½ è¯•å›¾æ’å…¥ç±»å‹é”™è¯¯çš„å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶å‘Šè¯‰ä½ ã€‚è¿™æ ·çš„ç¨‹åºæ›´åŠ å®‰å…¨å’Œæ¸…æ™°ã€‚</p>
<h2 id="item-26ä¸è¦ä½¿ç”¨åŸå§‹ç±»å‹dont-use-raw-types">Item-26ï¼šä¸è¦ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆDonâ€™t use raw typesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-26ä¸è¦ä½¿ç”¨åŸå§‹ç±»å‹dont-use-raw-types">#</a></h2>
<h2 id="item-27æ¶ˆé™¤-unchecked-è­¦å‘Šeliminate-unchecked-warnings">Item-27ï¼šæ¶ˆé™¤ unchecked è­¦å‘Šï¼ˆEliminate unchecked warningsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-27æ¶ˆé™¤-unchecked-è­¦å‘Šeliminate-unchecked-warnings">#</a></h2>
<h2 id="item-28list-ä¼˜äºæ•°ç»„prefer-lists-to-arrays">Item-28ï¼šlist ä¼˜äºæ•°ç»„ï¼ˆPrefer lists to arraysï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-28list-ä¼˜äºæ•°ç»„prefer-lists-to-arrays">#</a></h2>
<h2 id="item-29ä¼˜å…ˆè€ƒè™‘æ³›å‹favor-generic-types">Item-29ï¼šä¼˜å…ˆè€ƒè™‘æ³›å‹ï¼ˆFavor generic typesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-29ä¼˜å…ˆè€ƒè™‘æ³›å‹favor-generic-types">#</a></h2>
<h2 id="item-30ä¼˜å…ˆä½¿ç”¨æ³›å‹æ–¹æ³•favor-generic-methods">Item-30ï¼šä¼˜å…ˆä½¿ç”¨æ³›å‹æ–¹æ³•ï¼ˆFavor generic methodsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-30ä¼˜å…ˆä½¿ç”¨æ³›å‹æ–¹æ³•favor-generic-methods">#</a></h2>
<h2 id="item-31ä½¿ç”¨æœ‰ç•Œé€šé…ç¬¦å¢åŠ -api-çš„çµæ´»æ€§use-bounded-wildcards-to-increase-api-flexibility">Item-31ï¼šä½¿ç”¨æœ‰ç•Œé€šé…ç¬¦å¢åŠ  API çš„çµæ´»æ€§ï¼ˆUse bounded wildcards to increase API flexibilityï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-31ä½¿ç”¨æœ‰ç•Œé€šé…ç¬¦å¢åŠ -api-çš„çµæ´»æ€§use-bounded-wildcards-to-increase-api-flexibility">#</a></h2>
<h2 id="item-32åŒæ—¶ä½¿ç”¨å¯å˜å‚æ•°å’Œæ³›å‹è¦è°¨æ…combine-generics-and-varargs-judiciously">Item-32ï¼šåŒæ—¶ä½¿ç”¨å¯å˜å‚æ•°å’Œæ³›å‹è¦è°¨æ…ï¼ˆCombine generics and varargs judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-32åŒæ—¶ä½¿ç”¨å¯å˜å‚æ•°å’Œæ³›å‹è¦è°¨æ…combine-generics-and-varargs-judiciously">#</a></h2>
<h2 id="item-33è€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨consider-typesafe-heterogeneous-containers">Item-33ï¼šè€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨ï¼ˆConsider typesafe heterogeneous containersï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-33è€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨consider-typesafe-heterogeneous-containers">#</a></h2>
<h1 id="chapter06-æšä¸¾å’Œæ³¨è§£enums-and-annotations">chapter06 æšä¸¾å’Œæ³¨è§£ï¼ˆEnums and Annotationsï¼‰<a hidden class="anchor" aria-hidden="true" href="#chapter06-æšä¸¾å’Œæ³¨è§£enums-and-annotations">#</a></h1>
<p>JAVA æ”¯æŒä¸¤ç§ç‰¹æ®Šç”¨é€”çš„å¼•ç”¨ç±»å‹ï¼šä¸€ç§ç§°ä¸ºæšä¸¾ç±»å‹çš„ç±»ï¼Œä»¥åŠä¸€ç§ç§°ä¸ºæ³¨è§£ç±»å‹çš„æ¥å£ã€‚</p>
<h2 id="item-34ç”¨æšä¸¾ç±»å‹ä»£æ›¿-int-å¸¸é‡use-enums-instead-of-int-constants">Item-34ï¼šç”¨æšä¸¾ç±»å‹ä»£æ›¿ int å¸¸é‡ï¼ˆUse enums instead of int constantsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-34ç”¨æšä¸¾ç±»å‹ä»£æ›¿-int-å¸¸é‡use-enums-instead-of-int-constants">#</a></h2>
<h2 id="item-35ä½¿ç”¨å®ä¾‹å­—æ®µæ›¿ä»£åºæ•°use-instance-fields-instead-of-ordinals">Item-35ï¼šä½¿ç”¨å®ä¾‹å­—æ®µæ›¿ä»£åºæ•°ï¼ˆUse instance fields instead of ordinalsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-35ä½¿ç”¨å®ä¾‹å­—æ®µæ›¿ä»£åºæ•°use-instance-fields-instead-of-ordinals">#</a></h2>
<h2 id="item-36ç”¨-enumset-æ›¿ä»£ä½å­—æ®µuse-enumset-instead-of-bit-fields">Item-36ï¼šç”¨ EnumSet æ›¿ä»£ä½å­—æ®µï¼ˆUse EnumSet instead of bit fieldsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-36ç”¨-enumset-æ›¿ä»£ä½å­—æ®µuse-enumset-instead-of-bit-fields">#</a></h2>
<h2 id="item-37ä½¿ç”¨-enummap-æ›¿æ¢åºæ•°ç´¢å¼•use-enummap-instead-of-ordinal-indexing">Item-37ï¼šä½¿ç”¨ EnumMap æ›¿æ¢åºæ•°ç´¢å¼•ï¼ˆUse EnumMap instead of ordinal indexingï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-37ä½¿ç”¨-enummap-æ›¿æ¢åºæ•°ç´¢å¼•use-enummap-instead-of-ordinal-indexing">#</a></h2>
<h2 id="item-38ä½¿ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•æšä¸¾emulate-extensible-enums-with-interfaces">Item-38ï¼šä½¿ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•æšä¸¾ï¼ˆEmulate extensible enums with interfacesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-38ä½¿ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•æšä¸¾emulate-extensible-enums-with-interfaces">#</a></h2>
<h2 id="item-39æ³¨è§£ä¼˜äºå‘½åæ¨¡å¼prefer-annotations-to-naming-patterns">Item-39ï¼šæ³¨è§£ä¼˜äºå‘½åæ¨¡å¼ï¼ˆPrefer annotations to naming patternsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-39æ³¨è§£ä¼˜äºå‘½åæ¨¡å¼prefer-annotations-to-naming-patterns">#</a></h2>
<h2 id="item-40åšæŒä½¿ç”¨-override-æ³¨è§£consistently-use-the-override-annotation">Item-40ï¼šåšæŒä½¿ç”¨ @Override æ³¨è§£ï¼ˆConsistently use the Override annotationï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-40åšæŒä½¿ç”¨-override-æ³¨è§£consistently-use-the-override-annotation">#</a></h2>
<h2 id="item-41ä½¿ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹use-marker-interfaces-to-define-types">Item-41ï¼šä½¿ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹ï¼ˆUse marker interfaces to define typesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-41ä½¿ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹use-marker-interfaces-to-define-types">#</a></h2>
<h1 id="chapter07-lambda-å’Œ-stream">chapter07 Lambda å’Œ Stream<a hidden class="anchor" aria-hidden="true" href="#chapter07-lambda-å’Œ-stream">#</a></h1>
<p>JAVA8æ–°å¢äº†å‡½æ•°å¼æ¥å£ã€Lambdaè¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨ï¼Œä½¿åˆ›å»ºå‡½æ•°å¯¹è±¡å˜çš„å®¹æ˜“ã€‚è¿˜å¢åŠ äº†streamç›¸å…³APIï¼Œä¸ºå¤„ç† Listã€Mapç­‰å®¹å™¨ï¼Œæä¾›äº†ç±»åº“çº§åˆ«çš„æ”¯æŒã€‚</p>
<h2 id="item-42lambdaä¼˜å…ˆäºåŒ¿åç±»prefer-lambdas-to-anonymous-classes">Item-42ï¼šlambdaä¼˜å…ˆäºåŒ¿åç±»ï¼ˆPrefer lambdas to anonymous classesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-42lambdaä¼˜å…ˆäºåŒ¿åç±»prefer-lambdas-to-anonymous-classes">#</a></h2>
<h2 id="item-43æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäºlambdaprefer-method-references-to-lambdas">Item-43ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäºlambdaï¼ˆPrefer method references to lambdasï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-43æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäºlambdaprefer-method-references-to-lambdas">#</a></h2>
<h2 id="item-44ä¼˜å…ˆä½¿ç”¨æ ‡å‡†å‡½æ•°å¼æ¥å£favor-the-use-of-standard-functional-interfaces">Item-44ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†å‡½æ•°å¼æ¥å£ï¼ˆFavor the use of standard functional interfacesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-44ä¼˜å…ˆä½¿ç”¨æ ‡å‡†å‡½æ•°å¼æ¥å£favor-the-use-of-standard-functional-interfaces">#</a></h2>
<h2 id="item-45è°¨æ…ä½¿ç”¨streamuse-streams-judiciously">Item-45ï¼šè°¨æ…ä½¿ç”¨streamï¼ˆUse streams judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-45è°¨æ…ä½¿ç”¨streamuse-streams-judiciously">#</a></h2>
<h2 id="item-46ä¼˜å…ˆä½¿ç”¨streamä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°prefer-side-effect-free-functions-in-streams">Item-46ï¼šä¼˜å…ˆä½¿ç”¨Streamä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼ˆPrefer side-effect-free functions in streamsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-46ä¼˜å…ˆä½¿ç”¨streamä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°prefer-side-effect-free-functions-in-streams">#</a></h2>
<h2 id="item-47ä¼˜å…ˆé€‰æ‹©-collection-è€Œä¸æ˜¯æµä½œä¸ºè¿”å›ç±»å‹prefer-collection-to-stream-as-a-return-type">Item-47ï¼šä¼˜å…ˆé€‰æ‹© Collection è€Œä¸æ˜¯æµä½œä¸ºè¿”å›ç±»å‹ï¼ˆPrefer Collection to Stream as a return typeï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-47ä¼˜å…ˆé€‰æ‹©-collection-è€Œä¸æ˜¯æµä½œä¸ºè¿”å›ç±»å‹prefer-collection-to-stream-as-a-return-type">#</a></h2>
<h2 id="item-48è°¨æ…ä½¿ç”¨streamå¹¶è¡Œuse-caution-when-making-streams-parallel">Item-48ï¼šè°¨æ…ä½¿ç”¨streamå¹¶è¡Œï¼ˆUse caution when making streams parallelï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-48è°¨æ…ä½¿ç”¨streamå¹¶è¡Œuse-caution-when-making-streams-parallel">#</a></h2>
<h1 id="chapter08-æ–¹æ³•">chapter08 æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#chapter08-æ–¹æ³•">#</a></h1>
<p>æœ¬ç« è®¨è®ºäº†æ–¹æ³•è®¾è®¡çš„å‡ ä¸ªæ–¹é¢ï¼šå¦‚ä½•å¤„ç†å‚æ•°å’Œè¿”å›å€¼ï¼Œå¦‚ä½•è®¾è®¡æ–¹æ³•ç­¾åï¼Œä»¥åŠå¦‚ä½•ç¼–å†™æ–¹æ³•æ–‡æ¡£ã€‚æœ¬ç« çš„å¤§éƒ¨åˆ†å†…å®¹ä¸ä»…é€‚ç”¨äºæ™®é€šæ–¹æ³•ï¼Œä¹Ÿé€‚ç”¨äºæ„é€ å‡½æ•°ã€‚</p>
<h2 id="item-49æ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§check-parameters-for-validity">Item-49ï¼šæ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§ï¼ˆCheck parameters for validityï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-49æ£€æŸ¥å‚æ•°çš„æœ‰æ•ˆæ€§check-parameters-for-validity">#</a></h2>
<h2 id="item-50å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´make-defensive-copies-when-needed">Item-50ï¼šå¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼ˆMake defensive copies when neededï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-50å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´make-defensive-copies-when-needed">#</a></h2>
<h2 id="item-51è°¨æ…è®¾è®¡æ–¹æ³•ç­¾ådesign-method-signatures-carefully">Item-51ï¼šè°¨æ…è®¾è®¡æ–¹æ³•ç­¾åï¼ˆDesign method signatures carefullyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-51è°¨æ…è®¾è®¡æ–¹æ³•ç­¾ådesign-method-signatures-carefully">#</a></h2>
<h2 id="item-52æ…ç”¨é‡è½½use-overloading-judiciously">Item-52ï¼šæ…ç”¨é‡è½½ï¼ˆUse overloading judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-52æ…ç”¨é‡è½½use-overloading-judiciously">#</a></h2>
<h2 id="item-53æ…ç”¨å¯å˜å‚æ•°use-varargs-judiciously">Item-53ï¼šæ…ç”¨å¯å˜å‚æ•°ï¼ˆUse varargs judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-53æ…ç”¨å¯å˜å‚æ•°use-varargs-judiciously">#</a></h2>
<h2 id="item-54è¿”å›ç©ºé›†åˆæˆ–æ•°ç»„è€Œä¸æ˜¯-nullreturn-empty-collections-or-arrays-not-nulls">Item-54ï¼šè¿”å›ç©ºé›†åˆæˆ–æ•°ç»„ï¼Œè€Œä¸æ˜¯ nullï¼ˆReturn empty collections or arrays, not nullsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-54è¿”å›ç©ºé›†åˆæˆ–æ•°ç»„è€Œä¸æ˜¯-nullreturn-empty-collections-or-arrays-not-nulls">#</a></h2>
<h2 id="item-55è°¨æ…è¿”å›optinalreturn-optionals-judiciously">Item-55ï¼šè°¨æ…è¿”å›optinalï¼ˆReturn optionals judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-55è°¨æ…è¿”å›optinalreturn-optionals-judiciously">#</a></h2>
<h2 id="item-56ä¸ºæ‰€æœ‰å…¬å¼€çš„-api-å…ƒç´ ç¼–å†™æ–‡æ¡£æ³¨é‡Šwrite-doc-comments-for-all-exposed-api-elements">Item-56ï¼šä¸ºæ‰€æœ‰å…¬å¼€çš„ API å…ƒç´ ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼ˆWrite doc comments for all exposed API elementsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-56ä¸ºæ‰€æœ‰å…¬å¼€çš„-api-å…ƒç´ ç¼–å†™æ–‡æ¡£æ³¨é‡Šwrite-doc-comments-for-all-exposed-api-elements">#</a></h2>
<h1 id="chapter09-é€šç”¨ç¨‹åºè®¾è®¡general-programming">chapter09 é€šç”¨ç¨‹åºè®¾è®¡ï¼ˆGeneral Programmingï¼‰<a hidden class="anchor" aria-hidden="true" href="#chapter09-é€šç”¨ç¨‹åºè®¾è®¡general-programming">#</a></h1>
<h2 id="item-57å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–minimize-the-scope-of-local-variables">Item-57ï¼šå°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–ï¼ˆMinimize the scope of local variablesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-57å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–minimize-the-scope-of-local-variables">#</a></h2>
<h2 id="item-58for-each-å¾ªç¯ä¼˜äºä¼ ç»Ÿçš„-for-å¾ªç¯prefer-for-each-loops-to-traditional-for-loops">Item-58ï¼šfor-each å¾ªç¯ä¼˜äºä¼ ç»Ÿçš„ for å¾ªç¯ï¼ˆPrefer for-each loops to traditional for loopsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-58for-each-å¾ªç¯ä¼˜äºä¼ ç»Ÿçš„-for-å¾ªç¯prefer-for-each-loops-to-traditional-for-loops">#</a></h2>
<h2 id="item-59äº†è§£å’Œä½¿ç”¨ç±»åº“know-and-use-the-libraries">Item-59ï¼šäº†è§£å’Œä½¿ç”¨ç±»åº“ï¼ˆKnow and use the librariesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-59äº†è§£å’Œä½¿ç”¨ç±»åº“know-and-use-the-libraries">#</a></h2>
<h2 id="item-60è‹¥éœ€è¦ç²¾ç¡®ç­”æ¡ˆå°±åº”é¿å…ä½¿ç”¨-float-å’Œ-double-ç±»å‹avoid-float-and-double-if-exact-answers-are-required">Item-60ï¼šè‹¥éœ€è¦ç²¾ç¡®ç­”æ¡ˆå°±åº”é¿å…ä½¿ç”¨ float å’Œ double ç±»å‹ï¼ˆAvoid float and double if exact answers are requiredï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-60è‹¥éœ€è¦ç²¾ç¡®ç­”æ¡ˆå°±åº”é¿å…ä½¿ç”¨-float-å’Œ-double-ç±»å‹avoid-float-and-double-if-exact-answers-are-required">#</a></h2>
<h2 id="item-61åŸºæœ¬æ•°æ®ç±»å‹ä¼˜äºåŒ…è£…ç±»prefer-primitive-types-to-boxed-primitives">Item-61ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä¼˜äºåŒ…è£…ç±»ï¼ˆPrefer primitive types to boxed primitivesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-61åŸºæœ¬æ•°æ®ç±»å‹ä¼˜äºåŒ…è£…ç±»prefer-primitive-types-to-boxed-primitives">#</a></h2>
<h2 id="item-62å…¶ä»–ç±»å‹æ›´åˆé€‚æ—¶åº”é¿å…ä½¿ç”¨å­—ç¬¦ä¸²avoid-strings-where-other-types-are-more-appropriate">Item-62ï¼šå…¶ä»–ç±»å‹æ›´åˆé€‚æ—¶åº”é¿å…ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆAvoid strings where other types are more appropriateï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-62å…¶ä»–ç±»å‹æ›´åˆé€‚æ—¶åº”é¿å…ä½¿ç”¨å­—ç¬¦ä¸²avoid-strings-where-other-types-are-more-appropriate">#</a></h2>
<h2 id="item-63å½“å¿ƒå­—ç¬¦ä¸²è¿æ¥å¼•èµ·çš„æ€§èƒ½é—®é¢˜beware-the-performance-of-string-concatenation">Item-63ï¼šå½“å¿ƒå­—ç¬¦ä¸²è¿æ¥å¼•èµ·çš„æ€§èƒ½é—®é¢˜ï¼ˆBeware the performance of string concatenationï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-63å½“å¿ƒå­—ç¬¦ä¸²è¿æ¥å¼•èµ·çš„æ€§èƒ½é—®é¢˜beware-the-performance-of-string-concatenation">#</a></h2>
<h2 id="item-64é€šè¿‡æ¥å£å¼•ç”¨å¯¹è±¡refer-to-objects-by-their-interfaces">Item-64ï¼šé€šè¿‡æ¥å£å¼•ç”¨å¯¹è±¡ï¼ˆRefer to objects by their interfacesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-64é€šè¿‡æ¥å£å¼•ç”¨å¯¹è±¡refer-to-objects-by-their-interfaces">#</a></h2>
<h2 id="item-65æ¥å£ä¼˜äºåå°„prefer-interfaces-to-reflection">Item-65ï¼šæ¥å£ä¼˜äºåå°„ï¼ˆPrefer interfaces to reflectionï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-65æ¥å£ä¼˜äºåå°„prefer-interfaces-to-reflection">#</a></h2>
<h2 id="item-66è°¨æ…çš„ä½¿ç”¨æœ¬åœ°æ–¹æ³•use-native-methods-judiciously">Item-66ï¼šè°¨æ…çš„ä½¿ç”¨æœ¬åœ°æ–¹æ³•ï¼ˆUse native methods judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-66è°¨æ…çš„ä½¿ç”¨æœ¬åœ°æ–¹æ³•use-native-methods-judiciously">#</a></h2>
<h2 id="item-67è°¨æ…çš„è¿›è¡Œä¼˜åŒ–optimize-judiciously">Item-67ï¼šè°¨æ…çš„è¿›è¡Œä¼˜åŒ–ï¼ˆOptimize judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-67è°¨æ…çš„è¿›è¡Œä¼˜åŒ–optimize-judiciously">#</a></h2>
<h2 id="item-68éµå®ˆè¢«å¹¿æ³›è®¤å¯çš„å‘½åçº¦å®šadhere-to-generally-accepted-naming-conventions">Item-68ï¼šéµå®ˆè¢«å¹¿æ³›è®¤å¯çš„å‘½åçº¦å®šï¼ˆAdhere to generally accepted naming conventionsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-68éµå®ˆè¢«å¹¿æ³›è®¤å¯çš„å‘½åçº¦å®šadhere-to-generally-accepted-naming-conventions">#</a></h2>
<h1 id="chapter-10-å¼‚å¸¸">chapter-10 å¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#chapter-10-å¼‚å¸¸">#</a></h1>
<p>å……åˆ†å‘æŒ¥å¼‚å¸¸çš„ä¼˜ç‚¹ï¼Œå¯ä»¥æé«˜ç¨‹åºçš„å¯è¯»æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚è‹¥ä½¿ç”¨ä¸å½“ï¼Œå¼‚å¸¸ä¹Ÿä¼šå¸¦æ¥è´Ÿé¢å½±å“ã€‚</p>
<h2 id="item-69åªåœ¨ç¡®è®¤æœ‰å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å¼‚å¸¸use-exceptions-only-for-exceptional-conditions">Item-69ï¼šåªåœ¨ç¡®è®¤æœ‰å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å¼‚å¸¸ï¼ˆUse exceptions only for exceptional conditionsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-69åªåœ¨ç¡®è®¤æœ‰å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å¼‚å¸¸use-exceptions-only-for-exceptional-conditions">#</a></h2>
<h2 id="item-70å¯¹å¯æ¢å¤æƒ…å†µä½¿ç”¨-checked-å¼‚å¸¸å¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸use-checked-exceptions-for-recoverable-conditions-and-runtime-exceptions-for-programming-errors">Item-70ï¼šå¯¹å¯æ¢å¤æƒ…å†µä½¿ç”¨ checked å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUse checked exceptions for recoverable conditions and runtime exceptions for programming errorsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-70å¯¹å¯æ¢å¤æƒ…å†µä½¿ç”¨-checked-å¼‚å¸¸å¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸use-checked-exceptions-for-recoverable-conditions-and-runtime-exceptions-for-programming-errors">#</a></h2>
<h2 id="item-71é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨-checked-å¼‚å¸¸avoid-unnecessary-use-of-checked-exceptions">Item-71ï¼šé¿å…ä¸å¿…è¦åœ°ä½¿ç”¨ checked å¼‚å¸¸ï¼ˆAvoid unnecessary use of checked exceptionsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-71é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨-checked-å¼‚å¸¸avoid-unnecessary-use-of-checked-exceptions">#</a></h2>
<h2 id="item-72ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸favor-the-use-of-standard-exceptions">Item-72ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸ï¼ˆFavor the use of standard exceptionsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-72ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸favor-the-use-of-standard-exceptions">#</a></h2>
<h2 id="item-73æŠ›å‡ºèƒ½ç”¨æŠ½è±¡è§£é‡Šçš„å¼‚å¸¸throw-exceptions-appropriate-to-the-abstraction">Item-73ï¼šæŠ›å‡ºèƒ½ç”¨æŠ½è±¡è§£é‡Šçš„å¼‚å¸¸ï¼ˆThrow exceptions appropriate to the abstractionï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-73æŠ›å‡ºèƒ½ç”¨æŠ½è±¡è§£é‡Šçš„å¼‚å¸¸throw-exceptions-appropriate-to-the-abstraction">#</a></h2>
<h2 id="item-74æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦å»ºç«‹æ–‡æ¡£document-all-exceptions-thrown-by-each-method">Item-74ï¼šæ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦å»ºç«‹æ–‡æ¡£ï¼ˆDocument all exceptions thrown by each methodï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-74æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦å»ºç«‹æ–‡æ¡£document-all-exceptions-thrown-by-each-method">#</a></h2>
<h2 id="item-75å¼‚å¸¸è¯¦ç»†æ¶ˆæ¯ä¸­åº”åŒ…å«æ•è·å¤±è´¥çš„ä¿¡æ¯include-failure-capture-information-in-detail-messages">Item-75ï¼šå¼‚å¸¸è¯¦ç»†æ¶ˆæ¯ä¸­åº”åŒ…å«æ•è·å¤±è´¥çš„ä¿¡æ¯ï¼ˆInclude failure capture information in detail messagesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-75å¼‚å¸¸è¯¦ç»†æ¶ˆæ¯ä¸­åº”åŒ…å«æ•è·å¤±è´¥çš„ä¿¡æ¯include-failure-capture-information-in-detail-messages">#</a></h2>
<h2 id="item-76è®©å¤±è´¥ä¿æŒåŸå­æ€§strive-for-failure-atomicity">Item-76ï¼šè®©å¤±è´¥ä¿æŒåŸå­æ€§ï¼ˆStrive for failure atomicityï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-76è®©å¤±è´¥ä¿æŒåŸå­æ€§strive-for-failure-atomicity">#</a></h2>
<h2 id="item-77ä¸è¦å¿½ç•¥å¼‚å¸¸dont-ignore-exceptions">Item-77ï¼šä¸è¦å¿½ç•¥å¼‚å¸¸ï¼ˆDonâ€™t ignore exceptionsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-77ä¸è¦å¿½ç•¥å¼‚å¸¸dont-ignore-exceptions">#</a></h2>
<h1 id="chapter-11-å¹¶å‘concurrency">chapter-11 å¹¶å‘ï¼ˆConcurrencyï¼‰<a hidden class="anchor" aria-hidden="true" href="#chapter-11-å¹¶å‘concurrency">#</a></h1>
<p>å¤šçº¿ç¨‹å…è®¸ç³»ç»ŸåŒæ—¶è¿›è¡Œå¤šä¸ªæ´»åŠ¨ã€‚å¤šçº¿ç¨‹ç¨‹åºè®¾è®¡æ¯”å•çº¿ç¨‹ç¨‹åºè®¾è®¡è¦éš¾çš„å¤šï¼Œä½†æ˜¯ä½ æ— æ³•é¿å…å¹¶å‘ï¼Œå› ä¸ºæˆ‘ä»¬æ‰€åšçš„å¤§éƒ¨åˆ†äº‹æƒ…éƒ½éœ€è¦å¹¶å‘ã€‚</p>
<h2 id="item-78åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®synchronize-access-to-shared-mutable-data">Item-78ï¼šåŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®ï¼ˆSynchronize access to shared mutable dataï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-78åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®synchronize-access-to-shared-mutable-data">#</a></h2>
<h2 id="item-79é¿å…è¿‡åº¦åŒæ­¥avoid-excessive-synchronization">Item-79ï¼šé¿å…è¿‡åº¦åŒæ­¥ï¼ˆAvoid excessive synchronizationï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-79é¿å…è¿‡åº¦åŒæ­¥avoid-excessive-synchronization">#</a></h2>
<h2 id="item-80executortaskstreamsä¼˜äºç›´æ¥ä½¿ç”¨çº¿ç¨‹prefer-executors-tasks-and-streams-to-threads">Item-80ï¼šExecutorã€taskã€streamsä¼˜äºç›´æ¥ä½¿ç”¨çº¿ç¨‹ï¼ˆPrefer executors, tasks, and streams to threadsï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-80executortaskstreamsä¼˜äºç›´æ¥ä½¿ç”¨çº¿ç¨‹prefer-executors-tasks-and-streams-to-threads">#</a></h2>
<h2 id="item-81å¹¶å‘å®ç”¨å·¥å…·ä¼˜äº-wait-å’Œ-notifyprefer-concurrency-utilities-to-wait-and-notify">Item-81ï¼šå¹¶å‘å®ç”¨å·¥å…·ä¼˜äº wait å’Œ notifyï¼ˆPrefer concurrency utilities to wait and notifyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-81å¹¶å‘å®ç”¨å·¥å…·ä¼˜äº-wait-å’Œ-notifyprefer-concurrency-utilities-to-wait-and-notify">#</a></h2>
<h2 id="item-82æ–‡æ¡£åº”åŒ…å«çº¿ç¨‹å®‰å…¨å†…å®¹document-thread-safety">Item-82ï¼šæ–‡æ¡£åº”åŒ…å«çº¿ç¨‹å®‰å…¨å†…å®¹ï¼ˆDocument thread safetyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-82æ–‡æ¡£åº”åŒ…å«çº¿ç¨‹å®‰å…¨å†…å®¹document-thread-safety">#</a></h2>
<h2 id="item-83è°¨æ…åœ°ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–use-lazy-initialization-judiciously">Item-83ï¼šè°¨æ…åœ°ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆUse lazy initialization judiciouslyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-83è°¨æ…åœ°ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–use-lazy-initialization-judiciously">#</a></h2>
<h2 id="item-84ä¸è¦ä¾èµ–çº¿ç¨‹è°ƒåº¦å™¨dont-depend-on-the-thread-scheduler">Item-84ï¼šä¸è¦ä¾èµ–çº¿ç¨‹è°ƒåº¦å™¨ï¼ˆDonâ€™t depend on the thread schedulerï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-84ä¸è¦ä¾èµ–çº¿ç¨‹è°ƒåº¦å™¨dont-depend-on-the-thread-scheduler">#</a></h2>
<h1 id="åºåˆ—åŒ–serialization">åºåˆ—åŒ–ï¼ˆSerializationï¼‰<a hidden class="anchor" aria-hidden="true" href="#åºåˆ—åŒ–serialization">#</a></h1>
<p>å†…å­˜ä¸­çš„æ•°æ®å¯¹è±¡åªæœ‰è½¬æ¢ä¸ºäºŒè¿›åˆ¶æµæ‰å¯ä»¥è¿›è¡Œæ•°æ®æŒä¹…åŒ–å’Œç½‘ç»œä¼ è¾“ã€‚å°†æ•°æ®å¯¹è±¡è½¬æ¢ä¸ºäºŒè¿›åˆ¶æµçš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„åºåˆ—åŒ–ï¼ˆ Serialization ï¼‰ã€‚
åä¹‹ï¼Œå°†äºŒè¿›åˆ¶æµæ¢å¤ä¸ºæ•°æ®å¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºååºåˆ—åŒ–ï¼ˆ Deserialization ï¼‰ã€‚åºåˆ—åŒ–éœ€è¦ä¿ç•™å……åˆ†çš„ä¿¡æ¯ä»¥æ¢å¤æ•°æ®å¯¹è±¡ï¼Œä½†æ˜¯ä¸ºäº†èŠ‚çº¦å­˜å‚¨ç©ºé—´å’Œç½‘ç»œå¸¦å®½ï¼Œåºåˆ—åŒ–åçš„äºŒè¿›åˆ¶æµåˆè¦å°½å¯èƒ½å°ã€‚</p>
<h2 id="item-85java-åºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ¡ˆprefer-alternatives-to-java-serialization">Item-85ï¼šJava åºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆPrefer alternatives to Java serializationï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-85java-åºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ¡ˆprefer-alternatives-to-java-serialization">#</a></h2>
<h2 id="item-86è°¨æ…åœ°å®ç°-serializableæ¥å£implement-serializable-with-great-caution">Item-86ï¼šè°¨æ…åœ°å®ç° Serializableæ¥å£ï¼ˆImplement Serializable with great cautionï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-86è°¨æ…åœ°å®ç°-serializableæ¥å£implement-serializable-with-great-caution">#</a></h2>
<h2 id="item-87è€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å½¢å¼consider-using-a-custom-serialized-form">Item-87ï¼šè€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å½¢å¼ï¼ˆConsider using a custom serialized formï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-87è€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å½¢å¼consider-using-a-custom-serialized-form">#</a></h2>
<h2 id="item-88é˜²å¾¡æ€§åœ°ç¼–å†™-readobject-æ–¹æ³•write-readobject-methods-defensively">Item-88ï¼šé˜²å¾¡æ€§åœ°ç¼–å†™ readObject æ–¹æ³•ï¼ˆWrite readObject methods defensivelyï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-88é˜²å¾¡æ€§åœ°ç¼–å†™-readobject-æ–¹æ³•write-readobject-methods-defensively">#</a></h2>
<h2 id="item-89å¯¹äºå®ä¾‹æ§åˆ¶æšä¸¾ç±»å‹ä¼˜äº-readresolvefor-instance-control-prefer-enum-types-to-readresolve">Item-89ï¼šå¯¹äºå®ä¾‹æ§åˆ¶ï¼Œæšä¸¾ç±»å‹ä¼˜äº readResolveï¼ˆFor instance control, prefer enum types to readResolveï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-89å¯¹äºå®ä¾‹æ§åˆ¶æšä¸¾ç±»å‹ä¼˜äº-readresolvefor-instance-control-prefer-enum-types-to-readresolve">#</a></h2>
<h2 id="item-90è€ƒè™‘ä»¥åºåˆ—åŒ–ä»£ç†ä»£æ›¿åºåˆ—åŒ–å®ä¾‹consider-serialization-proxies-instead-of-serialized-instances">Item-90ï¼šè€ƒè™‘ä»¥åºåˆ—åŒ–ä»£ç†ä»£æ›¿åºåˆ—åŒ–å®ä¾‹ï¼ˆConsider serialization proxies instead of serialized instancesï¼‰<a hidden class="anchor" aria-hidden="true" href="#item-90è€ƒè™‘ä»¥åºåˆ—åŒ–ä»£ç†ä»£æ›¿åºåˆ—åŒ–å®ä¾‹consider-serialization-proxies-instead-of-serialized-instances">#</a></h2>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/java/">java</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>