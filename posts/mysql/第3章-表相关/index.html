<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>第3章 表相关 | Wjy&#39;s Blog</title>
<meta name="keywords" content="mysql">
<meta name="description" content="创建表 语法格式： 1 2 3 4 5 6 create table 表名( 字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ...... ); 例如：创建学生表 1 2 3 4 5 create table t_student( no int, name varchar, gender char(1)">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://009965.xyz/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://009965.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://009965.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://009965.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://009965.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://009965.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://009965.xyz/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://009965.xyz/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/">
  <meta property="og:site_name" content="Wjy&#39;s Blog">
  <meta property="og:title" content="第3章 表相关">
  <meta property="og:description" content="创建表 语法格式： 1 2 3 4 5 6 create table 表名( 字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ...... ); 例如：创建学生表 1 2 3 4 5 create table t_student( no int, name varchar, gender char(1)">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-25T18:13:00+00:00">
    <meta property="article:modified_time" content="2025-05-25T18:13:00+00:00">
    <meta property="article:tag" content="Mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第3章 表相关">
<meta name="twitter:description" content="创建表 语法格式： 1 2 3 4 5 6 create table 表名( 字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ...... ); 例如：创建学生表 1 2 3 4 5 create table t_student( no int, name varchar, gender char(1)">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://009965.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "第3章 表相关",
      "item": "https://009965.xyz/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "第3章 表相关",
  "name": "第3章 表相关",
  "description": "创建表 语法格式： 1 2 3 4 5 6 create table 表名( 字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ...... ); 例如：创建学生表 1 2 3 4 5 create table t_student( no int, name varchar, gender char(1)",
  "keywords": [
    "mysql"
  ],
  "articleBody": "创建表 语法格式：\n1 2 3 4 5 6 create table 表名( 字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ...... ); 例如：创建学生表\n1 2 3 4 5 create table t_student( no int, name varchar, gender char(1) default '男' ); 插入数据 语法格式：\n1 insert into 表名(字段名1, 字段名2, 字段名3,......) values (值1,值2,值3,......); 字段名和值要一一对应。类型要一一对应，数量要一一对应。\n字段名也可以省略，如果字段名省略就表示把所有字段名都写上去了，并且顺序和建表时的顺序相同。\n删除表 语法格式：\n1 drop table 表名; 或者\n1 drop table if exists 表名; 判断是否存在这个表，如果存在则删除。避免不存在时的报错。\nMySQL数据类型 数据类型（data_type）是指系统中所允许的数据的类型。数据库中的每个列都应该有适当的数据类型，用于限制或允许该列中存储的数据。例如，列中存储的为数字，则相应的数据类型应该为数值类型。\n如果使用错误的数据类型可能会严重影响应用程序的功能和性能，所以在设计表时，应该特别重视数据列所用的数据类型。更改包含数据的列不是一件小事，这样做可能会导致数据丢失。因此，在创建表时必须为每个列设置正确的数据类型和长度。\nMySQL 的数据类型可以分为整数类型、浮点数类型、定点数类型、日期和时间类型、字符串类型、二进制类型等。\n整数类型 tinyint：1个字节（微小整数）\nsmallint：2个字节（小整数）\nmediumint：3个字节（中等大小的整数）\nint（integer）：4个字节（普通大小整数）\nbigint：8个字节（大整数）\n浮点数类型 float：4个字节，单精度（最多5位小数）\ndouble：8个字节，双精度（最多16位小数）\n定点数类型 decimal：定点数类型。底层实际上采用字符串的形式存储数字。\n语法：decimal(m, d)\n例如：decimal(3, 2) 表示3个有效数字，2个小数。（有效数字最多65个，小数位最多30个）\n日期和时间类型 year：1个字节，只存储年，格式YYYY\ntime：3个字节，只存储时间，格式HH:MM:SS / HHMMSS\ndate：3个字节，只存储年月日，格式：YYYY-MM-DD\ndatetime：8个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1000年~公元9999年）\ntimestamp：4个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1980年~公元2040年）或者格式为 YYYYMMDDHHMMSS（采用这种格式不需要使用单引号，当然你使用单引号也可以）\n字符串类型 char **char(m)：**m长度是0~255个字符。\n固定长度字符串，在定义时指定字符串列长。当保存时，在右侧填充空格以达到指定的长度。m表示列的长度，范围是 0～255 个字符。\n例如，CHAR(4) 定义了一个固定长度的字符串列，包含的字符个数最大为 4。当插入的字符长度大于4，则报错（除非超过4个长度之后都是空格字符，则空格字符会自动被删除用来保证插入的成功）。\nvarchar **varchar(m)：**m长度是0~16383个字符\n长度可变的字符串。varchar 的最大实际长度由最长的行的大小和使用的字符集确定，而实际占用的空间为字符串的实际长度加 1。\n例如，varchar(50) 定义了一个最大长度为 50 的字符串，如果插入的字符串只有 10 个字符，则实际存储的字符串为 10 个字符和一个字符串结束字符。varchar在值保存和检索时尾部的空格仍保留。\ntext text类型：\ntinytext 表示长度为 255字符的 TEXT 列。 text 表示长度为 65535字符的 TEXT 列。 mediumtext 表示长度为 16777215字符的 TEXT 列。 longtext 表示长度为 4294967295 或 4GB 字符的 TEXT 列。 enum enum类型：\n语法：\u003c字段名\u003e enum(‘值1’,‘值2’,…) 该字段插入值时，只能是指定的枚举值。 set set类型：\n语法：\u003c字段名\u003e set(‘值1’,‘值2’,‘值3’,…) 注意：值不可重复。 该字段插入值时，只能是指定的值。 二进制类型 BLOB类型：二进制大对象，可以存储图片、声音、视频等文件。\nblob：小的，最大长度65535个字节 mediumblob：中等的，最大长度16777215个字节 longblob：大的，最大长度4GB的字节 增删改表结构DDL 创建一个学生表 1 2 3 4 5 create table t_student( no bigint, name varchar(255), age int comment '年龄' ); 查看建表语句 1 show create table 表名; 修改表名 1 alter table 表名 rename 新表名; 新增字段 1 alter table 表名 add 字段名 数据类型; 修改字段名 1 alter table 表名 change 旧字段名 新字段名 数据类型; 修改字段数据类型 1 alter table 表名 modify column 字段名 数据类型; 删除字段 1 alter table 表名 drop 字段名; DML语句 当我们对表中的数据进行增删改的时候，称它为DML语句。（数据操纵语言），主要包括：insert、delete、update\ninsert 增 语法格式：\n1 insert into 表名(字段名1,字段名2,字段名3,...) values(值1,值2,值3,...); 表名后面的小括号当中的字段名如果省略掉，表示自动将所有字段都列出来了，并且字段的顺序和建表时的顺序一致。\n一般为了可读性强，建议把字段名写上。\n1 insert into 表名 values(值1,值2,值3,...); 一次可以插入多条记录：\n1 insert into t_stu(no,name,age) values(1,'jack',20),(2,'lucy',30); delete 删 语法格式：\n1 2 3 4 5 # 将所有记录全部删除 delete from 表名; # 删除符合条件的记录 delete from 表名 where 条件; 以上的删除属于DML的方式删除，这种删除的数据是可以通过事务回滚的方式重新恢复的，但是删除的效率较低。（这种删除是支持事务的。）\n另外还有一种删除表中数据的方式，但是这种方式不支持事务，不可以回滚，删了之后数据是永远也找不回来了。这种删除叫做：表被截断。\n注意：这个语句删除效率非常高，巨大的表，瞬间干掉所有数据。但不可恢复。\n1 truncate table 表名; update 改 语法格式：\n1 update 表名 set 字段名1=值1, 字段名2=值2, 字段名3=值3 where 条件; 如果没有更新条件的话，所有记录全部更新。\n约束constraint 创建表时，可以给表的字段添加约束，可以保证数据的完整性、有效性。比如大家上网注册用户时常见的：用户名不能为空。对不起，用户名已存在。等提示信息。\n约束通常包括：\n非空约束：not null 检查约束：check 唯一性约束：unique 主键约束：primary key 外键约束：foreign key 非空约束 语法格式：\n1 2 3 4 5 create table t_stu( no int, name varchar(255) not null, age int ); name字段不能为空。插入数据时如果没有给name指定值，则报错。\n检查约束 1 2 3 4 5 6 create table t_stu( no int, name varchar(255), age int, check(age \u003e 18) ); 唯一性约束 语法格式：\n1 2 3 4 5 create table t_stu( no int, name varchar(255), email varchar(255) unique ); email字段设置为唯一性，唯一性的字段值是可以为NULL的。但不能重复。以上在字段后面添加的约束，叫做列级约束。\n当然，添加约束还有另一种方式：表级约束：\n1 2 3 4 5 6 create table t_stu( no int, name varchar(255), email varchar(255), unique(email) ); 使用表级约束可以为多个字段添加联合唯一。\n1 2 3 4 5 6 create table t_stu( no int, name varchar(255), email varchar(255), unique(name,email) ); 创建约束时也可以给约束起名字，将来可以通过约束的名字来删除约束：\n1 2 3 4 5 6 create table t_stu( no int, name varchar(255), email varchar(255), constraint t_stu_name_email_unique unique(name,email) ); 所有的约束都存储在一个系统表当中：table_constraints。这个系统表在这个数据库当中：information_schema\n主键约束 主键：primary key，简称PK 主键约束的字段不能为NULL，并且不能重复。 任何一张表都应该有主键，没有主键的表可以视为无效表。 主键值是这行记录的身份证号，是唯一标识。在数据库表中即使两条数据一模一样，但由于主键值不同，我们也会认为是两条完全的不同的数据。 主键分类： 根据字段数量分类： 单一主键（1个字段作为主键）==\u003e建议的 复合主键（2个或2个以上的字段作为主键） 根据业务分类： 自然主键（主键和任何业务都无关，只是一个单纯的自然数据）===\u003e建议的 业务主键（主键和业务挂钩，例如：银行卡账号作为主键） 单一主键（建议使用这种方式） 1 2 3 4 5 create table t_student( id bigint primary key, sno varchar(255) unique, sname varchar(255) not null ) 复合主键（很少用，了解） 1 2 3 4 5 6 create table t_user( no int, name varchar(255), age int, primary key(no,name) ); 主键自增：既然主键值是一个自然的数字，mysql为主键值提供了一种自增机制，不需要我们程序员维护，mysql自动维护该字段 1 2 3 4 create table t_vip( no int primary key auto_increment, name varchar(255) ); 外键约束 有这样一个需求：要求设计表，能够存储学生以及学校信息。 第一种方案：一张表 这种方式会导致数据冗余，浪费空间。\n第二种方案：两张表：一张存储学生，一张存储学校 t_school 表\nt_student 表\n如果采用以上两张表存储数据，对于学生表来说，sno这个字段的值是不能随便填的，这个sno是学校编号，必须要求这个字段中的值来自学校表的sno。\n为了达到要求，此时就必须要给t_student表的sno字段添加外键约束了。\n外键约束：foreign key，简称FK。 添加了外键约束的字段中的数据必须来自其他字段，不能随便填。 假设给a字段添加了外键约束，要求a字段中的数据必须来自b字段，b字段不一定是主键，但至少要有唯一性。 外键约束可以给单个字段添加，叫做单一外键。也可以给多个字段联合添加，叫做复合外键。复合外键很少用。 a表如果引用b表中的数据，可以把b表叫做父表，把a表叫做子表。 创建表时，先创建父表，再创建子表。 插入数据时，先插入父表，在插入子表。 删除数据时，先删除子表，再删除父表。 删除表时，先删除子表，再删除父表。 如何添加外键： 1 2 3 4 5 6 7 8 9 10 11 create table t_school( sno int primary key, sname varchar(255) ); create table t_student( no int primary key, name varchar(255), age int, sno int, constraint t_school_sno_fk foreign key(sno) references t_school(sno) ); 级联删除 创建子表时，外键可以添加：on delete cascade，这样在删除父表数据时，子表会级联删除。谨慎使用。\n1 2 3 4 5 6 7 create table t_student( no int primary key, name varchar(255), age int, sno int, constraint t_school_sno_fk foreign key(sno) references t_school(sno) on delete cascade ); 1 2 3 4 ###删除约束 alert table t_student drop foreign key t_student_sno_fk; ###添加约束 alert table t_student add constraint t_student_sno_fk foreign key(sno) references t_school(sno) on delete cascade; 级联更新 1 2 3 4 5 6 7 create table t_student( no int primary key, name varchar(255), age int, sno int, constraint t_school_sno_fk foreign key(sno) references t_school(sno) on update cascade ); 级联置空 1 2 3 4 5 6 7 create table t_student( no int primary key, name varchar(255), age int, sno int, constraint t_school_sno_fk foreign key(sno) references t_school(sno) on delete set null ); ",
  "wordCount" : "4025",
  "inLanguage": "en",
  "datePublished": "2025-05-25T18:13:00Z",
  "dateModified": "2025-05-25T18:13:00Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://009965.xyz/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://009965.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      第3章 表相关
    </h1>
    <div class="post-meta"><span title='2025-05-25 18:13:00 +0000 UTC'>2025-05-25</span>&nbsp;·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e8%a1%a8" aria-label="创建表">创建表</a></li>
                <li>
                    <a href="#%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae" aria-label="插入数据">插入数据</a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e8%a1%a8" aria-label="删除表">删除表</a></li>
                <li>
                    <a href="#mysql%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" aria-label="MySQL数据类型">MySQL数据类型</a><ul>
                        
                <li>
                    <a href="#%e6%95%b4%e6%95%b0%e7%b1%bb%e5%9e%8b" aria-label="整数类型">整数类型</a></li>
                <li>
                    <a href="#%e6%b5%ae%e7%82%b9%e6%95%b0%e7%b1%bb%e5%9e%8b" aria-label="浮点数类型">浮点数类型</a></li>
                <li>
                    <a href="#%e5%ae%9a%e7%82%b9%e6%95%b0%e7%b1%bb%e5%9e%8b" aria-label="定点数类型">定点数类型</a></li>
                <li>
                    <a href="#%e6%97%a5%e6%9c%9f%e5%92%8c%e6%97%b6%e9%97%b4%e7%b1%bb%e5%9e%8b" aria-label="日期和时间类型">日期和时间类型</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b" aria-label="字符串类型">字符串类型</a><ul>
                        
                <li>
                    <a href="#char" aria-label="char">char</a></li>
                <li>
                    <a href="#varchar" aria-label="varchar">varchar</a></li>
                <li>
                    <a href="#text" aria-label="text">text</a></li>
                <li>
                    <a href="#enum" aria-label="enum">enum</a></li>
                <li>
                    <a href="#set" aria-label="set">set</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e7%b1%bb%e5%9e%8b" aria-label="二进制类型">二进制类型</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a2%9e%e5%88%a0%e6%94%b9%e8%a1%a8%e7%bb%93%e6%9e%84ddl" aria-label="增删改表结构DDL">增删改表结构DDL</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%ad%a6%e7%94%9f%e8%a1%a8" aria-label="创建一个学生表">创建一个学生表</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e5%bb%ba%e8%a1%a8%e8%af%ad%e5%8f%a5" aria-label="查看建表语句">查看建表语句</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e8%a1%a8%e5%90%8d" aria-label="修改表名">修改表名</a></li>
                <li>
                    <a href="#%e6%96%b0%e5%a2%9e%e5%ad%97%e6%ae%b5" aria-label="新增字段">新增字段</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e5%ad%97%e6%ae%b5%e5%90%8d" aria-label="修改字段名">修改字段名</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e5%ad%97%e6%ae%b5%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" aria-label="修改字段数据类型">修改字段数据类型</a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e5%ad%97%e6%ae%b5" aria-label="删除字段">删除字段</a></li></ul>
                </li>
                <li>
                    <a href="#dml%e8%af%ad%e5%8f%a5" aria-label="DML语句">DML语句</a><ul>
                        
                <li>
                    <a href="#insert-%e5%a2%9e" aria-label="insert 增">insert 增</a></li>
                <li>
                    <a href="#delete-%e5%88%a0" aria-label="delete 删">delete 删</a></li>
                <li>
                    <a href="#update-%e6%94%b9" aria-label="update 改">update 改</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%ba%a6%e6%9d%9fconstraint" aria-label="约束constraint">约束constraint</a><ul>
                        
                <li>
                    <a href="#%e9%9d%9e%e7%a9%ba%e7%ba%a6%e6%9d%9f" aria-label="非空约束">非空约束</a></li>
                <li>
                    <a href="#%e6%a3%80%e6%9f%a5%e7%ba%a6%e6%9d%9f" aria-label="检查约束">检查约束</a></li>
                <li>
                    <a href="#%e5%94%af%e4%b8%80%e6%80%a7%e7%ba%a6%e6%9d%9f" aria-label="唯一性约束">唯一性约束</a></li>
                <li>
                    <a href="#%e4%b8%bb%e9%94%ae%e7%ba%a6%e6%9d%9f" aria-label="主键约束">主键约束</a></li>
                <li>
                    <a href="#%e5%a4%96%e9%94%ae%e7%ba%a6%e6%9d%9f" aria-label="外键约束">外键约束</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="创建表">创建表<a hidden class="anchor" aria-hidden="true" href="#创建表">#</a></h1>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">1</span> <span style="color:#f00">数据类型</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">2</span> <span style="color:#f00">数据类型</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">3</span> <span style="color:#f00">数据类型</span>,
</span></span><span style="display:flex;"><span>  ......
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>例如：创建学生表</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>,
</span></span><span style="display:flex;"><span>  gender <span style="color:#fff;font-weight:bold">char</span>(<span style="color:#ff0;font-weight:bold">1</span>) <span style="color:#fff;font-weight:bold">default</span> <span style="color:#0ff;font-weight:bold">&#39;男&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="插入数据">插入数据<a hidden class="anchor" aria-hidden="true" href="#插入数据">#</a></h1>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> <span style="color:#f00">表名</span>(<span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">3</span>,......) <span style="color:#fff;font-weight:bold">values</span> (<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">3</span>,......);
</span></span></code></pre></td></tr></table>
</div>
</div><p>字段名和值要一一对应。类型要一一对应，数量要一一对应。<br>
字段名也可以省略，如果字段名省略就表示把所有字段名都写上去了，并且顺序和建表时的顺序相同。</p>
<h1 id="删除表">删除表<a hidden class="anchor" aria-hidden="true" href="#删除表">#</a></h1>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">drop</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>或者</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">drop</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#fff;font-weight:bold">if</span> <span style="color:#fff;font-weight:bold">exists</span> <span style="color:#f00">表名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>判断是否存在这个表，如果存在则删除。避免不存在时的报错。</p>
<h1 id="mysql数据类型">MySQL数据类型<a hidden class="anchor" aria-hidden="true" href="#mysql数据类型">#</a></h1>
<p>数据类型（data_type）是指系统中所允许的数据的类型。数据库中的每个列都应该有适当的数据类型，用于限制或允许该列中存储的数据。例如，列中存储的为数字，则相应的数据类型应该为数值类型。<br>
如果使用错误的数据类型可能会严重影响应用程序的功能和性能，所以在设计表时，应该特别重视数据列所用的数据类型。更改包含数据的列不是一件小事，这样做可能会导致数据丢失。因此，在创建表时必须为每个列设置正确的数据类型和长度。<br>
MySQL 的数据类型可以分为整数类型、浮点数类型、定点数类型、日期和时间类型、字符串类型、二进制类型等。</p>
<h2 id="整数类型">整数类型<a hidden class="anchor" aria-hidden="true" href="#整数类型">#</a></h2>
<p>tinyint：1个字节（微小整数）<br>
smallint：2个字节（小整数）<br>
mediumint：3个字节（中等大小的整数）<br>
<strong>int（integer）：4个字节（普通大小整数）</strong><br>
<strong>bigint：8个字节（大整数）</strong></p>
<h2 id="浮点数类型">浮点数类型<a hidden class="anchor" aria-hidden="true" href="#浮点数类型">#</a></h2>
<p>float：4个字节，单精度（最多5位小数）<br>
<strong>double：8个字节，双精度（最多16位小数）</strong></p>
<h2 id="定点数类型">定点数类型<a hidden class="anchor" aria-hidden="true" href="#定点数类型">#</a></h2>
<p>decimal：定点数类型。底层实际上采用字符串的形式存储数字。<br>
语法：decimal(m, d)<br>
例如：decimal(3, 2) 表示3个有效数字，2个小数。（有效数字最多65个，小数位最多30个）</p>
<h2 id="日期和时间类型">日期和时间类型<a hidden class="anchor" aria-hidden="true" href="#日期和时间类型">#</a></h2>
<p>year：1个字节，只存储年，格式YYYY<br>
time：3个字节，只存储时间，格式HH:MM:SS / HHMMSS<br>
date：3个字节，只存储年月日，格式：YYYY-MM-DD<br>
datetime：8个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1000年~公元9999年）<br>
timestamp：4个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1980年~公元2040年）或者格式为 YYYYMMDDHHMMSS（采用这种格式不需要使用单引号，当然你使用单引号也可以）</p>
<h2 id="字符串类型">字符串类型<a hidden class="anchor" aria-hidden="true" href="#字符串类型">#</a></h2>
<h3 id="char">char<a hidden class="anchor" aria-hidden="true" href="#char">#</a></h3>
<p>**char(m)：**m长度是0~255个字符。<br>
固定长度字符串，在定义时指定字符串列长。当保存时，在右侧填充空格以达到指定的长度。m表示列的长度，范围是 0～255 个字符。<br>
例如，CHAR(4) 定义了一个固定长度的字符串列，包含的字符个数最大为 4。当插入的字符长度大于4，则报错（除非超过4个长度之后都是空格字符，则空格字符会自动被删除用来保证插入的成功）。</p>
<h3 id="varchar">varchar<a hidden class="anchor" aria-hidden="true" href="#varchar">#</a></h3>
<p>**varchar(m)：**m长度是0~16383个字符<br>
长度可变的字符串。varchar 的最大实际长度由最长的行的大小和使用的字符集确定，而实际占用的空间为字符串的实际长度加 1。<br>
例如，varchar(50) 定义了一个最大长度为 50 的字符串，如果插入的字符串只有 10 个字符，则实际存储的字符串为 10 个字符和一个字符串结束字符。varchar在值保存和检索时尾部的空格仍保留。<br>
<img alt="1708647300729-2181603b-e620-4be8-bab6-1b9c029989d8.png" loading="lazy" src="/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/5c1018c92598eacfbb6bd402d07ddd7f_MD5.png"></p>
<h3 id="text">text<a hidden class="anchor" aria-hidden="true" href="#text">#</a></h3>
<p><strong>text类型：</strong></p>
<ul>
<li>tinytext 表示长度为 255字符的 TEXT 列。</li>
<li>text 表示长度为 65535字符的 TEXT 列。</li>
<li>mediumtext 表示长度为 16777215字符的 TEXT 列。</li>
<li>longtext 表示长度为 4294967295 或 4GB 字符的 TEXT 列。</li>
</ul>
<h3 id="enum">enum<a hidden class="anchor" aria-hidden="true" href="#enum">#</a></h3>
<p><strong>enum类型：</strong></p>
<ul>
<li>语法：&lt;字段名&gt; enum(&lsquo;值1&rsquo;,&lsquo;值2&rsquo;,&hellip;)</li>
<li>该字段插入值时，只能是指定的枚举值。</li>
</ul>
<h3 id="set">set<a hidden class="anchor" aria-hidden="true" href="#set">#</a></h3>
<p><strong>set类型：</strong></p>
<ul>
<li>语法：&lt;字段名&gt; set(&lsquo;值1&rsquo;,&lsquo;值2&rsquo;,&lsquo;值3&rsquo;,&hellip;)   注意：值不可重复。</li>
<li>该字段插入值时，只能是指定的值。</li>
</ul>
<h2 id="二进制类型">二进制类型<a hidden class="anchor" aria-hidden="true" href="#二进制类型">#</a></h2>
<p>BLOB类型：二进制大对象，可以存储图片、声音、视频等文件。</p>
<ul>
<li>blob：小的，最大长度65535个字节</li>
<li>mediumblob：中等的，最大长度16777215个字节</li>
<li>longblob：大的，最大长度4GB的字节</li>
</ul>
<h1 id="增删改表结构ddl">增删改表结构DDL<a hidden class="anchor" aria-hidden="true" href="#增删改表结构ddl">#</a></h1>
<h2 id="创建一个学生表">创建一个学生表<a hidden class="anchor" aria-hidden="true" href="#创建一个学生表">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">bigint</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">comment</span> <span style="color:#0ff;font-weight:bold">&#39;年龄&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="查看建表语句">查看建表语句<a hidden class="anchor" aria-hidden="true" href="#查看建表语句">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">show</span> <span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改表名">修改表名<a hidden class="anchor" aria-hidden="true" href="#修改表名">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">alter</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">rename</span> <span style="color:#f00">新表名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="新增字段">新增字段<a hidden class="anchor" aria-hidden="true" href="#新增字段">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">alter</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">add</span> <span style="color:#f00">字段名</span> <span style="color:#f00">数据类型</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改字段名">修改字段名<a hidden class="anchor" aria-hidden="true" href="#修改字段名">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">alter</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span> change <span style="color:#f00">旧字段名</span> <span style="color:#f00">新字段名</span> <span style="color:#f00">数据类型</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改字段数据类型">修改字段数据类型<a hidden class="anchor" aria-hidden="true" href="#修改字段数据类型">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">alter</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">modify</span> <span style="color:#fff;font-weight:bold">column</span> <span style="color:#f00">字段名</span> <span style="color:#f00">数据类型</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="删除字段">删除字段<a hidden class="anchor" aria-hidden="true" href="#删除字段">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">alter</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">drop</span> <span style="color:#f00">字段名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="dml语句">DML语句<a hidden class="anchor" aria-hidden="true" href="#dml语句">#</a></h1>
<p>当我们对表中的数据进行增删改的时候，称它为DML语句。（数据操纵语言），主要包括：insert、delete、update</p>
<h2 id="insert-增">insert 增<a hidden class="anchor" aria-hidden="true" href="#insert-增">#</a></h2>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> <span style="color:#f00">表名</span>(<span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">3</span>,...) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">3</span>,...);
</span></span></code></pre></td></tr></table>
</div>
</div><p>表名后面的小括号当中的字段名如果省略掉，表示自动将所有字段都列出来了，并且字段的顺序和建表时的顺序一致。<br>
一般为了可读性强，建议把字段名写上。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">3</span>,...);
</span></span></code></pre></td></tr></table>
</div>
</div><p>一次可以插入多条记录：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_stu(<span style="color:#fff;font-weight:bold">no</span>,name,age) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#ff0;font-weight:bold">1</span>,<span style="color:#0ff;font-weight:bold">&#39;jack&#39;</span>,<span style="color:#ff0;font-weight:bold">20</span>),(<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#0ff;font-weight:bold">&#39;lucy&#39;</span>,<span style="color:#ff0;font-weight:bold">30</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="delete-删">delete 删<a hidden class="anchor" aria-hidden="true" href="#delete-删">#</a></h2>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span># <span style="color:#f00">将所有记录全部删除</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">from</span> <span style="color:#f00">表名</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># <span style="color:#f00">删除符合条件的记录</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">from</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">where</span> <span style="color:#f00">条件</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上的删除属于DML的方式删除，这种删除的数据是可以通过事务回滚的方式重新恢复的，但是删除的效率较低。（这种删除是支持事务的。）<br>
另外还有一种删除表中数据的方式，但是这种方式不支持事务，不可以回滚，删了之后数据是永远也找不回来了。这种删除叫做：表被截断。<br>
注意：这个语句删除效率非常高，巨大的表，瞬间干掉所有数据。但不可恢复。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">truncate</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#f00">表名</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="update-改">update 改<a hidden class="anchor" aria-hidden="true" href="#update-改">#</a></h2>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">update</span> <span style="color:#f00">表名</span> <span style="color:#fff;font-weight:bold">set</span> <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">1</span>=<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">2</span>=<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#f00">字段名</span><span style="color:#ff0;font-weight:bold">3</span>=<span style="color:#f00">值</span><span style="color:#ff0;font-weight:bold">3</span> <span style="color:#fff;font-weight:bold">where</span> <span style="color:#f00">条件</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果没有更新条件的话，所有记录全部更新。</p>
<h1 id="约束constraint">约束constraint<a hidden class="anchor" aria-hidden="true" href="#约束constraint">#</a></h1>
<p>创建表时，可以给表的字段添加约束，可以保证数据的完整性、有效性。比如大家上网注册用户时常见的：用户名不能为空。对不起，用户名已存在。等提示信息。<br>
约束通常包括：</p>
<ul>
<li>非空约束：not null</li>
<li>检查约束：check</li>
<li>唯一性约束：unique</li>
<li>主键约束：primary key</li>
<li>外键约束：foreign key</li>
</ul>
<h2 id="非空约束">非空约束<a hidden class="anchor" aria-hidden="true" href="#非空约束">#</a></h2>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>) <span style="color:#fff;font-weight:bold">not</span> <span style="color:#fff;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>name字段不能为空。插入数据时如果没有给name指定值，则报错。</p>
<h2 id="检查约束">检查约束<a hidden class="anchor" aria-hidden="true" href="#检查约束">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">check</span>(age &gt; <span style="color:#ff0;font-weight:bold">18</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="唯一性约束">唯一性约束<a hidden class="anchor" aria-hidden="true" href="#唯一性约束">#</a></h2>
<p>语法格式：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  email <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>) <span style="color:#fff;font-weight:bold">unique</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>email字段设置为唯一性，唯一性的字段值是可以为NULL的。但不能重复。以上在字段后面添加的约束，叫做列级约束。<br>
当然，添加约束还有另一种方式：表级约束：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  email <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">unique</span>(email)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用表级约束可以为多个字段添加联合唯一。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  email <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">unique</span>(name,email)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建约束时也可以给约束起名字，将来可以通过约束的名字来删除约束：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_stu(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  email <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">constraint</span> t_stu_name_email_unique <span style="color:#fff;font-weight:bold">unique</span>(name,email)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>所有的约束都存储在一个系统表当中：table_constraints。这个系统表在这个数据库当中：information_schema</p>
<h2 id="主键约束">主键约束<a hidden class="anchor" aria-hidden="true" href="#主键约束">#</a></h2>
<ol>
<li>主键：primary key，简称PK</li>
<li>主键约束的字段不能为NULL，并且不能重复。</li>
<li>任何一张表都应该有主键，没有主键的表可以视为无效表。</li>
<li>主键值是这行记录的身份证号，是唯一标识。在数据库表中即使两条数据一模一样，但由于主键值不同，我们也会认为是两条完全的不同的数据。</li>
<li>主键分类：
<ol>
<li>根据字段数量分类：
<ol>
<li>单一主键（1个字段作为主键）==&gt;建议的</li>
<li>复合主键（2个或2个以上的字段作为主键）</li>
</ol>
</li>
<li>根据业务分类：
<ol>
<li>自然主键（主键和任何业务都无关，只是一个单纯的自然数据）===&gt;建议的</li>
<li>业务主键（主键和业务挂钩，例如：银行卡账号作为主键）</li>
</ol>
</li>
</ol>
</li>
<li>单一主键（建议使用这种方式）</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student(
</span></span><span style="display:flex;"><span>  id <span style="color:#fff;font-weight:bold">bigint</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>,
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>) <span style="color:#fff;font-weight:bold">unique</span>,
</span></span><span style="display:flex;"><span>  sname <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>) <span style="color:#fff;font-weight:bold">not</span> <span style="color:#fff;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="7">
<li>复合主键（很少用，了解）</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_user(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>),
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>(<span style="color:#fff;font-weight:bold">no</span>,name)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="8">
<li>主键自增：既然主键值是一个自然的数字，mysql为主键值提供了一种自增机制，不需要我们程序员维护，mysql自动维护该字段</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_vip(
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span> auto_increment,
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="外键约束">外键约束<a hidden class="anchor" aria-hidden="true" href="#外键约束">#</a></h2>
<ol>
<li>有这样一个需求：要求设计表，能够存储学生以及学校信息。
<ol>
<li>第一种方案：一张表</li>
</ol>
</li>
</ol>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/f99a7a1f8ac31fb3a8248a990bbf474d_MD5.png"><br>
这种方式会导致数据冗余，浪费空间。</p>
<ol start="2">
<li>第二种方案：两张表：一张存储学生，一张存储学校</li>
</ol>
<p>t_school 表<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/60051b1f38555044e06793622503858b_MD5.png"><br>
t_student 表<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC3%E7%AB%A0-%E8%A1%A8%E7%9B%B8%E5%85%B3/6ba9201eea971dffe875621d303e1384_MD5.png"><br>
如果采用以上两张表存储数据，对于学生表来说，sno这个字段的值是不能随便填的，这个sno是学校编号，必须要求这个字段中的值来自学校表的sno。<br>
为了达到要求，此时就必须要给t_student表的sno字段添加外键约束了。</p>
<ol start="2">
<li>外键约束：foreign key，简称FK。</li>
<li>添加了外键约束的字段中的数据必须来自其他字段，不能随便填。</li>
<li>假设给a字段添加了外键约束，要求a字段中的数据必须来自b字段，b字段不一定是主键，但至少要有唯一性。</li>
<li>外键约束可以给单个字段添加，叫做单一外键。也可以给多个字段联合添加，叫做复合外键。复合外键很少用。</li>
<li>a表如果引用b表中的数据，可以把b表叫做父表，把a表叫做子表。
<ol>
<li>创建表时，先创建父表，再创建子表。</li>
<li>插入数据时，先插入父表，在插入子表。</li>
<li>删除数据时，先删除子表，再删除父表。</li>
<li>删除表时，先删除子表，再删除父表。</li>
</ol>
</li>
<li>如何添加外键：</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_school( 
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>, 
</span></span><span style="display:flex;"><span>  sname <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>) 
</span></span><span style="display:flex;"><span>); 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student( 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>, 
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>), 
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">constraint</span> t_school_sno_fk <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span>(sno) <span style="color:#fff;font-weight:bold">references</span> t_school(sno) 
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="8">
<li>级联删除</li>
</ol>
<p>创建子表时，外键可以添加：on delete cascade，这样在删除父表数据时，子表会级联删除。谨慎使用。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student( 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>, 
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>), 
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">constraint</span> t_school_sno_fk <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span>(sno) <span style="color:#fff;font-weight:bold">references</span> t_school(sno) <span style="color:#fff;font-weight:bold">on</span> <span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">cascade</span> 
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>###<span style="color:#f00">删除约束</span>
</span></span><span style="display:flex;"><span>alert <span style="color:#fff;font-weight:bold">table</span> t_student <span style="color:#fff;font-weight:bold">drop</span> <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span> t_student_sno_fk;
</span></span><span style="display:flex;"><span>###<span style="color:#f00">添加约束</span>
</span></span><span style="display:flex;"><span>alert <span style="color:#fff;font-weight:bold">table</span> t_student <span style="color:#fff;font-weight:bold">add</span> <span style="color:#fff;font-weight:bold">constraint</span> t_student_sno_fk <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span>(sno) <span style="color:#fff;font-weight:bold">references</span> t_school(sno) <span style="color:#fff;font-weight:bold">on</span> <span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">cascade</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="9">
<li>级联更新</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student( 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>, 
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>), 
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">constraint</span> t_school_sno_fk <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span>(sno) <span style="color:#fff;font-weight:bold">references</span> t_school(sno) <span style="color:#fff;font-weight:bold">on</span> <span style="color:#fff;font-weight:bold">update</span> <span style="color:#fff;font-weight:bold">cascade</span> 
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="10">
<li>级联置空</li>
</ol>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student( 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">no</span> <span style="color:#fff;font-weight:bold">int</span> <span style="color:#fff;font-weight:bold">primary</span> <span style="color:#fff;font-weight:bold">key</span>, 
</span></span><span style="display:flex;"><span>  name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">255</span>), 
</span></span><span style="display:flex;"><span>  age <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  sno <span style="color:#fff;font-weight:bold">int</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">constraint</span> t_school_sno_fk <span style="color:#fff;font-weight:bold">foreign</span> <span style="color:#fff;font-weight:bold">key</span>(sno) <span style="color:#fff;font-weight:bold">references</span> t_school(sno) <span style="color:#fff;font-weight:bold">on</span> <span style="color:#fff;font-weight:bold">delete</span> <span style="color:#fff;font-weight:bold">set</span> <span style="color:#fff;font-weight:bold">null</span> 
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/mysql/">Mysql</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
