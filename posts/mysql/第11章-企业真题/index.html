<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ç¬¬11ç«  ä¼ä¸šçœŸé¢˜ | Wjy&#39;s Blog</title>
<meta name="keywords" content="mysql">
<meta name="description" content="ç¬¬ä¸€é¢˜ 1 2 3 4 5 # ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº80åˆ†çš„å­¦å‘˜å§“å select distinct name from t_student where fenshu &lt;= 80 # ç¬¬äºŒæ­¥ï¼šnot in select distinct name from t_student where name not in(select distinct name from t_student where fenshu &lt;= 80) ç¬¬äºŒé¢˜ å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://009965.xyz/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://009965.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://009965.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://009965.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://009965.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://009965.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://009965.xyz/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://009965.xyz/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/">
  <meta property="og:site_name" content="Wjy&#39;s Blog">
  <meta property="og:title" content="ç¬¬11ç«  ä¼ä¸šçœŸé¢˜">
  <meta property="og:description" content="ç¬¬ä¸€é¢˜ 1 2 3 4 5 # ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº80åˆ†çš„å­¦å‘˜å§“å select distinct name from t_student where fenshu &lt;= 80 # ç¬¬äºŒæ­¥ï¼šnot in select distinct name from t_student where name not in(select distinct name from t_student where fenshu &lt;= 80) ç¬¬äºŒé¢˜ å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-25T18:13:07+00:00">
    <meta property="article:modified_time" content="2025-05-25T18:13:07+00:00">
    <meta property="article:tag" content="Mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç¬¬11ç«  ä¼ä¸šçœŸé¢˜">
<meta name="twitter:description" content="ç¬¬ä¸€é¢˜ 1 2 3 4 5 # ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº80åˆ†çš„å­¦å‘˜å§“å select distinct name from t_student where fenshu &lt;= 80 # ç¬¬äºŒæ­¥ï¼šnot in select distinct name from t_student where name not in(select distinct name from t_student where fenshu &lt;= 80) ç¬¬äºŒé¢˜ å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://009965.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ç¬¬11ç«  ä¼ä¸šçœŸé¢˜",
      "item": "https://009965.xyz/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ç¬¬11ç«  ä¼ä¸šçœŸé¢˜",
  "name": "ç¬¬11ç«  ä¼ä¸šçœŸé¢˜",
  "description": "ç¬¬ä¸€é¢˜ 1 2 3 4 5 # ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº80åˆ†çš„å­¦å‘˜å§“å select distinct name from t_student where fenshu \u0026lt;= 80 # ç¬¬äºŒæ­¥ï¼šnot in select distinct name from t_student where name not in(select distinct name from t_student where fenshu \u0026lt;= 80) ç¬¬äºŒé¢˜ å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨",
  "keywords": [
    "mysql"
  ],
  "articleBody": "ç¬¬ä¸€é¢˜ 1 2 3 4 5 # ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº80åˆ†çš„å­¦å‘˜å§“å select distinct name from t_student where fenshu \u003c= 80 # ç¬¬äºŒæ­¥ï¼šnot in select distinct name from t_student where name not in(select distinct name from t_student where fenshu \u003c= 80) ç¬¬äºŒé¢˜ å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨çš„å…³è”å­—æ®µä¸ºç”³è¯·å•å·ã€‚\n1ï¼‰æŸ¥è¯¢èº«ä»½è¯å·ä¸º440401430103082çš„ç”³è¯·æ—¥æœŸã€‚\n2ï¼‰æŸ¥è¯¢åŒä¸€ä¸ªèº«ä»½è¯å·ç æœ‰ä¸¤æ¡ä»¥ä¸Šè®°å½•çš„èº«ä»½è¯å·ç åŠè®°å½•ä¸ªæ•°ã€‚\n3ï¼‰å°†èº«ä»½è¯å·ç ä¸º440401430103082çš„è®°å½•åœ¨ä¸¤ä¸ªè¡¨ä¸­çš„ç”³è¯·çŠ¶æ€å‡æ”¹ä¸º07ã€‚\n4ï¼‰åˆ é™¤g_cardapplydetailè¡¨ä¸­æ‰€æœ‰å§“æçš„è®°å½•ã€‚\næ¨¡æ‹Ÿæ•°æ®ï¼šè€ƒè¯•åšè¿™ç§é¢˜ç›®æœ€é‡è¦çš„æ˜¯è¦å†·é™ä¸‹æ¥ï¼Œåªæœ‰é™ä¸‹æ¥SQLæ‰èƒ½å†™å¥½ã€‚è¦æ¨¡æ‹Ÿæ•°æ®ã€‚çœ‹åˆ°æ•°æ®SQLå°±å¥½å†™äº†ã€‚\n1ï¼‰æŸ¥è¯¢èº«ä»½è¯å·ä¸º440401430103082çš„ç”³è¯·æ—¥æœŸã€‚\nbigintè½¬dateï¼Œå¯ä»¥ä½¿ç”¨from_unixtimeå‡½æ•°ã€‚\n1 select a.g_applydate from g_cardapply a join g_cardapplydetail b on a.g_applyno = b.g_applyno where b.g_idcard = '440401430103082' 2ï¼‰æŸ¥è¯¢åŒä¸€ä¸ªèº«ä»½è¯å·ç æœ‰ä¸¤æ¡ä»¥ä¸Šè®°å½•çš„èº«ä»½è¯å·ç åŠè®°å½•ä¸ªæ•°ã€‚\n1 select count(g_idcard),g_idcard from g_cardapplydetail group by g_idcard having count(g_idcard) \u003e= 2 3ï¼‰å°†èº«ä»½è¯å·ç ä¸º440401430103082çš„è®°å½•åœ¨ä¸¤ä¸ªè¡¨ä¸­çš„ç”³è¯·çŠ¶æ€å‡æ”¹ä¸º07ã€‚\n1 2 3 4 5 6 7 8 9 10 UPDATE g_cardapply JOIN g_cardapplydetail ON g_cardapply.g_applyno = g_cardapplydetail.g_applyno AND g_cardapplydetail.g_idcard = '440401430103082' SET g_cardapply.g_state = '07', g_cardapplydetail.g_state = '07' 4ï¼‰åˆ é™¤g_cardapplydetailè¡¨ä¸­æ‰€æœ‰å§“æçš„è®°å½•ã€‚\n1 delete t1,t2 from g_cardapply t1 join g_cardapplydetail t2 on t1.g_applyno=t2.g_applyno where t2.g_name like 'æ%'; ç¬¬ä¸‰é¢˜ è¡¨åï¼šstuscore\n1ï¼‰ç»Ÿè®¡å¦‚ä¸‹ï¼šè¯¾ç¨‹ä¸åŠæ ¼[0~59]çš„å¤šå°‘ä¸ªï¼Œè‰¯[60~80]å¤šå°‘ä¸ªï¼Œä¼˜[81-100]å¤šå°‘ä¸ªã€‚\n2ï¼‰è®¡ç®—ç§‘ç§‘åŠæ ¼çš„äººçš„å¹³å‡æˆç»©ã€‚\nç¬¬å››é¢˜ 1ï¼‰è¯·ç”¨ä¸€æ¡SQLè¯­å¥æŸ¥è¯¢å‡ºä¸åŒéƒ¨é—¨ä¸­æ‹…ä»»â€œé’³å·¥â€çš„èŒå·¥å¹³å‡å·¥èµ„ã€‚\n2ï¼‰è¯·ç”¨ä¸€æ¡SQLè¯­å¥æŸ¥è¯¢å‡ºä¸åŒéƒ¨é—¨ä¸­æ‹…ä»»â€œé’³å·¥â€çš„èŒå·¥å¹³å‡å·¥èµ„é«˜äº2000çš„éƒ¨é—¨ã€‚\nç¬¬äº”é¢˜ Employeeæ˜¯é›‡å‘˜ä¿¡æ¯è¡¨ï¼š\né›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name\nè¡—é“ï¼šstreet\nåŸå¸‚ï¼šcity\nCompanyæ˜¯å…¬å¸ä¿¡æ¯è¡¨ï¼š\nå…¬å¸åç§°ï¼ˆä¸»é”®ï¼‰ï¼šcompany-name\nåŸå¸‚ï¼šcity\nWorksæ˜¯é›‡å‘˜å·¥ä½œä¿¡æ¯è¡¨ï¼š\né›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name\nå…¬å¸åç§°ï¼šcompany-name\nå¹´è–ªï¼šsalary\nManagesæ˜¯é›‡å‘˜å·¥ä½œå…³ç³»è¡¨ï¼š\né›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name\nç»ç†å§“åï¼šmanager-name\næ¨¡æ‹Ÿæ•°æ®ï¼š\nå‘˜å·¥è¡¨ï¼šemployee\nå…¬å¸è¡¨ï¼šcompany\né›‡å‘˜å·¥ä½œä¿¡æ¯è¡¨ï¼šWorks\né›‡å‘˜å·¥ä½œå…³ç³»è¡¨ï¼šManages\nè¯·ç»™å‡ºä¸‹é¢æ¯ä¸€ä¸ªæŸ¥è¯¢çš„SQLè¯­å¥ï¼š\næ‰¾å‡ºæ‰€æœ‰å±…ä½åœ°ä¸å·¥ä½œçš„å…¬å¸åœ¨åŒä¸€åŸå¸‚çš„å‘˜å·¥çš„å§“åã€‚ æ‰¾å‡ºæ¯”Small Bank Corporationçš„æ‰€æœ‰å‘˜å·¥æ”¶å…¥éƒ½é«˜çš„æ‰€æœ‰å‘˜å·¥çš„å§“åã€‚ æ‰¾å‡ºå¹³å‡å¹´è–ªåœ¨10000ç¾å…ƒä»¥ä¸Šçš„å…¬å¸åŠå…¶å¹³å‡å¹´è–ªã€‚ ç¬¬å…­é¢˜ å®¢æˆ·è¡¨Client\nè®¢å•è¡¨Order\nå®¢æˆ·è®¢å•è¡¨ClientOrder\nå›¾ä¹¦è¡¨Book\nè¯·å†™å‡ºä¸€æ¡SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæ¯ä¸ªå®¢æˆ·çš„æ‰€æœ‰è®¢å•å¹¶æŒ‰ç…§åœ°å€æ’åºï¼Œè¦æ±‚è¾“å‡ºæ ¼å¼ä¸ºï¼šaddress client_name phone order_id è¯·å†™å‡ºä¸€æ¡SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæ¯ä¸ªå®¢æˆ·è®¢è´­çš„å›¾ä¹¦æ€»ä»·ã€‚è¦æ±‚è¾“å‡ºæ ¼å¼ä¸ºï¼šclient_name total_price å¦‚æœè¦æ±‚æ¯ä¸ªè®¢å•å¯ä»¥åŒ…å«å¤šç§å›¾ä¹¦ï¼Œåº”è¯¥å¦‚ä½•ä¿®æ”¹Orderè¡¨çš„ä¸»é”®ï¼Ÿä¸ºäº†ä¿è¯æ¯ä¸ªè®¢å•åªè¢«ä¸€ä¸ªå®¢æˆ·æ‹¥æœ‰ï¼Œåº”è¯¥åœ¨ClientOrderè¡¨ä¸Šå¢åŠ æ€æ ·çš„çº¦æŸï¼Ÿ ç¬¬ä¸ƒé¢˜ æ¨¡æ‹Ÿæ•°æ®ï¼š\nå­¦ç”Ÿè¡¨ï¼šstudent\nè¯¾ç¨‹è¡¨ï¼šcourse\næˆç»©è¡¨ï¼šsc\næ•™å¸ˆè¡¨ï¼šteacher\næŸ¥è¯¢1å·è¯¾æ¯”2å·è¯¾æˆç»©é«˜çš„æ‰€æœ‰å­¦ç”Ÿå­¦å·ã€‚ æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº60åˆ†çš„å­¦å·å’Œå¹³å‡æˆç»©ã€‚ æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå­¦å·ã€å§“åã€é€‰è¯¾æ•°ã€æ€»æˆç»©ã€‚ æŸ¥è¯¢å§“â€œæâ€çš„è€å¸ˆçš„ä¸ªæ•°ã€‚ æŸ¥è¯¢æ²¡å­¦è¿‡â€œå¶å¹³â€è€å¸ˆè¯¾çš„å­¦å·ã€å§“åã€‚ ç¬¬å…«é¢˜ å­¦ç”Ÿè¡¨ï¼šstudent\nè¯¾ç¨‹è¡¨ï¼šclass\né€‰è¯¾è¡¨ï¼šchosen_class\næ²¡æœ‰é€‰ä¿®è¯¾ç¨‹ç¼–å·ä¸ºC1çš„å­¦ç”Ÿå§“å åˆ—å‡ºæ¯é—¨è¯¾ç¨‹åç§°å’Œå¹³å‡æˆç»©ï¼Œå¹¶æŒ‰ç…§æˆç»©æ’åº é€‰äº†2é—¨è¯¾ä»¥ä¸Šçš„å­¦ç”Ÿå§“åã€‚ ç¬¬ä¹é¢˜ è¦è½¬æ¢æˆï¼š\nMySQLè¡Œè½¬åˆ— MySQLè¡Œè½¬åˆ—åˆå«åšæ•°æ®é€è§†ã€‚ä»€ä¹ˆå«åšè¡Œè½¬åˆ—ï¼Ÿå°†åŸæœ¬æ¨ªå‘æ’åˆ—çš„æ•°æ®é€è§†æˆçºµå‘æ’åˆ—çš„æ•°æ®ï¼Œè¿›è€Œè¿›è¡Œè®¡ç®—ã€åˆ†æã€å±•ç¤ºç­‰æ“ä½œã€‚\nå‡è®¾æœ‰ä¸€ä¸ªå­¦ç”Ÿé€‰è¯¾æˆç»©è¡¨ï¼ŒåŒ…å«å­¦ç”Ÿå§“åï¼ˆstu_nameï¼‰ã€è¯¾ç¨‹åç§°ï¼ˆcourse_nameï¼‰å’Œåˆ†æ•°ï¼ˆscoreï¼‰ä¸‰ä¸ªå­—æ®µã€‚åœ¨åŸå§‹æ•°æ®ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿåœ¨ä¸åŒçš„è¯¾ç¨‹ä¸­éƒ½æœ‰è‡ªå·±çš„å¾—åˆ†æƒ…å†µï¼Œæ•°æ®æ ·ä¾‹å¦‚ä¸‹ï¼š\nstu_name course_name score å¼ ä¸‰ æ•°å­¦ 80 å¼ ä¸‰ è‹±è¯­ 85 å¼ ä¸‰ å†å² 90 æå›› æ•°å­¦ 75 æå›› è‹±è¯­ 92 æå›› å†å² 85 ç‹äº” æ•°å­¦ 88 ç‹äº” è‹±è¯­ 90 ç‹äº” å†å² 95 å¯ä»¥ä½¿ç”¨è¡Œè½¬åˆ—æ“ä½œï¼Œå°†æ¯ä¸ªå­¦ç”Ÿåœ¨ä¸åŒè¯¾ç¨‹ä¸­çš„åˆ†æ•°æ‹†åˆ†æˆå¤šæ¡è®°å½•ï¼Œæ¯æ¡è®°å½•åŒ…å«ä¸€ä¸ªè¯¾ç¨‹ä»¥åŠå¯¹åº”çš„åˆ†æ•°ã€‚è½¬æ¢åçš„æ•°æ®æ ·ä¾‹å¦‚ä¸‹ï¼š\nstu_name æ•°å­¦ è‹±è¯­ å†å² å¼ ä¸‰ 80 85 90 æå›› 75 92 85 ç‹äº” 88 90 95 ä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¡Œè½¬åˆ—ä¹‹åï¼Œæ¯ä¸€è¡Œè®°å½•éƒ½è¡¨ç¤ºäº†ä¸€ä¸ªå­¦ç”Ÿåœ¨ä¸åŒè¯¾ç¨‹ä¸­çš„åˆ†æ•°ã€‚è¿™æ ·æ›´ä¾¿äºå¯¹ä¸åŒç§‘ç›®çš„åˆ†æ•°è¿›è¡Œæ¯”è¾ƒã€è®¡ç®—å¹³å‡å€¼ç­‰åˆ†ææ“ä½œã€‚\nä½¿ç”¨case when+group byå®Œæˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 drop table if exists t_student; create table t_student( stu_name varchar(10), course_name varchar(10), score int ); insert into t_student(stu_name, course_name, score) values('å¼ ä¸‰', 'æ•°å­¦', 80); insert into t_student(stu_name, course_name, score) values('å¼ ä¸‰', 'è‹±è¯­', 85); insert into t_student(stu_name, course_name, score) values('å¼ ä¸‰', 'å†å²', 90); insert into t_student(stu_name, course_name, score) values('æå››', 'æ•°å­¦', 75); insert into t_student(stu_name, course_name, score) values('æå››', 'è‹±è¯­', 92); insert into t_student(stu_name, course_name, score) values('æå››', 'å†å²', 85); insert into t_student(stu_name, course_name, score) values('ç‹äº”', 'æ•°å­¦', 88); insert into t_student(stu_name, course_name, score) values('ç‹äº”', 'è‹±è¯­', 90); insert into t_student(stu_name, course_name, score) values('ç‹äº”', 'å†å²', 95); commit; select * from t_student; è¡Œè½¬åˆ—åçš„æ•ˆæœæ˜¯ï¼š\nsqlå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 select stu_name, max(case course_name when 'æ•°å­¦' then score else 0 end) as 'æ•°å­¦', max(case course_name when 'è‹±è¯­' then score else 0 end) as 'è‹±è¯­', max(case course_name when 'å†å²' then score else 0 end) as 'å†å²' from t_student group by stu_name; é€šè¿‡ä»¥ä¸Šå†…å®¹çš„å­¦ä¹ ï¼Œæˆ‘ä»¬è¿™ä¸ªé¢è¯•é¢˜å°±è¿åˆƒè€Œè§£äº†ï¼š\n1 2 3 4 5 6 7 8 9 10 select year, max(case season when 'ä¸€å­£åº¦' then count else 0 end) as 'ä¸€å­£åº¦', max(case season when 'äºŒå­£åº¦' then count else 0 end) as 'äºŒå­£åº¦', max(case season when 'ä¸‰å­£åº¦' then count else 0 end) as 'ä¸‰å­£åº¦', max(case season when 'å››å­£åº¦' then count else 0 end) as 'å››å­£åº¦' from t_temp group by year; ç¬¬åé¢˜ 1 2 3 4 5 6 7 8 select x.a å¼€å§‹æ•°å­—, y.a ç»“æŸæ•°å­— from (select m.a,row_number() over(order by m.a) as rownum from (select a, lag(a) over(order by a asc) as pre_a from t) m where m.a - m.pre_a != 1 or m.pre_a is null) x join (select n.a,row_number() over(order by n.a) as rownum from (select a, lead(a) over(order by a asc) as next_a from t) n where n.next_a - n.a != 1 or n.next_a is null) y on x.rownum = y.rownum; è§£ç­”ä¸Šé¢è¿™ä¸ªé¢˜ç›®éœ€è¦å…·å¤‡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š\nlagå‡½æ•° leadå‡½æ•° row_numberå‡½æ•° lagå‡½æ•°ï¼šè·å–å½“å‰è¡Œçš„ä¸Šä¸€è¡Œæ•°æ®\n1 select empno,ename,sal,(lag(sal) over(order by sal asc)) as pre_sal from emp; æ³¨æ„ï¼šoverå‡½æ•°ç”¨æ¥æŒ‡å®šâ€œåœ¨â€¦..èŒƒå›´å†…â€ï¼Œé€šå¸¸å’Œlagå‡½æ•°è”ç”¨ã€‚\nleadå‡½æ•°ï¼šè·å–å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œæ•°æ®\n1 select empno,ename,sal,(lead(sal) over(order by sal asc)) as next_sal from emp; æ³¨æ„ï¼šoverå‡½æ•°ç”¨æ¥æŒ‡å®šâ€œåœ¨â€¦..èŒƒå›´å†…â€ï¼Œé€šå¸¸å’Œleadå‡½æ•°è”ç”¨ã€‚\nrow_numberå‡½æ•°ï¼šå¯ä»¥ä¸ºæŸ¥è¯¢ç»“æœé›†ç”Ÿæˆè¡Œå·ï¼š\n1 select empno,ename,sal,row_number() over(order by sal) as rownum from emp; åˆ©ç”¨row_numberå‡½æ•°ï¼Œå°†ä¸¤ä¸ªä¸ç›¸å…³çš„åˆ—æ‹¼æ¥åœ¨ä¸€èµ·æ˜¾ç¤ºï¼š\n1 2 3 4 5 6 7 8 select x.a, y.b from (select a,row_number() over(order by a) as rownum from t1) x join (select b,row_number() over(order by b) as rownum from t2) y on x.rownum = y.rownum; CTEè¯­æ³•ï¼ˆå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼‰ï¼šCommon Table Expressionã€‚åˆ›å»ºä¸´æ—¶è¡¨çš„ä¸€ç§è¯­æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 -- æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨å¹³å‡å·¥èµ„çš„å·¥èµ„ç­‰çº§ -- ç¬¬ä¸€ç§å†™æ³• select t.deptno,t.avgsal,s.grade from (select deptno,avg(sal) as avgsal from emp group by deptno) t join salgrade s on t.avgsal between s.losal and s.hisal; -- ç¬¬äºŒç§å†™æ³•ï¼šä½¿ç”¨CTEè¯­æ³• with cte_exp as(select deptno,avg(sal) as avgsal from emp group by deptno) select cte_exp.deptno,cte_exp.avgsal,s.grade from cte_exp join salgrade s on cte_exp.avgsal between s.losal and s.hisal; partition byï¼šå°†æ•°æ®åˆ†åŒºï¼Œå’Œgroup byåŒºåˆ«æ˜¯ï¼šgroup byæ˜¯åˆ†ç»„ï¼Œç„¶åå’Œåˆ†ç»„å‡½æ•°ä¸€èµ·ç”¨ã€‚partition byåˆ†åŒºä¸éœ€è¦å’Œåˆ†ç»„å‡½æ•°ä¸€èµ·ä½¿ç”¨\n1 select deptno, empno,ename,sal,(lag(sal) over(partition by deptno order by sal asc)) as pre_sal from emp; MySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ”¯æŒå¦‚ä¸‹å¸¸ç”¨çš„çª—å£å‡½æ•°ï¼š\nROW_NUMBER()ï¼šæ’åå‡½æ•°ï¼Œè¿”å›å½“å‰ç»“æœé›†ä¸­æ¯ä¸ªè¡Œçš„è¡Œå·ï¼› RANK()ï¼šæ’åå‡½æ•°ï¼Œè®¡ç®—åˆ†ç»„ç»“æœä¸­çš„æ’åï¼Œç›¸åŒçš„è¡Œæ’åç›¸åŒä¸”æ²¡æœ‰ç©ºç¼ºï¼Œä¸‹ä¸€ä¸ªè¡Œæ’åè·³è¿‡ç©ºç¼ºï¼› DENSE_RANK()ï¼šæ’åå‡½æ•°ï¼Œè®¡ç®—åˆ†ç»„ç»“æœä¸­çš„æ’åï¼Œç›¸åŒçš„è¡Œæ’åç›¸åŒï¼Œæ’åè¿ç»­ï¼Œæ²¡æœ‰ç©ºç¼ºï¼› NTILE()ï¼šå°†åˆ†ç»„ç»“æœç­‰åˆ†ä¸ºæŒ‡å®šçš„ç»„æ•°ï¼Œè®¡ç®—æ¯ç»„çš„å¤§å°ï¼› LAG()ï¼šè¿”å›åˆ†ç»„å†…å‰ä¸€è¡Œçš„å€¼ï¼› LEAD()ï¼šè¿”å›åˆ†ç»„å†…åä¸€è¡Œçš„å€¼ï¼› FIRST_VALUE()ï¼šè¿”å›åˆ†ç»„å†…ç¬¬ä¸€ä¸ªå€¼ï¼› LAST_VALUE()ï¼šè¿”å›åˆ†ç»„å†…æœ€åä¸€ä¸ªå€¼ï¼› AVG()ã€SUM()ã€COUNT()ã€MIN()ã€MAX()ï¼šèšåˆå‡½æ•°ï¼Œå¯ä»¥é…åˆOVER()è¿›è¡Œçª—å£æ“ä½œã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLçš„çª—å£å‡½æ•°å’Œå…¶ä»–DBMSä¸­çš„çª—å£å‡½æ•°ç›¸æ¯”è¾ƒï¼Œå¯èƒ½ç•¥æœ‰ä¸åŒï¼Œéœ€è¦æ ¹æ®MySQLçš„æ–‡æ¡£è¿›è¡Œä½¿ç”¨ã€‚\n",
  "wordCount" : "3558",
  "inLanguage": "en",
  "datePublished": "2025-05-25T18:13:07Z",
  "dateModified": "2025-05-25T18:13:07Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://009965.xyz/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://009965.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://009965.xyz/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://009965.xyz/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://009965.xyz/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://009965.xyz/">Home</a>&nbsp;Â»&nbsp;<a href="https://009965.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      ç¬¬11ç«  ä¼ä¸šçœŸé¢˜
    </h1>
    <div class="post-meta"><span title='2025-05-25 18:13:07 +0000 UTC'>2025-05-25</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e9%a2%98" aria-label="ç¬¬ä¸€é¢˜">ç¬¬ä¸€é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e9%a2%98" aria-label="ç¬¬äºŒé¢˜">ç¬¬äºŒé¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%89%e9%a2%98" aria-label="ç¬¬ä¸‰é¢˜">ç¬¬ä¸‰é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%9b%9b%e9%a2%98" aria-label="ç¬¬å››é¢˜">ç¬¬å››é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%94%e9%a2%98" aria-label="ç¬¬äº”é¢˜">ç¬¬äº”é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ad%e9%a2%98" aria-label="ç¬¬å…­é¢˜">ç¬¬å…­é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%83%e9%a2%98" aria-label="ç¬¬ä¸ƒé¢˜">ç¬¬ä¸ƒé¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e5%85%ab%e9%a2%98" aria-label="ç¬¬å…«é¢˜">ç¬¬å…«é¢˜</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%b9%9d%e9%a2%98" aria-label="ç¬¬ä¹é¢˜">ç¬¬ä¹é¢˜</a><ul>
                        
                <li>
                    <a href="#mysql%e8%a1%8c%e8%bd%ac%e5%88%97" aria-label="MySQLè¡Œè½¬åˆ—">MySQLè¡Œè½¬åˆ—</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8case-whengroup-by%e5%ae%8c%e6%88%90" aria-label="ä½¿ç”¨case when&#43;group byå®Œæˆ">ä½¿ç”¨case when+group byå®Œæˆ</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%ac%ac%e5%8d%81%e9%a2%98" aria-label="ç¬¬åé¢˜">ç¬¬åé¢˜</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="ç¬¬ä¸€é¢˜">ç¬¬ä¸€é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸€é¢˜">#</a></h1>
<p><img alt="1.jpg" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/a35b2929326164a0253425a3937fc53f_MD5.jpg"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span># <span style="color:#f00">ç¬¬ä¸€æ­¥ï¼šæ‰¾å°äºç­‰äº</span><span style="color:#ff0;font-weight:bold">80</span><span style="color:#f00">åˆ†çš„å­¦å‘˜å§“å</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> <span style="color:#fff;font-weight:bold">distinct</span> name <span style="color:#fff;font-weight:bold">from</span> t_student <span style="color:#fff;font-weight:bold">where</span> fenshu &lt;= <span style="color:#ff0;font-weight:bold">80</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># <span style="color:#f00">ç¬¬äºŒæ­¥ï¼š</span><span style="color:#fff;font-weight:bold">not</span> <span style="color:#fff;font-weight:bold">in</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> <span style="color:#fff;font-weight:bold">distinct</span> name <span style="color:#fff;font-weight:bold">from</span> t_student <span style="color:#fff;font-weight:bold">where</span> name <span style="color:#fff;font-weight:bold">not</span> <span style="color:#fff;font-weight:bold">in</span>(<span style="color:#fff;font-weight:bold">select</span> <span style="color:#fff;font-weight:bold">distinct</span> name <span style="color:#fff;font-weight:bold">from</span> t_student <span style="color:#fff;font-weight:bold">where</span> fenshu &lt;= <span style="color:#ff0;font-weight:bold">80</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ç¬¬äºŒé¢˜">ç¬¬äºŒé¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äºŒé¢˜">#</a></h1>
<p><img alt="2.jpg" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/f39d08a7da0b47c0422830ece23d2905_MD5.jpg"><br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/4306072839d94dd70a69ae6007abda67_MD5.png"><br>
å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨çš„å…³è”å­—æ®µä¸ºç”³è¯·å•å·ã€‚<br>
1ï¼‰æŸ¥è¯¢èº«ä»½è¯å·ä¸º440401430103082çš„ç”³è¯·æ—¥æœŸã€‚<br>
2ï¼‰æŸ¥è¯¢åŒä¸€ä¸ªèº«ä»½è¯å·ç æœ‰ä¸¤æ¡ä»¥ä¸Šè®°å½•çš„èº«ä»½è¯å·ç åŠè®°å½•ä¸ªæ•°ã€‚<br>
3ï¼‰å°†èº«ä»½è¯å·ç ä¸º440401430103082çš„è®°å½•åœ¨ä¸¤ä¸ªè¡¨ä¸­çš„ç”³è¯·çŠ¶æ€å‡æ”¹ä¸º07ã€‚<br>
4ï¼‰åˆ é™¤g_cardapplydetailè¡¨ä¸­æ‰€æœ‰å§“æçš„è®°å½•ã€‚<br>
æ¨¡æ‹Ÿæ•°æ®ï¼šè€ƒè¯•åšè¿™ç§é¢˜ç›®æœ€é‡è¦çš„æ˜¯è¦å†·é™ä¸‹æ¥ï¼Œåªæœ‰é™ä¸‹æ¥SQLæ‰èƒ½å†™å¥½ã€‚è¦æ¨¡æ‹Ÿæ•°æ®ã€‚çœ‹åˆ°æ•°æ®SQLå°±å¥½å†™äº†ã€‚<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/caafe4cb8895f731e0b4eec07baeaf70_MD5.png"><br>
1ï¼‰æŸ¥è¯¢èº«ä»½è¯å·ä¸º440401430103082çš„ç”³è¯·æ—¥æœŸã€‚<br>
bigintè½¬dateï¼Œå¯ä»¥ä½¿ç”¨from_unixtimeå‡½æ•°ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> a.g_applydate <span style="color:#fff;font-weight:bold">from</span> g_cardapply a <span style="color:#fff;font-weight:bold">join</span> g_cardapplydetail b <span style="color:#fff;font-weight:bold">on</span> a.g_applyno = b.g_applyno <span style="color:#fff;font-weight:bold">where</span> b.g_idcard = <span style="color:#0ff;font-weight:bold">&#39;440401430103082&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>2ï¼‰æŸ¥è¯¢åŒä¸€ä¸ªèº«ä»½è¯å·ç æœ‰ä¸¤æ¡ä»¥ä¸Šè®°å½•çš„èº«ä»½è¯å·ç åŠè®°å½•ä¸ªæ•°ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> <span style="color:#fff;font-weight:bold">count</span>(g_idcard),g_idcard <span style="color:#fff;font-weight:bold">from</span> g_cardapplydetail <span style="color:#fff;font-weight:bold">group</span> <span style="color:#fff;font-weight:bold">by</span> g_idcard <span style="color:#fff;font-weight:bold">having</span> <span style="color:#fff;font-weight:bold">count</span>(g_idcard) &gt;= <span style="color:#ff0;font-weight:bold">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ï¼‰å°†èº«ä»½è¯å·ç ä¸º440401430103082çš„è®°å½•åœ¨ä¸¤ä¸ªè¡¨ä¸­çš„ç”³è¯·çŠ¶æ€å‡æ”¹ä¸º07ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">UPDATE</span> 
</span></span><span style="display:flex;"><span>	g_cardapply
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">JOIN</span> 
</span></span><span style="display:flex;"><span>	g_cardapplydetail 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">ON</span> 
</span></span><span style="display:flex;"><span>	g_cardapply.g_applyno = g_cardapplydetail.g_applyno 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">AND</span>
</span></span><span style="display:flex;"><span>	g_cardapplydetail.g_idcard = <span style="color:#0ff;font-weight:bold">&#39;440401430103082&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">SET</span> g_cardapply.g_state = <span style="color:#0ff;font-weight:bold">&#39;07&#39;</span>,
</span></span><span style="display:flex;"><span>g_cardapplydetail.g_state = <span style="color:#0ff;font-weight:bold">&#39;07&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>4ï¼‰åˆ é™¤g_cardapplydetailè¡¨ä¸­æ‰€æœ‰å§“æçš„è®°å½•ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">delete</span> t1,t2 <span style="color:#fff;font-weight:bold">from</span> g_cardapply t1 <span style="color:#fff;font-weight:bold">join</span> g_cardapplydetail t2 <span style="color:#fff;font-weight:bold">on</span> t1.g_applyno=t2.g_applyno <span style="color:#fff;font-weight:bold">where</span> t2.g_name <span style="color:#fff;font-weight:bold">like</span> <span style="color:#0ff;font-weight:bold">&#39;æ%&#39;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ç¬¬ä¸‰é¢˜">ç¬¬ä¸‰é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸‰é¢˜">#</a></h1>
<p><img alt="é¢è¯•é¢˜3.jpg" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/69f95d69d46496d2b3eaea31d03a4f5d_MD5.jpg"><br>
<img alt="é¢è¯•é¢˜5.jpg" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/6a329d8277865f769a60c1b2783e8053_MD5.jpg"><br>
è¡¨åï¼šstuscore<br>
1ï¼‰ç»Ÿè®¡å¦‚ä¸‹ï¼šè¯¾ç¨‹ä¸åŠæ ¼[0~59]çš„å¤šå°‘ä¸ªï¼Œè‰¯[60~80]å¤šå°‘ä¸ªï¼Œä¼˜[81-100]å¤šå°‘ä¸ªã€‚<br>
2ï¼‰è®¡ç®—ç§‘ç§‘åŠæ ¼çš„äººçš„å¹³å‡æˆç»©ã€‚</p>
<h1 id="ç¬¬å››é¢˜">ç¬¬å››é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å››é¢˜">#</a></h1>
<p><img alt="QQå›¾ç‰‡20151126234632.jpg" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/964134d52188b46b4adecc13e7a09a12_MD5.jpg"><br>
1ï¼‰è¯·ç”¨ä¸€æ¡SQLè¯­å¥æŸ¥è¯¢å‡ºä¸åŒéƒ¨é—¨ä¸­æ‹…ä»»â€œé’³å·¥â€çš„èŒå·¥å¹³å‡å·¥èµ„ã€‚<br>
2ï¼‰è¯·ç”¨ä¸€æ¡SQLè¯­å¥æŸ¥è¯¢å‡ºä¸åŒéƒ¨é—¨ä¸­æ‹…ä»»â€œé’³å·¥â€çš„èŒå·¥å¹³å‡å·¥èµ„é«˜äº2000çš„éƒ¨é—¨ã€‚</p>
<h1 id="ç¬¬äº”é¢˜">ç¬¬äº”é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬äº”é¢˜">#</a></h1>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/d2f161ea1e65511fda9d057a67dff7ab_MD5.png"><br>
Employeeæ˜¯é›‡å‘˜ä¿¡æ¯è¡¨ï¼š<br>
é›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name<br>
è¡—é“ï¼šstreet<br>
åŸå¸‚ï¼šcity<br>
Companyæ˜¯å…¬å¸ä¿¡æ¯è¡¨ï¼š<br>
å…¬å¸åç§°ï¼ˆä¸»é”®ï¼‰ï¼šcompany-name<br>
åŸå¸‚ï¼šcity<br>
Worksæ˜¯é›‡å‘˜å·¥ä½œä¿¡æ¯è¡¨ï¼š<br>
é›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name<br>
å…¬å¸åç§°ï¼šcompany-name<br>
å¹´è–ªï¼šsalary<br>
Managesæ˜¯é›‡å‘˜å·¥ä½œå…³ç³»è¡¨ï¼š<br>
é›‡å‘˜å§“åï¼ˆä¸»é”®ï¼‰ï¼šperson-name<br>
ç»ç†å§“åï¼šmanager-name<br>
æ¨¡æ‹Ÿæ•°æ®ï¼š<br>
å‘˜å·¥è¡¨ï¼šemployee<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/52095b7e1887131d00f72c03ec85f951_MD5.png"><br>
å…¬å¸è¡¨ï¼šcompany<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/eb72da689ffff625cd00b07b8a2a4321_MD5.png"><br>
é›‡å‘˜å·¥ä½œä¿¡æ¯è¡¨ï¼šWorks<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/dd52d22ec0b1ad090faa88b8b0615c26_MD5.png"><br>
é›‡å‘˜å·¥ä½œå…³ç³»è¡¨ï¼šManages<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/c09519a8c2219bea696dbb234390b2d2_MD5.png"></p>
<p>è¯·ç»™å‡ºä¸‹é¢æ¯ä¸€ä¸ªæŸ¥è¯¢çš„SQLè¯­å¥ï¼š</p>
<ol>
<li>æ‰¾å‡ºæ‰€æœ‰å±…ä½åœ°ä¸å·¥ä½œçš„å…¬å¸åœ¨åŒä¸€åŸå¸‚çš„å‘˜å·¥çš„å§“åã€‚</li>
<li>æ‰¾å‡ºæ¯”Small Bank Corporationçš„æ‰€æœ‰å‘˜å·¥æ”¶å…¥éƒ½é«˜çš„æ‰€æœ‰å‘˜å·¥çš„å§“åã€‚</li>
<li>æ‰¾å‡ºå¹³å‡å¹´è–ªåœ¨10000ç¾å…ƒä»¥ä¸Šçš„å…¬å¸åŠå…¶å¹³å‡å¹´è–ªã€‚</li>
</ol>
<h1 id="ç¬¬å…­é¢˜">ç¬¬å…­é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…­é¢˜">#</a></h1>
<p><img alt="IMG_1621.JPG" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/1dfd6300143c0a44c678ec8d38a7cda4_MD5.jpg"><br>
å®¢æˆ·è¡¨Client<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/4ea71d2ed8b61cdbe0205a379f2e7d3c_MD5.png"><br>
è®¢å•è¡¨Order<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/ecc94e914b1b600ef8fa27c9a6c130a2_MD5.png"><br>
å®¢æˆ·è®¢å•è¡¨ClientOrder<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/0009283c13e18198e7c375fc048f8025_MD5.png"><br>
å›¾ä¹¦è¡¨Book<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/9d8bff6880b2086181311de89bd71af6_MD5.png"></p>
<ol>
<li>è¯·å†™å‡ºä¸€æ¡SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæ¯ä¸ªå®¢æˆ·çš„æ‰€æœ‰è®¢å•å¹¶æŒ‰ç…§åœ°å€æ’åºï¼Œè¦æ±‚è¾“å‡ºæ ¼å¼ä¸ºï¼šaddress client_name phone order_id</li>
<li>è¯·å†™å‡ºä¸€æ¡SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæ¯ä¸ªå®¢æˆ·è®¢è´­çš„å›¾ä¹¦æ€»ä»·ã€‚è¦æ±‚è¾“å‡ºæ ¼å¼ä¸ºï¼šclient_name total_price</li>
<li>å¦‚æœè¦æ±‚æ¯ä¸ªè®¢å•å¯ä»¥åŒ…å«å¤šç§å›¾ä¹¦ï¼Œåº”è¯¥å¦‚ä½•ä¿®æ”¹Orderè¡¨çš„ä¸»é”®ï¼Ÿä¸ºäº†ä¿è¯æ¯ä¸ªè®¢å•åªè¢«ä¸€ä¸ªå®¢æˆ·æ‹¥æœ‰ï¼Œåº”è¯¥åœ¨ClientOrderè¡¨ä¸Šå¢åŠ æ€æ ·çš„çº¦æŸï¼Ÿ</li>
</ol>
<h1 id="ç¬¬ä¸ƒé¢˜">ç¬¬ä¸ƒé¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¸ƒé¢˜">#</a></h1>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/a199971462f4fea47de4157f4289bc13_MD5.png"><br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/9878a47f3b22b8fc58afebbede24ef85_MD5.png"><br>
æ¨¡æ‹Ÿæ•°æ®ï¼š<br>
å­¦ç”Ÿè¡¨ï¼šstudent<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/77fa6edeb7d465751215e0353b4c0e1d_MD5.png"><br>
è¯¾ç¨‹è¡¨ï¼šcourse<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/8060bbb0bbc9173756461109f014ed52_MD5.png"><br>
æˆç»©è¡¨ï¼šsc<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/1a64db81244ff7b189eace6f1d3b61b7_MD5.png"><br>
æ•™å¸ˆè¡¨ï¼šteacher<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/47784826117fc950b94b1e6bcc105f74_MD5.png"></p>
<ol>
<li>æŸ¥è¯¢1å·è¯¾æ¯”2å·è¯¾æˆç»©é«˜çš„æ‰€æœ‰å­¦ç”Ÿå­¦å·ã€‚</li>
<li>æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº60åˆ†çš„å­¦å·å’Œå¹³å‡æˆç»©ã€‚</li>
<li>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå­¦å·ã€å§“åã€é€‰è¯¾æ•°ã€æ€»æˆç»©ã€‚</li>
<li>æŸ¥è¯¢å§“â€œæâ€çš„è€å¸ˆçš„ä¸ªæ•°ã€‚</li>
<li>æŸ¥è¯¢æ²¡å­¦è¿‡â€œå¶å¹³â€è€å¸ˆè¯¾çš„å­¦å·ã€å§“åã€‚</li>
</ol>
<h1 id="ç¬¬å…«é¢˜">ç¬¬å…«é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬å…«é¢˜">#</a></h1>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/e3307622dabf060e041d5ba249ea4a27_MD5.png"><br>
å­¦ç”Ÿè¡¨ï¼šstudent<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/ba12b5f37c07975d45eb29bd1f38f28d_MD5.png"><br>
è¯¾ç¨‹è¡¨ï¼šclass<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/f1f96c0ff26ea45f1d2e9b7a793d9733_MD5.png"><br>
é€‰è¯¾è¡¨ï¼šchosen_class<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/f2946f877a6d0cda0d0a51d4ac192513_MD5.png"></p>
<ol>
<li>æ²¡æœ‰é€‰ä¿®è¯¾ç¨‹ç¼–å·ä¸ºC1çš„å­¦ç”Ÿå§“å</li>
<li>åˆ—å‡ºæ¯é—¨è¯¾ç¨‹åç§°å’Œå¹³å‡æˆç»©ï¼Œå¹¶æŒ‰ç…§æˆç»©æ’åº</li>
<li>é€‰äº†2é—¨è¯¾ä»¥ä¸Šçš„å­¦ç”Ÿå§“åã€‚</li>
</ol>
<h1 id="ç¬¬ä¹é¢˜">ç¬¬ä¹é¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬ä¹é¢˜">#</a></h1>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/edfa4a2924edc2698226b90995798987_MD5.png"><br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/363daa94a66a8f2e829fa97bb8545d15_MD5.png"><br>
è¦è½¬æ¢æˆï¼š<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/3cf3dd6871391d4fe29a9e5739ed7f8c_MD5.png"></p>
<h2 id="mysqlè¡Œè½¬åˆ—">MySQLè¡Œè½¬åˆ—<a hidden class="anchor" aria-hidden="true" href="#mysqlè¡Œè½¬åˆ—">#</a></h2>
<p>MySQLè¡Œè½¬åˆ—åˆå«åš<strong>æ•°æ®é€è§†</strong>ã€‚ä»€ä¹ˆå«åšè¡Œè½¬åˆ—ï¼Ÿå°†åŸæœ¬æ¨ªå‘æ’åˆ—çš„æ•°æ®é€è§†æˆçºµå‘æ’åˆ—çš„æ•°æ®ï¼Œè¿›è€Œè¿›è¡Œè®¡ç®—ã€åˆ†æã€å±•ç¤ºç­‰æ“ä½œã€‚</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªå­¦ç”Ÿé€‰è¯¾æˆç»©è¡¨ï¼ŒåŒ…å«å­¦ç”Ÿå§“åï¼ˆstu_nameï¼‰ã€è¯¾ç¨‹åç§°ï¼ˆcourse_nameï¼‰å’Œåˆ†æ•°ï¼ˆscoreï¼‰ä¸‰ä¸ªå­—æ®µã€‚åœ¨åŸå§‹æ•°æ®ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿåœ¨ä¸åŒçš„è¯¾ç¨‹ä¸­éƒ½æœ‰è‡ªå·±çš„å¾—åˆ†æƒ…å†µï¼Œæ•°æ®æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>stu_name</th>
<th>course_name</th>
<th>score</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¼ ä¸‰</td>
<td>æ•°å­¦</td>
<td>80</td>
</tr>
<tr>
<td>å¼ ä¸‰</td>
<td>è‹±è¯­</td>
<td>85</td>
</tr>
<tr>
<td>å¼ ä¸‰</td>
<td>å†å²</td>
<td>90</td>
</tr>
<tr>
<td>æå››</td>
<td>æ•°å­¦</td>
<td>75</td>
</tr>
<tr>
<td>æå››</td>
<td>è‹±è¯­</td>
<td>92</td>
</tr>
<tr>
<td>æå››</td>
<td>å†å²</td>
<td>85</td>
</tr>
<tr>
<td>ç‹äº”</td>
<td>æ•°å­¦</td>
<td>88</td>
</tr>
<tr>
<td>ç‹äº”</td>
<td>è‹±è¯­</td>
<td>90</td>
</tr>
<tr>
<td>ç‹äº”</td>
<td>å†å²</td>
<td>95</td>
</tr>
</tbody>
</table>
<p>å¯ä»¥ä½¿ç”¨è¡Œè½¬åˆ—æ“ä½œï¼Œå°†æ¯ä¸ªå­¦ç”Ÿåœ¨ä¸åŒè¯¾ç¨‹ä¸­çš„åˆ†æ•°æ‹†åˆ†æˆå¤šæ¡è®°å½•ï¼Œæ¯æ¡è®°å½•åŒ…å«ä¸€ä¸ªè¯¾ç¨‹ä»¥åŠå¯¹åº”çš„åˆ†æ•°ã€‚è½¬æ¢åçš„æ•°æ®æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>stu_name</th>
<th>æ•°å­¦</th>
<th>è‹±è¯­</th>
<th>å†å²</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¼ ä¸‰</td>
<td>80</td>
<td>85</td>
<td>90</td>
</tr>
<tr>
<td>æå››</td>
<td>75</td>
<td>92</td>
<td>85</td>
</tr>
<tr>
<td>ç‹äº”</td>
<td>88</td>
<td>90</td>
<td>95</td>
</tr>
</tbody>
</table>
<p>ä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¡Œè½¬åˆ—ä¹‹åï¼Œæ¯ä¸€è¡Œè®°å½•éƒ½è¡¨ç¤ºäº†ä¸€ä¸ªå­¦ç”Ÿåœ¨ä¸åŒè¯¾ç¨‹ä¸­çš„åˆ†æ•°ã€‚è¿™æ ·æ›´ä¾¿äºå¯¹ä¸åŒç§‘ç›®çš„åˆ†æ•°è¿›è¡Œæ¯”è¾ƒã€è®¡ç®—å¹³å‡å€¼ç­‰åˆ†ææ“ä½œã€‚</p>
<h3 id="ä½¿ç”¨case-whengroup-byå®Œæˆ">ä½¿ç”¨case when+group byå®Œæˆ<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨case-whengroup-byå®Œæˆ">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">drop</span> <span style="color:#fff;font-weight:bold">table</span> <span style="color:#fff;font-weight:bold">if</span> <span style="color:#fff;font-weight:bold">exists</span> t_student;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">create</span> <span style="color:#fff;font-weight:bold">table</span> t_student(
</span></span><span style="display:flex;"><span>  stu_name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">10</span>),
</span></span><span style="display:flex;"><span>  course_name <span style="color:#fff;font-weight:bold">varchar</span>(<span style="color:#ff0;font-weight:bold">10</span>),
</span></span><span style="display:flex;"><span>  score <span style="color:#fff;font-weight:bold">int</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;å¼ ä¸‰&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;æ•°å­¦&#39;</span>, <span style="color:#ff0;font-weight:bold">80</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;å¼ ä¸‰&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;è‹±è¯­&#39;</span>, <span style="color:#ff0;font-weight:bold">85</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;å¼ ä¸‰&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;å†å²&#39;</span>, <span style="color:#ff0;font-weight:bold">90</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;æå››&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;æ•°å­¦&#39;</span>, <span style="color:#ff0;font-weight:bold">75</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;æå››&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;è‹±è¯­&#39;</span>, <span style="color:#ff0;font-weight:bold">92</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;æå››&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;å†å²&#39;</span>, <span style="color:#ff0;font-weight:bold">85</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;ç‹äº”&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;æ•°å­¦&#39;</span>, <span style="color:#ff0;font-weight:bold">88</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;ç‹äº”&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;è‹±è¯­&#39;</span>, <span style="color:#ff0;font-weight:bold">90</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">insert</span> <span style="color:#fff;font-weight:bold">into</span> t_student(stu_name, course_name, score) <span style="color:#fff;font-weight:bold">values</span>(<span style="color:#0ff;font-weight:bold">&#39;ç‹äº”&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;å†å²&#39;</span>, <span style="color:#ff0;font-weight:bold">95</span>);
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">commit</span>;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> * <span style="color:#fff;font-weight:bold">from</span> t_student;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/4ee71114a632694c5b18a4b515f61e1c_MD5.png"><br>
è¡Œè½¬åˆ—åçš„æ•ˆæœæ˜¯ï¼š<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/d2fef5fe39e62b03c3ab09214ff9ff8b_MD5.png"><br>
sqlå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span>
</span></span><span style="display:flex;"><span>	stu_name,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> course_name <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;æ•°å­¦&#39;</span> <span style="color:#fff;font-weight:bold">then</span> score <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;æ•°å­¦&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> course_name <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;è‹±è¯­&#39;</span> <span style="color:#fff;font-weight:bold">then</span> score <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;è‹±è¯­&#39;</span>, 
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> course_name <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;å†å²&#39;</span> <span style="color:#fff;font-weight:bold">then</span> score <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;å†å²&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>	t_student
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">group</span> <span style="color:#fff;font-weight:bold">by</span> 
</span></span><span style="display:flex;"><span>	stu_name;
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä»¥ä¸Šå†…å®¹çš„å­¦ä¹ ï¼Œæˆ‘ä»¬è¿™ä¸ªé¢è¯•é¢˜å°±è¿åˆƒè€Œè§£äº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span>
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">year</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> season <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸€å­£åº¦&#39;</span> <span style="color:#fff;font-weight:bold">then</span> <span style="color:#fff;font-weight:bold">count</span> <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸€å­£åº¦&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> season <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;äºŒå­£åº¦&#39;</span> <span style="color:#fff;font-weight:bold">then</span> <span style="color:#fff;font-weight:bold">count</span> <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;äºŒå­£åº¦&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> season <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸‰å­£åº¦&#39;</span> <span style="color:#fff;font-weight:bold">then</span> <span style="color:#fff;font-weight:bold">count</span> <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;ä¸‰å­£åº¦&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">max</span>(<span style="color:#fff;font-weight:bold">case</span> season <span style="color:#fff;font-weight:bold">when</span> <span style="color:#0ff;font-weight:bold">&#39;å››å­£åº¦&#39;</span> <span style="color:#fff;font-weight:bold">then</span> <span style="color:#fff;font-weight:bold">count</span> <span style="color:#fff;font-weight:bold">else</span> <span style="color:#ff0;font-weight:bold">0</span> <span style="color:#fff;font-weight:bold">end</span>) <span style="color:#fff;font-weight:bold">as</span> <span style="color:#0ff;font-weight:bold">&#39;å››å­£åº¦&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>	t_temp 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">group</span> <span style="color:#fff;font-weight:bold">by</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">year</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ç¬¬åé¢˜">ç¬¬åé¢˜<a hidden class="anchor" aria-hidden="true" href="#ç¬¬åé¢˜">#</a></h1>
<p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/8a7911d571487c3bbfed8664398b04f0_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> 
</span></span><span style="display:flex;"><span>	x.a <span style="color:#f00">å¼€å§‹æ•°å­—</span>, y.a <span style="color:#f00">ç»“æŸæ•°å­—</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>	(<span style="color:#fff;font-weight:bold">select</span> m.a,row_number() over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> m.a) <span style="color:#fff;font-weight:bold">as</span> rownum <span style="color:#fff;font-weight:bold">from</span> (<span style="color:#fff;font-weight:bold">select</span> a, lag(a) over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> a <span style="color:#fff;font-weight:bold">asc</span>) <span style="color:#fff;font-weight:bold">as</span> pre_a <span style="color:#fff;font-weight:bold">from</span> t) m <span style="color:#fff;font-weight:bold">where</span> m.a - m.pre_a != <span style="color:#ff0;font-weight:bold">1</span> <span style="color:#fff;font-weight:bold">or</span> m.pre_a <span style="color:#fff;font-weight:bold">is</span> <span style="color:#fff;font-weight:bold">null</span>) x 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">join</span> 
</span></span><span style="display:flex;"><span>	(<span style="color:#fff;font-weight:bold">select</span> n.a,row_number() over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> n.a) <span style="color:#fff;font-weight:bold">as</span> rownum <span style="color:#fff;font-weight:bold">from</span> (<span style="color:#fff;font-weight:bold">select</span> a, lead(a) over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> a <span style="color:#fff;font-weight:bold">asc</span>) <span style="color:#fff;font-weight:bold">as</span> next_a <span style="color:#fff;font-weight:bold">from</span> t) n <span style="color:#fff;font-weight:bold">where</span> n.next_a - n.a != <span style="color:#ff0;font-weight:bold">1</span> <span style="color:#fff;font-weight:bold">or</span> n.next_a <span style="color:#fff;font-weight:bold">is</span> <span style="color:#fff;font-weight:bold">null</span>) y 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">on</span> 
</span></span><span style="display:flex;"><span>	x.rownum = y.rownum;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§£ç­”ä¸Šé¢è¿™ä¸ªé¢˜ç›®éœ€è¦å…·å¤‡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li>lagå‡½æ•°</li>
<li>leadå‡½æ•°</li>
<li>row_numberå‡½æ•°</li>
</ul>
<p><strong>lagå‡½æ•°</strong>ï¼šè·å–å½“å‰è¡Œçš„ä¸Šä¸€è¡Œæ•°æ®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> empno,ename,sal,(lag(sal) over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> sal <span style="color:#fff;font-weight:bold">asc</span>)) <span style="color:#fff;font-weight:bold">as</span> pre_sal <span style="color:#fff;font-weight:bold">from</span> emp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/176a227726556db92cef569a0624e543_MD5.png"><br>
æ³¨æ„ï¼šoverå‡½æ•°ç”¨æ¥æŒ‡å®šâ€œåœ¨&hellip;..èŒƒå›´å†…â€ï¼Œé€šå¸¸å’Œlagå‡½æ•°è”ç”¨ã€‚</p>
<p><strong>leadå‡½æ•°</strong>ï¼šè·å–å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œæ•°æ®</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> empno,ename,sal,(lead(sal) over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> sal <span style="color:#fff;font-weight:bold">asc</span>)) <span style="color:#fff;font-weight:bold">as</span> next_sal <span style="color:#fff;font-weight:bold">from</span> emp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/4a3c6f42e745c0a8efdd5aeea6fa872d_MD5.png"><br>
æ³¨æ„ï¼šoverå‡½æ•°ç”¨æ¥æŒ‡å®šâ€œåœ¨&hellip;..èŒƒå›´å†…â€ï¼Œé€šå¸¸å’Œleadå‡½æ•°è”ç”¨ã€‚</p>
<p><strong>row_numberå‡½æ•°</strong>ï¼šå¯ä»¥ä¸ºæŸ¥è¯¢ç»“æœé›†ç”Ÿæˆè¡Œå·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> empno,ename,sal,row_number() over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> sal) <span style="color:#fff;font-weight:bold">as</span> rownum <span style="color:#fff;font-weight:bold">from</span> emp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/9462ee87e9045f104c6fa0d5b31e1a3c_MD5.png"></p>
<p>åˆ©ç”¨row_numberå‡½æ•°ï¼Œå°†ä¸¤ä¸ªä¸ç›¸å…³çš„åˆ—æ‹¼æ¥åœ¨ä¸€èµ·æ˜¾ç¤ºï¼š<br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/95b7136b6b04acce1a5a7d37e0ffb859_MD5.png"><br>
<img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/945a9fffb5e43fec5af8803f4979f189_MD5.png"></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> 
</span></span><span style="display:flex;"><span>	x.a, y.b 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>	(<span style="color:#fff;font-weight:bold">select</span> a,row_number() over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> a) <span style="color:#fff;font-weight:bold">as</span> rownum <span style="color:#fff;font-weight:bold">from</span> t1) x 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">join</span> 
</span></span><span style="display:flex;"><span>	(<span style="color:#fff;font-weight:bold">select</span> b,row_number() over(<span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> b) <span style="color:#fff;font-weight:bold">as</span> rownum <span style="color:#fff;font-weight:bold">from</span> t2) y 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">on</span> 
</span></span><span style="display:flex;"><span>	x.rownum = y.rownum;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/de542e219b47bc0f0c4ada6333df7748_MD5.png"></p>
<p>CTEè¯­æ³•ï¼ˆå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼‰ï¼šCommon Table Expressionã€‚åˆ›å»ºä¸´æ—¶è¡¨çš„ä¸€ç§è¯­æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#007f7f">-- æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨å¹³å‡å·¥èµ„çš„å·¥èµ„ç­‰çº§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">-- ç¬¬ä¸€ç§å†™æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">select</span> 
</span></span><span style="display:flex;"><span>	t.deptno,t.avgsal,s.grade 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> 
</span></span><span style="display:flex;"><span>	(<span style="color:#fff;font-weight:bold">select</span> deptno,<span style="color:#fff;font-weight:bold">avg</span>(sal) <span style="color:#fff;font-weight:bold">as</span> avgsal <span style="color:#fff;font-weight:bold">from</span> emp <span style="color:#fff;font-weight:bold">group</span> <span style="color:#fff;font-weight:bold">by</span> deptno) t 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">join</span> 
</span></span><span style="display:flex;"><span>	salgrade s 
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">on</span> 
</span></span><span style="display:flex;"><span>	t.avgsal <span style="color:#fff;font-weight:bold">between</span> s.losal <span style="color:#fff;font-weight:bold">and</span> s.hisal;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">-- ç¬¬äºŒç§å†™æ³•ï¼šä½¿ç”¨CTEè¯­æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">with</span> cte_exp <span style="color:#fff;font-weight:bold">as</span>(<span style="color:#fff;font-weight:bold">select</span> deptno,<span style="color:#fff;font-weight:bold">avg</span>(sal) <span style="color:#fff;font-weight:bold">as</span> avgsal <span style="color:#fff;font-weight:bold">from</span> emp <span style="color:#fff;font-weight:bold">group</span> <span style="color:#fff;font-weight:bold">by</span> deptno)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> 
</span></span><span style="display:flex;"><span>	cte_exp.deptno,cte_exp.avgsal,s.grade
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span>
</span></span><span style="display:flex;"><span>	cte_exp
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">join</span>
</span></span><span style="display:flex;"><span>	salgrade s
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">on</span>
</span></span><span style="display:flex;"><span>	cte_exp.avgsal <span style="color:#fff;font-weight:bold">between</span> s.losal <span style="color:#fff;font-weight:bold">and</span> s.hisal;
</span></span></code></pre></td></tr></table>
</div>
</div><p>partition byï¼šå°†æ•°æ®åˆ†åŒºï¼Œå’Œgroup byåŒºåˆ«æ˜¯ï¼šgroup byæ˜¯åˆ†ç»„ï¼Œç„¶åå’Œåˆ†ç»„å‡½æ•°ä¸€èµ·ç”¨ã€‚partition byåˆ†åŒºä¸éœ€è¦å’Œåˆ†ç»„å‡½æ•°ä¸€èµ·ä½¿ç”¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> deptno, empno,ename,sal,(lag(sal) over(partition <span style="color:#fff;font-weight:bold">by</span> deptno <span style="color:#fff;font-weight:bold">order</span> <span style="color:#fff;font-weight:bold">by</span> sal <span style="color:#fff;font-weight:bold">asc</span>)) <span style="color:#fff;font-weight:bold">as</span> pre_sal <span style="color:#fff;font-weight:bold">from</span> emp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img alt="image.png" loading="lazy" src="/posts/mysql/%E7%AC%AC11%E7%AB%A0-%E4%BC%81%E4%B8%9A%E7%9C%9F%E9%A2%98/f60e8cc3569c6fabc64969c716d08469_MD5.png"></p>
<p>MySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ”¯æŒå¦‚ä¸‹å¸¸ç”¨çš„çª—å£å‡½æ•°ï¼š</p>
<ol>
<li>ROW_NUMBER()ï¼šæ’åå‡½æ•°ï¼Œè¿”å›å½“å‰ç»“æœé›†ä¸­æ¯ä¸ªè¡Œçš„è¡Œå·ï¼›</li>
<li>RANK()ï¼šæ’åå‡½æ•°ï¼Œè®¡ç®—åˆ†ç»„ç»“æœä¸­çš„æ’åï¼Œç›¸åŒçš„è¡Œæ’åç›¸åŒä¸”æ²¡æœ‰ç©ºç¼ºï¼Œä¸‹ä¸€ä¸ªè¡Œæ’åè·³è¿‡ç©ºç¼ºï¼›</li>
<li>DENSE_RANK()ï¼šæ’åå‡½æ•°ï¼Œè®¡ç®—åˆ†ç»„ç»“æœä¸­çš„æ’åï¼Œç›¸åŒçš„è¡Œæ’åç›¸åŒï¼Œæ’åè¿ç»­ï¼Œæ²¡æœ‰ç©ºç¼ºï¼›</li>
<li>NTILE()ï¼šå°†åˆ†ç»„ç»“æœç­‰åˆ†ä¸ºæŒ‡å®šçš„ç»„æ•°ï¼Œè®¡ç®—æ¯ç»„çš„å¤§å°ï¼›</li>
<li>LAG()ï¼šè¿”å›åˆ†ç»„å†…å‰ä¸€è¡Œçš„å€¼ï¼›</li>
<li>LEAD()ï¼šè¿”å›åˆ†ç»„å†…åä¸€è¡Œçš„å€¼ï¼›</li>
<li>FIRST_VALUE()ï¼šè¿”å›åˆ†ç»„å†…ç¬¬ä¸€ä¸ªå€¼ï¼›</li>
<li>LAST_VALUE()ï¼šè¿”å›åˆ†ç»„å†…æœ€åä¸€ä¸ªå€¼ï¼›</li>
<li>AVG()ã€SUM()ã€COUNT()ã€MIN()ã€MAX()ï¼šèšåˆå‡½æ•°ï¼Œå¯ä»¥é…åˆOVER()è¿›è¡Œçª—å£æ“ä½œã€‚</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLçš„çª—å£å‡½æ•°å’Œå…¶ä»–DBMSä¸­çš„çª—å£å‡½æ•°ç›¸æ¯”è¾ƒï¼Œå¯èƒ½ç•¥æœ‰ä¸åŒï¼Œéœ€è¦æ ¹æ®MySQLçš„æ–‡æ¡£è¿›è¡Œä½¿ç”¨ã€‚</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://009965.xyz/tags/mysql/">Mysql</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://009965.xyz/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
