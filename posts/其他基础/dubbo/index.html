<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>dubbo | Wjy&#39;s Blog</title>
<meta name="keywords" content="å…¶ä»–åŸºç¡€">
<meta name="description" content="dubboæ˜¯ä»€ä¹ˆ
æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚
ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ

">
<meta name="author" content="">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/dubbo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="dubbo" />
<meta property="og:description" content="dubboæ˜¯ä»€ä¹ˆ
æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚
ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/dubbo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-17T11:05:53+00:00" />
<meta property="article:modified_time" content="2019-04-17T11:05:53+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="dubbo"/>
<meta name="twitter:description" content="dubboæ˜¯ä»€ä¹ˆ
æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚
ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ

"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "dubbo",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/dubbo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "dubbo",
  "name": "dubbo",
  "description": "dubboæ˜¯ä»€ä¹ˆ æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚ ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ ",
  "keywords": [
    "å…¶ä»–åŸºç¡€"
  ],
  "articleBody": "dubboæ˜¯ä»€ä¹ˆ æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚ ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ ä»¥å‰æ˜¯å•æœåŠ¡åº”ç”¨ï¼Œè°ƒç”¨æ–¹æ³•åœ¨æœåŠ¡å†…ç›´æ¥è°ƒç”¨å³å¯ã€‚ ç°åœ¨æ‹†åˆ†æˆå¤šä¸ªæœåŠ¡ï¼Œcontrollerå’Œserviceä¸åœ¨ä¸€ä¸ªæœåŠ¡é‡Œäº†ï¼Œcontrollerä¸èƒ½ç›´æ¥è°ƒç”¨serviceçš„æ–¹æ³•äº†ã€‚é‚£åªèƒ½è¿œç¨‹è°ƒç”¨äº†ï¼Œdubboå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nä½¿ç”¨Dubboçš„å¥½å¤„\né€æ˜åŒ–çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•ï¼Œåªéœ€ç®€å•é…ç½®ï¼Œæ²¡æœ‰ä»»ä½•APIä¾µå…¥ã€‚ è´Ÿè½½å‡è¡¡åŠå®¹é”™æœºåˆ¶ï¼Œå¯åœ¨å†…ç½‘æ›¿ä»£F5ç­‰ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼Œé™ä½æˆæœ¬ï¼Œå‡å°‘å•ç‚¹ã€‚ æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°ï¼Œä¸å†éœ€è¦å†™æ­»æœåŠ¡æä¾›æ–¹åœ°å€ï¼Œæ³¨å†Œä¸­å¿ƒåŸºäºæ¥å£åæŸ¥è¯¢æœåŠ¡æä¾›è€…çš„IPåœ°å€ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¹³æ»‘æ·»åŠ æˆ–åˆ é™¤æœåŠ¡æä¾›è€…ã€‚ Dubboé‡‡ç”¨å…¨Springé…ç½®æ–¹å¼ï¼Œé€æ˜åŒ–æ¥å…¥åº”ç”¨ï¼Œå¯¹åº”ç”¨æ²¡æœ‰ä»»ä½•APIä¾µå…¥ï¼Œåªéœ€ç”¨SpringåŠ è½½Dubboçš„é…ç½®å³å¯ï¼ŒDubboåŸºäºSpringçš„Schemaæ‰©å±•è¿›è¡ŒåŠ è½½ã€‚ è§’è‰²è¯´æ˜ï¼š Providerï¼ˆç”Ÿäº§è€…ï¼‰: æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ã€‚ Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰: è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ã€‚ å¦‚å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºweb1234éœ€è¦è°ƒç”¨service1234çš„æœåŠ¡ï¼Œæ‰€ä»¥web1234æ˜¯æ¶ˆè´¹è€…ï¼Œservice1234æ˜¯ç”Ÿäº§è€…ã€‚ å¦‚æœæŒ‰ç…§ä¸Šé¢çš„é€»è¾‘ï¼Œæ¶ˆè´¹è€…è°ƒç”¨ç”Ÿäº§è€…çš„æœåŠ¡ï¼Œé‚£æ˜¯å¦åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼š å¤ªä¹±äº†ï¼Œ è‚¯å®šä¸æ˜¯è¿™æ ·ã€‚\næ­¤æ—¶å¼•å‡ºæ³¨å†Œä¸­å¿ƒçš„æ¦‚å¿µï¼š æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€‚ æ³¨å†Œä¸­å¿ƒæœ‰å¾ˆå¤šï¼Œç°åœ¨åªç®€å•è¯´zookeeperã€‚ zookeeperæ˜¯ç”¨äºåˆ†å¸ƒå¼ä¸­ä¸€è‡´æ€§å¤„ç†çš„æ¡†æ¶ã€‚ ç®€å•çš„è®²ï¼Œzookeeperå°±æ˜¯ä¸ªä¸­ä»‹ï¼Œå–æ¥¼çš„ï¼ˆç”Ÿäº§è€…ï¼‰æŠŠæ¥¼ç›˜ä¿¡æ¯æ”¾åœ¨ä¸­ä»‹ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰é‚£é‡Œï¼Œæƒ³ä¹°æ¥¼çš„ï¼ˆæ¶ˆè´¹è€…ï¼‰å»ä¸­ä»‹é‚£é‡Œè·å¾—æ¥¼ç›˜èµ„æºæ¸…å•ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬çš„å›¾å˜æˆäº†è¿™æ ·ï¼š Monitorï¼šç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡è°ƒå’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒã€‚ Containerï¼šæœåŠ¡è¿è¡Œçš„å®¹å™¨ã€‚\næ€»ä½“ç»“æ„å¦‚ä¸‹ï¼ˆå®˜æ–¹çš„å›¾ï¼‰ï¼š ä¸Šå›¾çš„è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š 0. æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚\næœåŠ¡æä¾›è€…ï¼ˆç”Ÿäº§è€…ï¼‰åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚ æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚ æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚ æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚ æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚ dubboå®˜ç½‘\ndubboæ§åˆ¶å° dubbo adminå®˜ç½‘ä»‹ç» githubåœ°å€\nä¸‹è½½ä»£ç :git clone https://github.com/apache/dubbo-admin.git åœ¨dubbo-admin-server/src/main/resources/application.propertiesä¸­æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€ æ„å»ºmvn clean package å¯åŠ¨ mvn --projects dubbo-admin-server spring-boot:run æˆ– cd dubbo-admin-distribution/target; java -jar dubbo-admin-0.1.jar è®¿é—® http://localhost:8080 ä¿®æ”¹è®¿é—®ç«¯å£ï¼š vim dubbo-admin\\dubbo-admin-server\\src\\main\\resources\\application.properties åœ¨ä»»æ„ä½ç½®æ·»åŠ ï¼š server.port=9000\nç›®å‰æ–°ç‰ˆbuddo-adminè¿˜æ²¡æœ‰ç”¨æˆ·åå¯†ç è®¿é—®åŠŸèƒ½ã€‚\\\nè€ç‰ˆæ§åˆ¶å° github å°†é¡¹ç›®æ•´ä½“ä¸‹è½½ï¼Œè§£å‹å¹¶è¿›å…¥åˆ°dubbo-admin æ‰“åŒ…mvn package -Dmaven.skip.test=true è¿›å…¥targetï¼Œæ‰¾åˆ°æ‰“å¥½çš„waråŒ…ï¼Œå¤åˆ¶åˆ°tomcatçš„webappsä¸‹ï¼Œå¹¶æ›´åä¸ºROOT.war å¯åŠ¨tomcatï¼Œå¯åŠ¨å®Œäº†å†åœæ­¢(è¿™ä¸€æ­¥æ˜¯è¦é€šè¿‡tomcatå°†waråŒ…è§£å¼€ã€‚) è¿›å…¥åˆ°webapps\\dubbo-admin-2.6.0\\WEB-INFï¼Œä¿®æ”¹dubbo.properties\n1 2 3 dubbo.registry.address=zookeeper://127.0.0.1:2181 dubbo.admin.root.password=root dubbo.admin.guest.password=guest ä¿®æ”¹ä½ çš„zookeeperåœ°å€ã€‚ ä¿®æ”¹ä½ çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œéœ€è¦æ³¨æ„ç”¨æˆ·ååœ¨=å·å‰è¾¹ï¼Œç­‰å·åè¾¹çš„æ˜¯å¯†ç ã€‚ ç„¶åå†å¯åŠ¨tomcatï¼Œè®¿é—®å³å¯ã€‚\nå‚è€ƒ\nè¶…æ—¶ä¸é‡è¯• åœ¨providerå’Œconsumerç«¯ï¼Œéƒ½æä¾›äº†è¶…æ—¶(timeout)å’Œé‡è¯•(retries)çš„å‚æ•°é…ç½®ã€‚ timeouté»˜è®¤å€¼ä¸º1000ï¼Œå•ä½æ¯«ç§’ï¼Œè¡¨ç¤ºè¶…æ—¶æ—¶é—´æ˜¯1ç§’ï¼› retriesé»˜è®¤å€¼ä¸º2ï¼Œè¡¨ç¤ºé‡è¯•2æ¬¡ï¼ŒåŠ ä¸Šæœ¬èº«è°ƒç”¨1æ¬¡ï¼Œä¸€å…±æœ‰3æ¬¡è°ƒç”¨ã€‚ åœ¨org.apache.dubbo.common.Constantsç±»å¯ä»¥æ‰¾åˆ°ï¼š public static final int DEFAULT_TIMEOUT = 1000; public static final int DEFAULT_RETRIES = 2;\nconsumerç«¯é…ç½®ä¼˜å…ˆäºproviderç«¯é…ç½®ã€‚\næ€»ç»“ï¼š case 1ï¼š é»˜è®¤æƒ…å†µï¼Œproviderå’Œconsumerç«¯çš„timeoutå’Œretireså‡ä¸è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼ åœ¨ä¸è®¾ç½®timeoutå’Œretriesçš„æ—¶å€™ï¼Œå¦‚æœproviderç«¯æ¥å£ä¸€ç›´å‡ºç°è¶…æ—¶ï¼Œproviderç«¯ä¼šè°ƒç”¨3æ¬¡ï¼Œè€Œæ—¥å¿—ä¸­æ²¡æœ‰ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯ä¿¡æ¯ï¼› consumerç«¯è™½ç„¶é‡è¯•äº†2æ¬¡ï¼ŒåŠ æœ¬èº«è°ƒç”¨çš„1æ¬¡ï¼Œä¸€å…±å‘èµ·3æ¬¡è°ƒç”¨ï¼Œå¦‚æœprovider3æ¬¡å…¨éƒ¨è¶…æ—¶ï¼Œconsumerç«¯ä¼šæ‰“å°è¶…æ—¶å¼‚å¸¸ä¿¡æ¯ï¼› providerç«¯æ—¥å¿—ä¸­æ²¡æœ‰ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯ä¿¡æ¯ä¸åˆ©äºå‘ç°é—®é¢˜ï¼›å‰é¢çš„è°ƒç”¨å¹¶æœªç»ˆæ­¢ï¼Œå¦‚æœæ˜¯éæŸ¥è¯¢ç±»æ¥å£ä¸”æ¥å£æ²¡æœ‰å®ç°å¹‚ç­‰æ€§æ—¶ï¼Œå¯èƒ½äº§ç”Ÿé‡å¤æ•°æ®ã€‚\ncase 2ï¼š providerç«¯retries=0ï¼Œconsumerç«¯ä¸è®¾ç½® åœ¨providerç«¯è®¾ç½®retries=0å·²ç»ç”Ÿæ•ˆï¼Œæ¥å£ä»…è°ƒç”¨äº†1æ¬¡ã€‚\ncase 3ï¼š providerç«¯retries=0ï¼Œconsumerç«¯retries=1 consumerçš„retriesä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¸¤ç«¯éƒ½è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œä»¥consumerç«¯çš„retriesä¸ºå‡†ã€‚\ncase 4ï¼š providerç«¯timeout=3000, retries=0ï¼Œconsumerç«¯retries=0 providerç«¯è®¾ç½®timeoutå·²ç”Ÿæ•ˆã€‚\ncase 5ï¼š providerç«¯timeout=1000, retries=0ï¼Œconsumerç«¯retries=0 providerç«¯è®¾ç½®äº†timeoutï¼Œå¦‚æœæ¥å£è°ƒç”¨è¶…æ—¶ï¼Œproviderä¼šæ‰“å°WRANä¿¡æ¯ã€‚\ncase 6ï¼š providerç«¯timeout=1000, retries=0ï¼Œconsumerç«¯timeout=3000, retries=0 consumerçš„timeoutä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¸¤ç«¯éƒ½è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œä»¥consumerç«¯çš„timeoutä¸ºå‡†ã€‚\nå‚è€ƒdubboå®˜ç½‘çš„æ–‡æ¡£ï¼Œå¹¶ç»“åˆå·¥ä½œä¸­é¡¹ç›®å®è·µï¼Œå¯¹è¶…æ—¶å’Œé‡è¯•è¿™2ä¸ªå‚æ•°åšä¸ªæ€»ç»“ï¼š\nè¶…æ—¶(timeout)é»˜è®¤1000æ¯«ç§’ï¼Œé‡è¯•(retries)é»˜è®¤2æ¬¡(å³ä¸€å…±è°ƒç”¨3æ¬¡)ï¼› providerç«¯åœ¨dubbo:serviceä¸­é…ç½®ï¼Œconsumerç«¯åœ¨dubbo:referenceä¸­é…ç½®ï¼Œconsumerç«¯çš„é…ç½®ä¼šè¦†ç›–provideré…ç½®ï¼› è¶…æ—¶(timeout)å»ºè®®åœ¨providerç«¯é…ç½®ï¼Œå› ä¸ºä½œä¸ºæä¾›æ–¹ï¼Œå®ƒæ›´æ¸…æ¥šè‡ªå·±æ¥å£çš„è€—æ—¶æƒ…å†µï¼Œå¹¶ä¸”providerç«¯è®¾ç½®äº†timeoutï¼Œåœ¨æ—¥å¿—ä¸­æœ‰TimeoutFilterçš„WARNä¿¡æ¯ï¼› åœ¨providerç«¯ä¸€èˆ¬æ¥å£timeoutè®¾ç½®ä¸º5ç§’æˆ–è€…10ç§’ï¼Œå¦‚æœæ˜¯å¤æ‚æŸ¥è¯¢ã€å¯¼å‡ºæŠ¥è¡¨ã€è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£ã€æœ¬èº«æ˜¯æœ€ä¸Šæ¸¸çš„æ¥å£ç­‰ï¼Œæ ¹æ®æƒ…å†µè€ƒè™‘è®¾ç½®å¤§ä¸€ç‚¹ï¼› åœ¨consumerç«¯é…ç½®è®¾ç½®timeoutä¼šè¦†ç›–providerè®¾ç½®ï¼Œä½†æœ‰æ—¶è®¾ç½®timeoutèƒ½å¤Ÿè®©consumerå¿«é€Ÿå¤±è´¥ï¼Œè€Œä¸å› ä¸ºä¸‹æ¸¸provideræœåŠ¡æ¥å£çš„é—®é¢˜æ‹–å®consumeræœ¬èº«ï¼› retrieså»ºè®®åœ¨providerç«¯è®¾ç½®ä¸º0ï¼Œconsumeræ ¹æ®æƒ…å†µä¹Ÿå¯ä»¥è®¾ç½®ä¸º0ï¼Œå› ä¸ºé‡è¯•å¯èƒ½å› éå¹‚ç­‰æ€§åŸå› å¯¼è‡´é‡å¤æ•°æ®ï¼Œå¹¶ä¸”è¶…æ—¶æƒ…å†µå³ä¾¿é‡è¯•æˆåŠŸconsumerç«¯å¯èƒ½ä¹Ÿæ”¶ä¸åˆ°æˆåŠŸå“åº”ï¼› å‚è€ƒ å‚è€ƒ2\ndubboæŠ¥é”™ com.alibaba.com.caucho.hessian.io.HessianProtocolException: â€˜xxxâ€™ could not be instantiated Hessianååºåˆ—åŒ–æ—¶ï¼Œä½¿ç”¨åå°„è°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¸åˆæ³•ï¼Œé€ æˆäº†ä¸Šé¢çš„å¼‚å¸¸ã€‚ çŸ¥é“äº†åŸå› ï¼Œè§£å†³çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ·»åŠ äº†ä¸€ä¸ªæ— å‚çš„æ„é€ å™¨ç»™CountObjectï¼Œäºæ˜¯ä¸Šé¢çš„é—®é¢˜å°±è§£å†³äº†ã€‚\n1 2 3 public ResponseUtil() { } https://hittyt.iteye.com/blog/1691772\nTried 3 times of the providers æ„æ€æ˜¯æœåŠ¡ç«¯è¢«é‡å¤è°ƒç”¨ä¸‰æ¬¡ï¼Œç„¶è€Œproviderå¹¶æ²¡æœ‰æŠ¥é”™ã€‚ æˆ‘è§‰å¾—æ˜¯providerçš„å“åº”æ—¶é—´é—®é¢˜ï¼Œå°±æ˜¯è¯´consumerç­‰å¾…provideré»˜è®¤æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„(é»˜è®¤1000ms)ï¼Œå³å¦‚æœ1ç§’å†…provideræ²¡æœ‰å“åº”ï¼Œå°±ä¼šå†æ¬¡è°ƒç”¨ã€‚ å¦‚æœä¸‰æ¬¡è°ƒç”¨éƒ½åœ¨1ç§’å†…æ²¡æœ‰å“åº”ï¼Œå°±æ˜¯è°ƒç”¨å¤±è´¥ï¼Œä¼šæŠ¥ä¸Šè¾¹çš„é”™è¯¯ã€‚è¿™æ—¶åŠ ä¸Štimeouté…ç½®å³å¯ï¼š\n1 2 @Reference(version = \"1.0.0\",timeout = 60000) private GrowthService growthService; ",
  "wordCount" : "3229",
  "inLanguage": "en",
  "datePublished": "2019-04-17T11:05:53Z",
  "dateModified": "2019-04-17T11:05:53Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/dubbo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/links" title="ğŸ¤å‹é“¾">
                    <span>ğŸ¤å‹é“¾</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title">
      dubbo
    </h1>
    <div class="post-meta"><span title='2019-04-17 11:05:53 +0000 UTC'>2019-04-17</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#dubbo%e6%98%af%e4%bb%80%e4%b9%88" aria-label="dubboæ˜¯ä»€ä¹ˆ">dubboæ˜¯ä»€ä¹ˆ</a></li>
                <li>
                    <a href="#dubbo%e6%8e%a7%e5%88%b6%e5%8f%b0" aria-label="dubboæ§åˆ¶å°">dubboæ§åˆ¶å°</a><ul>
                        
                <li>
                    <a href="#%e8%80%81%e7%89%88%e6%8e%a7%e5%88%b6%e5%8f%b0" aria-label="è€ç‰ˆæ§åˆ¶å°">è€ç‰ˆæ§åˆ¶å°</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%b6%85%e6%97%b6%e4%b8%8e%e9%87%8d%e8%af%95" aria-label="è¶…æ—¶ä¸é‡è¯•">è¶…æ—¶ä¸é‡è¯•</a></li>
                <li>
                    <a href="#dubbo%e6%8a%a5%e9%94%99" aria-label="dubboæŠ¥é”™">dubboæŠ¥é”™</a><ul>
                        
                <li>
                    <a href="#comalibabacomcauchohessianiohessianprotocolexception-xxx-could-not-be-instantiated" aria-label="com.alibaba.com.caucho.hessian.io.HessianProtocolException: &amp;lsquo;xxx&amp;rsquo; could not be instantiated">com.alibaba.com.caucho.hessian.io.HessianProtocolException: &lsquo;xxx&rsquo; could not be instantiated</a></li>
                <li>
                    <a href="#tried-3-times-of-the-providers" aria-label="Tried 3 times of the providers">Tried 3 times of the providers</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="dubboæ˜¯ä»€ä¹ˆ">dubboæ˜¯ä»€ä¹ˆ<a hidden class="anchor" aria-hidden="true" href="#dubboæ˜¯ä»€ä¹ˆ">#</a></h1>
<p>æ˜¯ä¸€ä¸ªJaråŒ…ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œä¸€ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚
ä¸ºä»€ä¹ˆè¦åˆ†å¸ƒå¼ï¼Ÿä¸ºä»€ä¹ˆè¦è¿œç¨‹è°ƒç”¨ï¼Ÿ
<img loading="lazy" src="1.jpg" alt=""  />
</p>
<p>ä»¥å‰æ˜¯å•æœåŠ¡åº”ç”¨ï¼Œè°ƒç”¨æ–¹æ³•åœ¨æœåŠ¡å†…ç›´æ¥è°ƒç”¨å³å¯ã€‚
ç°åœ¨æ‹†åˆ†æˆå¤šä¸ªæœåŠ¡ï¼Œcontrollerå’Œserviceä¸åœ¨ä¸€ä¸ªæœåŠ¡é‡Œäº†ï¼Œcontrollerä¸èƒ½ç›´æ¥è°ƒç”¨serviceçš„æ–¹æ³•äº†ã€‚é‚£åªèƒ½è¿œç¨‹è°ƒç”¨äº†ï¼Œdubboå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨Dubboçš„å¥½å¤„</p>
<ul>
<li>é€æ˜åŒ–çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•ï¼Œåªéœ€ç®€å•é…ç½®ï¼Œæ²¡æœ‰ä»»ä½•APIä¾µå…¥ã€‚</li>
<li>è´Ÿè½½å‡è¡¡åŠå®¹é”™æœºåˆ¶ï¼Œå¯åœ¨å†…ç½‘æ›¿ä»£F5ç­‰ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼Œé™ä½æˆæœ¬ï¼Œå‡å°‘å•ç‚¹ã€‚</li>
<li>æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°ï¼Œä¸å†éœ€è¦å†™æ­»æœåŠ¡æä¾›æ–¹åœ°å€ï¼Œæ³¨å†Œä¸­å¿ƒåŸºäºæ¥å£åæŸ¥è¯¢æœåŠ¡æä¾›è€…çš„IPåœ°å€ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¹³æ»‘æ·»åŠ æˆ–åˆ é™¤æœåŠ¡æä¾›è€…ã€‚</li>
<li>Dubboé‡‡ç”¨å…¨Springé…ç½®æ–¹å¼ï¼Œé€æ˜åŒ–æ¥å…¥åº”ç”¨ï¼Œå¯¹åº”ç”¨æ²¡æœ‰ä»»ä½•APIä¾µå…¥ï¼Œåªéœ€ç”¨SpringåŠ è½½Dubboçš„é…ç½®å³å¯ï¼ŒDubboåŸºäºSpringçš„Schemaæ‰©å±•è¿›è¡ŒåŠ è½½ã€‚</li>
</ul>
<p>è§’è‰²è¯´æ˜ï¼š
Providerï¼ˆç”Ÿäº§è€…ï¼‰: æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ã€‚
Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰: è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ã€‚
å¦‚å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºweb1234éœ€è¦è°ƒç”¨service1234çš„æœåŠ¡ï¼Œæ‰€ä»¥web1234æ˜¯æ¶ˆè´¹è€…ï¼Œservice1234æ˜¯ç”Ÿäº§è€…ã€‚
<img loading="lazy" src="2.jpg" alt=""  />
</p>
<p>å¦‚æœæŒ‰ç…§ä¸Šé¢çš„é€»è¾‘ï¼Œæ¶ˆè´¹è€…è°ƒç”¨ç”Ÿäº§è€…çš„æœåŠ¡ï¼Œé‚£æ˜¯å¦åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼š
<img loading="lazy" src="3.jpg" alt=""  />

å¤ªä¹±äº†ï¼Œ è‚¯å®šä¸æ˜¯è¿™æ ·ã€‚</p>
<p>æ­¤æ—¶å¼•å‡ºæ³¨å†Œä¸­å¿ƒçš„æ¦‚å¿µï¼š æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€‚
æ³¨å†Œä¸­å¿ƒæœ‰å¾ˆå¤šï¼Œç°åœ¨åªç®€å•è¯´zookeeperã€‚
zookeeperæ˜¯ç”¨äºåˆ†å¸ƒå¼ä¸­ä¸€è‡´æ€§å¤„ç†çš„æ¡†æ¶ã€‚
ç®€å•çš„è®²ï¼Œzookeeperå°±æ˜¯ä¸ªä¸­ä»‹ï¼Œå–æ¥¼çš„ï¼ˆç”Ÿäº§è€…ï¼‰æŠŠæ¥¼ç›˜ä¿¡æ¯æ”¾åœ¨ä¸­ä»‹ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰é‚£é‡Œï¼Œæƒ³ä¹°æ¥¼çš„ï¼ˆæ¶ˆè´¹è€…ï¼‰å»ä¸­ä»‹é‚£é‡Œè·å¾—æ¥¼ç›˜èµ„æºæ¸…å•ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬çš„å›¾å˜æˆäº†è¿™æ ·ï¼š
<img loading="lazy" src="4.jpg" alt=""  />
</p>
<p>Monitorï¼šç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡è°ƒå’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒã€‚
Containerï¼šæœåŠ¡è¿è¡Œçš„å®¹å™¨ã€‚</p>
<p>æ€»ä½“ç»“æ„å¦‚ä¸‹ï¼ˆå®˜æ–¹çš„å›¾ï¼‰ï¼š
<img loading="lazy" src="5.png" alt=""  />
</p>
<p>ä¸Šå›¾çš„è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š
0. æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</p>
<ol>
<li>æœåŠ¡æä¾›è€…ï¼ˆç”Ÿäº§è€…ï¼‰åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</li>
<li>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</li>
</ol>
<p><a href="http://dubbo.apache.org/zh-cn/index.html">dubboå®˜ç½‘</a></p>
<h1 id="dubboæ§åˆ¶å°">dubboæ§åˆ¶å°<a hidden class="anchor" aria-hidden="true" href="#dubboæ§åˆ¶å°">#</a></h1>
<p><a href="http://dubbo.apache.org/zh-cn/blog/dubbo-admin.html">dubbo adminå®˜ç½‘ä»‹ç»</a>
<a href="https://github.com/apache/dubbo-admin">githubåœ°å€</a></p>
<ul>
<li>ä¸‹è½½ä»£ç :<code>git clone https://github.com/apache/dubbo-admin.git</code></li>
<li>åœ¨dubbo-admin-server/src/main/resources/application.propertiesä¸­æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€</li>
<li>æ„å»º<code>mvn clean package</code></li>
<li>å¯åŠ¨
<code>mvn --projects dubbo-admin-server spring-boot:run</code>
æˆ–
<code>cd dubbo-admin-distribution/target; java -jar dubbo-admin-0.1.jar</code></li>
<li>è®¿é—®
<code>http://localhost:8080</code></li>
</ul>
<p>ä¿®æ”¹è®¿é—®ç«¯å£ï¼š
<code>vim dubbo-admin\dubbo-admin-server\src\main\resources\application.properties</code>
åœ¨ä»»æ„ä½ç½®æ·»åŠ ï¼š
<code>server.port=9000</code></p>
<p>ç›®å‰æ–°ç‰ˆbuddo-adminè¿˜æ²¡æœ‰ç”¨æˆ·åå¯†ç è®¿é—®åŠŸèƒ½ã€‚\</p>
<h2 id="è€ç‰ˆæ§åˆ¶å°">è€ç‰ˆæ§åˆ¶å°<a hidden class="anchor" aria-hidden="true" href="#è€ç‰ˆæ§åˆ¶å°">#</a></h2>
<p><a href="https://github.com/apache/dubbo/tree/dubbo-2.6.0">github</a>
å°†é¡¹ç›®æ•´ä½“ä¸‹è½½ï¼Œè§£å‹å¹¶è¿›å…¥åˆ°<code>dubbo-admin</code>
æ‰“åŒ…<code>mvn  package -Dmaven.skip.test=true</code>
è¿›å…¥targetï¼Œæ‰¾åˆ°æ‰“å¥½çš„waråŒ…ï¼Œå¤åˆ¶åˆ°tomcatçš„webappsä¸‹ï¼Œå¹¶æ›´åä¸º<code>ROOT.war</code>
å¯åŠ¨tomcatï¼Œå¯åŠ¨å®Œäº†å†åœæ­¢(è¿™ä¸€æ­¥æ˜¯è¦é€šè¿‡tomcatå°†waråŒ…è§£å¼€ã€‚)
è¿›å…¥åˆ°<code>webapps\dubbo-admin-2.6.0\WEB-INF</code>ï¼Œä¿®æ”¹<code>dubbo.properties</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>dubbo.registry.address=zookeeper://127.0.0.1:2181
</span></span><span style="display:flex;"><span>dubbo.admin.root.password=root
</span></span><span style="display:flex;"><span>dubbo.admin.guest.password=guest
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹ä½ çš„zookeeperåœ°å€ã€‚
ä¿®æ”¹ä½ çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œéœ€è¦æ³¨æ„ç”¨æˆ·ååœ¨=å·å‰è¾¹ï¼Œç­‰å·åè¾¹çš„æ˜¯å¯†ç ã€‚
ç„¶åå†å¯åŠ¨tomcatï¼Œè®¿é—®å³å¯ã€‚</p>
<p><a href="https://blog.csdn.net/qq_28988969/article/details/79866111">å‚è€ƒ</a></p>
<h1 id="è¶…æ—¶ä¸é‡è¯•">è¶…æ—¶ä¸é‡è¯•<a hidden class="anchor" aria-hidden="true" href="#è¶…æ—¶ä¸é‡è¯•">#</a></h1>
<p>åœ¨providerå’Œconsumerç«¯ï¼Œéƒ½æä¾›äº†è¶…æ—¶(timeout)å’Œé‡è¯•(retries)çš„å‚æ•°é…ç½®ã€‚
timeouté»˜è®¤å€¼ä¸º1000ï¼Œå•ä½æ¯«ç§’ï¼Œè¡¨ç¤ºè¶…æ—¶æ—¶é—´æ˜¯1ç§’ï¼›
retriesé»˜è®¤å€¼ä¸º2ï¼Œè¡¨ç¤ºé‡è¯•2æ¬¡ï¼ŒåŠ ä¸Šæœ¬èº«è°ƒç”¨1æ¬¡ï¼Œä¸€å…±æœ‰3æ¬¡è°ƒç”¨ã€‚
åœ¨org.apache.dubbo.common.Constantsç±»å¯ä»¥æ‰¾åˆ°ï¼š
<code>public static final int DEFAULT_TIMEOUT = 1000;</code>
<code>public static final int DEFAULT_RETRIES = 2;</code></p>
<p>consumerç«¯é…ç½®ä¼˜å…ˆäºproviderç«¯é…ç½®ã€‚</p>
<p>æ€»ç»“ï¼š
case 1ï¼š é»˜è®¤æƒ…å†µï¼Œproviderå’Œconsumerç«¯çš„timeoutå’Œretireså‡ä¸è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼
åœ¨ä¸è®¾ç½®timeoutå’Œretriesçš„æ—¶å€™ï¼Œå¦‚æœproviderç«¯æ¥å£ä¸€ç›´å‡ºç°è¶…æ—¶ï¼Œproviderç«¯ä¼šè°ƒç”¨3æ¬¡ï¼Œè€Œæ—¥å¿—ä¸­æ²¡æœ‰ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯ä¿¡æ¯ï¼›
consumerç«¯è™½ç„¶é‡è¯•äº†2æ¬¡ï¼ŒåŠ æœ¬èº«è°ƒç”¨çš„1æ¬¡ï¼Œä¸€å…±å‘èµ·3æ¬¡è°ƒç”¨ï¼Œå¦‚æœprovider3æ¬¡å…¨éƒ¨è¶…æ—¶ï¼Œconsumerç«¯ä¼šæ‰“å°è¶…æ—¶å¼‚å¸¸ä¿¡æ¯ï¼›
providerç«¯æ—¥å¿—ä¸­æ²¡æœ‰ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯ä¿¡æ¯ä¸åˆ©äºå‘ç°é—®é¢˜ï¼›å‰é¢çš„è°ƒç”¨å¹¶æœªç»ˆæ­¢ï¼Œå¦‚æœæ˜¯éæŸ¥è¯¢ç±»æ¥å£ä¸”æ¥å£æ²¡æœ‰å®ç°å¹‚ç­‰æ€§æ—¶ï¼Œå¯èƒ½äº§ç”Ÿé‡å¤æ•°æ®ã€‚</p>
<p>case 2ï¼š providerç«¯retries=0ï¼Œconsumerç«¯ä¸è®¾ç½®
åœ¨providerç«¯è®¾ç½®retries=0å·²ç»ç”Ÿæ•ˆï¼Œæ¥å£ä»…è°ƒç”¨äº†1æ¬¡ã€‚</p>
<p>case 3ï¼š providerç«¯retries=0ï¼Œconsumerç«¯retries=1
consumerçš„retriesä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¸¤ç«¯éƒ½è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œä»¥consumerç«¯çš„retriesä¸ºå‡†ã€‚</p>
<p>case 4ï¼š providerç«¯timeout=3000, retries=0ï¼Œconsumerç«¯retries=0
providerç«¯è®¾ç½®timeoutå·²ç”Ÿæ•ˆã€‚</p>
<p>case 5ï¼š providerç«¯timeout=1000, retries=0ï¼Œconsumerç«¯retries=0
providerç«¯è®¾ç½®äº†timeoutï¼Œå¦‚æœæ¥å£è°ƒç”¨è¶…æ—¶ï¼Œproviderä¼šæ‰“å°WRANä¿¡æ¯ã€‚</p>
<p>case 6ï¼š providerç«¯timeout=1000, retries=0ï¼Œconsumerç«¯timeout=3000, retries=0
consumerçš„timeoutä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¸¤ç«¯éƒ½è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œä»¥consumerç«¯çš„timeoutä¸ºå‡†ã€‚</p>
<p>å‚è€ƒdubboå®˜ç½‘çš„æ–‡æ¡£ï¼Œå¹¶ç»“åˆå·¥ä½œä¸­é¡¹ç›®å®è·µï¼Œå¯¹è¶…æ—¶å’Œé‡è¯•è¿™2ä¸ªå‚æ•°åšä¸ªæ€»ç»“ï¼š</p>
<ul>
<li>è¶…æ—¶(timeout)é»˜è®¤1000æ¯«ç§’ï¼Œé‡è¯•(retries)é»˜è®¤2æ¬¡(å³ä¸€å…±è°ƒç”¨3æ¬¡)ï¼›</li>
<li>providerç«¯åœ¨<a href="dubbo:service">dubbo:service</a>ä¸­é…ç½®ï¼Œconsumerç«¯åœ¨<a href="dubbo:reference">dubbo:reference</a>ä¸­é…ç½®ï¼Œconsumerç«¯çš„é…ç½®ä¼šè¦†ç›–provideré…ç½®ï¼›</li>
<li>è¶…æ—¶(timeout)å»ºè®®åœ¨providerç«¯é…ç½®ï¼Œå› ä¸ºä½œä¸ºæä¾›æ–¹ï¼Œå®ƒæ›´æ¸…æ¥šè‡ªå·±æ¥å£çš„è€—æ—¶æƒ…å†µï¼Œå¹¶ä¸”providerç«¯è®¾ç½®äº†timeoutï¼Œåœ¨æ—¥å¿—ä¸­æœ‰TimeoutFilterçš„WARNä¿¡æ¯ï¼›</li>
<li>åœ¨providerç«¯ä¸€èˆ¬æ¥å£timeoutè®¾ç½®ä¸º5ç§’æˆ–è€…10ç§’ï¼Œå¦‚æœæ˜¯å¤æ‚æŸ¥è¯¢ã€å¯¼å‡ºæŠ¥è¡¨ã€è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£ã€æœ¬èº«æ˜¯æœ€ä¸Šæ¸¸çš„æ¥å£ç­‰ï¼Œæ ¹æ®æƒ…å†µè€ƒè™‘è®¾ç½®å¤§ä¸€ç‚¹ï¼›</li>
<li>åœ¨consumerç«¯é…ç½®è®¾ç½®timeoutä¼šè¦†ç›–providerè®¾ç½®ï¼Œä½†æœ‰æ—¶è®¾ç½®timeoutèƒ½å¤Ÿè®©consumerå¿«é€Ÿå¤±è´¥ï¼Œè€Œä¸å› ä¸ºä¸‹æ¸¸provideræœåŠ¡æ¥å£çš„é—®é¢˜æ‹–å®consumeræœ¬èº«ï¼›</li>
<li>retrieså»ºè®®åœ¨providerç«¯è®¾ç½®ä¸º0ï¼Œconsumeræ ¹æ®æƒ…å†µä¹Ÿå¯ä»¥è®¾ç½®ä¸º0ï¼Œå› ä¸ºé‡è¯•å¯èƒ½å› éå¹‚ç­‰æ€§åŸå› å¯¼è‡´é‡å¤æ•°æ®ï¼Œå¹¶ä¸”è¶…æ—¶æƒ…å†µå³ä¾¿é‡è¯•æˆåŠŸconsumerç«¯å¯èƒ½ä¹Ÿæ”¶ä¸åˆ°æˆåŠŸå“åº”ï¼›</li>
</ul>
<p><a href="https://www.cnblogs.com/cdfive2018/p/10204720.html">å‚è€ƒ</a>
<a href="https://blog.csdn.net/u013940812/article/details/80041669">å‚è€ƒ2</a></p>
<h1 id="dubboæŠ¥é”™">dubboæŠ¥é”™<a hidden class="anchor" aria-hidden="true" href="#dubboæŠ¥é”™">#</a></h1>
<h2 id="comalibabacomcauchohessianiohessianprotocolexception-xxx-could-not-be-instantiated">com.alibaba.com.caucho.hessian.io.HessianProtocolException: &lsquo;xxx&rsquo; could not be instantiated<a hidden class="anchor" aria-hidden="true" href="#comalibabacomcauchohessianiohessianprotocolexception-xxx-could-not-be-instantiated">#</a></h2>
<p>Hessianååºåˆ—åŒ–æ—¶ï¼Œä½¿ç”¨åå°„è°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¸åˆæ³•ï¼Œé€ æˆäº†ä¸Šé¢çš„å¼‚å¸¸ã€‚
çŸ¥é“äº†åŸå› ï¼Œè§£å†³çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ·»åŠ äº†ä¸€ä¸ªæ— å‚çš„æ„é€ å™¨ç»™CountObjectï¼Œäºæ˜¯ä¸Šé¢çš„é—®é¢˜å°±è§£å†³äº†ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public ResponseUtil() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://hittyt.iteye.com/blog/1691772">https://hittyt.iteye.com/blog/1691772</a></p>
<h2 id="tried-3-times-of-the-providers">Tried 3 times of the providers<a hidden class="anchor" aria-hidden="true" href="#tried-3-times-of-the-providers">#</a></h2>
<p>æ„æ€æ˜¯æœåŠ¡ç«¯è¢«é‡å¤è°ƒç”¨ä¸‰æ¬¡ï¼Œç„¶è€Œproviderå¹¶æ²¡æœ‰æŠ¥é”™ã€‚
æˆ‘è§‰å¾—æ˜¯providerçš„å“åº”æ—¶é—´é—®é¢˜ï¼Œå°±æ˜¯è¯´consumerç­‰å¾…provideré»˜è®¤æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„(é»˜è®¤1000ms)ï¼Œå³å¦‚æœ1ç§’å†…provideræ²¡æœ‰å“åº”ï¼Œå°±ä¼šå†æ¬¡è°ƒç”¨ã€‚
å¦‚æœä¸‰æ¬¡è°ƒç”¨éƒ½åœ¨1ç§’å†…æ²¡æœ‰å“åº”ï¼Œå°±æ˜¯è°ƒç”¨å¤±è´¥ï¼Œä¼šæŠ¥ä¸Šè¾¹çš„é”™è¯¯ã€‚è¿™æ—¶åŠ ä¸Štimeouté…ç½®å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>@Reference(version = &#34;1.0.0&#34;,timeout = 60000)
</span></span><span style="display:flex;"><span>private GrowthService growthService;
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/">å…¶ä»–åŸºç¡€</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
