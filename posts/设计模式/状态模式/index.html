<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>çŠ¶æ€æ¨¡å¼ | Wjy&#39;s Blog</title>
<meta name="keywords" content="è®¾è®¡æ¨¡å¼">
<meta name="description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šè¡Œä¸ºå‹

çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚
">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="çŠ¶æ€æ¨¡å¼" />
<meta property="og:description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šè¡Œä¸ºå‹

çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-23T16:00:11+00:00" />
<meta property="article:modified_time" content="2018-12-23T16:00:11+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="çŠ¶æ€æ¨¡å¼"/>
<meta name="twitter:description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šè¡Œä¸ºå‹

çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚
"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "çŠ¶æ€æ¨¡å¼",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "çŠ¶æ€æ¨¡å¼",
  "name": "çŠ¶æ€æ¨¡å¼",
  "description": "å¿«é€Ÿå­¦ä¹  ç±»å‹ï¼šè¡Œä¸ºå‹\nçŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚\n",
  "keywords": [
    "è®¾è®¡æ¨¡å¼"
  ],
  "articleBody": "å¿«é€Ÿå­¦ä¹  ç±»å‹ï¼šè¡Œä¸ºå‹\nçŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚\nçŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ç»å¸¸ç”¨åœ¨å¸¦æœ‰çŠ¶æ€çš„å¯¹è±¡ä¸­ã€‚\nä»€ä¹ˆæ˜¯çŠ¶æ€ï¼Ÿæˆ‘ä»¬ä»¥QQèŠå¤©ä¸ºä¾‹ï¼Œä¸€ä¸ªç”¨æˆ·çš„QQæœ‰å‡ ç§çŠ¶æ€ï¼š\nç¦»çº¿çŠ¶æ€ï¼ˆå°šæœªç™»å½•ï¼‰ï¼› æ­£åœ¨ç™»å½•çŠ¶æ€ï¼› åœ¨çº¿çŠ¶æ€ï¼› å¿™çŠ¶æ€ï¼ˆæš‚æ—¶ç¦»å¼€ï¼‰ã€‚ å¦‚ä½•è¡¨ç¤ºçŠ¶æ€ï¼Ÿæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªenumå°±å¯ä»¥è¡¨ç¤ºä¸åŒçš„çŠ¶æ€ã€‚ä½†ä¸åŒçš„çŠ¶æ€éœ€è¦å¯¹åº”ä¸åŒçš„è¡Œä¸ºï¼Œæ¯”å¦‚æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼š\n1 2 3 4 5 if (state == ONLINE) { // é—ªçƒå›¾æ ‡ } else if (state == BUSY) { reply(\"ç°åœ¨å¿™ï¼Œç¨åå›å¤\"); } else if ... çŠ¶æ€æ¨¡å¼çš„ç›®çš„æ˜¯ä¸ºäº†æŠŠä¸Šè¿°ä¸€å¤§ä¸²if...else...çš„é€»è¾‘ç»™åˆ†æ‹†åˆ°ä¸åŒçš„çŠ¶æ€ç±»ä¸­ï¼Œä½¿å¾—å°†æ¥å¢åŠ çŠ¶æ€æ¯”è¾ƒå®¹æ˜“ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œå®ƒæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼š\næœªè¿çº¿ï¼› å·²è¿çº¿ã€‚ å¯¹äºæœªè¿çº¿çŠ¶æ€ï¼Œæˆ‘ä»¬æ”¶åˆ°æ¶ˆæ¯ä¹Ÿä¸å›å¤ï¼š\n1 2 3 4 5 6 7 8 9 public class DisconnectedState implements State { public String init() { return \"Bye!\"; } public String reply(String input) { return \"\"; } } å¯¹äºå·²è¿çº¿çŠ¶æ€ï¼Œæˆ‘ä»¬å›åº”æ”¶åˆ°çš„æ¶ˆæ¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class ConnectedState implements State { public String init() { return \"Hello, I'm Bob.\"; } public String reply(String input) { if (input.endsWith(\"?\")) { return \"Yes. \" + input.substring(0, input.length() - 1) + \"!\"; } if (input.endsWith(\".\")) { return input.substring(0, input.length() - 1) + \"!\"; } return input.substring(0, input.length() - 1) + \"?\"; } } çŠ¶æ€æ¨¡å¼çš„å…³é”®è®¾è®¡æ€æƒ³åœ¨äºçŠ¶æ€åˆ‡æ¢ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªBotContextå®ŒæˆçŠ¶æ€åˆ‡æ¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class BotContext { private State state = new DisconnectedState(); public String chat(String input) { if (\"hello\".equalsIgnoreCase(input)) { // æ”¶åˆ°helloåˆ‡æ¢åˆ°åœ¨çº¿çŠ¶æ€: state = new ConnectedState(); return state.init(); } else if (\"bye\".equalsIgnoreCase(input)) { / æ”¶åˆ°byeåˆ‡æ¢åˆ°ç¦»çº¿çŠ¶æ€: state = new DisconnectedState(); return state.init(); } return state.reply(input); } } è¿™æ ·ï¼Œä¸€ä¸ªä»·å€¼åƒä¸‡çš„AIèŠå¤©æœºå™¨äººå°±è¯ç”Ÿäº†ï¼š\n1 2 3 4 5 6 7 8 Scanner scanner = new Scanner(System.in); BotContext bot = new BotContext(); for (;;) { System.out.print(\"\u003e \"); String input = scanner.nextLine(); String output = bot.chat(input); System.out.println(output.isEmpty() ? \"(no reply)\" : \"\u003c \" + output); } è¯•è¯•æ•ˆæœï¼š\n1 2 3 4 5 6 7 8 \u003e hello \u003c Hello, I'm Bob. \u003e Nice to meet you. \u003c Nice to meet you! \u003e Today is cold? \u003c Yes. Today is cold! \u003e bye \u003c Bye! æ¦‚è¿° çŠ¶æ€æ¨¡å¼çš„ç»“æ„ çŠ¶æ€æ¨¡å¼æŠŠæ‰€ç ”ç©¶çš„å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡é‡Œï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡éƒ½å±äºä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»çš„ä¸€ä¸ªå­ç±»ã€‚çŠ¶æ€æ¨¡å¼çš„æ„å›¾æ˜¯è®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚\nçŠ¶æ€æ¨¡å¼æ¶‰åŠåˆ°çš„è§’è‰²æœ‰ï¼š\nç¯å¢ƒ(Context)è§’è‰²ï¼Œä¹Ÿç§°ä¸Šä¸‹æ–‡ï¼š å®šä¹‰å®¢æˆ·ç«¯æ‰€æ„Ÿå…´è¶£çš„æ¥å£ï¼Œå¹¶ä¸”ä¿ç•™ä¸€ä¸ªå…·ä½“çŠ¶æ€ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªå…·ä½“çŠ¶æ€ç±»çš„å®ä¾‹ç»™å‡ºæ­¤ç¯å¢ƒå¯¹è±¡çš„ç°æœ‰çŠ¶æ€ã€‚\næŠ½è±¡çŠ¶æ€(State)è§’è‰²ï¼š å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨ä»¥å°è£…ç¯å¢ƒï¼ˆContextï¼‰å¯¹è±¡çš„ä¸€ä¸ªç‰¹å®šçš„çŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºã€‚\nå…·ä½“çŠ¶æ€(ConcreteState)è§’è‰²ï¼š æ¯ä¸€ä¸ªå…·ä½“çŠ¶æ€ç±»éƒ½å®ç°äº†ç¯å¢ƒï¼ˆContextï¼‰çš„ä¸€ä¸ªçŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºã€‚\nç®€å•ç¤ºä¾‹ æŠ½è±¡çŠ¶æ€ç±»\n1 2 3 4 5 6 public interface State { /** * çŠ¶æ€å¯¹åº”çš„å¤„ç† */ public void handle(String sampleParameter); } å…·ä½“çŠ¶æ€ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class ConcreteStateA implements State { @Override public void handle(String sampleParameter) { System.out.println(\"ConcreteStateA handle ï¼š\" + sampleParameter); } } public class ConcreteStateB implements State { @Override public void handle(String sampleParameter) { System.out.println(\"ConcreteStateB handle ï¼š\" + sampleParameter); } } ç¯å¢ƒè§’è‰²ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Context { //æŒæœ‰ä¸€ä¸ªStateç±»å‹çš„å¯¹è±¡å®ä¾‹ private State state; public void setState(State state) { this.state = state; } /** * ç”¨æˆ·æ„Ÿå…´è¶£çš„æ¥å£æ–¹æ³• */ public void request(String sampleParameter) { //è½¬è°ƒstateæ¥å¤„ç† state.handle(sampleParameter); } } å®¢æˆ·ç«¯ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Client { public static void main(String[] args){ //åˆ›å»ºçŠ¶æ€ State state = new ConcreteStateB(); //åˆ›å»ºç¯å¢ƒ Context context = new Context(); //å°†çŠ¶æ€è®¾ç½®åˆ°ç¯å¢ƒä¸­ context.setState(state); //è¯·æ±‚ context.request(\"test\"); } } ä½¿ç”¨åœºæ™¯ è€ƒè™‘ä¸€ä¸ªåœ¨çº¿æŠ•ç¥¨ç³»ç»Ÿçš„åº”ç”¨ï¼Œè¦å®ç°æ§åˆ¶åŒä¸€ä¸ªç”¨æˆ·åªèƒ½æŠ•ä¸€ç¥¨ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·åå¤æŠ•ç¥¨ï¼Œè€Œä¸”æŠ•ç¥¨æ¬¡æ•°è¶…è¿‡5æ¬¡ï¼Œåˆ™åˆ¤å®šä¸ºæ¶æ„åˆ·ç¥¨ï¼Œè¦å–æ¶ˆè¯¥ç”¨æˆ·æŠ•ç¥¨çš„èµ„æ ¼ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿè¦å–æ¶ˆä»–æ‰€æŠ•çš„ç¥¨ï¼›å¦‚æœä¸€ä¸ªç”¨æˆ·çš„æŠ•ç¥¨æ¬¡æ•°è¶…è¿‡8æ¬¡ï¼Œå°†è¿›å…¥é»‘åå•ï¼Œç¦æ­¢å†ç™»å½•å’Œä½¿ç”¨ç³»ç»Ÿã€‚ è¦ä½¿ç”¨çŠ¶æ€æ¨¡å¼å®ç°ï¼Œé¦–å…ˆéœ€è¦æŠŠæŠ•ç¥¨è¿‡ç¨‹çš„å„ç§çŠ¶æ€å®šä¹‰å‡ºæ¥ï¼Œæ ¹æ®ä»¥ä¸Šæè¿°å¤§è‡´åˆ†ä¸ºå››ç§çŠ¶æ€ï¼šæ­£å¸¸æŠ•ç¥¨ã€åå¤æŠ•ç¥¨ã€æ¶æ„åˆ·ç¥¨ã€è¿›å…¥é»‘åå•ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªæŠ•ç¥¨ç®¡ç†å¯¹è±¡ï¼ˆç›¸å½“äºContextï¼‰ã€‚\næŠ½è±¡çŠ¶æ€ç±»\n1 2 3 4 5 6 7 8 9 10 public interface VoteState { /** * å¤„ç†çŠ¶æ€å¯¹åº”çš„è¡Œä¸º * @param user æŠ•ç¥¨äºº * @param voteItem æŠ•ç¥¨é¡¹ * @param voteManager æŠ•ç¥¨ä¸Šä¸‹æ–‡ï¼Œç”¨æ¥åœ¨å®ç°çŠ¶æ€å¯¹åº”çš„åŠŸèƒ½å¤„ç†çš„æ—¶å€™ï¼Œ * å¯ä»¥å›è°ƒä¸Šä¸‹æ–‡çš„æ•°æ® */ public void vote(String user,String voteItem,VoteManager voteManager); } å…·ä½“çŠ¶æ€ç±»â€”â€”æ­£å¸¸æŠ•ç¥¨\n1 2 3 4 5 6 7 8 9 10 public class NormalVoteState implements VoteState { @Override public void vote(String user, String voteItem, VoteManager voteManager) { //æ­£å¸¸æŠ•ç¥¨ï¼Œè®°å½•åˆ°æŠ•ç¥¨è®°å½•ä¸­ voteManager.getMapVote().put(user, voteItem); System.out.println(\"æ­å–œæŠ•ç¥¨æˆåŠŸ\"); } } å…·ä½“çŠ¶æ€ç±»â€”â€”é‡å¤æŠ•ç¥¨\n1 2 3 4 5 6 7 8 9 public class RepeatVoteState implements VoteState { @Override public void vote(String user, String voteItem, VoteManager voteManager) { //é‡å¤æŠ•ç¥¨ï¼Œæš‚æ—¶ä¸åšå¤„ç† System.out.println(\"è¯·ä¸è¦é‡å¤æŠ•ç¥¨\"); } } å…·ä½“çŠ¶æ€ç±»â€”â€”æ¶æ„åˆ·ç¥¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class SpiteVoteState implements VoteState { @Override public void vote(String user, String voteItem, VoteManager voteManager) { // æ¶æ„æŠ•ç¥¨ï¼Œå–æ¶ˆç”¨æˆ·çš„æŠ•ç¥¨èµ„æ ¼ï¼Œå¹¶å–æ¶ˆæŠ•ç¥¨è®°å½• String str = voteManager.getMapVote().get(user); if(str != null){ voteManager.getMapVote().remove(user); } System.out.println(\"ä½ æœ‰æ¶æ„åˆ·å±è¡Œä¸ºï¼Œå–æ¶ˆæŠ•ç¥¨èµ„æ ¼\"); } } å…·ä½“çŠ¶æ€ç±»â€”â€”é»‘åå•\n1 2 3 4 5 6 7 8 9 public class BlackVoteState implements VoteState { @Override public void vote(String user, String voteItem, VoteManager voteManager) { //è®°å½•é»‘åå•ä¸­ï¼Œç¦æ­¢ç™»å½•ç³»ç»Ÿ System.out.println(\"è¿›å…¥é»‘åå•ï¼Œå°†ç¦æ­¢ç™»å½•å’Œä½¿ç”¨æœ¬ç³»ç»Ÿ\"); } } ç¯å¢ƒç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 public class VoteManager { //æŒæœ‰çŠ¶ä½“å¤„ç†å¯¹è±¡ private VoteState state = null; //è®°å½•ç”¨æˆ·æŠ•ç¥¨çš„ç»“æœï¼ŒMapå¯¹åº”Map\u003cç”¨æˆ·åç§°ï¼ŒæŠ•ç¥¨çš„é€‰é¡¹\u003e private Map mapVote = new HashMap(); //è®°å½•ç”¨æˆ·æŠ•ç¥¨æ¬¡æ•°ï¼ŒMapå¯¹åº”Map\u003cç”¨æˆ·åç§°ï¼ŒæŠ•ç¥¨çš„æ¬¡æ•°\u003e private Map mapVoteCount = new HashMap(); /** * è·å–ç”¨æˆ·æŠ•ç¥¨ç»“æœçš„Map */ public Map getMapVote() { return mapVote; } /** * æŠ•ç¥¨ * @param user æŠ•ç¥¨äºº * @param voteItem æŠ•ç¥¨çš„é€‰é¡¹ */ public void vote(String user,String voteItem){ //1.ä¸ºè¯¥ç”¨æˆ·å¢åŠ æŠ•ç¥¨æ¬¡æ•° //ä»è®°å½•ä¸­å–å‡ºè¯¥ç”¨æˆ·å·²æœ‰çš„æŠ•ç¥¨æ¬¡æ•° Integer oldVoteCount = mapVoteCount.get(user); if(oldVoteCount == null){ oldVoteCount = 0; } oldVoteCount += 1; mapVoteCount.put(user, oldVoteCount); //2.åˆ¤æ–­è¯¥ç”¨æˆ·çš„æŠ•ç¥¨ç±»å‹ï¼Œå°±ç›¸å½“äºåˆ¤æ–­å¯¹åº”çš„çŠ¶æ€ //åˆ°åº•æ˜¯æ­£å¸¸æŠ•ç¥¨ã€é‡å¤æŠ•ç¥¨ã€æ¶æ„æŠ•ç¥¨è¿˜æ˜¯ä¸Šé»‘åå•çš„çŠ¶æ€ if(oldVoteCount == 1){ state = new NormalVoteState(); } else if(oldVoteCount \u003e 1 \u0026\u0026 oldVoteCount \u003c 5){ state = new RepeatVoteState(); } else if(oldVoteCount \u003e= 5 \u0026\u0026 oldVoteCount \u003c8){ state = new SpiteVoteState(); } else if(oldVoteCount \u003e 8){ state = new BlackVoteState(); } //ç„¶åè½¬è°ƒçŠ¶æ€å¯¹è±¡æ¥è¿›è¡Œç›¸åº”çš„æ“ä½œ state.vote(user, voteItem, this); } } å®¢æˆ·ç«¯ç±»\n1 2 3 4 5 6 7 8 9 10 11 public class Client { public static void main(String[] args) { VoteManager vm = new VoteManager(); for(int i=0;i\u003c9;i++){ vm.vote(\"u1\",\"A\"); } } } ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼ŒçŠ¶æ€çš„è½¬æ¢åŸºæœ¬ä¸Šéƒ½æ˜¯å†…éƒ¨è¡Œä¸ºï¼Œä¸»è¦åœ¨çŠ¶æ€æ¨¡å¼å†…éƒ¨æ¥ç»´æŠ¤ã€‚æ¯”å¦‚å¯¹äºæŠ•ç¥¨çš„äººå‘˜ï¼Œä»»ä½•æ—¶å€™ä»–çš„æ“ä½œéƒ½æ˜¯æŠ•ç¥¨ï¼Œä½†æ˜¯æŠ•ç¥¨ç®¡ç†å¯¹è±¡çš„å¤„ç†å´ä¸ä¸€å®šä¸€æ ·ï¼Œä¼šæ ¹æ®æŠ•ç¥¨çš„æ¬¡æ•°æ¥åˆ¤æ–­çŠ¶æ€ï¼Œç„¶åæ ¹æ®çŠ¶æ€å»é€‰æ‹©ä¸åŒçš„å¤„ç†ã€‚\nè®¤è¯†çŠ¶æ€æ¨¡å¼ çŠ¶æ€å’Œè¡Œä¸º æ‰€è°“å¯¹è±¡çš„çŠ¶æ€ï¼Œé€šå¸¸æŒ‡çš„å°±æ˜¯å¯¹è±¡å®ä¾‹çš„å±æ€§çš„å€¼ï¼›è€Œè¡Œä¸ºæŒ‡çš„å°±æ˜¯å¯¹è±¡çš„åŠŸèƒ½ï¼Œå†å…·ä½“ç‚¹è¯´ï¼Œè¡Œä¸ºå¤§å¤šå¯ä»¥å¯¹åº”åˆ°æ–¹æ³•ä¸Šã€‚ çŠ¶æ€æ¨¡å¼çš„åŠŸèƒ½å°±æ˜¯åˆ†ç¦»çŠ¶æ€çš„è¡Œä¸ºï¼Œé€šè¿‡ç»´æŠ¤çŠ¶æ€çš„å˜åŒ–ï¼Œæ¥è°ƒç”¨ä¸åŒçŠ¶æ€å¯¹åº”çš„ä¸åŒåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŠ¶æ€å’Œè¡Œä¸ºæ˜¯ç›¸å…³è”çš„ï¼Œå®ƒä»¬çš„å…³ç³»å¯ä»¥æè¿°ä¸ºï¼šçŠ¶æ€å†³å®šè¡Œä¸ºã€‚ ç”±äºçŠ¶æ€æ˜¯åœ¨è¿è¡ŒæœŸè¢«æ”¹å˜çš„ï¼Œå› æ­¤è¡Œä¸ºä¹Ÿä¼šåœ¨è¿è¡ŒæœŸæ ¹æ®çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ã€‚\nè¡Œä¸ºçš„å¹³è¡Œæ€§ æ‰€è°“å¹³è¡Œæ€§æŒ‡çš„æ˜¯å„ä¸ªçŠ¶æ€çš„è¡Œä¸ºæ‰€å¤„çš„å±‚æ¬¡æ˜¯ä¸€æ ·çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„ã€æ²¡æœ‰å…³è”çš„ï¼Œæ˜¯æ ¹æ®ä¸åŒçš„çŠ¶æ€æ¥å†³å®šåˆ°åº•èµ°å¹³è¡Œçº¿çš„å“ªä¸€æ¡ã€‚è¡Œä¸ºæ˜¯ä¸åŒçš„ï¼Œå½“ç„¶å¯¹åº”çš„å®ç°ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œç›¸äº’ä¹‹é—´æ˜¯ä¸å¯æ›¿æ¢çš„ã€‚\nç›¸å¯¹å¹³è¡Œæ€§è€Œè¨€çš„æ˜¯å¹³ç­‰æ€§ã€‚å¹³ç­‰æ€§å¼ºè°ƒçš„æ˜¯å¯æ›¿æ¢æ€§ï¼Œå¤§å®¶æ˜¯åŒä¸€è¡Œä¸ºçš„ä¸åŒæè¿°æˆ–å®ç°ï¼Œå› æ­¤åœ¨åŒä¸€ä¸ªè¡Œä¸ºå‘ç”Ÿçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶æŒ‘é€‰ä»»æ„ä¸€ä¸ªå®ç°æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚\nå¤§å®¶å¯èƒ½ä¼šå‘ç°çŠ¶æ€æ¨¡å¼çš„ç»“æ„å’Œç­–ç•¥æ¨¡å¼çš„ç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬çš„ç›®çš„ã€å®ç°ã€æœ¬è´¨å´æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚è¿˜æœ‰è¡Œä¸ºä¹‹é—´çš„ç‰¹æ€§ä¹Ÿæ˜¯çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ï¼š\nçŠ¶æ€æ¨¡å¼çš„è¡Œä¸ºæ˜¯å¹³è¡Œæ€§çš„ï¼Œä¸å¯ç›¸äº’æ›¿æ¢çš„ï¼› è€Œç­–ç•¥æ¨¡å¼çš„è¡Œä¸ºæ˜¯å¹³ç­‰æ€§çš„ï¼Œæ˜¯å¯ä»¥ç›¸äº’æ›¿æ¢çš„ã€‚ ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡ åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œç¯å¢ƒ(Context)æ˜¯æŒæœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œä½†æ˜¯ç¯å¢ƒ(Context)è‡ªèº«å¹¶ä¸å¤„ç†è·ŸçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºï¼Œè€Œæ˜¯æŠŠå¤„ç†çŠ¶æ€çš„åŠŸèƒ½å§”æ‰˜ç»™äº†çŠ¶æ€å¯¹åº”çš„çŠ¶æ€å¤„ç†ç±»æ¥å¤„ç†ã€‚\nåœ¨å…·ä½“çš„çŠ¶æ€å¤„ç†ç±»ä¸­ç»å¸¸éœ€è¦è·å–ç¯å¢ƒ(Context)è‡ªèº«çš„æ•°æ®ï¼Œç”šè‡³åœ¨å¿…è¦çš„æ—¶å€™ä¼šå›è°ƒç¯å¢ƒ(Context)çš„æ–¹æ³•ï¼Œå› æ­¤ï¼Œé€šå¸¸å°†ç¯å¢ƒ(Context)è‡ªèº«å½“ä½œä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å…·ä½“çš„çŠ¶æ€å¤„ç†ç±»ã€‚\nå®¢æˆ·ç«¯ä¸€èˆ¬åªå’Œç¯å¢ƒ(Context)äº¤äº’ã€‚å®¢æˆ·ç«¯å¯ä»¥ç”¨çŠ¶æ€å¯¹è±¡æ¥é…ç½®ä¸€ä¸ªç¯å¢ƒ(Context)ï¼Œä¸€æ—¦é…ç½®å®Œæ¯•ï¼Œå°±ä¸å†éœ€è¦å’ŒçŠ¶æ€å¯¹è±¡æ‰“äº¤é“äº†ã€‚å®¢æˆ·ç«¯é€šå¸¸ä¸è´Ÿè´£è¿è¡ŒæœŸé—´çŠ¶æ€çš„ç»´æŠ¤ï¼Œä¹Ÿä¸è´Ÿè´£å†³å®šåç»­åˆ°åº•ä½¿ç”¨å“ªä¸€ä¸ªå…·ä½“çš„çŠ¶æ€å¤„ç†å¯¹è±¡ã€‚\nå‚è€ƒ\n",
  "wordCount" : "3283",
  "inLanguage": "en",
  "datePublished": "2018-12-23T16:00:11Z",
  "dateModified": "2018-12-23T16:00:11Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath:  [['\\(', '\\)'], ['$', '$']],  
    }
  };
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      çŠ¶æ€æ¨¡å¼
    </h1>
    <div class="post-meta"><span title='2018-12-23 16:00:11 +0000 UTC'>2018-12-23</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%ad%a6%e4%b9%a0" aria-label="å¿«é€Ÿå­¦ä¹ ">å¿«é€Ÿå­¦ä¹ </a></li>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a><ul>
                        
                <li>
                    <a href="#%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f%e7%9a%84%e7%bb%93%e6%9e%84" aria-label="çŠ¶æ€æ¨¡å¼çš„ç»“æ„">çŠ¶æ€æ¨¡å¼çš„ç»“æ„</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%ae%80%e5%8d%95%e7%a4%ba%e4%be%8b" aria-label="ç®€å•ç¤ºä¾‹">ç®€å•ç¤ºä¾‹</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</a></li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%86%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f" aria-label="è®¤è¯†çŠ¶æ€æ¨¡å¼">è®¤è¯†çŠ¶æ€æ¨¡å¼</a><ul>
                        
                <li>
                    <a href="#%e7%8a%b6%e6%80%81%e5%92%8c%e8%a1%8c%e4%b8%ba" aria-label="çŠ¶æ€å’Œè¡Œä¸º">çŠ¶æ€å’Œè¡Œä¸º</a></li>
                <li>
                    <a href="#%e8%a1%8c%e4%b8%ba%e7%9a%84%e5%b9%b3%e8%a1%8c%e6%80%a7" aria-label="è¡Œä¸ºçš„å¹³è¡Œæ€§">è¡Œä¸ºçš„å¹³è¡Œæ€§</a></li>
                <li>
                    <a href="#%e7%8e%af%e5%a2%83%e5%92%8c%e7%8a%b6%e6%80%81%e5%a4%84%e7%90%86%e5%af%b9%e8%b1%a1" aria-label="ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡">ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="å¿«é€Ÿå­¦ä¹ ">å¿«é€Ÿå­¦ä¹ <a hidden class="anchor" aria-hidden="true" href="#å¿«é€Ÿå­¦ä¹ ">#</a></h1>
<p>ç±»å‹ï¼šè¡Œä¸ºå‹</p>
<blockquote>
<p>çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚</p>
</blockquote>
<p>çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ç»å¸¸ç”¨åœ¨å¸¦æœ‰çŠ¶æ€çš„å¯¹è±¡ä¸­ã€‚</p>
<p>ä»€ä¹ˆæ˜¯çŠ¶æ€ï¼Ÿæˆ‘ä»¬ä»¥QQèŠå¤©ä¸ºä¾‹ï¼Œä¸€ä¸ªç”¨æˆ·çš„QQæœ‰å‡ ç§çŠ¶æ€ï¼š</p>
<ul>
<li>ç¦»çº¿çŠ¶æ€ï¼ˆå°šæœªç™»å½•ï¼‰ï¼›</li>
<li>æ­£åœ¨ç™»å½•çŠ¶æ€ï¼›</li>
<li>åœ¨çº¿çŠ¶æ€ï¼›</li>
<li>å¿™çŠ¶æ€ï¼ˆæš‚æ—¶ç¦»å¼€ï¼‰ã€‚</li>
</ul>
<p>å¦‚ä½•è¡¨ç¤ºçŠ¶æ€ï¼Ÿæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>enum</code>å°±å¯ä»¥è¡¨ç¤ºä¸åŒçš„çŠ¶æ€ã€‚ä½†ä¸åŒçš„çŠ¶æ€éœ€è¦å¯¹åº”ä¸åŒçš„è¡Œä¸ºï¼Œæ¯”å¦‚æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>if (state == ONLINE) {
</span></span><span style="display:flex;"><span>    // é—ªçƒå›¾æ ‡
</span></span><span style="display:flex;"><span>} else if (state == BUSY) {
</span></span><span style="display:flex;"><span>    reply(&#34;ç°åœ¨å¿™ï¼Œç¨åå›å¤&#34;);
</span></span><span style="display:flex;"><span>} else if ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>çŠ¶æ€æ¨¡å¼çš„ç›®çš„æ˜¯ä¸ºäº†æŠŠä¸Šè¿°ä¸€å¤§ä¸²<code>if...else...</code>çš„é€»è¾‘ç»™åˆ†æ‹†åˆ°ä¸åŒçš„çŠ¶æ€ç±»ä¸­ï¼Œä½¿å¾—å°†æ¥å¢åŠ çŠ¶æ€æ¯”è¾ƒå®¹æ˜“ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œå®ƒæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼š</p>
<ul>
<li>æœªè¿çº¿ï¼›</li>
<li>å·²è¿çº¿ã€‚</li>
</ul>
<p>å¯¹äºæœªè¿çº¿çŠ¶æ€ï¼Œæˆ‘ä»¬æ”¶åˆ°æ¶ˆæ¯ä¹Ÿä¸å›å¤ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public class DisconnectedState implements State {
</span></span><span style="display:flex;"><span>    public String init() {
</span></span><span style="display:flex;"><span>        return &#34;Bye!&#34;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    public String reply(String input) {
</span></span><span style="display:flex;"><span>        return &#34;&#34;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äºå·²è¿çº¿çŠ¶æ€ï¼Œæˆ‘ä»¬å›åº”æ”¶åˆ°çš„æ¶ˆæ¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public class ConnectedState implements State {
</span></span><span style="display:flex;"><span>    public String init() {
</span></span><span style="display:flex;"><span>        return &#34;Hello, I&#39;m Bob.&#34;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    public String reply(String input) {
</span></span><span style="display:flex;"><span>        if (input.endsWith(&#34;?&#34;)) {
</span></span><span style="display:flex;"><span>            return &#34;Yes. &#34; + input.substring(0, input.length() - 1) + &#34;!&#34;;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        if (input.endsWith(&#34;.&#34;)) {
</span></span><span style="display:flex;"><span>            return input.substring(0, input.length() - 1) + &#34;!&#34;;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        return input.substring(0, input.length() - 1) + &#34;?&#34;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>çŠ¶æ€æ¨¡å¼çš„å…³é”®è®¾è®¡æ€æƒ³åœ¨äºçŠ¶æ€åˆ‡æ¢ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ª<code>BotContext</code>å®ŒæˆçŠ¶æ€åˆ‡æ¢ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>public class BotContext {
</span></span><span style="display:flex;"><span>	private State state = new DisconnectedState();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	public String chat(String input) {
</span></span><span style="display:flex;"><span>		if (&#34;hello&#34;.equalsIgnoreCase(input)) {
</span></span><span style="display:flex;"><span>            // æ”¶åˆ°helloåˆ‡æ¢åˆ°åœ¨çº¿çŠ¶æ€:
</span></span><span style="display:flex;"><span>			state = new ConnectedState();
</span></span><span style="display:flex;"><span>			return state.init();
</span></span><span style="display:flex;"><span>		} else if (&#34;bye&#34;.equalsIgnoreCase(input)) {
</span></span><span style="display:flex;"><span>            /  æ”¶åˆ°byeåˆ‡æ¢åˆ°ç¦»çº¿çŠ¶æ€:
</span></span><span style="display:flex;"><span>			state = new DisconnectedState();
</span></span><span style="display:flex;"><span>			return state.init();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		return state.reply(input);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ï¼Œä¸€ä¸ªä»·å€¼åƒä¸‡çš„AIèŠå¤©æœºå™¨äººå°±è¯ç”Ÿäº†ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Scanner scanner = new Scanner(System.in);
</span></span><span style="display:flex;"><span>BotContext bot = new BotContext();
</span></span><span style="display:flex;"><span>for (;;) {
</span></span><span style="display:flex;"><span>    System.out.print(&#34;&gt; &#34;);
</span></span><span style="display:flex;"><span>    String input = scanner.nextLine();
</span></span><span style="display:flex;"><span>    String output = bot.chat(input);
</span></span><span style="display:flex;"><span>    System.out.println(output.isEmpty() ? &#34;(no reply)&#34; : &#34;&lt; &#34; + output);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯•è¯•æ•ˆæœï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&gt; hello
</span></span><span style="display:flex;"><span>&lt; Hello, I&#39;m Bob.
</span></span><span style="display:flex;"><span>&gt; Nice to meet you.
</span></span><span style="display:flex;"><span>&lt; Nice to meet you!
</span></span><span style="display:flex;"><span>&gt; Today is cold?
</span></span><span style="display:flex;"><span>&lt; Yes. Today is cold!
</span></span><span style="display:flex;"><span>&gt; bye
</span></span><span style="display:flex;"><span>&lt; Bye!
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<h2 id="çŠ¶æ€æ¨¡å¼çš„ç»“æ„">çŠ¶æ€æ¨¡å¼çš„ç»“æ„<a hidden class="anchor" aria-hidden="true" href="#çŠ¶æ€æ¨¡å¼çš„ç»“æ„">#</a></h2>
<p>çŠ¶æ€æ¨¡å¼æŠŠæ‰€ç ”ç©¶çš„å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡é‡Œï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡éƒ½å±äºä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»çš„ä¸€ä¸ªå­ç±»ã€‚çŠ¶æ€æ¨¡å¼çš„æ„å›¾æ˜¯è®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚</p>
<p>çŠ¶æ€æ¨¡å¼æ¶‰åŠåˆ°çš„è§’è‰²æœ‰ï¼š</p>
<ul>
<li>
<p>ç¯å¢ƒ(Context)è§’è‰²ï¼Œä¹Ÿç§°ä¸Šä¸‹æ–‡ï¼š
å®šä¹‰å®¢æˆ·ç«¯æ‰€æ„Ÿå…´è¶£çš„æ¥å£ï¼Œå¹¶ä¸”ä¿ç•™ä¸€ä¸ªå…·ä½“çŠ¶æ€ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªå…·ä½“çŠ¶æ€ç±»çš„å®ä¾‹ç»™å‡ºæ­¤ç¯å¢ƒå¯¹è±¡çš„ç°æœ‰çŠ¶æ€ã€‚</p>
</li>
<li>
<p>æŠ½è±¡çŠ¶æ€(State)è§’è‰²ï¼š
å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨ä»¥å°è£…ç¯å¢ƒï¼ˆContextï¼‰å¯¹è±¡çš„ä¸€ä¸ªç‰¹å®šçš„çŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºã€‚</p>
</li>
<li>
<p>å…·ä½“çŠ¶æ€(ConcreteState)è§’è‰²ï¼š
æ¯ä¸€ä¸ªå…·ä½“çŠ¶æ€ç±»éƒ½å®ç°äº†ç¯å¢ƒï¼ˆContextï¼‰çš„ä¸€ä¸ªçŠ¶æ€æ‰€å¯¹åº”çš„è¡Œä¸ºã€‚</p>
</li>
</ul>
<h1 id="ç®€å•ç¤ºä¾‹">ç®€å•ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#ç®€å•ç¤ºä¾‹">#</a></h1>
<p>æŠ½è±¡çŠ¶æ€ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> State {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * çŠ¶æ€å¯¹åº”çš„å¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> handle(String sampleParameter);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çŠ¶æ€ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConcreteStateA <span style="color:#fff;font-weight:bold">implements</span> State {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> handle(String sampleParameter) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ConcreteStateA handle ï¼š&#34;</span> + sampleParameter);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConcreteStateB <span style="color:#fff;font-weight:bold">implements</span> State {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> handle(String sampleParameter) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ConcreteStateB handle ï¼š&#34;</span> + sampleParameter);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¯å¢ƒè§’è‰²ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Context {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æŒæœ‰ä¸€ä¸ªStateç±»å‹çš„å¯¹è±¡å®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> State state;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setState(State state) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">state</span> = state;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ç”¨æˆ·æ„Ÿå…´è¶£çš„æ¥å£æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> request(String sampleParameter) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è½¬è°ƒstateæ¥å¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        state.<span style="color:#007f7f">handle</span>(sampleParameter);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®¢æˆ·ç«¯ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Client {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºçŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        State state = <span style="color:#fff;font-weight:bold">new</span> ConcreteStateB();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºç¯å¢ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Context context = <span style="color:#fff;font-weight:bold">new</span> Context();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å°†çŠ¶æ€è®¾ç½®åˆ°ç¯å¢ƒä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        context.<span style="color:#007f7f">setState</span>(state);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        context.<span style="color:#007f7f">request</span>(<span style="color:#0ff;font-weight:bold">&#34;test&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨åœºæ™¯">#</a></h1>
<p>è€ƒè™‘ä¸€ä¸ªåœ¨çº¿æŠ•ç¥¨ç³»ç»Ÿçš„åº”ç”¨ï¼Œè¦å®ç°æ§åˆ¶åŒä¸€ä¸ªç”¨æˆ·åªèƒ½æŠ•ä¸€ç¥¨ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·åå¤æŠ•ç¥¨ï¼Œè€Œä¸”æŠ•ç¥¨æ¬¡æ•°è¶…è¿‡5æ¬¡ï¼Œåˆ™åˆ¤å®šä¸ºæ¶æ„åˆ·ç¥¨ï¼Œè¦å–æ¶ˆè¯¥ç”¨æˆ·æŠ•ç¥¨çš„èµ„æ ¼ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿè¦å–æ¶ˆä»–æ‰€æŠ•çš„ç¥¨ï¼›å¦‚æœä¸€ä¸ªç”¨æˆ·çš„æŠ•ç¥¨æ¬¡æ•°è¶…è¿‡8æ¬¡ï¼Œå°†è¿›å…¥é»‘åå•ï¼Œç¦æ­¢å†ç™»å½•å’Œä½¿ç”¨ç³»ç»Ÿã€‚
è¦ä½¿ç”¨çŠ¶æ€æ¨¡å¼å®ç°ï¼Œé¦–å…ˆéœ€è¦æŠŠæŠ•ç¥¨è¿‡ç¨‹çš„å„ç§çŠ¶æ€å®šä¹‰å‡ºæ¥ï¼Œæ ¹æ®ä»¥ä¸Šæè¿°å¤§è‡´åˆ†ä¸ºå››ç§çŠ¶æ€ï¼šæ­£å¸¸æŠ•ç¥¨ã€åå¤æŠ•ç¥¨ã€æ¶æ„åˆ·ç¥¨ã€è¿›å…¥é»‘åå•ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªæŠ•ç¥¨ç®¡ç†å¯¹è±¡ï¼ˆç›¸å½“äºContextï¼‰ã€‚</p>
<p>æŠ½è±¡çŠ¶æ€ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> VoteState {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * å¤„ç†çŠ¶æ€å¯¹åº”çš„è¡Œä¸º
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param user    æŠ•ç¥¨äºº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param voteItem    æŠ•ç¥¨é¡¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param voteManager    æŠ•ç¥¨ä¸Šä¸‹æ–‡ï¼Œç”¨æ¥åœ¨å®ç°çŠ¶æ€å¯¹åº”çš„åŠŸèƒ½å¤„ç†çš„æ—¶å€™ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     *                         å¯ä»¥å›è°ƒä¸Šä¸‹æ–‡çš„æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user,String voteItem,VoteManager voteManager);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çŠ¶æ€ç±»â€”â€”æ­£å¸¸æŠ•ç¥¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> NormalVoteState <span style="color:#fff;font-weight:bold">implements</span> VoteState {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user, String voteItem, VoteManager voteManager) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ­£å¸¸æŠ•ç¥¨ï¼Œè®°å½•åˆ°æŠ•ç¥¨è®°å½•ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        voteManager.<span style="color:#007f7f">getMapVote</span>().<span style="color:#007f7f">put</span>(user, voteItem);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;æ­å–œæŠ•ç¥¨æˆåŠŸ&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çŠ¶æ€ç±»â€”â€”é‡å¤æŠ•ç¥¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> RepeatVoteState <span style="color:#fff;font-weight:bold">implements</span> VoteState {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user, String voteItem, VoteManager voteManager) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é‡å¤æŠ•ç¥¨ï¼Œæš‚æ—¶ä¸åšå¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;è¯·ä¸è¦é‡å¤æŠ•ç¥¨&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çŠ¶æ€ç±»â€”â€”æ¶æ„åˆ·ç¥¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpiteVoteState <span style="color:#fff;font-weight:bold">implements</span> VoteState {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user, String voteItem, VoteManager voteManager) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æ¶æ„æŠ•ç¥¨ï¼Œå–æ¶ˆç”¨æˆ·çš„æŠ•ç¥¨èµ„æ ¼ï¼Œå¹¶å–æ¶ˆæŠ•ç¥¨è®°å½•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String str = voteManager.<span style="color:#007f7f">getMapVote</span>().<span style="color:#007f7f">get</span>(user);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span>(str != <span style="color:#fff;font-weight:bold">null</span>){
</span></span><span style="display:flex;"><span>            voteManager.<span style="color:#007f7f">getMapVote</span>().<span style="color:#007f7f">remove</span>(user);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ä½ æœ‰æ¶æ„åˆ·å±è¡Œä¸ºï¼Œå–æ¶ˆæŠ•ç¥¨èµ„æ ¼&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çŠ¶æ€ç±»â€”â€”é»‘åå•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> BlackVoteState <span style="color:#fff;font-weight:bold">implements</span> VoteState {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user, String voteItem, VoteManager voteManager) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è®°å½•é»‘åå•ä¸­ï¼Œç¦æ­¢ç™»å½•ç³»ç»Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;è¿›å…¥é»‘åå•ï¼Œå°†ç¦æ­¢ç™»å½•å’Œä½¿ç”¨æœ¬ç³»ç»Ÿ&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¯å¢ƒç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> VoteManager {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æŒæœ‰çŠ¶ä½“å¤„ç†å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> VoteState state = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®°å½•ç”¨æˆ·æŠ•ç¥¨çš„ç»“æœï¼ŒMap&lt;String,String&gt;å¯¹åº”Map&lt;ç”¨æˆ·åç§°ï¼ŒæŠ•ç¥¨çš„é€‰é¡¹&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> Map&lt;String,String&gt; mapVote = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;String,String&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®°å½•ç”¨æˆ·æŠ•ç¥¨æ¬¡æ•°ï¼ŒMap&lt;String,Integer&gt;å¯¹åº”Map&lt;ç”¨æˆ·åç§°ï¼ŒæŠ•ç¥¨çš„æ¬¡æ•°&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">private</span> Map&lt;String,Integer&gt; mapVoteCount = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;String,Integer&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * è·å–ç”¨æˆ·æŠ•ç¥¨ç»“æœçš„Map
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Map&lt;String, String&gt; getMapVote() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> mapVote;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * æŠ•ç¥¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param user    æŠ•ç¥¨äºº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * @param voteItem    æŠ•ç¥¨çš„é€‰é¡¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> vote(String user,String voteItem){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//1.ä¸ºè¯¥ç”¨æˆ·å¢åŠ æŠ•ç¥¨æ¬¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ä»è®°å½•ä¸­å–å‡ºè¯¥ç”¨æˆ·å·²æœ‰çš„æŠ•ç¥¨æ¬¡æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Integer oldVoteCount = mapVoteCount.<span style="color:#007f7f">get</span>(user);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span>(oldVoteCount == <span style="color:#fff;font-weight:bold">null</span>){
</span></span><span style="display:flex;"><span>            oldVoteCount = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        oldVoteCount += <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        mapVoteCount.<span style="color:#007f7f">put</span>(user, oldVoteCount);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//2.åˆ¤æ–­è¯¥ç”¨æˆ·çš„æŠ•ç¥¨ç±»å‹ï¼Œå°±ç›¸å½“äºåˆ¤æ–­å¯¹åº”çš„çŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//åˆ°åº•æ˜¯æ­£å¸¸æŠ•ç¥¨ã€é‡å¤æŠ•ç¥¨ã€æ¶æ„æŠ•ç¥¨è¿˜æ˜¯ä¸Šé»‘åå•çš„çŠ¶æ€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span>(oldVoteCount == <span style="color:#ff0;font-weight:bold">1</span>){
</span></span><span style="display:flex;"><span>            state = <span style="color:#fff;font-weight:bold">new</span> NormalVoteState();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(oldVoteCount &gt; <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; oldVoteCount &lt; <span style="color:#ff0;font-weight:bold">5</span>){
</span></span><span style="display:flex;"><span>            state = <span style="color:#fff;font-weight:bold">new</span> RepeatVoteState();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(oldVoteCount &gt;= <span style="color:#ff0;font-weight:bold">5</span> &amp;&amp; oldVoteCount &lt;<span style="color:#ff0;font-weight:bold">8</span>){
</span></span><span style="display:flex;"><span>            state = <span style="color:#fff;font-weight:bold">new</span> SpiteVoteState();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span>(oldVoteCount &gt; <span style="color:#ff0;font-weight:bold">8</span>){
</span></span><span style="display:flex;"><span>            state = <span style="color:#fff;font-weight:bold">new</span> BlackVoteState();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ç„¶åè½¬è°ƒçŠ¶æ€å¯¹è±¡æ¥è¿›è¡Œç›¸åº”çš„æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        state.<span style="color:#007f7f">vote</span>(user, voteItem, <span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®¢æˆ·ç«¯ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Client {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        VoteManager vm = <span style="color:#fff;font-weight:bold">new</span> VoteManager();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span>(<span style="color:#fff;font-weight:bold">int</span> i=<span style="color:#ff0;font-weight:bold">0</span>;i&lt;<span style="color:#ff0;font-weight:bold">9</span>;i++){
</span></span><span style="display:flex;"><span>            vm.<span style="color:#007f7f">vote</span>(<span style="color:#0ff;font-weight:bold">&#34;u1&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;A&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼ŒçŠ¶æ€çš„è½¬æ¢åŸºæœ¬ä¸Šéƒ½æ˜¯å†…éƒ¨è¡Œä¸ºï¼Œä¸»è¦åœ¨çŠ¶æ€æ¨¡å¼å†…éƒ¨æ¥ç»´æŠ¤ã€‚æ¯”å¦‚å¯¹äºæŠ•ç¥¨çš„äººå‘˜ï¼Œä»»ä½•æ—¶å€™ä»–çš„æ“ä½œéƒ½æ˜¯æŠ•ç¥¨ï¼Œä½†æ˜¯æŠ•ç¥¨ç®¡ç†å¯¹è±¡çš„å¤„ç†å´ä¸ä¸€å®šä¸€æ ·ï¼Œä¼šæ ¹æ®æŠ•ç¥¨çš„æ¬¡æ•°æ¥åˆ¤æ–­çŠ¶æ€ï¼Œç„¶åæ ¹æ®çŠ¶æ€å»é€‰æ‹©ä¸åŒçš„å¤„ç†ã€‚</p>
<h1 id="è®¤è¯†çŠ¶æ€æ¨¡å¼">è®¤è¯†çŠ¶æ€æ¨¡å¼<a hidden class="anchor" aria-hidden="true" href="#è®¤è¯†çŠ¶æ€æ¨¡å¼">#</a></h1>
<h2 id="çŠ¶æ€å’Œè¡Œä¸º">çŠ¶æ€å’Œè¡Œä¸º<a hidden class="anchor" aria-hidden="true" href="#çŠ¶æ€å’Œè¡Œä¸º">#</a></h2>
<p>æ‰€è°“å¯¹è±¡çš„çŠ¶æ€ï¼Œé€šå¸¸æŒ‡çš„å°±æ˜¯å¯¹è±¡å®ä¾‹çš„å±æ€§çš„å€¼ï¼›è€Œè¡Œä¸ºæŒ‡çš„å°±æ˜¯å¯¹è±¡çš„åŠŸèƒ½ï¼Œå†å…·ä½“ç‚¹è¯´ï¼Œè¡Œä¸ºå¤§å¤šå¯ä»¥å¯¹åº”åˆ°æ–¹æ³•ä¸Šã€‚
çŠ¶æ€æ¨¡å¼çš„åŠŸèƒ½å°±æ˜¯åˆ†ç¦»çŠ¶æ€çš„è¡Œä¸ºï¼Œé€šè¿‡ç»´æŠ¤çŠ¶æ€çš„å˜åŒ–ï¼Œæ¥è°ƒç”¨ä¸åŒçŠ¶æ€å¯¹åº”çš„ä¸åŒåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŠ¶æ€å’Œè¡Œä¸ºæ˜¯ç›¸å…³è”çš„ï¼Œå®ƒä»¬çš„å…³ç³»å¯ä»¥æè¿°ä¸ºï¼šçŠ¶æ€å†³å®šè¡Œä¸ºã€‚
ç”±äºçŠ¶æ€æ˜¯åœ¨è¿è¡ŒæœŸè¢«æ”¹å˜çš„ï¼Œå› æ­¤è¡Œä¸ºä¹Ÿä¼šåœ¨è¿è¡ŒæœŸæ ¹æ®çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ã€‚</p>
<h2 id="è¡Œä¸ºçš„å¹³è¡Œæ€§">è¡Œä¸ºçš„å¹³è¡Œæ€§<a hidden class="anchor" aria-hidden="true" href="#è¡Œä¸ºçš„å¹³è¡Œæ€§">#</a></h2>
<p>æ‰€è°“å¹³è¡Œæ€§æŒ‡çš„æ˜¯å„ä¸ªçŠ¶æ€çš„è¡Œä¸ºæ‰€å¤„çš„å±‚æ¬¡æ˜¯ä¸€æ ·çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„ã€æ²¡æœ‰å…³è”çš„ï¼Œæ˜¯æ ¹æ®ä¸åŒçš„çŠ¶æ€æ¥å†³å®šåˆ°åº•èµ°å¹³è¡Œçº¿çš„å“ªä¸€æ¡ã€‚è¡Œä¸ºæ˜¯ä¸åŒçš„ï¼Œå½“ç„¶å¯¹åº”çš„å®ç°ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œç›¸äº’ä¹‹é—´æ˜¯ä¸å¯æ›¿æ¢çš„ã€‚</p>
<p>ç›¸å¯¹å¹³è¡Œæ€§è€Œè¨€çš„æ˜¯å¹³ç­‰æ€§ã€‚å¹³ç­‰æ€§å¼ºè°ƒçš„æ˜¯å¯æ›¿æ¢æ€§ï¼Œå¤§å®¶æ˜¯åŒä¸€è¡Œä¸ºçš„ä¸åŒæè¿°æˆ–å®ç°ï¼Œå› æ­¤åœ¨åŒä¸€ä¸ªè¡Œä¸ºå‘ç”Ÿçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶æŒ‘é€‰ä»»æ„ä¸€ä¸ªå®ç°æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p>
<p>å¤§å®¶å¯èƒ½ä¼šå‘ç°çŠ¶æ€æ¨¡å¼çš„ç»“æ„å’Œç­–ç•¥æ¨¡å¼çš„ç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬çš„ç›®çš„ã€å®ç°ã€æœ¬è´¨å´æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚è¿˜æœ‰è¡Œä¸ºä¹‹é—´çš„ç‰¹æ€§ä¹Ÿæ˜¯çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ï¼š</p>
<ul>
<li>çŠ¶æ€æ¨¡å¼çš„è¡Œä¸ºæ˜¯å¹³è¡Œæ€§çš„ï¼Œä¸å¯ç›¸äº’æ›¿æ¢çš„ï¼›</li>
<li>è€Œç­–ç•¥æ¨¡å¼çš„è¡Œä¸ºæ˜¯å¹³ç­‰æ€§çš„ï¼Œæ˜¯å¯ä»¥ç›¸äº’æ›¿æ¢çš„ã€‚</li>
</ul>
<h2 id="ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡">ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#ç¯å¢ƒå’ŒçŠ¶æ€å¤„ç†å¯¹è±¡">#</a></h2>
<p>åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œç¯å¢ƒ(Context)æ˜¯æŒæœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œä½†æ˜¯ç¯å¢ƒ(Context)è‡ªèº«å¹¶ä¸å¤„ç†è·ŸçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºï¼Œè€Œæ˜¯æŠŠå¤„ç†çŠ¶æ€çš„åŠŸèƒ½å§”æ‰˜ç»™äº†çŠ¶æ€å¯¹åº”çš„çŠ¶æ€å¤„ç†ç±»æ¥å¤„ç†ã€‚</p>
<p>åœ¨å…·ä½“çš„çŠ¶æ€å¤„ç†ç±»ä¸­ç»å¸¸éœ€è¦è·å–ç¯å¢ƒ(Context)è‡ªèº«çš„æ•°æ®ï¼Œç”šè‡³åœ¨å¿…è¦çš„æ—¶å€™ä¼šå›è°ƒç¯å¢ƒ(Context)çš„æ–¹æ³•ï¼Œå› æ­¤ï¼Œé€šå¸¸å°†ç¯å¢ƒ(Context)è‡ªèº«å½“ä½œä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å…·ä½“çš„çŠ¶æ€å¤„ç†ç±»ã€‚</p>
<p>å®¢æˆ·ç«¯ä¸€èˆ¬åªå’Œç¯å¢ƒ(Context)äº¤äº’ã€‚å®¢æˆ·ç«¯å¯ä»¥ç”¨çŠ¶æ€å¯¹è±¡æ¥é…ç½®ä¸€ä¸ªç¯å¢ƒ(Context)ï¼Œä¸€æ—¦é…ç½®å®Œæ¯•ï¼Œå°±ä¸å†éœ€è¦å’ŒçŠ¶æ€å¯¹è±¡æ‰“äº¤é“äº†ã€‚å®¢æˆ·ç«¯é€šå¸¸ä¸è´Ÿè´£è¿è¡ŒæœŸé—´çŠ¶æ€çš„ç»´æŠ¤ï¼Œä¹Ÿä¸è´Ÿè´£å†³å®šåç»­åˆ°åº•ä½¿ç”¨å“ªä¸€ä¸ªå…·ä½“çš„çŠ¶æ€å¤„ç†å¯¹è±¡ã€‚</p>
<p><a href="https://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html">å‚è€ƒ</a></p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>