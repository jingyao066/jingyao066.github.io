<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>è£…é¥°æ¨¡å¼ | Wjy&#39;s Blog</title>
<meta name="keywords" content="è®¾è®¡æ¨¡å¼">
<meta name="description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šç»“æ„å‹

åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚
">
<meta name="author" content="Wjy">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="è£…é¥°æ¨¡å¼" />
<meta property="og:description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šç»“æ„å‹

åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-29T13:54:05+00:00" />
<meta property="article:modified_time" content="2018-12-29T13:54:05+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="è£…é¥°æ¨¡å¼"/>
<meta name="twitter:description" content="å¿«é€Ÿå­¦ä¹ 
ç±»å‹ï¼šç»“æ„å‹

åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚
"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "è£…é¥°æ¨¡å¼",
      "item": "https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "è£…é¥°æ¨¡å¼",
  "name": "è£…é¥°æ¨¡å¼",
  "description": "å¿«é€Ÿå­¦ä¹  ç±»å‹ï¼šç»“æ„å‹\nåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚\n",
  "keywords": [
    "è®¾è®¡æ¨¡å¼"
  ],
  "articleBody": "å¿«é€Ÿå­¦ä¹  ç±»å‹ï¼šç»“æ„å‹\nåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚\nè£…é¥°å™¨ï¼ˆDecoratorï¼‰æ¨¡å¼ï¼Œæ˜¯ä¸€ç§åœ¨è¿è¡ŒæœŸåŠ¨æ€ç»™æŸä¸ªå¯¹è±¡çš„å®ä¾‹å¢åŠ åŠŸèƒ½çš„æ–¹æ³•ã€‚\næˆ‘ä»¬åœ¨IOçš„Filteræ¨¡å¼ä¸€èŠ‚ä¸­å…¶å®å·²ç»è®²è¿‡è£…é¥°å™¨æ¨¡å¼äº†ã€‚åœ¨Javaæ ‡å‡†åº“ä¸­ï¼ŒInputStreamæ˜¯æŠ½è±¡ç±»ï¼ŒFileInputStreamã€ServletInputStreamã€Socket.getInputStream()è¿™äº›InputStreaméƒ½æ˜¯æœ€ç»ˆæ•°æ®æºã€‚\nç°åœ¨ï¼Œå¦‚æœè¦ç»™ä¸åŒçš„æœ€ç»ˆæ•°æ®æºå¢åŠ ç¼“å†²åŠŸèƒ½ã€è®¡ç®—ç­¾ååŠŸèƒ½ã€åŠ å¯†è§£å¯†åŠŸèƒ½ï¼Œé‚£ä¹ˆï¼Œ3ä¸ªæœ€ç»ˆæ•°æ®æºã€3ç§åŠŸèƒ½ä¸€å…±éœ€è¦9ä¸ªå­ç±»ã€‚å¦‚æœç»§ç»­å¢åŠ æœ€ç»ˆæ•°æ®æºï¼Œæˆ–è€…å¢åŠ æ–°åŠŸèƒ½ï¼Œå­ç±»ä¼šçˆ†ç‚¸å¼å¢é•¿ï¼Œè¿™ç§è®¾è®¡æ–¹å¼æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚\nDecoratoræ¨¡å¼çš„ç›®çš„å°±æ˜¯æŠŠä¸€ä¸ªä¸€ä¸ªçš„é™„åŠ åŠŸèƒ½ï¼Œç”¨Decoratorçš„æ–¹å¼ç»™ä¸€å±‚ä¸€å±‚åœ°ç´¯åŠ åˆ°åŸå§‹æ•°æ®æºä¸Šï¼Œæœ€ç»ˆï¼Œé€šè¿‡ç»„åˆè·å¾—æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚\nä¾‹å¦‚ï¼šç»™FileInputStreamå¢åŠ ç¼“å†²å’Œè§£å‹ç¼©åŠŸèƒ½ï¼Œç”¨Decoratoræ¨¡å¼å†™å‡ºæ¥å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 // åˆ›å»ºåŸå§‹çš„æ•°æ®æº: InputStream fis = new FileInputStream(\"test.gz\"); // å¢åŠ ç¼“å†²åŠŸèƒ½: InputStream bis = new BufferedInputStream(fis); // å¢åŠ è§£å‹ç¼©åŠŸèƒ½: InputStream gis = new GZIPInputStream(bis); æˆ–è€…ä¸€æ¬¡æ€§å†™æˆè¿™æ ·ï¼š\n1 2 3 4 InputStream input = new GZIPInputStream( // ç¬¬äºŒå±‚è£…é¥° new BufferedInputStream( // ç¬¬ä¸€å±‚è£…é¥° new FileInputStream(\"test.gz\") // æ ¸å¿ƒåŠŸèƒ½ )); è§‚å¯ŸBufferedInputStreamå’ŒGZIPInputStreamï¼Œå®ƒä»¬å®é™…ä¸Šéƒ½æ˜¯ä»FilterInputStreamç»§æ‰¿çš„ï¼Œè¿™ä¸ªFilterInputStreamå°±æ˜¯ä¸€ä¸ªæŠ½è±¡çš„Decoratorã€‚æˆ‘ä»¬ç”¨å›¾æŠŠDecoratoræ¨¡å¼ç”»å‡ºæ¥å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Component â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ComponentA â”‚â”‚ComponentB â”‚... â”‚ Decorator â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–² â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚DecoratorA â”‚ â”‚DecoratorB â”‚... â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æœ€é¡¶å±‚çš„Componentæ˜¯æ¥å£ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯InputStreamè¿™ä¸ªæŠ½è±¡ç±»ã€‚ComponentAã€ComponentBæ˜¯å®é™…çš„å­ç±»ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯FileInputStreamã€ServletInputStreamè¿™äº›æ•°æ®æºã€‚Decoratoræ˜¯ç”¨äºå®ç°å„ä¸ªé™„åŠ åŠŸèƒ½çš„æŠ½è±¡è£…é¥°å™¨ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯FilterInputStreamã€‚è€Œä»Decoratoræ´¾ç”Ÿçš„å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„è£…é¥°å™¨ï¼Œå®ƒä»¬æ¯ä¸ªéƒ½æœ‰ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯BufferedInputStreamã€GZIPInputStreamç­‰ã€‚\nDecoratoræ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå®ƒå®é™…ä¸ŠæŠŠæ ¸å¿ƒåŠŸèƒ½å’Œé™„åŠ åŠŸèƒ½ç»™åˆ†å¼€äº†ã€‚æ ¸å¿ƒåŠŸèƒ½æŒ‡FileInputStreamè¿™äº›çœŸæ­£è¯»æ•°æ®çš„æºå¤´ï¼Œé™„åŠ åŠŸèƒ½æŒ‡åŠ ç¼“å†²ã€å‹ç¼©ã€è§£å¯†è¿™äº›åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬è¦æ–°å¢æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±å¢åŠ Componentçš„å­ç±»ï¼Œä¾‹å¦‚ByteInputStreamã€‚å¦‚æœæˆ‘ä»¬è¦å¢åŠ é™„åŠ åŠŸèƒ½ï¼Œå°±å¢åŠ Decoratorçš„å­ç±»ï¼Œä¾‹å¦‚CipherInputStreamã€‚ä¸¤éƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰©å±•ï¼Œè€Œå…·ä½“å¦‚ä½•é™„åŠ åŠŸèƒ½ï¼Œç”±è°ƒç”¨æ–¹è‡ªç”±ç»„åˆï¼Œä»è€Œæå¤§åœ°å¢å¼ºäº†çµæ´»æ€§ã€‚\nå¦‚æœæˆ‘ä»¬è¦è‡ªå·±è®¾è®¡å®Œæ•´çš„Decoratoræ¨¡å¼ï¼Œåº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ\næˆ‘ä»¬è¿˜æ˜¯ä¸¾ä¸ªæ —å­ï¼šå‡è®¾æˆ‘ä»¬éœ€è¦æ¸²æŸ“ä¸€ä¸ªHTMLçš„æ–‡æœ¬ï¼Œä½†æ˜¯æ–‡æœ¬è¿˜å¯ä»¥é™„åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚åŠ ç²—ã€å˜æ–œä½“ã€åŠ ä¸‹åˆ’çº¿ç­‰ã€‚ä¸ºäº†å®ç°åŠ¨æ€é™„åŠ æ•ˆæœï¼Œå¯ä»¥é‡‡ç”¨Decoratoræ¨¡å¼ã€‚\né¦–å…ˆï¼Œä»ç„¶éœ€è¦å®šä¹‰é¡¶å±‚æ¥å£TextNodeï¼š\n1 2 3 4 5 6 public interface TextNode { // è®¾ç½®text: void setText(String text); // è·å–text: String getText(); } å¯¹äºæ ¸å¿ƒèŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼Œå®ƒéœ€è¦ä»TextNodeç›´æ¥ç»§æ‰¿ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public class SpanNode implements TextNode { private String text; public void setText(String text) { this.text = text; } public String getText() { return \"\" + text + \"\"; } } ç´§æ¥ç€ï¼Œä¸ºäº†å®ç°Decoratoræ¨¡å¼ï¼Œéœ€è¦æœ‰ä¸€ä¸ªæŠ½è±¡çš„Decoratorç±»ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public abstract class NodeDecorator implements TextNode { protected final TextNode target; protected NodeDecorator(TextNode target) { this.target = target; } public void setText(String text) { this.target.setText(text); } } è¿™ä¸ªNodeDecoratorç±»çš„æ ¸å¿ƒæ˜¯æŒæœ‰ä¸€ä¸ªTextNodeï¼Œå³å°†è¦æŠŠåŠŸèƒ½é™„åŠ åˆ°çš„TextNodeå®ä¾‹ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥å†™ä¸€ä¸ªåŠ ç²—åŠŸèƒ½ï¼š\n1 2 3 4 5 6 7 8 9 public class BoldDecorator extends NodeDecorator { public BoldDecorator(TextNode target) { super(target); } public String getText() { return \"\" + target.getText() + \"\"; } } ç±»ä¼¼çš„ï¼Œå¯ä»¥ç»§ç»­åŠ ItalicDecoratorã€UnderlineDecoratorç­‰ã€‚å®¢æˆ·ç«¯å¯ä»¥è‡ªç”±ç»„åˆè¿™äº›Decoratorï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 TextNode n1 = new SpanNode(); TextNode n2 = new BoldDecorator(new UnderlineDecorator(new SpanNode())); TextNode n3 = new ItalicDecorator(new BoldDecorator(new SpanNode())); n1.setText(\"Hello\"); n2.setText(\"Decorated\"); n3.setText(\"World\"); System.out.println(n1.getText()); // è¾“å‡ºHello System.out.println(n2.getText()); // è¾“å‡ºDecorated System.out.println(n3.getText()); // è¾“å‡ºWorld æ¦‚è¿° è£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„åŠ ä¸Šæ›´å¤šçš„è´£ä»»ã€‚æ¢è¨€ä¹‹ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šè§‰å¾—å¯¹è±¡åœ¨è£…é¥°å‰å’Œè£…é¥°åæœ‰ä»€ä¹ˆä¸åŒã€‚è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸ä½¿ç”¨åˆ›é€ æ›´å¤šå­ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•ã€‚ ä¼˜ç‚¹\nè£…é¥°æ¨¡å¼ä¸ç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚è£…é¥°æ¨¡å¼å…è®¸ç³»ç»ŸåŠ¨æ€å†³å®šâ€œè´´ä¸Šâ€ä¸€ä¸ªéœ€è¦çš„â€œè£…é¥°â€ï¼Œæˆ–è€…é™¤æ‰ä¸€ä¸ªä¸éœ€è¦çš„â€œè£…é¥°â€ã€‚ç»§æ‰¿å…³ç³»åˆ™ä¸åŒï¼Œç»§æ‰¿å…³ç³»æ˜¯é™æ€çš„ï¼Œå®ƒåœ¨ç³»ç»Ÿè¿è¡Œå‰å°±å†³å®šäº†ã€‚\né€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œè®¾è®¡å¸ˆå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚\nç¼ºç‚¹ ç”±äºä½¿ç”¨è£…é¥°æ¨¡å¼ï¼Œå¯ä»¥æ¯”ä½¿ç”¨ç»§æ‰¿å…³ç³»éœ€è¦è¾ƒå°‘æ•°ç›®çš„ç±»ã€‚ä½¿ç”¨è¾ƒå°‘çš„ç±»ï¼Œå½“ç„¶ä½¿è®¾è®¡æ¯”è¾ƒæ˜“äºè¿›è¡Œã€‚ä½†æ˜¯ï¼Œåœ¨å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨è£…é¥°æ¨¡å¼ä¼šäº§ç”Ÿæ¯”ä½¿ç”¨ç»§æ‰¿å…³ç³»æ›´å¤šçš„å¯¹è±¡ã€‚æ›´å¤šçš„å¯¹è±¡ä¼šä½¿å¾—æŸ¥é”™å˜å¾—å›°éš¾ï¼Œç‰¹åˆ«æ˜¯è¿™äº›å¯¹è±¡çœ‹ä¸Šå»éƒ½å¾ˆç›¸åƒã€‚\nåœ¨è£…é¥°æ¨¡å¼ä¸­çš„è§’è‰²æœ‰ï¼š\næŠ½è±¡æ„ä»¶(Component)è§’è‰²ï¼šç»™å‡ºä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œä»¥è§„èŒƒå‡†å¤‡æ¥æ”¶é™„åŠ è´£ä»»çš„å¯¹è±¡ã€‚ å…·ä½“æ„ä»¶(ConcreteComponent)è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªå°†è¦æ¥æ”¶é™„åŠ è´£ä»»çš„ç±»ã€‚ è£…é¥°(Decorator)è§’è‰²ï¼šæŒæœ‰ä¸€ä¸ªæ„ä»¶(Component)å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸æŠ½è±¡æ„ä»¶æ¥å£ä¸€è‡´çš„æ¥å£ã€‚ å…·ä½“è£…é¥°(ConcreteDecorator)è§’è‰²ï¼šè´Ÿè´£ç»™æ„ä»¶å¯¹è±¡â€œè´´ä¸Šâ€é™„åŠ çš„è´£ä»»ã€‚ ç®€å•å®ç° æŠ½è±¡æ„ä»¶è§’è‰²\n1 2 3 4 5 public interface Component { public void sampleOperation(); } å…·ä½“æ„ä»¶è§’è‰²\n1 2 3 4 5 6 7 8 public class ConcreteComponent implements Component { @Override public void sampleOperation() { // å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç  } } è£…é¥°è§’è‰²\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class Decorator implements Component{ private Component component; public Decorator(Component component){ this.component = component; } @Override public void sampleOperation() { // å§”æ´¾ç»™æ„ä»¶ component.sampleOperation(); } } å…·ä½“è£…é¥°è§’è‰²\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 public class ConcreteDecoratorA extends Decorator { public ConcreteDecoratorA(Component component) { super(component); } @Override public void sampleOperation() { super.sampleOperation(); // å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç  } } public class ConcreteDecoratorB extends Decorator { public ConcreteDecoratorB(Component component) { super(component); } @Override public void sampleOperation() { super.sampleOperation(); // å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç  } } é½å¤©å¤§åœ£çš„ä¾‹å­ å­™æ‚Ÿç©ºæœ‰ä¸ƒåäºŒèˆ¬å˜åŒ–ï¼Œä»–çš„æ¯ä¸€ç§å˜åŒ–éƒ½ç»™ä»–å¸¦æ¥ä¸€ç§é™„åŠ çš„æœ¬é¢†ã€‚ä»–å˜æˆé±¼å„¿æ—¶ï¼Œå°±å¯ä»¥åˆ°æ°´é‡Œæ¸¸æ³³ï¼›ä»–å˜æˆé¸Ÿå„¿æ—¶ï¼Œå°±å¯ä»¥åœ¨å¤©ä¸Šé£è¡Œã€‚ æœ¬ä¾‹ä¸­ï¼ŒComponentçš„è§’è‰²ä¾¿ç”±é¼é¼å¤§åçš„é½å¤©å¤§åœ£æ‰®æ¼”ï¼›ConcreteComponentçš„è§’è‰²å±äºå¤§åœ£çš„æœ¬å°Šï¼Œå°±æ˜¯çŒ¢ç‹²æœ¬äººï¼›Decoratorçš„è§’è‰²ç”±å¤§åœ£çš„ä¸ƒåäºŒå˜æ‰®æ¼”ã€‚è€ŒConcreteDecoratorçš„è§’è‰²ä¾¿æ˜¯é±¼å„¿ã€é¸Ÿå„¿ç­‰ä¸ƒåäºŒèˆ¬å˜åŒ–ã€‚ æŠ½è±¡æ„ä»¶è§’è‰²â€œé½å¤©å¤§åœ£â€æ¥å£å®šä¹‰äº†ä¸€ä¸ªmove()æ–¹æ³•ï¼Œè¿™æ˜¯æ‰€æœ‰çš„å…·ä½“æ„ä»¶ç±»å’Œè£…é¥°ç±»å¿…é¡»å®ç°çš„ã€‚\n1 2 3 4 5 //å¤§åœ£çš„å°Šå· public interface TheGreatestSage { public void move(); } å…·ä½“æ„ä»¶è§’è‰²â€œå¤§åœ£æœ¬å°Šâ€çŒ¢ç‹²ç±»\n1 2 3 4 5 6 7 8 9 public class Monkey implements TheGreatestSage { @Override public void move() { //ä»£ç  System.out.println(\"Monkey Move\"); } } æŠ½è±¡è£…é¥°è§’è‰²â€œä¸ƒåäºŒå˜â€\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Change implements TheGreatestSage { private TheGreatestSage sage; public Change(TheGreatestSage sage){ this.sage = sage; } @Override public void move() { // ä»£ç  sage.move(); } } å…·ä½“è£…é¥°è§’è‰²â€œé±¼å„¿â€\n1 2 3 4 5 6 7 8 9 10 11 12 public class Fish extends Change { public Fish(TheGreatestSage sage) { super(sage); } @Override public void move() { // ä»£ç  System.out.println(\"Fish Move\"); } } å…·ä½“è£…é¥°è§’è‰²â€œé¸Ÿå„¿â€\n1 2 3 4 5 6 7 8 9 10 11 12 public class Bird extends Change { public Bird(TheGreatestSage sage) { super(sage); } @Override public void move() { // ä»£ç  System.out.println(\"Bird Move\"); } } å®¢æˆ·ç«¯ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class Client { public static void main(String[] args) { TheGreatestSage sage = new Monkey(); // ç¬¬ä¸€ç§å†™æ³• TheGreatestSage bird = new Bird(sage); TheGreatestSage fish = new Fish(bird); // ç¬¬äºŒç§å†™æ³• //TheGreatestSage fish = new Fish(new Bird(sage)); fish.move(); } } â€œå¤§åœ£æœ¬å°Šâ€æ˜¯ConcreteComponentç±»ï¼Œè€Œâ€œé¸Ÿå„¿â€ã€â€œé±¼å„¿â€æ˜¯è£…é¥°ç±»ã€‚è¦è£…é¥°çš„æ˜¯â€œå¤§åœ£æœ¬å°Šâ€ï¼Œ ä¹Ÿå³â€œçŒ¢ç‹²â€å®ä¾‹ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç³»ç»ŸæŠŠå¤§åœ£ä»ä¸€åªçŒ¢ç‹²è£…é¥°æˆäº†ä¸€åªé¸Ÿå„¿ï¼ˆæŠŠé¸Ÿå„¿çš„åŠŸèƒ½åŠ åˆ°äº†çŒ¢ç‹²èº«ä¸Šï¼‰ï¼Œç„¶ååˆæŠŠé¸Ÿå„¿è£…é¥°æˆäº†ä¸€æ¡é±¼å„¿ï¼ˆæŠŠé±¼å„¿çš„åŠŸèƒ½åŠ åˆ°äº†çŒ¢ç‹²+é¸Ÿå„¿èº«ä¸Šï¼Œå¾—åˆ°äº†çŒ¢ç‹²+é¸Ÿå„¿+é±¼å„¿ï¼‰ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¤§åœ£çš„å˜åŒ–é¦–å…ˆå°†é¸Ÿå„¿çš„åŠŸèƒ½é™„åŠ åˆ°äº†çŒ¢ç‹²èº«ä¸Šï¼Œç„¶ååˆå°†é±¼å„¿çš„åŠŸèƒ½é™„åŠ åˆ°çŒ¢ç‹²+é¸Ÿå„¿èº«ä¸Šã€‚\nè£…é¥°æ¨¡å¼çš„ç®€åŒ– å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè£…é¥°æ¨¡å¼çš„å®ç°éƒ½è¦æ¯”ä¸Šé¢ç»™å‡ºçš„ç¤ºæ„æ€§ä¾‹å­è¦ç®€å•ã€‚ å¦‚æœåªæœ‰ä¸€ä¸ªConcreteComponentç±»ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å»æ‰æŠ½è±¡çš„Componentç±»ï¼ˆæ¥å£ï¼‰ï¼ŒæŠŠDecoratorä½œä¸ºä¸€ä¸ªConcreteComponentå­ç±»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœåªæœ‰ä¸€ä¸ªConcreteDecoratorç±»ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„Decoratorç±»ï¼Œè€Œå¯ä»¥æŠŠDecoratorå’ŒConcreteDecoratorçš„è´£ä»»åˆå¹¶æˆä¸€ä¸ªç±»ã€‚ç”šè‡³åœ¨åªæœ‰ä¸¤ä¸ªConcreteDecoratorç±»çš„æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥è¿™æ ·åšã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€æ˜æ€§çš„è¦æ±‚ è£…é¥°æ¨¡å¼å¯¹å®¢æˆ·ç«¯çš„é€æ˜æ€§è¦æ±‚ç¨‹åºä¸è¦å£°æ˜ä¸€ä¸ªConcreteComponentç±»å‹çš„å˜é‡ï¼Œè€Œåº”å½“å£°æ˜ä¸€ä¸ªComponentç±»å‹çš„å˜é‡ã€‚ ç”¨å­™æ‚Ÿç©ºçš„ä¾‹å­æ¥è¯´ï¼Œå¿…é¡»æ°¸è¿œæŠŠå­™æ‚Ÿç©ºçš„æ‰€æœ‰å˜åŒ–éƒ½å½“æˆå­™æ‚Ÿç©ºæ¥å¯¹å¾…ï¼Œè€Œå¦‚æœæŠŠè€å­™å˜æˆçš„é±¼å„¿å½“æˆé±¼å„¿ï¼Œè€Œä¸æ˜¯è€å­™ï¼Œé‚£å°±è¢«è€å­™éª—äº†ï¼Œè€Œè¿™æ—¶ä¸åº”å½“å‘ç”Ÿçš„ã€‚ä¸‹é¢çš„åšæ³•æ˜¯å¯¹çš„ï¼š\n1 2 TheGreatestSage sage = new Monkey(); TheGreatestSage bird = new Bird(sage); è€Œä¸‹é¢çš„åšæ³•æ˜¯ä¸å¯¹çš„ï¼š\n1 2 Monkey sage = new Monkey(); Bird bird = new Bird(sage); åŠé€æ˜çš„è£…é¥°æ¨¡å¼ ç„¶è€Œï¼Œçº¯ç²¹çš„è£…é¥°æ¨¡å¼å¾ˆéš¾æ‰¾åˆ°ã€‚è£…é¥°æ¨¡å¼çš„ç”¨æ„æ˜¯åœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹ï¼Œå¢å¼ºæ‰€è€ƒè™‘çš„ç±»çš„æ€§èƒ½ã€‚åœ¨å¢å¼ºæ€§èƒ½çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦å»ºç«‹æ–°çš„å…¬å¼€çš„æ–¹æ³•ã€‚å³ä¾¿æ˜¯åœ¨å­™å¤§åœ£çš„ç³»ç»Ÿé‡Œï¼Œä¹Ÿéœ€è¦æ–°çš„æ–¹æ³•ã€‚æ¯”å¦‚é½å¤©å¤§åœ£ç±»å¹¶æ²¡æœ‰é£è¡Œçš„èƒ½åŠ›ï¼Œè€Œé¸Ÿå„¿æœ‰ã€‚è¿™å°±æ„å‘³ç€é¸Ÿå„¿åº”å½“æœ‰ä¸€ä¸ªæ–°çš„fly()æ–¹æ³•ã€‚å†æ¯”å¦‚ï¼Œé½å¤©å¤§åœ£ç±»å¹¶æ²¡æœ‰æ¸¸æ³³çš„èƒ½åŠ›ï¼Œè€Œé±¼å„¿æœ‰ï¼Œè¿™å°±æ„å‘³ç€åœ¨é±¼å„¿ç±»é‡Œåº”å½“æœ‰ä¸€ä¸ªæ–°çš„swim()æ–¹æ³•ã€‚\nè¿™å°±å¯¼è‡´äº†å¤§å¤šæ•°çš„è£…é¥°æ¨¡å¼çš„å®ç°éƒ½æ˜¯â€œåŠé€æ˜â€çš„ï¼Œè€Œä¸æ˜¯å®Œå…¨é€æ˜çš„ã€‚æ¢è¨€ä¹‹ï¼Œå…è®¸è£…é¥°æ¨¡å¼æ”¹å˜æ¥å£ï¼Œå¢åŠ æ–°çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€å®¢æˆ·ç«¯å¯ä»¥å£°æ˜ConcreteDecoratorç±»å‹çš„å˜é‡ï¼Œä»è€Œå¯ä»¥è°ƒç”¨ ConcreteDecoratorç±»ä¸­æ‰æœ‰çš„æ–¹æ³•ï¼š\n1 2 3 TheGreatestSage sage = new Monkey(); Bird bird = new Bird(sage); bird.fly(); åŠé€æ˜çš„è£…é¥°æ¨¡å¼æ˜¯ä»‹äºè£…é¥°æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„ã€‚é€‚é…å™¨æ¨¡å¼çš„ç”¨æ„æ˜¯æ”¹å˜æ‰€è€ƒè™‘çš„ç±»çš„æ¥å£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ”¹å†™ä¸€ä¸ªæˆ–å‡ ä¸ªæ–¹æ³•ï¼Œæˆ–å¢åŠ æ–°çš„æ–¹æ³•æ¥å¢å¼ºæˆ–æ”¹å˜æ‰€è€ƒè™‘çš„ç±»çš„åŠŸèƒ½ã€‚å¤§å¤šæ•°çš„è£…é¥°æ¨¡å¼å®é™…ä¸Šæ˜¯åŠé€æ˜çš„è£…é¥°æ¨¡å¼ï¼Œè¿™æ ·çš„è£…é¥°æ¨¡å¼ä¹Ÿç§°åšåŠè£…é¥°ã€åŠé€‚é…å™¨æ¨¡å¼ã€‚\nè£…é¥°æ¨¡å¼åœ¨JAVA I/Oåº“ä¸­çš„åº”ç”¨ è£…é¥°æ¨¡å¼åœ¨Javaè¯­è¨€ä¸­çš„æœ€è‘—åçš„åº”ç”¨è«è¿‡äºJava I/Oæ ‡å‡†åº“çš„è®¾è®¡äº†ã€‚ ç”±äºJava I/Oåº“éœ€è¦å¾ˆå¤šæ€§èƒ½çš„å„ç§ç»„åˆï¼Œå¦‚æœè¿™äº›æ€§èƒ½éƒ½æ˜¯ç”¨ç»§æ‰¿çš„æ–¹æ³•å®ç°çš„ï¼Œé‚£ä¹ˆæ¯ä¸€ç§ç»„åˆéƒ½éœ€è¦ä¸€ä¸ªç±»ï¼Œè¿™æ ·å°±ä¼šé€ æˆå¤§é‡æ€§èƒ½é‡å¤çš„ç±»å‡ºç°ã€‚è€Œå¦‚æœé‡‡ç”¨è£…é¥°æ¨¡å¼ï¼Œé‚£ä¹ˆç±»çš„æ•°ç›®å°±ä¼šå¤§å¤§å‡å°‘ï¼Œæ€§èƒ½çš„é‡å¤ä¹Ÿå¯ä»¥å‡è‡³æœ€å°‘ã€‚å› æ­¤è£…é¥°æ¨¡å¼æ˜¯Java I/Oåº“çš„åŸºæœ¬æ¨¡å¼ã€‚\nJava I/Oåº“çš„å¯¹è±¡ç»“æ„å›¾å¦‚ä¸‹ï¼Œç”±äºJava I/Oçš„å¯¹è±¡ä¼—å¤šï¼Œå› æ­¤åªç”»å‡ºInputStreamçš„éƒ¨åˆ†ã€‚ æ ¹æ®ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š\næŠ½è±¡æ„ä»¶(Component)è§’è‰²ï¼š ç”±InputStreamæ‰®æ¼”ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ºå„ç§å­ç±»å‹æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚\nå…·ä½“æ„ä»¶(ConcreteComponent)è§’è‰²ï¼š ç”±ByteArrayInputStreamã€FileInputStreamã€PipedInputStreamã€StringBufferInputStreamç­‰ç±»æ‰®æ¼”ã€‚å®ƒä»¬å®ç°äº†æŠ½è±¡æ„ä»¶è§’è‰²æ‰€è§„å®šçš„æ¥å£ã€‚\næŠ½è±¡è£…é¥°(Decorator)è§’è‰²ï¼š ç”±FilterInputStreamæ‰®æ¼”ã€‚å®ƒå®ç°äº†InputStreamæ‰€è§„å®šçš„æ¥å£ã€‚\nå…·ä½“è£…é¥°(ConcreteDecorator)è§’è‰²ï¼š ç”±å‡ ä¸ªç±»æ‰®æ¼”ï¼Œåˆ†åˆ«æ˜¯BufferedInputStreamã€DataInputStreamä»¥åŠä¸¤ä¸ªä¸å¸¸ç”¨åˆ°çš„ç±» LineNumberInputStreamã€PushbackInputStreamã€‚\nåŠé€æ˜çš„è£…é¥°æ¨¡å¼ è£…é¥°æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼éƒ½æ˜¯â€œåŒ…è£…æ¨¡å¼(Wrapper Pattern)â€ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡å°è£…å…¶ä»–å¯¹è±¡è¾¾åˆ°è®¾è®¡çš„ç›®çš„çš„ï¼Œä½†æ˜¯å®ƒä»¬çš„å½¢æ€æœ‰å¾ˆå¤§åŒºåˆ«ã€‚\nç†æƒ³çš„è£…é¥°æ¨¡å¼åœ¨å¯¹è¢«è£…é¥°å¯¹è±¡è¿›è¡ŒåŠŸèƒ½å¢å¼ºçš„åŒæ—¶ï¼Œè¦æ±‚å…·ä½“æ„ä»¶è§’è‰²ã€è£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®Œå…¨ä¸€è‡´ã€‚è€Œé€‚é…å™¨æ¨¡å¼åˆ™ä¸ç„¶ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œé€‚é…å™¨æ¨¡å¼å¹¶ä¸è¦æ±‚å¯¹æºå¯¹è±¡çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºï¼Œä½†æ˜¯ä¼šæ”¹å˜æºå¯¹è±¡çš„æ¥å£ï¼Œä»¥ä¾¿å’Œç›®æ ‡æ¥å£ç›¸ç¬¦åˆã€‚\nè£…é¥°æ¨¡å¼æœ‰é€æ˜å’ŒåŠé€æ˜ä¸¤ç§ï¼Œè¿™ä¸¤ç§çš„åŒºåˆ«å°±åœ¨äºè£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£æ˜¯å¦å®Œå…¨ä¸€è‡´ã€‚é€æ˜çš„è£…é¥°æ¨¡å¼ä¹Ÿå°±æ˜¯ç†æƒ³çš„è£…é¥°æ¨¡å¼ï¼Œè¦æ±‚å…·ä½“æ„ä»¶è§’è‰²ã€è£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®Œå…¨ä¸€è‡´ã€‚ç›¸åï¼Œå¦‚æœè£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²æ¥å£ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´è£…é¥°è§’è‰²çš„æ¥å£æ¯”æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®½çš„è¯ï¼Œè£…é¥°è§’è‰²å®é™…ä¸Šå·²ç»æˆäº†ä¸€ä¸ªé€‚é…å™¨è§’è‰²ï¼Œè¿™ç§è£…é¥°æ¨¡å¼ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼Œç§°ä¸ºâ€œåŠé€æ˜â€çš„è£…é¥°æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ åœ¨é€‚é…å™¨æ¨¡å¼é‡Œé¢ï¼Œé€‚é…å™¨ç±»çš„æ¥å£é€šå¸¸ä¼šä¸ç›®æ ‡ç±»çš„æ¥å£é‡å ï¼Œä½†å¾€å¾€å¹¶ä¸å®Œå…¨ç›¸åŒã€‚æ¢è¨€ä¹‹ï¼Œé€‚é…å™¨ç±»çš„æ¥å£ä¼šæ¯”è¢«è£…é¥°çš„ç›®æ ‡ç±»æ¥å£å®½ã€‚ æ˜¾ç„¶ï¼ŒåŠé€æ˜çš„è£…é¥°æ¨¡å¼å®é™…ä¸Šå°±æ˜¯å¤„äºé€‚é…å™¨æ¨¡å¼ä¸è£…é¥°æ¨¡å¼ä¹‹é—´çš„ç°è‰²åœ°å¸¦ã€‚å¦‚æœå°†è£…é¥°æ¨¡å¼ä¸é€‚é…å™¨æ¨¡å¼åˆå¹¶æˆä¸ºä¸€ä¸ªâ€œåŒ…è£…æ¨¡å¼â€çš„è¯ï¼Œé‚£ä¹ˆåŠé€æ˜çš„è£…é¥°æ¨¡å¼å€’å¯ä»¥æˆä¸ºè¿™ç§åˆå¹¶åçš„â€œåŒ…è£…æ¨¡å¼â€çš„ä»£è¡¨ã€‚\nInputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼ InputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼æ˜¯åŠé€æ˜çš„ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä¸å¦¨çœ‹ä¸€çœ‹ä½œè£…é¥°æ¨¡å¼çš„æŠ½è±¡æ„ä»¶è§’è‰²çš„InputStreamçš„æºä»£ç ã€‚è¿™ä¸ªæŠ½è±¡ç±»å£°æ˜äº†ä¹ä¸ªæ–¹æ³•ï¼Œå¹¶ç»™å‡ºäº†å…¶ä¸­å…«ä¸ªçš„å®ç°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œéœ€è¦ç”±å­ç±»å®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public abstract class InputStream implements Closeable { public abstract int read() throws IOException; public int read(byte b[]) throws IOException {} public int read(byte b[], int off, int len) throws IOException {} public long skip(long n) throws IOException {} public int available() throws IOException {} public void close() throws IOException {} public synchronized void mark(int readlimit) {} public synchronized void reset() throws IOException {} public boolean markSupported() {} } ä¸‹é¢æ˜¯ä½œä¸ºè£…é¥°æ¨¡å¼çš„æŠ½è±¡è£…é¥°è§’è‰²FilterInputStreamç±»çš„æºä»£ç ã€‚å¯ä»¥çœ‹å‡ºï¼ŒFilterInputStreamçš„æ¥å£ä¸InputStreamçš„æ¥å£æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´åˆ°è¿™ä¸€æ­¥ï¼Œè¿˜æ˜¯ä¸è£…é¥°æ¨¡å¼ç›¸ç¬¦åˆçš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class FilterInputStream extends InputStream { protected FilterInputStream(InputStream in) {} public int read() throws IOException {} public int read(byte b[]) throws IOException {} public int read(byte b[], int off, int len) throws IOException {} public long skip(long n) throws IOException {} public int available() throws IOException {} public void close() throws IOException {} public synchronized void mark(int readlimit) {} public synchronized void reset() throws IOException {} public boolean markSupported() {} } ä¸‹é¢æ˜¯å…·ä½“è£…é¥°è§’è‰²PushbackInputStreamçš„æºä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public class PushbackInputStream extends FilterInputStream { private void ensureOpen() throws IOException {} public PushbackInputStream(InputStream in, int size) {} public PushbackInputStream(InputStream in) {} public int read() throws IOException {} public int read(byte[] b, int off, int len) throws IOException {} public void unread(int b) throws IOException {} public void unread(byte[] b, int off, int len) throws IOException {} public void unread(byte[] b) throws IOException {} public int available() throws IOException {} public long skip(long n) throws IOException {} public boolean markSupported() {} public synchronized void mark(int readlimit) {} public synchronized void reset() throws IOException {} public synchronized void close() throws IOException {} } æŸ¥çœ‹æºç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªè£…é¥°ç±»æä¾›äº†é¢å¤–çš„æ–¹æ³•unread()ï¼Œè¿™å°±æ„å‘³ç€PushbackInputStreamæ˜¯ä¸€ä¸ªåŠé€æ˜çš„è£…é¥°ç±»ã€‚æ¢è¨€ ä¹‹ï¼Œå®ƒç ´åäº†ç†æƒ³çš„è£…é¥°æ¨¡å¼çš„è¦æ±‚ã€‚å¦‚æœå®¢æˆ·ç«¯æŒæœ‰ä¸€ä¸ªç±»å‹ä¸ºInputStreamå¯¹è±¡çš„å¼•ç”¨inçš„è¯ï¼Œé‚£ä¹ˆå¦‚æœinçš„çœŸå®ç±»å‹æ˜¯ PushbackInputStreamçš„è¯ï¼Œåªè¦å®¢æˆ·ç«¯ä¸éœ€è¦ä½¿ç”¨unread()æ–¹æ³•ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¸€èˆ¬æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°± å¿…é¡»è¿›è¡Œå‘ä¸‹ç±»å‹è½¬æ¢ã€‚å°†inçš„ç±»å‹è½¬æ¢æˆä¸ºPushbackInputStreamä¹‹åæ‰å¯èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»å‹è½¬æ¢æ„å‘³ç€å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“å®ƒ æ‹¿åˆ°çš„å¼•ç”¨æ˜¯æŒ‡å‘ä¸€ä¸ªç±»å‹ä¸ºPushbackInputStreamçš„å¯¹è±¡ã€‚è¿™å°±ç ´åäº†ä½¿ç”¨è£…é¥°æ¨¡å¼çš„åŸå§‹ç”¨æ„ã€‚\nç°å®ä¸–ç•Œä¸ç†è®ºæ€»å½’æ˜¯æœ‰ä¸€æ®µå·®è·çš„ã€‚çº¯ç²¹çš„è£…é¥°æ¨¡å¼åœ¨çœŸå®çš„ç³»ç»Ÿä¸­å¾ˆéš¾æ‰¾åˆ°ã€‚ä¸€èˆ¬æ‰€é‡åˆ°çš„ï¼Œéƒ½æ˜¯è¿™ç§åŠé€æ˜çš„è£…é¥°æ¨¡å¼ã€‚\nä¸‹é¢æ˜¯ä½¿ç”¨I/Oæµè¯»å–æ–‡ä»¶å†…å®¹çš„ç®€å•æ“ä½œç¤ºä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 public class IOTest { public static void main(String[] args) throws IOException { // æµå¼è¯»å–æ–‡ä»¶ DataInputStream dis = null; try{ dis = new DataInputStream( new BufferedInputStream( new FileInputStream(\"test.txt\") ) ); //è¯»å–æ–‡ä»¶å†…å®¹ byte[] bs = new byte[dis.available()]; dis.read(bs); String content = new String(bs); System.out.println(content); }finally{ dis.close(); } } } è§‚å¯Ÿä¸Šé¢çš„ä»£ç ï¼Œä¼šå‘ç°æœ€é‡Œå±‚æ˜¯ä¸€ä¸ªFileInputStreamå¯¹è±¡ï¼Œç„¶åæŠŠå®ƒä¼ é€’ç»™ä¸€ä¸ªBufferedInputStreamå¯¹è±¡ï¼Œç»è¿‡BufferedInputStreamå¤„ç†ï¼Œå†æŠŠå¤„ç†åçš„å¯¹è±¡ä¼ é€’ç»™äº†DataInputStreamå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯è£…é¥°å™¨çš„ç»„è£…è¿‡ç¨‹ï¼ŒFileInputStreamå¯¹è±¡ç›¸å½“äºåŸå§‹çš„è¢«è£…é¥°çš„å¯¹è±¡ï¼Œè€ŒBufferedInputStreamå¯¹è±¡å’ŒDataInputStreamå¯¹è±¡åˆ™ç›¸å½“äºè£…é¥°å™¨ã€‚\nå‚è€ƒ\n",
  "wordCount" : "6932",
  "inLanguage": "en",
  "datePublished": "2018-12-29T13:54:05Z",
  "dateModified": "2018-12-29T13:54:05Z",
  "author":{
    "@type": "Person",
    "name": "Wjy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>

  <script id="MathJax-script" async src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.2.2/es5/tex-chtml.min.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath:  [['\\(', '\\)'], ['$', '$']],  
    }
  };
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      è£…é¥°æ¨¡å¼
    </h1>
    <div class="post-meta"><span title='2018-12-29 13:54:05 +0000 UTC'>2018-12-29</span>&nbsp;Â·&nbsp;Wjy

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%ad%a6%e4%b9%a0" aria-label="å¿«é€Ÿå­¦ä¹ ">å¿«é€Ÿå­¦ä¹ </a></li>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a></li>
                <li>
                    <a href="#%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0" aria-label="ç®€å•å®ç°">ç®€å•å®ç°</a></li>
                <li>
                    <a href="#%e9%bd%90%e5%a4%a9%e5%a4%a7%e5%9c%a3%e7%9a%84%e4%be%8b%e5%ad%90" aria-label="é½å¤©å¤§åœ£çš„ä¾‹å­">é½å¤©å¤§åœ£çš„ä¾‹å­</a></li>
                <li>
                    <a href="#%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f%e7%9a%84%e7%ae%80%e5%8c%96" aria-label="è£…é¥°æ¨¡å¼çš„ç®€åŒ–">è£…é¥°æ¨¡å¼çš„ç®€åŒ–</a><ul>
                        
                <li>
                    <a href="#%e9%80%8f%e6%98%8e%e6%80%a7%e7%9a%84%e8%a6%81%e6%b1%82" aria-label="é€æ˜æ€§çš„è¦æ±‚">é€æ˜æ€§çš„è¦æ±‚</a></li>
                <li>
                    <a href="#%e5%8d%8a%e9%80%8f%e6%98%8e%e7%9a%84%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f" aria-label="åŠé€æ˜çš„è£…é¥°æ¨¡å¼">åŠé€æ˜çš„è£…é¥°æ¨¡å¼</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f%e5%9c%a8java-io%e5%ba%93%e4%b8%ad%e7%9a%84%e5%ba%94%e7%94%a8" aria-label="è£…é¥°æ¨¡å¼åœ¨JAVA I/Oåº“ä¸­çš„åº”ç”¨">è£…é¥°æ¨¡å¼åœ¨JAVA I/Oåº“ä¸­çš„åº”ç”¨</a><ul>
                        
                <li>
                    <a href="#%e5%8d%8a%e9%80%8f%e6%98%8e%e7%9a%84%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f-1" aria-label="åŠé€æ˜çš„è£…é¥°æ¨¡å¼">åŠé€æ˜çš„è£…é¥°æ¨¡å¼</a></li>
                <li>
                    <a href="#inputstream%e7%b1%bb%e5%9e%8b%e4%b8%ad%e7%9a%84%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f" aria-label="InputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼">InputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="å¿«é€Ÿå­¦ä¹ ">å¿«é€Ÿå­¦ä¹ <a hidden class="anchor" aria-hidden="true" href="#å¿«é€Ÿå­¦ä¹ ">#</a></h1>
<p>ç±»å‹ï¼šç»“æ„å‹</p>
<blockquote>
<p>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</p>
</blockquote>
<p>è£…é¥°å™¨ï¼ˆDecoratorï¼‰æ¨¡å¼ï¼Œæ˜¯ä¸€ç§åœ¨è¿è¡ŒæœŸåŠ¨æ€ç»™æŸä¸ªå¯¹è±¡çš„å®ä¾‹å¢åŠ åŠŸèƒ½çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬åœ¨IOçš„<a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1298364142452770">Filteræ¨¡å¼</a>ä¸€èŠ‚ä¸­å…¶å®å·²ç»è®²è¿‡è£…é¥°å™¨æ¨¡å¼äº†ã€‚åœ¨Javaæ ‡å‡†åº“ä¸­ï¼Œ<code>InputStream</code>æ˜¯æŠ½è±¡ç±»ï¼Œ<code>FileInputStream</code>ã€<code>ServletInputStream</code>ã€<code>Socket.getInputStream()</code>è¿™äº›<code>InputStream</code>éƒ½æ˜¯æœ€ç»ˆæ•°æ®æºã€‚</p>
<p>ç°åœ¨ï¼Œå¦‚æœè¦ç»™ä¸åŒçš„æœ€ç»ˆæ•°æ®æºå¢åŠ ç¼“å†²åŠŸèƒ½ã€è®¡ç®—ç­¾ååŠŸèƒ½ã€åŠ å¯†è§£å¯†åŠŸèƒ½ï¼Œé‚£ä¹ˆï¼Œ3ä¸ªæœ€ç»ˆæ•°æ®æºã€3ç§åŠŸèƒ½ä¸€å…±éœ€è¦9ä¸ªå­ç±»ã€‚å¦‚æœç»§ç»­å¢åŠ æœ€ç»ˆæ•°æ®æºï¼Œæˆ–è€…å¢åŠ æ–°åŠŸèƒ½ï¼Œå­ç±»ä¼šçˆ†ç‚¸å¼å¢é•¿ï¼Œè¿™ç§è®¾è®¡æ–¹å¼æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚</p>
<p>Decoratoræ¨¡å¼çš„ç›®çš„å°±æ˜¯æŠŠä¸€ä¸ªä¸€ä¸ªçš„é™„åŠ åŠŸèƒ½ï¼Œç”¨Decoratorçš„æ–¹å¼ç»™ä¸€å±‚ä¸€å±‚åœ°ç´¯åŠ åˆ°åŸå§‹æ•°æ®æºä¸Šï¼Œæœ€ç»ˆï¼Œé€šè¿‡ç»„åˆè·å¾—æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼šç»™<code>FileInputStream</code>å¢åŠ ç¼“å†²å’Œè§£å‹ç¼©åŠŸèƒ½ï¼Œç”¨Decoratoræ¨¡å¼å†™å‡ºæ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// åˆ›å»ºåŸå§‹çš„æ•°æ®æº:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>InputStream fis = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(<span style="color:#0ff;font-weight:bold">&#34;test.gz&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¢åŠ ç¼“å†²åŠŸèƒ½:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>InputStream bis = <span style="color:#fff;font-weight:bold">new</span> BufferedInputStream(fis);
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// å¢åŠ è§£å‹ç¼©åŠŸèƒ½:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>InputStream gis = <span style="color:#fff;font-weight:bold">new</span> GZIPInputStream(bis);
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…ä¸€æ¬¡æ€§å†™æˆè¿™æ ·ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>InputStream input = <span style="color:#fff;font-weight:bold">new</span> GZIPInputStream( <span style="color:#007f7f">// ç¬¬äºŒå±‚è£…é¥°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        <span style="color:#fff;font-weight:bold">new</span> BufferedInputStream( <span style="color:#007f7f">// ç¬¬ä¸€å±‚è£…é¥°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                            <span style="color:#fff;font-weight:bold">new</span> FileInputStream(<span style="color:#0ff;font-weight:bold">&#34;test.gz&#34;</span>) <span style="color:#007f7f">// æ ¸å¿ƒåŠŸèƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        ));
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§‚å¯Ÿ<code>BufferedInputStream</code>å’Œ<code>GZIPInputStream</code>ï¼Œå®ƒä»¬å®é™…ä¸Šéƒ½æ˜¯ä»<code>FilterInputStream</code>ç»§æ‰¿çš„ï¼Œè¿™ä¸ª<code>FilterInputStream</code>å°±æ˜¯ä¸€ä¸ªæŠ½è±¡çš„Decoratorã€‚æˆ‘ä»¬ç”¨å›¾æŠŠDecoratoræ¨¡å¼ç”»å‡ºæ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>             â”‚ Component â”‚
</span></span><span style="display:flex;"><span>             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                   â–²
</span></span><span style="display:flex;"><span>      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>      â”‚            â”‚                 â”‚
</span></span><span style="display:flex;"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>â”‚ComponentA â”‚â”‚ComponentB â”‚...  â”‚ Decorator â”‚
</span></span><span style="display:flex;"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style="display:flex;"><span>                                     â–²
</span></span><span style="display:flex;"><span>                              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                              â”‚             â”‚
</span></span><span style="display:flex;"><span>                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span style="display:flex;"><span>                        â”‚DecoratorA â”‚ â”‚DecoratorB â”‚...
</span></span><span style="display:flex;"><span>                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€é¡¶å±‚çš„Componentæ˜¯æ¥å£ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯<code>InputStream</code>è¿™ä¸ªæŠ½è±¡ç±»ã€‚ComponentAã€ComponentBæ˜¯å®é™…çš„å­ç±»ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯<code>FileInputStream</code>ã€<code>ServletInputStream</code>è¿™äº›æ•°æ®æºã€‚Decoratoræ˜¯ç”¨äºå®ç°å„ä¸ªé™„åŠ åŠŸèƒ½çš„æŠ½è±¡è£…é¥°å™¨ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯<code>FilterInputStream</code>ã€‚è€Œä»Decoratoræ´¾ç”Ÿçš„å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„è£…é¥°å™¨ï¼Œå®ƒä»¬æ¯ä¸ªéƒ½æœ‰ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå¯¹åº”åˆ°IOçš„å°±æ˜¯<code>BufferedInputStream</code>ã€<code>GZIPInputStream</code>ç­‰ã€‚</p>
<p>Decoratoræ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå®ƒå®é™…ä¸ŠæŠŠæ ¸å¿ƒåŠŸèƒ½å’Œé™„åŠ åŠŸèƒ½ç»™åˆ†å¼€äº†ã€‚æ ¸å¿ƒåŠŸèƒ½æŒ‡<code>FileInputStream</code>è¿™äº›çœŸæ­£è¯»æ•°æ®çš„æºå¤´ï¼Œé™„åŠ åŠŸèƒ½æŒ‡åŠ ç¼“å†²ã€å‹ç¼©ã€è§£å¯†è¿™äº›åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬è¦æ–°å¢æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±å¢åŠ Componentçš„å­ç±»ï¼Œä¾‹å¦‚<code>ByteInputStream</code>ã€‚å¦‚æœæˆ‘ä»¬è¦å¢åŠ é™„åŠ åŠŸèƒ½ï¼Œå°±å¢åŠ Decoratorçš„å­ç±»ï¼Œä¾‹å¦‚<code>CipherInputStream</code>ã€‚ä¸¤éƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰©å±•ï¼Œè€Œå…·ä½“å¦‚ä½•é™„åŠ åŠŸèƒ½ï¼Œç”±è°ƒç”¨æ–¹è‡ªç”±ç»„åˆï¼Œä»è€Œæå¤§åœ°å¢å¼ºäº†çµæ´»æ€§ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦è‡ªå·±è®¾è®¡å®Œæ•´çš„Decoratoræ¨¡å¼ï¼Œåº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ</p>
<p>æˆ‘ä»¬è¿˜æ˜¯ä¸¾ä¸ªæ —å­ï¼šå‡è®¾æˆ‘ä»¬éœ€è¦æ¸²æŸ“ä¸€ä¸ªHTMLçš„æ–‡æœ¬ï¼Œä½†æ˜¯æ–‡æœ¬è¿˜å¯ä»¥é™„åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚åŠ ç²—ã€å˜æ–œä½“ã€åŠ ä¸‹åˆ’çº¿ç­‰ã€‚ä¸ºäº†å®ç°åŠ¨æ€é™„åŠ æ•ˆæœï¼Œå¯ä»¥é‡‡ç”¨Decoratoræ¨¡å¼ã€‚</p>
<p>é¦–å…ˆï¼Œä»ç„¶éœ€è¦å®šä¹‰é¡¶å±‚æ¥å£<code>TextNode</code>ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> TextNode {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è®¾ç½®text:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">void</span> setText(String text);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è·å–text:
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String getText();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äºæ ¸å¿ƒèŠ‚ç‚¹ï¼Œä¾‹å¦‚<code>&lt;span&gt;</code>ï¼Œå®ƒéœ€è¦ä»<code>TextNode</code>ç›´æ¥ç»§æ‰¿ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpanNode <span style="color:#fff;font-weight:bold">implements</span> TextNode {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setText(String text) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">text</span> = text;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getText() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;&lt;span&gt;&#34;</span> + text + <span style="color:#0ff;font-weight:bold">&#34;&lt;/span&gt;&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç´§æ¥ç€ï¼Œä¸ºäº†å®ç°Decoratoræ¨¡å¼ï¼Œéœ€è¦æœ‰ä¸€ä¸ªæŠ½è±¡çš„Decoratorç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> NodeDecorator <span style="color:#fff;font-weight:bold">implements</span> TextNode {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">final</span> TextNode target;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> NodeDecorator(TextNode target) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">target</span> = target;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setText(String text) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">target</span>.<span style="color:#007f7f">setText</span>(text);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ª<code>NodeDecorator</code>ç±»çš„æ ¸å¿ƒæ˜¯æŒæœ‰ä¸€ä¸ª<code>TextNode</code>ï¼Œå³å°†è¦æŠŠåŠŸèƒ½é™„åŠ åˆ°çš„<code>TextNode</code>å®ä¾‹ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥å†™ä¸€ä¸ªåŠ ç²—åŠŸèƒ½ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> BoldDecorator <span style="color:#fff;font-weight:bold">extends</span> NodeDecorator {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> BoldDecorator(TextNode target) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(target);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getText() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;&lt;b&gt;&#34;</span> + target.<span style="color:#007f7f">getText</span>() + <span style="color:#0ff;font-weight:bold">&#34;&lt;/b&gt;&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»ä¼¼çš„ï¼Œå¯ä»¥ç»§ç»­åŠ <code>ItalicDecorator</code>ã€<code>UnderlineDecorator</code>ç­‰ã€‚å®¢æˆ·ç«¯å¯ä»¥è‡ªç”±ç»„åˆè¿™äº›Decoratorï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>TextNode n1 = <span style="color:#fff;font-weight:bold">new</span> SpanNode();
</span></span><span style="display:flex;"><span>TextNode n2 = <span style="color:#fff;font-weight:bold">new</span> BoldDecorator(<span style="color:#fff;font-weight:bold">new</span> UnderlineDecorator(<span style="color:#fff;font-weight:bold">new</span> SpanNode()));
</span></span><span style="display:flex;"><span>TextNode n3 = <span style="color:#fff;font-weight:bold">new</span> ItalicDecorator(<span style="color:#fff;font-weight:bold">new</span> BoldDecorator(<span style="color:#fff;font-weight:bold">new</span> SpanNode()));
</span></span><span style="display:flex;"><span>n1.<span style="color:#007f7f">setText</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello&#34;</span>);
</span></span><span style="display:flex;"><span>n2.<span style="color:#007f7f">setText</span>(<span style="color:#0ff;font-weight:bold">&#34;Decorated&#34;</span>);
</span></span><span style="display:flex;"><span>n3.<span style="color:#007f7f">setText</span>(<span style="color:#0ff;font-weight:bold">&#34;World&#34;</span>);
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(n1.<span style="color:#007f7f">getText</span>());
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡º&lt;span&gt;Hello&lt;/span&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(n2.<span style="color:#007f7f">getText</span>());
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡º&lt;b&gt;&lt;u&gt;&lt;span&gt;Decorated&lt;/span&gt;&lt;/u&gt;&lt;/b&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(n3.<span style="color:#007f7f">getText</span>());
</span></span><span style="display:flex;"><span><span style="color:#007f7f">// è¾“å‡º&lt;i&gt;&lt;b&gt;&lt;span&gt;World&lt;/span&gt;&lt;/b&gt;&lt;/i&gt;
</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p>è£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„åŠ ä¸Šæ›´å¤šçš„è´£ä»»ã€‚æ¢è¨€ä¹‹ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šè§‰å¾—å¯¹è±¡åœ¨è£…é¥°å‰å’Œè£…é¥°åæœ‰ä»€ä¹ˆä¸åŒã€‚è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸ä½¿ç”¨åˆ›é€ æ›´å¤šå­ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•ã€‚
<img loading="lazy" src="1.png" alt=""  />
</p>
<p>ä¼˜ç‚¹</p>
<ul>
<li>
<p>è£…é¥°æ¨¡å¼ä¸ç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚è£…é¥°æ¨¡å¼å…è®¸ç³»ç»ŸåŠ¨æ€å†³å®šâ€œè´´ä¸Šâ€ä¸€ä¸ªéœ€è¦çš„â€œè£…é¥°â€ï¼Œæˆ–è€…é™¤æ‰ä¸€ä¸ªä¸éœ€è¦çš„â€œè£…é¥°â€ã€‚ç»§æ‰¿å…³ç³»åˆ™ä¸åŒï¼Œç»§æ‰¿å…³ç³»æ˜¯é™æ€çš„ï¼Œå®ƒåœ¨ç³»ç»Ÿè¿è¡Œå‰å°±å†³å®šäº†ã€‚</p>
</li>
<li>
<p>é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œè®¾è®¡å¸ˆå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚</p>
</li>
</ul>
<p>ç¼ºç‚¹
ç”±äºä½¿ç”¨è£…é¥°æ¨¡å¼ï¼Œå¯ä»¥æ¯”ä½¿ç”¨ç»§æ‰¿å…³ç³»éœ€è¦è¾ƒå°‘æ•°ç›®çš„ç±»ã€‚ä½¿ç”¨è¾ƒå°‘çš„ç±»ï¼Œå½“ç„¶ä½¿è®¾è®¡æ¯”è¾ƒæ˜“äºè¿›è¡Œã€‚ä½†æ˜¯ï¼Œåœ¨å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨è£…é¥°æ¨¡å¼ä¼šäº§ç”Ÿæ¯”ä½¿ç”¨ç»§æ‰¿å…³ç³»æ›´å¤šçš„å¯¹è±¡ã€‚æ›´å¤šçš„å¯¹è±¡ä¼šä½¿å¾—æŸ¥é”™å˜å¾—å›°éš¾ï¼Œç‰¹åˆ«æ˜¯è¿™äº›å¯¹è±¡çœ‹ä¸Šå»éƒ½å¾ˆç›¸åƒã€‚</p>
<p>åœ¨è£…é¥°æ¨¡å¼ä¸­çš„è§’è‰²æœ‰ï¼š</p>
<ul>
<li>æŠ½è±¡æ„ä»¶(Component)è§’è‰²ï¼šç»™å‡ºä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œä»¥è§„èŒƒå‡†å¤‡æ¥æ”¶é™„åŠ è´£ä»»çš„å¯¹è±¡ã€‚</li>
<li>å…·ä½“æ„ä»¶(ConcreteComponent)è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªå°†è¦æ¥æ”¶é™„åŠ è´£ä»»çš„ç±»ã€‚</li>
<li>è£…é¥°(Decorator)è§’è‰²ï¼šæŒæœ‰ä¸€ä¸ªæ„ä»¶(Component)å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸æŠ½è±¡æ„ä»¶æ¥å£ä¸€è‡´çš„æ¥å£ã€‚</li>
<li>å…·ä½“è£…é¥°(ConcreteDecorator)è§’è‰²ï¼šè´Ÿè´£ç»™æ„ä»¶å¯¹è±¡â€œè´´ä¸Šâ€é™„åŠ çš„è´£ä»»ã€‚</li>
</ul>
<h1 id="ç®€å•å®ç°">ç®€å•å®ç°<a hidden class="anchor" aria-hidden="true" href="#ç®€å•å®ç°">#</a></h1>
<p>æŠ½è±¡æ„ä»¶è§’è‰²</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Component {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> sampleOperation();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“æ„ä»¶è§’è‰²</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConcreteComponent <span style="color:#fff;font-weight:bold">implements</span> Component {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> sampleOperation() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è£…é¥°è§’è‰²</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Decorator <span style="color:#fff;font-weight:bold">implements</span> Component{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Component component;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Decorator(Component component){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">component</span> = component;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> sampleOperation() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å§”æ´¾ç»™æ„ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        component.<span style="color:#007f7f">sampleOperation</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“è£…é¥°è§’è‰²</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConcreteDecoratorA <span style="color:#fff;font-weight:bold">extends</span> Decorator {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ConcreteDecoratorA(Component component) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(component);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> sampleOperation() {
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">super</span>.<span style="color:#007f7f">sampleOperation</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConcreteDecoratorB <span style="color:#fff;font-weight:bold">extends</span> Decorator {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> ConcreteDecoratorB(Component component) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(component);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> sampleOperation() {
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">super</span>.<span style="color:#007f7f">sampleOperation</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="é½å¤©å¤§åœ£çš„ä¾‹å­">é½å¤©å¤§åœ£çš„ä¾‹å­<a hidden class="anchor" aria-hidden="true" href="#é½å¤©å¤§åœ£çš„ä¾‹å­">#</a></h1>
<p>å­™æ‚Ÿç©ºæœ‰ä¸ƒåäºŒèˆ¬å˜åŒ–ï¼Œä»–çš„æ¯ä¸€ç§å˜åŒ–éƒ½ç»™ä»–å¸¦æ¥ä¸€ç§é™„åŠ çš„æœ¬é¢†ã€‚ä»–å˜æˆé±¼å„¿æ—¶ï¼Œå°±å¯ä»¥åˆ°æ°´é‡Œæ¸¸æ³³ï¼›ä»–å˜æˆé¸Ÿå„¿æ—¶ï¼Œå°±å¯ä»¥åœ¨å¤©ä¸Šé£è¡Œã€‚
æœ¬ä¾‹ä¸­ï¼ŒComponentçš„è§’è‰²ä¾¿ç”±é¼é¼å¤§åçš„é½å¤©å¤§åœ£æ‰®æ¼”ï¼›ConcreteComponentçš„è§’è‰²å±äºå¤§åœ£çš„æœ¬å°Šï¼Œå°±æ˜¯çŒ¢ç‹²æœ¬äººï¼›Decoratorçš„è§’è‰²ç”±å¤§åœ£çš„ä¸ƒåäºŒå˜æ‰®æ¼”ã€‚è€ŒConcreteDecoratorçš„è§’è‰²ä¾¿æ˜¯é±¼å„¿ã€é¸Ÿå„¿ç­‰ä¸ƒåäºŒèˆ¬å˜åŒ–ã€‚
<img loading="lazy" src="2.png" alt=""  />
</p>
<p>æŠ½è±¡æ„ä»¶è§’è‰²â€œé½å¤©å¤§åœ£â€æ¥å£å®šä¹‰äº†ä¸€ä¸ªmove()æ–¹æ³•ï¼Œè¿™æ˜¯æ‰€æœ‰çš„å…·ä½“æ„ä»¶ç±»å’Œè£…é¥°ç±»å¿…é¡»å®ç°çš„ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å¤§åœ£çš„å°Šå·
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> TheGreatestSage {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> move();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“æ„ä»¶è§’è‰²â€œå¤§åœ£æœ¬å°Šâ€çŒ¢ç‹²ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Monkey <span style="color:#fff;font-weight:bold">implements</span> TheGreatestSage {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> move() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Monkey Move&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠ½è±¡è£…é¥°è§’è‰²â€œä¸ƒåäºŒå˜â€</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Change <span style="color:#fff;font-weight:bold">implements</span> TheGreatestSage {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> TheGreatestSage sage;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Change(TheGreatestSage sage){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">sage</span> = sage;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> move() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        sage.<span style="color:#007f7f">move</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“è£…é¥°è§’è‰²â€œé±¼å„¿â€</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Fish <span style="color:#fff;font-weight:bold">extends</span> Change {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Fish(TheGreatestSage sage) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(sage);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> move() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Fish Move&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…·ä½“è£…é¥°è§’è‰²â€œé¸Ÿå„¿â€</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Bird <span style="color:#fff;font-weight:bold">extends</span> Change {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Bird(TheGreatestSage sage) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(sage);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> move() {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bird Move&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®¢æˆ·ç«¯ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Client {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        TheGreatestSage sage = <span style="color:#fff;font-weight:bold">new</span> Monkey();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç¬¬ä¸€ç§å†™æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        TheGreatestSage bird = <span style="color:#fff;font-weight:bold">new</span> Bird(sage);
</span></span><span style="display:flex;"><span>        TheGreatestSage fish = <span style="color:#fff;font-weight:bold">new</span> Fish(bird);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç¬¬äºŒç§å†™æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//TheGreatestSage fish = new Fish(new Bird(sage));
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        fish.<span style="color:#007f7f">move</span>(); 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>â€œå¤§åœ£æœ¬å°Šâ€æ˜¯ConcreteComponentç±»ï¼Œè€Œâ€œé¸Ÿå„¿â€ã€â€œé±¼å„¿â€æ˜¯è£…é¥°ç±»ã€‚è¦è£…é¥°çš„æ˜¯â€œå¤§åœ£æœ¬å°Šâ€ï¼Œ
ä¹Ÿå³â€œçŒ¢ç‹²â€å®ä¾‹ã€‚
ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç³»ç»ŸæŠŠå¤§åœ£ä»ä¸€åªçŒ¢ç‹²è£…é¥°æˆäº†ä¸€åªé¸Ÿå„¿ï¼ˆæŠŠé¸Ÿå„¿çš„åŠŸèƒ½åŠ åˆ°äº†çŒ¢ç‹²èº«ä¸Šï¼‰ï¼Œç„¶ååˆæŠŠé¸Ÿå„¿è£…é¥°æˆäº†ä¸€æ¡é±¼å„¿ï¼ˆæŠŠé±¼å„¿çš„åŠŸèƒ½åŠ åˆ°äº†çŒ¢ç‹²+é¸Ÿå„¿èº«ä¸Šï¼Œå¾—åˆ°äº†çŒ¢ç‹²+é¸Ÿå„¿+é±¼å„¿ï¼‰ã€‚
<img loading="lazy" src="3.png" alt=""  />

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¤§åœ£çš„å˜åŒ–é¦–å…ˆå°†é¸Ÿå„¿çš„åŠŸèƒ½é™„åŠ åˆ°äº†çŒ¢ç‹²èº«ä¸Šï¼Œç„¶ååˆå°†é±¼å„¿çš„åŠŸèƒ½é™„åŠ åˆ°çŒ¢ç‹²+é¸Ÿå„¿èº«ä¸Šã€‚</p>
<h1 id="è£…é¥°æ¨¡å¼çš„ç®€åŒ–">è£…é¥°æ¨¡å¼çš„ç®€åŒ–<a hidden class="anchor" aria-hidden="true" href="#è£…é¥°æ¨¡å¼çš„ç®€åŒ–">#</a></h1>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè£…é¥°æ¨¡å¼çš„å®ç°éƒ½è¦æ¯”ä¸Šé¢ç»™å‡ºçš„ç¤ºæ„æ€§ä¾‹å­è¦ç®€å•ã€‚
å¦‚æœåªæœ‰ä¸€ä¸ªConcreteComponentç±»ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å»æ‰æŠ½è±¡çš„Componentç±»ï¼ˆæ¥å£ï¼‰ï¼ŒæŠŠDecoratorä½œä¸ºä¸€ä¸ªConcreteComponentå­ç±»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img loading="lazy" src="4.png" alt=""  />
</p>
<p>å¦‚æœåªæœ‰ä¸€ä¸ªConcreteDecoratorç±»ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„Decoratorç±»ï¼Œè€Œå¯ä»¥æŠŠDecoratorå’ŒConcreteDecoratorçš„è´£ä»»åˆå¹¶æˆä¸€ä¸ªç±»ã€‚ç”šè‡³åœ¨åªæœ‰ä¸¤ä¸ªConcreteDecoratorç±»çš„æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥è¿™æ ·åšã€‚
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img loading="lazy" src="5.png" alt=""  />
</p>
<h2 id="é€æ˜æ€§çš„è¦æ±‚">é€æ˜æ€§çš„è¦æ±‚<a hidden class="anchor" aria-hidden="true" href="#é€æ˜æ€§çš„è¦æ±‚">#</a></h2>
<p>è£…é¥°æ¨¡å¼å¯¹å®¢æˆ·ç«¯çš„é€æ˜æ€§è¦æ±‚ç¨‹åºä¸è¦å£°æ˜ä¸€ä¸ªConcreteComponentç±»å‹çš„å˜é‡ï¼Œè€Œåº”å½“å£°æ˜ä¸€ä¸ªComponentç±»å‹çš„å˜é‡ã€‚
ç”¨å­™æ‚Ÿç©ºçš„ä¾‹å­æ¥è¯´ï¼Œå¿…é¡»æ°¸è¿œæŠŠå­™æ‚Ÿç©ºçš„æ‰€æœ‰å˜åŒ–éƒ½å½“æˆå­™æ‚Ÿç©ºæ¥å¯¹å¾…ï¼Œè€Œå¦‚æœæŠŠè€å­™å˜æˆçš„é±¼å„¿å½“æˆé±¼å„¿ï¼Œè€Œä¸æ˜¯è€å­™ï¼Œé‚£å°±è¢«è€å­™éª—äº†ï¼Œè€Œè¿™æ—¶ä¸åº”å½“å‘ç”Ÿçš„ã€‚ä¸‹é¢çš„åšæ³•æ˜¯å¯¹çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>TheGreatestSage sage = new Monkey();
</span></span><span style="display:flex;"><span>TheGreatestSage bird = new Bird(sage);
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€Œä¸‹é¢çš„åšæ³•æ˜¯ä¸å¯¹çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Monkey sage = new Monkey();
</span></span><span style="display:flex;"><span>Bird bird = new Bird(sage);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åŠé€æ˜çš„è£…é¥°æ¨¡å¼">åŠé€æ˜çš„è£…é¥°æ¨¡å¼<a hidden class="anchor" aria-hidden="true" href="#åŠé€æ˜çš„è£…é¥°æ¨¡å¼">#</a></h2>
<p>ç„¶è€Œï¼Œçº¯ç²¹çš„è£…é¥°æ¨¡å¼å¾ˆéš¾æ‰¾åˆ°ã€‚è£…é¥°æ¨¡å¼çš„ç”¨æ„æ˜¯åœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹ï¼Œå¢å¼ºæ‰€è€ƒè™‘çš„ç±»çš„æ€§èƒ½ã€‚åœ¨å¢å¼ºæ€§èƒ½çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦å»ºç«‹æ–°çš„å…¬å¼€çš„æ–¹æ³•ã€‚å³ä¾¿æ˜¯åœ¨å­™å¤§åœ£çš„ç³»ç»Ÿé‡Œï¼Œä¹Ÿéœ€è¦æ–°çš„æ–¹æ³•ã€‚æ¯”å¦‚é½å¤©å¤§åœ£ç±»å¹¶æ²¡æœ‰é£è¡Œçš„èƒ½åŠ›ï¼Œè€Œé¸Ÿå„¿æœ‰ã€‚è¿™å°±æ„å‘³ç€é¸Ÿå„¿åº”å½“æœ‰ä¸€ä¸ªæ–°çš„fly()æ–¹æ³•ã€‚å†æ¯”å¦‚ï¼Œé½å¤©å¤§åœ£ç±»å¹¶æ²¡æœ‰æ¸¸æ³³çš„èƒ½åŠ›ï¼Œè€Œé±¼å„¿æœ‰ï¼Œè¿™å°±æ„å‘³ç€åœ¨é±¼å„¿ç±»é‡Œåº”å½“æœ‰ä¸€ä¸ªæ–°çš„swim()æ–¹æ³•ã€‚</p>
<p>è¿™å°±å¯¼è‡´äº†å¤§å¤šæ•°çš„è£…é¥°æ¨¡å¼çš„å®ç°éƒ½æ˜¯â€œåŠé€æ˜â€çš„ï¼Œè€Œä¸æ˜¯å®Œå…¨é€æ˜çš„ã€‚æ¢è¨€ä¹‹ï¼Œå…è®¸è£…é¥°æ¨¡å¼æ”¹å˜æ¥å£ï¼Œå¢åŠ æ–°çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€å®¢æˆ·ç«¯å¯ä»¥å£°æ˜ConcreteDecoratorç±»å‹çš„å˜é‡ï¼Œä»è€Œå¯ä»¥è°ƒç”¨
ConcreteDecoratorç±»ä¸­æ‰æœ‰çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>TheGreatestSage sage = <span style="color:#fff;font-weight:bold">new</span> Monkey();
</span></span><span style="display:flex;"><span>Bird bird = <span style="color:#fff;font-weight:bold">new</span> Bird(sage);
</span></span><span style="display:flex;"><span>bird.<span style="color:#007f7f">fly</span>();
</span></span></code></pre></td></tr></table>
</div>
</div><p>åŠé€æ˜çš„è£…é¥°æ¨¡å¼æ˜¯ä»‹äºè£…é¥°æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„ã€‚é€‚é…å™¨æ¨¡å¼çš„ç”¨æ„æ˜¯æ”¹å˜æ‰€è€ƒè™‘çš„ç±»çš„æ¥å£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ”¹å†™ä¸€ä¸ªæˆ–å‡ ä¸ªæ–¹æ³•ï¼Œæˆ–å¢åŠ æ–°çš„æ–¹æ³•æ¥å¢å¼ºæˆ–æ”¹å˜æ‰€è€ƒè™‘çš„ç±»çš„åŠŸèƒ½ã€‚å¤§å¤šæ•°çš„è£…é¥°æ¨¡å¼å®é™…ä¸Šæ˜¯åŠé€æ˜çš„è£…é¥°æ¨¡å¼ï¼Œè¿™æ ·çš„è£…é¥°æ¨¡å¼ä¹Ÿç§°åšåŠè£…é¥°ã€åŠé€‚é…å™¨æ¨¡å¼ã€‚</p>
<h1 id="è£…é¥°æ¨¡å¼åœ¨java-ioåº“ä¸­çš„åº”ç”¨">è£…é¥°æ¨¡å¼åœ¨JAVA I/Oåº“ä¸­çš„åº”ç”¨<a hidden class="anchor" aria-hidden="true" href="#è£…é¥°æ¨¡å¼åœ¨java-ioåº“ä¸­çš„åº”ç”¨">#</a></h1>
<p>è£…é¥°æ¨¡å¼åœ¨Javaè¯­è¨€ä¸­çš„æœ€è‘—åçš„åº”ç”¨è«è¿‡äºJava I/Oæ ‡å‡†åº“çš„è®¾è®¡äº†ã€‚
ç”±äºJava I/Oåº“éœ€è¦å¾ˆå¤šæ€§èƒ½çš„å„ç§ç»„åˆï¼Œå¦‚æœè¿™äº›æ€§èƒ½éƒ½æ˜¯ç”¨ç»§æ‰¿çš„æ–¹æ³•å®ç°çš„ï¼Œé‚£ä¹ˆæ¯ä¸€ç§ç»„åˆéƒ½éœ€è¦ä¸€ä¸ªç±»ï¼Œè¿™æ ·å°±ä¼šé€ æˆå¤§é‡æ€§èƒ½é‡å¤çš„ç±»å‡ºç°ã€‚è€Œå¦‚æœé‡‡ç”¨è£…é¥°æ¨¡å¼ï¼Œé‚£ä¹ˆç±»çš„æ•°ç›®å°±ä¼šå¤§å¤§å‡å°‘ï¼Œæ€§èƒ½çš„é‡å¤ä¹Ÿå¯ä»¥å‡è‡³æœ€å°‘ã€‚å› æ­¤è£…é¥°æ¨¡å¼æ˜¯Java I/Oåº“çš„åŸºæœ¬æ¨¡å¼ã€‚</p>
<p>Java I/Oåº“çš„å¯¹è±¡ç»“æ„å›¾å¦‚ä¸‹ï¼Œç”±äºJava I/Oçš„å¯¹è±¡ä¼—å¤šï¼Œå› æ­¤åªç”»å‡ºInputStreamçš„éƒ¨åˆ†ã€‚
<img loading="lazy" src="6.png" alt=""  />
</p>
<p>æ ¹æ®ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>
<p>æŠ½è±¡æ„ä»¶(Component)è§’è‰²ï¼š
ç”±InputStreamæ‰®æ¼”ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ºå„ç§å­ç±»å‹æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚</p>
</li>
<li>
<p>å…·ä½“æ„ä»¶(ConcreteComponent)è§’è‰²ï¼š
ç”±ByteArrayInputStreamã€FileInputStreamã€PipedInputStreamã€StringBufferInputStreamç­‰ç±»æ‰®æ¼”ã€‚å®ƒä»¬å®ç°äº†æŠ½è±¡æ„ä»¶è§’è‰²æ‰€è§„å®šçš„æ¥å£ã€‚</p>
</li>
<li>
<p>æŠ½è±¡è£…é¥°(Decorator)è§’è‰²ï¼š
ç”±FilterInputStreamæ‰®æ¼”ã€‚å®ƒå®ç°äº†InputStreamæ‰€è§„å®šçš„æ¥å£ã€‚</p>
</li>
<li>
<p>å…·ä½“è£…é¥°(ConcreteDecorator)è§’è‰²ï¼š
ç”±å‡ ä¸ªç±»æ‰®æ¼”ï¼Œåˆ†åˆ«æ˜¯BufferedInputStreamã€DataInputStreamä»¥åŠä¸¤ä¸ªä¸å¸¸ç”¨åˆ°çš„ç±»
LineNumberInputStreamã€PushbackInputStreamã€‚</p>
</li>
</ul>
<h2 id="åŠé€æ˜çš„è£…é¥°æ¨¡å¼-1">åŠé€æ˜çš„è£…é¥°æ¨¡å¼<a hidden class="anchor" aria-hidden="true" href="#åŠé€æ˜çš„è£…é¥°æ¨¡å¼-1">#</a></h2>
<p>è£…é¥°æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼éƒ½æ˜¯â€œåŒ…è£…æ¨¡å¼(Wrapper Pattern)â€ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡å°è£…å…¶ä»–å¯¹è±¡è¾¾åˆ°è®¾è®¡çš„ç›®çš„çš„ï¼Œä½†æ˜¯å®ƒä»¬çš„å½¢æ€æœ‰å¾ˆå¤§åŒºåˆ«ã€‚</p>
<p>ç†æƒ³çš„è£…é¥°æ¨¡å¼åœ¨å¯¹è¢«è£…é¥°å¯¹è±¡è¿›è¡ŒåŠŸèƒ½å¢å¼ºçš„åŒæ—¶ï¼Œè¦æ±‚å…·ä½“æ„ä»¶è§’è‰²ã€è£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®Œå…¨ä¸€è‡´ã€‚è€Œé€‚é…å™¨æ¨¡å¼åˆ™ä¸ç„¶ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œé€‚é…å™¨æ¨¡å¼å¹¶ä¸è¦æ±‚å¯¹æºå¯¹è±¡çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºï¼Œä½†æ˜¯ä¼šæ”¹å˜æºå¯¹è±¡çš„æ¥å£ï¼Œä»¥ä¾¿å’Œç›®æ ‡æ¥å£ç›¸ç¬¦åˆã€‚</p>
<p>è£…é¥°æ¨¡å¼æœ‰é€æ˜å’ŒåŠé€æ˜ä¸¤ç§ï¼Œè¿™ä¸¤ç§çš„åŒºåˆ«å°±åœ¨äºè£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£æ˜¯å¦å®Œå…¨ä¸€è‡´ã€‚é€æ˜çš„è£…é¥°æ¨¡å¼ä¹Ÿå°±æ˜¯ç†æƒ³çš„è£…é¥°æ¨¡å¼ï¼Œè¦æ±‚å…·ä½“æ„ä»¶è§’è‰²ã€è£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®Œå…¨ä¸€è‡´ã€‚ç›¸åï¼Œå¦‚æœè£…é¥°è§’è‰²çš„æ¥å£ä¸æŠ½è±¡æ„ä»¶è§’è‰²æ¥å£ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´è£…é¥°è§’è‰²çš„æ¥å£æ¯”æŠ½è±¡æ„ä»¶è§’è‰²çš„æ¥å£å®½çš„è¯ï¼Œè£…é¥°è§’è‰²å®é™…ä¸Šå·²ç»æˆäº†ä¸€ä¸ªé€‚é…å™¨è§’è‰²ï¼Œè¿™ç§è£…é¥°æ¨¡å¼ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼Œç§°ä¸ºâ€œåŠé€æ˜â€çš„è£…é¥°æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
<img loading="lazy" src="7.png" alt=""  />
</p>
<p>åœ¨é€‚é…å™¨æ¨¡å¼é‡Œé¢ï¼Œé€‚é…å™¨ç±»çš„æ¥å£é€šå¸¸ä¼šä¸ç›®æ ‡ç±»çš„æ¥å£é‡å ï¼Œä½†å¾€å¾€å¹¶ä¸å®Œå…¨ç›¸åŒã€‚æ¢è¨€ä¹‹ï¼Œé€‚é…å™¨ç±»çš„æ¥å£ä¼šæ¯”è¢«è£…é¥°çš„ç›®æ ‡ç±»æ¥å£å®½ã€‚
æ˜¾ç„¶ï¼ŒåŠé€æ˜çš„è£…é¥°æ¨¡å¼å®é™…ä¸Šå°±æ˜¯å¤„äºé€‚é…å™¨æ¨¡å¼ä¸è£…é¥°æ¨¡å¼ä¹‹é—´çš„ç°è‰²åœ°å¸¦ã€‚å¦‚æœå°†è£…é¥°æ¨¡å¼ä¸é€‚é…å™¨æ¨¡å¼åˆå¹¶æˆä¸ºä¸€ä¸ªâ€œåŒ…è£…æ¨¡å¼â€çš„è¯ï¼Œé‚£ä¹ˆåŠé€æ˜çš„è£…é¥°æ¨¡å¼å€’å¯ä»¥æˆä¸ºè¿™ç§åˆå¹¶åçš„â€œåŒ…è£…æ¨¡å¼â€çš„ä»£è¡¨ã€‚</p>
<h2 id="inputstreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼">InputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼<a hidden class="anchor" aria-hidden="true" href="#inputstreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼">#</a></h2>
<p>InputStreamç±»å‹ä¸­çš„è£…é¥°æ¨¡å¼æ˜¯åŠé€æ˜çš„ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä¸å¦¨çœ‹ä¸€çœ‹ä½œè£…é¥°æ¨¡å¼çš„æŠ½è±¡æ„ä»¶è§’è‰²çš„InputStreamçš„æºä»£ç ã€‚è¿™ä¸ªæŠ½è±¡ç±»å£°æ˜äº†ä¹ä¸ªæ–¹æ³•ï¼Œå¹¶ç»™å‡ºäº†å…¶ä¸­å…«ä¸ªçš„å®ç°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œéœ€è¦ç”±å­ç±»å®ç°ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JAVA" data-lang="JAVA"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> InputStream <span style="color:#fff;font-weight:bold">implements</span> Closeable {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">int</span> read() <span style="color:#fff;font-weight:bold">throws</span> IOException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read(<span style="color:#fff;font-weight:bold">byte</span> b[]) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read(<span style="color:#fff;font-weight:bold">byte</span> b[], <span style="color:#fff;font-weight:bold">int</span> off, <span style="color:#fff;font-weight:bold">int</span> len) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> skip(<span style="color:#fff;font-weight:bold">long</span> n) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> available() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> close() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> mark(<span style="color:#fff;font-weight:bold">int</span> readlimit) {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> reset() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> markSupported() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢æ˜¯ä½œä¸ºè£…é¥°æ¨¡å¼çš„æŠ½è±¡è£…é¥°è§’è‰²FilterInputStreamç±»çš„æºä»£ç ã€‚å¯ä»¥çœ‹å‡ºï¼ŒFilterInputStreamçš„æ¥å£ä¸InputStreamçš„æ¥å£æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´åˆ°è¿™ä¸€æ­¥ï¼Œè¿˜æ˜¯ä¸è£…é¥°æ¨¡å¼ç›¸ç¬¦åˆçš„ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JAVA" data-lang="JAVA"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> FilterInputStream <span style="color:#fff;font-weight:bold">extends</span> InputStream {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> FilterInputStream(InputStream in) {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read(<span style="color:#fff;font-weight:bold">byte</span> b[]) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read(<span style="color:#fff;font-weight:bold">byte</span> b[], <span style="color:#fff;font-weight:bold">int</span> off, <span style="color:#fff;font-weight:bold">int</span> len) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> skip(<span style="color:#fff;font-weight:bold">long</span> n) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> available() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> close() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> mark(<span style="color:#fff;font-weight:bold">int</span> readlimit) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> reset() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> markSupported() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢æ˜¯å…·ä½“è£…é¥°è§’è‰²PushbackInputStreamçš„æºä»£ç ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JAVA" data-lang="JAVA"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> PushbackInputStream <span style="color:#fff;font-weight:bold">extends</span> FilterInputStream {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">void</span> ensureOpen() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> PushbackInputStream(InputStream in, <span style="color:#fff;font-weight:bold">int</span> size) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> PushbackInputStream(InputStream in) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> read(<span style="color:#fff;font-weight:bold">byte</span>[] b, <span style="color:#fff;font-weight:bold">int</span> off, <span style="color:#fff;font-weight:bold">int</span> len) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> unread(<span style="color:#fff;font-weight:bold">int</span> b) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> unread(<span style="color:#fff;font-weight:bold">byte</span>[] b, <span style="color:#fff;font-weight:bold">int</span> off, <span style="color:#fff;font-weight:bold">int</span> len) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> unread(<span style="color:#fff;font-weight:bold">byte</span>[] b) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> available() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">long</span> skip(<span style="color:#fff;font-weight:bold">long</span> n) <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> markSupported() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> mark(<span style="color:#fff;font-weight:bold">int</span> readlimit) {}
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> reset() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">synchronized</span> <span style="color:#fff;font-weight:bold">void</span> close() <span style="color:#fff;font-weight:bold">throws</span> IOException {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŸ¥çœ‹æºç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªè£…é¥°ç±»æä¾›äº†é¢å¤–çš„æ–¹æ³•unread()ï¼Œè¿™å°±æ„å‘³ç€PushbackInputStreamæ˜¯ä¸€ä¸ªåŠé€æ˜çš„è£…é¥°ç±»ã€‚æ¢è¨€ ä¹‹ï¼Œå®ƒç ´åäº†ç†æƒ³çš„è£…é¥°æ¨¡å¼çš„è¦æ±‚ã€‚å¦‚æœå®¢æˆ·ç«¯æŒæœ‰ä¸€ä¸ªç±»å‹ä¸ºInputStreamå¯¹è±¡çš„å¼•ç”¨inçš„è¯ï¼Œé‚£ä¹ˆå¦‚æœinçš„çœŸå®ç±»å‹æ˜¯ PushbackInputStreamçš„è¯ï¼Œåªè¦å®¢æˆ·ç«¯ä¸éœ€è¦ä½¿ç”¨unread()æ–¹æ³•ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¸€èˆ¬æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°± å¿…é¡»è¿›è¡Œå‘ä¸‹ç±»å‹è½¬æ¢ã€‚å°†inçš„ç±»å‹è½¬æ¢æˆä¸ºPushbackInputStreamä¹‹åæ‰å¯èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»å‹è½¬æ¢æ„å‘³ç€å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“å®ƒ æ‹¿åˆ°çš„å¼•ç”¨æ˜¯æŒ‡å‘ä¸€ä¸ªç±»å‹ä¸ºPushbackInputStreamçš„å¯¹è±¡ã€‚è¿™å°±ç ´åäº†ä½¿ç”¨è£…é¥°æ¨¡å¼çš„åŸå§‹ç”¨æ„ã€‚</p>
<p>ç°å®ä¸–ç•Œä¸ç†è®ºæ€»å½’æ˜¯æœ‰ä¸€æ®µå·®è·çš„ã€‚çº¯ç²¹çš„è£…é¥°æ¨¡å¼åœ¨çœŸå®çš„ç³»ç»Ÿä¸­å¾ˆéš¾æ‰¾åˆ°ã€‚ä¸€èˆ¬æ‰€é‡åˆ°çš„ï¼Œéƒ½æ˜¯è¿™ç§åŠé€æ˜çš„è£…é¥°æ¨¡å¼ã€‚</p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨I/Oæµè¯»å–æ–‡ä»¶å†…å®¹çš„ç®€å•æ“ä½œç¤ºä¾‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JAVA" data-lang="JAVA"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> IOTest {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æµå¼è¯»å–æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        DataInputStream dis = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span>{
</span></span><span style="display:flex;"><span>            dis = <span style="color:#fff;font-weight:bold">new</span> DataInputStream(
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">new</span> BufferedInputStream(
</span></span><span style="display:flex;"><span>                            <span style="color:#fff;font-weight:bold">new</span> FileInputStream(<span style="color:#0ff;font-weight:bold">&#34;test.txt&#34;</span>)
</span></span><span style="display:flex;"><span>                    )
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è¯»å–æ–‡ä»¶å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">byte</span>[] bs = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[dis.<span style="color:#007f7f">available</span>()];
</span></span><span style="display:flex;"><span>            dis.<span style="color:#007f7f">read</span>(bs);
</span></span><span style="display:flex;"><span>            String content = <span style="color:#fff;font-weight:bold">new</span> String(bs);
</span></span><span style="display:flex;"><span>            System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(content);
</span></span><span style="display:flex;"><span>        }<span style="color:#fff;font-weight:bold">finally</span>{
</span></span><span style="display:flex;"><span>            dis.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§‚å¯Ÿä¸Šé¢çš„ä»£ç ï¼Œä¼šå‘ç°æœ€é‡Œå±‚æ˜¯ä¸€ä¸ªFileInputStreamå¯¹è±¡ï¼Œç„¶åæŠŠå®ƒä¼ é€’ç»™ä¸€ä¸ªBufferedInputStreamå¯¹è±¡ï¼Œç»è¿‡BufferedInputStreamå¤„ç†ï¼Œå†æŠŠå¤„ç†åçš„å¯¹è±¡ä¼ é€’ç»™äº†DataInputStreamå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯è£…é¥°å™¨çš„ç»„è£…è¿‡ç¨‹ï¼ŒFileInputStreamå¯¹è±¡ç›¸å½“äºåŸå§‹çš„è¢«è£…é¥°çš„å¯¹è±¡ï¼Œè€ŒBufferedInputStreamå¯¹è±¡å’ŒDataInputStreamå¯¹è±¡åˆ™ç›¸å½“äºè£…é¥°å™¨ã€‚</p>
<p><a href="https://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html">å‚è€ƒ</a></p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://funny-toffee-4aa7c3.netlify.app/">Wjy&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>