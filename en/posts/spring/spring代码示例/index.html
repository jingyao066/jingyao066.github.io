<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>springä»£ç ç¤ºä¾‹ | Wjy&#39;s Blog</title>
<meta name="keywords" content="spring">
<meta name="description" content="ç®€å•çš„hello world">
<meta name="author" content="">
<link rel="canonical" href="https://funny-toffee-4aa7c3.netlify.app/en/posts/spring/spring%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://funny-toffee-4aa7c3.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://funny-toffee-4aa7c3.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://funny-toffee-4aa7c3.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://funny-toffee-4aa7c3.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://funny-toffee-4aa7c3.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="springä»£ç ç¤ºä¾‹" />
<meta property="og:description" content="ç®€å•çš„hello world" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://funny-toffee-4aa7c3.netlify.app/en/posts/spring/spring%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-04T14:13:12+00:00" />
<meta property="article:modified_time" content="2020-01-04T14:13:12+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="springä»£ç ç¤ºä¾‹"/>
<meta name="twitter:description" content="ç®€å•çš„hello world"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://funny-toffee-4aa7c3.netlify.app/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "springä»£ç ç¤ºä¾‹",
      "item": "https://funny-toffee-4aa7c3.netlify.app/en/posts/spring/spring%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "springä»£ç ç¤ºä¾‹",
  "name": "springä»£ç ç¤ºä¾‹",
  "description": "ç®€å•çš„hello world",
  "keywords": [
    "spring"
  ],
  "articleBody": "ç®€å•çš„hello world åˆ›å»ºç®€å•çš„ä¿¡æ¯ç±»ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public class HelloWorld { private String message; public String getMessage() { return message; } public void setMessage(String message) { this.message = message; } } åˆ›å»º bean çš„é…ç½®æ–‡ä»¶beans.xmlï¼Œå¦‚æœæ˜¯æ™®é€šçš„webé¡¹ç›®ï¼Œéœ€è¦å°†è¿™ä¸ªç±»æ”¾åˆ°WEB-INFOä¸‹ï¼Œå¦‚æœæ˜¯spring-booté¡¹ç›®ï¼Œéœ€è¦å°†è¿™ä¸ªç±»æ”¾åˆ°resourcesç›®å½•ä¸‹ã€‚ åœ¨resourcesç›®å½•ä¸Šå³é”®æ–°å»ºæ–‡ä»¶ï¼Œé€‰æ‹©XML Configuration File-\u003eSpring config\n1 2 3 4 5 6 7 8 9 10 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ",
  "wordCount" : "60487",
  "inLanguage": "en",
  "datePublished": "2020-01-04T14:13:12Z",
  "dateModified": "2020-01-04T14:13:12Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://funny-toffee-4aa7c3.netlify.app/en/posts/spring/spring%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Wjy's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://funny-toffee-4aa7c3.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://funny-toffee-4aa7c3.netlify.app/en/" accesskey="h" title="Wjy&#39;s Blog (Alt + H)">Wjy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://funny-toffee-4aa7c3.netlify.app/en/links" title="ğŸ¤å‹é“¾">
                    <span>ğŸ¤å‹é“¾</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://funny-toffee-4aa7c3.netlify.app/en/">Home</a>&nbsp;Â»&nbsp;<a href="https://funny-toffee-4aa7c3.netlify.app/en/posts/">Posts</a></div>
    <h1 class="post-title">
      springä»£ç ç¤ºä¾‹
    </h1>
    <div class="post-meta"><span title='2020-01-04 14:13:12 +0000 UTC'>2020-01-04</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e7%ae%80%e5%8d%95%e7%9a%84hello-world" aria-label="ç®€å•çš„hello world">ç®€å•çš„hello world</a></li>
                <li>
                    <a href="#beanfactory" aria-label="BeanFactory">BeanFactory</a></li>
                <li>
                    <a href="#applicationcontext" aria-label="ApplicationContext">ApplicationContext</a></li>
                <li>
                    <a href="#beandefinition" aria-label="BeanDefinition">BeanDefinition</a></li>
                <li>
                    <a href="#ioc%e5%ae%b9%e5%99%a8%e7%9a%84%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="IoCå®¹å™¨çš„åˆå§‹åŒ–">IoCå®¹å™¨çš„åˆå§‹åŒ–</a><ul>
                        
                <li>
                    <a href="#xmlbeanfactory%e5%b1%8c%e4%b8%9dioc%e7%9a%84%e6%95%b4%e4%b8%aa%e6%b5%81%e7%a8%8b" aria-label="XmlBeanFactory(å±Œä¸IOC)çš„æ•´ä¸ªæµç¨‹">XmlBeanFactory(å±Œä¸IOC)çš„æ•´ä¸ªæµç¨‹</a></li>
                <li>
                    <a href="#filesystemxmlapplicationcontext-%e7%9a%84ioc%e5%ae%b9%e5%99%a8%e6%b5%81%e7%a8%8b" aria-label="FileSystemXmlApplicationContext çš„IOCå®¹å™¨æµç¨‹">FileSystemXmlApplicationContext çš„IOCå®¹å™¨æµç¨‹</a></li>
                <li>
                    <a href="#abstractapplicationcontext%e7%9a%84refresh%e5%87%bd%e6%95%b0%e8%bd%bd%e5%85%a5bean%e5%ae%9a%e4%b9%89%e8%bf%87%e7%a8%8b" aria-label="AbstractApplicationContextçš„refreshå‡½æ•°è½½å…¥Beanå®šä¹‰è¿‡ç¨‹">AbstractApplicationContextçš„refreshå‡½æ•°è½½å…¥Beanå®šä¹‰è¿‡ç¨‹</a></li>
                <li>
                    <a href="#abstractrefreshableapplicationcontext%e5%ad%90%e7%b1%bb%e7%9a%84loadbeandefinitions%e6%96%b9%e6%b3%95" aria-label="AbstractRefreshableApplicationContextå­ç±»çš„loadBeanDefinitionsæ–¹æ³•">AbstractRefreshableApplicationContextå­ç±»çš„loadBeanDefinitionsæ–¹æ³•</a></li>
                <li>
                    <a href="#abstractbeandefinitionreader%e8%af%bb%e5%8f%96bean%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90" aria-label="AbstractBeanDefinitionReaderè¯»å–Beanå®šä¹‰èµ„æº">AbstractBeanDefinitionReaderè¯»å–Beanå®šä¹‰èµ„æº</a></li>
                <li>
                    <a href="#%e8%b5%84%e6%ba%90%e5%8a%a0%e8%bd%bd%e5%99%a8%e8%8e%b7%e5%8f%96%e8%a6%81%e8%af%bb%e5%85%a5%e7%9a%84%e8%b5%84%e6%ba%90" aria-label="èµ„æºåŠ è½½å™¨è·å–è¦è¯»å…¥çš„èµ„æº">èµ„æºåŠ è½½å™¨è·å–è¦è¯»å…¥çš„èµ„æº</a></li>
                <li>
                    <a href="#xmlbeandefinitionreader%e5%8a%a0%e8%bd%bdbean%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90" aria-label="XmlBeanDefinitionReaderåŠ è½½Beanå®šä¹‰èµ„æº">XmlBeanDefinitionReaderåŠ è½½Beanå®šä¹‰èµ„æº</a></li>
                <li>
                    <a href="#documentloader%e5%b0%86bean%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90%e8%bd%ac%e6%8d%a2%e4%b8%badocument%e5%af%b9%e8%b1%a1" aria-label="DocumentLoaderå°†Beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºDocumentå¯¹è±¡">DocumentLoaderå°†Beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºDocumentå¯¹è±¡</a></li>
                <li>
                    <a href="#xmlbeandefinitionreader%e8%a7%a3%e6%9e%90%e8%bd%bd%e5%85%a5%e7%9a%84bean%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90%e6%96%87%e4%bb%b6" aria-label="XmlBeanDefinitionReaderè§£æè½½å…¥çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶">XmlBeanDefinitionReaderè§£æè½½å…¥çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶</a></li>
                <li>
                    <a href="#defaultbeandefinitiondocumentreader%e5%af%b9bean%e5%ae%9a%e4%b9%89%e7%9a%84document%e5%af%b9%e8%b1%a1%e8%a7%a3%e6%9e%90" aria-label="DefaultBeanDefinitionDocumentReaderå¯¹Beanå®šä¹‰çš„Documentå¯¹è±¡è§£æ">DefaultBeanDefinitionDocumentReaderå¯¹Beanå®šä¹‰çš„Documentå¯¹è±¡è§£æ</a></li>
                <li>
                    <a href="#beandefinitionparserdelegate%e8%a7%a3%e6%9e%90bean%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90%e6%96%87%e4%bb%b6%e4%b8%ad%e7%9a%84bean%e5%85%83%e7%b4%a0" aria-label="BeanDefinitionParserDelegateè§£æBeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„&amp;lt;Bean&amp;gt;å…ƒç´ ">BeanDefinitionParserDelegateè§£æBeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„<code>&lt;Bean&gt;</code>å…ƒç´ </a></li>
                <li>
                    <a href="#beandefinitionparserdelegate%e8%a7%a3%e6%9e%90property%e5%85%83%e7%b4%a0" aria-label="BeanDefinitionParserDelegateè§£æ&amp;lt;property&amp;gt;å…ƒç´ ">BeanDefinitionParserDelegateè§£æ<code>&lt;property&gt;</code>å…ƒç´ </a></li>
                <li>
                    <a href="#%e8%a7%a3%e6%9e%90property%e5%85%83%e7%b4%a0%e7%9a%84%e5%ad%90%e5%85%83%e7%b4%a0" aria-label="è§£æ&amp;lt;property&amp;gt;å…ƒç´ çš„å­å…ƒç´ ">è§£æ<code>&lt;property&gt;</code>å…ƒç´ çš„å­å…ƒç´ </a></li>
                <li>
                    <a href="#%e8%a7%a3%e6%9e%90list%e5%ad%90%e5%85%83%e7%b4%a0" aria-label="è§£æ&amp;lt;list&amp;gt;å­å…ƒç´ ">è§£æ<code>&lt;list&gt;</code>å­å…ƒç´ </a></li>
                <li>
                    <a href="#%e8%a7%a3%e6%9e%90%e8%bf%87%e5%90%8e%e7%9a%84beandefinition%e5%9c%a8ioc%e5%ae%b9%e5%99%a8%e4%b8%ad%e7%9a%84%e6%b3%a8%e5%86%8c" aria-label="è§£æè¿‡åçš„BeanDefinitionåœ¨IoCå®¹å™¨ä¸­çš„æ³¨å†Œ">è§£æè¿‡åçš„BeanDefinitionåœ¨IoCå®¹å™¨ä¸­çš„æ³¨å†Œ</a></li>
                <li>
                    <a href="#defaultlistablebeanfactory%e5%90%91ioc%e5%ae%b9%e5%99%a8%e6%b3%a8%e5%86%8c%e8%a7%a3%e6%9e%90%e5%90%8e%e7%9a%84beandefinition" aria-label="DefaultListableBeanFactoryå‘IoCå®¹å™¨æ³¨å†Œè§£æåçš„BeanDefinition">DefaultListableBeanFactoryå‘IoCå®¹å™¨æ³¨å†Œè§£æåçš„BeanDefinition</a></li></ul>
                </li>
                <li>
                    <a href="#ioc%e5%ae%b9%e5%99%a8%e7%9a%84%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="IOCå®¹å™¨çš„ä¾èµ–æ³¨å…¥">IOCå®¹å™¨çš„ä¾èµ–æ³¨å…¥</a><ul>
                        
                <li>
                    <a href="#%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5%e5%8f%91%e7%94%9f%e7%9a%84%e6%97%b6%e9%97%b4" aria-label="ä¾èµ–æ³¨å…¥å‘ç”Ÿçš„æ—¶é—´">ä¾èµ–æ³¨å…¥å‘ç”Ÿçš„æ—¶é—´</a></li>
                <li>
                    <a href="#abstractbeanfactory%e9%80%9a%e8%bf%87getbean%e5%90%91ioc%e5%ae%b9%e5%99%a8%e8%8e%b7%e5%8f%96%e8%a2%ab%e7%ae%a1%e7%90%86%e7%9a%84bean" aria-label="AbstractBeanFactoryé€šè¿‡getBeanå‘IoCå®¹å™¨è·å–è¢«ç®¡ç†çš„Bean">AbstractBeanFactoryé€šè¿‡getBeanå‘IoCå®¹å™¨è·å–è¢«ç®¡ç†çš„Bean</a></li>
                <li>
                    <a href="#abstractautowirecapablebeanfactory%e5%88%9b%e5%bb%babean%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1" aria-label="AbstractAutowireCapableBeanFactoryåˆ›å»ºBeanå®ä¾‹å¯¹è±¡">AbstractAutowireCapableBeanFactoryåˆ›å»ºBeanå®ä¾‹å¯¹è±¡</a></li>
                <li>
                    <a href="#createbeaninstance%e6%96%b9%e6%b3%95%e5%88%9b%e5%bb%babean%e7%9a%84java%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1" aria-label="createBeanInstanceæ–¹æ³•åˆ›å»ºBeançš„javaå®ä¾‹å¯¹è±¡">createBeanInstanceæ–¹æ³•åˆ›å»ºBeançš„javaå®ä¾‹å¯¹è±¡</a></li>
                <li>
                    <a href="#simpleinstantiationstrategy%e7%b1%bb%e4%bd%bf%e7%94%a8%e9%bb%98%e8%ae%a4%e7%9a%84%e6%97%a0%e5%8f%82%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e5%88%9b%e5%bb%babean%e5%ae%9e%e4%be%8b%e5%8c%96%e5%af%b9%e8%b1%a1" aria-label="SimpleInstantiationStrategyç±»ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºBeanå®ä¾‹åŒ–å¯¹è±¡">SimpleInstantiationStrategyç±»ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºBeanå®ä¾‹åŒ–å¯¹è±¡</a></li>
                <li>
                    <a href="#populatebean%e6%96%b9%e6%b3%95%e5%af%b9bean%e5%b1%9e%e6%80%a7%e7%9a%84%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="populateBeanæ–¹æ³•å¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥">populateBeanæ–¹æ³•å¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥</a></li>
                <li>
                    <a href="#beandefinitionvalueresolver%e8%a7%a3%e6%9e%90%e5%b1%9e%e6%80%a7%e5%80%bc" aria-label="BeanDefinitionValueResolverè§£æå±æ€§å€¼">BeanDefinitionValueResolverè§£æå±æ€§å€¼</a></li>
                <li>
                    <a href="#beanwrapperimpl%e5%af%b9bean%e5%b1%9e%e6%80%a7%e7%9a%84%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="BeanWrapperImplå¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥">BeanWrapperImplå¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥</a></li></ul>
                </li>
                <li>
                    <a href="#ioc%e5%ae%b9%e5%99%a8%e7%9a%84%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7" aria-label="IoCå®¹å™¨çš„é«˜çº§ç‰¹æ€§">IoCå®¹å™¨çš„é«˜çº§ç‰¹æ€§</a><ul>
                        
                <li>
                    <a href="#spring-ioc%e5%ae%b9%e5%99%a8%e7%9a%84lazy-init%e5%b1%9e%e6%80%a7%e5%ae%9e%e7%8e%b0%e9%a2%84%e5%ae%9e%e4%be%8b%e5%8c%96" aria-label="Spring IoCå®¹å™¨çš„lazy-initå±æ€§å®ç°é¢„å®ä¾‹åŒ–">Spring IoCå®¹å™¨çš„lazy-initå±æ€§å®ç°é¢„å®ä¾‹åŒ–</a></li>
                <li>
                    <a href="#factorybean%e7%9a%84%e5%ae%9e%e7%8e%b0" aria-label="FactoryBeançš„å®ç°">FactoryBeançš„å®ç°</a><ul>
                        
                <li>
                    <a href="#factorybean%e7%9a%84%e6%ba%90%e7%a0%81%e5%a6%82%e4%b8%8b" aria-label="FactoryBeançš„æºç å¦‚ä¸‹">FactoryBeançš„æºç å¦‚ä¸‹</a></li>
                <li>
                    <a href="#abstractbeanfactory%e7%9a%84getbean%e6%96%b9%e6%b3%95%e8%b0%83%e7%94%a8factorybean" aria-label="AbstractBeanFactoryçš„getBeanæ–¹æ³•è°ƒç”¨FactoryBean">AbstractBeanFactoryçš„getBeanæ–¹æ³•è°ƒç”¨FactoryBean</a></li>
                <li>
                    <a href="#abstractbeanfactory%e7%94%9f%e4%ba%a7bean%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1" aria-label="AbstractBeanFactoryç”Ÿäº§Beanå®ä¾‹å¯¹è±¡">AbstractBeanFactoryç”Ÿäº§Beanå®ä¾‹å¯¹è±¡</a></li>
                <li>
                    <a href="#%e5%b7%a5%e5%8e%82bean%e7%9a%84%e5%ae%9e%e7%8e%b0%e7%b1%bbgetobject%e6%96%b9%e6%b3%95%e5%88%9b%e5%bb%babean%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1" aria-label="å·¥å‚Beançš„å®ç°ç±»getObjectæ–¹æ³•åˆ›å»ºBeanå®ä¾‹å¯¹è±¡">å·¥å‚Beançš„å®ç°ç±»getObjectæ–¹æ³•åˆ›å»ºBeanå®ä¾‹å¯¹è±¡</a></li></ul>
                </li>
                <li>
                    <a href="#beanpostprocessor%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8%e7%9a%84%e5%ae%9e%e7%8e%b0" aria-label="BeanPostProcessoråç½®å¤„ç†å™¨çš„å®ç°">BeanPostProcessoråç½®å¤„ç†å™¨çš„å®ç°</a><ul>
                        
                <li>
                    <a href="#beanpostprocessor%e7%9a%84%e6%ba%90%e7%a0%81%e5%a6%82%e4%b8%8b" aria-label="BeanPostProcessorçš„æºç å¦‚ä¸‹ï¼š">BeanPostProcessorçš„æºç å¦‚ä¸‹ï¼š</a></li>
                <li>
                    <a href="#abstractautowirecapablebeanfactory%e7%b1%bb%e5%af%b9%e5%ae%b9%e5%99%a8%e7%94%9f%e6%88%90%e7%9a%84bean%e6%b7%bb%e5%8a%a0%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8" aria-label="AbstractAutowireCapableBeanFactoryç±»å¯¹å®¹å™¨ç”Ÿæˆçš„Beanæ·»åŠ åç½®å¤„ç†å™¨">AbstractAutowireCapableBeanFactoryç±»å¯¹å®¹å™¨ç”Ÿæˆçš„Beanæ·»åŠ åç½®å¤„ç†å™¨</a></li>
                <li>
                    <a href="#initializebean%e6%96%b9%e6%b3%95%e4%b8%ba%e5%ae%b9%e5%99%a8%e4%ba%a7%e7%94%9f%e7%9a%84bean%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1%e6%b7%bb%e5%8a%a0beanpostprocessor%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8" aria-label="initializeBeanæ–¹æ³•ä¸ºå®¹å™¨äº§ç”Ÿçš„Beanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨">initializeBeanæ–¹æ³•ä¸ºå®¹å™¨äº§ç”Ÿçš„Beanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨</a></li>
                <li>
                    <a href="#advisoradapterregistrationmanager%e5%9c%a8bean%e5%af%b9%e8%b1%a1%e5%88%9d%e5%a7%8b%e5%8c%96%e5%90%8e%e6%b3%a8%e5%86%8c%e9%80%9a%e7%9f%a5%e9%80%82%e9%85%8d%e5%99%a8" aria-label="AdvisorAdapterRegistrationManageråœ¨Beanå¯¹è±¡åˆå§‹åŒ–åæ³¨å†Œé€šçŸ¥é€‚é…å™¨">AdvisorAdapterRegistrationManageråœ¨Beanå¯¹è±¡åˆå§‹åŒ–åæ³¨å†Œé€šçŸ¥é€‚é…å™¨</a></li></ul>
                </li>
                <li>
                    <a href="#spring-ioc%e5%ae%b9%e5%99%a8autowiring%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86" aria-label="Spring IoCå®¹å™¨autowiringå®ç°åŸç†">Spring IoCå®¹å™¨autowiringå®ç°åŸç†</a><ul>
                        
                <li>
                    <a href="#abstractautowirecapablebeanfactory%e5%af%b9bean%e5%ae%9e%e4%be%8b%e8%bf%9b%e8%a1%8c%e5%b1%9e%e6%80%a7%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="AbstractAutoWireCapableBeanFactoryå¯¹Beanå®ä¾‹è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥">AbstractAutoWireCapableBeanFactoryå¯¹Beanå®ä¾‹è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥</a></li>
                <li>
                    <a href="#spring-ioc%e5%ae%b9%e5%99%a8%e6%a0%b9%e6%8d%aebean%e5%90%8d%e7%a7%b0%e6%88%96%e8%80%85%e7%b1%bb%e5%9e%8b%e8%bf%9b%e8%a1%8cautowiring%e8%87%aa%e5%8a%a8%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="Spring IoCå®¹å™¨æ ¹æ®Beanåç§°æˆ–è€…ç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥">Spring IoCå®¹å™¨æ ¹æ®Beanåç§°æˆ–è€…ç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥</a></li>
                <li>
                    <a href="#defaultsingletonbeanregistry%e7%9a%84registerdependentbean%e6%96%b9%e6%b3%95%e5%af%b9%e5%b1%9e%e6%80%a7%e6%b3%a8%e5%85%a5" aria-label="DefaultSingletonBeanRegistryçš„registerDependentBeanæ–¹æ³•å¯¹å±æ€§æ³¨å…¥">DefaultSingletonBeanRegistryçš„registerDependentBeanæ–¹æ³•å¯¹å±æ€§æ³¨å…¥</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#spring-bean" aria-label="Spring bean">Spring bean</a><ul>
                        
                <li>
                    <a href="#bean%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="beançš„ä½œç”¨åŸŸ">beançš„ä½œç”¨åŸŸ</a><ul>
                        
                <li>
                    <a href="#singleton-%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="singleton ä½œç”¨åŸŸ">singleton ä½œç”¨åŸŸ</a></li>
                <li>
                    <a href="#prototype-%e4%bd%9c%e7%94%a8%e5%9f%9f" aria-label="prototype ä½œç”¨åŸŸ">prototype ä½œç”¨åŸŸ</a></li></ul>
                </li>
                <li>
                    <a href="#bean%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="beançš„ç”Ÿå‘½å‘¨æœŸ">beançš„ç”Ÿå‘½å‘¨æœŸ</a><ul>
                        
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e5%9b%9e%e8%b0%83" aria-label="åˆå§‹åŒ–å›è°ƒ">åˆå§‹åŒ–å›è°ƒ</a></li>
                <li>
                    <a href="#%e9%94%80%e6%af%81%e5%9b%9e%e8%b0%83" aria-label="é”€æ¯å›è°ƒ">é”€æ¯å›è°ƒ</a></li>
                <li>
                    <a href="#%e7%a4%ba%e4%be%8b" aria-label="ç¤ºä¾‹">ç¤ºä¾‹</a></li></ul>
                </li>
                <li>
                    <a href="#bean-%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8-beanpostprocessor" aria-label="bean åç½®å¤„ç†å™¨ BeanPostProcessor">bean åç½®å¤„ç†å™¨ BeanPostProcessor</a></li>
                <li>
                    <a href="#bean%e7%9a%84%e7%bb%a7%e6%89%bf" aria-label="beançš„ç»§æ‰¿">beançš„ç»§æ‰¿</a></li></ul>
                </li>
                <li>
                    <a href="#spring-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="spring ä¾èµ–æ³¨å…¥">spring ä¾èµ–æ³¨å…¥</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8e%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e7%9a%84%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥">åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8esetter%e7%9a%84%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" aria-label="åŸºäºsetterçš„ä¾èµ–æ³¨å…¥">åŸºäºsetterçš„ä¾èµ–æ³¨å…¥</a></li>
                <li>
                    <a href="#%e6%b3%a8%e5%85%a5%e5%86%85%e9%83%a8beans" aria-label="æ³¨å…¥å†…éƒ¨beans">æ³¨å…¥å†…éƒ¨beans</a></li>
                <li>
                    <a href="#%e6%b3%a8%e5%85%a5%e9%9b%86%e5%90%88" aria-label="æ³¨å…¥é›†åˆ">æ³¨å…¥é›†åˆ</a></li></ul>
                </li>
                <li>
                    <a href="#bean%e7%9a%84%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d" aria-label="beançš„è‡ªåŠ¨è£…é…">beançš„è‡ªåŠ¨è£…é…</a><ul>
                        
                <li>
                    <a href="#byname" aria-label="byName">byName</a></li>
                <li>
                    <a href="#bytype" aria-label="byType">byType</a></li>
                <li>
                    <a href="#%e7%94%b1%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d" aria-label="ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…">ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8e%e6%b3%a8%e8%a7%a3%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="åŸºäºæ³¨è§£çš„é…ç½®">åŸºäºæ³¨è§£çš„é…ç½®</a><ul>
                        
                <li>
                    <a href="#required" aria-label="@Required">@Required</a></li>
                <li>
                    <a href="#autowired" aria-label="@Autowired">@Autowired</a><ul>
                        
                <li>
                    <a href="#%e5%9c%a8setter%e6%96%b9%e6%b3%95%e4%b8%8a%e4%bd%bf%e7%94%a8autowired" aria-label="åœ¨Setteræ–¹æ³•ä¸Šä½¿ç”¨@Autowired">åœ¨Setteræ–¹æ³•ä¸Šä½¿ç”¨@Autowired</a></li>
                <li>
                    <a href="#%e5%9c%a8%e5%b1%9e%e6%80%a7%e4%b8%8a%e4%bd%bf%e7%94%a8autowired" aria-label="åœ¨å±æ€§ä¸Šä½¿ç”¨@Autowired">åœ¨å±æ€§ä¸Šä½¿ç”¨@Autowired</a></li>
                <li>
                    <a href="#%e5%9c%a8%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e4%b8%8a%e4%bd%bf%e7%94%a8autowired" aria-label="åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨@Autowired">åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨@Autowired</a></li>
                <li>
                    <a href="#autowiredrequired--false" aria-label="@Autowired(required = false)">@Autowired(required = false)</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8autowired%e7%9a%84%e5%8e%9f%e7%90%86%e6%98%af%e4%bb%80%e4%b9%88" aria-label="ä½¿ç”¨@Autowiredçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ">ä½¿ç”¨@Autowiredçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul>
                </li>
                <li>
                    <a href="#qualifier" aria-label="@Qualifier">@Qualifier</a></li>
                <li>
                    <a href="#jsr-250" aria-label="JSR-250">JSR-250</a><ul>
                        
                <li>
                    <a href="#postconstruct-%e5%92%8c-predestroy-%e6%b3%a8%e9%87%8a" aria-label="@PostConstruct å’Œ @PreDestroy æ³¨é‡Š">@PostConstruct å’Œ @PreDestroy æ³¨é‡Š</a></li>
                <li>
                    <a href="#resource" aria-label="@Resource">@Resource</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#spring-%e5%9f%ba%e4%ba%8e-java-%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="Spring åŸºäº Java çš„é…ç½®">Spring åŸºäº Java çš„é…ç½®</a><ul>
                        
                <li>
                    <a href="#configuration-%e5%92%8c-bean" aria-label="@Configuration å’Œ @Bean">@Configuration å’Œ @Bean</a></li>
                <li>
                    <a href="#%e6%b3%a8%e5%85%a5-bean-%e7%9a%84%e4%be%9d%e8%b5%96%e6%80%a7" aria-label="æ³¨å…¥ Bean çš„ä¾èµ–æ€§">æ³¨å…¥ Bean çš„ä¾èµ–æ€§</a></li>
                <li>
                    <a href="#import" aria-label="@Import">@Import</a></li>
                <li>
                    <a href="#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%9b%9e%e8%b0%83" aria-label="ç”Ÿå‘½å‘¨æœŸå›è°ƒ">ç”Ÿå‘½å‘¨æœŸå›è°ƒ</a></li></ul>
                </li>
                <li>
                    <a href="#spring-%e4%b8%ad%e7%9a%84%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86" aria-label="Spring ä¸­çš„äº‹ä»¶å¤„ç†">Spring ä¸­çš„äº‹ä»¶å¤„ç†</a><ul>
                        
                <li>
                    <a href="#%e7%9b%91%e5%90%ac%e4%b8%8a%e4%b8%8b%e6%96%87%e4%ba%8b%e4%bb%b6" aria-label="ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶">ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶</a></li></ul>
                </li>
                <li>
                    <a href="#spring-%e4%b8%ad%e7%9a%84%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6" aria-label="Spring ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶">Spring ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="ç®€å•çš„hello-world">ç®€å•çš„hello world<a hidden class="anchor" aria-hidden="true" href="#ç®€å•çš„hello-world">#</a></h1>
<p>åˆ›å»ºç®€å•çš„ä¿¡æ¯ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage(String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message</span> = message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»º bean çš„é…ç½®æ–‡ä»¶<code>beans.xml</code>ï¼Œå¦‚æœæ˜¯æ™®é€šçš„webé¡¹ç›®ï¼Œéœ€è¦å°†è¿™ä¸ªç±»æ”¾åˆ°<code>WEB-INFO</code>ä¸‹ï¼Œå¦‚æœæ˜¯spring-booté¡¹ç›®ï¼Œéœ€è¦å°†è¿™ä¸ªç±»æ”¾åˆ°<code>resources</code>ç›®å½•ä¸‹ã€‚
åœ¨<code>resources</code>ç›®å½•ä¸Šå³é”®æ–°å»ºæ–‡ä»¶ï¼Œé€‰æ‹©<code>XML Configuration File</code>-&gt;<code>Spring config</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ Spring åº”ç”¨ç¨‹åºè¢«åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ï¼Œæ¡†æ¶åˆ©ç”¨äº†ä¸Šé¢çš„é…ç½®æ–‡ä»¶æ¥åˆ›å»ºæ‰€æœ‰å·²ç»å®šä¹‰çš„ beansï¼Œå¹¶ä¸”æŒ‰ç…§æ ‡ç­¾çš„å®šä¹‰ä¸ºå®ƒä»¬åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ IDã€‚ä½ å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥ä¼ é€’åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä½¿ç”¨ä¸åŒå˜é‡çš„å€¼ã€‚</p>
<p>åˆ›å»ºä¸»ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        HelloWorld helloWorld = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(helloWorld.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸»ç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡º
<code>Hello World!</code>
æˆ‘ä»¬å·²ç»æˆåŠŸåœ°åˆ›å»ºäº†ä½ çš„ç¬¬ä¸€ä¸ª Spring åº”ç”¨ç¨‹åºã€‚</p>
<h1 id="beanfactory">BeanFactory<a hidden class="anchor" aria-hidden="true" href="#beanfactory">#</a></h1>
<p>ä»€ä¹ˆæ˜¯Ioc/DIï¼Ÿ
IoC å®¹å™¨ï¼šæœ€ä¸»è¦æ˜¯å®Œæˆäº†å®Œæˆå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–çš„ç®¡ç†æ³¨å…¥ç­‰ç­‰ã€‚
å…ˆä»æˆ‘ä»¬è‡ªå·±è®¾è®¡è¿™æ ·ä¸€ä¸ªè§†è§’æ¥è€ƒè™‘ï¼š
æ‰€è°“æ§åˆ¶åè½¬ï¼Œå°±æ˜¯æŠŠåŸå…ˆæˆ‘ä»¬ä»£ç é‡Œé¢éœ€è¦å®ç°çš„å¯¹è±¡åˆ›å»ºã€ä¾èµ–çš„ä»£ç ï¼Œåè½¬ç»™å®¹å™¨æ¥å¸®å¿™å®ç°ã€‚é‚£ä¹ˆå¿…ç„¶çš„æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼ŒåŒæ—¶éœ€è¦ä¸€ç§æè¿°æ¥è®©å®¹å™¨çŸ¥é“éœ€è¦åˆ›å»ºçš„å¯¹è±¡ä¸å¯¹è±¡çš„å…³ç³»ã€‚è¿™ä¸ªæè¿°æœ€å…·ä½“è¡¨ç°å°±æ˜¯æˆ‘ä»¬å¯é…ç½®çš„æ–‡ä»¶ã€‚</p>
<p>å¯¹è±¡å’Œå¯¹è±¡å…³ç³»æ€ä¹ˆè¡¨ç¤ºï¼Ÿ
å¯ä»¥ç”¨ xml ï¼Œ properties æ–‡ä»¶ç­‰è¯­ä¹‰åŒ–é…ç½®æ–‡ä»¶è¡¨ç¤ºã€‚</p>
<p>æè¿°å¯¹è±¡å…³ç³»çš„æ–‡ä»¶å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ
å¯èƒ½æ˜¯ classpath ï¼Œ filesystem ï¼Œæˆ–è€…æ˜¯ URL ç½‘ç»œèµ„æºï¼Œ servletContext ç­‰ã€‚
å›åˆ°æ­£é¢˜ï¼Œæœ‰äº†é…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦å¯¹é…ç½®æ–‡ä»¶è§£æã€‚
ä¸åŒçš„é…ç½®æ–‡ä»¶å¯¹å¯¹è±¡çš„æè¿°ä¸ä¸€æ ·ï¼Œå¦‚æ ‡å‡†çš„ï¼Œè‡ªå®šä¹‰å£°æ˜å¼çš„ï¼Œå¦‚ä½•ç»Ÿä¸€ï¼Ÿ åœ¨å†…éƒ¨éœ€è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å…³äºå¯¹è±¡çš„å®šä¹‰ï¼Œæ‰€æœ‰å¤–éƒ¨çš„æè¿°éƒ½å¿…é¡»è½¬åŒ–æˆç»Ÿä¸€çš„æè¿°å®šä¹‰ã€‚
å¦‚ä½•å¯¹ä¸åŒçš„é…ç½®æ–‡ä»¶è¿›è¡Œè§£æï¼Ÿéœ€è¦å¯¹ä¸åŒçš„é…ç½®æ–‡ä»¶è¯­æ³•ï¼Œé‡‡ç”¨ä¸åŒçš„è§£æå™¨</p>
<p>Spring Beançš„åˆ›å»ºæ˜¯å…¸å‹çš„å·¥å‚æ¨¡å¼ï¼Œè¿™ä¸€ç³»åˆ—çš„Beanå·¥å‚ï¼Œä¹Ÿå³IOCå®¹å™¨ä¸ºå¼€å‘è€…ç®¡ç†å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»æä¾›äº†å¾ˆå¤šä¾¿åˆ©å’ŒåŸºç¡€æœåŠ¡ï¼Œåœ¨Springä¸­æœ‰è®¸å¤šçš„IOCå®¹å™¨çš„å®ç°ä¾›ç”¨æˆ·é€‰æ‹©å’Œä½¿ç”¨ï¼Œå…¶ç›¸äº’å…³ç³»å¦‚ä¸‹ï¼š
<img loading="lazy" src="5.png" alt=""  />
</p>
<p>å…¶ä¸­BeanFactoryä½œä¸ºæœ€é¡¶å±‚çš„ä¸€ä¸ªæ¥å£ç±»ï¼Œå®ƒå®šä¹‰äº†IOCå®¹å™¨çš„åŸºæœ¬åŠŸèƒ½è§„èŒƒï¼ŒBeanFactory æœ‰ä¸‰ä¸ªå­ç±»ï¼šListableBeanFactoryã€HierarchicalBeanFactory å’ŒAutowireCapableBeanFactoryã€‚ä½†æ˜¯ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°æœ€ç»ˆçš„é»˜è®¤å®ç°ç±»æ˜¯ DefaultListableBeanFactoryï¼Œä»–å®ç°äº†æ‰€æœ‰çš„æ¥å£ã€‚é‚£ä¸ºä½•è¦å®šä¹‰è¿™ä¹ˆå¤šå±‚æ¬¡çš„æ¥å£å‘¢ï¼ŸæŸ¥é˜…è¿™äº›æ¥å£çš„æºç å’Œè¯´æ˜å‘ç°ï¼Œæ¯ä¸ªæ¥å£éƒ½æœ‰ä»–ä½¿ç”¨çš„åœºåˆï¼Œå®ƒä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†åœ¨ Spring å†…éƒ¨åœ¨æ“ä½œè¿‡ç¨‹ä¸­å¯¹è±¡çš„ä¼ é€’å’Œè½¬åŒ–è¿‡ç¨‹ä¸­ï¼Œå¯¹å¯¹è±¡çš„æ•°æ®è®¿é—®æ‰€åšçš„é™åˆ¶ã€‚ä¾‹å¦‚ ListableBeanFactory æ¥å£è¡¨ç¤ºè¿™äº› Bean æ˜¯å¯åˆ—è¡¨çš„ï¼Œè€Œ HierarchicalBeanFactory è¡¨ç¤ºçš„æ˜¯è¿™äº› Bean æ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªBean æœ‰å¯èƒ½æœ‰çˆ¶ Beanã€‚AutowireCapableBeanFactory æ¥å£å®šä¹‰ Bean çš„è‡ªåŠ¨è£…é…è§„åˆ™ã€‚è¿™å››ä¸ªæ¥å£å…±åŒå®šä¹‰äº† Bean çš„é›†åˆã€Bean ä¹‹é—´çš„å…³ç³»ã€ä»¥åŠ Bean è¡Œä¸ºã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> BeanFactory {
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">//å¯¹FactoryBeançš„è½¬ä¹‰å®šä¹‰ï¼Œå› ä¸ºå¦‚æœä½¿ç”¨beançš„åå­—æ£€ç´¢FactoryBeanå¾—åˆ°çš„å¯¹è±¡æ˜¯å·¥å‚ç”Ÿæˆçš„å¯¹è±¡ï¼Œ    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#007f7f">//å¦‚æœéœ€è¦å¾—åˆ°å·¥å‚æœ¬èº«ï¼Œéœ€è¦è½¬ä¹‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      String FACTORY_BEAN_PREFIX = <span style="color:#0ff;font-weight:bold">&#34;&amp;&#34;</span>; 
</span></span><span style="display:flex;"><span>         
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">//æ ¹æ®beançš„åå­—ï¼Œè·å–åœ¨IOCå®¹å™¨ä¸­å¾—åˆ°beanå®ä¾‹    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      Object getBean(String name) <span style="color:#fff;font-weight:bold">throws</span> BeansException;    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">//æ ¹æ®beançš„åå­—å’ŒClassç±»å‹æ¥å¾—åˆ°beanå®ä¾‹ï¼Œå¢åŠ äº†ç±»å‹å®‰å…¨éªŒè¯æœºåˆ¶ã€‚    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      Object getBean(String name, Class requiredType) <span style="color:#fff;font-weight:bold">throws</span> BeansException;    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">//æä¾›å¯¹beançš„æ£€ç´¢ï¼Œçœ‹çœ‹æ˜¯å¦åœ¨IOCå®¹å™¨æœ‰è¿™ä¸ªåå­—çš„bean    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>      <span style="color:#fff;font-weight:bold">boolean</span> containsBean(String name);    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">//æ ¹æ®beanåå­—å¾—åˆ°beanå®ä¾‹ï¼Œå¹¶åŒæ—¶åˆ¤æ–­è¿™ä¸ªbeanæ˜¯ä¸æ˜¯å•ä¾‹    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     <span style="color:#fff;font-weight:bold">boolean</span> isSingleton(String name) <span style="color:#fff;font-weight:bold">throws</span> NoSuchBeanDefinitionException;    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">//å¾—åˆ°beanå®ä¾‹çš„Classç±»å‹    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     Class getType(String name) <span style="color:#fff;font-weight:bold">throws</span> NoSuchBeanDefinitionException;    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">//å¾—åˆ°beançš„åˆ«åï¼Œå¦‚æœæ ¹æ®åˆ«åæ£€ç´¢ï¼Œé‚£ä¹ˆå…¶åŸåä¹Ÿä¼šè¢«æ£€ç´¢å‡ºæ¥    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String[] getAliases(String name);    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨BeanFactoryé‡Œåªå¯¹IOCå®¹å™¨çš„åŸºæœ¬è¡Œä¸ºä½œäº†å®šä¹‰ï¼Œæ ¹æœ¬ä¸å…³å¿ƒä½ çš„beanæ˜¯å¦‚ä½•å®šä¹‰æ€æ ·åŠ è½½çš„ã€‚æ­£å¦‚æˆ‘ä»¬åªå…³å¿ƒå·¥å‚é‡Œå¾—åˆ°ä»€ä¹ˆçš„äº§å“å¯¹è±¡ï¼Œè‡³äºå·¥å‚æ˜¯æ€ä¹ˆç”Ÿäº§è¿™äº›å¯¹è±¡çš„ï¼Œè¿™ä¸ªåŸºæœ¬çš„æ¥å£ä¸å…³å¿ƒã€‚è€Œè¦çŸ¥é“å·¥å‚æ˜¯å¦‚ä½•äº§ç”Ÿå¯¹è±¡çš„ï¼Œæˆ‘ä»¬éœ€è¦çœ‹å…·ä½“çš„IOCå®¹å™¨å®ç°ï¼Œspringæä¾›äº†è®¸å¤šIOCå®¹å™¨çš„å®ç°ã€‚
<code>æ¯”å¦‚XmlBeanFactory</code>ï¼Œ<code>ClasspathXmlApplicationContext</code>ç­‰ã€‚
å…¶ä¸­XmlBeanFactoryå°±æ˜¯é’ˆå¯¹æœ€åŸºæœ¬çš„iocå®¹å™¨çš„å®ç°ï¼Œè¿™ä¸ªIOCå®¹å™¨å¯ä»¥è¯»å–XMLæ–‡ä»¶å®šä¹‰
çš„BeanDefinitionï¼ˆXMLæ–‡ä»¶ä¸­å¯¹beançš„æè¿°ï¼‰,å¦‚æœè¯´XmlBeanFactoryæ˜¯å®¹å™¨ä¸­çš„å±Œä¸ï¼Œ
ApplicationContextåº”è¯¥ç®—å®¹å™¨ä¸­çš„é«˜å¸…å¯Œã€‚</p>
<h1 id="applicationcontext">ApplicationContext<a hidden class="anchor" aria-hidden="true" href="#applicationcontext">#</a></h1>
<p>ApplicationContextæ˜¯Springæä¾›çš„ä¸€ä¸ªé«˜çº§çš„IoCå®¹å™¨ï¼Œå®ƒé™¤äº†èƒ½å¤Ÿæä¾›IoCå®¹å™¨çš„åŸºæœ¬åŠŸèƒ½å¤–ï¼Œè¿˜ä¸ºç”¨æˆ·æä¾›äº†ä»¥ä¸‹çš„é™„åŠ æœåŠ¡ã€‚
ä»ApplicationContextæ¥å£çš„å®ç°ï¼Œæˆ‘ä»¬çœ‹å‡ºå…¶ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ”¯æŒä¿¡æ¯æºï¼Œå¯ä»¥å®ç°å›½é™…åŒ–ã€‚ï¼ˆå®ç°MessageSourceæ¥å£ï¼‰</li>
<li>è®¿é—®èµ„æºã€‚(å®ç°ResourcePatternResolveræ¥å£ï¼Œè¿™ä¸ªåé¢è¦è®²)</li>
<li>æ”¯æŒåº”ç”¨äº‹ä»¶ã€‚(å®ç°ApplicationEventPublisheræ¥å£)</li>
</ol>
<p>æœ€å¸¸è¢«ä½¿ç”¨çš„ ApplicationContext æ¥å£å®ç°ï¼š</p>
<ul>
<li>
<p>FileSystemXmlApplicationContextï¼š
è¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ éœ€è¦æä¾›ç»™æ„é€ å™¨ XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</p>
</li>
<li>
<p>ClassPathXmlApplicationContextï¼š
è¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ ä¸éœ€è¦æä¾› XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œåªéœ€æ­£ç¡®é…
ç½® CLASSPATH ç¯å¢ƒå˜é‡å³å¯ï¼Œå› ä¸ºï¼Œå®¹å™¨ä¼šä» CLASSPATH ä¸­æœç´¢ bean é…ç½®æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>WebXmlApplicationContextï¼š
è¯¥å®¹å™¨ä¼šåœ¨ä¸€ä¸ª web åº”ç”¨ç¨‹åºçš„èŒƒå›´å†…åŠ è½½åœ¨ XML æ–‡ä»¶ä¸­å·²è¢«å®šä¹‰çš„ beanã€‚</p>
</li>
</ul>
<p>æˆ‘ä»¬å·²ç»åœ¨å‰è¾¹ä½¿ç”¨è¿‡ClassPathXmlApplicationContextäº†ã€‚</p>
<h1 id="beandefinition">BeanDefinition<a hidden class="anchor" aria-hidden="true" href="#beandefinition">#</a></h1>
<p>SpringIOCå®¹å™¨ç®¡ç†äº†æˆ‘ä»¬å®šä¹‰çš„å„ç§Beanå¯¹è±¡åŠå…¶ç›¸äº’çš„å…³ç³»ï¼ŒBeanå¯¹è±¡åœ¨Springå®ç°ä¸­æ˜¯ä»¥
BeanDefinitionæ¥æè¿°çš„ï¼Œå…¶ç»§æ‰¿ä½“ç³»å¦‚ä¸‹ï¼š
<img loading="lazy" src="6.png" alt=""  />
</p>
<p>Bean çš„è§£æè¿‡ç¨‹éå¸¸å¤æ‚ï¼ŒåŠŸèƒ½è¢«åˆ†çš„å¾ˆç»†ï¼Œå› ä¸ºè¿™é‡Œéœ€è¦è¢«æ‰©å±•çš„åœ°æ–¹å¾ˆå¤šï¼Œå¿…é¡»ä¿è¯æœ‰è¶³å¤Ÿçš„çµæ´»æ€§ï¼Œä»¥åº”å¯¹å¯èƒ½çš„å˜åŒ–ã€‚Bean çš„è§£æä¸»è¦å°±æ˜¯å¯¹ Spring é…ç½®æ–‡ä»¶çš„è§£æã€‚è¿™ä¸ªè§£æè¿‡ç¨‹ä¸»è¦é€šè¿‡ä¸‹å›¾ä¸­çš„ç±»å®Œæˆï¼š
<img loading="lazy" src="7.png" alt=""  />
</p>
<h1 id="iocå®¹å™¨çš„åˆå§‹åŒ–">IoCå®¹å™¨çš„åˆå§‹åŒ–<a hidden class="anchor" aria-hidden="true" href="#iocå®¹å™¨çš„åˆå§‹åŒ–">#</a></h1>
<p>IoCå®¹å™¨çš„åˆå§‹åŒ–åŒ…æ‹¬BeanDefinitionçš„èµ„æºå®šä½ã€è½½å…¥å’Œæ³¨å†Œè¿™ä¸‰ä¸ªåŸºæœ¬çš„è¿‡ç¨‹ã€‚
æˆ‘ä»¬ä»¥ApplicationContextä¸ºä¾‹è®²è§£ï¼ŒApplicationContextç³»åˆ—å®¹å™¨ä¹Ÿè®¸æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ï¼Œå› ä¸ºwebé¡¹
ç›®ä¸­ä½¿ç”¨çš„XmlWebApplicationContextå°±å±äºè¿™ä¸ªç»§æ‰¿ä½“ç³»ï¼Œè¿˜æœ‰ClasspathXmlApplicationContextç­‰ï¼Œå…¶ç»§æ‰¿ä½“ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img loading="lazy" src="8.png" alt=""  />
</p>
<p>ApplicationContextå…è®¸ä¸Šä¸‹æ–‡åµŒå¥—ï¼Œé€šè¿‡ä¿æŒçˆ¶ä¸Šä¸‹æ–‡å¯ä»¥ç»´æŒä¸€ä¸ªä¸Šä¸‹æ–‡ä½“ç³»ã€‚å¯¹äºbeançš„æŸ¥æ‰¾å¯ä»¥åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä½“ç³»ä¸­å‘ç”Ÿï¼Œé¦–å…ˆæ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ï¼Œå…¶æ¬¡æ˜¯çˆ¶ä¸Šä¸‹æ–‡ï¼Œé€çº§å‘ä¸Šï¼Œè¿™æ ·ä¸ºä¸åŒçš„Springåº”ç”¨æä¾›äº†ä¸€ä¸ªå…±äº«çš„beanå®šä¹‰ç¯å¢ƒã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ç®€å•åœ°æ¼”ç¤ºä¸€ä¸‹ä¸¤ç§iocå®¹å™¨çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<h2 id="xmlbeanfactoryå±Œä¸iocçš„æ•´ä¸ªæµç¨‹">XmlBeanFactory(å±Œä¸IOC)çš„æ•´ä¸ªæµç¨‹<a hidden class="anchor" aria-hidden="true" href="#xmlbeanfactoryå±Œä¸iocçš„æ•´ä¸ªæµç¨‹">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//æ ¹æ®Xmlé…ç½®æ–‡ä»¶åˆ›å»ºResourceèµ„æºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†BeanDefinitionçš„ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span> ClassPathResource resource =<span style="color:#fff;font-weight:bold">new</span> ClassPathResource(<span style="color:#0ff;font-weight:bold">&#34;application-context.xml&#34;</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºDefaultListableBeanFactory
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span> DefaultListableBeanFactory factory =<span style="color:#fff;font-weight:bold">new</span> DefaultListableBeanFactory();
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºXmlBeanDefinitionReaderè¯»å–å™¨ï¼Œç”¨äºè½½å…¥BeanDefinitionã€‚ä¹‹æ‰€ä»¥éœ€è¦BeanFactoryä½œä¸ºå‚æ•°ï¼Œæ˜¯å› ä¸ºä¼šå°†è¯»å–çš„ä¿¡æ¯å›è°ƒé…ç½®ç»™factory
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span> XmlBeanDefinitionReader reader =<span style="color:#fff;font-weight:bold">new</span> XmlBeanDefinitionReader(factory);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//XmlBeanDefinitionReaderæ‰§è¡Œè½½å…¥BeanDefinitionçš„æ–¹æ³•ï¼Œæœ€åä¼šå®ŒæˆBeançš„è½½å…¥å’Œæ³¨å†Œã€‚å®ŒæˆåBeanå°±æˆåŠŸçš„æ”¾ç½®åˆ°IOCå®¹å™¨å½“ä¸­ï¼Œä»¥åæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­å–å¾—Beanæ¥ä½¿ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span> reader.<span style="color:#007f7f">loadBeanDefinitions</span>(resource);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="filesystemxmlapplicationcontext-çš„iocå®¹å™¨æµç¨‹">FileSystemXmlApplicationContext çš„IOCå®¹å™¨æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#filesystemxmlapplicationcontext-çš„iocå®¹å™¨æµç¨‹">#</a></h2>
<p><code>ApplicationContext =new FileSystemXmlApplicationContext(xmlPath);</code></p>
<p>è°ƒç”¨æ„é€ å‡½æ•°</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> FileSystemXmlApplicationContext(String... configLocations) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>(configLocations, <span style="color:#fff;font-weight:bold">true</span>, <span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®é™…è°ƒç”¨</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> FileSystemXmlApplicationContext(String[] configLocations, <span style="color:#fff;font-weight:bold">boolean</span> refresh, ApplicationContext parent)  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> BeansException {    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">super</span>(parent);  
</span></span><span style="display:flex;"><span>    setConfigLocations(configLocations);  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (refresh) {  
</span></span><span style="display:flex;"><span>        refresh();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®¾ç½®èµ„æºåŠ è½½å™¨å’Œèµ„æºå®šä½
é€šè¿‡åˆ†æFileSystemXmlApplicationContextçš„æºä»£ç ï¼Œåœ¨åˆ›å»ºFileSystemXmlApplicationContextå®¹
å™¨æ—¶ï¼Œæ„é€ æ–¹æ³•åšä»¥ä¸‹ä¸¤é¡¹é‡è¦å·¥ä½œï¼š
é¦–å…ˆï¼Œè°ƒç”¨çˆ¶ç±»å®¹å™¨çš„æ„é€ æ–¹æ³•(super(parent)æ–¹æ³•)ä¸ºå®¹å™¨è®¾ç½®å¥½Beanèµ„æºåŠ è½½å™¨ã€‚
ç„¶åï¼Œå†è°ƒç”¨çˆ¶ç±»AbstractRefreshableConfigApplicationContextçš„
setConfigLocations(configLocations)æ–¹æ³•è®¾ç½®Beanå®šä¹‰èµ„æºæ–‡ä»¶çš„å®šä½è·¯å¾„ã€‚</p>
<p>é€šè¿‡è¿½è¸ªFileSystemXmlApplicationContextçš„ç»§æ‰¿ä½“ç³»ï¼Œå‘ç°å…¶çˆ¶ç±»çš„çˆ¶ç±»
AbstractApplicationContextä¸­åˆå§‹åŒ–IoCå®¹å™¨æ‰€åšçš„ä¸»è¦æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> AbstractApplicationContext <span style="color:#fff;font-weight:bold">extends</span> DefaultResourceLoader  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">implements</span> ConfigurableApplicationContext, DisposableBean {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//é™æ€åˆå§‹åŒ–å—ï¼Œåœ¨æ•´ä¸ªå®¹å™¨åˆ›å»ºè¿‡ç¨‹ä¸­åªæ‰§è¡Œä¸€æ¬¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">static</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºäº†é¿å…åº”ç”¨ç¨‹åºåœ¨Weblogic8.1å…³é—­æ—¶å‡ºç°ç±»åŠ è½½å¼‚å¸¸åŠ è½½é—®é¢˜ï¼ŒåŠ è½½IoCå®¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//å™¨å…³é—­äº‹ä»¶(ContextClosedEvent)ç±»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ContextClosedEvent.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">getName</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//FileSystemXmlApplicationContextè°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•è°ƒç”¨çš„å°±æ˜¯è¯¥æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> AbstractApplicationContext(ApplicationContext parent) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parent</span> = parent;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">resourcePatternResolver</span> = getResourcePatternResolver();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–ä¸€ä¸ªSpring Sourceçš„åŠ è½½å™¨ç”¨äºè¯»å…¥Spring Beanå®šä¹‰èµ„æºæ–‡ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> ResourcePatternResolver getResourcePatternResolver() {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// AbstractApplicationContextç»§æ‰¿DefaultResourceLoaderï¼Œä¹Ÿæ˜¯ä¸€ä¸ªS  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//Springèµ„æºåŠ è½½å™¨ï¼Œå…¶getResource(String location)æ–¹æ³•ç”¨äºè½½å…¥èµ„æº  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> PathMatchingResourcePatternResolver(<span style="color:#fff;font-weight:bold">this</span>);  
</span></span><span style="display:flex;"><span>    }   
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>AbstractApplicationContextæ„é€ æ–¹æ³•ä¸­è°ƒç”¨
PathMatchingResourcePatternResolverçš„æ„é€ æ–¹æ³•åˆ›å»ºSpringèµ„æºåŠ è½½å™¨ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> PathMatchingResourcePatternResolver(ResourceLoader resourceLoader) {  
</span></span><span style="display:flex;"><span>    Assert.<span style="color:#007f7f">notNull</span>(resourceLoader, <span style="color:#0ff;font-weight:bold">&#34;ResourceLoader must not be null&#34;</span>);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®¾ç½®Springçš„èµ„æºåŠ è½½å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">resourceLoader</span> = resourceLoader;  
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è®¾ç½®å®¹å™¨çš„èµ„æºåŠ è½½å™¨ä¹‹åï¼Œæ¥ä¸‹æ¥FileSystemXmlApplicationContetæ‰§è¡ŒsetConfigLocationsæ–¹æ³•é€šè¿‡è°ƒç”¨å…¶çˆ¶ç±»AbstractRefreshableConfigApplicationContextçš„æ–¹æ³•è¿›è¡Œå¯¹Beanå®šä¹‰èµ„æºæ–‡ä»¶çš„å®šä½ï¼Œè¯¥æ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å¤„ç†å•ä¸ªèµ„æºæ–‡ä»¶è·¯å¾„ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æƒ…å†µ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setConfigLocation(String location) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//String CONFIG_LOCATION_DELIMITERS = &#34;,; /t/n&#34;;  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å³å¤šä¸ªèµ„æºæ–‡ä»¶è·¯å¾„ä¹‹é—´ç”¨â€ ,; /t/nâ€åˆ†éš”ï¼Œè§£ææˆæ•°ç»„å½¢å¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    setConfigLocations(StringUtils.<span style="color:#007f7f">tokenizeToStringArray</span>(location, CONFIG_LOCATION_DELIMITERS));  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æBeanå®šä¹‰èµ„æºæ–‡ä»¶çš„è·¯å¾„ï¼Œå¤„ç†å¤šä¸ªèµ„æºæ–‡ä»¶å­—ç¬¦ä¸²æ•°ç»„  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setConfigLocations(String[] locations) {  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (locations != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        Assert.<span style="color:#007f7f">noNullElements</span>(locations, <span style="color:#0ff;font-weight:bold">&#34;Config locations must not be null&#34;</span>);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">configLocations</span> = <span style="color:#fff;font-weight:bold">new</span> String[locations.<span style="color:#007f7f">length</span>];  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; locations.<span style="color:#007f7f">length</span>; i++) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// resolvePathä¸ºåŒä¸€ä¸ªç±»ä¸­å°†å­—ç¬¦ä¸²è§£æä¸ºè·¯å¾„çš„æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">configLocations</span>[i] = resolvePath(locations[i]).<span style="color:#007f7f">trim</span>();  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">configLocations</span> = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•çš„æºç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥é…ç½®å¤šä¸ªSpring Beanå®šä¹‰èµ„æºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ï¼Œå³ä¸‹é¢ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼š
<code>ClasspathResource res = new ClasspathResource(â€œa.xml,b.xml,â€¦â€¦â€);</code>
å¤šä¸ªèµ„æºæ–‡ä»¶è·¯å¾„ä¹‹é—´å¯ä»¥æ˜¯ç”¨â€ ,; /t/nâ€ç­‰åˆ†éš”ã€‚</p>
<p>ClasspathResource res = new ClasspathResource(newString[]{â€œa.xmlâ€,â€b.xmlâ€,â€¦â€¦});
è‡³æ­¤ï¼ŒSpring IoCå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å°†é…ç½®çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶å®šä½ä¸ºSpringå°è£…çš„Resourceã€‚</p>
<h2 id="abstractapplicationcontextçš„refreshå‡½æ•°è½½å…¥beanå®šä¹‰è¿‡ç¨‹">AbstractApplicationContextçš„refreshå‡½æ•°è½½å…¥Beanå®šä¹‰è¿‡ç¨‹<a hidden class="anchor" aria-hidden="true" href="#abstractapplicationcontextçš„refreshå‡½æ•°è½½å…¥beanå®šä¹‰è¿‡ç¨‹">#</a></h2>
<p>Spring IoCå®¹å™¨å¯¹Beanå®šä¹‰èµ„æºçš„è½½å…¥æ˜¯ä»refresh()å‡½æ•°å¼€å§‹çš„ï¼Œrefresh()æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œrefresh()æ–¹æ³•çš„ä½œç”¨æ˜¯ï¼šåœ¨åˆ›å»ºIoCå®¹å™¨å‰ï¼Œå¦‚æœå·²ç»æœ‰å®¹å™¨å­˜åœ¨ï¼Œåˆ™éœ€è¦æŠŠå·²æœ‰çš„å®¹å™¨é”€æ¯å’Œå…³é—­ï¼Œä»¥ä¿è¯åœ¨refreshä¹‹åä½¿ç”¨çš„æ˜¯æ–°å»ºç«‹èµ·æ¥çš„IoCå®¹å™¨ã€‚refreshçš„ä½œç”¨ç±»ä¼¼äºå¯¹IoCå®¹å™¨çš„é‡å¯ï¼Œåœ¨æ–°å»ºç«‹å¥½çš„å®¹å™¨ä¸­å¯¹å®¹å™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œå¯¹Beanå®šä¹‰èµ„æºè¿›è¡Œè½½å…¥ã€‚</p>
<p>FileSystemXmlApplicationContexté€šè¿‡è°ƒç”¨å…¶çˆ¶ç±»AbstractApplicationContextçš„refresh()å‡½æ•°å¯åŠ¨
æ•´ä¸ªIoCå®¹å™¨å¯¹Beanå®šä¹‰çš„è½½å…¥è¿‡ç¨‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> refresh() <span style="color:#fff;font-weight:bold">throws</span> BeansException, IllegalStateException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">startupShutdownMonitor</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è°ƒç”¨å®¹å™¨å‡†å¤‡åˆ·æ–°çš„æ–¹æ³•ï¼Œè·å–å®¹å™¨çš„å½“æ—¶æ—¶é—´ï¼ŒåŒæ—¶ç»™å®¹å™¨è®¾ç½®åŒæ­¥æ ‡è¯†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        prepareRefresh();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å‘Šè¯‰å­ç±»å¯åŠ¨refreshBeanFactory()æ–¹æ³•ï¼ŒBeanå®šä¹‰èµ„æºæ–‡ä»¶çš„è½½å…¥ä»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//å­ç±»çš„refreshBeanFactory()æ–¹æ³•å¯åŠ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanFactoryé…ç½®å®¹å™¨ç‰¹æ€§ï¼Œä¾‹å¦‚ç±»åŠ è½½å™¨ã€äº‹ä»¶å¤„ç†å™¨ç­‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        prepareBeanFactory(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä¸ºå®¹å™¨çš„æŸäº›å­ç±»æŒ‡å®šç‰¹æ®Šçš„BeanPostäº‹ä»¶å¤„ç†å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            postProcessBeanFactory(beanFactory);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è°ƒç”¨æ‰€æœ‰æ³¨å†Œçš„BeanFactoryPostProcessorçš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            invokeBeanFactoryPostProcessors(beanFactory);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä¸ºBeanFactoryæ³¨å†ŒBeanPostäº‹ä»¶å¤„ç†å™¨.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//BeanPostProcessoræ˜¯Beanåç½®å¤„ç†å™¨ï¼Œç”¨äºç›‘å¬å®¹å™¨è§¦å‘çš„äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            registerBeanPostProcessors(beanFactory);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆå§‹åŒ–ä¿¡æ¯æºï¼Œå’Œå›½é™…åŒ–ç›¸å…³.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            initMessageSource();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆå§‹åŒ–å®¹å™¨äº‹ä»¶ä¼ æ’­å™¨.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            initApplicationEventMulticaster();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è°ƒç”¨å­ç±»çš„æŸäº›ç‰¹æ®ŠBeanåˆå§‹åŒ–æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            onRefresh();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä¸ºäº‹ä»¶ä¼ æ’­å™¨æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            registerListeners();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆå§‹åŒ–æ‰€æœ‰å‰©ä½™çš„å•æ€Bean.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            finishBeanFactoryInitialization(beanFactory);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆå§‹åŒ–å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¤„ç†å™¨ï¼Œå¹¶å‘å¸ƒå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            finishRefresh();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//é”€æ¯ä»¥åˆ›å»ºçš„å•æ€Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            destroyBeans();
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å–æ¶ˆrefreshæ“ä½œï¼Œé‡ç½®å®¹å™¨çš„åŒæ­¥æ ‡è¯†.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            cancelRefresh(ex);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> ex;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>refresh()æ–¹æ³•ä¸»è¦ä¸ºIoCå®¹å™¨Beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æä¾›æ¡ä»¶ï¼Œ
Spring IoCå®¹å™¨è½½å…¥Beanå®šä¹‰èµ„æºæ–‡ä»¶ä»å…¶å­ç±»å®¹å™¨çš„refreshBeanFactory()æ–¹æ³•å¯åŠ¨ï¼Œ
æ‰€ä»¥æ•´ä¸ªrefresh()ä¸­
<code>ConfigurableListableBeanFactory beanFactory =obtainFreshBeanFactory();</code>
è¿™å¥ä»¥åä»£ç çš„éƒ½æ˜¯æ³¨å†Œå®¹å™¨çš„ä¿¡æ¯æºå’Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè½½å…¥è¿‡ç¨‹å°±æ˜¯ä»è¿™å¥ä»£ç å¯åŠ¨ã€‚</p>
<p>AbstractApplicationContextçš„obtainFreshBeanFactory()æ–¹æ³•è°ƒç”¨å­ç±»å®¹å™¨çš„refreshBeanFactory()
æ–¹æ³•ï¼Œå¯åŠ¨å®¹å™¨è½½å…¥Beanå®šä¹‰èµ„æºæ–‡ä»¶çš„è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> ConfigurableListableBeanFactory obtainFreshBeanFactory() {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œä½¿ç”¨äº†å§”æ´¾è®¾è®¡æ¨¡å¼ï¼Œçˆ¶ç±»å®šä¹‰äº†æŠ½è±¡çš„refreshBeanFactory()æ–¹æ³•ï¼Œå…·ä½“å®ç°è°ƒç”¨å­ç±»å®¹å™¨çš„refreshBeanFactory()æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    refreshBeanFactory();  
</span></span><span style="display:flex;"><span>    ConfigurableListableBeanFactory beanFactory = getBeanFactory();  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Bean factory for &#34;</span> + getDisplayName() + <span style="color:#0ff;font-weight:bold">&#34;: &#34;</span> + beanFactory);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> beanFactory;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>AbstractApplicationContextç±»ä¸­åªæŠ½è±¡å®šä¹‰äº†refreshBeanFactory()æ–¹æ³•ï¼Œå®¹å™¨çœŸæ­£è°ƒç”¨çš„æ˜¯å…¶å­ç±»
AbstractRefreshableApplicationContextå®ç°çš„ refreshBeanFactory()æ–¹æ³•ï¼Œæ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">void</span> refreshBeanFactory() <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (hasBeanFactory()) {<span style="color:#007f7f">//å¦‚æœå·²ç»æœ‰å®¹å™¨ï¼Œé”€æ¯å®¹å™¨ä¸­çš„beanï¼Œå…³é—­å®¹å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        destroyBeans();
</span></span><span style="display:flex;"><span>        closeBeanFactory();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºIoCå®¹å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        DefaultListableBeanFactory beanFactory = createBeanFactory();
</span></span><span style="display:flex;"><span>        beanFactory.<span style="color:#007f7f">setSerializationId</span>(getId());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹IoCå®¹å™¨è¿›è¡Œå®šåˆ¶åŒ–ï¼Œå¦‚è®¾ç½®å¯åŠ¨å‚æ•°ï¼Œå¼€å¯æ³¨è§£çš„è‡ªåŠ¨è£…é…ç­‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        customizeBeanFactory(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è°ƒç”¨è½½å…¥Beanå®šä¹‰çš„æ–¹æ³•ï¼Œä¸»è¦è¿™é‡Œåˆä½¿ç”¨äº†ä¸€ä¸ªå§”æ´¾æ¨¡å¼ï¼Œåœ¨å½“å‰ç±»ä¸­åªå®šä¹‰äº†æŠ½è±¡çš„loadBeanDefinitionsæ–¹æ³•ï¼Œå…·ä½“çš„å®ç°è°ƒç”¨å­ç±»å®¹å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        loadBeanDefinitions(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactoryMonitor</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span> = beanFactory;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (IOException ex) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> ApplicationContextException(<span style="color:#0ff;font-weight:bold">&#34;I/O error parsing bean definition source for &#34;</span> + getDisplayName(), ex);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå…ˆåˆ¤æ–­BeanFactoryæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™å…ˆé”€æ¯beanså¹¶å…³é—­beanFactoryï¼Œ
æ¥ç€åˆ›å»ºDefaultListableBeanFactoryï¼Œå¹¶è°ƒç”¨loadBeanDefinitions(beanFactory)è£…è½½beanDefinitionã€‚</p>
<h2 id="abstractrefreshableapplicationcontextå­ç±»çš„loadbeandefinitionsæ–¹æ³•">AbstractRefreshableApplicationContextå­ç±»çš„loadBeanDefinitionsæ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#abstractrefreshableapplicationcontextå­ç±»çš„loadbeandefinitionsæ–¹æ³•">#</a></h2>
<p>AbstractRefreshableApplicationContextä¸­åªå®šä¹‰äº†æŠ½è±¡çš„loadBeanDefinitionsæ–¹æ³•ï¼Œå®¹å™¨çœŸæ­£è°ƒç”¨çš„æ˜¯å…¶å­ç±»AbstractXmlApplicationContextå¯¹è¯¥æ–¹æ³•çš„å®ç°ï¼ŒAbstractXmlApplicationContextçš„ä¸»è¦æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> AbstractXmlApplicationContext <span style="color:#fff;font-weight:bold">extends</span> AbstractRefreshableConfigApplicationContext {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å®ç°çˆ¶ç±»æŠ½è±¡çš„è½½å…¥Beanå®šä¹‰æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(DefaultListableBeanFactory beanFactory) <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºXmlBeanDefinitionReaderï¼Œå³åˆ›å»ºBeanè¯»å–å™¨ï¼Œå¹¶é€šè¿‡å›è°ƒè®¾ç½®åˆ°å®¹å™¨ä¸­å»ï¼Œå®¹  å™¨ä½¿ç”¨è¯¥è¯»å–å™¨è¯»å–Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        XmlBeanDefinitionReader beanDefinitionReader = <span style="color:#fff;font-weight:bold">new</span> XmlBeanDefinitionReader(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®Springèµ„æºåŠ è½½å™¨ï¼ŒAbstractXmlApplicationContextçš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ç¥–å…ˆçˆ¶ç±»AbstractApplicationContextç»§æ‰¿DefaultResourceLoaderï¼Œå› æ­¤ï¼Œå®¹å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªèµ„æºåŠ è½½å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setResourceLoader</span>(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®SAX xmlè§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setEntityResolver</span>(<span style="color:#fff;font-weight:bold">new</span> ResourceEntityResolver(<span style="color:#fff;font-weight:bold">this</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å½“Beanè¯»å–å™¨è¯»å–Beanå®šä¹‰çš„Xmlèµ„æºæ–‡ä»¶æ—¶ï¼Œå¯ç”¨Xmlçš„æ ¡éªŒæœºåˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        initBeanDefinitionReader(beanDefinitionReader);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//Beanè¯»å–å™¨çœŸæ­£å®ç°åŠ è½½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        loadBeanDefinitions(beanDefinitionReader);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Xml Beanè¯»å–å™¨åŠ è½½Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(XmlBeanDefinitionReader reader) <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–Beanå®šä¹‰èµ„æºçš„å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Resource[] configResources = getConfigResources();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configResources != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configResources);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå­ç±»ä¸­è·å–çš„Beanå®šä¹‰èµ„æºå®šä½ä¸ºç©ºï¼Œåˆ™è·å–FileSystemXmlApplicationContextæ„é€ æ–¹æ³•ä¸­setConfigLocationsæ–¹æ³•è®¾ç½®çš„èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String[] configLocations = getConfigLocations();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configLocations != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configLocations);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œåˆä½¿ç”¨äº†ä¸€ä¸ªå§”æ‰˜æ¨¡å¼ï¼Œè°ƒç”¨å­ç±»çš„è·å–Beanå®šä¹‰èµ„æºå®šä½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//è¯¥æ–¹æ³•åœ¨ClassPathXmlApplicationContextä¸­è¿›è¡Œå®ç°ï¼Œå¯¹äºæˆ‘ä»¬
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//ä¸¾ä¾‹åˆ†ææºç çš„FileSystemXmlApplicationContextæ²¡æœ‰ä½¿ç”¨è¯¥æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> Resource[] getConfigResources() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>XmlBeanDefinitionReader è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderçš„ reader.loadBeanDefinitions
æ–¹æ³•è¯»å–Beanå®šä¹‰èµ„æºã€‚</p>
<p>ç”±äºæˆ‘ä»¬ä½¿ç”¨FileSystemXmlApplicationContextä½œä¸ºä¾‹å­åˆ†æï¼Œå› æ­¤getConfigResourcesçš„è¿”å›å€¼ä¸ºnullï¼Œå› æ­¤ç¨‹åºæ‰§è¡Œreader.loadBeanDefinitions(configLocations)åˆ†æ”¯ã€‚</p>
<h2 id="abstractbeandefinitionreaderè¯»å–beanå®šä¹‰èµ„æº">AbstractBeanDefinitionReaderè¯»å–Beanå®šä¹‰èµ„æº<a hidden class="anchor" aria-hidden="true" href="#abstractbeandefinitionreaderè¯»å–beanå®šä¹‰èµ„æº">#</a></h2>
<p>AbstractBeanDefinitionReaderçš„loadBeanDefinitionsæ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> AbstractXmlApplicationContext
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">extends</span> AbstractRefreshableConfigApplicationContext {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å®ç°çˆ¶ç±»æŠ½è±¡çš„è½½å…¥Beanå®šä¹‰æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(DefaultListableBeanFactory beanFactory)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºXmlBeanDefinitionReaderï¼Œå³åˆ›å»ºBeanè¯»å–å™¨ï¼Œå¹¶é€šè¿‡å›è°ƒè®¾ç½®åˆ°å®¹å™¨ä¸­å»ï¼Œå®¹  å™¨ä½¿ç”¨è¯¥è¯»å–å™¨è¯»å–Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        XmlBeanDefinitionReader beanDefinitionReader = <span style="color:#fff;font-weight:bold">new</span> XmlBeanDefinitionReader(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®Springèµ„æºåŠ è½½å™¨ï¼ŒAbstractXmlApplicationContextçš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ç¥–å…ˆçˆ¶ç±»AbstractApplicationContextç»§æ‰¿DefaultResourceLoaderï¼Œå› æ­¤ï¼Œå®¹å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªèµ„æºåŠ è½½å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setResourceLoader</span>(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®SAX xmlè§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setEntityResolver</span>(<span style="color:#fff;font-weight:bold">new</span> ResourceEntityResolver(<span style="color:#fff;font-weight:bold">this</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å½“Beanè¯»å–å™¨è¯»å–Beanå®šä¹‰çš„Xmlèµ„æºæ–‡ä»¶æ—¶ï¼Œå¯ç”¨Xmlçš„æ ¡éªŒæœºåˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        initBeanDefinitionReader(beanDefinitionReader);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//Beanè¯»å–å™¨çœŸæ­£å®ç°åŠ è½½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        loadBeanDefinitions(beanDefinitionReader);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Xml Beanè¯»å–å™¨åŠ è½½Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(XmlBeanDefinitionReader reader)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–Beanå®šä¹‰èµ„æºçš„å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Resource[] configResources = getConfigResources();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configResources != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configResources);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå­ç±»ä¸­è·å–çš„Beanå®šä¹‰èµ„æºå®šä½ä¸ºç©ºï¼Œåˆ™è·å–FileSystemXmlApplicationContextæ„é€ æ–¹æ³•ä¸­setConfigLocationsæ–¹æ³•è®¾ç½®çš„èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String[] configLocations = getConfigLocations();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configLocations != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configLocations);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œåˆä½¿ç”¨äº†ä¸€ä¸ªå§”æ‰˜æ¨¡å¼ï¼Œè°ƒç”¨å­ç±»çš„è·å–Beanå®šä¹‰èµ„æºå®šä½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//è¯¥æ–¹æ³•åœ¨ClassPathXmlApplicationContextä¸­è¿›è¡Œå®ç°ï¼Œå¯¹äºæˆ‘ä»¬
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//ä¸¾ä¾‹åˆ†ææºç çš„FileSystemXmlApplicationContextæ²¡æœ‰ä½¿ç”¨è¯¥æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> Resource[] getConfigResources() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>loadBeanDefinitions(Resource&hellip;resources)æ–¹æ³•å’Œä¸Šé¢åˆ†æçš„3ä¸ªæ–¹æ³•ç±»ä¼¼ï¼Œ
åŒæ ·ä¹Ÿæ˜¯è°ƒç”¨XmlBeanDefinitionReaderçš„loadBeanDefinitionsæ–¹æ³•ã€‚
ä»å¯¹AbstractBeanDefinitionReaderçš„loadBeanDefinitionsæ–¹æ³•æºç åˆ†æå¯ä»¥çœ‹å‡ºè¯¥æ–¹æ³•åšäº†ä»¥ä¸‹ä¸¤ä»¶äº‹ï¼šé¦–å…ˆï¼Œè°ƒç”¨èµ„æºåŠ è½½å™¨çš„è·å–èµ„æºæ–¹æ³•resourceLoader.getResource(location)ï¼Œè·å–åˆ°è¦åŠ è½½çš„èµ„æºã€‚å…¶æ¬¡ï¼ŒçœŸæ­£æ‰§è¡ŒåŠ è½½åŠŸèƒ½æ˜¯å…¶å­ç±»XmlBeanDefinitionReaderçš„loadBeanDefinitionsæ–¹æ³•ã€‚</p>
<p>çœ‹åˆ°ç¬¬8ã€16è¡Œï¼Œç»“åˆä¸Šé¢çš„ResourceLoaderä¸ApplicationContextçš„ç»§æ‰¿å…³ç³»å›¾ï¼Œå¯ä»¥çŸ¥é“æ­¤æ—¶è°ƒç”¨çš„æ˜¯DefaultResourceLoaderä¸­çš„getSource()æ–¹æ³•å®šä½Resourceï¼Œå› ä¸º
FileSystemXmlApplicationContextæœ¬èº«å°±æ˜¯DefaultResourceLoaderçš„å®ç°ç±»ï¼Œæ‰€ä»¥æ­¤æ—¶åˆå›åˆ°äº†
FileSystemXmlApplicationContextä¸­æ¥ã€‚</p>
<h2 id="èµ„æºåŠ è½½å™¨è·å–è¦è¯»å…¥çš„èµ„æº">èµ„æºåŠ è½½å™¨è·å–è¦è¯»å…¥çš„èµ„æº<a hidden class="anchor" aria-hidden="true" href="#èµ„æºåŠ è½½å™¨è·å–è¦è¯»å…¥çš„èµ„æº">#</a></h2>
<p>XmlBeanDefinitionReaderé€šè¿‡è°ƒç”¨å…¶çˆ¶ç±»DefaultResourceLoaderçš„getResourceæ–¹æ³•è·å–è¦åŠ è½½çš„
èµ„æºï¼Œå…¶æºç å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è·å–Resourceçš„å…·ä½“å®ç°æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Resource getResource(String location) {
</span></span><span style="display:flex;"><span>    Assert.<span style="color:#007f7f">notNull</span>(location, <span style="color:#0ff;font-weight:bold">&#34;Location must not be null&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœæ˜¯ç±»è·¯å¾„çš„æ–¹å¼ï¼Œé‚£éœ€è¦ä½¿ç”¨ClassPathResource æ¥å¾—åˆ°bean æ–‡ä»¶çš„èµ„æºå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (location.<span style="color:#007f7f">startsWith</span>(CLASSPATH_URL_PREFIX)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> ClassPathResource(location.<span style="color:#007f7f">substring</span>(CLASSPATH_URL_PREFIX.<span style="color:#007f7f">length</span>()), getClassLoader());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¦‚æœæ˜¯URL æ–¹å¼ï¼Œä½¿ç”¨UrlResource ä½œä¸ºbean æ–‡ä»¶çš„èµ„æºå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        URL url = <span style="color:#fff;font-weight:bold">new</span> URL(location);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> UrlResource(url);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (MalformedURLException ex) {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœæ—¢ä¸æ˜¯classpathæ ‡è¯†ï¼Œåˆä¸æ˜¯URLæ ‡è¯†çš„Resourceå®šä½ï¼Œåˆ™è°ƒç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å®¹å™¨æœ¬èº«çš„getResourceByPathæ–¹æ³•è·å–Resource
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> getResourceByPath(location);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>FileSystemXmlApplicationContextå®¹å™¨æä¾›äº†getResourceByPathæ–¹æ³•çš„å®ç°ï¼Œå°±æ˜¯ä¸ºäº†å¤„ç†æ—¢ä¸æ˜¯classpathæ ‡è¯†ï¼Œåˆä¸æ˜¯URLæ ‡è¯†çš„Resourceå®šä½è¿™ç§æƒ…å†µã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> Resource getResourceByPath(String path) {    
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (path != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; path.<span style="color:#007f7f">startsWith</span>(<span style="color:#0ff;font-weight:bold">&#34;/&#34;</span>)) {    
</span></span><span style="display:flex;"><span>        path = path.<span style="color:#007f7f">substring</span>(<span style="color:#ff0;font-weight:bold">1</span>);    
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿèµ„æºå¯¹è±¡æ¥å®šä¹‰bean æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> FileSystemResource(path);  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ä»£ç å°±å›åˆ°äº† FileSystemXmlApplicationContext ä¸­æ¥ï¼Œä»–æä¾›äº†FileSystemResource æ¥å®Œæˆä»æ–‡ä»¶ç³»ç»Ÿå¾—åˆ°é…ç½®æ–‡ä»¶çš„èµ„æºå®šä¹‰ã€‚
è¿™æ ·ï¼Œå°±å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ä¸Šå¯¹IOC é…ç½®æ–‡ä»¶è¿›è¡ŒåŠ è½½ - å½“ç„¶æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¿™ä¸ªé€»è¾‘ä»ä»»ä½•åœ°æ–¹åŠ è½½ï¼Œåœ¨Spring ä¸­æˆ‘ä»¬çœ‹åˆ°å®ƒæä¾› çš„å„ç§èµ„æºæŠ½è±¡ï¼Œæ¯”å¦‚ClassPathResourceï¼ŒURLResourceï¼ŒFileSystemResource ç­‰æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å®šä½Resource çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œè€Œè¿™åªæ˜¯åŠ è½½è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 id="xmlbeandefinitionreaderåŠ è½½beanå®šä¹‰èµ„æº">XmlBeanDefinitionReaderåŠ è½½Beanå®šä¹‰èµ„æº<a hidden class="anchor" aria-hidden="true" href="#xmlbeandefinitionreaderåŠ è½½beanå®šä¹‰èµ„æº">#</a></h2>
<p>Beanå®šä¹‰çš„Resourceå¾—åˆ°äº†ã€‚
ç»§ç»­å›åˆ°XmlBeanDefinitionReaderçš„loadBeanDefinitions(Resource â€¦)æ–¹æ³•çœ‹åˆ°ä»£è¡¨beanæ–‡ä»¶çš„èµ„æºå®šä¹‰ä»¥åçš„è½½å…¥è¿‡ç¨‹ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">abstract</span> <span style="color:#fff;font-weight:bold">class</span> AbstractXmlApplicationContext <span style="color:#fff;font-weight:bold">extends</span> AbstractRefreshableConfigApplicationContext {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å®ç°çˆ¶ç±»æŠ½è±¡çš„è½½å…¥Beanå®šä¹‰æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(DefaultListableBeanFactory beanFactory) <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºXmlBeanDefinitionReaderï¼Œå³åˆ›å»ºBeanè¯»å–å™¨ï¼Œå¹¶é€šè¿‡å›è°ƒè®¾ç½®åˆ°å®¹å™¨ä¸­å»ï¼Œå®¹  å™¨ä½¿ç”¨è¯¥è¯»å–å™¨è¯»å–Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        XmlBeanDefinitionReader beanDefinitionReader = <span style="color:#fff;font-weight:bold">new</span> XmlBeanDefinitionReader(beanFactory);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®Springèµ„æºåŠ è½½å™¨ï¼ŒAbstractXmlApplicationContextçš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ç¥–å…ˆçˆ¶ç±»AbstractApplicationContextç»§æ‰¿DefaultResourceLoaderï¼Œå› æ­¤ï¼Œå®¹å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªèµ„æºåŠ è½½å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setResourceLoader</span>(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºBeanè¯»å–å™¨è®¾ç½®SAX xmlè§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        beanDefinitionReader.<span style="color:#007f7f">setEntityResolver</span>(<span style="color:#fff;font-weight:bold">new</span> ResourceEntityResolver(<span style="color:#fff;font-weight:bold">this</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å½“Beanè¯»å–å™¨è¯»å–Beanå®šä¹‰çš„Xmlèµ„æºæ–‡ä»¶æ—¶ï¼Œå¯ç”¨Xmlçš„æ ¡éªŒæœºåˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        initBeanDefinitionReader(beanDefinitionReader);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//Beanè¯»å–å™¨çœŸæ­£å®ç°åŠ è½½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        loadBeanDefinitions(beanDefinitionReader);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Xml Beanè¯»å–å™¨åŠ è½½Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> loadBeanDefinitions(XmlBeanDefinitionReader reader) <span style="color:#fff;font-weight:bold">throws</span> BeansException, IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–Beanå®šä¹‰èµ„æºçš„å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Resource[] configResources = getConfigResources();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configResources != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configResources);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå­ç±»ä¸­è·å–çš„Beanå®šä¹‰èµ„æºå®šä½ä¸ºç©ºï¼Œåˆ™è·å–FileSystemXmlApplicationContextæ„é€ æ–¹æ³•ä¸­setConfigLocationsæ–¹æ³•è®¾ç½®çš„èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String[] configLocations = getConfigLocations();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (configLocations != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Xml Beanè¯»å–å™¨è°ƒç”¨å…¶çˆ¶ç±»AbstractBeanDefinitionReaderè¯»å–å®šä½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            reader.<span style="color:#007f7f">loadBeanDefinitions</span>(configLocations);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œåˆä½¿ç”¨äº†ä¸€ä¸ªå§”æ‰˜æ¨¡å¼ï¼Œè°ƒç”¨å­ç±»çš„è·å–Beanå®šä¹‰èµ„æºå®šä½çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//è¯¥æ–¹æ³•åœ¨ClassPathXmlApplicationContextä¸­è¿›è¡Œå®ç°ï¼Œå¯¹äºæˆ‘ä»¬
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//ä¸¾ä¾‹åˆ†ææºç çš„FileSystemXmlApplicationContextæ²¡æœ‰ä½¿ç”¨è¯¥æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">protected</span> Resource[] getConfigResources() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æºç åˆ†æï¼Œè½½å…¥Beanå®šä¹‰èµ„æºæ–‡ä»¶çš„æœ€åä¸€æ­¥æ˜¯å°†Beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºDocumentå¯¹è±¡ï¼Œè¯¥è¿‡ç¨‹ç”±documentLoaderå®ç°ã€‚</p>
<h2 id="documentloaderå°†beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºdocumentå¯¹è±¡">DocumentLoaderå°†Beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºDocumentå¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#documentloaderå°†beanå®šä¹‰èµ„æºè½¬æ¢ä¸ºdocumentå¯¹è±¡">#</a></h2>
<p>DocumentLoaderå°†Beanå®šä¹‰èµ„æºè½¬æ¢æˆDocumentå¯¹è±¡çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨æ ‡å‡†çš„JAXPå°†è½½å…¥çš„Beanå®šä¹‰èµ„æºè½¬æ¢æˆdocumentå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Document loadDocument(InputSource inputSource, EntityResolver entityResolver,
</span></span><span style="display:flex;"><span>                             ErrorHandler errorHandler, <span style="color:#fff;font-weight:bold">int</span> validationMode, <span style="color:#fff;font-weight:bold">boolean</span> namespaceAware) <span style="color:#fff;font-weight:bold">throws</span> Exception {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºæ–‡ä»¶è§£æå™¨å·¥å‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    DocumentBuilderFactory factory = createDocumentBuilderFactory(validationMode, namespaceAware);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Using JAXP provider [&#34;</span> + factory.<span style="color:#007f7f">getClass</span>().<span style="color:#007f7f">getName</span>() + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºæ–‡æ¡£è§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    DocumentBuilder builder = createDocumentBuilder(factory, entityResolver, errorHandler);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æSpringçš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> builder.<span style="color:#007f7f">parse</span>(inputSource);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> DocumentBuilderFactory createDocumentBuilderFactory(<span style="color:#fff;font-weight:bold">int</span> validationMode, <span style="color:#fff;font-weight:bold">boolean</span> namespaceAware)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> ParserConfigurationException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºæ–‡æ¡£è§£æå·¥å‚
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    DocumentBuilderFactory factory = DocumentBuilderFactory.<span style="color:#007f7f">newInstance</span>();
</span></span><span style="display:flex;"><span>    factory.<span style="color:#007f7f">setNamespaceAware</span>(namespaceAware);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®¾ç½®è§£æXMLçš„æ ¡éªŒ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (validationMode != XmlValidationModeDetector.<span style="color:#007f7f">VALIDATION_NONE</span>) {
</span></span><span style="display:flex;"><span>        factory.<span style="color:#007f7f">setValidating</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (validationMode == XmlValidationModeDetector.<span style="color:#007f7f">VALIDATION_XSD</span>) {
</span></span><span style="display:flex;"><span>            factory.<span style="color:#007f7f">setNamespaceAware</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                factory.<span style="color:#007f7f">setAttribute</span>(SCHEMA_LANGUAGE_ATTRIBUTE, XSD_SCHEMA_LANGUAGE);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">catch</span> (IllegalArgumentException ex) {
</span></span><span style="display:flex;"><span>                ParserConfigurationException pcex = <span style="color:#fff;font-weight:bold">new</span> ParserConfigurationException(
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;Unable to validate using XSD: Your JAXP provider [&#34;</span> + factory +
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;] does not support XML Schema. Are you running on Java 1.4 with Apache Crimson? &#34;</span> +
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;Upgrade to Apache Xerces (or Java 1.5) for full XSD support.&#34;</span>);
</span></span><span style="display:flex;"><span>                pcex.<span style="color:#007f7f">initCause</span>(ex);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> pcex;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> factory;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥è§£æè¿‡ç¨‹è°ƒç”¨JavaEEæ ‡å‡†çš„JAXPæ ‡å‡†è¿›è¡Œå¤„ç†ã€‚
è‡³æ­¤Spring IoCå®¹å™¨æ ¹æ®å®šä½çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶ï¼Œå°†å…¶åŠ è½½è¯»å…¥å¹¶è½¬æ¢æˆä¸ºDocumentå¯¹è±¡è¿‡ç¨‹å®Œæˆã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦ç»§ç»­åˆ†æSpring IoCå®¹å™¨å°†è½½å…¥çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶è½¬æ¢ä¸ºDocumentå¯¹è±¡ä¹‹åï¼Œæ˜¯å¦‚ä½•å°†å…¶è§£æä¸ºSpring IoCç®¡ç†çš„Beanå¯¹è±¡å¹¶å°†å…¶æ³¨å†Œåˆ°å®¹å™¨ä¸­çš„ã€‚</p>
<h2 id="xmlbeandefinitionreaderè§£æè½½å…¥çš„beanå®šä¹‰èµ„æºæ–‡ä»¶">XmlBeanDefinitionReaderè§£æè½½å…¥çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#xmlbeandefinitionreaderè§£æè½½å…¥çš„beanå®šä¹‰èµ„æºæ–‡ä»¶">#</a></h2>
<p>XmlBeanDefinitionReaderç±»ä¸­çš„doLoadBeanDefinitionsæ–¹æ³•æ˜¯ä»ç‰¹å®šXMLæ–‡ä»¶ä¸­å®é™…è½½å…¥Beanå®šä¹‰èµ„æºçš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨è½½å…¥Beanå®šä¹‰èµ„æºä¹‹åå°†å…¶è½¬æ¢ä¸ºDocumentå¯¹è±¡ï¼Œæ¥ä¸‹æ¥è°ƒç”¨
registerBeanDefinitionså¯åŠ¨Spring IoCå®¹å™¨å¯¹Beanå®šä¹‰çš„è§£æè¿‡ç¨‹ï¼ŒregisterBeanDefinitionsæ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//æŒ‰ç…§Springçš„Beanè¯­ä¹‰è¦æ±‚å°†Beanå®šä¹‰èµ„æºè§£æå¹¶è½¬æ¢ä¸ºå®¹å™¨å†…éƒ¨æ•°æ®ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">int</span> registerBeanDefinitions(Document doc, Resource resource) <span style="color:#fff;font-weight:bold">throws</span> BeanDefinitionStoreException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¾—åˆ°BeanDefinitionDocumentReaderæ¥å¯¹xmlæ ¼å¼çš„BeanDefinitionè§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å¾—å®¹å™¨ä¸­æ³¨å†Œçš„Beanæ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">int</span> countBefore = getRegistry().<span style="color:#007f7f">getBeanDefinitionCount</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æè¿‡ç¨‹å…¥å£ï¼Œè¿™é‡Œä½¿ç”¨äº†å§”æ´¾æ¨¡å¼ï¼ŒBeanDefinitionDocumentReaderåªæ˜¯ä¸ªæ¥å£ï¼Œ//å…·ä½“çš„è§£æå®ç°è¿‡ç¨‹æœ‰å®ç°ç±»DefaultBeanDefinitionDocumentReaderå®Œæˆ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    documentReader.<span style="color:#007f7f">registerBeanDefinitions</span>(doc, createReaderContext(resource));
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ç»Ÿè®¡è§£æçš„Beanæ•°é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> getRegistry().<span style="color:#007f7f">getBeanDefinitionCount</span>() - countBefore;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºBeanDefinitionDocumentReaderå¯¹è±¡ï¼Œè§£æDocumentå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> BeanDefinitionDocumentReader createBeanDefinitionDocumentReader() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> BeanDefinitionDocumentReader.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">cast</span>(BeanUtils.<span style="color:#007f7f">instantiateClass</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">documentReaderClass</span>));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Beanå®šä¹‰èµ„æºçš„è½½å…¥è§£æåˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªè¿‡ç¨‹ï¼š
é¦–å…ˆï¼Œé€šè¿‡è°ƒç”¨XMLè§£æå™¨å°†Beanå®šä¹‰èµ„æºæ–‡ä»¶è½¬æ¢å¾—åˆ°Documentå¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›Documentå¯¹è±¡å¹¶æ²¡æœ‰æŒ‰ç…§Springçš„Beanè§„åˆ™è¿›è¡Œè§£æã€‚è¿™ä¸€æ­¥æ˜¯è½½å…¥çš„è¿‡ç¨‹ã€‚
å…¶æ¬¡ï¼Œåœ¨å®Œæˆé€šç”¨çš„XMLè§£æä¹‹åï¼ŒæŒ‰ç…§Springçš„Beanè§„åˆ™å¯¹Documentå¯¹è±¡è¿›è¡Œè§£æã€‚
æŒ‰ç…§Springçš„Beanè§„åˆ™å¯¹Documentå¯¹è±¡è§£æçš„è¿‡ç¨‹æ˜¯åœ¨æ¥å£BeanDefinitionDocumentReaderçš„å®ç°ç±»DefaultBeanDefinitionDocumentReaderä¸­å®ç°çš„ã€‚</p>
<h2 id="defaultbeandefinitiondocumentreaderå¯¹beanå®šä¹‰çš„documentå¯¹è±¡è§£æ">DefaultBeanDefinitionDocumentReaderå¯¹Beanå®šä¹‰çš„Documentå¯¹è±¡è§£æ<a hidden class="anchor" aria-hidden="true" href="#defaultbeandefinitiondocumentreaderå¯¹beanå®šä¹‰çš„documentå¯¹è±¡è§£æ">#</a></h2>
<p>BeanDefinitionDocumentReaderæ¥å£é€šè¿‡registerBeanDefinitionsæ–¹æ³•è°ƒç”¨å…¶å®ç°ç±»
DefaultBeanDefinitionDocumentReaderå¯¹Documentå¯¹è±¡è¿›è¡Œè§£æï¼Œè§£æçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">187
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//æ ¹æ®Spring DTDå¯¹Beançš„å®šä¹‰è§„åˆ™è§£æBeanå®šä¹‰Documentå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> registerBeanDefinitions(Document doc, XmlReaderContext readerContext) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å¾—XMLæè¿°ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">readerContext</span> = readerContext;
</span></span><span style="display:flex;"><span>    logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Loading bean definitions&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å¾—Documentçš„æ ¹å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Element root = doc.<span style="color:#007f7f">getDocumentElement</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å…·ä½“çš„è§£æè¿‡ç¨‹ç”±BeanDefinitionParserDelegateå®ç°ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//BeanDefinitionParserDelegateä¸­å®šä¹‰äº†Spring Beanå®šä¹‰XMLæ–‡ä»¶çš„å„ç§å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BeanDefinitionParserDelegate delegate = createHelper(readerContext, root);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åœ¨è§£æBeanå®šä¹‰ä¹‹å‰ï¼Œè¿›è¡Œè‡ªå®šä¹‰çš„è§£æï¼Œå¢å¼ºè§£æè¿‡ç¨‹çš„å¯æ‰©å±•æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    preProcessXml(root);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä»Documentçš„æ ¹å…ƒç´ å¼€å§‹è¿›è¡ŒBeanå®šä¹‰çš„Documentå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    parseBeanDefinitions(root, delegate);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åœ¨è§£æBeanå®šä¹‰ä¹‹åï¼Œè¿›è¡Œè‡ªå®šä¹‰çš„è§£æï¼Œå¢åŠ è§£æè¿‡ç¨‹çš„å¯æ‰©å±•æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    postProcessXml(root);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºBeanDefinitionParserDelegateï¼Œç”¨äºå®ŒæˆçœŸæ­£çš„è§£æè¿‡ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> BeanDefinitionParserDelegate createHelper(XmlReaderContext readerContext, Element root) {
</span></span><span style="display:flex;"><span>    BeanDefinitionParserDelegate delegate = <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionParserDelegate(readerContext);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//BeanDefinitionParserDelegateåˆå§‹åŒ–Documentæ ¹å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    delegate.<span style="color:#007f7f">initDefaults</span>(root);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> delegate;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨Springçš„Beanè§„åˆ™ä»Documentçš„æ ¹å…ƒç´ å¼€å§‹è¿›è¡ŒBeanå®šä¹‰çš„Documentå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Beanå®šä¹‰çš„Documentå¯¹è±¡ä½¿ç”¨äº†Springé»˜è®¤çš„XMLå‘½åç©ºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (delegate.<span style="color:#007f7f">isDefaultNamespace</span>(root)) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–Beanå®šä¹‰çš„Documentå¯¹è±¡æ ¹å…ƒç´ çš„æ‰€æœ‰å­èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        NodeList nl = root.<span style="color:#007f7f">getChildNodes</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; nl.<span style="color:#007f7f">getLength</span>(); i++) {
</span></span><span style="display:flex;"><span>            Node node = nl.<span style="color:#007f7f">item</span>(i);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å¾—DocumentèŠ‚ç‚¹æ˜¯XMLå…ƒç´ èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (node <span style="color:#fff;font-weight:bold">instanceof</span> Element) {
</span></span><span style="display:flex;"><span>                Element ele = (Element) node;
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//Beanå®šä¹‰çš„Documentçš„å…ƒç´ èŠ‚ç‚¹ä½¿ç”¨çš„æ˜¯Springé»˜è®¤çš„XMLå‘½åç©ºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">if</span> (delegate.<span style="color:#007f7f">isDefaultNamespace</span>(ele)) {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//ä½¿ç”¨Springçš„Beanè§„åˆ™è§£æå…ƒç´ èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    parseDefaultElement(ele, delegate);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//æ²¡æœ‰ä½¿ç”¨Springé»˜è®¤çš„XMLå‘½åç©ºé—´ï¼Œåˆ™ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„è§£//æè§„åˆ™è§£æå…ƒç´ èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    delegate.<span style="color:#007f7f">parseCustomElement</span>(ele);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//Documentçš„æ ¹èŠ‚ç‚¹æ²¡æœ‰ä½¿ç”¨Springé»˜è®¤çš„å‘½åç©ºé—´ï¼Œåˆ™ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//è§£æè§„åˆ™è§£æDocumentæ ¹èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        delegate.<span style="color:#007f7f">parseCustomElement</span>(root);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨Springçš„Beanè§„åˆ™è§£æDocumentå…ƒç´ èŠ‚ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">void</span> parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå…ƒç´ èŠ‚ç‚¹æ˜¯&lt;Import&gt;å¯¼å…¥å…ƒç´ ï¼Œè¿›è¡Œå¯¼å…¥è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (delegate.<span style="color:#007f7f">nodeNameEquals</span>(ele, IMPORT_ELEMENT)) {
</span></span><span style="display:flex;"><span>        importBeanDefinitionResource(ele);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå…ƒç´ èŠ‚ç‚¹æ˜¯&lt;Alias&gt;åˆ«åå…ƒç´ ï¼Œè¿›è¡Œåˆ«åè§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (delegate.<span style="color:#007f7f">nodeNameEquals</span>(ele, ALIAS_ELEMENT)) {
</span></span><span style="display:flex;"><span>        processAliasRegistration(ele);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å…ƒç´ èŠ‚ç‚¹æ—¢ä¸æ˜¯å¯¼å…¥å…ƒç´ ï¼Œä¹Ÿä¸æ˜¯åˆ«åå…ƒç´ ï¼Œå³æ™®é€šçš„&lt;Bean&gt;å…ƒç´ ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//æŒ‰ç…§Springçš„Beanè§„åˆ™è§£æå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (delegate.<span style="color:#007f7f">nodeNameEquals</span>(ele, BEAN_ELEMENT)) {
</span></span><span style="display:flex;"><span>        processBeanDefinition(ele, delegate);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;Import&gt;å¯¼å…¥å…ƒç´ ï¼Œä»ç»™å®šçš„å¯¼å…¥è·¯å¾„åŠ è½½Beanå®šä¹‰èµ„æºåˆ°Spring IoCå®¹å™¨ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> importBeanDefinitionResource(Element ele) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–ç»™å®šçš„å¯¼å…¥å…ƒç´ çš„locationå±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String location = ele.<span style="color:#007f7f">getAttribute</span>(RESOURCE_ATTRIBUTE);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå¯¼å…¥å…ƒç´ çš„locationå±æ€§å€¼ä¸ºç©ºï¼Œåˆ™æ²¡æœ‰å¯¼å…¥ä»»ä½•èµ„æºï¼Œç›´æ¥è¿”å›
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(location)) {
</span></span><span style="display:flex;"><span>        getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Resource location must not be empty&#34;</span>, ele);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨ç³»ç»Ÿå˜é‡å€¼è§£ælocationå±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    location = SystemPropertyUtils.<span style="color:#007f7f">resolvePlaceholders</span>(location);
</span></span><span style="display:flex;"><span>    Set&lt;Resource&gt; actualResources = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;Resource&gt;(<span style="color:#ff0;font-weight:bold">4</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ ‡è¯†ç»™å®šçš„å¯¼å…¥å…ƒç´ çš„locationæ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> absoluteLocation = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        absoluteLocation = ResourcePatternUtils.<span style="color:#007f7f">isUrl</span>(location) || ResourceUtils.<span style="color:#007f7f">toURI</span>(location).<span style="color:#007f7f">isAbsolute</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (URISyntaxException ex) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ç»™å®šçš„å¯¼å…¥å…ƒç´ çš„locationä¸æ˜¯ç»å¯¹è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ç»™å®šçš„å¯¼å…¥å…ƒç´ çš„locationæ˜¯ç»å¯¹è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (absoluteLocation) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä½¿ç”¨èµ„æºè¯»å…¥å™¨åŠ è½½ç»™å®šè·¯å¾„çš„Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">int</span> importCount = getReaderContext().<span style="color:#007f7f">getReader</span>().<span style="color:#007f7f">loadBeanDefinitions</span>(location, actualResources);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>                logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Imported &#34;</span> + importCount + <span style="color:#0ff;font-weight:bold">&#34; bean definitions from URL location [&#34;</span> + location + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionStoreException ex) {
</span></span><span style="display:flex;"><span>            getReaderContext().<span style="color:#007f7f">error</span>(
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;Failed to import bean definitions from URL location [&#34;</span> + location + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ç»™å®šçš„å¯¼å…¥å…ƒç´ çš„locationæ˜¯ç›¸å¯¹è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">int</span> importCount;
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°†ç»™å®šå¯¼å…¥å…ƒç´ çš„locationå°è£…ä¸ºç›¸å¯¹è·¯å¾„èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Resource relativeResource = getReaderContext().<span style="color:#007f7f">getResource</span>().<span style="color:#007f7f">createRelative</span>(location);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°è£…çš„ç›¸å¯¹è·¯å¾„èµ„æºå­˜åœ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (relativeResource.<span style="color:#007f7f">exists</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä½¿ç”¨èµ„æºè¯»å…¥å™¨åŠ è½½Beanå®šä¹‰èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                importCount = getReaderContext().<span style="color:#007f7f">getReader</span>().<span style="color:#007f7f">loadBeanDefinitions</span>(relativeResource);
</span></span><span style="display:flex;"><span>                actualResources.<span style="color:#007f7f">add</span>(relativeResource);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°è£…çš„ç›¸å¯¹è·¯å¾„èµ„æºä¸å­˜åœ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è·å–Spring IoCå®¹å™¨èµ„æºè¯»å…¥å™¨çš„åŸºæœ¬è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                String baseLocation = getReaderContext().<span style="color:#007f7f">getResource</span>().<span style="color:#007f7f">getURL</span>().<span style="color:#007f7f">toString</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//æ ¹æ®Spring IoCå®¹å™¨èµ„æºè¯»å…¥å™¨çš„åŸºæœ¬è·¯å¾„åŠ è½½ç»™å®šå¯¼å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#007f7f">//è·¯å¾„çš„èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                importCount = getReaderContext().<span style="color:#007f7f">getReader</span>().<span style="color:#007f7f">loadBeanDefinitions</span>(
</span></span><span style="display:flex;"><span>                    StringUtils.<span style="color:#007f7f">applyRelativePath</span>(baseLocation, location), actualResources);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>                logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Imported &#34;</span> + importCount + <span style="color:#0ff;font-weight:bold">&#34; bean definitions from relative location [&#34;</span> + location + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (IOException ex) {
</span></span><span style="display:flex;"><span>            getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Failed to resolve current resource location&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionStoreException ex) {
</span></span><span style="display:flex;"><span>            getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Failed to import bean definitions from relative location [&#34;</span> + location + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>,
</span></span><span style="display:flex;"><span>                                     ele, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Resource[] actResArray = actualResources.<span style="color:#007f7f">toArray</span>(<span style="color:#fff;font-weight:bold">new</span> Resource[actualResources.<span style="color:#007f7f">size</span>()]);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åœ¨è§£æå®Œ&lt;Import&gt;å…ƒç´ ä¹‹åï¼Œå‘é€å®¹å™¨å¯¼å…¥å…¶ä»–èµ„æºå¤„ç†å®Œæˆäº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    getReaderContext().<span style="color:#007f7f">fireImportProcessed</span>(location, actResArray, extractSource(ele));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;Alias&gt;åˆ«åå…ƒç´ ï¼Œä¸ºBeanå‘Spring IoCå®¹å™¨æ³¨å†Œåˆ«å
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> processAliasRegistration(Element ele) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;Alias&gt;åˆ«åå…ƒç´ ä¸­nameçš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String name = ele.<span style="color:#007f7f">getAttribute</span>(NAME_ATTRIBUTE);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;Alias&gt;åˆ«åå…ƒç´ ä¸­aliasçš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String alias = ele.<span style="color:#007f7f">getAttribute</span>(ALIAS_ATTRIBUTE);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> valid = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//&lt;alias&gt;åˆ«åå…ƒç´ çš„nameå±æ€§å€¼ä¸ºç©º
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(name)) {
</span></span><span style="display:flex;"><span>        getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Name must not be empty&#34;</span>, ele);
</span></span><span style="display:flex;"><span>        valid = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//&lt;alias&gt;åˆ«åå…ƒç´ çš„aliaså±æ€§å€¼ä¸ºç©º
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(alias)) {
</span></span><span style="display:flex;"><span>        getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Alias must not be empty&#34;</span>, ele);
</span></span><span style="display:flex;"><span>        valid = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (valid) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å‘å®¹å™¨çš„èµ„æºè¯»å…¥å™¨æ³¨å†Œåˆ«å
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            getReaderContext().<span style="color:#007f7f">getRegistry</span>().<span style="color:#007f7f">registerAlias</span>(name, alias);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {
</span></span><span style="display:flex;"><span>            getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Failed to register alias &#39;&#34;</span> + alias +
</span></span><span style="display:flex;"><span>                                     <span style="color:#0ff;font-weight:bold">&#34;&#39; for bean with name &#39;&#34;</span> + name + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åœ¨è§£æå®Œ&lt;Alias&gt;å…ƒç´ ä¹‹åï¼Œå‘é€å®¹å™¨åˆ«åå¤„ç†å®Œæˆäº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        getReaderContext().<span style="color:#007f7f">fireAliasRegistered</span>(name, alias, extractSource(ele));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æBeanå®šä¹‰èµ„æºDocumentå¯¹è±¡çš„æ™®é€šå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// BeanDefinitionHolderæ˜¯å¯¹BeanDefinitionçš„å°è£…ï¼Œå³Beanå®šä¹‰çš„å°è£…ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å¯¹Documentå¯¹è±¡ä¸­&lt;Bean&gt;å…ƒç´ çš„è§£æç”±BeanDefinitionParserDelegateå®ç°  BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (bdHolder != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        bdHolder = delegate.<span style="color:#007f7f">decorateBeanDefinitionIfRequired</span>(ele, bdHolder);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å‘Spring IoCå®¹å™¨æ³¨å†Œè§£æå¾—åˆ°çš„Beanå®šä¹‰ï¼Œè¿™æ˜¯Beanå®šä¹‰å‘IoCå®¹å™¨æ³¨å†Œçš„å…¥å£                              BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionStoreException ex) {
</span></span><span style="display:flex;"><span>            getReaderContext().<span style="color:#007f7f">error</span>(<span style="color:#0ff;font-weight:bold">&#34;Failed to register bean definition with name &#39;&#34;</span> +
</span></span><span style="display:flex;"><span>                                     bdHolder.<span style="color:#007f7f">getBeanName</span>() + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åœ¨å®Œæˆå‘Spring IoCå®¹å™¨æ³¨å†Œè§£æå¾—åˆ°çš„Beanå®šä¹‰ä¹‹åï¼Œå‘é€æ³¨å†Œäº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        getReaderContext().<span style="color:#007f7f">fireComponentRegistered</span>(<span style="color:#fff;font-weight:bold">new</span> BeanComponentDefinition(bdHolder));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šè¿°Spring IoCå®¹å™¨å¯¹è½½å…¥çš„Beanå®šä¹‰Documentè§£æå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ä½¿ç”¨Springæ—¶ï¼Œåœ¨Springé…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨<code>&lt;Import&gt;</code>å…ƒç´ æ¥å¯¼å…¥IoCå®¹å™¨æ‰€éœ€è¦çš„å…¶ä»–èµ„æºï¼ŒSpring IoCå®¹å™¨åœ¨è§£ææ—¶ä¼šé¦–å…ˆå°†æŒ‡å®šå¯¼å…¥çš„èµ„æºåŠ è½½è¿›å®¹å™¨ä¸­ã€‚ä½¿ç”¨<code>&lt;Ailas&gt;</code>åˆ«åæ—¶ï¼ŒSpring IoCå®¹å™¨é¦–å…ˆå°†åˆ«åå…ƒç´ æ‰€å®šä¹‰çš„åˆ«åæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</p>
<p>å¯¹äºæ—¢ä¸æ˜¯<code>&lt;Import&gt;</code>å…ƒç´ ï¼Œåˆä¸æ˜¯<code>&lt;Alias&gt;</code>å…ƒç´ çš„å…ƒç´ ï¼Œå³Springé…ç½®æ–‡ä»¶ä¸­æ™®é€šçš„<code>&lt;Bean&gt;</code>å…ƒç´ çš„è§£æç”±BeanDefinitionParserDelegateç±»çš„parseBeanDefinitionElementæ–¹æ³•æ¥å®ç°ã€‚</p>
<h2 id="beandefinitionparserdelegateè§£æbeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„beanå…ƒç´ ">BeanDefinitionParserDelegateè§£æBeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„<code>&lt;Bean&gt;</code>å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#beandefinitionparserdelegateè§£æbeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„beanå…ƒç´ ">#</a></h2>
<p>Beanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„<code>&lt;Import&gt;å’Œ&lt;Alias&gt;</code>å…ƒç´ è§£æåœ¨DefaultBeanDefinitionDocumentReaderä¸­å·²ç»å®Œæˆï¼Œå¯¹Beanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­ä½¿ç”¨æœ€å¤šçš„<code>&lt;Bean&gt;</code>å…ƒç´ äº¤ç”±BeanDefinitionParserDelegateæ¥è§£æï¼Œå…¶è§£æå®ç°çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ çš„å…¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> BeanDefinitionHolder parseBeanDefinitionElement(Element ele) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> parseBeanDefinitionElement(ele, <span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æBeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­çš„&lt;Bean&gt;å…ƒç´ ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­ä¸»è¦å¤„ç†&lt;Bean&gt;å…ƒç´ çš„idï¼Œname
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">//å’Œåˆ«åå±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;Bean&gt;å…ƒç´ ä¸­çš„idå±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String id = ele.<span style="color:#007f7f">getAttribute</span>(ID_ATTRIBUTE);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;Bean&gt;å…ƒç´ ä¸­çš„nameå±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String nameAttr = ele.<span style="color:#007f7f">getAttribute</span>(NAME_ATTRIBUTE);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">////è·å–&lt;Bean&gt;å…ƒç´ ä¸­çš„aliaså±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    List&lt;String&gt; aliases = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;String&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å°†&lt;Bean&gt;å…ƒç´ ä¸­çš„æ‰€æœ‰nameå±æ€§å€¼å­˜æ”¾åˆ°åˆ«åä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (StringUtils.<span style="color:#007f7f">hasLength</span>(nameAttr)) {
</span></span><span style="display:flex;"><span>        String[] nameArr = StringUtils.<span style="color:#007f7f">tokenizeToStringArray</span>(nameAttr, BEAN_NAME_DELIMITERS);
</span></span><span style="display:flex;"><span>        aliases.<span style="color:#007f7f">addAll</span>(Arrays.<span style="color:#007f7f">asList</span>(nameArr));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    String beanName = id;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœ&lt;Bean&gt;å…ƒç´ ä¸­æ²¡æœ‰é…ç½®idå±æ€§æ—¶ï¼Œå°†åˆ«åä¸­çš„ç¬¬ä¸€ä¸ªå€¼èµ‹å€¼ç»™beanName
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(beanName) &amp;&amp; !aliases.<span style="color:#007f7f">isEmpty</span>()) {
</span></span><span style="display:flex;"><span>        beanName = aliases.<span style="color:#007f7f">remove</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>            logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;No XML &#39;id&#39; specified - using &#39;&#34;</span> + beanName +
</span></span><span style="display:flex;"><span>                         <span style="color:#0ff;font-weight:bold">&#34;&#39; as bean name and &#34;</span> + aliases + <span style="color:#0ff;font-weight:bold">&#34; as aliases&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ£€æŸ¥&lt;Bean&gt;å…ƒç´ æ‰€é…ç½®çš„idæˆ–è€…nameçš„å”¯ä¸€æ€§ï¼ŒcontainingBeanæ ‡è¯†&lt;Bean&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å…ƒç´ ä¸­æ˜¯å¦åŒ…å«å­&lt;Bean&gt;å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (containingBean == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ£€æŸ¥&lt;Bean&gt;å…ƒç´ æ‰€é…ç½®çš„idã€nameæˆ–è€…åˆ«åæ˜¯å¦é‡å¤
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        checkNameUniqueness(beanName, aliases, ele);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¯¦ç»†å¯¹&lt;Bean&gt;å…ƒç´ ä¸­é…ç½®çš„Beanå®šä¹‰è¿›è¡Œè§£æçš„åœ°æ–¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (beanDefinition != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(beanName)) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (containingBean != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//å¦‚æœ&lt;Bean&gt;å…ƒç´ ä¸­æ²¡æœ‰é…ç½®idã€åˆ«åæˆ–è€…nameï¼Œä¸”æ²¡æœ‰åŒ…å«å­//&lt;Bean&gt;å…ƒç´ ï¼Œä¸ºè§£æçš„Beanç”Ÿæˆä¸€ä¸ªå”¯ä¸€beanNameå¹¶æ³¨å†Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    beanName = BeanDefinitionReaderUtils.<span style="color:#007f7f">generateBeanName</span>(
</span></span><span style="display:flex;"><span>                        beanDefinition, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">readerContext</span>.<span style="color:#007f7f">getRegistry</span>(), <span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//å¦‚æœ&lt;Bean&gt;å…ƒç´ ä¸­æ²¡æœ‰é…ç½®idã€åˆ«åæˆ–è€…nameï¼Œä¸”åŒ…å«äº†å­//&lt;Bean&gt;å…ƒç´ ï¼Œä¸ºè§£æçš„Beanä½¿ç”¨åˆ«åå‘IoCå®¹å™¨æ³¨å†Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    beanName = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">readerContext</span>.<span style="color:#007f7f">generateBeanName</span>(beanDefinition);
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//ä¸ºè§£æçš„Beanä½¿ç”¨åˆ«åæ³¨å†Œæ—¶ï¼Œä¸ºäº†å‘åå…¼å®¹                                    //Spring1.2/2.0ï¼Œç»™åˆ«åæ·»åŠ ç±»ååç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    String beanClassName = beanDefinition.<span style="color:#007f7f">getBeanClassName</span>();
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">if</span> (beanClassName != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp;
</span></span><span style="display:flex;"><span>                        beanName.<span style="color:#007f7f">startsWith</span>(beanClassName) &amp;&amp; beanName.<span style="color:#007f7f">length</span>() &gt; beanClassName.<span style="color:#007f7f">length</span>() &amp;&amp;
</span></span><span style="display:flex;"><span>                        !<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">readerContext</span>.<span style="color:#007f7f">getRegistry</span>().<span style="color:#007f7f">isBeanNameInUse</span>(beanClassName)) {
</span></span><span style="display:flex;"><span>                        aliases.<span style="color:#007f7f">add</span>(beanClassName);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>                    logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Neither XML &#39;id&#39; nor &#39;name&#39; specified - &#34;</span> +
</span></span><span style="display:flex;"><span>                                 <span style="color:#0ff;font-weight:bold">&#34;using generated bean name [&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {
</span></span><span style="display:flex;"><span>                error(ex.<span style="color:#007f7f">getMessage</span>(), ele);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        String[] aliasesArray = StringUtils.<span style="color:#007f7f">toStringArray</span>(aliases);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionHolder(beanDefinition, beanName, aliasesArray);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å½“è§£æå‡ºé”™æ—¶ï¼Œè¿”å›null
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è¯¦ç»†å¯¹&lt;Bean&gt;å…ƒç´ ä¸­é…ç½®çš„Beanå®šä¹‰å…¶ä»–å±æ€§è¿›è¡Œè§£æï¼Œç”±äºä¸Šé¢çš„æ–¹æ³•ä¸­å·²ç»å¯¹//Beançš„idã€nameå’Œåˆ«åç­‰å±æ€§è¿›è¡Œäº†å¤„ç†ï¼Œè¯¥æ–¹æ³•ä¸­ä¸»è¦å¤„ç†é™¤è¿™ä¸‰ä¸ªä»¥å¤–çš„å…¶ä»–å±æ€§æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> AbstractBeanDefinition parseBeanDefinitionElement(
</span></span><span style="display:flex;"><span>    Element ele, String beanName, BeanDefinition containingBean) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®°å½•è§£æçš„&lt;Bean&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parseState</span>.<span style="color:#007f7f">push</span>(<span style="color:#fff;font-weight:bold">new</span> BeanEntry(beanName));
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿™é‡Œåªè¯»å–&lt;Bean&gt;å…ƒç´ ä¸­é…ç½®çš„classåå­—ï¼Œç„¶åè½½å…¥åˆ°BeanDefinitionä¸­å»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//åªæ˜¯è®°å½•é…ç½®çš„classåå­—ï¼Œä¸åšå®ä¾‹åŒ–ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–åœ¨ä¾èµ–æ³¨å…¥æ—¶å®Œæˆ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String className = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (ele.<span style="color:#007f7f">hasAttribute</span>(CLASS_ATTRIBUTE)) {
</span></span><span style="display:flex;"><span>        className = ele.<span style="color:#007f7f">getAttribute</span>(CLASS_ATTRIBUTE).<span style="color:#007f7f">trim</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        String parent = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœ&lt;Bean&gt;å…ƒç´ ä¸­é…ç½®äº†parentå±æ€§ï¼Œåˆ™è·å–parentå±æ€§çš„å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (ele.<span style="color:#007f7f">hasAttribute</span>(PARENT_ATTRIBUTE)) {
</span></span><span style="display:flex;"><span>            parent = ele.<span style="color:#007f7f">getAttribute</span>(PARENT_ATTRIBUTE);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ ¹æ®&lt;Bean&gt;å…ƒç´ é…ç½®çš„classåç§°å’Œparentå±æ€§å€¼åˆ›å»ºBeanDefinition
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ä¸ºè½½å…¥Beanå®šä¹‰ä¿¡æ¯åšå‡†å¤‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        AbstractBeanDefinition bd = createBeanDefinition(className, parent);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹å½“å‰çš„&lt;Bean&gt;å…ƒç´ ä¸­é…ç½®çš„ä¸€äº›å±æ€§è¿›è¡Œè§£æå’Œè®¾ç½®ï¼Œå¦‚é…ç½®çš„å•æ€(singleton)å±æ€§ç­‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseBeanDefinitionAttributes(ele, beanName, containingBean, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸º&lt;Bean&gt;å…ƒç´ è§£æçš„Beanè®¾ç½®descriptionä¿¡æ¯ bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT));
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//å¯¹&lt;Bean&gt;å…ƒç´ çš„meta(å…ƒä¿¡æ¯)å±æ€§è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseMetaElements(ele, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹&lt;Bean&gt;å…ƒç´ çš„lookup-methodå±æ€§è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseLookupOverrideSubElements(ele, bd.<span style="color:#007f7f">getMethodOverrides</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹&lt;Bean&gt;å…ƒç´ çš„replaced-methodå±æ€§è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseReplacedMethodSubElements(ele, bd.<span style="color:#007f7f">getMethodOverrides</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ çš„æ„é€ æ–¹æ³•è®¾ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseConstructorArgElements(ele, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ çš„&lt;property&gt;è®¾ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parsePropertyElements(ele, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ çš„qualifierå±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        parseQualifierElements(ele, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä¸ºå½“å‰è§£æçš„Beanè®¾ç½®æ‰€éœ€çš„èµ„æºå’Œä¾èµ–å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        bd.<span style="color:#007f7f">setResource</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">readerContext</span>.<span style="color:#007f7f">getResource</span>());
</span></span><span style="display:flex;"><span>        bd.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> bd;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (ClassNotFoundException ex) {
</span></span><span style="display:flex;"><span>        error(<span style="color:#0ff;font-weight:bold">&#34;Bean class [&#34;</span> + className + <span style="color:#0ff;font-weight:bold">&#34;] not found&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (NoClassDefFoundError err) {
</span></span><span style="display:flex;"><span>        error(<span style="color:#0ff;font-weight:bold">&#34;Class that bean class [&#34;</span> + className + <span style="color:#0ff;font-weight:bold">&#34;] depends on not found&#34;</span>, ele, err);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {
</span></span><span style="display:flex;"><span>        error(<span style="color:#0ff;font-weight:bold">&#34;Unexpected failure during bean definition parsing&#34;</span>, ele, ex);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parseState</span>.<span style="color:#007f7f">pop</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ å‡ºé”™æ—¶ï¼Œè¿”å›null
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åªè¦ä½¿ç”¨è¿‡Springï¼Œå¯¹Springé…ç½®æ–‡ä»¶æ¯”è¾ƒç†Ÿæ‚‰çš„äººï¼Œé€šè¿‡å¯¹ä¸Šè¿°æºç çš„åˆ†æï¼Œå°±ä¼šæ˜ç™½æˆ‘ä»¬åœ¨Springé…ç½®æ–‡ä»¶ä¸­<code>&lt;Bean&gt;</code>å…ƒç´ çš„ä¸­é…ç½®çš„å±æ€§å°±æ˜¯é€šè¿‡è¯¥æ–¹æ³•è§£æå’Œè®¾ç½®åˆ°Beanä¸­å»çš„ã€‚
æ³¨æ„ï¼šåœ¨è§£æ<code>&lt;Bean&gt;</code>å…ƒç´ è¿‡ç¨‹ä¸­æ²¡æœ‰åˆ›å»ºå’Œå®ä¾‹åŒ–Beanå¯¹è±¡ï¼Œåªæ˜¯åˆ›å»ºäº†Beanå¯¹è±¡çš„å®šä¹‰ç±»
BeanDefinitionï¼Œå°†<code>&lt;Bean&gt;</code>å…ƒç´ ä¸­çš„é…ç½®ä¿¡æ¯è®¾ç½®åˆ°BeanDefinitionä¸­ä½œä¸ºè®°å½•ï¼Œå½“ä¾èµ–æ³¨å…¥æ—¶æ‰ä½¿ç”¨è¿™äº›è®°å½•ä¿¡æ¯åˆ›å»ºå’Œå®ä¾‹åŒ–å…·ä½“çš„Beanå¯¹è±¡ã€‚</p>
<p>ä¸Šé¢æ–¹æ³•ä¸­ä¸€äº›å¯¹ä¸€äº›é…ç½®å¦‚å…ƒä¿¡æ¯(meta)ã€qualifierç­‰çš„è§£æï¼Œæˆ‘ä»¬åœ¨Springä¸­é…ç½®æ—¶ä½¿ç”¨çš„ä¹Ÿä¸å¤šï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Springçš„<code>&lt;Bean&gt;</code>å…ƒç´ æ—¶ï¼Œé…ç½®æœ€å¤šçš„æ˜¯<code>&lt;property&gt;</code>å±æ€§ï¼Œå› æ­¤æˆ‘ä»¬ä¸‹é¢ç»§ç»­åˆ†ææºç ï¼Œäº†è§£Beançš„å±æ€§åœ¨è§£ææ—¶æ˜¯å¦‚ä½•è®¾ç½®çš„ã€‚</p>
<h2 id="beandefinitionparserdelegateè§£æpropertyå…ƒç´ ">BeanDefinitionParserDelegateè§£æ<code>&lt;property&gt;</code>å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#beandefinitionparserdelegateè§£æpropertyå…ƒç´ ">#</a></h2>
<p>BeanDefinitionParserDelegateåœ¨è§£æ<code>&lt;Bean&gt;</code>è°ƒç”¨parsePropertyElementsæ–¹æ³•è§£æ<code>&lt;Bean&gt;</code>å…ƒç´ ä¸­çš„<code>&lt;property&gt;</code>å±æ€§å­å…ƒç´ ï¼Œè§£ææºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;Bean&gt;å…ƒç´ ä¸­çš„&lt;property&gt;å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> parsePropertyElements(Element beanEle, BeanDefinition bd) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;Bean&gt;å…ƒç´ ä¸­æ‰€æœ‰çš„å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    NodeList nl = beanEle.<span style="color:#007f7f">getChildNodes</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; nl.<span style="color:#007f7f">getLength</span>(); i++) {
</span></span><span style="display:flex;"><span>        Node node = nl.<span style="color:#007f7f">item</span>(i);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;property&gt;å­å…ƒç´ ï¼Œåˆ™è°ƒç”¨è§£æ&lt;property&gt;å­å…ƒç´ æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (isCandidateElement(node) &amp;&amp; nodeNameEquals(node, PROPERTY_ELEMENT)) {
</span></span><span style="display:flex;"><span>            parsePropertyElement((Element) node, bd);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æ&lt;property&gt;å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> parsePropertyElement (Element ele, BeanDefinition bd){
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–&lt;property&gt;å…ƒç´ çš„åå­—   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String propertyName = ele.<span style="color:#007f7f">getAttribute</span>(NAME_ATTRIBUTE);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasLength</span>(propertyName)) {
</span></span><span style="display:flex;"><span>            error(<span style="color:#0ff;font-weight:bold">&#34;Tag &#39;property&#39; must have a &#39;name&#39; attribute&#34;</span>, ele);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parseState</span>.<span style="color:#007f7f">push</span>(<span style="color:#fff;font-weight:bold">new</span> PropertyEntry(propertyName));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœä¸€ä¸ªBeanä¸­å·²ç»æœ‰åŒåçš„propertyå­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œè§£æï¼Œç›´æ¥è¿”å›ã€‚  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//å³å¦‚æœåœ¨åŒä¸€ä¸ªBeanä¸­é…ç½®åŒåçš„propertyï¼Œåˆ™åªæœ‰ç¬¬ä¸€ä¸ªèµ·ä½œç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (bd.<span style="color:#007f7f">getPropertyValues</span>().<span style="color:#007f7f">contains</span>(propertyName)) {
</span></span><span style="display:flex;"><span>                error(<span style="color:#0ff;font-weight:bold">&#34;Multiple &#39;property&#39; definitions for property &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ele);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è§£æè·å–propertyçš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Object val = parsePropertyValue(ele, bd, propertyName);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//æ ¹æ®propertyçš„åå­—å’Œå€¼åˆ›å»ºpropertyå®ä¾‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            PropertyValue pv = <span style="color:#fff;font-weight:bold">new</span> PropertyValue(propertyName, val);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è§£æ&lt;property&gt;å…ƒç´ ä¸­çš„å±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            parseMetaElements(ele, pv);
</span></span><span style="display:flex;"><span>            pv.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>            bd.<span style="color:#007f7f">getPropertyValues</span>().<span style="color:#007f7f">addPropertyValue</span>(pv);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">parseState</span>.<span style="color:#007f7f">pop</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è§£æè·å–propertyå€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">public</span> Object parsePropertyValue (Element ele, BeanDefinition bd, String propertyName){
</span></span><span style="display:flex;"><span>            String elementName = (propertyName != <span style="color:#fff;font-weight:bold">null</span>) ?
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;&lt;property&gt; element for property &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span> :
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#34;&lt;constructor-arg&gt; element&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–&lt;property&gt;çš„æ‰€æœ‰å­å…ƒç´ ï¼Œåªèƒ½æ˜¯å…¶ä¸­ä¸€ç§ç±»å‹:ref,value,listç­‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            NodeList nl = ele.<span style="color:#007f7f">getChildNodes</span>();
</span></span><span style="display:flex;"><span>            Element subElement = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; nl.<span style="color:#007f7f">getLength</span>(); i++) {
</span></span><span style="display:flex;"><span>                Node node = nl.<span style="color:#007f7f">item</span>(i);
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å­å…ƒç´ ä¸æ˜¯descriptionå’Œmetaå±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">if</span> (node <span style="color:#fff;font-weight:bold">instanceof</span> Element &amp;&amp; !nodeNameEquals(node, DESCRIPTION_ELEMENT) &amp;&amp;
</span></span><span style="display:flex;"><span>                    !nodeNameEquals(node, META_ELEMENT)) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">if</span> (subElement != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                        error(elementName + <span style="color:#0ff;font-weight:bold">&#34; must not contain more than one sub-element&#34;</span>, ele);
</span></span><span style="display:flex;"><span>                    } <span style="color:#fff;font-weight:bold">else</span> {<span style="color:#007f7f">//å½“å‰&lt;property&gt;å…ƒç´ åŒ…å«æœ‰å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        subElement = (Element) node;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆ¤æ–­propertyçš„å±æ€§å€¼æ˜¯refè¿˜æ˜¯valueï¼Œä¸å…è®¸æ—¢æ˜¯refåˆæ˜¯value  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">boolean</span> hasRefAttribute = ele.<span style="color:#007f7f">hasAttribute</span>(REF_ATTRIBUTE);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">boolean</span> hasValueAttribute = ele.<span style="color:#007f7f">hasAttribute</span>(VALUE_ATTRIBUTE);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> ((hasRefAttribute &amp;&amp; hasValueAttribute) ||
</span></span><span style="display:flex;"><span>                ((hasRefAttribute || hasValueAttribute) &amp;&amp; subElement != <span style="color:#fff;font-weight:bold">null</span>)) {
</span></span><span style="display:flex;"><span>                error(elementName +
</span></span><span style="display:flex;"><span>                      <span style="color:#0ff;font-weight:bold">&#34; is only allowed to contain either &#39;ref&#39; attribute OR &#39;value&#39; attribute OR sub-element&#34;</span>, ele);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœå±æ€§æ˜¯refï¼Œåˆ›å»ºä¸€ä¸ªrefçš„æ•°æ®å¯¹è±¡RuntimeBeanReferenceï¼Œè¿™ä¸ªå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//å°è£…äº†refä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (hasRefAttribute) {
</span></span><span style="display:flex;"><span>                String refName = ele.<span style="color:#007f7f">getAttribute</span>(REF_ATTRIBUTE);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(refName)) {
</span></span><span style="display:flex;"><span>                    error(elementName + <span style="color:#0ff;font-weight:bold">&#34; contains empty &#39;ref&#39; attribute&#34;</span>, ele);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶æ‰€ä¾èµ–å¯¹è±¡çš„å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                RuntimeBeanReference ref = <span style="color:#fff;font-weight:bold">new</span> RuntimeBeanReference(refName);
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è®¾ç½®è¿™ä¸ªrefçš„æ•°æ®å¯¹è±¡æ˜¯è¢«å½“å‰çš„propertyå¯¹è±¡æ‰€å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                ref.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> ref;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœå±æ€§æ˜¯valueï¼Œåˆ›å»ºä¸€ä¸ªvalueçš„æ•°æ®å¯¹è±¡TypedStringValueï¼Œè¿™ä¸ªå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//å°è£…äº†valueä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (hasValueAttribute) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä¸€ä¸ªæŒæœ‰Stringç±»å‹å€¼çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                TypedStringValue valueHolder = <span style="color:#fff;font-weight:bold">new</span> TypedStringValue(ele.<span style="color:#007f7f">getAttribute</span>(VALUE_ATTRIBUTE));
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è®¾ç½®è¿™ä¸ªvalueæ•°æ®å¯¹è±¡æ˜¯è¢«å½“å‰çš„propertyå¯¹è±¡æ‰€å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                valueHolder.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> valueHolder;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœå½“å‰&lt;property&gt;å…ƒç´ è¿˜æœ‰å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (subElement != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è§£æ&lt;property&gt;çš„å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">return</span> parsePropertySubElement(subElement, bd);
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//properyå±æ€§ä¸­æ—¢ä¸æ˜¯refï¼Œä¹Ÿä¸æ˜¯valueå±æ€§ï¼Œè§£æå‡ºé”™è¿”å›null        error(elementName + &#34; must specify a ref or value&#34;, ele);  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡å¯¹ä¸Šè¿°æºç çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œ<code>&lt;Bean&gt;</code>å…ƒç´ ä¸­<code>&lt;property&gt;</code>å…ƒç´ çš„ç›¸å…³é…ç½®æ˜¯å¦‚ä½•å¤„ç†çš„ï¼š</p>
<ul>
<li>refè¢«å°è£…ä¸ºæŒ‡å‘ä¾èµ–å¯¹è±¡ä¸€ä¸ªå¼•ç”¨ã€‚</li>
<li>valueé…ç½®éƒ½ä¼šå°è£…æˆä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å¯¹è±¡ã€‚</li>
<li>refå’Œvalueéƒ½é€šè¿‡â€œè§£æçš„æ•°æ®ç±»å‹å±æ€§å€¼.setSource(extractSource(ele));â€æ–¹æ³•å°†å±æ€§å€¼/å¼•ç”¨ä¸æ‰€
å¼•ç”¨çš„å±æ€§å…³è”èµ·æ¥ã€‚</li>
</ul>
<p>åœ¨æ–¹æ³•çš„æœ€åå¯¹äº<code>&lt;property&gt;</code>å…ƒç´ çš„å­å…ƒç´ é€šè¿‡parsePropertySubElement æ–¹æ³•è§£æï¼Œæˆ‘ä»¬ç»§ç»­åˆ†æè¯¥æ–¹æ³•çš„æºç ï¼Œäº†è§£å…¶è§£æè¿‡ç¨‹ã€‚</p>
<h2 id="è§£æpropertyå…ƒç´ çš„å­å…ƒç´ ">è§£æ<code>&lt;property&gt;</code>å…ƒç´ çš„å­å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#è§£æpropertyå…ƒç´ çš„å­å…ƒç´ ">#</a></h2>
<p>åœ¨BeanDefinitionParserDelegateç±»ä¸­çš„parsePropertySubElementæ–¹æ³•å¯¹<code>&lt;property&gt;</code>ä¸­çš„å­å…ƒç´ è§£æï¼Œæºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">85
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;property&gt;å…ƒç´ ä¸­ref,valueæˆ–è€…é›†åˆç­‰å­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object parsePropertySubElement(Element ele, BeanDefinition bd, String defaultValueType) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœ&lt;property&gt;æ²¡æœ‰ä½¿ç”¨Springé»˜è®¤çš„å‘½åç©ºé—´ï¼Œåˆ™ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„è§„åˆ™è§£æ//å†…åµŒå…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (!isDefaultNamespace(ele)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseNestedCustomElement(ele, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯beanï¼Œåˆ™ä½¿ç”¨è§£æ&lt;Bean&gt;å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, BEAN_ELEMENT)) {
</span></span><span style="display:flex;"><span>        BeanDefinitionHolder nestedBd = parseBeanDefinitionElement(ele, bd);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (nestedBd != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            nestedBd = decorateBeanDefinitionIfRequired(ele, nestedBd, bd);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> nestedBd;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯refï¼Œrefä¸­åªèƒ½æœ‰ä»¥ä¸‹3ä¸ªå±æ€§ï¼šbeanã€localã€parent  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, REF_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–&lt;property&gt;å…ƒç´ ä¸­çš„beanå±æ€§å€¼ï¼Œå¼•ç”¨å…¶ä»–è§£æçš„Beançš„åç§°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//å¯ä»¥ä¸å†åŒä¸€ä¸ªSpringé…ç½®æ–‡ä»¶ä¸­ï¼Œå…·ä½“è¯·å‚è€ƒSpringå¯¹refçš„é…ç½®è§„åˆ™  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String refName = ele.<span style="color:#007f7f">getAttribute</span>(BEAN_REF_ATTRIBUTE);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">boolean</span> toParent = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasLength</span>(refName)) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–&lt;property&gt;å…ƒç´ ä¸­çš„localå±æ€§å€¼ï¼Œå¼•ç”¨åŒä¸€ä¸ªXmlæ–‡ä»¶ä¸­é…ç½®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//çš„Beançš„idï¼Œlocalå’Œrefä¸åŒï¼Œlocalåªèƒ½å¼•ç”¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            refName = ele.<span style="color:#007f7f">getAttribute</span>(LOCAL_REF_ATTRIBUTE);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasLength</span>(refName)) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è·å–&lt;property&gt;å…ƒç´ ä¸­parentå±æ€§å€¼ï¼Œå¼•ç”¨çˆ¶çº§å®¹å™¨ä¸­çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                refName = ele.<span style="color:#007f7f">getAttribute</span>(PARENT_REF_ATTRIBUTE);
</span></span><span style="display:flex;"><span>                toParent = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasLength</span>(refName)) {
</span></span><span style="display:flex;"><span>                    error(<span style="color:#0ff;font-weight:bold">&#34;&#39;bean&#39;, &#39;local&#39; or &#39;parent&#39; is required for &lt;ref&gt; element&#34;</span>, ele);
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ²¡æœ‰é…ç½®refçš„ç›®æ ‡å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (!StringUtils.<span style="color:#007f7f">hasText</span>(refName)) {
</span></span><span style="display:flex;"><span>            error(<span style="color:#0ff;font-weight:bold">&#34;&lt;ref&gt; element contains empty target attribute&#34;</span>, ele);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºrefç±»å‹æ•°æ®ï¼ŒæŒ‡å‘è¢«å¼•ç”¨çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        RuntimeBeanReference ref = <span style="color:#fff;font-weight:bold">new</span> RuntimeBeanReference(refName, toParent);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è®¾ç½®å¼•ç”¨ç±»å‹å€¼æ˜¯è¢«å½“å‰å­å…ƒç´ æ‰€å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ref.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> ref;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;idref&gt;ï¼Œä½¿ç”¨è§£ærefå…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, IDREF_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseIdRefElement(ele);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;value&gt;ï¼Œä½¿ç”¨è§£ævalueå…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, VALUE_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseValueElement(ele, defaultValueType);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯nullï¼Œä¸º&lt;property&gt;è®¾ç½®ä¸€ä¸ªå°è£…nullå€¼çš„å­—ç¬¦ä¸²æ•°æ®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, NULL_ELEMENT)) {
</span></span><span style="display:flex;"><span>        TypedStringValue nullHolder = <span style="color:#fff;font-weight:bold">new</span> TypedStringValue(<span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>        nullHolder.<span style="color:#007f7f">setSource</span>(extractSource(ele));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> nullHolder;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;array&gt;ï¼Œä½¿ç”¨è§£æarrayé›†åˆå­å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, ARRAY_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseArrayElement(ele, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;list&gt;ï¼Œä½¿ç”¨è§£ælisté›†åˆå­å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, LIST_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseListElement(ele, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;set&gt;ï¼Œä½¿ç”¨è§£æseté›†åˆå­å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, SET_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseSetElement(ele, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;map&gt;ï¼Œä½¿ç”¨è§£æmapé›†åˆå­å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, MAP_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parseMapElement(ele, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœå­å…ƒç´ æ˜¯&lt;props&gt;ï¼Œä½¿ç”¨è§£æpropsé›†åˆå­å…ƒç´ çš„æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (nodeNameEquals(ele, PROPS_ELEMENT)) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> parsePropsElement(ele);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ—¢ä¸æ˜¯refï¼Œåˆä¸æ˜¯valueï¼Œä¹Ÿä¸æ˜¯é›†åˆï¼Œåˆ™å­å…ƒç´ é…ç½®é”™è¯¯ï¼Œè¿”å›null  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        error(<span style="color:#0ff;font-weight:bold">&#34;Unknown property sub-element: [&#34;</span> + ele.<span style="color:#007f7f">getNodeName</span>() + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>, ele);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šè¿°æºç åˆ†æï¼Œæˆ‘ä»¬æ˜ç™½äº†åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯¹<code>&lt;property&gt;</code>å…ƒç´ ä¸­é…ç½®çš„Arrayã€Listã€Setã€Mapã€Propç­‰å„ç§é›†åˆå­å…ƒç´ çš„éƒ½é€šè¿‡ä¸Šè¿°æ–¹æ³•è§£æï¼Œç”Ÿæˆå¯¹åº”çš„æ•°æ®å¯¹è±¡ï¼Œæ¯”å¦‚ManagedListã€ManagedArrayã€ManagedSetç­‰ï¼Œè¿™äº›Managedç±»æ˜¯Springå¯¹è±¡BeanDefinitonçš„æ•°æ®å°è£…ï¼Œå¯¹é›†åˆæ•°æ®ç±»å‹çš„å…·ä½“è§£ææœ‰å„è‡ªçš„è§£ææ–¹æ³•å®ç°ï¼Œè§£ææ–¹æ³•çš„å‘½åéå¸¸è§„èŒƒï¼Œä¸€ç›®äº†ç„¶ï¼Œæˆ‘ä»¬å¯¹<code>&lt;list&gt;</code>é›†åˆå…ƒç´ çš„è§£ææ–¹æ³•è¿›è¡Œæºç åˆ†æï¼Œäº†è§£å…¶å®ç°è¿‡ç¨‹ã€‚</p>
<h2 id="è§£ælistå­å…ƒç´ ">è§£æ<code>&lt;list&gt;</code>å­å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#è§£ælistå­å…ƒç´ ">#</a></h2>
<p>åœ¨BeanDefinitionParserDelegateç±»ä¸­çš„parseListElementæ–¹æ³•å°±æ˜¯å…·ä½“å®ç°è§£æ<code>&lt;property&gt;</code>å…ƒç´ ä¸­çš„<code>&lt;list&gt;</code>é›†åˆå­å…ƒç´ ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è§£æ&lt;list&gt;é›†åˆå­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> List parseListElement(Element collectionEle, BeanDefinition bd) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;list&gt;å…ƒç´ ä¸­çš„value-typeå±æ€§ï¼Œå³è·å–é›†åˆå…ƒç´ çš„æ•°æ®ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String defaultElementType = collectionEle.<span style="color:#007f7f">getAttribute</span>(VALUE_TYPE_ATTRIBUTE);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–&lt;list&gt;é›†åˆå…ƒç´ ä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    NodeList nl = collectionEle.<span style="color:#007f7f">getChildNodes</span>();  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Springä¸­å°†Listå°è£…ä¸ºManagedList  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ManagedList&lt;Object&gt; target = <span style="color:#fff;font-weight:bold">new</span> ManagedList&lt;Object&gt;(nl.<span style="color:#007f7f">getLength</span>());  
</span></span><span style="display:flex;"><span>    target.<span style="color:#007f7f">setSource</span>(extractSource(collectionEle));  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è®¾ç½®é›†åˆç›®æ ‡æ•°æ®ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    target.<span style="color:#007f7f">setElementTypeName</span>(defaultElementType);  
</span></span><span style="display:flex;"><span>    target.<span style="color:#007f7f">setMergeEnabled</span>(parseMergeAttribute(collectionEle));  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å…·ä½“çš„&lt;list&gt;å…ƒç´ è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    parseCollectionElements(nl, target, bd, defaultElementType);  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> target;  
</span></span><span style="display:flex;"><span>}   
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å…·ä½“è§£æ&lt;list&gt;é›†åˆå…ƒç´ ï¼Œ&lt;array&gt;ã€&lt;list&gt;å’Œ&lt;set&gt;éƒ½ä½¿ç”¨è¯¥æ–¹æ³•è§£æ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> parseCollectionElements(  
</span></span><span style="display:flex;"><span>    NodeList elementNodes, Collection&lt;Object&gt; target, BeanDefinition bd, String defaultElementType) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//éå†é›†åˆæ‰€æœ‰èŠ‚ç‚¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; elementNodes.<span style="color:#007f7f">getLength</span>(); i++) {  
</span></span><span style="display:flex;"><span>        Node node = elementNodes.<span style="color:#007f7f">item</span>(i);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//èŠ‚ç‚¹ä¸æ˜¯descriptionèŠ‚ç‚¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (node <span style="color:#fff;font-weight:bold">instanceof</span> Element &amp;&amp; !nodeNameEquals(node, DESCRIPTION_ELEMENT)) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°†è§£æçš„å…ƒç´ åŠ å…¥é›†åˆä¸­ï¼Œé€’å½’è°ƒç”¨ä¸‹ä¸€ä¸ªå­å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            target.<span style="color:#007f7f">add</span>(parsePropertySubElement((Element) node, bd, defaultElementType));  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»è¿‡å¯¹Spring Beanå®šä¹‰èµ„æºæ–‡ä»¶è½¬æ¢çš„Documentå¯¹è±¡ä¸­çš„å…ƒç´ å±‚å±‚è§£æï¼ŒSpring IoCç°åœ¨å·²ç»å°†XMLå½¢å¼å®šä¹‰çš„Beanå®šä¹‰èµ„æºæ–‡ä»¶è½¬æ¢ä¸ºSpring IoCæ‰€è¯†åˆ«çš„æ•°æ®ç»“æ„â€”â€”BeanDefinitionï¼Œå®ƒæ˜¯Beanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­é…ç½®çš„POJOå¯¹è±¡åœ¨Spring IoCå®¹å™¨ä¸­çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡AbstractBeanDefinitionä¸ºå…¥å£ï¼Œè£IoCå®¹å™¨è¿›è¡Œç´¢å¼•ã€æŸ¥è¯¢å’Œæ“ä½œã€‚</p>
<p>é€šè¿‡Spring IoCå®¹å™¨å¯¹Beanå®šä¹‰èµ„æºçš„è§£æåï¼ŒIoCå®¹å™¨å¤§è‡´å®Œæˆäº†ç®¡ç†Beanå¯¹è±¡çš„å‡†å¤‡å·¥ä½œï¼Œå³åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä½†æ˜¯æœ€ä¸ºé‡è¦çš„ä¾èµ–æ³¨å…¥è¿˜æ²¡æœ‰å‘ç”Ÿï¼Œç°åœ¨åœ¨IoCå®¹å™¨ä¸­BeanDefinitionå­˜å‚¨çš„åªæ˜¯ä¸€äº›é™æ€ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥éœ€è¦å‘å®¹å™¨æ³¨å†ŒBeanå®šä¹‰ä¿¡æ¯æ‰èƒ½å…¨éƒ¨å®ŒæˆIoCå®¹å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p>
<h2 id="è§£æè¿‡åçš„beandefinitionåœ¨iocå®¹å™¨ä¸­çš„æ³¨å†Œ">è§£æè¿‡åçš„BeanDefinitionåœ¨IoCå®¹å™¨ä¸­çš„æ³¨å†Œ<a hidden class="anchor" aria-hidden="true" href="#è§£æè¿‡åçš„beandefinitionåœ¨iocå®¹å™¨ä¸­çš„æ³¨å†Œ">#</a></h2>
<p>è®©æˆ‘ä»¬ç»§ç»­è·Ÿè¸ªç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼Œæ¥ä¸‹æ¥ä¼šåˆ°æˆ‘ä»¬ç¬¬3æ­¥ä¸­åˆ†æDefaultBeanDefinitionDocumentReaderå¯¹Beanå®šä¹‰è½¬æ¢çš„Documentå¯¹è±¡è§£æçš„æµç¨‹ä¸­ï¼Œåœ¨å…¶parseDefaultElementæ–¹æ³•ä¸­å®Œæˆå¯¹Documentå¯¹è±¡çš„è§£æåå¾—åˆ°å°è£…BeanDefinitionçš„BeanDefinitionHoldå¯¹è±¡ï¼Œç„¶åè°ƒç”¨BeanDefinitionReaderUtilsçš„registerBeanDefinitionæ–¹æ³•å‘IoCå®¹å™¨æ³¨å†Œè§£æçš„Beanï¼ŒBeanDefinitionReaderUtilsçš„æ³¨å†Œçš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å°†è§£æçš„BeanDefinitionHoldæ³¨å†Œåˆ°å®¹å™¨ä¸­ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> registerBeanDefinition(BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> BeanDefinitionStoreException {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–è§£æçš„BeanDefinitionçš„åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String beanName = definitionHolder.<span style="color:#007f7f">getBeanName</span>();  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å‘IoCå®¹å™¨æ³¨å†ŒBeanDefinition 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    registry.<span style="color:#007f7f">registerBeanDefinition</span>(beanName, definitionHolder.<span style="color:#007f7f">getBeanDefinition</span>());  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœè§£æçš„BeanDefinitionæœ‰åˆ«åï¼Œå‘å®¹å™¨ä¸ºå…¶æ³¨å†Œåˆ«å  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String[] aliases = definitionHolder.<span style="color:#007f7f">getAliases</span>();  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (aliases != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (String aliase : aliases) {  
</span></span><span style="display:flex;"><span>            registry.<span style="color:#007f7f">registerAlias</span>(beanName, aliase);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“è°ƒç”¨BeanDefinitionReaderUtilså‘IoCå®¹å™¨æ³¨å†Œè§£æçš„BeanDefinitionæ—¶ï¼ŒçœŸæ­£å®Œæˆæ³¨å†ŒåŠŸèƒ½çš„æ˜¯
DefaultListableBeanFactoryã€‚</p>
<h2 id="defaultlistablebeanfactoryå‘iocå®¹å™¨æ³¨å†Œè§£æåçš„beandefinition">DefaultListableBeanFactoryå‘IoCå®¹å™¨æ³¨å†Œè§£æåçš„BeanDefinition<a hidden class="anchor" aria-hidden="true" href="#defaultlistablebeanfactoryå‘iocå®¹å™¨æ³¨å†Œè§£æåçš„beandefinition">#</a></h2>
<p>DefaultListableBeanFactoryä¸­ä½¿ç”¨ä¸€ä¸ªHashMapçš„é›†åˆå¯¹è±¡å­˜æ”¾IoCå®¹å™¨ä¸­æ³¨å†Œè§£æçš„BeanDefinitionï¼Œå‘IoCå®¹å™¨æ³¨å†Œçš„ä¸»è¦æºç å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å­˜å‚¨æ³¨å†Œçš„ä¿„BeanDefinition  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> Map&lt;String, BeanDefinition&gt; beanDefinitionMap = <span style="color:#fff;font-weight:bold">new</span> ConcurrentHashMap&lt;String, BeanDefinition&gt;();  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å‘IoCå®¹å™¨æ³¨å†Œè§£æçš„BeanDefiniton  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> registerBeanDefinition(String beanName, BeanDefinition beanDefinition)  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> BeanDefinitionStoreException {  
</span></span><span style="display:flex;"><span>    Assert.<span style="color:#007f7f">hasText</span>(beanName, <span style="color:#0ff;font-weight:bold">&#34;Bean name must not be empty&#34;</span>);  
</span></span><span style="display:flex;"><span>    Assert.<span style="color:#007f7f">notNull</span>(beanDefinition, <span style="color:#0ff;font-weight:bold">&#34;BeanDefinition must not be null&#34;</span>);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ ¡éªŒè§£æçš„BeanDefiniton  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (beanDefinition <span style="color:#fff;font-weight:bold">instanceof</span> AbstractBeanDefinition) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>            ((AbstractBeanDefinition) beanDefinition).<span style="color:#007f7f">validate</span>();  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionValidationException ex) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionStoreException(beanDefinition.<span style="color:#007f7f">getResourceDescription</span>(), beanName,  
</span></span><span style="display:flex;"><span>                                                   <span style="color:#0ff;font-weight:bold">&#34;Validation of bean definition failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ³¨å†Œçš„è¿‡ç¨‹ä¸­éœ€è¦çº¿ç¨‹åŒæ­¥ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionMap</span>) {  
</span></span><span style="display:flex;"><span>        Object oldBeanDefinition = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionMap</span>.<span style="color:#007f7f">get</span>(beanName);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ£€æŸ¥æ˜¯å¦æœ‰åŒåçš„BeanDefinitionå·²ç»åœ¨IoCå®¹å™¨ä¸­æ³¨å†Œï¼Œå¦‚æœå·²ç»æ³¨å†Œï¼Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//å¹¶ä¸”ä¸å…è®¸è¦†ç›–å·²æ³¨å†Œçš„Beanï¼Œåˆ™æŠ›å‡ºæ³¨å†Œå¤±è´¥å¼‚å¸¸  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (oldBeanDefinition != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">allowBeanDefinitionOverriding</span>) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionStoreException(beanDefinition.<span style="color:#007f7f">getResourceDescription</span>(), beanName,  
</span></span><span style="display:flex;"><span>                                                       <span style="color:#0ff;font-weight:bold">&#34;Cannot register bean definition [&#34;</span> + beanDefinition + <span style="color:#0ff;font-weight:bold">&#34;] for bean &#39;&#34;</span> + beanName +  
</span></span><span style="display:flex;"><span>                                                       <span style="color:#0ff;font-weight:bold">&#34;&#39;: There is already [&#34;</span> + oldBeanDefinition + <span style="color:#0ff;font-weight:bold">&#34;] bound.&#34;</span>);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">else</span> {<span style="color:#007f7f">//å¦‚æœå…è®¸è¦†ç›–ï¼Œåˆ™åŒåçš„Beanï¼Œåæ³¨å†Œçš„è¦†ç›–å…ˆæ³¨å†Œçš„  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">logger</span>.<span style="color:#007f7f">isInfoEnabled</span>()) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">logger</span>.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;Overriding bean definition for bean &#39;&#34;</span> + beanName +  
</span></span><span style="display:flex;"><span>                                     <span style="color:#0ff;font-weight:bold">&#34;&#39;: replacing [&#34;</span> + oldBeanDefinition + <span style="color:#0ff;font-weight:bold">&#34;] with [&#34;</span> + beanDefinition + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//IoCå®¹å™¨ä¸­æ²¡æœ‰å·²ç»æ³¨å†ŒåŒåçš„Beanï¼ŒæŒ‰æ­£å¸¸æ³¨å†Œæµç¨‹æ³¨å†Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionNames</span>.<span style="color:#007f7f">add</span>(beanName);  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">frozenBeanDefinitionNames</span> = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionMap</span>.<span style="color:#007f7f">put</span>(beanName, beanDefinition);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é‡ç½®æ‰€æœ‰å·²ç»æ³¨å†Œè¿‡çš„BeanDefinitionçš„ç¼“å­˜  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        resetBeanDefinition(beanName);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è‡³æ­¤ï¼ŒBeanå®šä¹‰èµ„æºæ–‡ä»¶ä¸­é…ç½®çš„Beanè¢«è§£æè¿‡åï¼Œå·²ç»æ³¨å†Œåˆ°IoCå®¹å™¨ä¸­ï¼Œè¢«å®¹å™¨ç®¡ç†èµ·æ¥ï¼ŒçœŸæ­£å®Œæˆäº†IoCå®¹å™¨åˆå§‹åŒ–æ‰€åšçš„å…¨éƒ¨å·¥ä½œã€‚ç°  åœ¨IoCå®¹å™¨ä¸­å·²ç»å»ºç«‹äº†æ•´ä¸ªBeançš„é…ç½®ä¿¡æ¯ï¼Œè¿™äº›BeanDefinitionä¿¡æ¯å·²ç»å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«æ£€ç´¢ï¼ŒIoCå®¹å™¨çš„ä½œç”¨å°±æ˜¯å¯¹è¿™äº›æ³¨å†Œçš„Beanå®šä¹‰ä¿¡æ¯è¿›è¡Œå¤„ç†å’Œç»´æŠ¤ã€‚è¿™äº›çš„æ³¨å†Œçš„Beanå®šä¹‰ä¿¡æ¯æ˜¯IoCå®¹å™¨æ§åˆ¶åè½¬çš„åŸºç¡€ï¼Œæ­£æ˜¯æœ‰äº†è¿™äº›æ³¨å†Œçš„æ•°æ®ï¼Œå®¹å™¨æ‰å¯ä»¥è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p>
<p>æ€»ç»“ï¼š
é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæ€»ç»“ä¸€ä¸‹IOCå®¹å™¨åˆå§‹åŒ–çš„åŸºæœ¬æ­¥éª¤ï¼š
åˆå§‹åŒ–çš„å…¥å£åœ¨å®¹å™¨å®ç°ä¸­çš„ refresh()è°ƒç”¨æ¥å®Œæˆã€‚
å¯¹ bean å®šä¹‰è½½å…¥ IOC å®¹å™¨ä½¿ç”¨çš„æ–¹æ³•æ˜¯ loadBeanDefinitionï¼Œå…¶ä¸­çš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š
é€šè¿‡ ResourceLoader æ¥å®Œæˆèµ„æºæ–‡ä»¶ä½ç½®çš„å®šä½ï¼ŒDefaultResourceLoader æ˜¯é»˜è®¤çš„å®ç°ï¼ŒåŒæ—¶ä¸Šä¸‹æ–‡æœ¬èº«å°±ç»™å‡ºäº† ResourceLoader çš„å®ç°ï¼Œå¯ä»¥ä»ç±»è·¯å¾„ï¼Œæ–‡ä»¶ç³»ç»Ÿ, URL ç­‰æ–¹å¼æ¥å®šä¸ºèµ„æºä½ç½®ã€‚å¦‚æœæ˜¯ XmlBeanFactoryä½œä¸º IOC å®¹å™¨ï¼Œé‚£ä¹ˆéœ€è¦ä¸ºå®ƒæŒ‡å®š bean å®šä¹‰çš„èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´ bean å®šä¹‰æ–‡ä»¶æ—¶é€šè¿‡æŠ½è±¡æˆ Resource æ¥è¢« IOC å®¹å™¨å¤„ç†çš„ï¼Œå®¹å™¨é€šè¿‡ BeanDefinitionReaderæ¥å®Œæˆå®šä¹‰ä¿¡æ¯çš„è§£æå’ŒBean ä¿¡æ¯çš„æ³¨å†Œ,å¾€å¾€ä½¿ç”¨çš„æ˜¯XmlBeanDefinitionReader æ¥è§£æ bean çš„ xml å®šä¹‰æ–‡ä»¶ - å®é™…çš„å¤„ç†è¿‡ç¨‹æ˜¯å§”æ‰˜ç»™ BeanDefinitionParserDelegate æ¥å®Œæˆçš„ï¼Œä»è€Œå¾—åˆ° bean çš„å®šä¹‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨ Spring ä¸­ä½¿ç”¨ BeanDefinition å¯¹è±¡æ¥è¡¨ç¤º - è¿™ä¸ªåå­—å¯ä»¥è®©æˆ‘ä»¬æƒ³åˆ°loadBeanDefinitionï¼ŒRegisterBeanDefinitionè¿™äº›ç›¸å…³çš„æ–¹æ³• - ä»–ä»¬éƒ½æ˜¯ä¸ºå¤„ç† BeanDefinitin æœåŠ¡çš„ï¼Œ å®¹å™¨è§£æå¾—åˆ° BeanDefinitionIoC ä»¥åï¼Œéœ€è¦æŠŠå®ƒåœ¨ IOC å®¹å™¨ä¸­æ³¨å†Œï¼Œè¿™ç”± IOC å®ç° BeanDefinitionRegistry æ¥å£æ¥å®ç°ã€‚æ³¨å†Œè¿‡ç¨‹å°±æ˜¯åœ¨ IOC å®¹å™¨å†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªHashMap æ¥ä¿å­˜å¾—åˆ°çš„ BeanDefinition çš„è¿‡ç¨‹ã€‚è¿™ä¸ª HashMap æ˜¯ IoC å®¹å™¨æŒæœ‰ bean ä¿¡æ¯çš„åœºæ‰€ï¼Œä»¥åå¯¹ bean çš„æ“ä½œéƒ½æ˜¯å›´ç»•è¿™ä¸ªHashMap æ¥å®ç°çš„ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ BeanFactory å’Œ ApplicationContext æ¥äº«å—åˆ° Spring IOC çš„æœåŠ¡äº†ï¼Œåœ¨ä½¿ç”¨ IOC å®¹å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°é™¤äº†å°‘é‡ç²˜åˆä»£ç ï¼Œç»å¤§å¤šæ•°ä»¥æ­£ç¡® IoC é£æ ¼ç¼–å†™çš„åº”ç”¨ç¨‹åºä»£ç å®Œå…¨ä¸ç”¨å…³å¿ƒå¦‚ä½•åˆ°è¾¾å·¥å‚ï¼Œå› ä¸ºå®¹å™¨å°†æŠŠè¿™äº›å¯¹è±¡ä¸å®¹å™¨ç®¡ç†çš„å…¶ä»–å¯¹è±¡é’©åœ¨ä¸€èµ·ã€‚åŸºæœ¬çš„ç­–ç•¥æ˜¯æŠŠå·¥å‚æ”¾åˆ°å·²çŸ¥çš„åœ°æ–¹ï¼Œæœ€å¥½æ˜¯æ”¾åœ¨å¯¹é¢„æœŸä½¿ç”¨çš„ä¸Šä¸‹æ–‡æœ‰æ„ä¹‰çš„åœ°æ–¹ï¼Œä»¥åŠä»£ç å°†å®é™…éœ€è¦è®¿é—®å·¥å‚çš„åœ°æ–¹ã€‚ Spring æœ¬èº«æä¾›äº†å¯¹å£°æ˜å¼è½½å…¥ web åº”ç”¨ç¨‹åºç”¨æ³•çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡,å¹¶å°†å…¶å­˜å‚¨åœ¨ServletContext ä¸­çš„æ¡†æ¶å®ç°ã€‚</p>
<p>åœ¨ä½¿ç”¨ Spring IOC å®¹å™¨çš„æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åŒºåˆ«ä¸¤ä¸ªæ¦‚å¿µ:
Beanfactory å’Œ Factory beanï¼Œå…¶ä¸­ BeanFactory æŒ‡çš„æ˜¯ IOC å®¹å™¨çš„ç¼–ç¨‹æŠ½è±¡ï¼Œ
æ¯”å¦‚ ApplicationContextï¼Œ XmlBeanFactory ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ IOC å®¹å™¨çš„å…·ä½“è¡¨ç°ï¼Œéœ€è¦ä½¿ç”¨ä»€ä¹ˆæ ·çš„å®¹å™¨ç”±å®¢æˆ·å†³å®š,ä½† Spring ä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„é€‰æ‹©ã€‚ FactoryBean åªæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ IOCè€Œå®¹å™¨ä¸­è¢«ç®¡ç†çš„ä¸€ä¸ªbean,æ˜¯å¯¹å„ç§å¤„ç†è¿‡ç¨‹å’Œèµ„æºä½¿ç”¨çš„æŠ½è±¡,Factory bean åœ¨éœ€è¦æ—¶äº§ç”Ÿå¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸è¿”å› FactoryBeanæœ¬èº«,æˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯ä¸€ä¸ªæŠ½è±¡å·¥å‚ï¼Œå¯¹å®ƒçš„è°ƒç”¨è¿”å›çš„æ˜¯å·¥å‚ç”Ÿäº§çš„äº§å“ã€‚æ‰€æœ‰çš„ Factory bean éƒ½å®ç°ç‰¹æ®Šçš„org.springframework.beans.factory.FactoryBean æ¥å£ï¼Œå½“ä½¿ç”¨å®¹å™¨ä¸­ factory bean çš„æ—¶å€™ï¼Œè¯¥å®¹å™¨ä¸ä¼šè¿”å› factory bean æœ¬èº«,è€Œæ˜¯è¿”å›å…¶ç”Ÿæˆçš„å¯¹è±¡ã€‚Spring åŒ…æ‹¬äº†å¤§éƒ¨åˆ†çš„é€šç”¨èµ„æºå’ŒæœåŠ¡è®¿é—®æŠ½è±¡çš„ Factory bean çš„å®ç°ï¼Œå…¶ä¸­åŒ…æ‹¬:å¯¹ JNDI æŸ¥è¯¢çš„å¤„ç†ï¼Œå¯¹ä»£ç†å¯¹è±¡çš„å¤„ç†ï¼Œå¯¹äº‹åŠ¡æ€§ä»£ç†çš„å¤„ç†ï¼Œå¯¹ RMI ä»£ç†çš„å¤„ç†ç­‰ï¼Œè¿™äº›æˆ‘ä»¬éƒ½å¯ä»¥çœ‹æˆæ˜¯å…·ä½“çš„å·¥å‚,çœ‹æˆæ˜¯SPRING ä¸ºæˆ‘ä»¬å»ºç«‹å¥½çš„å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´Spring é€šè¿‡ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸ºæˆ‘ä»¬å‡†å¤‡äº†ä¸€ç³»åˆ—å·¥å‚æ¥ç”Ÿäº§ä¸€äº›ç‰¹å®šçš„å¯¹è±¡,å…é™¤æˆ‘ä»¬æ‰‹å·¥é‡å¤çš„å·¥ä½œï¼Œæˆ‘ä»¬è¦ä½¿ç”¨æ—¶åªéœ€è¦åœ¨ IOC å®¹å™¨é‡Œé…ç½®å¥½å°±èƒ½å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨äº†ã€‚</p>
<h1 id="iocå®¹å™¨çš„ä¾èµ–æ³¨å…¥">IOCå®¹å™¨çš„ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#iocå®¹å™¨çš„ä¾èµ–æ³¨å…¥">#</a></h1>
<h2 id="ä¾èµ–æ³¨å…¥å‘ç”Ÿçš„æ—¶é—´">ä¾èµ–æ³¨å…¥å‘ç”Ÿçš„æ—¶é—´<a hidden class="anchor" aria-hidden="true" href="#ä¾èµ–æ³¨å…¥å‘ç”Ÿçš„æ—¶é—´">#</a></h2>
<p>å½“Spring IoCå®¹å™¨å®Œæˆäº†Beanå®šä¹‰èµ„æºçš„å®šä½ã€è½½å…¥å’Œè§£ææ³¨å†Œä»¥åï¼ŒIoCå®¹å™¨ä¸­å·²ç»ç®¡ç†ç±»Beanå®šä¹‰çš„ç›¸å…³æ•°æ®ï¼Œä½†æ˜¯æ­¤æ—¶IoCå®¹å™¨è¿˜æ²¡æœ‰å¯¹æ‰€ç®¡ç†çš„Beanè¿›è¡Œä¾èµ–æ³¨å…¥ï¼Œä¾èµ–æ³¨å…¥åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼š</p>
<ul>
<li>ç”¨æˆ·ç¬¬ä¸€æ¬¡é€šè¿‡getBeanæ–¹æ³•å‘IoCå®¹ç´¢è¦Beanæ—¶ï¼ŒIoCå®¹å™¨è§¦å‘ä¾èµ–æ³¨å…¥ã€‚</li>
<li>å½“ç”¨æˆ·åœ¨Beanå®šä¹‰èµ„æºä¸­ä¸º<code>&lt;Bean&gt;</code>å…ƒç´ é…ç½®äº†lazy-initå±æ€§ï¼Œå³è®©å®¹å™¨åœ¨è§£ææ³¨å†ŒBeanå®šä¹‰æ—¶è¿›è¡Œé¢„å®ä¾‹åŒ–ï¼Œè§¦å‘ä¾èµ–æ³¨å…¥ã€‚</li>
</ul>
<p>BeanFactoryæ¥å£å®šä¹‰äº†Spring IoCå®¹å™¨çš„åŸºæœ¬åŠŸèƒ½è§„èŒƒï¼Œæ˜¯Spring IoCå®¹å™¨æ‰€åº”éµå®ˆçš„æœ€åº•å±‚å’Œæœ€åŸºæœ¬çš„ç¼–ç¨‹è§„èŒƒã€‚BeanFactoryæ¥å£ä¸­å®šä¹‰äº†å‡ ä¸ªgetBeanæ–¹æ³•ï¼Œå°±æ˜¯ç”¨æˆ·å‘IoCå®¹å™¨ç´¢å–ç®¡ç†çš„Beançš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡åˆ†æå…¶å­ç±»çš„å…·ä½“å®ç°ï¼Œç†è§£Spring IoCå®¹å™¨åœ¨ç”¨æˆ·ç´¢å–Beanæ—¶å¦‚ä½•å®Œæˆä¾èµ–æ³¨å…¥ã€‚</p>
<p>åœ¨BeanFactoryä¸­æˆ‘ä»¬çœ‹åˆ°getBeanï¼ˆStringâ€¦ï¼‰å‡½æ•°ï¼Œå®ƒçš„å…·ä½“å®ç°åœ¨AbstractBeanFactoryä¸­ã€‚</p>
<h2 id="abstractbeanfactoryé€šè¿‡getbeanå‘iocå®¹å™¨è·å–è¢«ç®¡ç†çš„bean">AbstractBeanFactoryé€šè¿‡getBeanå‘IoCå®¹å™¨è·å–è¢«ç®¡ç†çš„Bean<a hidden class="anchor" aria-hidden="true" href="#abstractbeanfactoryé€šè¿‡getbeanå‘iocå®¹å™¨è·å–è¢«ç®¡ç†çš„bean">#</a></h2>
<p>AbstractBeanFactoryçš„getBeanç›¸å…³æ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è·å–IoCå®¹å™¨ä¸­æŒ‡å®šåç§°çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object getBean(String name) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//doGetBeanæ‰æ˜¯çœŸæ­£å‘IoCå®¹å™¨è·å–è¢«ç®¡ç†Beançš„è¿‡ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> doGetBean(name, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è·å–IoCå®¹å™¨ä¸­æŒ‡å®šåç§°å’Œç±»å‹çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//doGetBeanæ‰æ˜¯çœŸæ­£å‘IoCå®¹å™¨è·å–è¢«ç®¡ç†Beançš„è¿‡ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> doGetBean(name, requiredType, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è·å–IoCå®¹å™¨ä¸­æŒ‡å®šåç§°å’Œå‚æ•°çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object getBean(String name, Object... args) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//doGetBeanæ‰æ˜¯çœŸæ­£å‘IoCå®¹å™¨è·å–è¢«ç®¡ç†Beançš„è¿‡ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> doGetBean(name, <span style="color:#fff;font-weight:bold">null</span>, args, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è·å–IoCå®¹å™¨ä¸­æŒ‡å®šåç§°ã€ç±»å‹å’Œå‚æ•°çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType, Object... args) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//doGetBeanæ‰æ˜¯çœŸæ­£å‘IoCå®¹å™¨è·å–è¢«ç®¡ç†Beançš„è¿‡ç¨‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> doGetBean(name, requiredType, args, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//çœŸæ­£å®ç°å‘IoCå®¹å™¨è·å–Beançš„åŠŸèƒ½ï¼Œä¹Ÿæ˜¯è§¦å‘ä¾èµ–æ³¨å…¥åŠŸèƒ½çš„åœ°æ–¹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@SuppressWarnings(<span style="color:#0ff;font-weight:bold">&#34;unchecked&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> &lt;T&gt; T doGetBean(
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> String name, <span style="color:#fff;font-weight:bold">final</span> Class&lt;T&gt; requiredType, <span style="color:#fff;font-weight:bold">final</span> Object[] args, <span style="color:#fff;font-weight:bold">boolean</span> typeCheckOnly)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ ¹æ®æŒ‡å®šçš„åç§°è·å–è¢«ç®¡ç†Beançš„åç§°ï¼Œå‰¥ç¦»æŒ‡å®šåç§°ä¸­å¯¹å®¹å™¨çš„ç›¸å…³ä¾èµ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å¦‚æœæŒ‡å®šçš„æ˜¯åˆ«åï¼Œå°†åˆ«åè½¬æ¢ä¸ºè§„èŒƒçš„Beanåç§°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">final</span> String beanName = transformedBeanName(name);
</span></span><span style="display:flex;"><span>    Object bean;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å…ˆä»ç¼“å­˜ä¸­å–æ˜¯å¦å·²ç»æœ‰è¢«åˆ›å»ºè¿‡çš„å•æ€ç±»å‹çš„Beanï¼Œå¯¹äºå•æ€æ¨¡å¼çš„Beanæ•´
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//ä¸ªIoCå®¹å™¨ä¸­åªåˆ›å»ºä¸€æ¬¡ï¼Œä¸éœ€è¦é‡å¤åˆ›å»º
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Object sharedInstance = getSingleton(beanName);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//IoCå®¹å™¨åˆ›å»ºå•æ€æ¨¡å¼Beanå®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (sharedInstance != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; args == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœæŒ‡å®šåç§°çš„Beanåœ¨å®¹å™¨ä¸­å·²æœ‰å•æ€æ¨¡å¼çš„Beanè¢«åˆ›å»ºï¼Œç›´æ¥è¿”å›
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//å·²ç»åˆ›å»ºçš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (isSingletonCurrentlyInCreation(beanName)) {
</span></span><span style="display:flex;"><span>                logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Returning eagerly cached instance of singleton bean &#39;&#34;</span> + beanName +
</span></span><span style="display:flex;"><span>                             <span style="color:#0ff;font-weight:bold">&#34;&#39; that is not fully initialized yet - a consequence of a circular reference&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Returning cached instance of singleton bean &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡ï¼Œä¸»è¦æ˜¯å®ŒæˆFactoryBeançš„ç›¸å…³å¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//æ³¨æ„ï¼šBeanFactoryæ˜¯ç®¡ç†å®¹å™¨ä¸­Beançš„å·¥å‚ï¼Œè€ŒFactoryBeanæ˜¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//åˆ›å»ºåˆ›å»ºå¯¹è±¡çš„å·¥å‚Beanï¼Œä¸¤è€…ä¹‹é—´æœ‰åŒºåˆ«
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        bean = getObjectForBeanInstance(sharedInstance, name, beanName, <span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {<span style="color:#007f7f">//ç¼“å­˜æ²¡æœ‰æ­£åœ¨åˆ›å»ºçš„å•æ€æ¨¡å¼Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ç¼“å­˜ä¸­å·²ç»æœ‰å·²ç»åˆ›å»ºçš„åŸå‹æ¨¡å¼Beanï¼Œä½†æ˜¯ç”±äºå¾ªç¯å¼•ç”¨çš„é—®é¢˜å¯¼è‡´å®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//ä¾‹åŒ–å¯¹è±¡å¤±è´¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (isPrototypeCurrentlyInCreation(beanName)) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCurrentlyInCreationException(beanName);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹IoCå®¹å™¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šåç§°çš„BeanDefinitionè¿›è¡Œæ£€æŸ¥ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//èƒ½åœ¨å½“å‰çš„BeanFactoryä¸­è·å–çš„æ‰€éœ€è¦çš„Beanï¼Œå¦‚æœä¸èƒ½åˆ™å§”æ‰˜å½“å‰å®¹å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//çš„çˆ¶çº§å®¹å™¨å»æŸ¥æ‰¾ï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°åˆ™æ²¿ç€å®¹å™¨çš„ç»§æ‰¿ä½“ç³»å‘çˆ¶çº§å®¹å™¨æŸ¥æ‰¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        BeanFactory parentBeanFactory = getParentBeanFactory();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å½“å‰å®¹å™¨çš„çˆ¶çº§å®¹å™¨å­˜åœ¨ï¼Œä¸”å½“å‰å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šåç§°çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (parentBeanFactory != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; !containsBeanDefinition(beanName)) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è§£ææŒ‡å®šBeanåç§°çš„åŸå§‹åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            String nameToLookup = originalBeanName(name);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (args != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å§”æ´¾çˆ¶çº§å®¹å™¨æ ¹æ®æŒ‡å®šåç§°å’Œæ˜¾å¼çš„å‚æ•°æŸ¥æ‰¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">return</span> (T) parentBeanFactory.<span style="color:#007f7f">getBean</span>(nameToLookup, args);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å§”æ´¾çˆ¶çº§å®¹å™¨æ ¹æ®æŒ‡å®šåç§°å’Œç±»å‹æŸ¥æ‰¾
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">return</span> parentBeanFactory.<span style="color:#007f7f">getBean</span>(nameToLookup, requiredType);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºçš„Beanæ˜¯å¦éœ€è¦è¿›è¡Œç±»å‹éªŒè¯ï¼Œä¸€èˆ¬ä¸éœ€è¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (!typeCheckOnly) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å‘å®¹å™¨æ ‡è®°æŒ‡å®šçš„Beanå·²ç»è¢«åˆ›å»º
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            markBeanAsCreated(beanName);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ ¹æ®æŒ‡å®šBeanåç§°è·å–å…¶çˆ¶çº§çš„Beanå®šä¹‰ï¼Œä¸»è¦è§£å†³Beanç»§æ‰¿æ—¶å­ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//åˆå¹¶çˆ¶ç±»å…¬å…±å±æ€§é—®é¢˜
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">final</span> RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);
</span></span><span style="display:flex;"><span>        checkMergedBeanDefinition(mbd, beanName, args);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–å½“å‰Beanæ‰€æœ‰ä¾èµ–Beançš„åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String[] dependsOn = mbd.<span style="color:#007f7f">getDependsOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå½“å‰Beanæœ‰ä¾èµ–Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (dependsOn != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (String dependsOnBean : dependsOn) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//é€’å½’è°ƒç”¨getBeanæ–¹æ³•ï¼Œè·å–å½“å‰Beançš„ä¾èµ–Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                getBean(dependsOnBean);
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//æŠŠè¢«ä¾èµ–Beanæ³¨å†Œç»™å½“å‰ä¾èµ–çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                registerDependentBean(dependsOnBean, beanName);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºå•æ€æ¨¡å¼Beançš„å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">isSingleton</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œåˆ›å»ºBeanå®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”æ³¨å†Œç»™æ‰€ä¾èµ–çš„å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            sharedInstance = getSingleton(beanName, <span style="color:#fff;font-weight:bold">new</span> ObjectFactory() {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">public</span> Object getObject() <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">//åˆ›å»ºä¸€ä¸ªæŒ‡å®šBeanå®ä¾‹å¯¹è±¡ï¼Œå¦‚æœæœ‰çˆ¶çº§ç»§æ‰¿ï¼Œåˆ™åˆå¹¶å­//ç±»å’Œçˆ¶ç±»çš„å®šä¹‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        <span style="color:#fff;font-weight:bold">return</span> createBean(beanName, mbd, args);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">//æ˜¾å¼åœ°ä»å®¹å™¨å•æ€æ¨¡å¼Beanç¼“å­˜ä¸­æ¸…é™¤å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        destroySingleton(beanName);
</span></span><span style="display:flex;"><span>                        <span style="color:#fff;font-weight:bold">throw</span> ex;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//IoCå®¹å™¨åˆ›å»ºåŸå‹æ¨¡å¼Beanå®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">isPrototype</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åŸå‹æ¨¡å¼(Prototype)æ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Object prototypeInstance = <span style="color:#fff;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å›è°ƒbeforePrototypeCreationæ–¹æ³•ï¼Œé»˜è®¤çš„åŠŸèƒ½æ˜¯æ³¨å†Œå½“å‰åˆ›//å»ºçš„åŸå‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                beforePrototypeCreation(beanName);
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//åˆ›å»ºæŒ‡å®šBeanå¯¹è±¡å®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                prototypeInstance = createBean(beanName, mbd, args);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å›è°ƒafterPrototypeCreationæ–¹æ³•ï¼Œé»˜è®¤çš„åŠŸèƒ½å‘Šè¯‰IoCå®¹å™¨æŒ‡//å®šBeançš„åŸå‹å¯¹è±¡ä¸å†åˆ›å»ºäº†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                afterPrototypeCreation(beanName);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è¦åˆ›å»ºçš„Beanæ—¢ä¸æ˜¯å•æ€æ¨¡å¼ï¼Œä¹Ÿä¸æ˜¯åŸå‹æ¨¡å¼ï¼Œåˆ™æ ¹æ®Beanå®šä¹‰èµ„æºä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//é…ç½®çš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´ï¼Œé€‰æ‹©å®ä¾‹åŒ–Beançš„åˆé€‚æ–¹æ³•ï¼Œè¿™ç§åœ¨Webåº”ç”¨ç¨‹åºä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//æ¯”è¾ƒå¸¸ç”¨ï¼Œå¦‚ï¼šrequestã€sessionã€applicationç­‰ç”Ÿå‘½å‘¨æœŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            String scopeName = mbd.<span style="color:#007f7f">getScope</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">final</span> Scope scope = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">scopes</span>.<span style="color:#007f7f">get</span>(scopeName);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//Beanå®šä¹‰èµ„æºä¸­æ²¡æœ‰é…ç½®ç”Ÿå‘½å‘¨æœŸèŒƒå›´ï¼Œåˆ™Beanå®šä¹‰ä¸åˆæ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (scope == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> IllegalStateException(<span style="color:#0ff;font-weight:bold">&#34;No Scope registered for scope &#39;&#34;</span> + scopeName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è¿™é‡Œåˆä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œè·å–ä¸€ä¸ªæŒ‡å®šç”Ÿå‘½å‘¨æœŸèŒƒå›´çš„å®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                Object scopedInstance = scope.<span style="color:#007f7f">get</span>(beanName, <span style="color:#fff;font-weight:bold">new</span> ObjectFactory() {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">public</span> Object getObject() <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>                        beforePrototypeCreation(beanName);
</span></span><span style="display:flex;"><span>                        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                            <span style="color:#fff;font-weight:bold">return</span> createBean(beanName, mbd, args);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#fff;font-weight:bold">finally</span> {
</span></span><span style="display:flex;"><span>                            afterPrototypeCreation(beanName);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">catch</span> (IllegalStateException ex) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(beanName,
</span></span><span style="display:flex;"><span>                                                <span style="color:#0ff;font-weight:bold">&#34;Scope &#39;&#34;</span> + scopeName + <span style="color:#0ff;font-weight:bold">&#34;&#39; is not active for the current thread; &#34;</span> +
</span></span><span style="display:flex;"><span>                                                <span style="color:#0ff;font-weight:bold">&#34;consider defining a scoped proxy for this bean if you intend to refer to it from a singleton&#34;</span>,
</span></span><span style="display:flex;"><span>                                                ex);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹åˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡è¿›è¡Œç±»å‹æ£€æŸ¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (requiredType != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; bean != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; !requiredType.<span style="color:#007f7f">isAssignableFrom</span>(bean.<span style="color:#007f7f">getClass</span>())) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.<span style="color:#007f7f">getClass</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> (T) bean;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢å¯¹å‘IoCå®¹å™¨è·å–Beanæ–¹æ³•çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨Springä¸­ï¼Œå¦‚æœBeanå®šä¹‰çš„å•æ€æ¨¡å¼(Singleton)ï¼Œåˆ™å®¹å™¨åœ¨åˆ›å»ºä¹‹å‰å…ˆä»ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œä»¥ç¡®ä¿æ•´ä¸ªå®¹å™¨ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚
å¦‚æœBeanå®šä¹‰çš„æ˜¯åŸå‹æ¨¡å¼(Prototype)ï¼Œåˆ™å®¹å™¨æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒBeanå®šä¹‰è¿˜å¯ä»¥æ‰©å±•ä¸ºæŒ‡å®šå…¶ç”Ÿå‘½å‘¨æœŸèŒƒå›´ã€‚</p>
<p>ä¸Šé¢çš„æºç åªæ˜¯å®šä¹‰äº†æ ¹æ®Beanå®šä¹‰çš„æ¨¡å¼ï¼Œé‡‡å–çš„ä¸åŒåˆ›å»ºBeanå®ä¾‹å¯¹è±¡çš„ç­–ç•¥ï¼Œå…·ä½“çš„Beanå®ä¾‹å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ç”±å®ç°äº†ObejctFactoryæ¥å£çš„åŒ¿åå†…éƒ¨ç±»çš„createBeanæ–¹æ³•å®Œæˆï¼ŒObejctFactoryä½¿ç”¨å§”æ´¾æ¨¡å¼ï¼Œå…·ä½“çš„Beanå®ä¾‹åˆ›å»ºè¿‡ç¨‹äº¤ç”±å…¶å®ç°ç±»AbstractAutowireCapableBeanFactoryå®Œæˆï¼Œæˆ‘ä»¬ç»§ç»­åˆ†æAbstractAutowireCapableBeanFactoryçš„createBeanæ–¹æ³•çš„æºç ï¼Œç†è§£å…¶åˆ›å»ºBeanå®ä¾‹çš„å…·ä½“å®ç°è¿‡ç¨‹ã€‚</p>
<h2 id="abstractautowirecapablebeanfactoryåˆ›å»ºbeanå®ä¾‹å¯¹è±¡">AbstractAutowireCapableBeanFactoryåˆ›å»ºBeanå®ä¾‹å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#abstractautowirecapablebeanfactoryåˆ›å»ºbeanå®ä¾‹å¯¹è±¡">#</a></h2>
<p>AbstractAutowireCapableBeanFactoryç±»å®ç°äº†ObejctFactoryæ¥å£ï¼Œåˆ›å»ºå®¹å™¨æŒ‡å®šçš„Beanå®ä¾‹å¯¹è±¡ï¼ŒåŒæ—¶è¿˜å¯¹åˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–å¤„ç†ã€‚å…¶åˆ›å»ºBeanå®ä¾‹å¯¹è±¡çš„æ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºBeanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object createBean(<span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> RootBeanDefinition mbd, <span style="color:#fff;font-weight:bold">final</span> Object[] args)  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">throws</span> BeanCreationException {  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Creating instance of bean &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ¤æ–­éœ€è¦åˆ›å»ºçš„Beanæ˜¯å¦å¯ä»¥å®ä¾‹åŒ–ï¼Œå³æ˜¯å¦å¯ä»¥é€šè¿‡å½“å‰çš„ç±»åŠ è½½å™¨åŠ è½½  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    resolveBeanClass(mbd, beanName);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ ¡éªŒå’Œå‡†å¤‡Beanä¸­çš„æ–¹æ³•è¦†ç›–  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>        mbd.<span style="color:#007f7f">prepareMethodOverrides</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionValidationException ex) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionStoreException(mbd.<span style="color:#007f7f">getResourceDescription</span>(),  
</span></span><span style="display:flex;"><span>                                               beanName, <span style="color:#0ff;font-weight:bold">&#34;Validation of method overrides failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœBeané…ç½®äº†åˆå§‹åŒ–å‰å’Œåˆå§‹åŒ–åçš„å¤„ç†å™¨ï¼Œåˆ™è¯•å›¾è¿”å›ä¸€ä¸ªéœ€è¦åˆ›å»º//Beançš„ä»£ç†å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Object bean = resolveBeforeInstantiation(beanName, mbd);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (bean != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> bean;  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName,  
</span></span><span style="display:flex;"><span>                                        <span style="color:#0ff;font-weight:bold">&#34;BeanPostProcessor before instantiation of bean failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºBeançš„å…¥å£  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Object beanInstance = doCreateBean(beanName, mbd, args);  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>        logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Finished creating instance of bean &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> beanInstance;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//çœŸæ­£åˆ›å»ºBeançš„æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object doCreateBean(<span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> RootBeanDefinition mbd, <span style="color:#fff;font-weight:bold">final</span> Object[] args) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å°è£…è¢«åˆ›å»ºçš„Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BeanWrapper instanceWrapper = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">isSingleton</span>()){<span style="color:#007f7f">//å•æ€æ¨¡å¼çš„Beanï¼Œå…ˆä»å®¹å™¨ä¸­ç¼“å­˜ä¸­è·å–åŒåBean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        instanceWrapper = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">factoryBeanInstanceCache</span>.<span style="color:#007f7f">remove</span>(beanName);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (instanceWrapper == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        instanceWrapper = createBeanInstance(beanName, mbd, args);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">final</span> Object bean = (instanceWrapper != <span style="color:#fff;font-weight:bold">null</span> ? instanceWrapper.<span style="color:#007f7f">getWrappedInstance</span>() : <span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–å®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Class beanType = (instanceWrapper != <span style="color:#fff;font-weight:bold">null</span> ? instanceWrapper.<span style="color:#007f7f">getWrappedClass</span>() : <span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è°ƒç”¨PostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">synchronized</span> (mbd.<span style="color:#007f7f">postProcessingLock</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!mbd.<span style="color:#007f7f">postProcessed</span>) {  
</span></span><span style="display:flex;"><span>            applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);  
</span></span><span style="display:flex;"><span>            mbd.<span style="color:#007f7f">postProcessed</span> = <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Eagerly cache singletons to be able to resolve circular references  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//å‘å®¹å™¨ä¸­ç¼“å­˜å•æ€æ¨¡å¼çš„Beanå¯¹è±¡ï¼Œä»¥é˜²å¾ªç¯å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> earlySingletonExposure = (mbd.<span style="color:#007f7f">isSingleton</span>() &amp;&amp; <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">allowCircularReferences</span> &amp;&amp;  
</span></span><span style="display:flex;"><span>                                      isSingletonCurrentlyInCreation(beanName));  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (earlySingletonExposure) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>            logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Eagerly caching bean &#39;&#34;</span> + beanName +  
</span></span><span style="display:flex;"><span>                         <span style="color:#0ff;font-weight:bold">&#34;&#39; to allow for resolving potential circular references&#34;</span>);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è¿™é‡Œæ˜¯ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œä¸ºäº†é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œå°½æ—©æŒæœ‰å¯¹è±¡çš„å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        addSingletonFactory(beanName, <span style="color:#fff;font-weight:bold">new</span> ObjectFactory() {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">public</span> Object getObject() <span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> getEarlyBeanReference(beanName, mbd, bean);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        });  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Beanå¯¹è±¡çš„åˆå§‹åŒ–ï¼Œä¾èµ–æ³¨å…¥åœ¨æ­¤è§¦å‘  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//è¿™ä¸ªexposedObjectåœ¨åˆå§‹åŒ–å®Œæˆä¹‹åè¿”å›ä½œä¸ºä¾èµ–æ³¨å…¥å®Œæˆåçš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Object exposedObject = bean;  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å°†Beanå®ä¾‹å¯¹è±¡å°è£…ï¼Œå¹¶ä¸”Beanå®šä¹‰ä¸­é…ç½®çš„å±æ€§å€¼èµ‹å€¼ç»™å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        populateBean(beanName, mbd, instanceWrapper);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (exposedObject != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åˆå§‹åŒ–Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            exposedObject = initializeBean(beanName, exposedObject, mbd);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (ex <span style="color:#fff;font-weight:bold">instanceof</span> BeanCreationException &amp;&amp; beanName.<span style="color:#007f7f">equals</span>(((BeanCreationException) ex).<span style="color:#007f7f">getBeanName</span>())) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> (BeanCreationException) ex;  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Initialization of bean failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (earlySingletonExposure) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–æŒ‡å®šåç§°çš„å·²æ³¨å†Œçš„å•æ€æ¨¡å¼Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Object earlySingletonReference = getSingleton(beanName, <span style="color:#fff;font-weight:bold">false</span>);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (earlySingletonReference != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//æ ¹æ®åç§°è·å–çš„ä»¥æ³¨å†Œçš„Beanå’Œæ­£åœ¨å®ä¾‹åŒ–çš„Beanæ˜¯åŒä¸€ä¸ª  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (exposedObject == bean) {  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å½“å‰å®ä¾‹åŒ–çš„Beanåˆå§‹åŒ–å®Œæˆ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                exposedObject = earlySingletonReference;  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å½“å‰Beanä¾èµ–å…¶ä»–Beanï¼Œå¹¶ä¸”å½“å‘ç”Ÿå¾ªç¯å¼•ç”¨æ—¶ä¸å…è®¸æ–°åˆ›å»ºå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">allowRawInjectionDespiteWrapping</span> &amp;&amp; hasDependentBean(beanName)) {  
</span></span><span style="display:flex;"><span>                String[] dependentBeans = getDependentBeans(beanName);  
</span></span><span style="display:flex;"><span>                Set&lt;String&gt; actualDependentBeans = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;String&gt;(dependentBeans.<span style="color:#007f7f">length</span>);  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//è·å–å½“å‰Beanæ‰€ä¾èµ–çš„å…¶ä»–Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">for</span> (String dependentBean : dependentBeans) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//å¯¹ä¾èµ–Beanè¿›è¡Œç±»å‹æ£€æŸ¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    <span style="color:#fff;font-weight:bold">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) {  
</span></span><span style="display:flex;"><span>                        actualDependentBeans.<span style="color:#007f7f">add</span>(dependentBean);  
</span></span><span style="display:flex;"><span>                    }  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (!actualDependentBeans.<span style="color:#007f7f">isEmpty</span>()) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCurrentlyInCreationException(beanName,  
</span></span><span style="display:flex;"><span>                                                               <span style="color:#0ff;font-weight:bold">&#34;Bean with name &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39; has been injected into other beans [&#34;</span> +  
</span></span><span style="display:flex;"><span>                                                               StringUtils.<span style="color:#007f7f">collectionToCommaDelimitedString</span>(actualDependentBeans) +  
</span></span><span style="display:flex;"><span>                                                               <span style="color:#0ff;font-weight:bold">&#34;] in its raw version as part of a circular reference, but has eventually been &#34;</span> +  
</span></span><span style="display:flex;"><span>                                                               <span style="color:#0ff;font-weight:bold">&#34;wrapped. This means that said other beans do not use the final version of the &#34;</span> +  
</span></span><span style="display:flex;"><span>                                                               <span style="color:#0ff;font-weight:bold">&#34;bean. This is often the result of over-eager type matching - consider using &#34;</span> +  
</span></span><span style="display:flex;"><span>                                                               <span style="color:#0ff;font-weight:bold">&#34;&#39;getBeanNamesOfType&#39; with the &#39;allowEagerInit&#39; flag turned off, for example.&#34;</span>);  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ³¨å†Œå®Œæˆä¾èµ–æ³¨å…¥çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>        registerDisposableBeanIfNecessary(beanName, bean, mbd);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (BeanDefinitionValidationException ex) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Invalid destruction signature&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> exposedObject;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡å¯¹æ–¹æ³•æºç çš„åˆ†æï¼Œæˆ‘ä»¬çœ‹åˆ°å…·ä½“çš„ä¾èµ–æ³¨å…¥å®ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ä¸­ï¼š</p>
<ul>
<li>createBeanInstanceï¼šç”ŸæˆBeanæ‰€åŒ…å«çš„javaå¯¹è±¡å®ä¾‹ã€‚</li>
<li>populateBean ï¼šå¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
<h2 id="createbeaninstanceæ–¹æ³•åˆ›å»ºbeançš„javaå®ä¾‹å¯¹è±¡">createBeanInstanceæ–¹æ³•åˆ›å»ºBeançš„javaå®ä¾‹å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#createbeaninstanceæ–¹æ³•åˆ›å»ºbeançš„javaå®ä¾‹å¯¹è±¡">#</a></h2>
<p>åœ¨createBeanInstanceæ–¹æ³•ä¸­ï¼Œæ ¹æ®æŒ‡å®šçš„åˆå§‹åŒ–ç­–ç•¥ï¼Œä½¿ç”¨é™æ€å·¥å‚ã€å·¥å‚æ–¹æ³•æˆ–è€…å®¹å™¨çš„è‡ªåŠ¨è£…é…ç‰¹æ€§ç”Ÿæˆjavaå®ä¾‹å¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡çš„æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºBeançš„å®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ£€æŸ¥ç¡®è®¤Beanæ˜¯å¯å®ä¾‹åŒ–çš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Class beanClass = resolveBeanClass(mbd, beanName);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨å·¥å‚æ–¹æ³•å¯¹Beanè¿›è¡Œå®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (beanClass != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; !Modifier.<span style="color:#007f7f">isPublic</span>(beanClass.<span style="color:#007f7f">getModifiers</span>()) &amp;&amp; !mbd.<span style="color:#007f7f">isNonPublicAccessAllowed</span>()) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName,
</span></span><span style="display:flex;"><span>                                        <span style="color:#0ff;font-weight:bold">&#34;Bean class isn&#39;t public, and non-public access not allowed: &#34;</span> + beanClass.<span style="color:#007f7f">getName</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getFactoryMethodName</span>() != <span style="color:#fff;font-weight:bold">null</span>)  {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è°ƒç”¨å·¥å‚æ–¹æ³•å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> instantiateUsingFactoryMethod(beanName, mbd, args);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨å®¹å™¨çš„è‡ªåŠ¨è£…é…æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> resolved = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> autowireNecessary = <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (args == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">synchronized</span> (mbd.<span style="color:#007f7f">constructorArgumentLock</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">resolvedConstructorOrFactoryMethod</span> != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                resolved = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>                autowireNecessary = mbd.<span style="color:#007f7f">constructorArgumentsResolved</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (resolved) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (autowireNecessary) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//é…ç½®äº†è‡ªåŠ¨è£…é…å±æ€§ï¼Œä½¿ç”¨å®¹å™¨çš„è‡ªåŠ¨è£…é…å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//å®¹å™¨çš„è‡ªåŠ¨è£…é…æ˜¯æ ¹æ®å‚æ•°ç±»å‹åŒ¹é…Beançš„æ„é€ æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span> autowireConstructor(beanName, mbd, <span style="color:#fff;font-weight:bold">null</span>, <span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span> instantiateBean(beanName, mbd);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨Beançš„æ„é€ æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Constructor[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (ctors != <span style="color:#fff;font-weight:bold">null</span> ||
</span></span><span style="display:flex;"><span>        mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_CONSTRUCTOR</span> ||
</span></span><span style="display:flex;"><span>        mbd.<span style="color:#007f7f">hasConstructorArgumentValues</span>() || !ObjectUtils.<span style="color:#007f7f">isEmpty</span>(args))  {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä½¿ç”¨å®¹å™¨çš„è‡ªåŠ¨è£…é…ç‰¹æ€§ï¼Œè°ƒç”¨åŒ¹é…çš„æ„é€ æ–¹æ³•å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> autowireConstructor(beanName, mbd, ctors, args);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> instantiateBean(beanName, mbd);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–Beanå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> BeanWrapper instantiateBean(<span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> RootBeanDefinition mbd) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        Object beanInstance;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">final</span> BeanFactory parent = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–ç³»ç»Ÿçš„å®‰å…¨ç®¡ç†æ¥å£ï¼ŒJDKæ ‡å‡†çš„å®‰å…¨ç®¡ç†API
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è¿™é‡Œæ˜¯ä¸€ä¸ªåŒ¿åå†…ç½®ç±»ï¼Œæ ¹æ®å®ä¾‹åŒ–ç­–ç•¥åˆ›å»ºå®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            beanInstance = AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedAction&lt;Object&gt;() {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">public</span> Object run() {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">return</span> getInstantiationStrategy().<span style="color:#007f7f">instantiate</span>(mbd, beanName, parent);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }, getAccessControlContext());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°†å®ä¾‹åŒ–çš„å¯¹è±¡å°è£…èµ·æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            beanInstance = getInstantiationStrategy().<span style="color:#007f7f">instantiate</span>(mbd, beanName, parent);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        BeanWrapper bw = <span style="color:#fff;font-weight:bold">new</span> BeanWrapperImpl(beanInstance);
</span></span><span style="display:flex;"><span>        initBeanWrapper(bw);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> bw;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Instantiation of bean failed&#34;</span>, ex);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»è¿‡å¯¹ä¸Šé¢çš„ä»£ç åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¯¹ä½¿ç”¨å·¥å‚æ–¹æ³•å’Œè‡ªåŠ¨è£…é…ç‰¹æ€§çš„Beançš„å®ä¾‹åŒ–ç›¸å½“æ¯”è¾ƒæ¸…æ¥šï¼Œè°ƒç”¨ç›¸åº”çš„å·¥å‚æ–¹æ³•æˆ–è€…å‚æ•°åŒ¹é…çš„æ„é€ æ–¹æ³•å³å¯å®Œæˆå®ä¾‹åŒ–å¯¹è±¡çš„å·¥ä½œï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„é»˜è®¤æ— å‚æ„é€ æ–¹æ³•å°±éœ€è¦ä½¿ç”¨ç›¸åº”çš„åˆå§‹åŒ–ç­–ç•¥(JDKçš„åå°„æœºåˆ¶æˆ–è€…CGLIB)æ¥è¿›è¡Œåˆå§‹åŒ–äº†ï¼Œåœ¨æ–¹æ³•getInstantiationStrategy().instantiateä¸­å°±å…·ä½“å®ç°ç±»ä½¿ç”¨åˆå§‹ç­–ç•¥å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>
<h2 id="simpleinstantiationstrategyç±»ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºbeanå®ä¾‹åŒ–å¯¹è±¡">SimpleInstantiationStrategyç±»ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºBeanå®ä¾‹åŒ–å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#simpleinstantiationstrategyç±»ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºbeanå®ä¾‹åŒ–å¯¹è±¡">#</a></h2>
<p>åœ¨ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºBeançš„å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œæ–¹æ³•getInstantiationStrategy().instantiateè°ƒç”¨äº†SimpleInstantiationStrategyç±»ä¸­çš„å®ä¾‹åŒ–Beançš„æ–¹æ³•ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨åˆå§‹åŒ–ç­–ç•¥å®ä¾‹åŒ–Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object instantiate(RootBeanDefinition beanDefinition, String beanName, BeanFactory owner) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¦‚æœBeanå®šä¹‰ä¸­æ²¡æœ‰æ–¹æ³•è¦†ç›–ï¼Œåˆ™å°±ä¸éœ€è¦CGLIBçˆ¶ç±»ç±»çš„æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (beanDefinition.<span style="color:#007f7f">getMethodOverrides</span>().<span style="color:#007f7f">isEmpty</span>()) {  
</span></span><span style="display:flex;"><span>        Constructor&lt;?&gt; constructorToUse;  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">synchronized</span> (beanDefinition.<span style="color:#007f7f">constructorArgumentLock</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–å¯¹è±¡çš„æ„é€ æ–¹æ³•æˆ–å·¥å‚æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            constructorToUse = (Constructor&lt;?&gt;) beanDefinition.<span style="color:#007f7f">resolvedConstructorOrFactoryMethod</span>;  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å¦‚æœæ²¡æœ‰æ„é€ æ–¹æ³•ä¸”æ²¡æœ‰å·¥å‚æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (constructorToUse == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä½¿ç”¨JDKçš„åå°„æœºåˆ¶ï¼Œåˆ¤æ–­è¦å®ä¾‹åŒ–çš„Beanæ˜¯å¦æ˜¯æ¥å£  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">final</span> Class clazz = beanDefinition.<span style="color:#007f7f">getBeanClass</span>();  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (clazz.<span style="color:#007f7f">isInterface</span>()) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanInstantiationException(clazz, <span style="color:#0ff;font-weight:bold">&#34;Specified class is an interface&#34;</span>);  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">//è¿™é‡Œæ˜¯ä¸€ä¸ªåŒ¿åå†…ç½®ç±»ï¼Œä½¿ç”¨åå°„æœºåˆ¶è·å–Beançš„æ„é€ æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                        constructorToUse = AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedExceptionAction&lt;Constructor&gt;() {  
</span></span><span style="display:flex;"><span>                            <span style="color:#fff;font-weight:bold">public</span> Constructor run() <span style="color:#fff;font-weight:bold">throws</span> Exception {  
</span></span><span style="display:flex;"><span>                                <span style="color:#fff;font-weight:bold">return</span> clazz.<span style="color:#007f7f">getDeclaredConstructor</span>((Class[]) <span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>                            }  
</span></span><span style="display:flex;"><span>                        });  
</span></span><span style="display:flex;"><span>                    }  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>                        constructorToUse =  clazz.<span style="color:#007f7f">getDeclaredConstructor</span>((Class[]) <span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>                    }  
</span></span><span style="display:flex;"><span>                    beanDefinition.<span style="color:#007f7f">resolvedConstructorOrFactoryMethod</span> = constructorToUse;  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanInstantiationException(clazz, <span style="color:#0ff;font-weight:bold">&#34;No default constructor found&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä½¿ç”¨BeanUtilså®ä¾‹åŒ–ï¼Œé€šè¿‡åå°„æœºåˆ¶è°ƒç”¨â€æ„é€ æ–¹æ³•.newInstance(arg)â€æ¥è¿›è¡Œå®ä¾‹åŒ–  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> BeanUtils.<span style="color:#007f7f">instantiateClass</span>(constructorToUse);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä½¿ç”¨CGLIBæ¥å®ä¾‹åŒ–å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> instantiateWithMethodInjection(beanDefinition, beanName, owner);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢çš„ä»£ç åˆ†æï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚æœBeanæœ‰æ–¹æ³•è¢«è¦†ç›–äº†ï¼Œåˆ™ä½¿ç”¨JDKçš„åå°„æœºåˆ¶è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¦åˆ™ï¼Œä½¿ç”¨CGLIBè¿›è¡Œå®ä¾‹åŒ–ã€‚
instantiateWithMethodInjectionæ–¹æ³•è°ƒç”¨SimpleInstantiationStrategyçš„å­ç±»
CglibSubclassingInstantiationStrategyä½¿ç”¨CGLIBæ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨CGLIBè¿›è¡ŒBeanå¯¹è±¡å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object instantiate(Constructor ctor, Object[] args) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//CGLIBä¸­çš„ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Enhancer enhancer = <span style="color:#fff;font-weight:bold">new</span> Enhancer();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å°†Beanæœ¬èº«ä½œä¸ºå…¶åŸºç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    enhancer.<span style="color:#007f7f">setSuperclass</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinition</span>.<span style="color:#007f7f">getBeanClass</span>());
</span></span><span style="display:flex;"><span>    enhancer.<span style="color:#007f7f">setCallbackFilter</span>(<span style="color:#fff;font-weight:bold">new</span> CallbackFilterImpl());
</span></span><span style="display:flex;"><span>    enhancer.<span style="color:#007f7f">setCallbacks</span>(<span style="color:#fff;font-weight:bold">new</span> Callback[] {
</span></span><span style="display:flex;"><span>        NoOp.<span style="color:#007f7f">INSTANCE</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> LookupOverrideMethodInterceptor(),
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> ReplaceOverrideMethodInterceptor()
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä½¿ç”¨CGLIBçš„createæ–¹æ³•ç”Ÿæˆå®ä¾‹å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> (ctor == <span style="color:#fff;font-weight:bold">null</span>) ?
</span></span><span style="display:flex;"><span>        enhancer.<span style="color:#007f7f">create</span>() :
</span></span><span style="display:flex;"><span>    enhancer.<span style="color:#007f7f">create</span>(ctor.<span style="color:#007f7f">getParameterTypes</span>(), args);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>CGLIBæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å­—èŠ‚ç ç”Ÿæˆå™¨çš„ç±»åº“ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—APIå®ç°javaå­—èŠ‚ç çš„ç”Ÿæˆå’Œè½¬æ¢åŠŸèƒ½ã€‚æˆ‘ä»¬åœ¨å­¦ä¹ JDKçš„åŠ¨æ€ä»£ç†æ—¶éƒ½çŸ¥é“ï¼ŒJDKçš„åŠ¨æ€ä»£ç†åªèƒ½é’ˆå¯¹æ¥å£ï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œè¦å¯¹å…¶è¿›è¡ŒåŠ¨æ€ä»£ç†åªèƒ½ä½¿ç”¨CGLIBã€‚</p>
<h2 id="populatebeanæ–¹æ³•å¯¹beanå±æ€§çš„ä¾èµ–æ³¨å…¥">populateBeanæ–¹æ³•å¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#populatebeanæ–¹æ³•å¯¹beanå±æ€§çš„ä¾èµ–æ³¨å…¥">#</a></h2>
<p>åœ¨ç¬¬3æ­¥çš„åˆ†æä¸­æˆ‘ä»¬å·²ç»äº†è§£åˆ°Beançš„ä¾èµ–æ³¨å…¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªè¿‡ç¨‹ï¼š</p>
<ul>
<li>createBeanInstanceï¼šç”ŸæˆBeanæ‰€åŒ…å«çš„javaå¯¹è±¡å®ä¾‹ã€‚</li>
<li>populateBean ï¼šå¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
<p>ç¬¬4ã€5æ­¥ä¸­æˆ‘ä»¬å·²ç»åˆ†æäº†å®¹å™¨åˆå§‹åŒ–ç”ŸæˆBeanæ‰€åŒ…å«çš„Javaå®ä¾‹å¯¹è±¡çš„è¿‡ç¨‹ï¼Œç°åœ¨æˆ‘ä»¬ç»§ç»­åˆ†æç”Ÿæˆå¯¹è±¡åï¼ŒSpring IoCå®¹å™¨æ˜¯å¦‚ä½•å°†Beançš„å±æ€§ä¾èµ–å…³ç³»æ³¨å…¥Beanå®ä¾‹å¯¹è±¡ä¸­å¹¶è®¾ç½®å¥½çš„ï¼Œå±æ€§ä¾èµ–æ³¨å…¥çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å°†Beanå±æ€§è®¾ç½®åˆ°ç”Ÿæˆçš„å®ä¾‹å¯¹è±¡ä¸Š  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> populateBean(String beanName, AbstractBeanDefinition mbd, BeanWrapper bw) {  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–å®¹å™¨åœ¨è§£æBeanå®šä¹‰èµ„æºæ—¶ä¸ºBeanDefinitonä¸­è®¾ç½®çš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    PropertyValues pvs = mbd.<span style="color:#007f7f">getPropertyValues</span>();  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å®ä¾‹å¯¹è±¡ä¸ºnull  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (bw == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å±æ€§å€¼ä¸ä¸ºç©º  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (!pvs.<span style="color:#007f7f">isEmpty</span>()) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(  
</span></span><span style="display:flex;"><span>                mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Cannot apply property values to null instance&#34;</span>);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å®ä¾‹å¯¹è±¡ä¸ºnullï¼Œå±æ€§å€¼ä¹Ÿä¸ºç©ºï¼Œä¸éœ€è¦è®¾ç½®å±æ€§å€¼ï¼Œç›´æ¥è¿”å›  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åœ¨è®¾ç½®å±æ€§ä¹‹å‰è°ƒç”¨Beançš„PostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> continueWithPropertyPopulation = <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!mbd.<span style="color:#007f7f">isSynthetic</span>() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (bp <span style="color:#fff;font-weight:bold">instanceof</span> InstantiationAwareBeanPostProcessor) {  
</span></span><span style="display:flex;"><span>                InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (!ibp.<span style="color:#007f7f">postProcessAfterInstantiation</span>(bw.<span style="color:#007f7f">getWrappedInstance</span>(), beanName)) {  
</span></span><span style="display:flex;"><span>                    continueWithPropertyPopulation = <span style="color:#fff;font-weight:bold">false</span>;  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">break</span>;  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!continueWithPropertyPopulation) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä¾èµ–æ³¨å…¥å¼€å§‹ï¼Œé¦–å…ˆå¤„ç†autowireè‡ªåŠ¨è£…é…çš„æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_NAME</span> ||  
</span></span><span style="display:flex;"><span>        mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_TYPE</span>) {  
</span></span><span style="display:flex;"><span>        MutablePropertyValues newPvs = <span style="color:#fff;font-weight:bold">new</span> MutablePropertyValues(pvs);  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¯¹autowireè‡ªåŠ¨è£…é…çš„å¤„ç†ï¼Œæ ¹æ®Beanåç§°è‡ªåŠ¨è£…é…æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_NAME</span>) {  
</span></span><span style="display:flex;"><span>            autowireByName(beanName, mbd, bw, newPvs);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ ¹æ®Beanç±»å‹è‡ªåŠ¨è£…é…æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_TYPE</span>) {  
</span></span><span style="display:flex;"><span>            autowireByType(beanName, mbd, bw, newPvs);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        pvs = newPvs;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//æ£€æŸ¥å®¹å™¨æ˜¯å¦æŒæœ‰ç”¨äºå¤„ç†å•æ€æ¨¡å¼Beanå…³é—­æ—¶çš„åç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Beanå®ä¾‹å¯¹è±¡æ²¡æœ‰ä¾èµ–ï¼Œå³æ²¡æœ‰ç»§æ‰¿åŸºç±»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> needsDepCheck = (mbd.<span style="color:#007f7f">getDependencyCheck</span>() != RootBeanDefinition.<span style="color:#007f7f">DEPENDENCY_CHECK_NONE</span>);  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (hasInstAwareBpps || needsDepCheck) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä»å®ä¾‹å¯¹è±¡ä¸­æå–å±æ€§æè¿°ç¬¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw);  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (hasInstAwareBpps) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (bp <span style="color:#fff;font-weight:bold">instanceof</span> InstantiationAwareBeanPostProcessor) {  
</span></span><span style="display:flex;"><span>                    InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;  
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//ä½¿ç”¨BeanPostProcessorå¤„ç†å™¨å¤„ç†å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    pvs = ibp.<span style="color:#007f7f">postProcessPropertyValues</span>(pvs, filteredPds, bw.<span style="color:#007f7f">getWrappedInstance</span>(), beanName);  
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">if</span> (pvs == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>                        <span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>                    }  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (needsDepCheck) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//ä¸ºè¦è®¾ç½®çš„å±æ€§è¿›è¡Œä¾èµ–æ£€æŸ¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            checkDependencies(beanName, mbd, filteredPds, pvs);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹å±æ€§è¿›è¡Œæ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    applyPropertyValues(beanName, mbd, bw, pvs);  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æå¹¶æ³¨å…¥ä¾èµ–å±æ€§çš„è¿‡ç¨‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> applyPropertyValues(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs) {  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (pvs == <span style="color:#fff;font-weight:bold">null</span> || pvs.<span style="color:#007f7f">isEmpty</span>()) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å°è£…å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    MutablePropertyValues mpvs = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>    List&lt;PropertyValue&gt; original;  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>()!= <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (bw <span style="color:#fff;font-weight:bold">instanceof</span> BeanWrapperImpl) {  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è®¾ç½®å®‰å…¨ä¸Šä¸‹æ–‡ï¼ŒJDKå®‰å…¨æœºåˆ¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            ((BeanWrapperImpl) bw).<span style="color:#007f7f">setSecurityContext</span>(getAccessControlContext());  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (pvs <span style="color:#fff;font-weight:bold">instanceof</span> MutablePropertyValues) {  
</span></span><span style="display:flex;"><span>        mpvs = (MutablePropertyValues) pvs;  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å±æ€§å€¼å·²ç»è½¬æ¢  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (mpvs.<span style="color:#007f7f">isConverted</span>()) {  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä¸ºå®ä¾‹åŒ–å¯¹è±¡è®¾ç½®å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                bw.<span style="color:#007f7f">setPropertyValues</span>(mpvs);  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(  
</span></span><span style="display:flex;"><span>                    mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Error setting property values&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–å±æ€§å€¼å¯¹è±¡çš„åŸå§‹ç±»å‹å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        original = mpvs.<span style="color:#007f7f">getPropertyValueList</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>        original = Arrays.<span style="color:#007f7f">asList</span>(pvs.<span style="color:#007f7f">getPropertyValues</span>());  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    TypeConverter converter = getCustomTypeConverter();  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (converter == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>        converter = bw;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºä¸€ä¸ªBeanå®šä¹‰å±æ€§å€¼è§£æå™¨ï¼Œå°†Beanå®šä¹‰ä¸­çš„å±æ€§å€¼è§£æä¸ºBeanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#007f7f">//çš„å®é™…å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    BeanDefinitionValueResolver valueResolver = <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionValueResolver(<span style="color:#fff;font-weight:bold">this</span>, beanName, mbd, converter);  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ä¸ºå±æ€§çš„è§£æå€¼åˆ›å»ºä¸€ä¸ªæ‹·è´ï¼Œå°†æ‹·è´çš„æ•°æ®æ³¨å…¥åˆ°å®ä¾‹å¯¹è±¡ä¸­  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    List&lt;PropertyValue&gt; deepCopy = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;PropertyValue&gt;(original.<span style="color:#007f7f">size</span>());  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">boolean</span> resolveNecessary = <span style="color:#fff;font-weight:bold">false</span>;  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (PropertyValue pv : original) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å±æ€§å€¼ä¸éœ€è¦è½¬æ¢  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (pv.<span style="color:#007f7f">isConverted</span>()) {  
</span></span><span style="display:flex;"><span>            deepCopy.<span style="color:#007f7f">add</span>(pv);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å±æ€§å€¼éœ€è¦è½¬æ¢  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>            String propertyName = pv.<span style="color:#007f7f">getName</span>();  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//åŸå§‹çš„å±æ€§å€¼ï¼Œå³è½¬æ¢ä¹‹å‰çš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Object originalValue = pv.<span style="color:#007f7f">getValue</span>();  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è½¬æ¢å±æ€§å€¼ï¼Œä¾‹å¦‚å°†å¼•ç”¨è½¬æ¢ä¸ºIoCå®¹å™¨ä¸­å®ä¾‹åŒ–å¯¹è±¡å¼•ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Object resolvedValue = valueResolver.<span style="color:#007f7f">resolveValueIfNecessary</span>(pv, originalValue);  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è½¬æ¢ä¹‹åçš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Object convertedValue = resolvedValue;  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å±æ€§å€¼æ˜¯å¦å¯ä»¥è½¬æ¢  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">boolean</span> convertible = bw.<span style="color:#007f7f">isWritableProperty</span>(propertyName) &amp;&amp;  
</span></span><span style="display:flex;"><span>                !PropertyAccessorUtils.<span style="color:#007f7f">isNestedOrIndexedProperty</span>(propertyName);  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (convertible) {  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢å™¨è½¬æ¢å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                convertedValue = convertForProperty(resolvedValue, propertyName, bw, converter);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å­˜å‚¨è½¬æ¢åçš„å±æ€§å€¼ï¼Œé¿å…æ¯æ¬¡å±æ€§æ³¨å…¥æ—¶çš„è½¬æ¢å·¥ä½œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (resolvedValue == originalValue) {  
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (convertible) {  
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//è®¾ç½®å±æ€§è½¬æ¢ä¹‹åçš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    pv.<span style="color:#007f7f">setConvertedValue</span>(convertedValue);  
</span></span><span style="display:flex;"><span>                }  
</span></span><span style="display:flex;"><span>                deepCopy.<span style="color:#007f7f">add</span>(pv);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å±æ€§æ˜¯å¯è½¬æ¢çš„ï¼Œä¸”å±æ€§åŸå§‹å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸”å±æ€§çš„åŸå§‹ç±»å‹å€¼ä¸æ˜¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//åŠ¨æ€ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œä¸”å±æ€§çš„åŸå§‹å€¼ä¸æ˜¯é›†åˆæˆ–è€…æ•°ç»„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (convertible &amp;&amp; originalValue <span style="color:#fff;font-weight:bold">instanceof</span> TypedStringValue &amp;&amp;  
</span></span><span style="display:flex;"><span>                     !((TypedStringValue) originalValue).<span style="color:#007f7f">isDynamic</span>() &amp;&amp;  
</span></span><span style="display:flex;"><span>                     !(convertedValue <span style="color:#fff;font-weight:bold">instanceof</span> Collection || ObjectUtils.<span style="color:#007f7f">isArray</span>(convertedValue))) {  
</span></span><span style="display:flex;"><span>                pv.<span style="color:#007f7f">setConvertedValue</span>(convertedValue);  
</span></span><span style="display:flex;"><span>                deepCopy.<span style="color:#007f7f">add</span>(pv);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>                resolveNecessary = <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//é‡æ–°å°è£…å±æ€§çš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                deepCopy.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">new</span> PropertyValue(pv, convertedValue));  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (mpvs != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; !resolveNecessary) {  
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//æ ‡è®°å±æ€§å€¼å·²ç»è½¬æ¢è¿‡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        mpvs.<span style="color:#007f7f">setConverted</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>        bw.<span style="color:#007f7f">setPropertyValues</span>(<span style="color:#fff;font-weight:bold">new</span> MutablePropertyValues(deepCopy));  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {  
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(  
</span></span><span style="display:flex;"><span>            mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, <span style="color:#0ff;font-weight:bold">&#34;Error setting property values&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ†æä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¯¹å±æ€§çš„æ³¨å…¥è¿‡ç¨‹åˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>å±æ€§å€¼ç±»å‹ä¸éœ€è¦è½¬æ¢æ—¶ï¼Œä¸éœ€è¦è§£æå±æ€§å€¼ï¼Œç›´æ¥å‡†å¤‡è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</li>
<li>å±æ€§å€¼éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼Œå¦‚å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ç­‰ï¼Œé¦–å…ˆéœ€è¦è§£æå±æ€§å€¼ï¼Œç„¶åå¯¹è§£æåçš„å±æ€§å€¼è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚
å¯¹å±æ€§å€¼çš„è§£ææ˜¯åœ¨BeanDefinitionValueResolverç±»ä¸­çš„resolveValueIfNecessaryæ–¹æ³•ä¸­è¿›è¡Œçš„ï¼Œå¯¹å±æ€§å€¼çš„ä¾èµ–æ³¨å…¥æ˜¯é€šè¿‡bw.setPropertyValuesæ–¹æ³•å®ç°çš„ï¼Œåœ¨åˆ†æå±æ€§å€¼çš„ä¾èµ–æ³¨å…¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹å¯¹å±æ€§å€¼çš„è§£æè¿‡ç¨‹ã€‚</li>
</ul>
<h2 id="beandefinitionvalueresolverè§£æå±æ€§å€¼">BeanDefinitionValueResolverè§£æå±æ€§å€¼<a hidden class="anchor" aria-hidden="true" href="#beandefinitionvalueresolverè§£æå±æ€§å€¼">#</a></h2>
<p>å½“å®¹å™¨åœ¨å¯¹å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥æ—¶ï¼Œå¦‚æœå‘ç°å±æ€§å€¼éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦‚å±æ€§å€¼æ˜¯å®¹å™¨ä¸­å¦ä¸€ä¸ªBeanå®ä¾‹å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™å®¹å™¨é¦–å…ˆéœ€è¦æ ¹æ®å±æ€§å€¼è§£æå‡ºæ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰èƒ½å°†è¯¥å¼•ç”¨å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡å®ä¾‹å¯¹è±¡çš„å±æ€§ä¸Šå»ï¼Œå¯¹å±æ€§è¿›è¡Œè§£æçš„ç”±resolveValueIfNecessaryæ–¹æ³•å®ç°ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">188
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//è§£æå±æ€§å€¼ï¼Œå¯¹æ³¨å…¥ç±»å‹è¿›è¡Œè½¬æ¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object resolveValueIfNecessary(Object argName, Object value) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹å¼•ç”¨ç±»å‹çš„å±æ€§è¿›è¡Œè§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> RuntimeBeanReference) {
</span></span><span style="display:flex;"><span>        RuntimeBeanReference ref = (RuntimeBeanReference) value;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è°ƒç”¨å¼•ç”¨ç±»å‹å±æ€§çš„è§£ææ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> resolveReference(argName, ref);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹å±æ€§å€¼æ˜¯å¼•ç”¨å®¹å™¨ä¸­å¦ä¸€ä¸ªBeanåç§°çš„è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> RuntimeBeanNameReference) {
</span></span><span style="display:flex;"><span>        String refName = ((RuntimeBeanNameReference) value).<span style="color:#007f7f">getBeanName</span>();
</span></span><span style="display:flex;"><span>        refName = String.<span style="color:#007f7f">valueOf</span>(evaluate(refName));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä»å®¹å™¨ä¸­è·å–æŒ‡å®šåç§°çš„Bean
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">containsBean</span>(refName)) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanDefinitionStoreException(
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;Invalid bean name &#39;&#34;</span> + refName + <span style="color:#0ff;font-weight:bold">&#34;&#39; in bean reference for &#34;</span> + argName);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> refName;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹Beanç±»å‹å±æ€§çš„è§£æï¼Œä¸»è¦æ˜¯Beanä¸­çš„å†…éƒ¨ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> BeanDefinitionHolder) {
</span></span><span style="display:flex;"><span>        BeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resolveInnerBean(argName, bdHolder.<span style="color:#007f7f">getBeanName</span>(), bdHolder.<span style="color:#007f7f">getBeanDefinition</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> BeanDefinition) {
</span></span><span style="display:flex;"><span>        BeanDefinition bd = (BeanDefinition) value;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resolveInnerBean(argName, <span style="color:#0ff;font-weight:bold">&#34;(inner bean)&#34;</span>, bd);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//å¯¹é›†åˆæ•°ç»„ç±»å‹çš„å±æ€§è§£æ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> ManagedArray) {
</span></span><span style="display:flex;"><span>        ManagedArray array = (ManagedArray) value;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–æ•°ç»„çš„ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Class elementType = array.<span style="color:#007f7f">resolvedElementType</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (elementType == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–æ•°ç»„å…ƒç´ çš„ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            String elementTypeName = array.<span style="color:#007f7f">getElementTypeName</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (StringUtils.<span style="color:#007f7f">hasText</span>(elementTypeName)) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#007f7f">//ä½¿ç”¨åå°„æœºåˆ¶åˆ›å»ºæŒ‡å®šç±»å‹çš„å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    elementType = ClassUtils.<span style="color:#007f7f">forName</span>(elementTypeName, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">getBeanClassLoader</span>());
</span></span><span style="display:flex;"><span>                    array.<span style="color:#007f7f">resolvedElementType</span> = elementType;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(
</span></span><span style="display:flex;"><span>                        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinition</span>.<span style="color:#007f7f">getResourceDescription</span>(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanName</span>,
</span></span><span style="display:flex;"><span>                        <span style="color:#0ff;font-weight:bold">&#34;Error resolving array type for &#34;</span> + argName, ex);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//æ²¡æœ‰è·å–åˆ°æ•°ç»„çš„ç±»å‹ï¼Œä¹Ÿæ²¡æœ‰è·å–åˆ°æ•°ç»„å…ƒç´ çš„ç±»å‹ï¼Œåˆ™ç›´æ¥è®¾ç½®æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#007f7f">//ç»„çš„ç±»å‹ä¸ºObject
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                elementType = Object.<span style="color:#007f7f">class</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºæŒ‡å®šç±»å‹çš„æ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> resolveManagedArray(argName, (List&lt;?&gt;) value, elementType);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£ælistç±»å‹çš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> ManagedList) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resolveManagedList(argName, (List&lt;?&gt;) value);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æsetç±»å‹çš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> ManagedSet) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resolveManagedSet(argName, (Set&lt;?&gt;) value);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æmapç±»å‹çš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> ManagedMap) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> resolveManagedMap(argName, (Map&lt;?, ?&gt;) value);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æpropsç±»å‹çš„å±æ€§å€¼ï¼Œpropså…¶å®å°±æ˜¯keyå’Œvalueå‡ä¸ºå­—ç¬¦ä¸²çš„map
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> ManagedProperties) {
</span></span><span style="display:flex;"><span>        Properties original = (Properties) value;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//åˆ›å»ºä¸€ä¸ªæ‹·è´ï¼Œç”¨äºä½œä¸ºè§£æåçš„è¿”å›å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Properties copy = <span style="color:#fff;font-weight:bold">new</span> Properties();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (Map.<span style="color:#007f7f">Entry</span> propEntry : original.<span style="color:#007f7f">entrySet</span>()) {
</span></span><span style="display:flex;"><span>            Object propKey = propEntry.<span style="color:#007f7f">getKey</span>();
</span></span><span style="display:flex;"><span>            Object propValue = propEntry.<span style="color:#007f7f">getValue</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (propKey <span style="color:#fff;font-weight:bold">instanceof</span> TypedStringValue) {
</span></span><span style="display:flex;"><span>                propKey = evaluate((TypedStringValue) propKey);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (propValue <span style="color:#fff;font-weight:bold">instanceof</span> TypedStringValue) {
</span></span><span style="display:flex;"><span>                propValue = evaluate((TypedStringValue) propValue);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            copy.<span style="color:#007f7f">put</span>(propKey, propValue);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> copy;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è§£æå­—ç¬¦ä¸²ç±»å‹çš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (value <span style="color:#fff;font-weight:bold">instanceof</span> TypedStringValue) {
</span></span><span style="display:flex;"><span>        TypedStringValue typedStringValue = (TypedStringValue) value;
</span></span><span style="display:flex;"><span>        Object valueObject = evaluate(typedStringValue);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//è·å–å±æ€§çš„ç›®æ ‡ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            Class&lt;?&gt; resolvedTargetType = resolveTargetType(typedStringValue);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (resolvedTargetType != <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">//å¯¹ç›®æ ‡ç±»å‹çš„å±æ€§è¿›è¡Œè§£æï¼Œé€’å½’è°ƒç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">typeConverter</span>.<span style="color:#007f7f">convertIfNecessary</span>(valueObject, resolvedTargetType);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//æ²¡æœ‰è·å–åˆ°å±æ€§çš„ç›®æ ‡å¯¹è±¡ï¼Œåˆ™æŒ‰Objectç±»å‹è¿”å›
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">return</span> valueObject;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinition</span>.<span style="color:#007f7f">getResourceDescription</span>(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#0ff;font-weight:bold">&#34;Error converting typed String value for &#34;</span> + argName, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> evaluate(value);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æå¼•ç”¨ç±»å‹çš„å±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Object resolveReference(Object argName, RuntimeBeanReference ref) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//è·å–å¼•ç”¨çš„Beanåç§°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        String refName = ref.<span style="color:#007f7f">getBeanName</span>();
</span></span><span style="display:flex;"><span>        refName = String.<span style="color:#007f7f">valueOf</span>(evaluate(refName));
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//å¦‚æœå¼•ç”¨çš„å¯¹è±¡åœ¨çˆ¶ç±»å®¹å™¨ä¸­ï¼Œåˆ™ä»çˆ¶ç±»å®¹å™¨ä¸­è·å–æŒ‡å®šçš„å¼•ç”¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (ref.<span style="color:#007f7f">isToParent</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">getParentBeanFactory</span>() == <span style="color:#fff;font-weight:bold">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinition</span>.<span style="color:#007f7f">getResourceDescription</span>(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanName</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;Can&#39;t resolve reference to bean &#39;&#34;</span> + refName +
</span></span><span style="display:flex;"><span>                    <span style="color:#0ff;font-weight:bold">&#34;&#39; in parent factory: no parent factory available&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">getParentBeanFactory</span>().<span style="color:#007f7f">getBean</span>(refName);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//ä»å½“å‰çš„å®¹å™¨ä¸­è·å–æŒ‡å®šçš„å¼•ç”¨Beanå¯¹è±¡ï¼Œå¦‚æœæŒ‡å®šçš„Beanæ²¡æœ‰è¢«å®ä¾‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//åˆ™ä¼šé€’å½’è§¦å‘å¼•ç”¨Beançš„åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            Object bean = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">getBean</span>(refName);
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">//å°†å½“å‰å®ä¾‹åŒ–å¯¹è±¡çš„ä¾èµ–å¼•ç”¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanFactory</span>.<span style="color:#007f7f">registerDependentBean</span>(refName, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanName</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> bean;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinition</span>.<span style="color:#007f7f">getResourceDescription</span>(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanName</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#34;Cannot resolve reference to bean &#39;&#34;</span> + ref.<span style="color:#007f7f">getBeanName</span>() + <span style="color:#0ff;font-weight:bold">&#34;&#39; while setting &#34;</span> + argName, ex);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æarrayç±»å‹çš„å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Object resolveManagedArray(Object argName, List&lt;?&gt; ml, Class elementType) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//åˆ›å»ºä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„ï¼Œç”¨äºå­˜æ”¾å’Œè¿”å›è§£æåçš„æ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Object resolved = Array.<span style="color:#007f7f">newInstance</span>(elementType, ml.<span style="color:#007f7f">size</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; ml.<span style="color:#007f7f">size</span>(); i++) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é€’å½’è§£æarrayçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è§£æåçš„å€¼è®¾ç½®åˆ°resolvedæ•°ç»„ä¸­ï¼Œç´¢å¼•ä¸ºi
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        Array.<span style="color:#007f7f">set</span>(resolved, i,
</span></span><span style="display:flex;"><span>                  resolveValueIfNecessary(<span style="color:#fff;font-weight:bold">new</span> KeyedArgName(argName, i), ml.<span style="color:#007f7f">get</span>(i)));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> resolved;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£ælistç±»å‹çš„å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> List resolveManagedList(Object argName, List&lt;?&gt; ml) {
</span></span><span style="display:flex;"><span>    List&lt;Object&gt; resolved = <span style="color:#fff;font-weight:bold">new</span> ArrayList&lt;Object&gt;(ml.<span style="color:#007f7f">size</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; ml.<span style="color:#007f7f">size</span>(); i++) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//é€’å½’è§£ælistçš„æ¯ä¸€ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        resolved.<span style="color:#007f7f">add</span>(
</span></span><span style="display:flex;"><span>            resolveValueIfNecessary(<span style="color:#fff;font-weight:bold">new</span> KeyedArgName(argName, i), ml.<span style="color:#007f7f">get</span>(i)));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> resolved;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æsetç±»å‹çš„å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Set resolveManagedSet(Object argName, Set&lt;?&gt; ms) {
</span></span><span style="display:flex;"><span>    Set&lt;Object&gt; resolved = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;Object&gt;(ms.<span style="color:#007f7f">size</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//é€’å½’è§£æsetçš„æ¯ä¸€ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (Object m : ms) {
</span></span><span style="display:flex;"><span>        resolved.<span style="color:#007f7f">add</span>(resolveValueIfNecessary(<span style="color:#fff;font-weight:bold">new</span> KeyedArgName(argName, i), m));
</span></span><span style="display:flex;"><span>        i++;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> resolved;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è§£æmapç±»å‹çš„å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Map resolveManagedMap(Object argName, Map&lt;?, ?&gt; mm) {
</span></span><span style="display:flex;"><span>    Map&lt;Object, Object&gt; resolved = <span style="color:#fff;font-weight:bold">new</span> LinkedHashMap&lt;Object, Object&gt;(mm.<span style="color:#007f7f">size</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//é€’å½’è§£æmapä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„keyå’Œvalue
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (Map.<span style="color:#007f7f">Entry</span> entry : mm.<span style="color:#007f7f">entrySet</span>()) {
</span></span><span style="display:flex;"><span>        Object resolvedKey = resolveValueIfNecessary(argName, entry.<span style="color:#007f7f">getKey</span>());
</span></span><span style="display:flex;"><span>        Object resolvedValue = resolveValueIfNecessary(
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">new</span> KeyedArgName(argName, entry.<span style="color:#007f7f">getKey</span>()), entry.<span style="color:#007f7f">getValue</span>());
</span></span><span style="display:flex;"><span>        resolved.<span style="color:#007f7f">put</span>(resolvedKey, resolvedValue);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> resolved;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢çš„ä»£ç åˆ†æï¼Œæˆ‘ä»¬æ˜ç™½äº†Springæ˜¯å¦‚ä½•å°†å¼•ç”¨ç±»å‹ï¼Œå†…éƒ¨ç±»ä»¥åŠé›†åˆç±»å‹ç­‰å±æ€§è¿›è¡Œè§£æçš„ï¼Œå±æ€§å€¼è§£æå®Œæˆåå°±å¯ä»¥è¿›è¡Œä¾èµ–æ³¨å…¥äº†ï¼Œä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹å°±æ˜¯Beanå¯¹è±¡å®ä¾‹è®¾ç½®åˆ°å®ƒæ‰€ä¾èµ–çš„Beanå¯¹è±¡å±æ€§ä¸Šå»ï¼Œåœ¨ç¬¬7æ­¥ä¸­æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼Œä¾èµ–æ³¨å…¥æ˜¯é€šè¿‡bw.setPropertyValuesæ–¹æ³•å®ç°çš„ï¼Œè¯¥æ–¹æ³•ä¹Ÿä½¿ç”¨äº†å§”æ‰˜æ¨¡å¼ï¼Œåœ¨BeanWrapperæ¥å£ä¸­è‡³å°‘å®šä¹‰äº†æ–¹æ³•å£°æ˜ï¼Œä¾èµ–æ³¨å…¥çš„å…·ä½“å®ç°äº¤ç”±å…¶å®ç°ç±»BeanWrapperImplæ¥å®Œæˆï¼Œä¸‹é¢æˆ‘ä»¬å°±åˆ†æä¾BeanWrapperImplä¸­èµ–æ³¨å…¥ç›¸å…³çš„æºç ã€‚</p>
<h2 id="beanwrapperimplå¯¹beanå±æ€§çš„ä¾èµ–æ³¨å…¥">BeanWrapperImplå¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#beanwrapperimplå¯¹beanå±æ€§çš„ä¾èµ–æ³¨å…¥">#</a></h2>
<p>BeanWrapperImplç±»ä¸»è¦æ˜¯å¯¹å®¹å™¨ä¸­å®Œæˆåˆå§‹åŒ–çš„Beanå®ä¾‹å¯¹è±¡è¿›è¡Œå±æ€§çš„ä¾èµ–æ³¨å…¥ï¼Œå³æŠŠBeanå¯¹è±¡è®¾ç½®åˆ°å®ƒæ‰€ä¾èµ–çš„å¦ä¸€ä¸ªBeançš„å±æ€§ä¸­å»ï¼Œä¾èµ–æ³¨å…¥çš„ç›¸å…³æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">223
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">224
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">225
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">226
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">227
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">228
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">229
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">230
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">231
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">232
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">233
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">234
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">235
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">236
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">237
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">238
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">239
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">240
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">241
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">242
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">243
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">244
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">245
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">246
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">247
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">248
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">249
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">250
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">251
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">252
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">253
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">254
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">255
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">256
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">257
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">258
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">259
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å®ç°å±æ€§ä¾èµ–æ³¨å…¥åŠŸèƒ½  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">void</span> setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv) <span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//PropertyTokenHolderä¸»è¦ä¿å­˜å±æ€§çš„åç§°ã€è·¯å¾„ï¼Œä»¥åŠé›†åˆçš„sizeç­‰ä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	String propertyName = tokens.<span style="color:#007f7f">canonicalName</span>;  
</span></span><span style="display:flex;"><span>	String actualName = tokens.<span style="color:#007f7f">actualName</span>;  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//keysæ˜¯ç”¨æ¥ä¿å­˜é›†åˆç±»å‹å±æ€§çš„size  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (tokens.<span style="color:#007f7f">keys</span> != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å°†å±æ€§ä¿¡æ¯æ‹·è´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		PropertyTokenHolder getterTokens = <span style="color:#fff;font-weight:bold">new</span> PropertyTokenHolder();  
</span></span><span style="display:flex;"><span>		getterTokens.<span style="color:#007f7f">canonicalName</span> = tokens.<span style="color:#007f7f">canonicalName</span>;  
</span></span><span style="display:flex;"><span>		getterTokens.<span style="color:#007f7f">actualName</span> = tokens.<span style="color:#007f7f">actualName</span>;  
</span></span><span style="display:flex;"><span>		getterTokens.<span style="color:#007f7f">keys</span> = <span style="color:#fff;font-weight:bold">new</span> String[tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span> - <span style="color:#ff0;font-weight:bold">1</span>];  
</span></span><span style="display:flex;"><span>		System.<span style="color:#007f7f">arraycopy</span>(tokens.<span style="color:#007f7f">keys</span>, <span style="color:#ff0;font-weight:bold">0</span>, getterTokens.<span style="color:#007f7f">keys</span>, <span style="color:#ff0;font-weight:bold">0</span>, tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span> - <span style="color:#ff0;font-weight:bold">1</span>);  
</span></span><span style="display:flex;"><span>		Object propValue;  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–å±æ€§å€¼ï¼Œè¯¥æ–¹æ³•å†…éƒ¨ä½¿ç”¨JDKçš„å†…çœ( Introspector)æœºåˆ¶ï¼Œè°ƒç”¨å±æ€§//çš„getter(readerMethod)æ–¹æ³•ï¼Œè·å–å±æ€§çš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			propValue = getPropertyValue(getterTokens);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (NotReadablePropertyException ex) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NotWritablePropertyException(getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;Cannot access indexed value in property referenced &#34;</span> +  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;in indexed property path &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//è·å–é›†åˆç±»å‹å±æ€§çš„é•¿åº¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		String key = tokens.<span style="color:#007f7f">keys</span>[tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span> - <span style="color:#ff0;font-weight:bold">1</span>];  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (propValue == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NullValueInNestedPathException(getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;Cannot access indexed value in property referenced &#34;</span> +  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;in indexed property path &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;: returned null&#34;</span>);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//æ³¨å…¥arrayç±»å‹çš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (propValue.<span style="color:#007f7f">getClass</span>().<span style="color:#007f7f">isArray</span>()) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–å±æ€§çš„æè¿°ç¬¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			PropertyDescriptor pd = getCachedIntrospectionResults().<span style="color:#007f7f">getPropertyDescriptor</span>(actualName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–æ•°ç»„çš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Class requiredType = propValue.<span style="color:#007f7f">getClass</span>().<span style="color:#007f7f">getComponentType</span>();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–æ•°ç»„çš„é•¿åº¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">int</span> arrayIndex = Integer.<span style="color:#007f7f">parseInt</span>(key);  
</span></span><span style="display:flex;"><span>			Object oldValue = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//è·å–æ•°ç»„ä»¥å‰åˆå§‹åŒ–çš„å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">if</span> (isExtractOldValueForEditor()) {  
</span></span><span style="display:flex;"><span>					oldValue = Array.<span style="color:#007f7f">get</span>(propValue, arrayIndex);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å°†å±æ€§çš„å€¼èµ‹å€¼ç»™æ•°ç»„ä¸­çš„å…ƒç´   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.<span style="color:#007f7f">getValue</span>(), requiredType,  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">new</span> PropertyTypeDescriptor(pd, <span style="color:#fff;font-weight:bold">new</span> MethodParameter(pd.<span style="color:#007f7f">getReadMethod</span>(), -<span style="color:#ff0;font-weight:bold">1</span>), requiredType));  
</span></span><span style="display:flex;"><span>				Array.<span style="color:#007f7f">set</span>(propValue, arrayIndex, convertedValue);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">catch</span> (IndexOutOfBoundsException ex) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> InvalidPropertyException(getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>						<span style="color:#0ff;font-weight:bold">&#34;Invalid array index in property path &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//æ³¨å…¥listç±»å‹çš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (propValue <span style="color:#fff;font-weight:bold">instanceof</span> List) {  
</span></span><span style="display:flex;"><span>			PropertyDescriptor pd = getCachedIntrospectionResults().<span style="color:#007f7f">getPropertyDescriptor</span>(actualName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–listé›†åˆçš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Class requiredType = GenericCollectionTypeResolver.<span style="color:#007f7f">getCollectionReturnType</span>(  
</span></span><span style="display:flex;"><span>					pd.<span style="color:#007f7f">getReadMethod</span>(), tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span>);  
</span></span><span style="display:flex;"><span>			List list = (List) propValue;  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–listé›†åˆçš„size  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">int</span> index = Integer.<span style="color:#007f7f">parseInt</span>(key);  
</span></span><span style="display:flex;"><span>			Object oldValue = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (isExtractOldValueForEditor() &amp;&amp; index &lt; list.<span style="color:#007f7f">size</span>()) {  
</span></span><span style="display:flex;"><span>				oldValue = list.<span style="color:#007f7f">get</span>(index);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–listè§£æåçš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.<span style="color:#007f7f">getValue</span>(), requiredType,  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">new</span> PropertyTypeDescriptor(pd, <span style="color:#fff;font-weight:bold">new</span> MethodParameter(pd.<span style="color:#007f7f">getReadMethod</span>(), -<span style="color:#ff0;font-weight:bold">1</span>), requiredType));  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (index &lt; list.<span style="color:#007f7f">size</span>()) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//ä¸ºlistå±æ€§èµ‹å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				list.<span style="color:#007f7f">set</span>(index, convertedValue);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//å¦‚æœlistçš„é•¿åº¦å¤§äºå±æ€§å€¼çš„é•¿åº¦ï¼Œåˆ™å¤šä½™çš„å…ƒç´ èµ‹å€¼ä¸ºnull  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (index &gt;= list.<span style="color:#007f7f">size</span>()) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = list.<span style="color:#007f7f">size</span>(); i &lt; index; i++) {  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>						list.<span style="color:#007f7f">add</span>(<span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">catch</span> (NullPointerException ex) {  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> InvalidPropertyException(getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>								<span style="color:#0ff;font-weight:bold">&#34;Cannot set element with index &#34;</span> + index + <span style="color:#0ff;font-weight:bold">&#34; in List of size &#34;</span> +  
</span></span><span style="display:flex;"><span>								list.<span style="color:#007f7f">size</span>() + <span style="color:#0ff;font-weight:bold">&#34;, accessed using property path &#39;&#34;</span> + propertyName +  
</span></span><span style="display:flex;"><span>								<span style="color:#0ff;font-weight:bold">&#34;&#39;: List does not support filling up gaps with null elements&#34;</span>);  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				list.<span style="color:#007f7f">add</span>(convertedValue);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//æ³¨å…¥mapç±»å‹çš„å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (propValue <span style="color:#fff;font-weight:bold">instanceof</span> Map) {  
</span></span><span style="display:flex;"><span>			PropertyDescriptor pd = getCachedIntrospectionResults().<span style="color:#007f7f">getPropertyDescriptor</span>(actualName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–mapé›†åˆkeyçš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Class mapKeyType = GenericCollectionTypeResolver.<span style="color:#007f7f">getMapKeyReturnType</span>(  
</span></span><span style="display:flex;"><span>					pd.<span style="color:#007f7f">getReadMethod</span>(), tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span>);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–mapé›†åˆvalueçš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Class mapValueType = GenericCollectionTypeResolver.<span style="color:#007f7f">getMapValueReturnType</span>(  
</span></span><span style="display:flex;"><span>					pd.<span style="color:#007f7f">getReadMethod</span>(), tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span>);  
</span></span><span style="display:flex;"><span>			Map map = (Map) propValue;  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è§£æmapç±»å‹å±æ€§keyå€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Object convertedMapKey = convertIfNecessary(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#fff;font-weight:bold">null</span>, key, mapKeyType,  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">new</span> PropertyTypeDescriptor(pd, <span style="color:#fff;font-weight:bold">new</span> MethodParameter(pd.<span style="color:#007f7f">getReadMethod</span>(), -<span style="color:#ff0;font-weight:bold">1</span>), mapKeyType));  
</span></span><span style="display:flex;"><span>			Object oldValue = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (isExtractOldValueForEditor()) {  
</span></span><span style="display:flex;"><span>				oldValue = map.<span style="color:#007f7f">get</span>(convertedMapKey);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è§£æmapç±»å‹å±æ€§valueå€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Object convertedMapValue = convertIfNecessary(  
</span></span><span style="display:flex;"><span>					propertyName, oldValue, pv.<span style="color:#007f7f">getValue</span>(), mapValueType,  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">new</span> TypeDescriptor(<span style="color:#fff;font-weight:bold">new</span> MethodParameter(pd.<span style="color:#007f7f">getReadMethod</span>(), -<span style="color:#ff0;font-weight:bold">1</span>, tokens.<span style="color:#007f7f">keys</span>.<span style="color:#007f7f">length</span> + <span style="color:#ff0;font-weight:bold">1</span>)));  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//å°†è§£æåçš„keyå’Œvalueå€¼èµ‹å€¼ç»™mapé›†åˆå±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			map.<span style="color:#007f7f">put</span>(convertedMapKey, convertedMapValue);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> InvalidPropertyException(getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;Property referenced in indexed property path &#39;&#34;</span> + propertyName +  
</span></span><span style="display:flex;"><span>					<span style="color:#0ff;font-weight:bold">&#34;&#39; is neither an array nor a List nor a Map; returned value was [&#34;</span> + pv.<span style="color:#007f7f">getValue</span>() + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹éé›†åˆç±»å‹çš„å±æ€§æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>		PropertyDescriptor pd = pv.<span style="color:#007f7f">resolvedDescriptor</span>;  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (pd == <span style="color:#fff;font-weight:bold">null</span> || !pd.<span style="color:#007f7f">getWriteMethod</span>().<span style="color:#007f7f">getDeclaringClass</span>().<span style="color:#007f7f">isInstance</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">object</span>)) {  
</span></span><span style="display:flex;"><span>			pd = getCachedIntrospectionResults().<span style="color:#007f7f">getPropertyDescriptor</span>(actualName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//æ— æ³•è·å–åˆ°å±æ€§åæˆ–è€…å±æ€§æ²¡æœ‰æä¾›setter(å†™æ–¹æ³•)æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">if</span> (pd == <span style="color:#fff;font-weight:bold">null</span> || pd.<span style="color:#007f7f">getWriteMethod</span>() == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å¦‚æœå±æ€§å€¼æ˜¯å¯é€‰çš„ï¼Œå³ä¸æ˜¯å¿…é¡»çš„ï¼Œåˆ™å¿½ç•¥è¯¥å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">if</span> (pv.<span style="color:#007f7f">isOptional</span>()) {  
</span></span><span style="display:flex;"><span>					logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Ignoring optional value for property &#39;&#34;</span> + actualName +  
</span></span><span style="display:flex;"><span>							<span style="color:#0ff;font-weight:bold">&#34;&#39; - property not found on bean class [&#34;</span> + getRootClass().<span style="color:#007f7f">getName</span>() + <span style="color:#0ff;font-weight:bold">&#34;]&#34;</span>);  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å¦‚æœå±æ€§å€¼æ˜¯å¿…é¡»çš„ï¼Œåˆ™æŠ›å‡ºæ— æ³•ç»™å±æ€§èµ‹å€¼ï¼Œå› ä¸ºæ¯å¤©æä¾›setteræ–¹æ³•å¼‚å¸¸  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>					PropertyMatches matches = PropertyMatches.<span style="color:#007f7f">forProperty</span>(propertyName, getRootClass());  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> NotWritablePropertyException(  
</span></span><span style="display:flex;"><span>							getRootClass(), <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName,  
</span></span><span style="display:flex;"><span>							matches.<span style="color:#007f7f">buildErrorMessage</span>(), matches.<span style="color:#007f7f">getPossibleMatches</span>());  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			pv.<span style="color:#007f7f">getOriginalPropertyValue</span>().<span style="color:#007f7f">resolvedDescriptor</span> = pd;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		Object oldValue = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>			Object originalValue = pv.<span style="color:#007f7f">getValue</span>();  
</span></span><span style="display:flex;"><span>			Object valueToApply = originalValue;  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (!Boolean.<span style="color:#007f7f">FALSE</span>.<span style="color:#007f7f">equals</span>(pv.<span style="color:#007f7f">conversionNecessary</span>)) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">if</span> (pv.<span style="color:#007f7f">isConverted</span>()) {  
</span></span><span style="display:flex;"><span>					valueToApply = pv.<span style="color:#007f7f">getConvertedValue</span>();  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">if</span> (isExtractOldValueForEditor() &amp;&amp; pd.<span style="color:#007f7f">getReadMethod</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>						<span style="color:#007f7f">//è·å–å±æ€§çš„getteræ–¹æ³•(è¯»æ–¹æ³•)ï¼ŒJDKå†…çœæœºåˆ¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>						<span style="color:#fff;font-weight:bold">final</span> Method readMethod = pd.<span style="color:#007f7f">getReadMethod</span>();  
</span></span><span style="display:flex;"><span>						<span style="color:#007f7f">//å¦‚æœå±æ€§çš„getteræ–¹æ³•ä¸æ˜¯publicè®¿é—®æ§åˆ¶æƒé™çš„ï¼Œå³è®¿é—®æ§åˆ¶æƒé™æ¯”è¾ƒä¸¥æ ¼ï¼Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>						<span style="color:#007f7f">//åˆ™ä½¿ç”¨JDKçš„åå°„æœºåˆ¶å¼ºè¡Œè®¿é—®épublicçš„æ–¹æ³•(æš´åŠ›è¯»å–å±æ€§å€¼)  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>						<span style="color:#fff;font-weight:bold">if</span> (!Modifier.<span style="color:#007f7f">isPublic</span>(readMethod.<span style="color:#007f7f">getDeclaringClass</span>().<span style="color:#007f7f">getModifiers</span>()) &amp;&amp;  
</span></span><span style="display:flex;"><span>								!readMethod.<span style="color:#007f7f">isAccessible</span>()) {  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>()!= <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>								<span style="color:#007f7f">//åŒ¿åå†…éƒ¨ç±»ï¼Œæ ¹æ®æƒé™ä¿®æ”¹å±æ€§çš„è¯»å–æ§åˆ¶é™åˆ¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>								AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>									<span style="color:#fff;font-weight:bold">public</span> Object run() {  
</span></span><span style="display:flex;"><span>										readMethod.<span style="color:#007f7f">setAccessible</span>(<span style="color:#fff;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span>										<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>									}  
</span></span><span style="display:flex;"><span>								});  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>								readMethod.<span style="color:#007f7f">setAccessible</span>(<span style="color:#fff;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>							<span style="color:#007f7f">//å±æ€§æ²¡æœ‰æä¾›getteræ–¹æ³•æ—¶ï¼Œè°ƒç”¨æ½œåœ¨çš„è¯»å–å±æ€§å€¼//çš„æ–¹æ³•ï¼Œè·å–å±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>							<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>								oldValue = AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedExceptionAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>									<span style="color:#fff;font-weight:bold">public</span> Object run() <span style="color:#fff;font-weight:bold">throws</span> Exception {  
</span></span><span style="display:flex;"><span>										<span style="color:#fff;font-weight:bold">return</span> readMethod.<span style="color:#007f7f">invoke</span>(object);  
</span></span><span style="display:flex;"><span>									}  
</span></span><span style="display:flex;"><span>								}, acc);  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>								oldValue = readMethod.<span style="color:#007f7f">invoke</span>(object);  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">if</span> (ex <span style="color:#fff;font-weight:bold">instanceof</span> PrivilegedActionException) {  
</span></span><span style="display:flex;"><span>								ex = ((PrivilegedActionException) ex).<span style="color:#007f7f">getException</span>();  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>								logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Could not read previous value of property &#39;&#34;</span> +  
</span></span><span style="display:flex;"><span>										<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>					<span style="color:#007f7f">//è®¾ç½®å±æ€§çš„æ³¨å…¥å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					valueToApply = convertForProperty(propertyName, oldValue, originalValue, pd);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				pv.<span style="color:#007f7f">getOriginalPropertyValue</span>().<span style="color:#007f7f">conversionNecessary</span> = (valueToApply != originalValue);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//æ ¹æ®JDKçš„å†…çœæœºåˆ¶ï¼Œè·å–å±æ€§çš„setter(å†™æ–¹æ³•)æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">final</span> Method writeMethod = (pd <span style="color:#fff;font-weight:bold">instanceof</span> GenericTypeAwarePropertyDescriptor ?  
</span></span><span style="display:flex;"><span>					((GenericTypeAwarePropertyDescriptor) pd).<span style="color:#007f7f">getWriteMethodForActualAccess</span>() :  
</span></span><span style="display:flex;"><span>					pd.<span style="color:#007f7f">getWriteMethod</span>());  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//å¦‚æœå±æ€§çš„setteræ–¹æ³•æ˜¯épublicï¼Œå³è®¿é—®æ§åˆ¶æƒé™æ¯”è¾ƒä¸¥æ ¼ï¼Œåˆ™ä½¿ç”¨JDKçš„åå°„æœºåˆ¶ï¼Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#007f7f">//å¼ºè¡Œè®¾ç½®setteræ–¹æ³•å¯è®¿é—®(æš´åŠ›ä¸ºå±æ€§èµ‹å€¼)  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">if</span> (!Modifier.<span style="color:#007f7f">isPublic</span>(writeMethod.<span style="color:#007f7f">getDeclaringClass</span>().<span style="color:#007f7f">getModifiers</span>()) &amp;&amp; !writeMethod.<span style="color:#007f7f">isAccessible</span>()) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å¦‚æœä½¿ç”¨äº†JDKçš„å®‰å…¨æœºåˆ¶ï¼Œåˆ™éœ€è¦æƒé™éªŒè¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>()!= <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>					AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">public</span> Object run() {  
</span></span><span style="display:flex;"><span>							writeMethod.<span style="color:#007f7f">setAccessible</span>(<span style="color:#fff;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>					});  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>					writeMethod.<span style="color:#007f7f">setAccessible</span>(<span style="color:#fff;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">final</span> Object value = valueToApply;  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>					<span style="color:#007f7f">//å°†å±æ€§å€¼è®¾ç½®åˆ°å±æ€§ä¸Šå»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedExceptionAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>						<span style="color:#fff;font-weight:bold">public</span> Object run() <span style="color:#fff;font-weight:bold">throws</span> Exception {  
</span></span><span style="display:flex;"><span>							writeMethod.<span style="color:#007f7f">invoke</span>(object, value);  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>					}, acc);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">catch</span> (PrivilegedActionException ex) {  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">throw</span> ex.<span style="color:#007f7f">getException</span>();  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>				writeMethod.<span style="color:#007f7f">invoke</span>(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">object</span>, value);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (TypeMismatchException ex) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> ex;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (InvocationTargetException ex) {  
</span></span><span style="display:flex;"><span>			PropertyChangeEvent propertyChangeEvent =  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">new</span> PropertyChangeEvent(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">rootObject</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName, oldValue, pv.<span style="color:#007f7f">getValue</span>());  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (ex.<span style="color:#007f7f">getTargetException</span>() <span style="color:#fff;font-weight:bold">instanceof</span> ClassCastException) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> TypeMismatchException(propertyChangeEvent, pd.<span style="color:#007f7f">getPropertyType</span>(), ex.<span style="color:#007f7f">getTargetException</span>());  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MethodInvocationException(propertyChangeEvent, ex.<span style="color:#007f7f">getTargetException</span>());  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (Exception ex) {  
</span></span><span style="display:flex;"><span>			PropertyChangeEvent pce =  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">new</span> PropertyChangeEvent(<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">rootObject</span>, <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">nestedPath</span> + propertyName, oldValue, pv.<span style="color:#007f7f">getValue</span>());  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> MethodInvocationException(pce, ex);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡å¯¹ä¸Šé¢æ³¨å…¥ä¾èµ–ä»£ç çš„åˆ†æï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½äº†Spring IoCå®¹å™¨æ˜¯å¦‚ä½•å°†å±æ€§çš„å€¼æ³¨å…¥åˆ°Beanå®ä¾‹å¯¹è±¡ä¸­å»çš„ï¼š</p>
<ul>
<li>å¯¹äºé›†åˆç±»å‹çš„å±æ€§ï¼Œå°†å…¶å±æ€§å€¼è§£æä¸ºç›®æ ‡ç±»å‹çš„é›†åˆåç›´æ¥èµ‹å€¼ç»™å±æ€§ã€‚</li>
<li>å¯¹äºéé›†åˆç±»å‹çš„å±æ€§ï¼Œå¤§é‡ä½¿ç”¨äº†JDKçš„åå°„å’Œå†…çœæœºåˆ¶ï¼Œé€šè¿‡å±æ€§çš„getteræ–¹æ³•(reader method)è·å–æŒ‡å®šå±æ€§æ³¨å…¥ä»¥å‰çš„å€¼ï¼ŒåŒæ—¶è°ƒç”¨å±æ€§çš„setteræ–¹æ³•(writer method)ä¸ºå±æ€§è®¾ç½®æ³¨å…¥åçš„å€¼ã€‚çœ‹åˆ°è¿™é‡Œç›¸ä¿¡å¾ˆå¤šäººéƒ½æ˜ç™½äº†Springçš„setteræ³¨å…¥åŸç†ã€‚</li>
</ul>
<p>è‡³æ­¤Spring IoCå®¹å™¨å¯¹Beanå®šä¹‰èµ„æºæ–‡ä»¶çš„å®šä½ï¼Œè½½å…¥ã€è§£æå’Œä¾èµ–æ³¨å…¥å·²ç»å…¨éƒ¨åˆ†æå®Œæ¯•ï¼Œç°åœ¨
Spring IoCå®¹å™¨ä¸­ç®¡ç†äº†ä¸€ç³»åˆ—é ä¾èµ–å…³ç³»è”ç³»èµ·æ¥çš„Beanï¼Œç¨‹åºä¸éœ€è¦åº”ç”¨è‡ªå·±æ‰‹åŠ¨åˆ›å»ºæ‰€éœ€çš„å¯¹è±¡ï¼ŒSpring IoCå®¹å™¨ä¼šåœ¨æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºï¼Œå¹¶ä¸”ä¸ºæˆ‘ä»¬æ³¨å…¥å¥½ç›¸å…³çš„ä¾èµ–ï¼Œè¿™å°±æ˜¯Springæ ¸å¿ƒåŠŸèƒ½çš„æ§åˆ¶åè½¬å’Œä¾èµ–æ³¨å…¥çš„ç›¸å…³åŠŸèƒ½ã€‚</p>
<h1 id="iocå®¹å™¨çš„é«˜çº§ç‰¹æ€§">IoCå®¹å™¨çš„é«˜çº§ç‰¹æ€§<a hidden class="anchor" aria-hidden="true" href="#iocå®¹å™¨çš„é«˜çº§ç‰¹æ€§">#</a></h1>
<p>é€šè¿‡å‰é¢4ç¯‡æ–‡ç« å¯¹Spring IoCå®¹å™¨çš„æºç åˆ†æï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬ä¸Šäº†è§£äº†Spring IoCå®¹å™¨å¯¹Beanå®šä¹‰èµ„æºçš„å®šä½ã€è¯»å…¥å’Œè§£æè¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ¸…æ¥šäº†å½“ç”¨æˆ·é€šè¿‡getBeanæ–¹æ³•å‘IoCå®¹å™¨è·å–è¢«ç®¡ç†çš„Beanæ—¶ï¼ŒIoCå®¹å™¨å¯¹Beanè¿›è¡Œçš„åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥è¿‡ç¨‹ï¼Œè¿™äº›æ˜¯Spring IoCå®¹å™¨çš„åŸºæœ¬åŠŸèƒ½ç‰¹æ€§ã€‚Spring IoCå®¹å™¨è¿˜æœ‰ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œå¦‚ä½¿ç”¨lazy-initå±æ€§å¯¹Beané¢„åˆå§‹åŒ–ã€FactoryBeanäº§ç”Ÿæˆ–è€…ä¿®é¥°Beanå¯¹è±¡çš„ç”Ÿæˆã€IoCå®¹å™¨åˆå§‹åŒ–Beanè¿‡ç¨‹ä¸­ä½¿ç”¨BeanPostProcessoråç½®å¤„ç†å™¨å¯¹Beanå£°æ˜å‘¨æœŸäº‹ä»¶ç®¡ç†å’ŒIoCå®¹å™¨çš„autowiringè‡ªåŠ¨è£…é…åŠŸèƒ½ç­‰ã€‚</p>
<h2 id="spring-iocå®¹å™¨çš„lazy-initå±æ€§å®ç°é¢„å®ä¾‹åŒ–">Spring IoCå®¹å™¨çš„lazy-initå±æ€§å®ç°é¢„å®ä¾‹åŒ–<a hidden class="anchor" aria-hidden="true" href="#spring-iocå®¹å™¨çš„lazy-initå±æ€§å®ç°é¢„å®ä¾‹åŒ–">#</a></h2>
<p>é€šè¿‡å‰é¢æˆ‘ä»¬å¯¹IoCå®¹å™¨çš„å®ç°å’Œå·¥ä½œåŸç†åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“IoCå®¹å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹å°±æ˜¯å¯¹Beanå®šä¹‰èµ„æºçš„å®šä½ã€è½½å…¥å’Œæ³¨å†Œï¼Œæ­¤æ—¶å®¹å™¨å¯¹Beançš„ä¾èµ–æ³¨å…¥å¹¶æ²¡æœ‰å‘ç”Ÿï¼Œä¾èµ–æ³¨å…¥ä¸»è¦æ˜¯åœ¨åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡å‘å®¹å™¨ç´¢å–Beanæ—¶ï¼Œé€šè¿‡getBeanæ–¹æ³•çš„è°ƒç”¨å®Œæˆã€‚</p>
<p>å½“Beanå®šä¹‰èµ„æºçš„<code>&lt;Bean&gt;</code>å…ƒç´ ä¸­é…ç½®äº†lazy-initå±æ€§æ—¶ï¼Œå®¹å™¨å°†ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™å¯¹æ‰€é…ç½®çš„Beanè¿›è¡Œé¢„å®ä¾‹åŒ–ï¼ŒBeançš„ä¾èµ–æ³¨å…¥åœ¨å®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»å®Œæˆã€‚è¿™æ ·ï¼Œå½“åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡å‘å®¹å™¨ç´¢å–è¢«ç®¡ç†çš„Beanæ—¶ï¼Œå°±ä¸ç”¨å†åˆå§‹åŒ–å’Œå¯¹Beanè¿›è¡Œä¾èµ–æ³¨å…¥äº†ï¼Œç›´æ¥ä»å®¹å™¨ä¸­è·å–å·²ç»å®Œæˆä¾èµ–æ³¨å…¥çš„ç°æˆBeanï¼Œå¯ä»¥æé«˜åº”ç”¨ç¬¬ä¸€æ¬¡å‘å®¹å™¨è·å–Beançš„æ€§èƒ½ã€‚
ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç åˆ†æå®¹å™¨é¢„å®ä¾‹åŒ–çš„å®ç°è¿‡ç¨‹ï¼š</p>
<ul>
<li>refresh()
å…ˆä»IoCå®¹å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹å¼€å§‹ï¼Œé€šè¿‡å‰é¢æ–‡ç« åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“IoCå®¹å™¨è¯»å…¥å·²ç»å®šä½çš„Beanå®šä¹‰èµ„æºæ˜¯ä»refreshæ–¹æ³•å¼€å§‹çš„ï¼Œæˆ‘ä»¬é¦–å…ˆä»AbstractApplicationContextç±»çš„refreshæ–¹æ³•å…¥æ‰‹åˆ†æï¼Œæºç å¦‚ä¸‹ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å®¹å™¨åˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œè¯»å…¥Beanå®šä¹‰èµ„æºï¼Œå¹¶è§£ææ³¨å†Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> refresh() <span style="color:#fff;font-weight:bold">throws</span> BeansException, IllegalStateException {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">startupShutdownMonitor</span>) {  
</span></span><span style="display:flex;"><span>		 <span style="color:#007f7f">//è°ƒç”¨å®¹å™¨å‡†å¤‡åˆ·æ–°çš„æ–¹æ³•ï¼Œè·å–å®¹å™¨çš„å½“æ—¶æ—¶é—´ï¼ŒåŒæ—¶ç»™å®¹å™¨è®¾ç½®åŒæ­¥æ ‡è¯†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		 prepareRefresh();  
</span></span><span style="display:flex;"><span>		 <span style="color:#007f7f">//å‘Šè¯‰å­ç±»å¯åŠ¨refreshBeanFactory()æ–¹æ³•ï¼ŒBeanå®šä¹‰èµ„æºæ–‡ä»¶çš„è½½å…¥ä»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		 <span style="color:#007f7f">//å­ç±»çš„refreshBeanFactory()æ–¹æ³•å¯åŠ¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		 ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();  
</span></span><span style="display:flex;"><span>		 <span style="color:#007f7f">//ä¸ºBeanFactoryé…ç½®å®¹å™¨ç‰¹æ€§ï¼Œä¾‹å¦‚ç±»åŠ è½½å™¨ã€äº‹ä»¶å¤„ç†å™¨ç­‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		prepareBeanFactory(beanFactory);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸ºå®¹å™¨çš„æŸäº›å­ç±»æŒ‡å®šç‰¹æ®Šçš„BeanPostäº‹ä»¶å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			postProcessBeanFactory(beanFactory);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è°ƒç”¨æ‰€æœ‰æ³¨å†Œçš„BeanFactoryPostProcessorçš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			invokeBeanFactoryPostProcessors(beanFactory);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸ºBeanFactoryæ³¨å†ŒBeanPostäº‹ä»¶å¤„ç†å™¨.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#007f7f">//BeanPostProcessoræ˜¯Beanåç½®å¤„ç†å™¨ï¼Œç”¨äºç›‘å¬å®¹å™¨è§¦å‘çš„äº‹ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			registerBeanPostProcessors(beanFactory);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//åˆå§‹åŒ–ä¿¡æ¯æºï¼Œå’Œå›½é™…åŒ–ç›¸å…³.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			initMessageSource();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//åˆå§‹åŒ–å®¹å™¨äº‹ä»¶ä¼ æ’­å™¨.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			initApplicationEventMulticaster();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è°ƒç”¨å­ç±»çš„æŸäº›ç‰¹æ®ŠBeanåˆå§‹åŒ–æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			onRefresh();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸ºäº‹ä»¶ä¼ æ’­å™¨æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			registerListeners();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è¿™é‡Œæ˜¯å¯¹å®¹å™¨lazy-initå±æ€§è¿›è¡Œå¤„ç†çš„å…¥å£æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			finishBeanFactoryInitialization(beanFactory);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//åˆå§‹åŒ–å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¤„ç†å™¨ï¼Œå¹¶å‘å¸ƒå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			finishRefresh();  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//é”€æ¯ä»¥åˆ›å»ºçš„å•æ€Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			destroyBeans();  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//å–æ¶ˆrefreshæ“ä½œï¼Œé‡ç½®å®¹å™¨çš„åŒæ­¥æ ‡è¯†.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			cancelRefresh(ex);  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> ex;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨refreshæ–¹æ³•ä¸­ConfigurableListableBeanFactorybeanFactory = obtainFreshBeanFactory();
å¯åŠ¨äº†Beanå®šä¹‰èµ„æºçš„è½½å…¥ã€æ³¨å†Œè¿‡ç¨‹ï¼Œè€ŒfinishBeanFactoryInitializationæ–¹æ³•æ˜¯å¯¹æ³¨å†Œåçš„Beanå®šä¹‰ä¸­çš„é¢„å®ä¾‹åŒ–(lazy-init=falseï¼ŒSpringé»˜è®¤å°±æ˜¯é¢„å®ä¾‹åŒ–ï¼Œå³ä¸ºtrue)çš„Beanè¿›è¡Œå¤„ç†çš„åœ°æ–¹ã€‚</p>
<ul>
<li>finishBeanFactoryInitializationå¤„ç†é¢„å®ä¾‹åŒ–Bean
å½“Beanå®šä¹‰èµ„æºè¢«è½½å…¥IoCå®¹å™¨ä¹‹åï¼Œå®¹å™¨å°†Beanå®šä¹‰èµ„æºè§£æä¸ºå®¹å™¨å†…éƒ¨çš„æ•°æ®ç»“æ„BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼ŒAbstractApplicationContextç±»ä¸­çš„finishBeanFactoryInitializationæ–¹æ³•å¯¹é…ç½®äº†é¢„å®ä¾‹åŒ–å±æ€§çš„Beanè¿›è¡Œé¢„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæºç å¦‚ä¸‹ï¼š</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å¯¹é…ç½®äº†lazy-initå±æ€§çš„Beanè¿›è¡Œé¢„å®ä¾‹åŒ–å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è¿™æ˜¯Spring3ä»¥åæ–°åŠ çš„ä»£ç ï¼Œä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªè½¬æ¢æœåŠ¡(ConversionService)  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//åœ¨å¯¹æŸäº›Beanå±æ€§è¿›è¡Œè½¬æ¢æ—¶ä½¿ç”¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (beanFactory.<span style="color:#007f7f">containsBean</span>(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;  
</span></span><span style="display:flex;"><span>			beanFactory.<span style="color:#007f7f">isTypeMatch</span>(CONVERSION_SERVICE_BEAN_NAME, ConversionService.<span style="color:#007f7f">class</span>)) {  
</span></span><span style="display:flex;"><span>		beanFactory.<span style="color:#007f7f">setConversionService</span>(  
</span></span><span style="display:flex;"><span>				beanFactory.<span style="color:#007f7f">getBean</span>(CONVERSION_SERVICE_BEAN_NAME, ConversionService.<span style="color:#007f7f">class</span>));  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ä¸ºäº†ç±»å‹åŒ¹é…ï¼Œåœæ­¢ä½¿ç”¨ä¸´æ—¶çš„ç±»åŠ è½½å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	beanFactory.<span style="color:#007f7f">setTempClassLoader</span>(<span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ç¼“å­˜å®¹å™¨ä¸­æ‰€æœ‰æ³¨å†Œçš„BeanDefinitionå…ƒæ•°æ®ï¼Œä»¥é˜²è¢«ä¿®æ”¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	beanFactory.<span style="color:#007f7f">freezeConfiguration</span>();  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹é…ç½®äº†lazy-initå±æ€§çš„å•æ€æ¨¡å¼Beanè¿›è¡Œé¢„å®ä¾‹åŒ–å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	beanFactory.<span style="color:#007f7f">preInstantiateSingletons</span>();  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ConfigurableListableBeanFactoryæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶preInstantiateSingletonsæ–¹æ³•ç”±å…¶å­ç±»
DefaultListableBeanFactoryæä¾›ã€‚</p>
<ul>
<li>DefaultListableBeanFactoryå¯¹é…ç½®lazy-initå±æ€§å•æ€Beançš„é¢„å®ä¾‹åŒ–</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å¯¹é…ç½®lazy-initå±æ€§å•æ€Beançš„é¢„å®ä¾‹åŒ–  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> preInstantiateSingletons() <span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">logger</span>.<span style="color:#007f7f">isInfoEnabled</span>()) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">logger</span>.<span style="color:#007f7f">info</span>(<span style="color:#0ff;font-weight:bold">&#34;Pre-instantiating singletons in &#34;</span> + <span style="color:#fff;font-weight:bold">this</span>);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//åœ¨å¯¹é…ç½®lazy-initå±æ€§å•æ€Beançš„é¢„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»å¤šçº¿ç¨‹åŒæ­¥ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionMap</span>) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">for</span> (String beanName : <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">beanDefinitionNames</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–æŒ‡å®šåç§°çš„Beanå®šä¹‰  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//Beanä¸æ˜¯æŠ½è±¡çš„ï¼Œæ˜¯å•æ€æ¨¡å¼çš„ï¼Œä¸”lazy-initå±æ€§é…ç½®ä¸ºfalse  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">if</span> (!bd.<span style="color:#007f7f">isAbstract</span>() &amp;&amp; bd.<span style="color:#007f7f">isSingleton</span>() &amp;&amp; !bd.<span style="color:#007f7f">isLazyInit</span>()) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å¦‚æœæŒ‡å®šåç§°çš„beanæ˜¯åˆ›å»ºå®¹å™¨çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">if</span> (isFactoryBean(beanName)) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//FACTORY_BEAN_PREFIX=â€&amp;â€ï¼Œå½“Beanåç§°å‰é¢åŠ â€&amp;â€ç¬¦å·  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			   <span style="color:#007f7f">//æ—¶ï¼Œè·å–çš„æ˜¯äº§ç”Ÿå®¹å™¨å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯å®¹å™¨äº§ç”Ÿçš„Bean.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			   <span style="color:#007f7f">//è°ƒç”¨getBeanæ–¹æ³•ï¼Œè§¦å‘å®¹å™¨å¯¹Beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥è¿‡ç¨‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					<span style="color:#fff;font-weight:bold">final</span> FactoryBean factory = (FactoryBean) getBean(FACTORY_BEAN_PREFIX + beanName);  
</span></span><span style="display:flex;"><span>					<span style="color:#007f7f">//æ ‡è¯†æ˜¯å¦éœ€è¦é¢„å®ä¾‹åŒ–  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					<span style="color:#fff;font-weight:bold">boolean</span> isEagerInit;  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; factory <span style="color:#fff;font-weight:bold">instanceof</span> SmartFactoryBean) {  
</span></span><span style="display:flex;"><span>						<span style="color:#007f7f">//ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>						isEagerInit = AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedAction&lt;Boolean&gt;() {  
</span></span><span style="display:flex;"><span>							<span style="color:#fff;font-weight:bold">public</span> Boolean run() {  
</span></span><span style="display:flex;"><span>								<span style="color:#fff;font-weight:bold">return</span> ((SmartFactoryBean) factory).<span style="color:#007f7f">isEagerInit</span>();  
</span></span><span style="display:flex;"><span>							}  
</span></span><span style="display:flex;"><span>						}, getAccessControlContext());  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>						isEagerInit = factory <span style="color:#fff;font-weight:bold">instanceof</span> SmartFactoryBean &amp;&amp; ((SmartFactoryBean) factory).<span style="color:#007f7f">isEagerInit</span>();   
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">if</span> (isEagerInit) {  
</span></span><span style="display:flex;"><span>					   <span style="color:#007f7f">//è°ƒç”¨getBeanæ–¹æ³•ï¼Œè§¦å‘å®¹å™¨å¯¹Beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥è¿‡ç¨‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>						getBean(beanName);  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>					 <span style="color:#007f7f">//è°ƒç”¨getBeanæ–¹æ³•ï¼Œè§¦å‘å®¹å™¨å¯¹Beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥è¿‡ç¨‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					getBean(beanName);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡å¯¹lazy-initå¤„ç†æºç çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœè®¾ç½®äº†lazy-initå±æ€§ï¼Œåˆ™å®¹å™¨åœ¨å®ŒæˆBeanå®šä¹‰çš„æ³¨å†Œä¹‹åï¼Œä¼šé€šè¿‡getBeanæ–¹æ³•ï¼Œè§¦å‘å¯¹æŒ‡å®šBeançš„åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥è¿‡ç¨‹ï¼Œè¿™æ ·å½“åº”ç”¨ç¬¬ä¸€æ¬¡å‘å®¹å™¨ç´¢å–æ‰€éœ€çš„Beanæ—¶ï¼Œå®¹å™¨ä¸å†éœ€è¦å¯¹Beanè¿›è¡Œåˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥ï¼Œç›´æ¥ä»å·²ç»å®Œæˆå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥çš„Beanä¸­å–ä¸€ä¸ªçº¿ç¨‹çš„Beanï¼Œè¿™æ ·å°±æé«˜äº†ç¬¬ä¸€æ¬¡è·å–Beançš„æ€§èƒ½ã€‚</p>
<h2 id="factorybeançš„å®ç°">FactoryBeançš„å®ç°<a hidden class="anchor" aria-hidden="true" href="#factorybeançš„å®ç°">#</a></h2>
<p>åœ¨Springä¸­ï¼Œæœ‰ä¸¤ä¸ªå¾ˆå®¹æ˜“æ··æ·†çš„ç±»ï¼šBeanFactoryå’ŒFactoryBeanã€‚
BeanFactoryï¼šBeanå·¥å‚ï¼Œæ˜¯ä¸€ä¸ªå·¥å‚(Factory)ï¼Œæˆ‘ä»¬Spring IoCå®¹å™¨çš„æœ€é¡¶å±‚æ¥å£å°±æ˜¯è¿™ä¸ªBeanFactoryï¼Œå®ƒçš„ä½œç”¨æ˜¯ç®¡ç†Beanï¼Œå³å®ä¾‹åŒ–ã€å®šä½ã€é…ç½®åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡åŠå»ºç«‹è¿™äº›å¯¹è±¡é—´çš„ä¾èµ–ã€‚</p>
<p>FactoryBeanï¼šå·¥å‚Beanï¼Œæ˜¯ä¸€ä¸ªBeanï¼Œä½œç”¨æ˜¯äº§ç”Ÿå…¶ä»–beanå®ä¾‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ç§beanæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„è¦æ±‚ï¼Œä»…éœ€è¦æä¾›ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥è¿”å›å…¶ä»–beanå®ä¾‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œbeanæ— é¡»è‡ªå·±å®ç°å·¥å‚æ¨¡å¼ï¼ŒSpringå®¹å™¨æ‹…ä»»å·¥å‚è§’è‰²ï¼›ä½†å°‘æ•°æƒ…å†µä¸‹ï¼Œå®¹å™¨ä¸­çš„beanæœ¬èº«å°±æ˜¯å·¥å‚ï¼Œå…¶ä½œç”¨æ˜¯äº§ç”Ÿå…¶å®ƒbeanå®ä¾‹ã€‚</p>
<p>å½“ç”¨æˆ·ä½¿ç”¨å®¹å™¨æœ¬èº«æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è½¬ä¹‰å­—ç¬¦â€&amp;â€æ¥å¾—åˆ°FactoryBeanæœ¬èº«ï¼Œä»¥åŒºåˆ«é€šè¿‡FactoryBeanäº§ç”Ÿçš„å®ä¾‹å¯¹è±¡å’ŒFactoryBeanå¯¹è±¡æœ¬èº«ã€‚åœ¨BeanFactoryä¸­é€šè¿‡å¦‚ä¸‹ä»£ç å®šä¹‰äº†è¯¥è½¬ä¹‰å­—ç¬¦ï¼š
<code>StringFACTORY_BEAN_PREFIX = &quot;&amp;&quot;;</code>
å¦‚æœmyJndiObjectæ˜¯ä¸€ä¸ªFactoryBeanï¼Œåˆ™ä½¿ç”¨&amp;myJndiObjectå¾—åˆ°çš„æ˜¯myJndiObjectå¯¹è±¡ï¼Œè€Œä¸æ˜¯myJndiObjectäº§ç”Ÿå‡ºæ¥çš„å¯¹è±¡ã€‚</p>
<h3 id="factorybeançš„æºç å¦‚ä¸‹">FactoryBeançš„æºç å¦‚ä¸‹<a hidden class="anchor" aria-hidden="true" href="#factorybeançš„æºç å¦‚ä¸‹">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//å·¥å‚Beanï¼Œç”¨äºäº§ç”Ÿå…¶ä»–å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> FactoryBean&lt;T&gt; {  
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">//è·å–å®¹å™¨ç®¡ç†çš„å¯¹è±¡å®ä¾‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    T getObject() <span style="color:#fff;font-weight:bold">throws</span> Exception;  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//è·å–Beanå·¥å‚åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    Class&lt;?&gt; getObjectType();  
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//Beanå·¥å‚åˆ›å»ºçš„å¯¹è±¡æ˜¯å¦æ˜¯å•æ€æ¨¡å¼ï¼Œå¦‚æœæ˜¯å•æ€æ¨¡å¼ï¼Œåˆ™æ•´ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   <span style="color:#007f7f">//å¯¹è±¡ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¿”å›åŒä¸€ä¸ªå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">boolean</span> isSingleton();  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="abstractbeanfactoryçš„getbeanæ–¹æ³•è°ƒç”¨factorybean">AbstractBeanFactoryçš„getBeanæ–¹æ³•è°ƒç”¨FactoryBean<a hidden class="anchor" aria-hidden="true" href="#abstractbeanfactoryçš„getbeanæ–¹æ³•è°ƒç”¨factorybean">#</a></h3>
<p>åœ¨å‰é¢æˆ‘ä»¬åˆ†æSpring Iocå®¹å™¨å®ä¾‹åŒ–Beanå¹¶è¿›è¡Œä¾èµ–æ³¨å…¥è¿‡ç¨‹çš„æºç æ—¶ï¼Œæåˆ°åœ¨getBeanæ–¹æ³•è§¦å‘å®¹å™¨å®ä¾‹åŒ–Beançš„æ—¶å€™ä¼šè°ƒç”¨AbstractBeanFactoryçš„doGetBeanæ–¹æ³•æ¥è¿›è¡Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œæºç å¦‚ä¸‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#007f7f">//çœŸæ­£å®ç°å‘IoCå®¹å™¨è·å–Beançš„åŠŸèƒ½ï¼Œä¹Ÿæ˜¯è§¦å‘ä¾èµ–æ³¨å…¥åŠŸèƒ½çš„åœ°æ–¹    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>  @SuppressWarnings(<span style="color:#0ff;font-weight:bold">&#34;unchecked&#34;</span>)    
</span></span><span style="display:flex;"><span>  <span style="color:#fff;font-weight:bold">protected</span> &lt;T&gt; T doGetBean(    
</span></span><span style="display:flex;"><span>		  <span style="color:#fff;font-weight:bold">final</span> String name, <span style="color:#fff;font-weight:bold">final</span> Class&lt;T&gt; requiredType, <span style="color:#fff;font-weight:bold">final</span> Object[] args, <span style="color:#fff;font-weight:bold">boolean</span> typeCheckOnly)    
</span></span><span style="display:flex;"><span>		  <span style="color:#fff;font-weight:bold">throws</span> BeansException {    
</span></span><span style="display:flex;"><span>	  <span style="color:#007f7f">//æ ¹æ®æŒ‡å®šçš„åç§°è·å–è¢«ç®¡ç†Beançš„åç§°ï¼Œå‰¥ç¦»æŒ‡å®šåç§°ä¸­å¯¹å®¹å™¨çš„ç›¸å…³ä¾èµ–    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	  <span style="color:#007f7f">//å¦‚æœæŒ‡å®šçš„æ˜¯åˆ«åï¼Œå°†åˆ«åè½¬æ¢ä¸ºè§„èŒƒçš„Beanåç§°    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	  <span style="color:#fff;font-weight:bold">final</span> String beanName = transformedBeanName(name);    
</span></span><span style="display:flex;"><span>	  Object bean;    
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å…ˆä»ç¼“å­˜ä¸­å–æ˜¯å¦å·²ç»æœ‰è¢«åˆ›å»ºè¿‡çš„å•æ€ç±»å‹çš„Beanï¼Œå¯¹äºå•æ€æ¨¡å¼çš„Beanæ•´    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//ä¸ªIoCå®¹å™¨ä¸­åªåˆ›å»ºä¸€æ¬¡ï¼Œä¸éœ€è¦é‡å¤åˆ›å»º    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	  Object sharedInstance = getSingleton(beanName);    
</span></span><span style="display:flex;"><span>	  <span style="color:#007f7f">//IoCå®¹å™¨åˆ›å»ºå•æ€æ¨¡å¼Beanå®ä¾‹å¯¹è±¡    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	  <span style="color:#fff;font-weight:bold">if</span> (sharedInstance != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; args == <span style="color:#fff;font-weight:bold">null</span>) {    
</span></span><span style="display:flex;"><span>		  <span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {    
</span></span><span style="display:flex;"><span>		  <span style="color:#007f7f">//å¦‚æœæŒ‡å®šåç§°çš„Beanåœ¨å®¹å™¨ä¸­å·²æœ‰å•æ€æ¨¡å¼çš„Beanè¢«åˆ›å»ºï¼Œç›´æ¥è¿”å›    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#007f7f">//å·²ç»åˆ›å»ºçš„Bean    
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			  <span style="color:#fff;font-weight:bold">if</span> (isSingletonCurrentlyInCreation(beanName)) {    
</span></span><span style="display:flex;"><span>				  logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Returning eagerly cached instance of singleton bean &#39;&#34;</span> + beanName +    
</span></span><span style="display:flex;"><span>						  <span style="color:#0ff;font-weight:bold">&#34;&#39; that is not fully initialized yet - a consequence of a circular reference&#34;</span>);    
</span></span><span style="display:flex;"><span>			  }    
</span></span><span style="display:flex;"><span>			  <span style="color:#fff;font-weight:bold">else</span> {    
</span></span><span style="display:flex;"><span>				  logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Returning cached instance of singleton bean &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);    
</span></span><span style="display:flex;"><span>			  }    
</span></span><span style="display:flex;"><span>		  }    
</span></span><span style="display:flex;"><span>		  <span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡ï¼Œä¸»è¦æ˜¯å®ŒæˆFactoryBeançš„ç›¸å…³å¤„ç†   
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		  bean = getObjectForBeanInstance(sharedInstance, name, beanName, <span style="color:#fff;font-weight:bold">null</span>);    
</span></span><span style="display:flex;"><span>	  }    
</span></span><span style="display:flex;"><span>	 <span style="color:#f00">â€¦â€¦</span>  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡ï¼Œä¸»è¦æ˜¯å®ŒæˆFactoryBeançš„ç›¸å…³å¤„ç† 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object getObjectForBeanInstance(  
</span></span><span style="display:flex;"><span>		Object beanInstance, String name, String beanName, RootBeanDefinition mbd) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å®¹å™¨å·²ç»å¾—åˆ°äº†Beanå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡å¯èƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„Beanï¼Œä¹Ÿå¯èƒ½æ˜¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//ä¸€ä¸ªå·¥å‚Beanï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå·¥å‚Beanï¼Œåˆ™ä½¿ç”¨å®ƒåˆ›å»ºä¸€ä¸ªBeanå®ä¾‹å¯¹è±¡ï¼Œå¦‚æœ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//è°ƒç”¨æœ¬èº«å°±æƒ³è·å¾—ä¸€ä¸ªå®¹å™¨çš„å¼•ç”¨ï¼Œåˆ™æŒ‡å®šè¿”å›è¿™ä¸ªå·¥å‚Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//å¦‚æœæŒ‡å®šçš„åç§°æ˜¯å®¹å™¨çš„è§£å¼•ç”¨(dereferenceï¼Œå³æ˜¯å¯¹è±¡æœ¬èº«è€Œéå†…å­˜åœ°å€)ï¼Œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//ä¸”Beanå®ä¾‹ä¹Ÿä¸æ˜¯åˆ›å»ºBeanå®ä¾‹å¯¹è±¡çš„å·¥å‚Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (BeanFactoryUtils.<span style="color:#007f7f">isFactoryDereference</span>(name) &amp;&amp; !(beanInstance <span style="color:#fff;font-weight:bold">instanceof</span> FactoryBean)) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanIsNotAFactoryException(transformedBeanName(name), beanInstance.<span style="color:#007f7f">getClass</span>());  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¦‚æœBeanå®ä¾‹ä¸æ˜¯å·¥å‚Beanï¼Œæˆ–è€…æŒ‡å®šåç§°æ˜¯å®¹å™¨çš„è§£å¼•ç”¨ï¼Œè°ƒç”¨è€…å‘è·å–å¯¹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//å®¹å™¨çš„å¼•ç”¨ï¼Œåˆ™ç›´æ¥è¿”å›å½“å‰çš„Beanå®ä¾‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (!(beanInstance <span style="color:#fff;font-weight:bold">instanceof</span> FactoryBean) || BeanFactoryUtils.<span style="color:#007f7f">isFactoryDereference</span>(name)) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> beanInstance;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å¤„ç†æŒ‡å®šåç§°ä¸æ˜¯å®¹å™¨çš„è§£å¼•ç”¨ï¼Œæˆ–è€…æ ¹æ®åç§°è·å–çš„Beanå®ä¾‹å¯¹è±¡æ˜¯ä¸€ä¸ªå·¥å‚Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½¿ç”¨å·¥å‚Beanåˆ›å»ºä¸€ä¸ªBeançš„å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	Object object = <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">if</span> (mbd == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//ä»Beanå·¥å‚ç¼“å­˜ä¸­è·å–ç»™å®šåç§°çš„Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		object = getCachedObjectForFactoryBean(beanName);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è®©Beanå·¥å‚ç”Ÿäº§ç»™å®šåç§°çš„Beanå¯¹è±¡å®ä¾‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (object == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>		FactoryBean factory = (FactoryBean) beanInstance;  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¦‚æœä»Beanå·¥å‚ç”Ÿäº§çš„Beanæ˜¯å•æ€æ¨¡å¼çš„ï¼Œåˆ™ç¼“å­˜  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">if</span> (mbd == <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; containsBeanDefinition(beanName)) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä»å®¹å™¨ä¸­è·å–æŒ‡å®šåç§°çš„Beanå®šä¹‰ï¼Œå¦‚æœç»§æ‰¿åŸºç±»ï¼Œåˆ™åˆå¹¶åŸºç±»ç›¸å…³å±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			mbd = getMergedLocalBeanDefinition(beanName);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¦‚æœä»å®¹å™¨å¾—åˆ°Beanå®šä¹‰ä¿¡æ¯ï¼Œå¹¶ä¸”Beanå®šä¹‰ä¿¡æ¯ä¸æ˜¯è™šæ„çš„ï¼Œåˆ™è®©å·¥å‚  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//Beanç”Ÿäº§Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">boolean</span> synthetic = (mbd != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; mbd.<span style="color:#007f7f">isSynthetic</span>());  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//è°ƒç”¨FactoryBeanRegistrySupportç±»çš„getObjectFromFactoryBean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//æ–¹æ³•ï¼Œå®ç°å·¥å‚Beanç”Ÿäº§Beanå¯¹è±¡å®ä¾‹çš„è¿‡ç¨‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		object = getObjectFromFactoryBean(factory, beanName, !synthetic);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> object;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸Šé¢è·å–ç»™å®šBeançš„å®ä¾‹å¯¹è±¡çš„getObjectForBeanInstanceæ–¹æ³•ä¸­ï¼Œ
ä¼šè°ƒç”¨FactoryBeanRegistrySupportç±»çš„getObjectFromFactoryBeanæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®ç°äº†Beanå·¥å‚ç”Ÿäº§Beanå®ä¾‹å¯¹è±¡ã€‚
Dereference(è§£å¼•ç”¨)ï¼šä¸€ä¸ªåœ¨C/C++ä¸­åº”ç”¨æ¯”è¾ƒå¤šçš„æœ¯è¯­ï¼Œåœ¨C++ä¸­ï¼Œâ€*â€æ˜¯è§£å¼•ç”¨ç¬¦å·ï¼Œè€Œâ€&amp;â€æ˜¯å¼•ç”¨ç¬¦å·ï¼Œè§£å¼•ç”¨æ˜¯æŒ‡å˜é‡æŒ‡å‘çš„æ˜¯æ‰€å¼•ç”¨å¯¹è±¡çš„æœ¬èº«æ•°æ®ï¼Œè€Œä¸æ˜¯å¼•ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</p>
<h3 id="abstractbeanfactoryç”Ÿäº§beanå®ä¾‹å¯¹è±¡">AbstractBeanFactoryç”Ÿäº§Beanå®ä¾‹å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#abstractbeanfactoryç”Ÿäº§beanå®ä¾‹å¯¹è±¡">#</a></h3>
<p>AbstractBeanFactoryç±»ä¸­ç”Ÿäº§Beanå®ä¾‹å¯¹è±¡çš„ä¸»è¦æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//Beanå·¥å‚ç”Ÿäº§Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object getObjectFromFactoryBean(FactoryBean factory, String beanName, <span style="color:#fff;font-weight:bold">boolean</span> shouldPostProcess) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//Beanå·¥å‚æ˜¯å•æ€æ¨¡å¼ï¼Œå¹¶ä¸”Beanå·¥å‚ç¼“å­˜ä¸­å­˜åœ¨æŒ‡å®šåç§°çš„Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (factory.<span style="color:#007f7f">isSingleton</span>() &amp;&amp; containsSingleton(beanName)) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¤šçº¿ç¨‹åŒæ­¥ï¼Œä»¥é˜²æ­¢æ•°æ®ä¸ä¸€è‡´  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">synchronized</span> (getSingletonMutex()) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ç›´æ¥ä»Beanå·¥å‚ç¼“å­˜ä¸­è·å–æŒ‡å®šåç§°çš„Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Object object = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">factoryBeanObjectCache</span>.<span style="color:#007f7f">get</span>(beanName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//Beanå·¥å‚ç¼“å­˜ä¸­æ²¡æœ‰æŒ‡å®šåç§°çš„å®ä¾‹å¯¹è±¡ï¼Œåˆ™ç”Ÿäº§è¯¥å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">if</span> (object == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//è°ƒç”¨Beanå·¥å‚çš„getObjectæ–¹æ³•ç”Ÿäº§æŒ‡å®šBeançš„å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				object = doGetObjectFromFactoryBean(factory, beanName, shouldPostProcess);  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å°†ç”Ÿäº§çš„å®ä¾‹å¯¹è±¡æ·»åŠ åˆ°Beanå·¥å‚ç¼“å­˜ä¸­  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">factoryBeanObjectCache</span>.<span style="color:#007f7f">put</span>(beanName, (object != <span style="color:#fff;font-weight:bold">null</span> ? object : NULL_OBJECT));  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">return</span> (object != NULL_OBJECT ? object : <span style="color:#fff;font-weight:bold">null</span>);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è°ƒç”¨Beanå·¥å‚çš„getObjectæ–¹æ³•ç”Ÿäº§æŒ‡å®šBeançš„å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> doGetObjectFromFactoryBean(factory, beanName, shouldPostProcess);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è°ƒç”¨Beanå·¥å‚çš„getObjectæ–¹æ³•ç”Ÿäº§æŒ‡å®šBeançš„å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> Object doGetObjectFromFactoryBean(  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">final</span> FactoryBean factory, <span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> <span style="color:#fff;font-weight:bold">boolean</span> shouldPostProcess)  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throws</span> BeanCreationException {  
</span></span><span style="display:flex;"><span>	Object object;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			AccessControlContext acc = getAccessControlContext();  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//å®ç°PrivilegedExceptionActionæ¥å£çš„åŒ¿åå†…ç½®ç±»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#007f7f">//æ ¹æ®JVMæ£€æŸ¥æƒé™ï¼Œç„¶åå†³å®šBeanFactoryåˆ›å»ºå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				object = AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedExceptionAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">public</span> Object run() <span style="color:#fff;font-weight:bold">throws</span> Exception {  
</span></span><span style="display:flex;"><span>							<span style="color:#007f7f">//è°ƒç”¨BeanFactoryæ¥å£å®ç°ç±»çš„åˆ›å»ºå¯¹è±¡æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>							<span style="color:#fff;font-weight:bold">return</span> factory.<span style="color:#007f7f">getObject</span>();  
</span></span><span style="display:flex;"><span>						}  
</span></span><span style="display:flex;"><span>					}, acc);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">catch</span> (PrivilegedActionException pae) {  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">throw</span> pae.<span style="color:#007f7f">getException</span>();  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è°ƒç”¨BeanFactoryæ¥å£å®ç°ç±»çš„åˆ›å»ºå¯¹è±¡æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			object = factory.<span style="color:#007f7f">getObject</span>();  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">catch</span> (FactoryBeanNotInitializedException ex) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCurrentlyInCreationException(beanName, ex.<span style="color:#007f7f">toString</span>());  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(beanName, <span style="color:#0ff;font-weight:bold">&#34;FactoryBean threw exception on object creation&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡ä¸ºnullï¼Œæˆ–è€…å› ä¸ºå•æ€å¯¹è±¡æ­£åœ¨åˆ›å»ºè€Œè¿”å›null  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (object == <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; isSingletonCurrentlyInCreation(beanName)) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCurrentlyInCreationException(  
</span></span><span style="display:flex;"><span>				beanName, <span style="color:#0ff;font-weight:bold">&#34;FactoryBean which is currently in creation returned null from getObject&#34;</span>);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ä¸ºåˆ›å»ºå‡ºæ¥çš„Beanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (object != <span style="color:#fff;font-weight:bold">null</span> &amp;&amp; shouldPostProcess) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>			object = postProcessObjectFromFactoryBean(object, beanName);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(beanName, <span style="color:#0ff;font-weight:bold">&#34;Post-processing of the FactoryBean&#39;s object failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> object;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä¸Šé¢çš„æºç åˆ†æä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒBeanFactoryæ¥å£è°ƒç”¨å…¶å®ç°ç±»çš„getObjectæ–¹æ³•æ¥å®ç°åˆ›å»ºBeanå®ä¾‹å¯¹è±¡çš„åŠŸèƒ½ã€‚</p>
<h3 id="å·¥å‚beançš„å®ç°ç±»getobjectæ–¹æ³•åˆ›å»ºbeanå®ä¾‹å¯¹è±¡">å·¥å‚Beançš„å®ç°ç±»getObjectæ–¹æ³•åˆ›å»ºBeanå®ä¾‹å¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#å·¥å‚beançš„å®ç°ç±»getobjectæ–¹æ³•åˆ›å»ºbeanå®ä¾‹å¯¹è±¡">#</a></h3>
<p>FactoryBeançš„å®ç°ç±»æœ‰éå¸¸å¤šï¼Œæ¯”å¦‚ï¼šProxyã€RMIã€JNDIã€ServletContextFactoryBeanç­‰ç­‰ï¼Œ
FactoryBeanæ¥å£ä¸ºSpringå®¹å™¨æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å°è£…æœºåˆ¶ï¼Œå…·ä½“çš„getObjectæœ‰ä¸åŒçš„å®ç°ç±»æ ¹æ®ä¸åŒçš„å®ç°ç­–ç•¥æ¥å…·ä½“æä¾›ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸ªæœ€ç®€å•çš„AnnotationTestFactoryBeançš„å®ç°æºç ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AnnotationTestBeanFactory <span style="color:#fff;font-weight:bold">implements</span> FactoryBean&lt;IJmxTestBean&gt; {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> <span style="color:#fff;font-weight:bold">final</span> FactoryCreatedAnnotationTestBean instance = <span style="color:#fff;font-weight:bold">new</span> FactoryCreatedAnnotationTestBean();  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> AnnotationTestBeanFactory() {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">instance</span>.<span style="color:#007f7f">setName</span>(<span style="color:#0ff;font-weight:bold">&#34;FACTORY&#34;</span>);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//AnnotationTestBeanFactoryäº§ç”ŸBeanå®ä¾‹å¯¹è±¡çš„å®ç°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">public</span> IJmxTestBean getObject() <span style="color:#fff;font-weight:bold">throws</span> Exception {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">instance</span>;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> Class&lt;? <span style="color:#fff;font-weight:bold">extends</span> IJmxTestBean&gt; getObjectType() {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> FactoryCreatedAnnotationTestBean.<span style="color:#007f7f">class</span>;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">boolean</span> isSingleton() {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä»–çš„Proxyï¼ŒRMIï¼ŒJNDIç­‰ç­‰ï¼Œéƒ½æ˜¯æ ¹æ®ç›¸åº”çš„ç­–ç•¥æä¾›getObjectçš„å®ç°ã€‚è¿™é‡Œä¸åšä¸€ä¸€åˆ†æï¼Œè¿™å·²ç»ä¸æ˜¯Springçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæœ‰éœ€è¦çš„æ—¶å€™å†å»æ·±å…¥ç ”ç©¶ã€‚</p>
<h2 id="beanpostprocessoråç½®å¤„ç†å™¨çš„å®ç°">BeanPostProcessoråç½®å¤„ç†å™¨çš„å®ç°<a hidden class="anchor" aria-hidden="true" href="#beanpostprocessoråç½®å¤„ç†å™¨çš„å®ç°">#</a></h2>
<p>BeanPostProcessoråç½®å¤„ç†å™¨æ˜¯Spring IoCå®¹å™¨ç»å¸¸ä½¿ç”¨åˆ°çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸ªBeanåç½®å¤„ç†å™¨æ˜¯ä¸€ä¸ªç›‘å¬å™¨ï¼Œå¯ä»¥ç›‘å¬å®¹å™¨è§¦å‘çš„Beanå£°æ˜å‘¨æœŸäº‹ä»¶ã€‚åç½®å¤„ç†å™¨å‘å®¹å™¨æ³¨å†Œä»¥åï¼Œå®¹å™¨ä¸­ç®¡ç†çš„Beanå°±å…·å¤‡äº†æ¥æ”¶IoCå®¹å™¨äº‹ä»¶å›è°ƒçš„èƒ½åŠ›ã€‚
BeanPostProcessorçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªå®ç°æ¥å£BeanPostProcessorçš„å®ç°ç±»ï¼Œç„¶ååœ¨Beançš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å³å¯ã€‚</p>
<h3 id="beanpostprocessorçš„æºç å¦‚ä¸‹">BeanPostProcessorçš„æºç å¦‚ä¸‹ï¼š<a hidden class="anchor" aria-hidden="true" href="#beanpostprocessorçš„æºç å¦‚ä¸‹">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> org.springframework.beans.factory.config;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> org.springframework.beans.BeansException;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> BeanPostProcessor {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ä¸ºåœ¨Beançš„åˆå§‹åŒ–å‰æä¾›å›è°ƒå…¥å£  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	Object postProcessBeforeInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException;  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ä¸ºåœ¨Beançš„åˆå§‹åŒ–ä¹‹åæä¾›å›è°ƒå…¥å£  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	Object postProcessAfterInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException;  
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸¤ä¸ªå›è°ƒçš„å…¥å£éƒ½æ˜¯å’Œå®¹å™¨ç®¡ç†çš„Beançš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç´§å¯†ç›¸å…³ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æä¾›åœ¨Spring IoCå®¹å™¨åˆå§‹åŒ–Beanè¿‡ç¨‹ä¸­è‡ªå®šä¹‰çš„å¤„ç†æ“ä½œã€‚</p>
<h3 id="abstractautowirecapablebeanfactoryç±»å¯¹å®¹å™¨ç”Ÿæˆçš„beanæ·»åŠ åç½®å¤„ç†å™¨">AbstractAutowireCapableBeanFactoryç±»å¯¹å®¹å™¨ç”Ÿæˆçš„Beanæ·»åŠ åç½®å¤„ç†å™¨<a hidden class="anchor" aria-hidden="true" href="#abstractautowirecapablebeanfactoryç±»å¯¹å®¹å™¨ç”Ÿæˆçš„beanæ·»åŠ åç½®å¤„ç†å™¨">#</a></h3>
<p>BeanPostProcessoråç½®å¤„ç†å™¨çš„è°ƒç”¨å‘ç”Ÿåœ¨Spring IoCå®¹å™¨å®Œæˆå¯¹Beanå®ä¾‹å¯¹è±¡çš„åˆ›å»ºå’Œå±æ€§çš„ä¾èµ–æ³¨å…¥å®Œæˆä¹‹åï¼Œåœ¨å¯¹Springä¾èµ–æ³¨å…¥çš„æºç åˆ†æè¿‡ç¨‹ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œå½“åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡è°ƒç”¨getBeanæ–¹æ³•(lazy-inité¢„å®ä¾‹åŒ–é™¤å¤–)å‘Spring IoCå®¹å™¨ç´¢å–æŒ‡å®šBeanæ—¶è§¦å‘Spring IoCå®¹å™¨åˆ›å»ºBeanå®ä¾‹å¯¹è±¡å¹¶è¿›è¡Œä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ï¼Œå…¶ä¸­çœŸæ­£å®ç°åˆ›å»ºBeanå¯¹è±¡å¹¶è¿›è¡Œä¾èµ–æ³¨å…¥çš„æ–¹æ³•æ˜¯
AbstractAutowireCapableBeanFactoryç±»çš„doCreateBeanæ–¹æ³•ï¼Œä¸»è¦æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#007f7f">//çœŸæ­£åˆ›å»ºBeançš„æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object doCreateBean(<span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> RootBeanDefinition mbd, <span style="color:#fff;font-weight:bold">final</span> Object[] args) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//åˆ›å»ºBeanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#f00">â€¦â€¦</span>  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¯¹Beanå±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		populateBean(beanName, mbd, instanceWrapper);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (exposedObject != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//åœ¨å¯¹Beanå®ä¾‹å¯¹è±¡ç”Ÿæˆå’Œä¾èµ–æ³¨å…¥å®Œæˆä»¥åï¼Œå¼€å§‹å¯¹Beanå®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		   <span style="color:#007f7f">//è¿›è¡Œåˆå§‹åŒ– ï¼Œä¸ºBeanå®ä¾‹å¯¹è±¡åº”ç”¨BeanPostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		   exposedObject = initializeBean(beanName, exposedObject, mbd);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (ex <span style="color:#fff;font-weight:bold">instanceof</span> BeanCreationException &amp;&amp; beanName.<span style="color:#007f7f">equals</span>(((BeanCreationException) ex).<span style="color:#007f7f">getBeanName</span>())) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> (BeanCreationException) ex;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	<span style="color:#f00">â€¦â€¦</span>  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//ä¸ºåº”ç”¨è¿”å›æ‰€éœ€è¦çš„å®ä¾‹å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">return</span> exposedObject;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œä¸ºBeanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨çš„å…¥å£çš„æ˜¯initializeBeanæ–¹æ³•ã€‚</p>
<h3 id="initializebeanæ–¹æ³•ä¸ºå®¹å™¨äº§ç”Ÿçš„beanå®ä¾‹å¯¹è±¡æ·»åŠ beanpostprocessoråç½®å¤„ç†å™¨">initializeBeanæ–¹æ³•ä¸ºå®¹å™¨äº§ç”Ÿçš„Beanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨<a hidden class="anchor" aria-hidden="true" href="#initializebeanæ–¹æ³•ä¸ºå®¹å™¨äº§ç”Ÿçš„beanå®ä¾‹å¯¹è±¡æ·»åŠ beanpostprocessoråç½®å¤„ç†å™¨">#</a></h3>
<p>åŒæ ·åœ¨AbstractAutowireCapableBeanFactoryç±»ä¸­ï¼ŒinitializeBeanæ–¹æ³•å®ç°ä¸ºå®¹å™¨åˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//åˆå§‹å®¹å™¨åˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡ï¼Œä¸ºå…¶æ·»åŠ BeanPostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> Object initializeBean(<span style="color:#fff;font-weight:bold">final</span> String beanName, <span style="color:#fff;font-weight:bold">final</span> Object bean, RootBeanDefinition mbd) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//JDKçš„å®‰å…¨æœºåˆ¶éªŒè¯æƒé™  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (System.<span style="color:#007f7f">getSecurityManager</span>() != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å®ç°PrivilegedActionæ¥å£çš„åŒ¿åå†…éƒ¨ç±»  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		AccessController.<span style="color:#007f7f">doPrivileged</span>(<span style="color:#fff;font-weight:bold">new</span> PrivilegedAction&lt;Object&gt;() {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">public</span> Object run() {  
</span></span><span style="display:flex;"><span>				invokeAwareMethods(beanName, bean);  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">null</span>;  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}, getAccessControlContext());  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//ä¸ºBeanå®ä¾‹å¯¹è±¡åŒ…è£…ç›¸å…³å±æ€§ï¼Œå¦‚åç§°ï¼Œç±»åŠ è½½å™¨ï¼Œæ‰€å±å®¹å™¨ç­‰ä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		invokeAwareMethods(beanName, bean);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	Object wrappedBean = bean;  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹BeanPostProcessoråç½®å¤„ç†å™¨çš„postProcessBeforeInitialization  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//å›è°ƒæ–¹æ³•çš„è°ƒç”¨ï¼Œä¸ºBeanå®ä¾‹åˆå§‹åŒ–å‰åšä¸€äº›å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (mbd == <span style="color:#fff;font-weight:bold">null</span> || !mbd.<span style="color:#007f7f">isSynthetic</span>()) {  
</span></span><span style="display:flex;"><span>		wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è°ƒç”¨Beanå®ä¾‹å¯¹è±¡åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œè¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•æ˜¯åœ¨Spring Beanå®šä¹‰é…ç½®  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//æ–‡ä»¶ä¸­é€šè¿‡init-methodå±æ€§æŒ‡å®šçš„  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>		invokeInitMethods(beanName, wrappedBean, mbd);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">catch</span> (Throwable ex) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> BeanCreationException(  
</span></span><span style="display:flex;"><span>				(mbd != <span style="color:#fff;font-weight:bold">null</span> ? mbd.<span style="color:#007f7f">getResourceDescription</span>() : <span style="color:#fff;font-weight:bold">null</span>),  
</span></span><span style="display:flex;"><span>				beanName, <span style="color:#0ff;font-weight:bold">&#34;Invocation of init method failed&#34;</span>, ex);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹BeanPostProcessoråç½®å¤„ç†å™¨çš„postProcessAfterInitialization  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//å›è°ƒæ–¹æ³•çš„è°ƒç”¨ï¼Œä¸ºBeanå®ä¾‹åˆå§‹åŒ–ä¹‹ååšä¸€äº›å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (mbd == <span style="color:#fff;font-weight:bold">null</span> || !mbd.<span style="color:#007f7f">isSynthetic</span>()) {  
</span></span><span style="display:flex;"><span>		wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> wrappedBean;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è°ƒç”¨BeanPostProcessoråç½®å¤„ç†å™¨å®ä¾‹å¯¹è±¡åˆå§‹åŒ–ä¹‹å‰çš„å¤„ç†æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object applyBeanPostProcessorsBeforeInitialization(Object existingBean, String beanName)  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	Object result = existingBean;  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//éå†å®¹å™¨ä¸ºæ‰€åˆ›å»ºçš„Beanæ·»åŠ çš„æ‰€æœ‰BeanPostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">for</span> (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//è°ƒç”¨Beanå®ä¾‹æ‰€æœ‰çš„åç½®å¤„ç†ä¸­çš„åˆå§‹åŒ–å‰å¤„ç†æ–¹æ³•ï¼Œä¸ºBeanå®ä¾‹å¯¹è±¡åœ¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//åˆå§‹åŒ–ä¹‹å‰åšä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†æ“ä½œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		result = beanProcessor.<span style="color:#007f7f">postProcessBeforeInitialization</span>(result, beanName);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (result == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">return</span> result;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> result;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//è°ƒç”¨BeanPostProcessoråç½®å¤„ç†å™¨å®ä¾‹å¯¹è±¡åˆå§‹åŒ–ä¹‹åçš„å¤„ç†æ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object applyBeanPostProcessorsAfterInitialization(Object existingBean, String beanName)  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	Object result = existingBean;  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//éå†å®¹å™¨ä¸ºæ‰€åˆ›å»ºçš„Beanæ·»åŠ çš„æ‰€æœ‰BeanPostProcessoråç½®å¤„ç†å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">for</span> (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//è°ƒç”¨Beanå®ä¾‹æ‰€æœ‰çš„åç½®å¤„ç†ä¸­çš„åˆå§‹åŒ–åå¤„ç†æ–¹æ³•ï¼Œä¸ºBeanå®ä¾‹å¯¹è±¡åœ¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//åˆå§‹åŒ–ä¹‹ååšä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†æ“ä½œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		result = beanProcessor.<span style="color:#007f7f">postProcessAfterInitialization</span>(result, beanName);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (result == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">return</span> result;  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> result;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>BeanPostProcessoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶åˆå§‹åŒ–å‰çš„æ“ä½œæ–¹æ³•å’Œåˆå§‹åŒ–åçš„æ“ä½œæ–¹æ³•å‡å§”æ‰˜å…¶å®ç°å­ç±»æ¥å®ç°ï¼Œåœ¨Springä¸­ï¼ŒBeanPostProcessorçš„å®ç°å­ç±»éå¸¸çš„å¤šï¼Œåˆ†åˆ«å®Œæˆä¸åŒçš„æ“ä½œï¼Œå¦‚ï¼šAOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ³¨å†Œé€šçŸ¥é€‚é…å™¨ã€Beanå¯¹è±¡çš„æ•°æ®æ ¡éªŒã€Beanç»§æ‰¿å±æ€§/æ–¹æ³•çš„åˆå¹¶ç­‰ç­‰ï¼Œæˆ‘ä»¬ä»¥æœ€ç®€å•çš„AOPåˆ‡é¢ç»‡å…¥æ¥ç®€å•äº†è§£å…¶ä¸»è¦çš„åŠŸèƒ½ã€‚</p>
<h3 id="advisoradapterregistrationmanageråœ¨beanå¯¹è±¡åˆå§‹åŒ–åæ³¨å†Œé€šçŸ¥é€‚é…å™¨">AdvisorAdapterRegistrationManageråœ¨Beanå¯¹è±¡åˆå§‹åŒ–åæ³¨å†Œé€šçŸ¥é€‚é…å™¨<a hidden class="anchor" aria-hidden="true" href="#advisoradapterregistrationmanageråœ¨beanå¯¹è±¡åˆå§‹åŒ–åæ³¨å†Œé€šçŸ¥é€‚é…å™¨">#</a></h3>
<p>AdvisorAdapterRegistrationManageræ˜¯BeanPostProcessorçš„ä¸€ä¸ªå®ç°ç±»ï¼Œå…¶ä¸»è¦çš„ä½œç”¨ä¸ºå®¹å™¨ä¸­ç®¡ç†çš„Beanæ³¨å†Œä¸€ä¸ªé¢å‘åˆ‡é¢ç¼–ç¨‹çš„é€šçŸ¥é€‚é…å™¨ï¼Œä»¥ä¾¿åœ¨Springå®¹å™¨ä¸ºæ‰€ç®¡ç†çš„Beanè¿›è¡Œé¢å‘åˆ‡é¢ç¼–ç¨‹æ—¶æä¾›æ–¹ä¾¿ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä¸ºå®¹å™¨ä¸­ç®¡ç†çš„Beanæ³¨å†Œä¸€ä¸ªé¢å‘åˆ‡é¢ç¼–ç¨‹çš„é€šçŸ¥é€‚é…å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AdvisorAdapterRegistrationManager <span style="color:#fff;font-weight:bold">implements</span> BeanPostProcessor {  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å®¹å™¨ä¸­è´Ÿè´£ç®¡ç†åˆ‡é¢é€šçŸ¥é€‚é…å™¨æ³¨å†Œçš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">private</span> AdvisorAdapterRegistry advisorAdapterRegistry = GlobalAdvisorAdapterRegistry.<span style="color:#007f7f">getInstance</span>();  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAdvisorAdapterRegistry(AdvisorAdapterRegistry advisorAdapterRegistry) {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">advisorAdapterRegistry</span> = advisorAdapterRegistry;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//BeanPostProcessoråœ¨Beanå¯¹è±¡åˆå§‹åŒ–å‰çš„æ“ä½œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object postProcessBeforeInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//æ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç›´æ¥è¿”å›å®¹å™¨åˆ›å»ºçš„Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">return</span> bean;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//BeanPostProcessoråœ¨Beanå¯¹è±¡åˆå§‹åŒ–åçš„æ“ä½œ  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> Object postProcessAfterInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">if</span> (bean <span style="color:#fff;font-weight:bold">instanceof</span> AdvisorAdapter){  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¦‚æœå®¹å™¨åˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡æ˜¯ä¸€ä¸ªåˆ‡é¢é€šçŸ¥é€‚é…å™¨ï¼Œåˆ™å‘å®¹å™¨çš„æ³¨å†Œ              this.advisorAdapterRegistry.registerAdvisorAdapter((AdvisorAdapter) bean);  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> bean;  
</span></span><span style="display:flex;"><span>}  
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä»–çš„BeanPostProcessoræ¥å£å®ç°ç±»çš„ä¹Ÿç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹Beanå¯¹è±¡ä½¿ç”¨åˆ°çš„ä¸€äº›ç‰¹æ€§è¿›è¡Œå¤„ç†ï¼Œæˆ–è€…å‘IoCå®¹å™¨ä¸­æ³¨å†Œï¼Œä¸ºåˆ›å»ºçš„Beanå®ä¾‹å¯¹è±¡åšä¸€äº›è‡ªå®šä¹‰çš„åŠŸèƒ½å¢åŠ ï¼Œè¿™äº›æ“ä½œæ˜¯å®¹å™¨åˆå§‹åŒ–Beanæ—¶è‡ªåŠ¨è§¦å‘çš„ï¼Œä¸éœ€è¦äººä¸ºå¹²é¢„ã€‚</p>
<h2 id="spring-iocå®¹å™¨autowiringå®ç°åŸç†">Spring IoCå®¹å™¨autowiringå®ç°åŸç†<a hidden class="anchor" aria-hidden="true" href="#spring-iocå®¹å™¨autowiringå®ç°åŸç†">#</a></h2>
<p>Spring IoCå®¹å™¨æä¾›äº†ä¸¤ç§ç®¡ç†Beanä¾èµ–å…³ç³»çš„æ–¹å¼</p>
<ul>
<li>æ˜¾å¼ç®¡ç†ï¼š
é€šè¿‡BeanDefinitionçš„å±æ€§å€¼å’Œæ„é€ æ–¹æ³•å®ç°Beanä¾èµ–å…³ç³»ç®¡ç†ã€‚</li>
<li>autowiringï¼š
Spring IoCå®¹å™¨çš„ä¾èµ–è‡ªåŠ¨è£…é…åŠŸèƒ½ï¼Œä¸éœ€è¦å¯¹Beanå±æ€§çš„ä¾èµ–å…³ç³»åšæ˜¾å¼çš„å£°æ˜ï¼Œåªéœ€è¦åœ¨é…ç½®å¥½autowiringå±æ€§ï¼ŒIoCå®¹å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨åå°„æŸ¥æ‰¾å±æ€§çš„ç±»å‹å’Œåç§°ï¼Œç„¶ååŸºäºå±æ€§çš„ç±»å‹æˆ–è€…åç§°æ¥è‡ªåŠ¨åŒ¹é…å®¹å™¨ä¸­ç®¡ç†çš„Beanï¼Œä»è€Œè‡ªåŠ¨åœ°å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li>
</ul>
<p>é€šè¿‡å¯¹autowiringè‡ªåŠ¨è£…é…ç‰¹æ€§çš„ç†è§£ï¼Œæˆ‘ä»¬çŸ¥é“å®¹å™¨å¯¹Beançš„è‡ªåŠ¨è£…é…å‘ç”Ÿåœ¨å®¹å™¨å¯¹Beanä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ä¸­ã€‚åœ¨å‰é¢å¯¹Spring IoCå®¹å™¨çš„ä¾èµ–æ³¨å…¥è¿‡ç¨‹æºç åˆ†æä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å®¹å™¨å¯¹Beanå®ä¾‹å¯¹è±¡çš„å±æ€§æ³¨å…¥çš„å¤„ç†å‘ç”Ÿåœ¨AbstractAutoWireCapableBeanFactoryç±»ä¸­çš„populateBeanæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¨‹åºæµç¨‹åˆ†æautowiringçš„å®ç°åŸç†ï¼š</p>
<h3 id="abstractautowirecapablebeanfactoryå¯¹beanå®ä¾‹è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥">AbstractAutoWireCapableBeanFactoryå¯¹Beanå®ä¾‹è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#abstractautowirecapablebeanfactoryå¯¹beanå®ä¾‹è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥">#</a></h3>
<p>åº”ç”¨ç¬¬ä¸€æ¬¡é€šè¿‡getBeanæ–¹æ³•(é…ç½®äº†lazy-inité¢„å®ä¾‹åŒ–å±æ€§çš„é™¤å¤–)å‘IoCå®¹å™¨ç´¢å–Beanæ—¶ï¼Œå®¹å™¨åˆ›å»ºBeanå®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹Beanå®ä¾‹å¯¹è±¡è¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥ï¼ŒAbstractAutoWireCapableBeanFactoryçš„
populateBeanæ–¹æ³•å°±æ˜¯å®ç°Beanå±æ€§ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ï¼Œå…¶ä¸»è¦æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> populateBean(String beanName, AbstractBeanDefinition mbd, BeanWrapper bw) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è·å–Beanå®šä¹‰çš„å±æ€§å€¼ï¼Œå¹¶å¯¹å±æ€§å€¼è¿›è¡Œå¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	PropertyValues pvs = mbd.<span style="color:#007f7f">getPropertyValues</span>();  
</span></span><span style="display:flex;"><span>	<span style="color:#f00">â€¦â€¦</span>  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹ä¾èµ–æ³¨å…¥å¤„ç†ï¼Œé¦–å…ˆå¤„ç†autowiringè‡ªåŠ¨è£…é…çš„ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_NAME</span> ||  
</span></span><span style="display:flex;"><span>			mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_TYPE</span>) {  
</span></span><span style="display:flex;"><span>		MutablePropertyValues newPvs = <span style="color:#fff;font-weight:bold">new</span> MutablePropertyValues(pvs);  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//æ ¹æ®Beanåç§°è¿›è¡Œautowiringè‡ªåŠ¨è£…é…å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_NAME</span>) {  
</span></span><span style="display:flex;"><span>			autowireByName(beanName, mbd, bw, newPvs);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//æ ¹æ®Beanç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨è£…é…å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">if</span> (mbd.<span style="color:#007f7f">getResolvedAutowireMode</span>() == RootBeanDefinition.<span style="color:#007f7f">AUTOWIRE_BY_TYPE</span>) {  
</span></span><span style="display:flex;"><span>			autowireByType(beanName, mbd, bw, newPvs);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¯¹éautowiringçš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥å¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	 <span style="color:#f00">â€¦â€¦</span>  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="spring-iocå®¹å™¨æ ¹æ®beanåç§°æˆ–è€…ç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥">Spring IoCå®¹å™¨æ ¹æ®Beanåç§°æˆ–è€…ç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#spring-iocå®¹å™¨æ ¹æ®beanåç§°æˆ–è€…ç±»å‹è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">75
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//æ ¹æ®åç§°å¯¹å±æ€§è¿›è¡Œè‡ªåŠ¨ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> autowireByName(  
</span></span><span style="display:flex;"><span>		String beanName, AbstractBeanDefinition mbd, BeanWrapper bw, MutablePropertyValues pvs) {  
</span></span><span style="display:flex;"><span>	 <span style="color:#007f7f">//å¯¹Beanå¯¹è±¡ä¸­éç®€å•å±æ€§(ä¸æ˜¯ç®€å•ç»§æ‰¿çš„å¯¹è±¡ï¼Œå¦‚8ä¸­åŸå§‹ç±»å‹ï¼Œå­—ç¬¦ä¸²ï¼ŒURLç­‰//éƒ½æ˜¯ç®€å•å±æ€§)è¿›è¡Œå¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	String[] propertyNames = unsatisfiedNonSimpleProperties(mbd, bw);  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">for</span> (String propertyName : propertyNames) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å¦‚æœSpring IoCå®¹å™¨ä¸­åŒ…å«æŒ‡å®šåç§°çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#fff;font-weight:bold">if</span> (containsBean(propertyName)) {  
</span></span><span style="display:flex;"><span>			 <span style="color:#007f7f">//è°ƒç”¨getBeanæ–¹æ³•å‘IoCå®¹å™¨ç´¢å–æŒ‡å®šåç§°çš„Beanå®ä¾‹ï¼Œè¿­ä»£è§¦å‘å±æ€§çš„//åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			Object bean = getBean(propertyName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸ºæŒ‡å®šåç§°çš„å±æ€§èµ‹äºˆå±æ€§å€¼  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			pvs.<span style="color:#007f7f">add</span>(propertyName, bean);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//æŒ‡å®šåç§°å±æ€§æ³¨å†Œä¾èµ–Beanåç§°ï¼Œè¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			registerDependentBean(propertyName, beanName);  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>				logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Added autowiring by name from bean name &#39;&#34;</span> + beanName +  
</span></span><span style="display:flex;"><span>						<span style="color:#0ff;font-weight:bold">&#34;&#39; via property &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39; to bean named &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isTraceEnabled</span>()) {  
</span></span><span style="display:flex;"><span>				logger.<span style="color:#007f7f">trace</span>(<span style="color:#0ff;font-weight:bold">&#34;Not autowiring property &#39;&#34;</span> + propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39; of bean &#39;&#34;</span> + beanName +  
</span></span><span style="display:flex;"><span>						<span style="color:#0ff;font-weight:bold">&#34;&#39; by name: no matching bean found&#34;</span>);  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//æ ¹æ®ç±»å‹å¯¹å±æ€§è¿›è¡Œè‡ªåŠ¨ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">protected</span> <span style="color:#fff;font-weight:bold">void</span> autowireByType(  
</span></span><span style="display:flex;"><span>		String beanName, AbstractBeanDefinition mbd, BeanWrapper bw, MutablePropertyValues pvs) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//è·å–ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	TypeConverter converter = getCustomTypeConverter();  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">if</span> (converter == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>		converter = bw;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å­˜æ”¾è§£æçš„è¦æ³¨å…¥çš„å±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	Set&lt;String&gt; autowiredBeanNames = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;String&gt;(<span style="color:#ff0;font-weight:bold">4</span>);  
</span></span><span style="display:flex;"><span>	  <span style="color:#007f7f">//å¯¹Beanå¯¹è±¡ä¸­éç®€å•å±æ€§(ä¸æ˜¯ç®€å•ç»§æ‰¿çš„å¯¹è±¡ï¼Œå¦‚8ä¸­åŸå§‹ç±»å‹ï¼Œå­—ç¬¦  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	 <span style="color:#007f7f">//URLç­‰éƒ½æ˜¯ç®€å•å±æ€§)è¿›è¡Œå¤„ç†  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	String[] propertyNames = unsatisfiedNonSimpleProperties(mbd, bw);  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">for</span> (String propertyName : propertyNames) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">try</span> {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//è·å–æŒ‡å®šå±æ€§åç§°çš„å±æ€§æè¿°å™¨  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			PropertyDescriptor pd = bw.<span style="color:#007f7f">getPropertyDescriptor</span>(propertyName);  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸å¯¹Objectç±»å‹çš„å±æ€§è¿›è¡Œautowiringè‡ªåŠ¨ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			<span style="color:#fff;font-weight:bold">if</span> (!Object.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">equals</span>(pd.<span style="color:#007f7f">getPropertyType</span>())) {  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//è·å–å±æ€§çš„setteræ–¹æ³•  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				MethodParameter methodParam = BeanUtils.<span style="color:#007f7f">getWriteMethodParameter</span>(pd);  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//æ£€æŸ¥æŒ‡å®šç±»å‹æ˜¯å¦å¯ä»¥è¢«è½¬æ¢ä¸ºç›®æ ‡å¯¹è±¡çš„ç±»å‹  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				<span style="color:#fff;font-weight:bold">boolean</span> eager = !PriorityOrdered.<span style="color:#007f7f">class</span>.<span style="color:#007f7f">isAssignableFrom</span>(bw.<span style="color:#007f7f">getWrappedClass</span>());  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//åˆ›å»ºä¸€ä¸ªè¦è¢«æ³¨å…¥çš„ä¾èµ–æè¿°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				DependencyDescriptor desc = <span style="color:#fff;font-weight:bold">new</span> AutowireByTypeDependencyDescriptor(methodParam, eager);  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//æ ¹æ®å®¹å™¨çš„Beanå®šä¹‰è§£æä¾èµ–å…³ç³»ï¼Œè¿”å›æ‰€æœ‰è¦è¢«æ³¨å…¥çš„Beanå¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				Object autowiredArgument = resolveDependency(desc, beanName, autowiredBeanNames, converter);  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">if</span> (autowiredArgument != <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>					<span style="color:#007f7f">//ä¸ºå±æ€§èµ‹å€¼æ‰€å¼•ç”¨çš„å¯¹è±¡  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					pvs.<span style="color:#007f7f">add</span>(propertyName, autowiredArgument);  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#fff;font-weight:bold">for</span> (String autowiredBeanName : autowiredBeanNames) {  
</span></span><span style="display:flex;"><span>					<span style="color:#007f7f">//æŒ‡å®šåç§°å±æ€§æ³¨å†Œä¾èµ–Beanåç§°ï¼Œè¿›è¡Œå±æ€§ä¾èµ–æ³¨å…¥  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>					registerDependentBean(autowiredBeanName, beanName);  
</span></span><span style="display:flex;"><span>					<span style="color:#fff;font-weight:bold">if</span> (logger.<span style="color:#007f7f">isDebugEnabled</span>()) {  
</span></span><span style="display:flex;"><span>						logger.<span style="color:#007f7f">debug</span>(<span style="color:#0ff;font-weight:bold">&#34;Autowiring by type from bean name &#39;&#34;</span> + beanName + <span style="color:#0ff;font-weight:bold">&#34;&#39; via property &#39;&#34;</span> +  
</span></span><span style="display:flex;"><span>								propertyName + <span style="color:#0ff;font-weight:bold">&#34;&#39; to bean named &#39;&#34;</span> + autowiredBeanName + <span style="color:#0ff;font-weight:bold">&#34;&#39;&#34;</span>);  
</span></span><span style="display:flex;"><span>					}  
</span></span><span style="display:flex;"><span>				}  
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">//é‡Šæ”¾å·²è‡ªåŠ¨æ³¨å…¥çš„å±æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>				autowiredBeanNames.<span style="color:#007f7f">clear</span>();  
</span></span><span style="display:flex;"><span>			}  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">catch</span> (BeansException ex) {  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">throw</span> <span style="color:#fff;font-weight:bold">new</span> UnsatisfiedDependencyException(mbd.<span style="color:#007f7f">getResourceDescription</span>(), beanName, propertyName, ex);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä¸Šé¢çš„æºç åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥é€šè¿‡å±æ€§åè¿›è¡Œè‡ªåŠ¨ä¾èµ–æ³¨å…¥çš„ç›¸å¯¹æ¯”é€šè¿‡å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨ä¾èµ–æ³¨å…¥è¦ç¨å¾®ç®€å•ä¸€äº›ï¼Œä½†æ˜¯çœŸæ­£å®ç°å±æ€§æ³¨å…¥çš„æ˜¯DefaultSingletonBeanRegistryç±»çš„registerDependentBeanæ–¹æ³•ã€‚</p>
<h3 id="defaultsingletonbeanregistryçš„registerdependentbeanæ–¹æ³•å¯¹å±æ€§æ³¨å…¥">DefaultSingletonBeanRegistryçš„registerDependentBeanæ–¹æ³•å¯¹å±æ€§æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#defaultsingletonbeanregistryçš„registerdependentbeanæ–¹æ³•å¯¹å±æ€§æ³¨å…¥">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//ä¸ºæŒ‡å®šçš„Beanæ³¨å…¥ä¾èµ–çš„Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> registerDependentBean(String beanName, String dependentBeanName) {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¤„ç†Beanåç§°ï¼Œå°†åˆ«åè½¬æ¢ä¸ºè§„èŒƒçš„Beanåç§°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	String canonicalName = canonicalName(beanName);  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//å¤šçº¿ç¨‹åŒæ­¥ï¼Œä¿è¯å®¹å™¨å†…æ•°æ®çš„ä¸€è‡´æ€§  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#007f7f">//å…ˆä»å®¹å™¨ä¸­ï¼šbeanåç§°--&gt;å…¨éƒ¨ä¾èµ–Beanåç§°é›†åˆæ‰¾æŸ¥æ‰¾ç»™å®šåç§°Beançš„ä¾èµ–Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependentBeanMap</span>) {  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//è·å–ç»™å®šåç§°Beançš„æ‰€æœ‰ä¾èµ–Beanåç§°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		Set&lt;String&gt; dependentBeans = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependentBeanMap</span>.<span style="color:#007f7f">get</span>(canonicalName);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (dependentBeans == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">//ä¸ºBeanè®¾ç½®ä¾èµ–Beanä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>			dependentBeans = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;String&gt;(<span style="color:#ff0;font-weight:bold">8</span>);  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependentBeanMap</span>.<span style="color:#007f7f">put</span>(canonicalName, dependentBeans);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å‘å®¹å™¨ä¸­ï¼šbeanåç§°--&gt;å…¨éƒ¨ä¾èµ–Beanåç§°é›†åˆæ·»åŠ Beançš„ä¾èµ–ä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//å³ï¼Œå°†Beanæ‰€ä¾èµ–çš„Beanæ·»åŠ åˆ°å®¹å™¨çš„é›†åˆä¸­  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		dependentBeans.<span style="color:#007f7f">add</span>(dependentBeanName);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>	  <span style="color:#007f7f">//ä»å®¹å™¨ä¸­ï¼šbeanåç§°--&gt;æŒ‡å®šåç§°Beançš„ä¾èµ–Beané›†åˆæ‰¾æŸ¥æ‰¾ç»™å®šåç§°  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	 <span style="color:#007f7f">//Beançš„ä¾èµ–Bean  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	<span style="color:#fff;font-weight:bold">synchronized</span> (<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependenciesForBeanMap</span>) {  
</span></span><span style="display:flex;"><span>		Set&lt;String&gt; dependenciesForBean = <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependenciesForBeanMap</span>.<span style="color:#007f7f">get</span>(dependentBeanName);  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">if</span> (dependenciesForBean == <span style="color:#fff;font-weight:bold">null</span>) {  
</span></span><span style="display:flex;"><span>			dependenciesForBean = <span style="color:#fff;font-weight:bold">new</span> LinkedHashSet&lt;String&gt;(<span style="color:#ff0;font-weight:bold">8</span>);  
</span></span><span style="display:flex;"><span>			<span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">dependenciesForBeanMap</span>.<span style="color:#007f7f">put</span>(dependentBeanName, dependenciesForBean);  
</span></span><span style="display:flex;"><span>		}  
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//å‘å®¹å™¨ä¸­ï¼šbeanåç§°--&gt;æŒ‡å®šBeançš„ä¾èµ–Beanåç§°é›†åˆæ·»åŠ Beançš„ä¾èµ–ä¿¡æ¯  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		<span style="color:#007f7f">//å³ï¼Œå°†Beanæ‰€ä¾èµ–çš„Beanæ·»åŠ åˆ°å®¹å™¨çš„é›†åˆä¸­  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		dependenciesForBean.<span style="color:#007f7f">add</span>(canonicalName);  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡å¯¹autowiringçš„æºç åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œautowiringçš„å®ç°è¿‡ç¨‹ï¼š</p>
<ol>
<li>å¯¹Beançš„å±æ€§è¿­ä»£è°ƒç”¨getBeanæ–¹æ³•ï¼Œå®Œæˆä¾èµ–Beançš„åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥ã€‚</li>
<li>å°†ä¾èµ–Beançš„å±æ€§å¼•ç”¨è®¾ç½®åˆ°è¢«ä¾èµ–çš„Beanå±æ€§ä¸Šã€‚</li>
<li>å°†ä¾èµ–Beançš„åç§°å’Œè¢«ä¾èµ–Beançš„åç§°å­˜å‚¨åœ¨IoCå®¹å™¨çš„é›†åˆä¸­ã€‚</li>
</ol>
<p>Spring IoCå®¹å™¨çš„autowiringå±æ€§è‡ªåŠ¨ä¾èµ–æ³¨å…¥æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç‰¹æ€§ï¼Œå¯ä»¥ç®€åŒ–å¼€å‘æ—¶çš„é…ç½®ï¼Œä½†æ˜¯å‡¡æ˜¯éƒ½æœ‰ä¸¤é¢æ€§ï¼Œè‡ªåŠ¨å±æ€§ä¾èµ–æ³¨å…¥ä¹Ÿæœ‰ä¸è¶³ï¼Œé¦–å…ˆï¼ŒBeançš„ä¾èµ–å…³ç³»åœ¨é…ç½®æ–‡ä»¶ä¸­æ— æ³•å¾ˆæ¸…æ¥šåœ°çœ‹å‡ºæ¥ï¼Œå¯¹äºç»´æŠ¤é€ æˆä¸€å®šå›°éš¾ã€‚å…¶æ¬¡ï¼Œç”±äºè‡ªåŠ¨ä¾èµ–æ³¨å…¥æ˜¯Springå®¹å™¨è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå®¹å™¨æ˜¯ä¸ä¼šæ™ºèƒ½åˆ¤æ–­çš„ï¼Œå¦‚æœé…ç½®ä¸å½“ï¼Œå°†ä¼šå¸¦æ¥æ— æ³•é¢„æ–™çš„åæœï¼Œæ‰€ä»¥è‡ªåŠ¨ä¾èµ–æ³¨å…¥ç‰¹æ€§åœ¨ä½¿ç”¨æ—¶è¿˜æ˜¯ç»¼åˆè€ƒè™‘ã€‚
<a href="https://www.cnblogs.com/ITtangtang/p/3978349.html">å‚è€ƒ</a>
å‚è€ƒï¼šã€ŠSpring æŠ€æœ¯å†…å¹•ã€‹</p>
<h1 id="spring-bean">Spring bean<a hidden class="anchor" aria-hidden="true" href="#spring-bean">#</a></h1>
<p>bean æ˜¯ä¸€ä¸ªè¢«å®ä¾‹åŒ–ï¼Œç»„è£…ï¼Œå¹¶é€šè¿‡ Spring IoC å®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚
è¿™äº› bean æ˜¯ç”±å…ƒæ•°æ®åˆ›å»ºçš„ï¼Œæ¯”å¦‚å‰è¾¹Beans.xmlä¸­å†™çš„ã€‚
é€šè¿‡å…ƒæ•°æ®æ„å»ºä¸€ä¸ªbeanï¼Œé€šå¸¸éœ€è¦ä¸‹é¢çš„å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>è¿™ä¸ªå±æ€§æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œå¹¶ä¸”æŒ‡å®šç”¨æ¥åˆ›å»º bean çš„ bean ç±»ã€‚</td>
</tr>
<tr>
<td>name</td>
<td>è¿™ä¸ªå±æ€§æŒ‡å®šå”¯ä¸€çš„ bean æ ‡è¯†ç¬¦ã€‚åœ¨åŸºäº XML çš„é…ç½®å…ƒæ•°æ®ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ ID å’Œ/æˆ– name å±æ€§æ¥æŒ‡å®š bean æ ‡è¯†ç¬¦ã€‚</td>
</tr>
<tr>
<td>scope</td>
<td>è¿™ä¸ªå±æ€§æŒ‡å®šç”±ç‰¹å®šçš„ bean å®šä¹‰åˆ›å»ºçš„å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œå®ƒå°†ä¼šåœ¨ bean ä½œç”¨åŸŸçš„ç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
<tr>
<td>constructor-arg</td>
<td>å®ƒæ˜¯ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»çš„ï¼Œå¹¶ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
<tr>
<td>properties</td>
<td>å®ƒæ˜¯ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»çš„ï¼Œå¹¶ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
<tr>
<td>autowiring mode</td>
<td>å®ƒæ˜¯ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»çš„ï¼Œå¹¶ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
<tr>
<td>lazy-initialization mode</td>
<td>å»¶è¿Ÿåˆå§‹åŒ–çš„ bean å‘Šè¯‰ IoC å®¹å™¨åœ¨å®ƒç¬¬ä¸€æ¬¡è¢«è¯·æ±‚æ—¶ï¼Œè€Œä¸æ˜¯åœ¨å¯åŠ¨æ—¶å»åˆ›å»ºä¸€ä¸ª bean å®ä¾‹ã€‚</td>
</tr>
<tr>
<td>initialization æ–¹æ³•</td>
<td>åœ¨ bean çš„æ‰€æœ‰å¿…éœ€çš„å±æ€§è¢«å®¹å™¨è®¾ç½®ä¹‹åï¼Œè°ƒç”¨å›è°ƒæ–¹æ³•ã€‚å®ƒå°†ä¼šåœ¨ bean çš„ç”Ÿå‘½å‘¨æœŸç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
<tr>
<td>destruction æ–¹æ³•</td>
<td>å½“åŒ…å«è¯¥ bean çš„å®¹å™¨è¢«é”€æ¯æ—¶ï¼Œä½¿ç”¨å›è°ƒæ–¹æ³•ã€‚å®ƒå°†ä¼šåœ¨ bean çš„ç”Ÿå‘½å‘¨æœŸç« èŠ‚ä¸­è¿›è¡Œè®¨è®ºã€‚</td>
</tr>
</tbody>
</table>
<p>Bean ä¸ IOC å®¹å™¨çš„å…³ç³»
<img loading="lazy" src="9.png" alt=""  />
</p>
<p>æœ‰ä¸‹é¢ä¸‰ä¸ªé‡è¦çš„æ–¹æ³•æŠŠé…ç½®å…ƒæ•°æ®æä¾›ç»™ Spring å®¹å™¨ï¼š</p>
<ul>
<li>åŸºäº XML çš„é…ç½®æ–‡ä»¶</li>
<li>åŸºäºæ³¨è§£çš„é…ç½®</li>
<li>åŸºäº Java çš„é…ç½®</li>
</ul>
<p>æç¤ºï¼šå¯¹äºåŸºäº XML çš„é…ç½®ï¼ŒSpring 2.0 ä»¥åä½¿ç”¨ Schema çš„æ ¼å¼ï¼Œä½¿å¾—ä¸åŒç±»å‹çš„é…ç½®æ‹¥æœ‰äº†è‡ªå·±çš„å‘½åç©ºé—´ï¼Œä½¿é…ç½®æ–‡ä»¶æ›´å…·æ‰©å±•æ€§ã€‚
ä½ å·²ç»çœ‹åˆ°äº†å¦‚ä½•æŠŠåŸºäº XML çš„é…ç½®å…ƒæ•°æ®æä¾›ç»™å®¹å™¨ï¼Œä½†æ˜¯è®©æˆ‘ä»¬çœ‹çœ‹å¦ä¸€ä¸ªåŸºäº XML é…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­æœ‰ä¸åŒçš„ bean å®šä¹‰ï¼ŒåŒ…æ‹¬å»¶è¿Ÿåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- A simple bean definition --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- A bean definition with lazy init set on --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">lazy-init=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- A bean definition with initialization method --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">init-method=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- A bean definition with destruction method --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">destroy-method=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- more bean definitions go here --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼š
â‘ xmlns=&ldquo;<a href="http://www.springframework.org/schema/beans%22">http://www.springframework.org/schema/beans&quot;</a>ï¼Œ
é»˜è®¤å‘½åç©ºé—´ï¼šå®ƒæ²¡æœ‰ç©ºé—´åï¼Œç”¨äºSpring Beançš„å®šä¹‰ï¼›</p>
<p>â‘¡xmlns:xsi=&ldquo;<a href="http://www.w3.org/2001/XMLSchema-instance%22">http://www.w3.org/2001/XMLSchema-instance&quot;</a>ï¼Œxsiå‘½åç©ºé—´ï¼š
è¿™ä¸ªå‘½åç©ºé—´ç”¨äºä¸ºæ¯ä¸ªæ–‡æ¡£ä¸­å‘½åç©ºé—´æŒ‡å®šç›¸åº”çš„Schemaæ ·å¼æ–‡ä»¶ï¼Œæ˜¯æ ‡å‡†ç»„ç»‡å®šä¹‰çš„æ ‡å‡†å‘½åç©ºé—´ã€‚</p>
<h2 id="beançš„ä½œç”¨åŸŸ">beançš„ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#beançš„ä½œç”¨åŸŸ">#</a></h2>
<p>å½“åœ¨ Spring ä¸­å®šä¹‰ä¸€ä¸ª bean æ—¶ï¼Œä½ å¿…é¡»å£°æ˜è¯¥ bean çš„ä½œç”¨åŸŸã€‚</p>
<table>
<thead>
<tr>
<th>ä½œç”¨åŸŸ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>singleton</td>
<td>åœ¨spring IoCå®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ªBeanå®ä¾‹ï¼ŒBeanä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œé»˜è®¤å€¼</td>
</tr>
<tr>
<td>prototype</td>
<td>æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºæ‰§è¡ŒnewXxxBean()</td>
</tr>
<tr>
<td>request</td>
<td>æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ</td>
</tr>
<tr>
<td>session</td>
<td>åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒSessionä½¿ç”¨ä¸åŒçš„Beanï¼Œä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ</td>
</tr>
<tr>
<td>global-session</td>
<td>ä¸€èˆ¬ç”¨äºPortletåº”ç”¨ç¯å¢ƒï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ</td>
</tr>
</tbody>
</table>
<p>æœ¬ç« å°†è®¨è®ºå‰ä¸¤ä¸ªèŒƒå›´ï¼Œå½“æˆ‘ä»¬å°†è®¨è®ºæœ‰å…³ web-aware Spring ApplicationContext æ—¶ï¼Œå…¶ä½™ä¸‰ä¸ªå°†è¢«è®¨è®ºã€‚</p>
<h3 id="singleton-ä½œç”¨åŸŸ">singleton ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#singleton-ä½œç”¨åŸŸ">#</a></h3>
<p>singleton æ˜¯é»˜è®¤çš„ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å®šä¹‰ Bean æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šä½œç”¨åŸŸé…ç½®é¡¹ï¼Œåˆ™ Bean çš„ä½œç”¨åŸŸè¢«é»˜è®¤ä¸º singletonã€‚å½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸º Singletonï¼Œé‚£ä¹ˆ Spring IoC å®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„bean å®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹ bean çš„è¯·æ±‚ï¼Œåªè¦ id ä¸è¯¥ bean å®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å› bean çš„åŒä¸€å®ä¾‹ã€‚</p>
<p>Singleton æ˜¯å•ä¾‹ç±»å‹ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ª bean çš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä»–éƒ½å­˜åœ¨äº†ï¼Œæ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„ï¼ŒSingleton ä½œç”¨åŸŸæ˜¯ Spring ä¸­çš„ç¼ºçœä½œç”¨åŸŸã€‚</p>
<p>ä½ å¯ä»¥åœ¨ bean çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä½œç”¨åŸŸçš„å±æ€§ä¸º singletonï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- A bean definition with singleton scope --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;singleton&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»§ç»­ä½¿ç”¨å‰é¢çš„hello worldä¾‹å­ï¼Œä¿®æ”¹Beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;singleton&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹ä¸»ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld objA = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        objA.<span style="color:#007f7f">setMessage</span>(<span style="color:#0ff;font-weight:bold">&#34;I&#39;m object A&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objA.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld objB = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objB.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡º
I&rsquo;m object A
I&rsquo;m object A
ä¿®æ”¹äº†objAï¼ŒobjBä¹Ÿæ”¹å˜äº†ã€‚</p>
<h3 id="prototype-ä½œç”¨åŸŸ">prototype ä½œç”¨åŸŸ<a hidden class="anchor" aria-hidden="true" href="#prototype-ä½œç”¨åŸŸ">#</a></h3>
<p>Prototype ä½œç”¨åŸŸè¡¨ç¤ºï¼Œæ¯æ¬¡å¯¹è¯¥ bean è¯·æ±‚æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ã€‚
ï¼ˆè¯·æ±‚ï¼šå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ª bean ä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„ getBean() æ–¹æ³•ï¼‰</p>
<p>Prototype æ˜¯åŸå‹ç±»å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨çš„æ—¶å€™å¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è·å–beançš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚
æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„ bean åº”è¯¥ä½¿ç”¨ prototype ä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„beanåˆ™åº”è¯¥ä½¿ç”¨ singleton ä½œç”¨åŸŸã€‚ä½ å¯ä»¥åœ¨ bean çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä½œç”¨åŸŸçš„å±æ€§ä¸º prototypeï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- A bean definition with singleton scope --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;prototype&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ¬¡åªä¿®æ”¹Beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;?xml version=<span style="color:#0ff;font-weight:bold">&#34;1.0&#34;</span> encoding=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>&lt;beans xmlns=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       xmlns:xsi=<span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       xsi:schemaLocation=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span> scope=<span style="color:#0ff;font-weight:bold">&#34;prototype&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/beans&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç±»ä¸å˜ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š
I&rsquo;m object A
Hello World!
ä¿®æ”¹äº†objAï¼ŒobjBæ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯xmlä¸­å®šä¹‰çš„é»˜è®¤å€¼ã€‚</p>
<h2 id="beançš„ç”Ÿå‘½å‘¨æœŸ">beançš„ç”Ÿå‘½å‘¨æœŸ<a hidden class="anchor" aria-hidden="true" href="#beançš„ç”Ÿå‘½å‘¨æœŸ">#</a></h2>
<p>Beançš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥è¡¨è¾¾ä¸ºï¼šBeançš„å®šä¹‰â€”â€”Beançš„åˆå§‹åŒ–â€”â€”Beançš„ä½¿ç”¨â€”â€”Beançš„é”€æ¯</p>
<h3 id="åˆå§‹åŒ–å›è°ƒ">åˆå§‹åŒ–å›è°ƒ<a hidden class="anchor" aria-hidden="true" href="#åˆå§‹åŒ–å›è°ƒ">#</a></h3>
<p>org.springframework.beans.factory.InitializingBeanæ¥å£ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š
<code>void afterPropertiesSet() throws Exception;</code></p>
<p>å®ç°è¯¥æ¥å£ï¼Œé‡å†™æ–¹æ³•å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExampleBean <span style="color:#fff;font-weight:bold">implements</span> InitializingBean {
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> afterPropertiesSet() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// do some initialization work
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…åœ¨åŸºäº XML çš„é…ç½®å…ƒæ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ init-method å±æ€§æ¥æŒ‡å®šå¸¦æœ‰ void æ— å‚æ•°æ–¹æ³•çš„åç§°ã€‚
<code>&lt;bean id=&quot;exampleBean&quot;  class=&quot;examples.ExampleBean&quot; init-method=&quot;init&quot;/&gt;</code>
æ³¨æ„ï¼šbeançš„ä½œç”¨åŸŸå¿…é¡»æ˜¯scope=&ldquo;singleton&rdquo;</p>
<p>ä¸‹é¢æ˜¯ç±»çš„å®šä¹‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExampleBean {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> init() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// do some initialization work
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é”€æ¯å›è°ƒ">é”€æ¯å›è°ƒ<a hidden class="anchor" aria-hidden="true" href="#é”€æ¯å›è°ƒ">#</a></h3>
<p>org.springframework.beans.factory.DisposableBean
<code>void destroy() throws Exception;</code></p>
<p>å®ç°è¯¥æ¥å£ï¼Œé‡å†™æ–¹æ³•å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExampleBean <span style="color:#fff;font-weight:bold">implements</span> DisposableBean {
</span></span><span style="display:flex;"><span>	@Override
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> destroy() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// do some destruction work
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…åœ¨åŸºäº XML çš„é…ç½®å…ƒæ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ destroy-method å±æ€§æ¥æŒ‡å®šå¸¦æœ‰ void æ— å‚æ•°æ–¹æ³•çš„åç§°ã€‚
<code>&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot; destroy-method=&quot;destroy&quot;/&gt;</code>
æ³¨æ„ï¼šbeançš„ä½œç”¨åŸŸå¿…é¡»æ˜¯scope=&ldquo;singleton&rdquo;</p>
<p>ä¸‹é¢æ˜¯ç±»çš„å®šä¹‰ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExampleBean {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> destroy() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// do some destruction work
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸å»ºè®®ä½¿ç”¨InitializingBean æˆ–è€… DisposableBean çš„å›è°ƒæ–¹æ³•ï¼Œå› ä¸º XML é…ç½®åœ¨å‘½åæ–¹æ³•ä¸Šæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p>
<h3 id="ç¤ºä¾‹">ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#ç¤ºä¾‹">#</a></h3>
<p>ç»§ç»­ä¿®æ”¹hello worldä¾‹å­ï¼Œæ·»åŠ æ— å‚æ–¹æ³•initå’Œdestroy</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage(String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message</span> = message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> init(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bean is going through init.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> destroy(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bean will destroy now.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹Beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;singleton&#34;</span> <span style="color:#007f7f">init-method=</span><span style="color:#0ff;font-weight:bold">&#34;init&#34;</span> <span style="color:#007f7f">destroy-method=</span><span style="color:#0ff;font-weight:bold">&#34;destroy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šbeançš„ä½œç”¨åŸŸå¿…é¡»æ˜¯scope=&ldquo;singleton&rdquo;</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        AbstractApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld objA = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objA.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">//éœ€è¦è°ƒç”¨closeæ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        context.<span style="color:#007f7f">registerShutdownHook</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ æœ‰å¤ªå¤šå…·æœ‰ç›¸åŒåç§°çš„åˆå§‹åŒ–æˆ–è€…é”€æ¯æ–¹æ³•çš„ Beanï¼Œé‚£ä¹ˆä½ ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ª bean ä¸Šå£°æ˜åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚æ¡†æ¶ä½¿ç”¨ å…ƒç´ ä¸­çš„ default-init-method å’Œ default-destroy-method å±æ€§æä¾›äº†çµæ´»åœ°é…ç½®è¿™ç§æƒ…å†µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">default-init-method=</span><span style="color:#0ff;font-weight:bold">&#34;init&#34;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">default-destroy-method=</span><span style="color:#0ff;font-weight:bold">&#34;destroy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="bean-åç½®å¤„ç†å™¨-beanpostprocessor">bean åç½®å¤„ç†å™¨ BeanPostProcessor<a hidden class="anchor" aria-hidden="true" href="#bean-åç½®å¤„ç†å™¨-beanpostprocessor">#</a></h2>
<p>BeanPostProcessor å…è®¸åœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•å‰åå¯¹ Bean è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</p>
<p>æ–°å¢InitHelloWorldæ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> InitHelloWorld <span style="color:#fff;font-weight:bold">implements</span> BeanPostProcessor {
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Object postProcessBeforeInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;BeforeInitialization : &#34;</span> + beanName);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> bean;  <span style="color:#007f7f">// you can return any other object as well
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Object postProcessAfterInitialization(Object bean, String beanName) <span style="color:#fff;font-weight:bold">throws</span> BeansException {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;AfterInitialization : &#34;</span> + beanName);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> bean;  <span style="color:#007f7f">// you can return any other object as well
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹Beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#007f7f">scope=</span><span style="color:#0ff;font-weight:bold">&#34;singleton&#34;</span> <span style="color:#007f7f">init-method=</span><span style="color:#0ff;font-weight:bold">&#34;init&#34;</span> <span style="color:#007f7f">destroy-method=</span><span style="color:#0ff;font-weight:bold">&#34;destroy&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!--æ–°å¢--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.InitHelloWorld&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸»ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        AbstractApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld objA = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objA.<span style="color:#007f7f">getMessage</span>());
</span></span><span style="display:flex;"><span>        context.<span style="color:#007f7f">registerShutdownHook</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºï¼š
BeforeInitialization : helloWorld
Bean is going through init.
AfterInitialization : helloWorld
Hello World!
Bean will destroy now.</p>
<h2 id="beançš„ç»§æ‰¿">beançš„ç»§æ‰¿<a hidden class="anchor" aria-hidden="true" href="#beançš„ç»§æ‰¿">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;?xml version=<span style="color:#0ff;font-weight:bold">&#34;1.0&#34;</span> encoding=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>&lt;beans xmlns=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       xmlns:xsi=<span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       xsi:schemaLocation=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;message1&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;message2&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Hello Second World!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;helloChina&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.helloChina&#34;</span> parent=<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;message1&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Hello China!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;message3&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Hello China again!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/beans&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€ä¸ªbeanï¼ŒHelloWorldæœ‰ä¸¤ä¸ªå±æ€§message1å’Œmessage2ã€‚
ç¬¬äºŒä¸ªbeanï¼ŒhelloChinaç»§æ‰¿è‡ªhelloWorldï¼Œé‡å†™äº†message1å±æ€§ï¼Œç»§æ‰¿äº†message2å±æ€§ï¼Œ
å¹¶ä¸”å¼•å…¥ä¸€ä¸ªæ–°çš„å±æ€§ message3ã€‚</p>
<p>ä¸¤ä¸ªç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld{
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage1() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage1(String message1) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message1</span> = message1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage2() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message2;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage2(String message2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message2</span> = message2;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloChina {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message2;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage1() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage1(String message1) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message1</span> = message1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage2() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message2;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage2(String message2) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message2</span> = message2;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage3() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message3;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage3(String message3) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message3</span> = message3;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç±»</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld objA = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objA.<span style="color:#007f7f">getMessage1</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objA.<span style="color:#007f7f">getMessage2</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloChina objB = (HelloChina) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloChina&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objB.<span style="color:#007f7f">getMessage1</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objB.<span style="color:#007f7f">getMessage2</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(objB.<span style="color:#007f7f">getMessage3</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Hello World!
Hello Second World!
Hello China!
Hello Second World!
Hello China again!</p>
<p>Bean å®šä¹‰æ¨¡æ¿</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;beanTeamplate&#34;</span> <span style="color:#007f7f">abstract=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message1&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message2&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello Second World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message3&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Namaste India!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloIndia&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.HelloIndia&#34;</span> <span style="color:#007f7f">parent=</span><span style="color:#0ff;font-weight:bold">&#34;beanTeamplate&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message1&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello India!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message3&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Namaste India!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>çˆ¶ç±»æ˜¯æŠ½è±¡çš„ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚</p>
<h1 id="spring-ä¾èµ–æ³¨å…¥">spring ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#spring-ä¾èµ–æ³¨å…¥">#</a></h1>
<p>Springæ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€å°±æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥ç®¡ç†Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«æ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä½ æƒ³è¦æä¾›æ‹¼å†™æ£€æŸ¥ã€‚æ ‡å‡†ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;  
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> TextEditor() {
</span></span><span style="display:flex;"><span>      spellChecker = <span style="color:#fff;font-weight:bold">new</span> SpellChecker();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™é‡Œæˆ‘ä»¬æ‰€åšçš„å°±æ˜¯åˆ›å»ºä¸€ä¸ª TextEditor å’Œ SpellChecker ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è€Œåœ¨æ§åˆ¶åè½¬IoCçš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·åšï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> TextEditor(SpellChecker spellChecker) {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™é‡Œï¼ŒTextEditor ä¸åº”è¯¥æ‹…å¿ƒ SpellChecker çš„å®ç°ã€‚SpellChecker å°†ä¼šç‹¬ç«‹å®ç°ï¼Œå¹¶ä¸”åœ¨ TextEditorå®ä¾‹åŒ–çš„æ—¶å€™å°†æä¾›ç»™ TextEditorï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ç”± Spring æ¡†æ¶çš„æ§åˆ¶ã€‚ä¾èµ–æ³¨å…¥çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯é€šè¿‡ TextEditor ç±»çš„ Setter æ–¹æ³•ï¼Œå°†SpellChecker å®ä¾‹ä¼ å…¥åˆ°TextEditor ä¸­ã€‚</p>
<h2 id="åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥">åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TextEditor(SpellChecker spellChecker) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside TextEditor constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck() {
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ Beans.xml çš„å†…å®¹ï¼Œå®ƒæœ‰åŸºäºæ„é€ å‡½æ•°æ³¨å…¥çš„é…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for textEditor bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.TextEditor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for spellChecker bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.SpellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        TextEditor te = (TextEditor) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span>);
</span></span><span style="display:flex;"><span>        te.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
Inside SpellChecker constructor.
Inside TextEditor constructor.
Inside checkSpelling.</p>
<p>å¦‚æœæ„é€ å‡½æ•°éœ€è¦å¤šä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæŒ‰ç…§é¡ºåºä¼ å‚å³å¯ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> x.y;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Foo {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Foo(Bar bar, Baz baz) {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;foo&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;x.y.Foo&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;bar&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;baz&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;bar&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;x.y.Bar&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;baz&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;x.y.Baz&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜å¯ä»¥æŒ‡å®šå‚æ•°ç±»å‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> x.y;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Foo {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Foo(<span style="color:#fff;font-weight:bold">int</span> year, String name) {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;exampleBean&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;examples.ExampleBean&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;int&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;2001&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;java.lang.String&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Zara&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…ä½¿ç”¨ index å±æ€§æ¥æ˜¾å¼çš„æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç´¢å¼•</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;exampleBean&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;examples.ExampleBean&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">index=</span><span style="color:#0ff;font-weight:bold">&#34;0&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;2001&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">index=</span><span style="color:#0ff;font-weight:bold">&#34;1&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Zara&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åï¼Œå¦‚æœä½ æƒ³è¦å‘ä¸€ä¸ªå¯¹è±¡ä¼ é€’ä¸€ä¸ªå¼•ç”¨ï¼Œä½ éœ€è¦ä½¿ç”¨ æ ‡ç­¾çš„ ref å±æ€§ï¼Œå¦‚æœä½ æƒ³è¦ç›´æ¥ä¼ é€’å€¼ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨å¦‚ä¸Šæ‰€ç¤ºçš„ value å±æ€§ã€‚</p>
<h2 id="åŸºäºsetterçš„ä¾èµ–æ³¨å…¥">åŸºäºsetterçš„ä¾èµ–æ³¨å…¥<a hidden class="anchor" aria-hidden="true" href="#åŸºäºsetterçš„ä¾èµ–æ³¨å…¥">#</a></h2>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker getSpellChecker() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSpellChecker(SpellChecker spellChecker) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside TextEditor constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck() {
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for textEditor bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.TextEditor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for spellChecker bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.SpellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        TextEditor te = (TextEditor) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span>);
</span></span><span style="display:flex;"><span>        te.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside SpellChecker constructor.
Inside setSpellChecker.
Inside checkSpelling.</p>
<p>ä½¿ç”¨ p-namespace å®ç° XML é…ç½®ï¼š
å¦‚æœä½ æœ‰è®¸å¤šçš„è®¾å€¼å‡½æ•°æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨ XML é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ p-namespace æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚
çœ‹ä¸€ä¸‹åŒºåˆ«ï¼Œä»¥å¸¦æœ‰ æ ‡ç­¾çš„æ ‡å‡† XML é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;john-classic&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.example.Person&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;name&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;John Doe&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;spouse&#34;</span> <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;jane&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;jane&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.example.Person&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;name&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;John Doe&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿° XML é…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨ p-namespace ä»¥ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼é‡å†™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:p=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/p&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;john-classic&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.example.Person&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">p:name=</span><span style="color:#0ff;font-weight:bold">&#34;John Doe&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">p:spouse-ref=</span><span style="color:#0ff;font-weight:bold">&#34;jane&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;jane&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.example.Person&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">p:name=</span><span style="color:#0ff;font-weight:bold">&#34;John Doe&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ³¨å…¥å†…éƒ¨beans">æ³¨å…¥å†…éƒ¨beans<a hidden class="anchor" aria-hidden="true" href="#æ³¨å…¥å†…éƒ¨beans">#</a></h2>
<p>javaçš„å†…éƒ¨ç±»æ˜¯åœ¨ç±»çš„å†…éƒ¨å®šä¹‰çš„ï¼ŒåŒç†ï¼Œå†…éƒ¨beanæ˜¯åœ¨å…¶ä»–beanå†…å®šä¹‰çš„ã€‚
<property />æˆ–<constructor-arg />å…ƒç´ ä¸­çš„<bean />å…ƒç´ ç§°ä¸ºå†…éƒ¨beanï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;?xml version=<span style="color:#0ff;font-weight:bold">&#34;1.0&#34;</span> encoding=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;beans xmlns=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    xmlns:xsi=<span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    xsi:schemaLocation=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;outerBean&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;...&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;target&#34;</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;innerBean&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;...&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>      &lt;/property&gt;
</span></span><span style="display:flex;"><span>   &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/beans&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹ï¼š
ç»§ç»­ä½¿ç”¨ä¸Šè¾¹çš„ä¾‹å­ï¼Œåªæ”¹å˜beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for textEditor bean using inner bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.TextEditor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.SpellChecker&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸»ç¨‹åºï¼Œç»“æœï¼š
Inside SpellChecker constructor.
Inside TextEditor constructor.
Inside checkSpelling.</p>
<h2 id="æ³¨å…¥é›†åˆ">æ³¨å…¥é›†åˆ<a hidden class="anchor" aria-hidden="true" href="#æ³¨å…¥é›†åˆ">#</a></h2>
<p>å‰è¾¹å·²ç»è¯´äº†</p>
<ul>
<li>å¦‚ä½•ä½¿ç”¨ value å±æ€§æ¥é…ç½®åŸºæœ¬æ•°æ®ç±»å‹</li>
<li>å¦‚ä½•ä½¿ç”¨<code>&lt;property</code>&gt;æ ‡ç­¾çš„ ref å±æ€§æ¥é…ç½®å¯¹è±¡å¼•ç”¨</li>
</ul>
<p>Spring æä¾›äº†å››ç§ç±»å‹çš„é›†åˆçš„é…ç½®å…ƒç´ ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;list&gt;
</span></span><span style="display:flex;"><span>&lt;set&gt;
</span></span><span style="display:flex;"><span>&lt;map&gt;
</span></span><span style="display:flex;"><span>&lt;props&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºéœ€è¦çš„ç±»ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> JavaCollection {
</span></span><span style="display:flex;"><span>    List addressList;
</span></span><span style="display:flex;"><span>    Set addressSet;
</span></span><span style="display:flex;"><span>    Map addressMap;
</span></span><span style="display:flex;"><span>    Properties addressProp;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// a setter method to set List
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAddressList(List addressList) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">addressList</span> = addressList;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// prints and returns all the elements of the list.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> List getAddressList() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;List Elements :&#34;</span>  + addressList);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> addressList;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// a setter method to set Set
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAddressSet(Set addressSet) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">addressSet</span> = addressSet;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// prints and returns all the elements of the Set.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> Set getAddressSet() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Set Elements :&#34;</span>  + addressSet);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> addressSet;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// a setter method to set Map
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAddressMap(Map addressMap) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">addressMap</span> = addressMap;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// prints and returns all the elements of the Map.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> Map getAddressMap() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Map Elements :&#34;</span>  + addressMap);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> addressMap;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// a setter method to set Property
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAddressProp(Properties addressProp) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">addressProp</span> = addressProp;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// prints and returns all the elements of the Property.
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> Properties getAddressProp() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Property Elements :&#34;</span>  + addressProp);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> addressProp;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for javaCollection --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;javaCollection&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.JavaCollection&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- results in a setAddressList(java.util.List) call --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressList&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;list&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>åŒ—äº¬<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>ä¸Šæµ·<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>å¹¿å·<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>æ·±åœ³<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/list&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- results in a setAddressSet(java.util.Set) call --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressSet&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;set&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>åŒ—äº¬<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>ä¸Šæµ·<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>å¹¿å·<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;value&gt;</span>æ·±åœ³<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/set&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- results in a setAddressMap(java.util.Map) call --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;map&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;1&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;åŒ—äº¬&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;2&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;ä¸Šæµ·&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;3&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;å¹¿å·&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;4&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;æ·±åœ³&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/map&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- results in a setAddressProp(java.util.Properties) call --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressProp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;props&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;prop</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;one&#34;</span><span style="font-weight:bold">&gt;</span>åŒ—äº¬<span style="font-weight:bold">&lt;/prop&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;prop</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;two&#34;</span><span style="font-weight:bold">&gt;</span>ä¸Šæµ·<span style="font-weight:bold">&lt;/prop&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;prop</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;three&#34;</span><span style="font-weight:bold">&gt;</span>å¹¿å·<span style="font-weight:bold">&lt;/prop&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;prop</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;four&#34;</span><span style="font-weight:bold">&gt;</span>æ·±åœ³<span style="font-weight:bold">&lt;/prop&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/props&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç¨‹åº</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        JavaCollection jc=(JavaCollection)context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;javaCollection&#34;</span>);
</span></span><span style="display:flex;"><span>        jc.<span style="color:#007f7f">getAddressList</span>();
</span></span><span style="display:flex;"><span>        jc.<span style="color:#007f7f">getAddressSet</span>();
</span></span><span style="display:flex;"><span>        jc.<span style="color:#007f7f">getAddressMap</span>();
</span></span><span style="display:flex;"><span>        jc.<span style="color:#007f7f">getAddressProp</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
List Elements :[åŒ—äº¬, ä¸Šæµ·, å¹¿å·, æ·±åœ³]
Set Elements :[åŒ—äº¬, ä¸Šæµ·, å¹¿å·, æ·±åœ³]
Map Elements :{1=åŒ—äº¬, 2=ä¸Šæµ·, 3=å¹¿å·, 4=æ·±åœ³}
Property Elements :{two=ä¸Šæµ·, one=åŒ—äº¬, three=å¹¿å·, four=æ·±åœ³}</p>
<p>åœ¨é›†åˆä¸­æ³¨å†Œbeançš„å¼•ç”¨ï¼Œä¸‹é¢çš„ Bean å®šä¹‰å°†å¸®åŠ©ä½ ç†è§£å¦‚ä½•æ³¨å…¥ bean çš„å¼•ç”¨ä½œä¸ºé›†åˆçš„å…ƒç´ ã€‚ç”šè‡³ä½ å¯ä»¥å°†å¼•ç”¨å’Œå€¼æ··åˆåœ¨ä¸€èµ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Bean Definition to handle references and values --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!-- Passing bean reference  for java.util.List --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressList&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;list&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;address1&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;address2&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;value&gt;</span>Pakistan<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;/list&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!-- Passing bean reference  for java.util.Set --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressSet&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;set&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;address1&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;address2&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;value&gt;</span>Pakistan<span style="font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;/set&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">&lt;!-- Passing bean reference  for java.util.Map --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;addressMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;map&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;one&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;INDIA&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key =</span><span style="color:#0ff;font-weight:bold">&#34;two&#34;</span> <span style="color:#007f7f">value-ref=</span><span style="color:#0ff;font-weight:bold">&#34;address1&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;entry</span> <span style="color:#007f7f">key =</span><span style="color:#0ff;font-weight:bold">&#34;three&#34;</span> <span style="color:#007f7f">value-ref=</span><span style="color:#0ff;font-weight:bold">&#34;address2&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="font-weight:bold">&lt;/map&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨å…¥ null å’Œç©ºå­—ç¬¦ä¸²çš„å€¼</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;exampleBean&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›¸å½“äº Java ä»£ç ï¼šexampleBean.setEmail(&rdquo;&rdquo;)</p>
<p>å¦‚æœä½ éœ€è¦ä¼ é€’ä¸€ä¸ª NULL å€¼</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;...&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;exampleBean&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;null/&gt;&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›¸å½“äº Java ä»£ç ï¼šexampleBean.setEmail(null)</p>
<h1 id="beançš„è‡ªåŠ¨è£…é…">beançš„è‡ªåŠ¨è£…é…<a hidden class="anchor" aria-hidden="true" href="#beançš„è‡ªåŠ¨è£…é…">#</a></h1>
<p>Spring å®¹å™¨å¯ä»¥åœ¨ä¸ä½¿ç”¨<code>&lt;constructor-arg&gt;å’Œ&lt;property&gt;</code>å…ƒç´ çš„æƒ…å†µä¸‹è‡ªåŠ¨è£…é…ç›¸äº’åä½œçš„ bean ä¹‹é—´çš„å…³ç³»ï¼Œè¿™æ ·å¯ä»¥ç¼©çŸ­xmlæ–‡ä»¶ã€‚</p>
<h2 id="byname">byName<a hidden class="anchor" aria-hidden="true" href="#byname">#</a></h2>
<p>è¿™ç§æ¨¡å¼ç”±å±æ€§åç§°æŒ‡å®šè‡ªåŠ¨è£…é…ã€‚åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ beans çš„ auto-wire å±æ€§è®¾ç½®ä¸º byNameã€‚
ç„¶åï¼Œå®ƒå°è¯•å°†å®ƒçš„å±æ€§ä¸é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸ºç›¸åŒåç§°çš„ beans è¿›è¡ŒåŒ¹é…å’Œè¿æ¥ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå®ƒå°†æ³¨å…¥è¿™äº› beansï¼Œå¦åˆ™ï¼Œå®ƒå°†æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸€ä¸ª bean å®šä¹‰è®¾ç½®ä¸ºè‡ªåŠ¨è£…é… byNameï¼Œå¹¶ä¸”å®ƒåŒ…å« spellChecker å±æ€§ï¼Œå³ï¼Œå®ƒæœ‰ä¸€ä¸ª setSpellChecker(&hellip;) æ–¹æ³•ï¼Œé‚£ä¹ˆ Spring å°±ä¼šæŸ¥æ‰¾å®šä¹‰åä¸º spellChecker çš„ beanï¼Œå¹¶ä¸”ç”¨å®ƒæ¥è®¾ç½®è¿™ä¸ªå±æ€§ã€‚ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨<code>&lt;property&gt;</code>æ ‡ç­¾è¿æ¥å…¶ä½™çš„å±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­å°†è¯´æ˜è¿™ä¸ªæ¦‚å¿µã€‚æ³¨ï¼šå¿…é¡»æœ‰setæ–¹æ³•ï¼Œspringæ‰èƒ½é€šè¿‡byNameæ‰¾åˆ°bean</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSpellChecker( SpellChecker spellChecker ){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker getSpellChecker() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setName(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getName() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck() {
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        TextEditor te = (TextEditor) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span>);
</span></span><span style="display:flex;"><span>        te.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­£å¸¸æƒ…å†µä¸‹çš„é…ç½®æ–‡ä»¶ Beans.xml æ–‡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;?xml version=<span style="color:#0ff;font-weight:bold">&#34;1.0&#34;</span> encoding=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;beans xmlns=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    xmlns:xsi=<span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    xsi:schemaLocation=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   &lt;!-- Definition <span style="color:#fff;font-weight:bold">for</span> textEditor bean --&gt;
</span></span><span style="display:flex;"><span>   &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.TextEditor&#34;</span>&gt;
</span></span><span style="display:flex;"><span>       &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> ref=<span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>       &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;name&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Generic Text Editor&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>   &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   &lt;!-- Definition <span style="color:#fff;font-weight:bold">for</span> spellChecker bean --&gt;
</span></span><span style="display:flex;"><span>   &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.SpellChecker&#34;</span>&gt;
</span></span><span style="display:flex;"><span>   &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/beans&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ è¦ä½¿ç”¨è‡ªåŠ¨è£…é… â€œbyNameâ€</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>&lt;?xml version=<span style="color:#0ff;font-weight:bold">&#34;1.0&#34;</span> encoding=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>&lt;beans xmlns=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       xmlns:xsi=<span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       xsi:schemaLocation=<span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;!-- Definition <span style="color:#fff;font-weight:bold">for</span> textEditor bean --&gt;
</span></span><span style="display:flex;"><span>    &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.TextEditor&#34;</span> autowire=<span style="color:#0ff;font-weight:bold">&#34;byName&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;property name=<span style="color:#0ff;font-weight:bold">&#34;name&#34;</span> value=<span style="color:#0ff;font-weight:bold">&#34;Generic Text Editor&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;!-- Definition <span style="color:#fff;font-weight:bold">for</span> spellChecker bean --&gt;
</span></span><span style="display:flex;"><span>    &lt;bean id=<span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> class=<span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.SpellChecker&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/bean&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/beans&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h2 id="bytype">byType<a hidden class="anchor" aria-hidden="true" href="#bytype">#</a></h2>
<p>è¿™ç§æ¨¡å¼ç”±å±æ€§ç±»å‹æŒ‡å®šè‡ªåŠ¨è£…é…ã€‚åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ beans çš„ autowire å±æ€§è®¾ç½®ä¸º byTypeã€‚ç„¶åï¼Œå¦‚æœå®ƒçš„ type æ°å¥½ä¸é…ç½®æ–‡ä»¶ä¸­ beans åç§°ä¸­çš„ä¸€ä¸ªç›¸åŒ¹é…ï¼Œå®ƒå°†å°è¯•åŒ¹é…å’Œè¿æ¥å®ƒçš„å±æ€§ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå®ƒå°†æ³¨å…¥è¿™äº› beansï¼Œå¦åˆ™ï¼Œå®ƒå°†æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸€ä¸ª bean å®šä¹‰è®¾ç½®ä¸ºè‡ªåŠ¨è£…é… byTypeï¼Œå¹¶ä¸”å®ƒåŒ…å« SpellChecker ç±»å‹çš„spellChecker å±æ€§ï¼Œé‚£ä¹ˆ Spring å°±ä¼šæŸ¥æ‰¾å®šä¹‰åä¸º SpellChecker çš„ beanï¼Œå¹¶ä¸”ç”¨å®ƒæ¥è®¾ç½®è¿™ä¸ªå±æ€§ã€‚ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨<code>&lt;property&gt;</code>æ ‡ç­¾è¿æ¥å…¶ä½™å±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­å°†è¯´æ˜è¿™ä¸ªæ¦‚å¿µï¼Œä½ ä¼šå‘ç°å’Œä¸Šé¢çš„ä¾‹å­æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé™¤äº† XML é…ç½®æ–‡ä»¶å·²ç»è¢«æ”¹å˜ã€‚</p>
<p>ç»§ç»­ä½¿ç”¨ä¸Šè¾¹byNameçš„ä¾‹å­ï¼Œåªæ”¹å˜Beans.xmlä¸­autowireçš„å±æ€§å€¼
<code>autowire=&quot;byType&quot;</code></p>
<p>è¿è¡Œç»“æœ
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h2 id="ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…">ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…<a hidden class="anchor" aria-hidden="true" href="#ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…">#</a></h2>
<p>è¿™ç§æ¨¡å¼ä¸ byType éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒåº”ç”¨äºæ„é€ å™¨å‚æ•°ã€‚åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ beans çš„ autowire å±æ€§è®¾ç½®ä¸º constructorã€‚ç„¶åï¼Œå®ƒå°è¯•æŠŠå®ƒçš„æ„é€ å‡½æ•°çš„å‚æ•°ä¸é…ç½®æ–‡ä»¶ä¸­ beans åç§°ä¸­çš„ä¸€ä¸ªè¿›è¡ŒåŒ¹é…å’Œè¿çº¿ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå®ƒä¼šæ³¨å…¥è¿™äº› beanï¼Œå¦åˆ™ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸€ä¸ª bean å®šä¹‰è®¾ç½®ä¸ºé€šè¿‡æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼Œè€Œä¸”å®ƒæœ‰ä¸€ä¸ªå¸¦æœ‰ SpellChecker ç±»å‹çš„å‚æ•°ä¹‹ä¸€çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆ Spring å°±ä¼šæŸ¥æ‰¾å®šä¹‰åä¸º SpellChecker çš„ beanï¼Œå¹¶ç”¨å®ƒæ¥è®¾ç½®æ„é€ å‡½æ•°çš„å‚æ•°ã€‚ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨<code>&lt;constructor-arg&gt;</code>æ ‡ç­¾è¿æ¥å…¶ä½™å±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­å°†è¯´æ˜è¿™ä¸ªæ¦‚å¿µã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> TextEditor( SpellChecker spellChecker, String name ) {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> SpellChecker getSpellChecker() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> spellChecker;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> String getName() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> name;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck() {
</span></span><span style="display:flex;"><span>      spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        TextEditor te = (TextEditor) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span>);
</span></span><span style="display:flex;"><span>        te.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­£å¸¸æƒ…å†µä¸‹çš„é…ç½®æ–‡ä»¶ Beans.xml æ–‡ä»¶ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for textEditor bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.TextEditor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span>  <span style="color:#007f7f">ref=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Generic Text Editor&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for spellChecker bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.SpellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨è‡ªåŠ¨è£…é… â€œby constructorâ€ï¼Œé‚£ä¹ˆä½ çš„ XML é…ç½®æ–‡ä»¶å°†æˆä¸ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for textEditor bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.TextEditor&#34;</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">autowire=</span><span style="color:#0ff;font-weight:bold">&#34;constructor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;constructor-arg</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Generic Text Editor&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for spellChecker bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;SpellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.SpellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h1 id="åŸºäºæ³¨è§£çš„é…ç½®">åŸºäºæ³¨è§£çš„é…ç½®<a hidden class="anchor" aria-hidden="true" href="#åŸºäºæ³¨è§£çš„é…ç½®">#</a></h1>
<p>ä» Spring 2.5 å¼€å§‹å°±å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥é…ç½®ä¾èµ–æ³¨å…¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨xmlã€‚
åŸºäºæ³¨è§£çš„é…ç½®åœ¨springä¸­é»˜è®¤ä¸æ‰“å¼€ï¼Œæˆ‘ä»¬å°†éœ€è¦åœ¨æˆ‘ä»¬çš„ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/context
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/context/spring-context-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;context:annotation-config/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- bean definitions go here --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="required">@Required<a hidden class="anchor" aria-hidden="true" href="#required">#</a></h2>
<p>@Required æ³¨é‡Šåº”ç”¨äº bean å±æ€§çš„ setter æ–¹æ³•ï¼Œå®ƒè¡¨æ˜å—å½±å“çš„ bean å±æ€§åœ¨é…ç½®æ—¶å¿…é¡»æ”¾åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™å®¹å™¨å°±ä¼šæŠ›å‡ºä¸€ä¸ª BeanInitializationException å¼‚å¸¸ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>public class Student {
</span></span><span style="display:flex;"><span>    private Integer age;
</span></span><span style="display:flex;"><span>    private String name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    public Integer getAge() {
</span></span><span style="display:flex;"><span>        return age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Required
</span></span><span style="display:flex;"><span>    public void setAge(Integer age) {
</span></span><span style="display:flex;"><span>        this.age = age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    public String getName() {
</span></span><span style="display:flex;"><span>        return name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Required
</span></span><span style="display:flex;"><span>    public void setName(String name) {
</span></span><span style="display:flex;"><span>        this.name = name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>public class TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    public static void main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = new ClassPathXmlApplicationContext(&#34;Beans.xml&#34;);
</span></span><span style="display:flex;"><span>        Student student = (Student) context.getBean(&#34;student&#34;);
</span></span><span style="display:flex;"><span>        System.out.println(&#34;Name : &#34; + student.getName() );
</span></span><span style="display:flex;"><span>        System.out.println(&#34;Age : &#34; + student.getAge() );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for student bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;student&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;wjy&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- å…ˆä¸å†™ageå±æ€§ï¼ŒæŸ¥çœ‹ç¨‹åºè¿è¡Œç»“æœ --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;18&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
Name : wjy
Age : 18</p>
<p>æ³¨æ„ï¼šspring 5.1ç‰ˆæœ¬å¼€å§‹ï¼Œ@Requiredæ³¨è§£å·²ç»è¢«æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œä¸è¦å†ä½¿ç”¨è¯¥æ³¨è§£äº†ã€‚
<a href="https://stackoverflow.com/questions/53358568/springs-annotation-type-required-deprecation">å‚è€ƒstackoverflowä¸Šçš„è§£é‡Š</a></p>
<h2 id="autowired">@Autowired<a hidden class="anchor" aria-hidden="true" href="#autowired">#</a></h2>
<p>autowiredè¿™ä¸ªå•è¯æ˜¯è‡ªåŠ¨è¿çº¿ï¼Œè‡ªåŠ¨è£…é…çš„æ„æ€ã€‚è¿™ä¸ªè¯è¯­æœ¬æ¥çš„æ„æ€æ˜¯æŒ‡çš„ä¸€äº›å·¥ä¸šä¸Šçš„ç”¨æœºå™¨ä»£æ›¿äººå£ï¼Œè‡ªåŠ¨å°†ä¸€äº›éœ€è¦å®Œæˆçš„ç»„è£…ä»»åŠ¡ï¼Œæˆ–è€…åˆ«çš„ä¸€äº›ä»»åŠ¡å®Œæˆã€‚</p>
<p>è¯¥æ³¨è§£å¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæ„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…çš„å·¥ä½œã€‚é€šè¿‡ @Autowiredçš„ä½¿ç”¨æ¥æ¶ˆé™¤ set ï¼Œgetæ–¹æ³•ã€‚åœ¨ä½¿ç”¨@Autowiredä¹‹å‰ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªbeané…ç½®å±æ€§æ—¶ï¼Œæ˜¯è¿™æ ·çš„
<code>&lt;property name=&quot;å±æ€§å&quot; value=&quot; å±æ€§å€¼&quot;/&gt; </code>
é€šè¿‡è¿™ç§æ–¹å¼æ¥ï¼Œé…ç½®æ¯”è¾ƒç¹çï¼Œè€Œä¸”ä»£ç æ¯”è¾ƒå¤šã€‚åœ¨Spring 2.5 å¼•å…¥äº† @Autowired æ³¨é‡Šã€‚</p>
<p>æœ¬æ¥ autowire æ˜¯åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®çš„ï¼Œå¯ä»¥è®¾ç½®ä¸ºbyNameã€byTypeã€constructorå’Œautodetectã€‚@Autowiredæ˜¯ç”¨åœ¨JavaBeanä¸­çš„æ³¨è§£ï¼Œé€šè¿‡byTypeå½¢å¼ï¼Œç”¨æ¥ç»™æŒ‡å®šçš„å­—æ®µæˆ–æ–¹æ³•æ³¨å…¥æ‰€éœ€çš„å¤–éƒ¨èµ„æºã€‚ä¸¤è€…çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯èƒ½å‡å°‘æˆ–è€…æ¶ˆé™¤å±æ€§æˆ–æ„é€ å™¨å‚æ•°çš„è®¾ç½®ï¼Œåªæ˜¯é…ç½®åœ°æ–¹ä¸ä¸€æ ·è€Œå·²ã€‚</p>
<p>autowireå››ç§æ¨¡å¼çš„åŒºåˆ«ï¼š</p>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>no</td>
<td>è¿™æ˜¯é»˜è®¤çš„è®¾ç½®ï¼Œå®ƒæ„å‘³ç€æ²¡æœ‰è‡ªåŠ¨è£…é…</td>
</tr>
<tr>
<td>byName</td>
<td>æ ¹æ®å±æ€§åè‡ªåŠ¨è£…é…ã€‚Spring å®¹å™¨çœ‹åˆ°åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ bean çš„è‡ªåŠ¨è£…é…çš„å±æ€§è®¾ç½®ä¸º byNameï¼Œå¹¶æ ¹æ®åå­—æŸ¥æ‰¾ä¸å±æ€§å®Œå…¨ä¸€è‡´çš„beanï¼Œå¹¶å°†å…¶ä¸å±æ€§è‡ªåŠ¨è£…é…ã€‚ä¾‹å¦‚ï¼šåœ¨beançš„å®šä¹‰ä¸­ï¼Œå°†autowireå±æ€§è®¾ç½®ä¸ºbyNameï¼Œè€Œè¯¥beanåŒ…å« masterå±æ€§ï¼ˆåŒæ—¶æä¾›setMasteræ–¹æ³•ï¼‰ï¼Œspringå°±ä¼šæŸ¥æ‰¾åä¸ºmasterçš„beanï¼Œå¹¶ç”¨æ‰¾åˆ°çš„beanè£…é…ç»™masterå±æ€§</td>
</tr>
<tr>
<td>byType</td>
<td>æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨è£…é…ã€‚Spring å®¹å™¨çœ‹åˆ°åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ bean çš„è‡ªåŠ¨è£…é…çš„å±æ€§è®¾ç½®ä¸º byTypeã€‚ç„¶åå¦‚æœå®ƒçš„ç±»å‹åŒ¹é…é…ç½®æ–‡ä»¶ä¸­çš„ä¸€ä¸ªç¡®åˆ‡çš„ bean åç§°ï¼Œå®ƒå°†å°è¯•åŒ¹é…å’Œè¿æ¥å±æ€§çš„ç±»å‹ã€‚å¦‚æœå­˜åœ¨ä¸æ­¢ä¸€ä¸ªè¿™æ ·çš„ beanï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</td>
</tr>
<tr>
<td>constructor</td>
<td>ç±»ä¼¼äº byTypeï¼Œä½†è¯¥ç±»å‹é€‚ç”¨äºæ„é€ å‡½æ•°å‚æ•°ç±»å‹ã€‚å¦‚æœåœ¨å®¹å™¨ä¸­æ²¡æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„ beanï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</td>
</tr>
<tr>
<td>autodetectï¼ˆ3.0ç‰ˆæœ¬ä¸æ”¯æŒï¼‰</td>
<td>é€šè¿‡beanç±»çš„è‡ªçœæœºåˆ¶ï¼Œ Springé¦–å…ˆå°è¯•é€šè¿‡ constructor ä½¿ç”¨è‡ªåŠ¨è£…é…æ¥è¿æ¥ï¼Œå¦‚æœå®ƒä¸æ‰§è¡Œï¼ŒSpring å°è¯•é€šè¿‡ byType æ¥è‡ªåŠ¨è£…é…ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="åœ¨setteræ–¹æ³•ä¸Šä½¿ç”¨autowired">åœ¨Setteræ–¹æ³•ä¸Šä½¿ç”¨@Autowired<a hidden class="anchor" aria-hidden="true" href="#åœ¨setteræ–¹æ³•ä¸Šä½¿ç”¨autowired">#</a></h3>
<p>ä½ å¯ä»¥åœ¨ JavaBeanä¸­çš„ setter æ–¹æ³•ä¸­ä½¿ç”¨ @Autowired æ³¨è§£ã€‚å½“ Springé‡åˆ°ä¸€ä¸ªåœ¨ setter æ–¹æ³•ä¸­ä½¿ç”¨çš„ @Autowired æ³¨è§£ï¼Œå®ƒä¼šåœ¨æ–¹æ³•ä¸­æ‰§è¡Œ byType è‡ªåŠ¨è£…é…ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>   @Autowired
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setSpellChecker( SpellChecker spellChecker ){
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> SpellChecker getSpellChecker( ) {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> spellChecker;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck() {
</span></span><span style="display:flex;"><span>      spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> SpellChecker(){
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling(){
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>   }  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        TextEditor te = (TextEditor) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span>);
</span></span><span style="display:flex;"><span>        te.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>beans.xml</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ³¨æ„è¦åŠ è¿™ä¸ªå±æ€§--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;context:annotation-config/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for textEditor bean without constructor-arg  --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;textEditor&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.TextEditor&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- Definition for spellChecker bean --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;spellChecker&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.SpellChecker&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h3 id="åœ¨å±æ€§ä¸Šä½¿ç”¨autowired">åœ¨å±æ€§ä¸Šä½¿ç”¨@Autowired<a hidden class="anchor" aria-hidden="true" href="#åœ¨å±æ€§ä¸Šä½¿ç”¨autowired">#</a></h3>
<p>å¯ä»¥å°† @Autowired å†™åœ¨å±æ€§ä¸Šï¼Œè¿™æ ·å°±ä¸ç”¨å†™è¯¥å±æ€§çš„setteræ–¹æ³•äº†ã€‚
åªä¿®æ”¹TextEditorï¼Œå…¶ä»–ä¸å˜</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>    @Autowired
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TextEditor() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside TextEditor constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker getSpellChecker( ){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck(){
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
Inside TextEditor constructor.
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h3 id="åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨autowired">åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨@Autowired<a hidden class="anchor" aria-hidden="true" href="#åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨autowired">#</a></h3>
<p>åªä¿®æ”¹TextEditorï¼Œå…¶ä»–ä¸å˜</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Autowired
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TextEditor(SpellChecker spellChecker){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside TextEditor constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck(){
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside TextEditor constructor.
Inside SpellChecker constructor.
Inside checkSpelling.</p>
<h3 id="autowiredrequired--false">@Autowired(required = false)<a hidden class="anchor" aria-hidden="true" href="#autowiredrequired--false">#</a></h3>
<p>è¡¨ç¤ºè¯¥å±æ€§ä¸æ˜¯å¿…é¡»çš„</p>
<h3 id="ä½¿ç”¨autowiredçš„åŸç†æ˜¯ä»€ä¹ˆ">ä½¿ç”¨@Autowiredçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨autowiredçš„åŸç†æ˜¯ä»€ä¹ˆ">#</a></h3>
<p>å…¶å®åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªAutowiredAnnotationBeanPostProcessoråç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚
<code>&lt;bean class=&quot;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&quot;/&gt;  </code></p>
<p><a href="https://my.oschina.net/HeliosFly/blog/203902">@Autowiredè¯¦ç»†è§£è¯»</a></p>
<h2 id="qualifier">@Qualifier<a hidden class="anchor" aria-hidden="true" href="#qualifier">#</a></h2>
<p>å½“ä½ åˆ›å»ºå¤šä¸ªå…·æœ‰ç›¸åŒç±»å‹çš„ bean æ—¶ï¼Œå¹¶ä¸”æƒ³è¦ç”¨ä¸€ä¸ªå±æ€§åªä¸ºå®ƒä»¬å…¶ä¸­çš„ä¸€ä¸ªè¿›è¡Œè£…é…ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ @Qualifier æ³¨é‡Šå’Œ @Autowired æ³¨é‡Šé€šè¿‡æŒ‡å®šå“ªä¸€ä¸ªçœŸæ­£çš„ bean å°†ä¼šè¢«è£…é…æ¥æ¶ˆé™¤æ··ä¹±ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Student {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> Integer age;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> String name;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setAge(Integer age) {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">age</span> = age;
</span></span><span style="display:flex;"><span>   }   
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Integer getAge() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> age;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setName(String name) {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">name</span> = name;
</span></span><span style="display:flex;"><span>   }  
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> String getName() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> name;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Profile {
</span></span><span style="display:flex;"><span>   @Autowired
</span></span><span style="display:flex;"><span>   @Qualifier(<span style="color:#0ff;font-weight:bold">&#34;student1&#34;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> Student student;
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Profile(){
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside Profile constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> printAge() {
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Age : &#34;</span> + student.<span style="color:#007f7f">getAge</span>() );
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> printName() {
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Name : &#34;</span> + student.<span style="color:#007f7f">getName</span>() );
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> MainApp {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>      ApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>      Profile profile = (Profile) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;profile&#34;</span>);
</span></span><span style="display:flex;"><span>      profile.<span style="color:#007f7f">printAge</span>();
</span></span><span style="display:flex;"><span>      profile.<span style="color:#007f7f">printName</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/context
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    http://www.springframework.org/schema/context/spring-context-3.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;context:annotation-config/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for profile bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;profile&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.Profile&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for student1 bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;student1&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;wjy&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;20&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">&lt;!-- Definition for student2 bean --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;student2&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.tutorialspoint.Student&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;name&#34;</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;wm&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span>  <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;18&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœ
Inside Profile constructor.
Age : 20
Name : wjy</p>
<h2 id="jsr-250">JSR-250<a hidden class="anchor" aria-hidden="true" href="#jsr-250">#</a></h2>
<h3 id="postconstruct-å’Œ-predestroy-æ³¨é‡Š">@PostConstruct å’Œ @PreDestroy æ³¨é‡Š<a hidden class="anchor" aria-hidden="true" href="#postconstruct-å’Œ-predestroy-æ³¨é‡Š">#</a></h3>
<p>å‰é¢æˆ‘ä»¬ä½¿ç”¨è¿‡<code>init-method å’Œ destroy-method</code>ï¼Œåˆ†åˆ«ä¼šåœ¨beanåˆå§‹åŒ–å‰è°ƒç”¨ï¼Œå’Œbeané”€æ¯å‰è°ƒç”¨ã€‚@PostConstructå¯¹åº”init-methodï¼Œ@PreDestroyå¯¹åº”destroy-methodã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage(String message){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message</span>  = message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String getMessage(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Your Message : &#34;</span> + message);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @PostConstruct
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> init(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bean is going through init.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @PreDestroy
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> destroy(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Bean will destroy now.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        AbstractApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;Beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        HelloWorld obj = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        obj.<span style="color:#007f7f">getMessage</span>();
</span></span><span style="display:flex;"><span>        context.<span style="color:#007f7f">registerShutdownHook</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--æ³¨æ„è¦åŠ è¿™ä¸ªå±æ€§--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;context:annotation-config/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š
Bean is going through init.
Your Message : Hello World!
Bean will destroy now.</p>
<h3 id="resource">@Resource<a hidden class="anchor" aria-hidden="true" href="#resource">#</a></h3>
<p>@Resourceè£…é…é¡ºåº</p>
<ol>
<li>å¦‚æœåŒæ—¶æŒ‡å®šäº†nameå’Œtypeï¼Œåˆ™ä»Springä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°å”¯ä¸€åŒ¹é…çš„beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸</li>
<li>å¦‚æœæŒ‡å®šäº†nameï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾åç§°ï¼ˆidï¼‰åŒ¹é…çš„beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸</li>
<li>å¦‚æœæŒ‡å®šäº†typeï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°ç±»å‹åŒ¹é…çš„å”¯ä¸€beanè¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°æˆ–è€…æ‰¾åˆ°å¤šä¸ªï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®šnameï¼Œåˆæ²¡æœ‰æŒ‡å®štypeï¼Œåˆ™è‡ªåŠ¨æŒ‰ç…§byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™å›é€€ä¸ºä¸€ä¸ªåŸå§‹ç±»å‹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ™è‡ªåŠ¨è£…é…ï¼›</li>
</ol>
<p>@Resourceå’Œ@Autowiredçš„åŒºåˆ«</p>
<ul>
<li>
<p>beanå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œ
@Resourceä½¿ç”¨çš„æ˜¯CommonAnnotationBeanPostProcessoråç½®å¤„ç†å™¨ï¼Œ
è€Œ@Autowiredä½¿ç”¨çš„æ˜¯AutowiredAnnotationBeanPostProcessoråç½®å¤„ç†å™¨</p>
</li>
<li>
<p>@Autowiredå¯ä»¥ç”¨åœ¨æ„é€ æ–¹æ³•ä¸Šï¼Œ@Resourceä¸å¯ä»¥</p>
</li>
<li>
<p>@Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ˆbyTypeï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸nullå€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalse
@Resourceé»˜è®¤æŒ‰ç…§åç§°è¿›è¡Œè£…é…ï¼ˆbyNameï¼‰ï¼Œåç§°å¯ä»¥é€šè¿‡nameå±æ€§è¿›è¡ŒæŒ‡å®šï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šnameå±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåè¿›è¡Œå®‰è£…åç§°æŸ¥æ‰¾ï¼Œå¦‚æœæ³¨è§£å†™åœ¨setteræ–¹æ³•ä¸Šé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœnameå±æ€§ä¸€æ—¦æŒ‡å®šï¼Œå°±åªä¼šæŒ‰ç…§åç§°è¿›è¡Œè£…é…ã€‚</p>
</li>
</ul>
<h1 id="spring-åŸºäº-java-çš„é…ç½®">Spring åŸºäº Java çš„é…ç½®<a hidden class="anchor" aria-hidden="true" href="#spring-åŸºäº-java-çš„é…ç½®">#</a></h1>
<h2 id="configuration-å’Œ-bean">@Configuration å’Œ @Bean<a hidden class="anchor" aria-hidden="true" href="#configuration-å’Œ-bean">#</a></h2>
<p>å¸¦æœ‰@Configurationçš„ç±»ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»å¯ä»¥ä½¿ç”¨ Spring IoC å®¹å™¨ä½œä¸º bean å®šä¹‰çš„æ¥æºã€‚
å¸¦æœ‰ @Bean çš„æ³¨è§£æ–¹æ³•å°†è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åº”è¯¥è¢«æ³¨å†Œä¸ºåœ¨ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorldConfig {
</span></span><span style="display:flex;"><span>   @Bean 
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> HelloWorld helloWorld(){
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> HelloWorld();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä»£ç å°†ç­‰åŒäºä¸‹é¢çš„ XML é…ç½®ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¸¦æœ‰ @Beanæ³¨è§£çš„æ–¹æ³•ï¼Œæ–¹æ³•åå°±æ˜¯beançš„idï¼Œå®ƒåˆ›å»ºå¹¶è¿”å›å®é™…çš„ beanã€‚é…ç½®ç±»å¯ä»¥å£°æ˜å¤šä¸ª @Beanã€‚ä¸€æ—¦å®šä¹‰äº†é…ç½®ç±»ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ AnnotationConfigApplicationContext æ¥åŠ è½½å¹¶æŠŠä»–ä»¬æä¾›ç»™ Spring å®¹å™¨ã€‚</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>   ApplicationContext ctx = 
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">new</span> AnnotationConfigApplicationContext(HelloWorldConfig.<span style="color:#007f7f">class</span>); 
</span></span><span style="display:flex;"><span>   HelloWorld helloWorld = ctx.<span style="color:#007f7f">getBean</span>(HelloWorld.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   helloWorld.<span style="color:#007f7f">setMessage</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span>);
</span></span><span style="display:flex;"><span>   helloWorld.<span style="color:#007f7f">getMessage</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥åŠ è½½å„ç§é…ç½®ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>   AnnotationConfigApplicationContext ctx = <span style="color:#fff;font-weight:bold">new</span> AnnotationConfigApplicationContext();
</span></span><span style="display:flex;"><span>   ctx.<span style="color:#007f7f">register</span>(AppConfig.<span style="color:#007f7f">class</span>, OtherConfig.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   ctx.<span style="color:#007f7f">register</span>(AdditionalConfig.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   ctx.<span style="color:#007f7f">refresh</span>();
</span></span><span style="display:flex;"><span>   MyService myService = ctx.<span style="color:#007f7f">getBean</span>(MyService.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   myService.<span style="color:#007f7f">doStuff</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç®€å•ç¤ºä¾‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorldConfig {
</span></span><span style="display:flex;"><span>   @Bean 
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> HelloWorld helloWorld(){
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> HelloWorld();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">private</span> String message;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage(String message){
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message</span>  = message;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> getMessage(){
</span></span><span style="display:flex;"><span>      System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Your Message : &#34;</span> + message);
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext ctx = <span style="color:#fff;font-weight:bold">new</span> AnnotationConfigApplicationContext(HelloWorldConfig.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        HelloWorld helloWorld = ctx.<span style="color:#007f7f">getBean</span>(HelloWorld.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        helloWorld.<span style="color:#007f7f">setMessage</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span>);
</span></span><span style="display:flex;"><span>        helloWorld.<span style="color:#007f7f">getMessage</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸éœ€è¦xmlé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œä¸»ç¨‹åºï¼š
Your Message : Hello World!</p>
<h2 id="æ³¨å…¥-bean-çš„ä¾èµ–æ€§">æ³¨å…¥ Bean çš„ä¾èµ–æ€§<a hidden class="anchor" aria-hidden="true" href="#æ³¨å…¥-bean-çš„ä¾èµ–æ€§">#</a></h2>
<p>å½“ @Beans ä¾èµ–å¯¹æ–¹æ—¶ï¼Œè¡¨è¾¾è¿™ç§ä¾èµ–æ€§éå¸¸ç®€å•ï¼Œåªè¦æœ‰ä¸€ä¸ª bean æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppConfig {
</span></span><span style="display:flex;"><span>    @Bean
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Foo foo() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Foo(bar());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Bean
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> Bar bar() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Bar();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditorConfig {
</span></span><span style="display:flex;"><span>    @Bean 
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TextEditor textEditor(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> TextEditor( spellChecker() );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    @Bean 
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker spellChecker(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> SpellChecker( );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TextEditor {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> SpellChecker spellChecker;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> TextEditor(SpellChecker spellChecker){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside TextEditor constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">spellChecker</span> = spellChecker;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> spellCheck(){
</span></span><span style="display:flex;"><span>        spellChecker.<span style="color:#007f7f">checkSpelling</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> SpellChecker {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> SpellChecker(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside SpellChecker constructor.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkSpelling(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Inside checkSpelling.&#34;</span> );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ApplicationContext ctx = <span style="color:#fff;font-weight:bold">new</span> AnnotationConfigApplicationContext(TextEditorConfig.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        TextEditor textEditor = ctx.<span style="color:#007f7f">getBean</span>(TextEditor.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        textEditor.<span style="color:#007f7f">spellCheck</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸éœ€è¦xmlé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œä¸»ç¨‹åºï¼š
Inside SpellChecker constructor.
Inside TextEditor constructor.
Inside checkSpelling.</p>
<h2 id="import">@Import<a hidden class="anchor" aria-hidden="true" href="#import">#</a></h2>
<p>@import æ³¨è§£å…è®¸ä»å¦ä¸€ä¸ªé…ç½®ç±»ä¸­åŠ è½½ @Bean å®šä¹‰</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConfigA {
</span></span><span style="display:flex;"><span>   @Bean
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> A a() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> A(); 
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//ä½ å¯ä»¥åœ¨å¦ä¸€ä¸ª Bean å£°æ˜ä¸­å¯¼å…¥ä¸Šè¿° Bean å£°æ˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Configuration
</span></span><span style="display:flex;"><span>@Import(ConfigA.<span style="color:#007f7f">class</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ConfigB {
</span></span><span style="display:flex;"><span>   @Bean
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> B b() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> B(); 
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//å½“å®ä¾‹åŒ–ä¸Šä¸‹æ–‡æ—¶ï¼Œä¸éœ€è¦åŒæ—¶æŒ‡å®š ConfigA.class å’Œ ConfigB.classï¼Œåªæä¾›ConfigBå³å¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>   ApplicationContext ctx = 
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">new</span> AnnotationConfigApplicationContext(ConfigB.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">// now both beans A and B will be available...
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   A a = ctx.<span style="color:#007f7f">getBean</span>(A.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>   B b = ctx.<span style="color:#007f7f">getBean</span>(B.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç”Ÿå‘½å‘¨æœŸå›è°ƒ">ç”Ÿå‘½å‘¨æœŸå›è°ƒ<a hidden class="anchor" aria-hidden="true" href="#ç”Ÿå‘½å‘¨æœŸå›è°ƒ">#</a></h2>
<p>@Bean æ³¨è§£æ”¯æŒæŒ‡å®šä»»æ„çš„åˆå§‹åŒ–å’Œé”€æ¯çš„å›è°ƒæ–¹æ³•ï¼Œå°±åƒåœ¨xmlä¸­é…ç½®åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Foo {
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> init() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// initialization logic
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> cleanup() {
</span></span><span style="display:flex;"><span>      <span style="color:#007f7f">// destruction logic
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppConfig {
</span></span><span style="display:flex;"><span>   @Bean(initMethod = <span style="color:#0ff;font-weight:bold">&#34;init&#34;</span>, destroyMethod = <span style="color:#0ff;font-weight:bold">&#34;cleanup&#34;</span> )
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Foo foo() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Foo();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡å®š Bean çš„èŒƒå›´ï¼š@Beané»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ @ScopeæŒ‡å®š</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> AppConfig {
</span></span><span style="display:flex;"><span>   @Bean
</span></span><span style="display:flex;"><span>   @Scope(<span style="color:#0ff;font-weight:bold">&#34;prototype&#34;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">public</span> Foo foo() {
</span></span><span style="display:flex;"><span>      <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">new</span> Foo();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="spring-ä¸­çš„äº‹ä»¶å¤„ç†">Spring ä¸­çš„äº‹ä»¶å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#spring-ä¸­çš„äº‹ä»¶å¤„ç†">#</a></h1>
<p>ApplicationContext æ˜¯Spring çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ç®¡ç† beans çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚å½“åŠ è½½ beans æ—¶ï¼Œ
ApplicationContext ä¼šå‘å¸ƒæŸäº›ç±»å‹çš„äº‹ä»¶ï¼Œä¾‹å¦‚ï¼Œå½“ä¸Šä¸‹æ–‡å¯åŠ¨æ—¶ï¼ŒContextStartedEvent å‘å¸ƒï¼Œ
å½“ä¸Šä¸‹æ–‡åœæ­¢æ—¶ï¼ŒContextStoppedEvent å‘å¸ƒã€‚</p>
<p>ApplicationContext é€šè¿‡ ApplicationEventç±» å’Œ ApplicationListener æ¥å£ï¼Œå¤„ç†äº‹ä»¶ã€‚
å¦‚æœä¸€ä¸ª bean å®ç° ApplicationListenerï¼Œé‚£ä¹ˆæ¯æ¬¡ ApplicationEvent è¢«å‘å¸ƒåˆ° ApplicationContext ä¸Šï¼Œé‚£ä¸ª bean ä¼šè¢«é€šçŸ¥ã€‚
Spring æä¾›äº†ä»¥ä¸‹çš„æ ‡å‡†äº‹ä»¶ï¼š</p>
<ul>
<li>
<p>ContextRefreshedEvent
ApplicationContext è¢«åˆå§‹åŒ–æˆ–åˆ·æ–°æ—¶ï¼Œè¯¥äº‹ä»¶è¢«å‘å¸ƒã€‚è¿™ä¹Ÿå¯ä»¥åœ¨ ConfigurableApplicationContext
æ¥å£ä¸­ä½¿ç”¨ refresh() æ–¹æ³•æ¥å‘ç”Ÿã€‚</p>
</li>
<li>
<p>ContextStartedEvent
å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ start() æ–¹æ³•å¯åŠ¨ ApplicationContext æ—¶ï¼Œè¯¥äº‹ä»¶è¢«
å‘å¸ƒã€‚ä½ å¯ä»¥è°ƒæŸ¥ä½ çš„æ•°æ®åº“ï¼Œæˆ–è€…ä½ å¯ä»¥åœ¨æ¥å—åˆ°è¿™ä¸ªäº‹ä»¶åé‡å¯ä»»ä½•åœæ­¢çš„åº”ç”¨ç¨‹åºã€‚</p>
</li>
<li>
<p>ContextStoppedEvent
å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ stop() æ–¹æ³•åœæ­¢ ApplicationContext æ—¶ï¼Œå‘å¸ƒè¿™ä¸ª
äº‹ä»¶ã€‚ä½ å¯ä»¥åœ¨æ¥å—åˆ°è¿™ä¸ªäº‹ä»¶ååšå¿…è¦çš„æ¸…ç†çš„å·¥ä½œã€‚</p>
</li>
<li>
<p>ContextClosedEvent
å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ close() æ–¹æ³•å…³é—­ ApplicationContext æ—¶ï¼Œè¯¥äº‹ä»¶
è¢«å‘å¸ƒã€‚ä¸€ä¸ªå·²å…³é—­çš„ä¸Šä¸‹æ–‡åˆ°è¾¾ç”Ÿå‘½å‘¨æœŸæœ«ç«¯ï¼›å®ƒä¸èƒ½è¢«åˆ·æ–°æˆ–é‡å¯ã€‚</p>
</li>
<li>
<p>RequestHandledEvent
è¿™æ˜¯ä¸€ä¸ª web-specific äº‹ä»¶ï¼Œå‘Šè¯‰æ‰€æœ‰ bean HTTP è¯·æ±‚å·²ç»è¢«æœåŠ¡ã€‚</p>
</li>
</ul>
<p>ç”±äº Spring çš„äº‹ä»¶å¤„ç†æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªäº‹ä»¶è¢«å‘å¸ƒï¼Œç›´åˆ°æ‰€æœ‰çš„æ¥æ”¶è€…å¾—åˆ°çš„è¯¥æ¶ˆæ¯ï¼Œè¯¥è¿›ç¨‹ä¼šè¢«é˜»å¡å¹¶ä¸”æµç¨‹å°†ä¸ä¼šç»§ç»­ã€‚å¦‚æœä½¿ç”¨äº‹ä»¶ï¼Œåº”è¯¥æ³¨æ„è¿™ä¸€ç‚¹ã€‚</p>
<h2 id="ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶">ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶">#</a></h2>
<p>ä¸ºäº†ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ApplicationListener æ¥å£ï¼Œè¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•onApplicationEvent()</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> HelloWorld {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String message;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setMessage(String message){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">message</span>  = message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> getMessage(){
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Your Message : &#34;</span> + message);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CStartEventHandler <span style="color:#fff;font-weight:bold">implements</span> ApplicationListener&lt;ContextStartedEvent&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> onApplicationEvent(ContextStartedEvent event) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ContextStoppedEvent Received&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CStopEventHandler <span style="color:#fff;font-weight:bold">implements</span> ApplicationListener&lt;ContextStoppedEvent&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> onApplicationEvent(ContextStoppedEvent event) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;ContextStoppedEvent Received&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ConfigurableApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        context.<span style="color:#007f7f">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        HelloWorld obj = (HelloWorld) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span>);
</span></span><span style="display:flex;"><span>        obj.<span style="color:#007f7f">getMessage</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        context.<span style="color:#007f7f">stop</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;helloWorld&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.HelloWorld&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;message&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;Hello World!&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;cStartEventHandler&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.CStartEventHandler&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;cStopEventHandler&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.CStopEventHandler&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç¨‹åºè¿è¡Œç»“æœ
ContextStoppedEvent Received
Your Message : Hello World!
ContextStoppedEvent Received</p>
<h1 id="spring-ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶">Spring ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶<a hidden class="anchor" aria-hidden="true" href="#spring-ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶">#</a></h1>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CustomEvent <span style="color:#fff;font-weight:bold">extends</span> ApplicationEvent {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> CustomEvent(Object source) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>(source);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String toString() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;My Custom Event&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CustomEventPublisher <span style="color:#fff;font-weight:bold">implements</span> ApplicationEventPublisherAware {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> ApplicationEventPublisher applicationEventPublisher;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.<span style="color:#007f7f">applicationEventPublisher</span> = applicationEventPublisher;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> publish(){
</span></span><span style="display:flex;"><span>        CustomEvent customEvent = <span style="color:#fff;font-weight:bold">new</span> CustomEvent(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        applicationEventPublisher.<span style="color:#007f7f">publishEvent</span>(customEvent);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> CustomEventHandler <span style="color:#fff;font-weight:bold">implements</span> ApplicationListener&lt;CustomEvent&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> onApplicationEvent(CustomEvent event) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(event.<span style="color:#007f7f">toString</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> TestSpring {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        ConfigurableApplicationContext context = <span style="color:#fff;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#0ff;font-weight:bold">&#34;beans.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        CustomEventPublisher cvp = (CustomEventPublisher) context.<span style="color:#007f7f">getBean</span>(<span style="color:#0ff;font-weight:bold">&#34;customEventPublisher&#34;</span>);
</span></span><span style="display:flex;"><span>        cvp.<span style="color:#007f7f">publish</span>();
</span></span><span style="display:flex;"><span>        cvp.<span style="color:#007f7f">publish</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;customEventHandler&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.CustomEventHandler&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;customEventPublisher&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;com.wjy.spring.CustomEventPublisher&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸»ç¨‹åºè¿è¡Œç»“æœï¼š
My Custom Event
My Custom Event</p>
<p><a href="https://www.w3cschool.cn/wkspring/j3181mm3.html">å‚è€ƒ</a></p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://funny-toffee-4aa7c3.netlify.app/en/tags/spring/">spring</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://funny-toffee-4aa7c3.netlify.app/en/">Wjy&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
